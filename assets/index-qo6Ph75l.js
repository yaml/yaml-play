var Cw=Object.defineProperty;var Pw=(n,e,t)=>e in n?Cw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var km=(n,e,t)=>Pw(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function Iy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var bh={exports:{}},ko={},Sh={exports:{}},Ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function Nw(){if(wm)return Ee;wm=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function x(E){return E===null||typeof E!="object"?null:(E=m&&E[m]||E["@@iterator"],typeof E=="function"?E:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function C(E,D,Z){this.props=E,this.context=D,this.refs=S,this.updater=Z||k}C.prototype.isReactComponent={},C.prototype.setState=function(E,D){if(typeof E!="object"&&typeof E!="function"&&E!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,E,D,"setState")},C.prototype.forceUpdate=function(E){this.updater.enqueueForceUpdate(this,E,"forceUpdate")};function P(){}P.prototype=C.prototype;function M(E,D,Z){this.props=E,this.context=D,this.refs=S,this.updater=Z||k}var T=M.prototype=new P;T.constructor=M,b(T,C.prototype),T.isPureReactComponent=!0;var B=Array.isArray,L=Object.prototype.hasOwnProperty,F={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function W(E,D,Z){var le,ye={},ne=null,he=null;if(D!=null)for(le in D.ref!==void 0&&(he=D.ref),D.key!==void 0&&(ne=""+D.key),D)L.call(D,le)&&!j.hasOwnProperty(le)&&(ye[le]=D[le]);var Se=arguments.length-2;if(Se===1)ye.children=Z;else if(1<Se){for(var Ce=Array(Se),ve=0;ve<Se;ve++)Ce[ve]=arguments[ve+2];ye.children=Ce}if(E&&E.defaultProps)for(le in Se=E.defaultProps,Se)ye[le]===void 0&&(ye[le]=Se[le]);return{$$typeof:n,type:E,key:ne,ref:he,props:ye,_owner:F.current}}function Y(E,D){return{$$typeof:n,type:E.type,key:D,ref:E.ref,props:E.props,_owner:E._owner}}function K(E){return typeof E=="object"&&E!==null&&E.$$typeof===n}function V(E){var D={"=":"=0",":":"=2"};return"$"+E.replace(/[=:]/g,function(Z){return D[Z]})}var Q=/\/+/g;function J(E,D){return typeof E=="object"&&E!==null&&E.key!=null?V(""+E.key):D.toString(36)}function ee(E,D,Z,le,ye){var ne=typeof E;(ne==="undefined"||ne==="boolean")&&(E=null);var he=!1;if(E===null)he=!0;else switch(ne){case"string":case"number":he=!0;break;case"object":switch(E.$$typeof){case n:case e:he=!0}}if(he)return he=E,ye=ye(he),E=le===""?"."+J(he,0):le,B(ye)?(Z="",E!=null&&(Z=E.replace(Q,"$&/")+"/"),ee(ye,D,Z,"",function(ve){return ve})):ye!=null&&(K(ye)&&(ye=Y(ye,Z+(!ye.key||he&&he.key===ye.key?"":(""+ye.key).replace(Q,"$&/")+"/")+E)),D.push(ye)),1;if(he=0,le=le===""?".":le+":",B(E))for(var Se=0;Se<E.length;Se++){ne=E[Se];var Ce=le+J(ne,Se);he+=ee(ne,D,Z,Ce,ye)}else if(Ce=x(E),typeof Ce=="function")for(E=Ce.call(E),Se=0;!(ne=E.next()).done;)ne=ne.value,Ce=le+J(ne,Se++),he+=ee(ne,D,Z,Ce,ye);else if(ne==="object")throw D=String(E),Error("Objects are not valid as a React child (found: "+(D==="[object Object]"?"object with keys {"+Object.keys(E).join(", ")+"}":D)+"). If you meant to render a collection of children, use an array instead.");return he}function X(E,D,Z){if(E==null)return E;var le=[],ye=0;return ee(E,le,"","",function(ne){return D.call(Z,ne,ye++)}),le}function ue(E){if(E._status===-1){var D=E._result;D=D(),D.then(function(Z){(E._status===0||E._status===-1)&&(E._status=1,E._result=Z)},function(Z){(E._status===0||E._status===-1)&&(E._status=2,E._result=Z)}),E._status===-1&&(E._status=0,E._result=D)}if(E._status===1)return E._result.default;throw E._result}var de={current:null},$={transition:null},re={ReactCurrentDispatcher:de,ReactCurrentBatchConfig:$,ReactCurrentOwner:F};function H(){throw Error("act(...) is not supported in production builds of React.")}return Ee.Children={map:X,forEach:function(E,D,Z){X(E,function(){D.apply(this,arguments)},Z)},count:function(E){var D=0;return X(E,function(){D++}),D},toArray:function(E){return X(E,function(D){return D})||[]},only:function(E){if(!K(E))throw Error("React.Children.only expected to receive a single React element child.");return E}},Ee.Component=C,Ee.Fragment=t,Ee.Profiler=s,Ee.PureComponent=M,Ee.StrictMode=r,Ee.Suspense=h,Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Ee.act=H,Ee.cloneElement=function(E,D,Z){if(E==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+E+".");var le=b({},E.props),ye=E.key,ne=E.ref,he=E._owner;if(D!=null){if(D.ref!==void 0&&(ne=D.ref,he=F.current),D.key!==void 0&&(ye=""+D.key),E.type&&E.type.defaultProps)var Se=E.type.defaultProps;for(Ce in D)L.call(D,Ce)&&!j.hasOwnProperty(Ce)&&(le[Ce]=D[Ce]===void 0&&Se!==void 0?Se[Ce]:D[Ce])}var Ce=arguments.length-2;if(Ce===1)le.children=Z;else if(1<Ce){Se=Array(Ce);for(var ve=0;ve<Ce;ve++)Se[ve]=arguments[ve+2];le.children=Se}return{$$typeof:n,type:E.type,key:ye,ref:ne,props:le,_owner:he}},Ee.createContext=function(E){return E={$$typeof:a,_currentValue:E,_currentValue2:E,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},E.Provider={$$typeof:l,_context:E},E.Consumer=E},Ee.createElement=W,Ee.createFactory=function(E){var D=W.bind(null,E);return D.type=E,D},Ee.createRef=function(){return{current:null}},Ee.forwardRef=function(E){return{$$typeof:c,render:E}},Ee.isValidElement=K,Ee.lazy=function(E){return{$$typeof:d,_payload:{_status:-1,_result:E},_init:ue}},Ee.memo=function(E,D){return{$$typeof:p,type:E,compare:D===void 0?null:D}},Ee.startTransition=function(E){var D=$.transition;$.transition={};try{E()}finally{$.transition=D}},Ee.unstable_act=H,Ee.useCallback=function(E,D){return de.current.useCallback(E,D)},Ee.useContext=function(E){return de.current.useContext(E)},Ee.useDebugValue=function(){},Ee.useDeferredValue=function(E){return de.current.useDeferredValue(E)},Ee.useEffect=function(E,D){return de.current.useEffect(E,D)},Ee.useId=function(){return de.current.useId()},Ee.useImperativeHandle=function(E,D,Z){return de.current.useImperativeHandle(E,D,Z)},Ee.useInsertionEffect=function(E,D){return de.current.useInsertionEffect(E,D)},Ee.useLayoutEffect=function(E,D){return de.current.useLayoutEffect(E,D)},Ee.useMemo=function(E,D){return de.current.useMemo(E,D)},Ee.useReducer=function(E,D,Z){return de.current.useReducer(E,D,Z)},Ee.useRef=function(E){return de.current.useRef(E)},Ee.useState=function(E){return de.current.useState(E)},Ee.useSyncExternalStore=function(E,D,Z){return de.current.useSyncExternalStore(E,D,Z)},Ee.useTransition=function(){return de.current.useTransition()},Ee.version="18.3.1",Ee}var bm;function ud(){return bm||(bm=1,Sh.exports=Nw()),Sh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Sm;function Ew(){if(Sm)return ko;Sm=1;var n=ud(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function a(c,h,p){var d,m={},x=null,k=null;p!==void 0&&(x=""+p),h.key!==void 0&&(x=""+h.key),h.ref!==void 0&&(k=h.ref);for(d in h)r.call(h,d)&&!l.hasOwnProperty(d)&&(m[d]=h[d]);if(c&&c.defaultProps)for(d in h=c.defaultProps,h)m[d]===void 0&&(m[d]=h[d]);return{$$typeof:e,type:c,key:x,ref:k,props:m,_owner:s.current}}return ko.Fragment=t,ko.jsx=a,ko.jsxs=a,ko}var Om;function Aw(){return Om||(Om=1,bh.exports=Ew()),bh.exports}var v=Aw(),O=ud();const ot=Iy(O);var ka={},Oh={exports:{}},Zt={},Ch={exports:{}},Ph={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm;function Rw(){return Cm||(Cm=1,(function(n){function e($,re){var H=$.length;$.push(re);e:for(;0<H;){var E=H-1>>>1,D=$[E];if(0<s(D,re))$[E]=re,$[H]=D,H=E;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var re=$[0],H=$.pop();if(H!==re){$[0]=H;e:for(var E=0,D=$.length,Z=D>>>1;E<Z;){var le=2*(E+1)-1,ye=$[le],ne=le+1,he=$[ne];if(0>s(ye,H))ne<D&&0>s(he,ye)?($[E]=he,$[ne]=H,E=ne):($[E]=ye,$[le]=H,E=le);else if(ne<D&&0>s(he,H))$[E]=he,$[ne]=H,E=ne;else break e}}return re}function s($,re){var H=$.sortIndex-re.sortIndex;return H!==0?H:$.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var h=[],p=[],d=1,m=null,x=3,k=!1,b=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T($){for(var re=t(p);re!==null;){if(re.callback===null)r(p);else if(re.startTime<=$)r(p),re.sortIndex=re.expirationTime,e(h,re);else break;re=t(p)}}function B($){if(S=!1,T($),!b)if(t(h)!==null)b=!0,ue(L);else{var re=t(p);re!==null&&de(B,re.startTime-$)}}function L($,re){b=!1,S&&(S=!1,P(W),W=-1),k=!0;var H=x;try{for(T(re),m=t(h);m!==null&&(!(m.expirationTime>re)||$&&!V());){var E=m.callback;if(typeof E=="function"){m.callback=null,x=m.priorityLevel;var D=E(m.expirationTime<=re);re=n.unstable_now(),typeof D=="function"?m.callback=D:m===t(h)&&r(h),T(re)}else r(h);m=t(h)}if(m!==null)var Z=!0;else{var le=t(p);le!==null&&de(B,le.startTime-re),Z=!1}return Z}finally{m=null,x=H,k=!1}}var F=!1,j=null,W=-1,Y=5,K=-1;function V(){return!(n.unstable_now()-K<Y)}function Q(){if(j!==null){var $=n.unstable_now();K=$;var re=!0;try{re=j(!0,$)}finally{re?J():(F=!1,j=null)}}else F=!1}var J;if(typeof M=="function")J=function(){M(Q)};else if(typeof MessageChannel<"u"){var ee=new MessageChannel,X=ee.port2;ee.port1.onmessage=Q,J=function(){X.postMessage(null)}}else J=function(){C(Q,0)};function ue($){j=$,F||(F=!0,J())}function de($,re){W=C(function(){$(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){b||k||(b=!0,ue(L))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Y=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function($){switch(x){case 1:case 2:case 3:var re=3;break;default:re=x}var H=x;x=re;try{return $()}finally{x=H}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,re){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var H=x;x=$;try{return re()}finally{x=H}},n.unstable_scheduleCallback=function($,re,H){var E=n.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?E+H:E):H=E,$){case 1:var D=-1;break;case 2:D=250;break;case 5:D=1073741823;break;case 4:D=1e4;break;default:D=5e3}return D=H+D,$={id:d++,callback:re,priorityLevel:$,startTime:H,expirationTime:D,sortIndex:-1},H>E?($.sortIndex=H,e(p,$),t(h)===null&&$===t(p)&&(S?(P(W),W=-1):S=!0,de(B,H-E))):($.sortIndex=D,e(h,$),b||k||(b=!0,ue(L))),$},n.unstable_shouldYield=V,n.unstable_wrapCallback=function($){var re=x;return function(){var H=x;x=re;try{return $.apply(this,arguments)}finally{x=H}}}})(Ph)),Ph}var Pm;function Mw(){return Pm||(Pm=1,Ch.exports=Rw()),Ch.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Nm;function Tw(){if(Nm)return Zt;Nm=1;var n=ud(),e=Mw();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function l(i,o){a(i,o),a(i+"Capture",o)}function a(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},m={};function x(i){return h.call(m,i)?!0:h.call(d,i)?!1:p.test(i)?m[i]=!0:(d[i]=!0,!1)}function k(i,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function b(i,o,u,f){if(o===null||typeof o>"u"||k(i,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function S(i,o,u,f,g,y,w){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=w}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];C[o]=new S(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function M(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(P,M);C[o]=new S(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(P,M);C[o]=new S(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(P,M);C[o]=new S(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function T(i,o,u,f){var g=C.hasOwnProperty(o)?C[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(b(o,u,g,f)&&(u=null),f||g===null?x(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):g.mustUseProperty?i[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,f=g.attributeNamespace,u===null?i.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?i.setAttributeNS(f,o,u):i.setAttribute(o,u))))}var B=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,L=Symbol.for("react.element"),F=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),W=Symbol.for("react.strict_mode"),Y=Symbol.for("react.profiler"),K=Symbol.for("react.provider"),V=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),ee=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),de=Symbol.for("react.offscreen"),$=Symbol.iterator;function re(i){return i===null||typeof i!="object"?null:(i=$&&i[$]||i["@@iterator"],typeof i=="function"?i:null)}var H=Object.assign,E;function D(i){if(E===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);E=o&&o[1]||""}return`
`+E+i}var Z=!1;function le(i,o){if(!i||Z)return"";Z=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(_){var f=_}Reflect.construct(i,[],o)}else{try{o.call()}catch(_){f=_}i.call(o.prototype)}else{try{throw Error()}catch(_){f=_}i()}}catch(_){if(_&&f&&typeof _.stack=="string"){for(var g=_.stack.split(`
`),y=f.stack.split(`
`),w=g.length-1,N=y.length-1;1<=w&&0<=N&&g[w]!==y[N];)N--;for(;1<=w&&0<=N;w--,N--)if(g[w]!==y[N]){if(w!==1||N!==1)do if(w--,N--,0>N||g[w]!==y[N]){var A=`
`+g[w].replace(" at new "," at ");return i.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",i.displayName)),A}while(1<=w&&0<=N);break}}}finally{Z=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?D(i):""}function ye(i){switch(i.tag){case 5:return D(i.type);case 16:return D("Lazy");case 13:return D("Suspense");case 19:return D("SuspenseList");case 0:case 2:case 15:return i=le(i.type,!1),i;case 11:return i=le(i.type.render,!1),i;case 1:return i=le(i.type,!0),i;default:return""}}function ne(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case j:return"Fragment";case F:return"Portal";case Y:return"Profiler";case W:return"StrictMode";case J:return"Suspense";case ee:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case V:return(i.displayName||"Context")+".Consumer";case K:return(i._context.displayName||"Context")+".Provider";case Q:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case X:return o=i.displayName||null,o!==null?o:ne(i.type)||"Memo";case ue:o=i._payload,i=i._init;try{return ne(i(o))}catch{}}return null}function he(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(o);case 8:return o===W?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Se(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ce(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ve(i){var o=Ce(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(w){f=""+w,y.call(this,w)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(w){f=""+w},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Re(i){i._valueTracker||(i._valueTracker=ve(i))}function _e(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return i&&(f=Ce(i)?i.checked?"true":"false":i.value),i=f,i!==u?(o.setValue(i),!0):!1}function Ue(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Je(i,o){var u=o.checked;return H({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function ft(i,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=Se(o.value!=null?o.value:u),i._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Cn(i,o){o=o.checked,o!=null&&T(i,"checked",o,!1)}function Er(i,o){Cn(i,o);var u=Se(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?lr(i,o.type,u):o.hasOwnProperty("defaultValue")&&lr(i,o.type,Se(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function fi(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function lr(i,o,u){(o!=="number"||Ue(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var lt=Array.isArray;function Ft(i,o,u,f){if(i=i.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=o.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&f&&(i[u].defaultSelected=!0)}else{for(u=""+Se(u),o=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function Wn(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return H({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function di(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(lt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:Se(u)}}function pi(i,o){var u=Se(o.value),f=Se(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),f!=null&&(i.defaultValue=""+f)}function ar(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function gi(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function nn(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?gi(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Ne,oe=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,g){MSApp.execUnsafeLocalFunction(function(){return i(o,u,f,g)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Ne=Ne||document.createElement("div"),Ne.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Ne.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Ie(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var at={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nt=["Webkit","ms","Moz","O"];Object.keys(at).forEach(function(i){nt.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),at[o]=at[i]})});function mi(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||at.hasOwnProperty(i)&&at[i]?(""+o).trim():o+"px"}function yi(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=mi(u,o[u],f);u==="float"&&(u="cssFloat"),f?i.setProperty(u,g):i[u]=g}}var Ar=H({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Qn(i,o){if(o){if(Ar[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function xi(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ur=null;function Bs(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var zs=null,Rr=null,Ke=null;function Nt(i){if(i=io(i)){if(typeof zs!="function")throw Error(t(280));var o=i.stateNode;o&&(o=jl(o),zs(i.stateNode,i.type,o))}}function Et(i){Rr?Ke?Ke.push(i):Ke=[i]:Rr=i}function Pn(){if(Rr){var i=Rr,o=Ke;if(Ke=Rr=null,Nt(i),o)for(i=0;i<o.length;i++)Nt(o[i])}}function _t(i,o){return i(o)}function At(){}var Xt=!1;function cr(i,o,u){if(Xt)return i(o,u);Xt=!0;try{return _t(i,o,u)}finally{Xt=!1,(Rr!==null||Ke!==null)&&(At(),Pn())}}function qe(i,o){var u=i.stateNode;if(u===null)return null;var f=jl(u);if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var dn=!1;if(c)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){dn=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch{dn=!1}function Nn(i,o,u,f,g,y,w,N,A){var _=Array.prototype.slice.call(arguments,3);try{o.apply(u,_)}catch(G){this.onError(G)}}var En=!1,$n=null,rn=!1,hr=null,Fs={onError:function(i){En=!0,$n=i}};function D1(i,o,u,f,g,y,w,N,A){En=!1,$n=null,Nn.apply(Fs,arguments)}function L1(i,o,u,f,g,y,w,N,A){if(D1.apply(this,arguments),En){if(En){var _=$n;En=!1,$n=null}else throw Error(t(198));rn||(rn=!0,hr=_)}}function vi(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Wd(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Qd(i){if(vi(i)!==i)throw Error(t(188))}function j1(i){var o=i.alternate;if(!o){if(o=vi(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,f=o;;){var g=u.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===u)return Qd(g),i;if(y===f)return Qd(g),o;y=y.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=y;else{for(var w=!1,N=g.child;N;){if(N===u){w=!0,u=g,f=y;break}if(N===f){w=!0,f=g,u=y;break}N=N.sibling}if(!w){for(N=y.child;N;){if(N===u){w=!0,u=y,f=g;break}if(N===f){w=!0,f=y,u=g;break}N=N.sibling}if(!w)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function $d(i){return i=j1(i),i!==null?Ud(i):null}function Ud(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Ud(i);if(o!==null)return o;i=i.sibling}return null}var Xd=e.unstable_scheduleCallback,Kd=e.unstable_cancelCallback,I1=e.unstable_shouldYield,B1=e.unstable_requestPaint,rt=e.unstable_now,z1=e.unstable_getCurrentPriorityLevel,Vu=e.unstable_ImmediatePriority,qd=e.unstable_UserBlockingPriority,gl=e.unstable_NormalPriority,F1=e.unstable_LowPriority,Yd=e.unstable_IdlePriority,ml=null,Un=null;function _1(i){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(ml,i,void 0,(i.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:W1,H1=Math.log,V1=Math.LN2;function W1(i){return i>>>=0,i===0?32:31-(H1(i)/V1|0)|0}var yl=64,xl=4194304;function _s(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function vl(i,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,g=i.suspendedLanes,y=i.pingedLanes,w=u&268435455;if(w!==0){var N=w&~g;N!==0?f=_s(N):(y&=w,y!==0&&(f=_s(y)))}else w=u&~g,w!==0?f=_s(w):y!==0&&(f=_s(y));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,y=o&-o,g>=y||g===16&&(y&4194240)!==0))return o;if((f&4)!==0&&(f|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=f;0<o;)u=31-An(o),g=1<<u,f|=i[u],o&=~g;return f}function Q1(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $1(i,o){for(var u=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes;0<y;){var w=31-An(y),N=1<<w,A=g[w];A===-1?((N&u)===0||(N&f)!==0)&&(g[w]=Q1(N,o)):A<=o&&(i.expiredLanes|=N),y&=~N}}function Wu(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Gd(){var i=yl;return yl<<=1,(yl&4194240)===0&&(yl=64),i}function Qu(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Hs(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-An(o),i[o]=u}function U1(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<u;){var g=31-An(u),y=1<<g;o[g]=0,f[g]=-1,i[g]=-1,u&=~y}}function $u(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var f=31-An(u),g=1<<f;g&o|i[f]&o&&(i[f]|=o),u&=~g}}var ze=0;function Jd(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Zd,Uu,ep,tp,np,Xu=!1,kl=[],Mr=null,Tr=null,Dr=null,Vs=new Map,Ws=new Map,Lr=[],X1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rp(i,o){switch(i){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Tr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":Vs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ws.delete(o.pointerId)}}function Qs(i,o,u,f,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},o!==null&&(o=io(o),o!==null&&Uu(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function K1(i,o,u,f,g){switch(o){case"focusin":return Mr=Qs(Mr,i,o,u,f,g),!0;case"dragenter":return Tr=Qs(Tr,i,o,u,f,g),!0;case"mouseover":return Dr=Qs(Dr,i,o,u,f,g),!0;case"pointerover":var y=g.pointerId;return Vs.set(y,Qs(Vs.get(y)||null,i,o,u,f,g)),!0;case"gotpointercapture":return y=g.pointerId,Ws.set(y,Qs(Ws.get(y)||null,i,o,u,f,g)),!0}return!1}function ip(i){var o=ki(i.target);if(o!==null){var u=vi(o);if(u!==null){if(o=u.tag,o===13){if(o=Wd(u),o!==null){i.blockedOn=o,np(i.priority,function(){ep(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function wl(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=qu(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);ur=f,u.target.dispatchEvent(f),ur=null}else return o=io(u),o!==null&&Uu(o),i.blockedOn=u,!1;o.shift()}return!0}function sp(i,o,u){wl(i)&&u.delete(o)}function q1(){Xu=!1,Mr!==null&&wl(Mr)&&(Mr=null),Tr!==null&&wl(Tr)&&(Tr=null),Dr!==null&&wl(Dr)&&(Dr=null),Vs.forEach(sp),Ws.forEach(sp)}function $s(i,o){i.blockedOn===o&&(i.blockedOn=null,Xu||(Xu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,q1)))}function Us(i){function o(g){return $s(g,i)}if(0<kl.length){$s(kl[0],i);for(var u=1;u<kl.length;u++){var f=kl[u];f.blockedOn===i&&(f.blockedOn=null)}}for(Mr!==null&&$s(Mr,i),Tr!==null&&$s(Tr,i),Dr!==null&&$s(Dr,i),Vs.forEach(o),Ws.forEach(o),u=0;u<Lr.length;u++)f=Lr[u],f.blockedOn===i&&(f.blockedOn=null);for(;0<Lr.length&&(u=Lr[0],u.blockedOn===null);)ip(u),u.blockedOn===null&&Lr.shift()}var Qi=B.ReactCurrentBatchConfig,bl=!0;function Y1(i,o,u,f){var g=ze,y=Qi.transition;Qi.transition=null;try{ze=1,Ku(i,o,u,f)}finally{ze=g,Qi.transition=y}}function G1(i,o,u,f){var g=ze,y=Qi.transition;Qi.transition=null;try{ze=4,Ku(i,o,u,f)}finally{ze=g,Qi.transition=y}}function Ku(i,o,u,f){if(bl){var g=qu(i,o,u,f);if(g===null)fc(i,o,f,Sl,u),rp(i,f);else if(K1(g,i,o,u,f))f.stopPropagation();else if(rp(i,f),o&4&&-1<X1.indexOf(i)){for(;g!==null;){var y=io(g);if(y!==null&&Zd(y),y=qu(i,o,u,f),y===null&&fc(i,o,f,Sl,u),y===g)break;g=y}g!==null&&f.stopPropagation()}else fc(i,o,f,null,u)}}var Sl=null;function qu(i,o,u,f){if(Sl=null,i=Bs(f),i=ki(i),i!==null)if(o=vi(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Wd(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Sl=i,null}function op(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(z1()){case Vu:return 1;case qd:return 4;case gl:case F1:return 16;case Yd:return 536870912;default:return 16}default:return 16}}var jr=null,Yu=null,Ol=null;function lp(){if(Ol)return Ol;var i,o=Yu,u=o.length,f,g="value"in jr?jr.value:jr.textContent,y=g.length;for(i=0;i<u&&o[i]===g[i];i++);var w=u-i;for(f=1;f<=w&&o[u-f]===g[y-f];f++);return Ol=g.slice(i,1<f?1-f:void 0)}function Cl(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Pl(){return!0}function ap(){return!1}function sn(i){function o(u,f,g,y,w){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var N in i)i.hasOwnProperty(N)&&(u=i[N],this[N]=u?u(y):y[N]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Pl:ap,this.isPropagationStopped=ap,this}return H(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),o}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Gu=sn($i),Xs=H({},$i,{view:0,detail:0}),J1=sn(Xs),Ju,Zu,Ks,Nl=H({},Xs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ks&&(Ks&&i.type==="mousemove"?(Ju=i.screenX-Ks.screenX,Zu=i.screenY-Ks.screenY):Zu=Ju=0,Ks=i),Ju)},movementY:function(i){return"movementY"in i?i.movementY:Zu}}),up=sn(Nl),Z1=H({},Nl,{dataTransfer:0}),ek=sn(Z1),tk=H({},Xs,{relatedTarget:0}),ec=sn(tk),nk=H({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),rk=sn(nk),ik=H({},$i,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),sk=sn(ik),ok=H({},$i,{data:0}),cp=sn(ok),lk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ak={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},uk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ck(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=uk[i])?!!o[i]:!1}function tc(){return ck}var hk=H({},Xs,{key:function(i){if(i.key){var o=lk[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Cl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ak[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tc,charCode:function(i){return i.type==="keypress"?Cl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Cl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),fk=sn(hk),dk=H({},Nl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),hp=sn(dk),pk=H({},Xs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tc}),gk=sn(pk),mk=H({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),yk=sn(mk),xk=H({},Nl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),vk=sn(xk),kk=[9,13,27,32],nc=c&&"CompositionEvent"in window,qs=null;c&&"documentMode"in document&&(qs=document.documentMode);var wk=c&&"TextEvent"in window&&!qs,fp=c&&(!nc||qs&&8<qs&&11>=qs),dp=" ",pp=!1;function gp(i,o){switch(i){case"keyup":return kk.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function mp(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ui=!1;function bk(i,o){switch(i){case"compositionend":return mp(o);case"keypress":return o.which!==32?null:(pp=!0,dp);case"textInput":return i=o.data,i===dp&&pp?null:i;default:return null}}function Sk(i,o){if(Ui)return i==="compositionend"||!nc&&gp(i,o)?(i=lp(),Ol=Yu=jr=null,Ui=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return fp&&o.locale!=="ko"?null:o.data;default:return null}}var Ok={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Ok[i.type]:o==="textarea"}function xp(i,o,u,f){Et(f),o=Tl(o,"onChange"),0<o.length&&(u=new Gu("onChange","change",null,u,f),i.push({event:u,listeners:o}))}var Ys=null,Gs=null;function Ck(i){Ip(i,0)}function El(i){var o=Gi(i);if(_e(o))return i}function Pk(i,o){if(i==="change")return o}var vp=!1;if(c){var rc;if(c){var ic="oninput"in document;if(!ic){var kp=document.createElement("div");kp.setAttribute("oninput","return;"),ic=typeof kp.oninput=="function"}rc=ic}else rc=!1;vp=rc&&(!document.documentMode||9<document.documentMode)}function wp(){Ys&&(Ys.detachEvent("onpropertychange",bp),Gs=Ys=null)}function bp(i){if(i.propertyName==="value"&&El(Gs)){var o=[];xp(o,Gs,i,Bs(i)),cr(Ck,o)}}function Nk(i,o,u){i==="focusin"?(wp(),Ys=o,Gs=u,Ys.attachEvent("onpropertychange",bp)):i==="focusout"&&wp()}function Ek(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return El(Gs)}function Ak(i,o){if(i==="click")return El(o)}function Rk(i,o){if(i==="input"||i==="change")return El(o)}function Mk(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Rn=typeof Object.is=="function"?Object.is:Mk;function Js(i,o){if(Rn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!h.call(o,g)||!Rn(i[g],o[g]))return!1}return!0}function Sp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Op(i,o){var u=Sp(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=o&&f>=o)return{node:u,offset:o-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Sp(u)}}function Cp(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Cp(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Pp(){for(var i=window,o=Ue();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Ue(i.document)}return o}function sc(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Tk(i){var o=Pp(),u=i.focusedElem,f=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&Cp(u.ownerDocument.documentElement,u)){if(f!==null&&sc(u)){if(o=f.start,i=f.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=u.textContent.length,y=Math.min(f.start,g);f=f.end===void 0?y:Math.min(f.end,g),!i.extend&&y>f&&(g=f,f=y,y=g),g=Op(u,y);var w=Op(u,f);g&&w&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==w.node||i.focusOffset!==w.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),y>f?(i.addRange(o),i.extend(w.node,w.offset)):(o.setEnd(w.node,w.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Dk=c&&"documentMode"in document&&11>=document.documentMode,Xi=null,oc=null,Zs=null,lc=!1;function Np(i,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;lc||Xi==null||Xi!==Ue(f)||(f=Xi,"selectionStart"in f&&sc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Zs&&Js(Zs,f)||(Zs=f,f=Tl(oc,"onSelect"),0<f.length&&(o=new Gu("onSelect","select",null,o,u),i.push({event:o,listeners:f}),o.target=Xi)))}function Al(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Ki={animationend:Al("Animation","AnimationEnd"),animationiteration:Al("Animation","AnimationIteration"),animationstart:Al("Animation","AnimationStart"),transitionend:Al("Transition","TransitionEnd")},ac={},Ep={};c&&(Ep=document.createElement("div").style,"AnimationEvent"in window||(delete Ki.animationend.animation,delete Ki.animationiteration.animation,delete Ki.animationstart.animation),"TransitionEvent"in window||delete Ki.transitionend.transition);function Rl(i){if(ac[i])return ac[i];if(!Ki[i])return i;var o=Ki[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Ep)return ac[i]=o[u];return i}var Ap=Rl("animationend"),Rp=Rl("animationiteration"),Mp=Rl("animationstart"),Tp=Rl("transitionend"),Dp=new Map,Lp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ir(i,o){Dp.set(i,o),l(o,[i])}for(var uc=0;uc<Lp.length;uc++){var cc=Lp[uc],Lk=cc.toLowerCase(),jk=cc[0].toUpperCase()+cc.slice(1);Ir(Lk,"on"+jk)}Ir(Ap,"onAnimationEnd"),Ir(Rp,"onAnimationIteration"),Ir(Mp,"onAnimationStart"),Ir("dblclick","onDoubleClick"),Ir("focusin","onFocus"),Ir("focusout","onBlur"),Ir(Tp,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var eo="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ik=new Set("cancel close invalid load scroll toggle".split(" ").concat(eo));function jp(i,o,u){var f=i.type||"unknown-event";i.currentTarget=u,L1(f,o,void 0,i),i.currentTarget=null}function Ip(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],g=f.event;f=f.listeners;e:{var y=void 0;if(o)for(var w=f.length-1;0<=w;w--){var N=f[w],A=N.instance,_=N.currentTarget;if(N=N.listener,A!==y&&g.isPropagationStopped())break e;jp(g,N,_),y=A}else for(w=0;w<f.length;w++){if(N=f[w],A=N.instance,_=N.currentTarget,N=N.listener,A!==y&&g.isPropagationStopped())break e;jp(g,N,_),y=A}}}if(rn)throw i=hr,rn=!1,hr=null,i}function We(i,o){var u=o[xc];u===void 0&&(u=o[xc]=new Set);var f=i+"__bubble";u.has(f)||(Bp(o,i,2,!1),u.add(f))}function hc(i,o,u){var f=0;o&&(f|=4),Bp(u,i,f,o)}var Ml="_reactListening"+Math.random().toString(36).slice(2);function to(i){if(!i[Ml]){i[Ml]=!0,r.forEach(function(u){u!=="selectionchange"&&(Ik.has(u)||hc(u,!1,i),hc(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Ml]||(o[Ml]=!0,hc("selectionchange",!1,o))}}function Bp(i,o,u,f){switch(op(o)){case 1:var g=Y1;break;case 4:g=G1;break;default:g=Ku}u=g.bind(null,o,u,i),g=void 0,!dn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(o,u,{capture:!0,passive:g}):i.addEventListener(o,u,!0):g!==void 0?i.addEventListener(o,u,{passive:g}):i.addEventListener(o,u,!1)}function fc(i,o,u,f,g){var y=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var N=f.stateNode.containerInfo;if(N===g||N.nodeType===8&&N.parentNode===g)break;if(w===4)for(w=f.return;w!==null;){var A=w.tag;if((A===3||A===4)&&(A=w.stateNode.containerInfo,A===g||A.nodeType===8&&A.parentNode===g))return;w=w.return}for(;N!==null;){if(w=ki(N),w===null)return;if(A=w.tag,A===5||A===6){f=y=w;continue e}N=N.parentNode}}f=f.return}cr(function(){var _=y,G=Bs(u),te=[];e:{var q=Dp.get(i);if(q!==void 0){var fe=Gu,ge=i;switch(i){case"keypress":if(Cl(u)===0)break e;case"keydown":case"keyup":fe=fk;break;case"focusin":ge="focus",fe=ec;break;case"focusout":ge="blur",fe=ec;break;case"beforeblur":case"afterblur":fe=ec;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=up;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=ek;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=gk;break;case Ap:case Rp:case Mp:fe=rk;break;case Tp:fe=yk;break;case"scroll":fe=J1;break;case"wheel":fe=vk;break;case"copy":case"cut":case"paste":fe=sk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=hp}var me=(o&4)!==0,it=!me&&i==="scroll",I=me?q!==null?q+"Capture":null:q;me=[];for(var R=_,z;R!==null;){z=R;var ie=z.stateNode;if(z.tag===5&&ie!==null&&(z=ie,I!==null&&(ie=qe(R,I),ie!=null&&me.push(no(R,ie,z)))),it)break;R=R.return}0<me.length&&(q=new fe(q,ge,null,u,G),te.push({event:q,listeners:me}))}}if((o&7)===0){e:{if(q=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",q&&u!==ur&&(ge=u.relatedTarget||u.fromElement)&&(ki(ge)||ge[fr]))break e;if((fe||q)&&(q=G.window===G?G:(q=G.ownerDocument)?q.defaultView||q.parentWindow:window,fe?(ge=u.relatedTarget||u.toElement,fe=_,ge=ge?ki(ge):null,ge!==null&&(it=vi(ge),ge!==it||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(fe=null,ge=_),fe!==ge)){if(me=up,ie="onMouseLeave",I="onMouseEnter",R="mouse",(i==="pointerout"||i==="pointerover")&&(me=hp,ie="onPointerLeave",I="onPointerEnter",R="pointer"),it=fe==null?q:Gi(fe),z=ge==null?q:Gi(ge),q=new me(ie,R+"leave",fe,u,G),q.target=it,q.relatedTarget=z,ie=null,ki(G)===_&&(me=new me(I,R+"enter",ge,u,G),me.target=z,me.relatedTarget=it,ie=me),it=ie,fe&&ge)t:{for(me=fe,I=ge,R=0,z=me;z;z=qi(z))R++;for(z=0,ie=I;ie;ie=qi(ie))z++;for(;0<R-z;)me=qi(me),R--;for(;0<z-R;)I=qi(I),z--;for(;R--;){if(me===I||I!==null&&me===I.alternate)break t;me=qi(me),I=qi(I)}me=null}else me=null;fe!==null&&zp(te,q,fe,me,!1),ge!==null&&it!==null&&zp(te,it,ge,me,!0)}}e:{if(q=_?Gi(_):window,fe=q.nodeName&&q.nodeName.toLowerCase(),fe==="select"||fe==="input"&&q.type==="file")var xe=Pk;else if(yp(q))if(vp)xe=Rk;else{xe=Ek;var we=Nk}else(fe=q.nodeName)&&fe.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(xe=Ak);if(xe&&(xe=xe(i,_))){xp(te,xe,u,G);break e}we&&we(i,q,_),i==="focusout"&&(we=q._wrapperState)&&we.controlled&&q.type==="number"&&lr(q,"number",q.value)}switch(we=_?Gi(_):window,i){case"focusin":(yp(we)||we.contentEditable==="true")&&(Xi=we,oc=_,Zs=null);break;case"focusout":Zs=oc=Xi=null;break;case"mousedown":lc=!0;break;case"contextmenu":case"mouseup":case"dragend":lc=!1,Np(te,u,G);break;case"selectionchange":if(Dk)break;case"keydown":case"keyup":Np(te,u,G)}var be;if(nc)e:{switch(i){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Ui?gp(i,u)&&(Oe="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Oe="onCompositionStart");Oe&&(fp&&u.locale!=="ko"&&(Ui||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Ui&&(be=lp()):(jr=G,Yu="value"in jr?jr.value:jr.textContent,Ui=!0)),we=Tl(_,Oe),0<we.length&&(Oe=new cp(Oe,i,null,u,G),te.push({event:Oe,listeners:we}),be?Oe.data=be:(be=mp(u),be!==null&&(Oe.data=be)))),(be=wk?bk(i,u):Sk(i,u))&&(_=Tl(_,"onBeforeInput"),0<_.length&&(G=new cp("onBeforeInput","beforeinput",null,u,G),te.push({event:G,listeners:_}),G.data=be))}Ip(te,o)})}function no(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Tl(i,o){for(var u=o+"Capture",f=[];i!==null;){var g=i,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=qe(i,u),y!=null&&f.unshift(no(i,y,g)),y=qe(i,o),y!=null&&f.push(no(i,y,g))),i=i.return}return f}function qi(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function zp(i,o,u,f,g){for(var y=o._reactName,w=[];u!==null&&u!==f;){var N=u,A=N.alternate,_=N.stateNode;if(A!==null&&A===f)break;N.tag===5&&_!==null&&(N=_,g?(A=qe(u,y),A!=null&&w.unshift(no(u,A,N))):g||(A=qe(u,y),A!=null&&w.push(no(u,A,N)))),u=u.return}w.length!==0&&i.push({event:o,listeners:w})}var Bk=/\r\n?/g,zk=/\u0000|\uFFFD/g;function Fp(i){return(typeof i=="string"?i:""+i).replace(Bk,`
`).replace(zk,"")}function Dl(i,o,u){if(o=Fp(o),Fp(i)!==o&&u)throw Error(t(425))}function Ll(){}var dc=null,pc=null;function gc(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var mc=typeof setTimeout=="function"?setTimeout:void 0,Fk=typeof clearTimeout=="function"?clearTimeout:void 0,_p=typeof Promise=="function"?Promise:void 0,_k=typeof queueMicrotask=="function"?queueMicrotask:typeof _p<"u"?function(i){return _p.resolve(null).then(i).catch(Hk)}:mc;function Hk(i){setTimeout(function(){throw i})}function yc(i,o){var u=o,f=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){i.removeChild(g),Us(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);Us(o)}function Br(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Hp(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var Yi=Math.random().toString(36).slice(2),Xn="__reactFiber$"+Yi,ro="__reactProps$"+Yi,fr="__reactContainer$"+Yi,xc="__reactEvents$"+Yi,Vk="__reactListeners$"+Yi,Wk="__reactHandles$"+Yi;function ki(i){var o=i[Xn];if(o)return o;for(var u=i.parentNode;u;){if(o=u[fr]||u[Xn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=Hp(i);i!==null;){if(u=i[Xn])return u;i=Hp(i)}return o}i=u,u=i.parentNode}return null}function io(i){return i=i[Xn]||i[fr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Gi(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function jl(i){return i[ro]||null}var vc=[],Ji=-1;function zr(i){return{current:i}}function Qe(i){0>Ji||(i.current=vc[Ji],vc[Ji]=null,Ji--)}function Ve(i,o){Ji++,vc[Ji]=i.current,i.current=o}var Fr={},Mt=zr(Fr),Kt=zr(!1),wi=Fr;function Zi(i,o){var u=i.type.contextTypes;if(!u)return Fr;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in u)g[y]=o[y];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function qt(i){return i=i.childContextTypes,i!=null}function Il(){Qe(Kt),Qe(Mt)}function Vp(i,o,u){if(Mt.current!==Fr)throw Error(t(168));Ve(Mt,o),Ve(Kt,u)}function Wp(i,o,u){var f=i.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(t(108,he(i)||"Unknown",g));return H({},u,f)}function Bl(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Fr,wi=Mt.current,Ve(Mt,i),Ve(Kt,Kt.current),!0}function Qp(i,o,u){var f=i.stateNode;if(!f)throw Error(t(169));u?(i=Wp(i,o,wi),f.__reactInternalMemoizedMergedChildContext=i,Qe(Kt),Qe(Mt),Ve(Mt,i)):Qe(Kt),Ve(Kt,u)}var dr=null,zl=!1,kc=!1;function $p(i){dr===null?dr=[i]:dr.push(i)}function Qk(i){zl=!0,$p(i)}function _r(){if(!kc&&dr!==null){kc=!0;var i=0,o=ze;try{var u=dr;for(ze=1;i<u.length;i++){var f=u[i];do f=f(!0);while(f!==null)}dr=null,zl=!1}catch(g){throw dr!==null&&(dr=dr.slice(i+1)),Xd(Vu,_r),g}finally{ze=o,kc=!1}}return null}var es=[],ts=0,Fl=null,_l=0,pn=[],gn=0,bi=null,pr=1,gr="";function Si(i,o){es[ts++]=_l,es[ts++]=Fl,Fl=i,_l=o}function Up(i,o,u){pn[gn++]=pr,pn[gn++]=gr,pn[gn++]=bi,bi=i;var f=pr;i=gr;var g=32-An(f)-1;f&=~(1<<g),u+=1;var y=32-An(o)+g;if(30<y){var w=g-g%5;y=(f&(1<<w)-1).toString(32),f>>=w,g-=w,pr=1<<32-An(o)+g|u<<g|f,gr=y+i}else pr=1<<y|u<<g|f,gr=i}function wc(i){i.return!==null&&(Si(i,1),Up(i,1,0))}function bc(i){for(;i===Fl;)Fl=es[--ts],es[ts]=null,_l=es[--ts],es[ts]=null;for(;i===bi;)bi=pn[--gn],pn[gn]=null,gr=pn[--gn],pn[gn]=null,pr=pn[--gn],pn[gn]=null}var on=null,ln=null,Xe=!1,Mn=null;function Xp(i,o){var u=vn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function Kp(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,on=i,ln=Br(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,on=i,ln=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=bi!==null?{id:pr,overflow:gr}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=vn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,on=i,ln=null,!0):!1;default:return!1}}function Sc(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Oc(i){if(Xe){var o=ln;if(o){var u=o;if(!Kp(i,o)){if(Sc(i))throw Error(t(418));o=Br(u.nextSibling);var f=on;o&&Kp(i,o)?Xp(f,u):(i.flags=i.flags&-4097|2,Xe=!1,on=i)}}else{if(Sc(i))throw Error(t(418));i.flags=i.flags&-4097|2,Xe=!1,on=i}}}function qp(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;on=i}function Hl(i){if(i!==on)return!1;if(!Xe)return qp(i),Xe=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!gc(i.type,i.memoizedProps)),o&&(o=ln)){if(Sc(i))throw Yp(),Error(t(418));for(;o;)Xp(i,o),o=Br(o.nextSibling)}if(qp(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){ln=Br(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}ln=null}}else ln=on?Br(i.stateNode.nextSibling):null;return!0}function Yp(){for(var i=ln;i;)i=Br(i.nextSibling)}function ns(){ln=on=null,Xe=!1}function Cc(i){Mn===null?Mn=[i]:Mn.push(i)}var $k=B.ReactCurrentBatchConfig;function so(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,i));var g=f,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(w){var N=g.refs;w===null?delete N[y]:N[y]=w},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Vl(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Gp(i){var o=i._init;return o(i._payload)}function Jp(i){function o(I,R){if(i){var z=I.deletions;z===null?(I.deletions=[R],I.flags|=16):z.push(R)}}function u(I,R){if(!i)return null;for(;R!==null;)o(I,R),R=R.sibling;return null}function f(I,R){for(I=new Map;R!==null;)R.key!==null?I.set(R.key,R):I.set(R.index,R),R=R.sibling;return I}function g(I,R){return I=Kr(I,R),I.index=0,I.sibling=null,I}function y(I,R,z){return I.index=z,i?(z=I.alternate,z!==null?(z=z.index,z<R?(I.flags|=2,R):z):(I.flags|=2,R)):(I.flags|=1048576,R)}function w(I){return i&&I.alternate===null&&(I.flags|=2),I}function N(I,R,z,ie){return R===null||R.tag!==6?(R=mh(z,I.mode,ie),R.return=I,R):(R=g(R,z),R.return=I,R)}function A(I,R,z,ie){var xe=z.type;return xe===j?G(I,R,z.props.children,ie,z.key):R!==null&&(R.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===ue&&Gp(xe)===R.type)?(ie=g(R,z.props),ie.ref=so(I,R,z),ie.return=I,ie):(ie=fa(z.type,z.key,z.props,null,I.mode,ie),ie.ref=so(I,R,z),ie.return=I,ie)}function _(I,R,z,ie){return R===null||R.tag!==4||R.stateNode.containerInfo!==z.containerInfo||R.stateNode.implementation!==z.implementation?(R=yh(z,I.mode,ie),R.return=I,R):(R=g(R,z.children||[]),R.return=I,R)}function G(I,R,z,ie,xe){return R===null||R.tag!==7?(R=Mi(z,I.mode,ie,xe),R.return=I,R):(R=g(R,z),R.return=I,R)}function te(I,R,z){if(typeof R=="string"&&R!==""||typeof R=="number")return R=mh(""+R,I.mode,z),R.return=I,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case L:return z=fa(R.type,R.key,R.props,null,I.mode,z),z.ref=so(I,null,R),z.return=I,z;case F:return R=yh(R,I.mode,z),R.return=I,R;case ue:var ie=R._init;return te(I,ie(R._payload),z)}if(lt(R)||re(R))return R=Mi(R,I.mode,z,null),R.return=I,R;Vl(I,R)}return null}function q(I,R,z,ie){var xe=R!==null?R.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return xe!==null?null:N(I,R,""+z,ie);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case L:return z.key===xe?A(I,R,z,ie):null;case F:return z.key===xe?_(I,R,z,ie):null;case ue:return xe=z._init,q(I,R,xe(z._payload),ie)}if(lt(z)||re(z))return xe!==null?null:G(I,R,z,ie,null);Vl(I,z)}return null}function fe(I,R,z,ie,xe){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return I=I.get(z)||null,N(R,I,""+ie,xe);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case L:return I=I.get(ie.key===null?z:ie.key)||null,A(R,I,ie,xe);case F:return I=I.get(ie.key===null?z:ie.key)||null,_(R,I,ie,xe);case ue:var we=ie._init;return fe(I,R,z,we(ie._payload),xe)}if(lt(ie)||re(ie))return I=I.get(z)||null,G(R,I,ie,xe,null);Vl(R,ie)}return null}function ge(I,R,z,ie){for(var xe=null,we=null,be=R,Oe=R=0,vt=null;be!==null&&Oe<z.length;Oe++){be.index>Oe?(vt=be,be=null):vt=be.sibling;var De=q(I,be,z[Oe],ie);if(De===null){be===null&&(be=vt);break}i&&be&&De.alternate===null&&o(I,be),R=y(De,R,Oe),we===null?xe=De:we.sibling=De,we=De,be=vt}if(Oe===z.length)return u(I,be),Xe&&Si(I,Oe),xe;if(be===null){for(;Oe<z.length;Oe++)be=te(I,z[Oe],ie),be!==null&&(R=y(be,R,Oe),we===null?xe=be:we.sibling=be,we=be);return Xe&&Si(I,Oe),xe}for(be=f(I,be);Oe<z.length;Oe++)vt=fe(be,I,Oe,z[Oe],ie),vt!==null&&(i&&vt.alternate!==null&&be.delete(vt.key===null?Oe:vt.key),R=y(vt,R,Oe),we===null?xe=vt:we.sibling=vt,we=vt);return i&&be.forEach(function(qr){return o(I,qr)}),Xe&&Si(I,Oe),xe}function me(I,R,z,ie){var xe=re(z);if(typeof xe!="function")throw Error(t(150));if(z=xe.call(z),z==null)throw Error(t(151));for(var we=xe=null,be=R,Oe=R=0,vt=null,De=z.next();be!==null&&!De.done;Oe++,De=z.next()){be.index>Oe?(vt=be,be=null):vt=be.sibling;var qr=q(I,be,De.value,ie);if(qr===null){be===null&&(be=vt);break}i&&be&&qr.alternate===null&&o(I,be),R=y(qr,R,Oe),we===null?xe=qr:we.sibling=qr,we=qr,be=vt}if(De.done)return u(I,be),Xe&&Si(I,Oe),xe;if(be===null){for(;!De.done;Oe++,De=z.next())De=te(I,De.value,ie),De!==null&&(R=y(De,R,Oe),we===null?xe=De:we.sibling=De,we=De);return Xe&&Si(I,Oe),xe}for(be=f(I,be);!De.done;Oe++,De=z.next())De=fe(be,I,Oe,De.value,ie),De!==null&&(i&&De.alternate!==null&&be.delete(De.key===null?Oe:De.key),R=y(De,R,Oe),we===null?xe=De:we.sibling=De,we=De);return i&&be.forEach(function(Ow){return o(I,Ow)}),Xe&&Si(I,Oe),xe}function it(I,R,z,ie){if(typeof z=="object"&&z!==null&&z.type===j&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case L:e:{for(var xe=z.key,we=R;we!==null;){if(we.key===xe){if(xe=z.type,xe===j){if(we.tag===7){u(I,we.sibling),R=g(we,z.props.children),R.return=I,I=R;break e}}else if(we.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===ue&&Gp(xe)===we.type){u(I,we.sibling),R=g(we,z.props),R.ref=so(I,we,z),R.return=I,I=R;break e}u(I,we);break}else o(I,we);we=we.sibling}z.type===j?(R=Mi(z.props.children,I.mode,ie,z.key),R.return=I,I=R):(ie=fa(z.type,z.key,z.props,null,I.mode,ie),ie.ref=so(I,R,z),ie.return=I,I=ie)}return w(I);case F:e:{for(we=z.key;R!==null;){if(R.key===we)if(R.tag===4&&R.stateNode.containerInfo===z.containerInfo&&R.stateNode.implementation===z.implementation){u(I,R.sibling),R=g(R,z.children||[]),R.return=I,I=R;break e}else{u(I,R);break}else o(I,R);R=R.sibling}R=yh(z,I.mode,ie),R.return=I,I=R}return w(I);case ue:return we=z._init,it(I,R,we(z._payload),ie)}if(lt(z))return ge(I,R,z,ie);if(re(z))return me(I,R,z,ie);Vl(I,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,R!==null&&R.tag===6?(u(I,R.sibling),R=g(R,z),R.return=I,I=R):(u(I,R),R=mh(z,I.mode,ie),R.return=I,I=R),w(I)):u(I,R)}return it}var rs=Jp(!0),Zp=Jp(!1),Wl=zr(null),Ql=null,is=null,Pc=null;function Nc(){Pc=is=Ql=null}function Ec(i){var o=Wl.current;Qe(Wl),i._currentValue=o}function Ac(i,o,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===u)break;i=i.return}}function ss(i,o){Ql=i,Pc=is=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(Yt=!0),i.firstContext=null)}function mn(i){var o=i._currentValue;if(Pc!==i)if(i={context:i,memoizedValue:o,next:null},is===null){if(Ql===null)throw Error(t(308));is=i,Ql.dependencies={lanes:0,firstContext:i}}else is=is.next=i;return o}var Oi=null;function Rc(i){Oi===null?Oi=[i]:Oi.push(i)}function eg(i,o,u,f){var g=o.interleaved;return g===null?(u.next=u,Rc(o)):(u.next=g.next,g.next=u),o.interleaved=u,mr(i,f)}function mr(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Hr=!1;function Mc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function tg(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function yr(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Vr(i,o,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Me&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,mr(i,u)}return g=f.interleaved,g===null?(o.next=o,Rc(f)):(o.next=g.next,g.next=o),f.interleaved=o,mr(i,u)}function $l(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,$u(i,u)}}function ng(i,o){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var w={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?g=y=w:y=y.next=w,u=u.next}while(u!==null);y===null?g=y=o:y=y.next=o}else g=y=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,effects:f.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function Ul(i,o,u,f){var g=i.updateQueue;Hr=!1;var y=g.firstBaseUpdate,w=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var A=N,_=A.next;A.next=null,w===null?y=_:w.next=_,w=A;var G=i.alternate;G!==null&&(G=G.updateQueue,N=G.lastBaseUpdate,N!==w&&(N===null?G.firstBaseUpdate=_:N.next=_,G.lastBaseUpdate=A))}if(y!==null){var te=g.baseState;w=0,G=_=A=null,N=y;do{var q=N.lane,fe=N.eventTime;if((f&q)===q){G!==null&&(G=G.next={eventTime:fe,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var ge=i,me=N;switch(q=o,fe=u,me.tag){case 1:if(ge=me.payload,typeof ge=="function"){te=ge.call(fe,te,q);break e}te=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=me.payload,q=typeof ge=="function"?ge.call(fe,te,q):ge,q==null)break e;te=H({},te,q);break e;case 2:Hr=!0}}N.callback!==null&&N.lane!==0&&(i.flags|=64,q=g.effects,q===null?g.effects=[N]:q.push(N))}else fe={eventTime:fe,lane:q,tag:N.tag,payload:N.payload,callback:N.callback,next:null},G===null?(_=G=fe,A=te):G=G.next=fe,w|=q;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;q=N,N=q.next,q.next=null,g.lastBaseUpdate=q,g.shared.pending=null}}while(!0);if(G===null&&(A=te),g.baseState=A,g.firstBaseUpdate=_,g.lastBaseUpdate=G,o=g.shared.interleaved,o!==null){g=o;do w|=g.lane,g=g.next;while(g!==o)}else y===null&&(g.shared.lanes=0);Ni|=w,i.lanes=w,i.memoizedState=te}}function rg(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var f=i[o],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var oo={},Kn=zr(oo),lo=zr(oo),ao=zr(oo);function Ci(i){if(i===oo)throw Error(t(174));return i}function Tc(i,o){switch(Ve(ao,o),Ve(lo,i),Ve(Kn,oo),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:nn(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=nn(o,i)}Qe(Kn),Ve(Kn,o)}function os(){Qe(Kn),Qe(lo),Qe(ao)}function ig(i){Ci(ao.current);var o=Ci(Kn.current),u=nn(o,i.type);o!==u&&(Ve(lo,i),Ve(Kn,u))}function Dc(i){lo.current===i&&(Qe(Kn),Qe(lo))}var Ye=zr(0);function Xl(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Lc=[];function jc(){for(var i=0;i<Lc.length;i++)Lc[i]._workInProgressVersionPrimary=null;Lc.length=0}var Kl=B.ReactCurrentDispatcher,Ic=B.ReactCurrentBatchConfig,Pi=0,Ge=null,dt=null,yt=null,ql=!1,uo=!1,co=0,Uk=0;function Tt(){throw Error(t(321))}function Bc(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Rn(i[u],o[u]))return!1;return!0}function zc(i,o,u,f,g,y){if(Pi=y,Ge=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Kl.current=i===null||i.memoizedState===null?Yk:Gk,i=u(f,g),uo){y=0;do{if(uo=!1,co=0,25<=y)throw Error(t(301));y+=1,yt=dt=null,o.updateQueue=null,Kl.current=Jk,i=u(f,g)}while(uo)}if(Kl.current=Jl,o=dt!==null&&dt.next!==null,Pi=0,yt=dt=Ge=null,ql=!1,o)throw Error(t(300));return i}function Fc(){var i=co!==0;return co=0,i}function qn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?Ge.memoizedState=yt=i:yt=yt.next=i,yt}function yn(){if(dt===null){var i=Ge.alternate;i=i!==null?i.memoizedState:null}else i=dt.next;var o=yt===null?Ge.memoizedState:yt.next;if(o!==null)yt=o,dt=i;else{if(i===null)throw Error(t(310));dt=i,i={memoizedState:dt.memoizedState,baseState:dt.baseState,baseQueue:dt.baseQueue,queue:dt.queue,next:null},yt===null?Ge.memoizedState=yt=i:yt=yt.next=i}return yt}function ho(i,o){return typeof o=="function"?o(i):o}function _c(i){var o=yn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=dt,g=f.baseQueue,y=u.pending;if(y!==null){if(g!==null){var w=g.next;g.next=y.next,y.next=w}f.baseQueue=g=y,u.pending=null}if(g!==null){y=g.next,f=f.baseState;var N=w=null,A=null,_=y;do{var G=_.lane;if((Pi&G)===G)A!==null&&(A=A.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),f=_.hasEagerState?_.eagerState:i(f,_.action);else{var te={lane:G,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};A===null?(N=A=te,w=f):A=A.next=te,Ge.lanes|=G,Ni|=G}_=_.next}while(_!==null&&_!==y);A===null?w=f:A.next=N,Rn(f,o.memoizedState)||(Yt=!0),o.memoizedState=f,o.baseState=w,o.baseQueue=A,u.lastRenderedState=f}if(i=u.interleaved,i!==null){g=i;do y=g.lane,Ge.lanes|=y,Ni|=y,g=g.next;while(g!==i)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Hc(i){var o=yn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=u.dispatch,g=u.pending,y=o.memoizedState;if(g!==null){u.pending=null;var w=g=g.next;do y=i(y,w.action),w=w.next;while(w!==g);Rn(y,o.memoizedState)||(Yt=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,f]}function sg(){}function og(i,o){var u=Ge,f=yn(),g=o(),y=!Rn(f.memoizedState,g);if(y&&(f.memoizedState=g,Yt=!0),f=f.queue,Vc(ug.bind(null,u,f,i),[i]),f.getSnapshot!==o||y||yt!==null&&yt.memoizedState.tag&1){if(u.flags|=2048,fo(9,ag.bind(null,u,f,g,o),void 0,null),xt===null)throw Error(t(349));(Pi&30)!==0||lg(u,o,g)}return g}function lg(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Ge.updateQueue,o===null?(o={lastEffect:null,stores:null},Ge.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function ag(i,o,u,f){o.value=u,o.getSnapshot=f,cg(o)&&hg(i)}function ug(i,o,u){return u(function(){cg(o)&&hg(i)})}function cg(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Rn(i,u)}catch{return!0}}function hg(i){var o=mr(i,1);o!==null&&jn(o,i,1,-1)}function fg(i){var o=qn();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ho,lastRenderedState:i},o.queue=i,i=i.dispatch=qk.bind(null,Ge,i),[o.memoizedState,i]}function fo(i,o,u,f){return i={tag:i,create:o,destroy:u,deps:f,next:null},o=Ge.updateQueue,o===null?(o={lastEffect:null,stores:null},Ge.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,o.lastEffect=i)),i}function dg(){return yn().memoizedState}function Yl(i,o,u,f){var g=qn();Ge.flags|=i,g.memoizedState=fo(1|o,u,void 0,f===void 0?null:f)}function Gl(i,o,u,f){var g=yn();f=f===void 0?null:f;var y=void 0;if(dt!==null){var w=dt.memoizedState;if(y=w.destroy,f!==null&&Bc(f,w.deps)){g.memoizedState=fo(o,u,y,f);return}}Ge.flags|=i,g.memoizedState=fo(1|o,u,y,f)}function pg(i,o){return Yl(8390656,8,i,o)}function Vc(i,o){return Gl(2048,8,i,o)}function gg(i,o){return Gl(4,2,i,o)}function mg(i,o){return Gl(4,4,i,o)}function yg(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function xg(i,o,u){return u=u!=null?u.concat([i]):null,Gl(4,4,yg.bind(null,o,i),u)}function Wc(){}function vg(i,o){var u=yn();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Bc(o,f[1])?f[0]:(u.memoizedState=[i,o],i)}function kg(i,o){var u=yn();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Bc(o,f[1])?f[0]:(i=i(),u.memoizedState=[i,o],i)}function wg(i,o,u){return(Pi&21)===0?(i.baseState&&(i.baseState=!1,Yt=!0),i.memoizedState=u):(Rn(u,o)||(u=Gd(),Ge.lanes|=u,Ni|=u,i.baseState=!0),o)}function Xk(i,o){var u=ze;ze=u!==0&&4>u?u:4,i(!0);var f=Ic.transition;Ic.transition={};try{i(!1),o()}finally{ze=u,Ic.transition=f}}function bg(){return yn().memoizedState}function Kk(i,o,u){var f=Ur(i);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Sg(i))Og(o,u);else if(u=eg(i,o,u,f),u!==null){var g=Vt();jn(u,i,f,g),Cg(u,o,f)}}function qk(i,o,u){var f=Ur(i),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Sg(i))Og(o,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var w=o.lastRenderedState,N=y(w,u);if(g.hasEagerState=!0,g.eagerState=N,Rn(N,w)){var A=o.interleaved;A===null?(g.next=g,Rc(o)):(g.next=A.next,A.next=g),o.interleaved=g;return}}catch{}finally{}u=eg(i,o,g,f),u!==null&&(g=Vt(),jn(u,i,f,g),Cg(u,o,f))}}function Sg(i){var o=i.alternate;return i===Ge||o!==null&&o===Ge}function Og(i,o){uo=ql=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Cg(i,o,u){if((u&4194240)!==0){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,$u(i,u)}}var Jl={readContext:mn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},Yk={readContext:mn,useCallback:function(i,o){return qn().memoizedState=[i,o===void 0?null:o],i},useContext:mn,useEffect:pg,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Yl(4194308,4,yg.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Yl(4194308,4,i,o)},useInsertionEffect:function(i,o){return Yl(4,2,i,o)},useMemo:function(i,o){var u=qn();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var f=qn();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},f.queue=i,i=i.dispatch=Kk.bind(null,Ge,i),[f.memoizedState,i]},useRef:function(i){var o=qn();return i={current:i},o.memoizedState=i},useState:fg,useDebugValue:Wc,useDeferredValue:function(i){return qn().memoizedState=i},useTransition:function(){var i=fg(!1),o=i[0];return i=Xk.bind(null,i[1]),qn().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var f=Ge,g=qn();if(Xe){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),xt===null)throw Error(t(349));(Pi&30)!==0||lg(f,o,u)}g.memoizedState=u;var y={value:u,getSnapshot:o};return g.queue=y,pg(ug.bind(null,f,y,i),[i]),f.flags|=2048,fo(9,ag.bind(null,f,y,u,o),void 0,null),u},useId:function(){var i=qn(),o=xt.identifierPrefix;if(Xe){var u=gr,f=pr;u=(f&~(1<<32-An(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=co++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=Uk++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},Gk={readContext:mn,useCallback:vg,useContext:mn,useEffect:Vc,useImperativeHandle:xg,useInsertionEffect:gg,useLayoutEffect:mg,useMemo:kg,useReducer:_c,useRef:dg,useState:function(){return _c(ho)},useDebugValue:Wc,useDeferredValue:function(i){var o=yn();return wg(o,dt.memoizedState,i)},useTransition:function(){var i=_c(ho)[0],o=yn().memoizedState;return[i,o]},useMutableSource:sg,useSyncExternalStore:og,useId:bg,unstable_isNewReconciler:!1},Jk={readContext:mn,useCallback:vg,useContext:mn,useEffect:Vc,useImperativeHandle:xg,useInsertionEffect:gg,useLayoutEffect:mg,useMemo:kg,useReducer:Hc,useRef:dg,useState:function(){return Hc(ho)},useDebugValue:Wc,useDeferredValue:function(i){var o=yn();return dt===null?o.memoizedState=i:wg(o,dt.memoizedState,i)},useTransition:function(){var i=Hc(ho)[0],o=yn().memoizedState;return[i,o]},useMutableSource:sg,useSyncExternalStore:og,useId:bg,unstable_isNewReconciler:!1};function Tn(i,o){if(i&&i.defaultProps){o=H({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function Qc(i,o,u,f){o=i.memoizedState,u=u(f,o),u=u==null?o:H({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Zl={isMounted:function(i){return(i=i._reactInternals)?vi(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var f=Vt(),g=Ur(i),y=yr(f,g);y.payload=o,u!=null&&(y.callback=u),o=Vr(i,y,g),o!==null&&(jn(o,i,g,f),$l(o,i,g))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var f=Vt(),g=Ur(i),y=yr(f,g);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=Vr(i,y,g),o!==null&&(jn(o,i,g,f),$l(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Vt(),f=Ur(i),g=yr(u,f);g.tag=2,o!=null&&(g.callback=o),o=Vr(i,g,f),o!==null&&(jn(o,i,f,u),$l(o,i,f))}};function Pg(i,o,u,f,g,y,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,y,w):o.prototype&&o.prototype.isPureReactComponent?!Js(u,f)||!Js(g,y):!0}function Ng(i,o,u){var f=!1,g=Fr,y=o.contextType;return typeof y=="object"&&y!==null?y=mn(y):(g=qt(o)?wi:Mt.current,f=o.contextTypes,y=(f=f!=null)?Zi(i,g):Fr),o=new o(u,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Zl,i.stateNode=o,o._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=y),o}function Eg(i,o,u,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==i&&Zl.enqueueReplaceState(o,o.state,null)}function $c(i,o,u,f){var g=i.stateNode;g.props=u,g.state=i.memoizedState,g.refs={},Mc(i);var y=o.contextType;typeof y=="object"&&y!==null?g.context=mn(y):(y=qt(o)?wi:Mt.current,g.context=Zi(i,y)),g.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(Qc(i,o,y,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Zl.enqueueReplaceState(g,g.state,null),Ul(i,u,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function ls(i,o){try{var u="",f=o;do u+=ye(f),f=f.return;while(f);var g=u}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:g,digest:null}}function Uc(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Xc(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var Zk=typeof WeakMap=="function"?WeakMap:Map;function Ag(i,o,u){u=yr(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){oa||(oa=!0,ah=f),Xc(i,o)},u}function Rg(i,o,u){u=yr(-1,u),u.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;u.payload=function(){return f(g)},u.callback=function(){Xc(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){Xc(i,o),typeof f!="function"&&(Qr===null?Qr=new Set([this]):Qr.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})}),u}function Mg(i,o,u){var f=i.pingCache;if(f===null){f=i.pingCache=new Zk;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(g.add(u),i=dw.bind(null,i,o,u),o.then(i,i))}function Tg(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Dg(i,o,u,f,g){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=yr(-1,1),o.tag=2,Vr(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var ew=B.ReactCurrentOwner,Yt=!1;function Ht(i,o,u,f){o.child=i===null?Zp(o,null,u,f):rs(o,i.child,u,f)}function Lg(i,o,u,f,g){u=u.render;var y=o.ref;return ss(o,g),f=zc(i,o,u,f,y,g),u=Fc(),i!==null&&!Yt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,xr(i,o,g)):(Xe&&u&&wc(o),o.flags|=1,Ht(i,o,f,g),o.child)}function jg(i,o,u,f,g){if(i===null){var y=u.type;return typeof y=="function"&&!gh(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=y,Ig(i,o,y,f,g)):(i=fa(u.type,null,f,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&g)===0){var w=y.memoizedProps;if(u=u.compare,u=u!==null?u:Js,u(w,f)&&i.ref===o.ref)return xr(i,o,g)}return o.flags|=1,i=Kr(y,f),i.ref=o.ref,i.return=o,o.child=i}function Ig(i,o,u,f,g){if(i!==null){var y=i.memoizedProps;if(Js(y,f)&&i.ref===o.ref)if(Yt=!1,o.pendingProps=f=y,(i.lanes&g)!==0)(i.flags&131072)!==0&&(Yt=!0);else return o.lanes=i.lanes,xr(i,o,g)}return Kc(i,o,u,f,g)}function Bg(i,o,u){var f=o.pendingProps,g=f.children,y=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ve(us,an),an|=u;else{if((u&1073741824)===0)return i=y!==null?y.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Ve(us,an),an|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=y!==null?y.baseLanes:u,Ve(us,an),an|=f}else y!==null?(f=y.baseLanes|u,o.memoizedState=null):f=u,Ve(us,an),an|=f;return Ht(i,o,g,u),o.child}function zg(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Kc(i,o,u,f,g){var y=qt(u)?wi:Mt.current;return y=Zi(o,y),ss(o,g),u=zc(i,o,u,f,y,g),f=Fc(),i!==null&&!Yt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,xr(i,o,g)):(Xe&&f&&wc(o),o.flags|=1,Ht(i,o,u,g),o.child)}function Fg(i,o,u,f,g){if(qt(u)){var y=!0;Bl(o)}else y=!1;if(ss(o,g),o.stateNode===null)ta(i,o),Ng(o,u,f),$c(o,u,f,g),f=!0;else if(i===null){var w=o.stateNode,N=o.memoizedProps;w.props=N;var A=w.context,_=u.contextType;typeof _=="object"&&_!==null?_=mn(_):(_=qt(u)?wi:Mt.current,_=Zi(o,_));var G=u.getDerivedStateFromProps,te=typeof G=="function"||typeof w.getSnapshotBeforeUpdate=="function";te||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==f||A!==_)&&Eg(o,w,f,_),Hr=!1;var q=o.memoizedState;w.state=q,Ul(o,f,w,g),A=o.memoizedState,N!==f||q!==A||Kt.current||Hr?(typeof G=="function"&&(Qc(o,u,G,f),A=o.memoizedState),(N=Hr||Pg(o,u,N,f,q,A,_))?(te||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=A),w.props=f,w.state=A,w.context=_,f=N):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{w=o.stateNode,tg(i,o),N=o.memoizedProps,_=o.type===o.elementType?N:Tn(o.type,N),w.props=_,te=o.pendingProps,q=w.context,A=u.contextType,typeof A=="object"&&A!==null?A=mn(A):(A=qt(u)?wi:Mt.current,A=Zi(o,A));var fe=u.getDerivedStateFromProps;(G=typeof fe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==te||q!==A)&&Eg(o,w,f,A),Hr=!1,q=o.memoizedState,w.state=q,Ul(o,f,w,g);var ge=o.memoizedState;N!==te||q!==ge||Kt.current||Hr?(typeof fe=="function"&&(Qc(o,u,fe,f),ge=o.memoizedState),(_=Hr||Pg(o,u,_,f,q,ge,A)||!1)?(G||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(f,ge,A),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(f,ge,A)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===i.memoizedProps&&q===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&q===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ge),w.props=f,w.state=ge,w.context=A,f=_):(typeof w.componentDidUpdate!="function"||N===i.memoizedProps&&q===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&q===i.memoizedState||(o.flags|=1024),f=!1)}return qc(i,o,u,f,y,g)}function qc(i,o,u,f,g,y){zg(i,o);var w=(o.flags&128)!==0;if(!f&&!w)return g&&Qp(o,u,!1),xr(i,o,y);f=o.stateNode,ew.current=o;var N=w&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,i!==null&&w?(o.child=rs(o,i.child,null,y),o.child=rs(o,null,N,y)):Ht(i,o,N,y),o.memoizedState=f.state,g&&Qp(o,u,!0),o.child}function _g(i){var o=i.stateNode;o.pendingContext?Vp(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Vp(i,o.context,!1),Tc(i,o.containerInfo)}function Hg(i,o,u,f,g){return ns(),Cc(g),o.flags|=256,Ht(i,o,u,f),o.child}var Yc={dehydrated:null,treeContext:null,retryLane:0};function Gc(i){return{baseLanes:i,cachePool:null,transitions:null}}function Vg(i,o,u){var f=o.pendingProps,g=Ye.current,y=!1,w=(o.flags&128)!==0,N;if((N=w)||(N=i!==null&&i.memoizedState===null?!1:(g&2)!==0),N?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),Ve(Ye,g&1),i===null)return Oc(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(w=f.children,i=f.fallback,y?(f=o.mode,y=o.child,w={mode:"hidden",children:w},(f&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=w):y=da(w,f,0,null),i=Mi(i,f,u,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Gc(u),o.memoizedState=Yc,i):Jc(o,w));if(g=i.memoizedState,g!==null&&(N=g.dehydrated,N!==null))return tw(i,o,w,f,N,g,u);if(y){y=f.fallback,w=o.mode,g=i.child,N=g.sibling;var A={mode:"hidden",children:f.children};return(w&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=A,o.deletions=null):(f=Kr(g,A),f.subtreeFlags=g.subtreeFlags&14680064),N!==null?y=Kr(N,y):(y=Mi(y,w,u,null),y.flags|=2),y.return=o,f.return=o,f.sibling=y,o.child=f,f=y,y=o.child,w=i.child.memoizedState,w=w===null?Gc(u):{baseLanes:w.baseLanes|u,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=i.childLanes&~u,o.memoizedState=Yc,f}return y=i.child,i=y.sibling,f=Kr(y,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=u),f.return=o,f.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=f,o.memoizedState=null,f}function Jc(i,o){return o=da({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function ea(i,o,u,f){return f!==null&&Cc(f),rs(o,i.child,null,u),i=Jc(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function tw(i,o,u,f,g,y,w){if(u)return o.flags&256?(o.flags&=-257,f=Uc(Error(t(422))),ea(i,o,w,f)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=f.fallback,g=o.mode,f=da({mode:"visible",children:f.children},g,0,null),y=Mi(y,g,w,null),y.flags|=2,f.return=o,y.return=o,f.sibling=y,o.child=f,(o.mode&1)!==0&&rs(o,i.child,null,w),o.child.memoizedState=Gc(w),o.memoizedState=Yc,y);if((o.mode&1)===0)return ea(i,o,w,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var N=f.dgst;return f=N,y=Error(t(419)),f=Uc(y,f,void 0),ea(i,o,w,f)}if(N=(w&i.childLanes)!==0,Yt||N){if(f=xt,f!==null){switch(w&-w){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|w))!==0?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,mr(i,g),jn(f,i,g,-1))}return ph(),f=Uc(Error(t(421))),ea(i,o,w,f)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=pw.bind(null,i),g._reactRetry=o,null):(i=y.treeContext,ln=Br(g.nextSibling),on=o,Xe=!0,Mn=null,i!==null&&(pn[gn++]=pr,pn[gn++]=gr,pn[gn++]=bi,pr=i.id,gr=i.overflow,bi=o),o=Jc(o,f.children),o.flags|=4096,o)}function Wg(i,o,u){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),Ac(i.return,o,u)}function Zc(i,o,u,f,g){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=u,y.tailMode=g)}function Qg(i,o,u){var f=o.pendingProps,g=f.revealOrder,y=f.tail;if(Ht(i,o,f.children,u),f=Ye.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Wg(i,u,o);else if(i.tag===19)Wg(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(Ve(Ye,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)i=u.alternate,i!==null&&Xl(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),Zc(o,!1,g,u,y);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Xl(i)===null){o.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}Zc(o,!0,u,null,y);break;case"together":Zc(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ta(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function xr(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Ni|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=Kr(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Kr(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function nw(i,o,u){switch(o.tag){case 3:_g(o),ns();break;case 5:ig(o);break;case 1:qt(o.type)&&Bl(o);break;case 4:Tc(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;Ve(Wl,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Ve(Ye,Ye.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Vg(i,o,u):(Ve(Ye,Ye.current&1),i=xr(i,o,u),i!==null?i.sibling:null);Ve(Ye,Ye.current&1);break;case 19:if(f=(u&o.childLanes)!==0,(i.flags&128)!==0){if(f)return Qg(i,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Ve(Ye,Ye.current),f)break;return null;case 22:case 23:return o.lanes=0,Bg(i,o,u)}return xr(i,o,u)}var $g,eh,Ug,Xg;$g=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},eh=function(){},Ug=function(i,o,u,f){var g=i.memoizedProps;if(g!==f){i=o.stateNode,Ci(Kn.current);var y=null;switch(u){case"input":g=Je(i,g),f=Je(i,f),y=[];break;case"select":g=H({},g,{value:void 0}),f=H({},f,{value:void 0}),y=[];break;case"textarea":g=Wn(i,g),f=Wn(i,f),y=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Ll)}Qn(u,f);var w;u=null;for(_ in g)if(!f.hasOwnProperty(_)&&g.hasOwnProperty(_)&&g[_]!=null)if(_==="style"){var N=g[_];for(w in N)N.hasOwnProperty(w)&&(u||(u={}),u[w]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?y||(y=[]):(y=y||[]).push(_,null));for(_ in f){var A=f[_];if(N=g!=null?g[_]:void 0,f.hasOwnProperty(_)&&A!==N&&(A!=null||N!=null))if(_==="style")if(N){for(w in N)!N.hasOwnProperty(w)||A&&A.hasOwnProperty(w)||(u||(u={}),u[w]="");for(w in A)A.hasOwnProperty(w)&&N[w]!==A[w]&&(u||(u={}),u[w]=A[w])}else u||(y||(y=[]),y.push(_,u)),u=A;else _==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,N=N?N.__html:void 0,A!=null&&N!==A&&(y=y||[]).push(_,A)):_==="children"?typeof A!="string"&&typeof A!="number"||(y=y||[]).push(_,""+A):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(s.hasOwnProperty(_)?(A!=null&&_==="onScroll"&&We("scroll",i),y||N===A||(y=[])):(y=y||[]).push(_,A))}u&&(y=y||[]).push("style",u);var _=y;(o.updateQueue=_)&&(o.flags|=4)}},Xg=function(i,o,u,f){u!==f&&(o.flags|=4)};function po(i,o){if(!Xe)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Dt(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(o)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=u,o}function rw(i,o,u){var f=o.pendingProps;switch(bc(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(o),null;case 1:return qt(o.type)&&Il(),Dt(o),null;case 3:return f=o.stateNode,os(),Qe(Kt),Qe(Mt),jc(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Hl(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Mn!==null&&(hh(Mn),Mn=null))),eh(i,o),Dt(o),null;case 5:Dc(o);var g=Ci(ao.current);if(u=o.type,i!==null&&o.stateNode!=null)Ug(i,o,u,f,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return Dt(o),null}if(i=Ci(Kn.current),Hl(o)){f=o.stateNode,u=o.type;var y=o.memoizedProps;switch(f[Xn]=o,f[ro]=y,i=(o.mode&1)!==0,u){case"dialog":We("cancel",f),We("close",f);break;case"iframe":case"object":case"embed":We("load",f);break;case"video":case"audio":for(g=0;g<eo.length;g++)We(eo[g],f);break;case"source":We("error",f);break;case"img":case"image":case"link":We("error",f),We("load",f);break;case"details":We("toggle",f);break;case"input":ft(f,y),We("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!y.multiple},We("invalid",f);break;case"textarea":di(f,y),We("invalid",f)}Qn(u,y),g=null;for(var w in y)if(y.hasOwnProperty(w)){var N=y[w];w==="children"?typeof N=="string"?f.textContent!==N&&(y.suppressHydrationWarning!==!0&&Dl(f.textContent,N,i),g=["children",N]):typeof N=="number"&&f.textContent!==""+N&&(y.suppressHydrationWarning!==!0&&Dl(f.textContent,N,i),g=["children",""+N]):s.hasOwnProperty(w)&&N!=null&&w==="onScroll"&&We("scroll",f)}switch(u){case"input":Re(f),fi(f,y,!0);break;case"textarea":Re(f),ar(f);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(f.onclick=Ll)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{w=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=gi(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=w.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=w.createElement(u,{is:f.is}):(i=w.createElement(u),u==="select"&&(w=i,f.multiple?w.multiple=!0:f.size&&(w.size=f.size))):i=w.createElementNS(i,u),i[Xn]=o,i[ro]=f,$g(i,o,!1,!1),o.stateNode=i;e:{switch(w=xi(u,f),u){case"dialog":We("cancel",i),We("close",i),g=f;break;case"iframe":case"object":case"embed":We("load",i),g=f;break;case"video":case"audio":for(g=0;g<eo.length;g++)We(eo[g],i);g=f;break;case"source":We("error",i),g=f;break;case"img":case"image":case"link":We("error",i),We("load",i),g=f;break;case"details":We("toggle",i),g=f;break;case"input":ft(i,f),g=Je(i,f),We("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=H({},f,{value:void 0}),We("invalid",i);break;case"textarea":di(i,f),g=Wn(i,f),We("invalid",i);break;default:g=f}Qn(u,g),N=g;for(y in N)if(N.hasOwnProperty(y)){var A=N[y];y==="style"?yi(i,A):y==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&oe(i,A)):y==="children"?typeof A=="string"?(u!=="textarea"||A!=="")&&Ie(i,A):typeof A=="number"&&Ie(i,""+A):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?A!=null&&y==="onScroll"&&We("scroll",i):A!=null&&T(i,y,A,w))}switch(u){case"input":Re(i),fi(i,f,!1);break;case"textarea":Re(i),ar(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Se(f.value));break;case"select":i.multiple=!!f.multiple,y=f.value,y!=null?Ft(i,!!f.multiple,y,!1):f.defaultValue!=null&&Ft(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Ll)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Dt(o),null;case 6:if(i&&o.stateNode!=null)Xg(i,o,i.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(u=Ci(ao.current),Ci(Kn.current),Hl(o)){if(f=o.stateNode,u=o.memoizedProps,f[Xn]=o,(y=f.nodeValue!==u)&&(i=on,i!==null))switch(i.tag){case 3:Dl(f.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Dl(f.nodeValue,u,(i.mode&1)!==0)}y&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Xn]=o,o.stateNode=f}return Dt(o),null;case 13:if(Qe(Ye),f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Xe&&ln!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Yp(),ns(),o.flags|=98560,y=!1;else if(y=Hl(o),f!==null&&f.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Xn]=o}else ns(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Dt(o),y=!1}else Mn!==null&&(hh(Mn),Mn=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Ye.current&1)!==0?pt===0&&(pt=3):ph())),o.updateQueue!==null&&(o.flags|=4),Dt(o),null);case 4:return os(),eh(i,o),i===null&&to(o.stateNode.containerInfo),Dt(o),null;case 10:return Ec(o.type._context),Dt(o),null;case 17:return qt(o.type)&&Il(),Dt(o),null;case 19:if(Qe(Ye),y=o.memoizedState,y===null)return Dt(o),null;if(f=(o.flags&128)!==0,w=y.rendering,w===null)if(f)po(y,!1);else{if(pt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(w=Xl(i),w!==null){for(o.flags|=128,po(y,!1),f=w.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)y=u,i=f,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,i=w.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Ve(Ye,Ye.current&1|2),o.child}i=i.sibling}y.tail!==null&&rt()>cs&&(o.flags|=128,f=!0,po(y,!1),o.lanes=4194304)}else{if(!f)if(i=Xl(w),i!==null){if(o.flags|=128,f=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),po(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!Xe)return Dt(o),null}else 2*rt()-y.renderingStartTime>cs&&u!==1073741824&&(o.flags|=128,f=!0,po(y,!1),o.lanes=4194304);y.isBackwards?(w.sibling=o.child,o.child=w):(u=y.last,u!==null?u.sibling=w:o.child=w,y.last=w)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=rt(),o.sibling=null,u=Ye.current,Ve(Ye,f?u&1|2:u&1),o):(Dt(o),null);case 22:case 23:return dh(),f=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(an&1073741824)!==0&&(Dt(o),o.subtreeFlags&6&&(o.flags|=8192)):Dt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function iw(i,o){switch(bc(o),o.tag){case 1:return qt(o.type)&&Il(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return os(),Qe(Kt),Qe(Mt),jc(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Dc(o),null;case 13:if(Qe(Ye),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ns()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Qe(Ye),null;case 4:return os(),null;case 10:return Ec(o.type._context),null;case 22:case 23:return dh(),null;case 24:return null;default:return null}}var na=!1,Lt=!1,sw=typeof WeakSet=="function"?WeakSet:Set,pe=null;function as(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Ze(i,o,f)}else u.current=null}function th(i,o,u){try{u()}catch(f){Ze(i,o,f)}}var Kg=!1;function ow(i,o){if(dc=bl,i=Pp(),sc(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var w=0,N=-1,A=-1,_=0,G=0,te=i,q=null;t:for(;;){for(var fe;te!==u||g!==0&&te.nodeType!==3||(N=w+g),te!==y||f!==0&&te.nodeType!==3||(A=w+f),te.nodeType===3&&(w+=te.nodeValue.length),(fe=te.firstChild)!==null;)q=te,te=fe;for(;;){if(te===i)break t;if(q===u&&++_===g&&(N=w),q===y&&++G===f&&(A=w),(fe=te.nextSibling)!==null)break;te=q,q=te.parentNode}te=fe}u=N===-1||A===-1?null:{start:N,end:A}}else u=null}u=u||{start:0,end:0}}else u=null;for(pc={focusedElem:i,selectionRange:u},bl=!1,pe=o;pe!==null;)if(o=pe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,pe=i;else for(;pe!==null;){o=pe;try{var ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var me=ge.memoizedProps,it=ge.memoizedState,I=o.stateNode,R=I.getSnapshotBeforeUpdate(o.elementType===o.type?me:Tn(o.type,me),it);I.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var z=o.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){Ze(o,o.return,ie)}if(i=o.sibling,i!==null){i.return=o.return,pe=i;break}pe=o.return}return ge=Kg,Kg=!1,ge}function go(i,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var y=g.destroy;g.destroy=void 0,y!==void 0&&th(o,u,y)}g=g.next}while(g!==f)}}function ra(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function nh(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function qg(i){var o=i.alternate;o!==null&&(i.alternate=null,qg(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Xn],delete o[ro],delete o[xc],delete o[Vk],delete o[Wk])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Yg(i){return i.tag===5||i.tag===3||i.tag===4}function Gg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Yg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function rh(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ll));else if(f!==4&&(i=i.child,i!==null))for(rh(i,o,u),i=i.sibling;i!==null;)rh(i,o,u),i=i.sibling}function ih(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(ih(i,o,u),i=i.sibling;i!==null;)ih(i,o,u),i=i.sibling}var St=null,Dn=!1;function Wr(i,o,u){for(u=u.child;u!==null;)Jg(i,o,u),u=u.sibling}function Jg(i,o,u){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(ml,u)}catch{}switch(u.tag){case 5:Lt||as(u,o);case 6:var f=St,g=Dn;St=null,Wr(i,o,u),St=f,Dn=g,St!==null&&(Dn?(i=St,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):St.removeChild(u.stateNode));break;case 18:St!==null&&(Dn?(i=St,u=u.stateNode,i.nodeType===8?yc(i.parentNode,u):i.nodeType===1&&yc(i,u),Us(i)):yc(St,u.stateNode));break;case 4:f=St,g=Dn,St=u.stateNode.containerInfo,Dn=!0,Wr(i,o,u),St=f,Dn=g;break;case 0:case 11:case 14:case 15:if(!Lt&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var y=g,w=y.destroy;y=y.tag,w!==void 0&&((y&2)!==0||(y&4)!==0)&&th(u,o,w),g=g.next}while(g!==f)}Wr(i,o,u);break;case 1:if(!Lt&&(as(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(N){Ze(u,o,N)}Wr(i,o,u);break;case 21:Wr(i,o,u);break;case 22:u.mode&1?(Lt=(f=Lt)||u.memoizedState!==null,Wr(i,o,u),Lt=f):Wr(i,o,u);break;default:Wr(i,o,u)}}function Zg(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new sw),o.forEach(function(f){var g=gw.bind(null,i,f);u.has(f)||(u.add(f),f.then(g,g))})}}function Ln(i,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var y=i,w=o,N=w;e:for(;N!==null;){switch(N.tag){case 5:St=N.stateNode,Dn=!1;break e;case 3:St=N.stateNode.containerInfo,Dn=!0;break e;case 4:St=N.stateNode.containerInfo,Dn=!0;break e}N=N.return}if(St===null)throw Error(t(160));Jg(y,w,g),St=null,Dn=!1;var A=g.alternate;A!==null&&(A.return=null),g.return=null}catch(_){Ze(g,o,_)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)em(o,i),o=o.sibling}function em(i,o){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Ln(o,i),Yn(i),f&4){try{go(3,i,i.return),ra(3,i)}catch(me){Ze(i,i.return,me)}try{go(5,i,i.return)}catch(me){Ze(i,i.return,me)}}break;case 1:Ln(o,i),Yn(i),f&512&&u!==null&&as(u,u.return);break;case 5:if(Ln(o,i),Yn(i),f&512&&u!==null&&as(u,u.return),i.flags&32){var g=i.stateNode;try{Ie(g,"")}catch(me){Ze(i,i.return,me)}}if(f&4&&(g=i.stateNode,g!=null)){var y=i.memoizedProps,w=u!==null?u.memoizedProps:y,N=i.type,A=i.updateQueue;if(i.updateQueue=null,A!==null)try{N==="input"&&y.type==="radio"&&y.name!=null&&Cn(g,y),xi(N,w);var _=xi(N,y);for(w=0;w<A.length;w+=2){var G=A[w],te=A[w+1];G==="style"?yi(g,te):G==="dangerouslySetInnerHTML"?oe(g,te):G==="children"?Ie(g,te):T(g,G,te,_)}switch(N){case"input":Er(g,y);break;case"textarea":pi(g,y);break;case"select":var q=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var fe=y.value;fe!=null?Ft(g,!!y.multiple,fe,!1):q!==!!y.multiple&&(y.defaultValue!=null?Ft(g,!!y.multiple,y.defaultValue,!0):Ft(g,!!y.multiple,y.multiple?[]:"",!1))}g[ro]=y}catch(me){Ze(i,i.return,me)}}break;case 6:if(Ln(o,i),Yn(i),f&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,y=i.memoizedProps;try{g.nodeValue=y}catch(me){Ze(i,i.return,me)}}break;case 3:if(Ln(o,i),Yn(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Us(o.containerInfo)}catch(me){Ze(i,i.return,me)}break;case 4:Ln(o,i),Yn(i);break;case 13:Ln(o,i),Yn(i),g=i.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(lh=rt())),f&4&&Zg(i);break;case 22:if(G=u!==null&&u.memoizedState!==null,i.mode&1?(Lt=(_=Lt)||G,Ln(o,i),Lt=_):Ln(o,i),Yn(i),f&8192){if(_=i.memoizedState!==null,(i.stateNode.isHidden=_)&&!G&&(i.mode&1)!==0)for(pe=i,G=i.child;G!==null;){for(te=pe=G;pe!==null;){switch(q=pe,fe=q.child,q.tag){case 0:case 11:case 14:case 15:go(4,q,q.return);break;case 1:as(q,q.return);var ge=q.stateNode;if(typeof ge.componentWillUnmount=="function"){f=q,u=q.return;try{o=f,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(me){Ze(f,u,me)}}break;case 5:as(q,q.return);break;case 22:if(q.memoizedState!==null){rm(te);continue}}fe!==null?(fe.return=q,pe=fe):rm(te)}G=G.sibling}e:for(G=null,te=i;;){if(te.tag===5){if(G===null){G=te;try{g=te.stateNode,_?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(N=te.stateNode,A=te.memoizedProps.style,w=A!=null&&A.hasOwnProperty("display")?A.display:null,N.style.display=mi("display",w))}catch(me){Ze(i,i.return,me)}}}else if(te.tag===6){if(G===null)try{te.stateNode.nodeValue=_?"":te.memoizedProps}catch(me){Ze(i,i.return,me)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===i)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===i)break e;for(;te.sibling===null;){if(te.return===null||te.return===i)break e;G===te&&(G=null),te=te.return}G===te&&(G=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Ln(o,i),Yn(i),f&4&&Zg(i);break;case 21:break;default:Ln(o,i),Yn(i)}}function Yn(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(Yg(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Ie(g,""),f.flags&=-33);var y=Gg(i);ih(i,y,g);break;case 3:case 4:var w=f.stateNode.containerInfo,N=Gg(i);rh(i,N,w);break;default:throw Error(t(161))}}catch(A){Ze(i,i.return,A)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function lw(i,o,u){pe=i,tm(i)}function tm(i,o,u){for(var f=(i.mode&1)!==0;pe!==null;){var g=pe,y=g.child;if(g.tag===22&&f){var w=g.memoizedState!==null||na;if(!w){var N=g.alternate,A=N!==null&&N.memoizedState!==null||Lt;N=na;var _=Lt;if(na=w,(Lt=A)&&!_)for(pe=g;pe!==null;)w=pe,A=w.child,w.tag===22&&w.memoizedState!==null?im(g):A!==null?(A.return=w,pe=A):im(g);for(;y!==null;)pe=y,tm(y),y=y.sibling;pe=g,na=N,Lt=_}nm(i)}else(g.subtreeFlags&8772)!==0&&y!==null?(y.return=g,pe=y):nm(i)}}function nm(i){for(;pe!==null;){var o=pe;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Lt||ra(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Lt)if(u===null)f.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:Tn(o.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&rg(o,y,f);break;case 3:var w=o.updateQueue;if(w!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}rg(o,w,u)}break;case 5:var N=o.stateNode;if(u===null&&o.flags&4){u=N;var A=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&u.focus();break;case"img":A.src&&(u.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var _=o.alternate;if(_!==null){var G=_.memoizedState;if(G!==null){var te=G.dehydrated;te!==null&&Us(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Lt||o.flags&512&&nh(o)}catch(q){Ze(o,o.return,q)}}if(o===i){pe=null;break}if(u=o.sibling,u!==null){u.return=o.return,pe=u;break}pe=o.return}}function rm(i){for(;pe!==null;){var o=pe;if(o===i){pe=null;break}var u=o.sibling;if(u!==null){u.return=o.return,pe=u;break}pe=o.return}}function im(i){for(;pe!==null;){var o=pe;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{ra(4,o)}catch(A){Ze(o,u,A)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(A){Ze(o,g,A)}}var y=o.return;try{nh(o)}catch(A){Ze(o,y,A)}break;case 5:var w=o.return;try{nh(o)}catch(A){Ze(o,w,A)}}}catch(A){Ze(o,o.return,A)}if(o===i){pe=null;break}var N=o.sibling;if(N!==null){N.return=o.return,pe=N;break}pe=o.return}}var aw=Math.ceil,ia=B.ReactCurrentDispatcher,sh=B.ReactCurrentOwner,xn=B.ReactCurrentBatchConfig,Me=0,xt=null,ut=null,Ot=0,an=0,us=zr(0),pt=0,mo=null,Ni=0,sa=0,oh=0,yo=null,Gt=null,lh=0,cs=1/0,vr=null,oa=!1,ah=null,Qr=null,la=!1,$r=null,aa=0,xo=0,uh=null,ua=-1,ca=0;function Vt(){return(Me&6)!==0?rt():ua!==-1?ua:ua=rt()}function Ur(i){return(i.mode&1)===0?1:(Me&2)!==0&&Ot!==0?Ot&-Ot:$k.transition!==null?(ca===0&&(ca=Gd()),ca):(i=ze,i!==0||(i=window.event,i=i===void 0?16:op(i.type)),i)}function jn(i,o,u,f){if(50<xo)throw xo=0,uh=null,Error(t(185));Hs(i,u,f),((Me&2)===0||i!==xt)&&(i===xt&&((Me&2)===0&&(sa|=u),pt===4&&Xr(i,Ot)),Jt(i,f),u===1&&Me===0&&(o.mode&1)===0&&(cs=rt()+500,zl&&_r()))}function Jt(i,o){var u=i.callbackNode;$1(i,o);var f=vl(i,i===xt?Ot:0);if(f===0)u!==null&&Kd(u),i.callbackNode=null,i.callbackPriority=0;else if(o=f&-f,i.callbackPriority!==o){if(u!=null&&Kd(u),o===1)i.tag===0?Qk(om.bind(null,i)):$p(om.bind(null,i)),_k(function(){(Me&6)===0&&_r()}),u=null;else{switch(Jd(f)){case 1:u=Vu;break;case 4:u=qd;break;case 16:u=gl;break;case 536870912:u=Yd;break;default:u=gl}u=pm(u,sm.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function sm(i,o){if(ua=-1,ca=0,(Me&6)!==0)throw Error(t(327));var u=i.callbackNode;if(hs()&&i.callbackNode!==u)return null;var f=vl(i,i===xt?Ot:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||o)o=ha(i,f);else{o=f;var g=Me;Me|=2;var y=am();(xt!==i||Ot!==o)&&(vr=null,cs=rt()+500,Ai(i,o));do try{hw();break}catch(N){lm(i,N)}while(!0);Nc(),ia.current=y,Me=g,ut!==null?o=0:(xt=null,Ot=0,o=pt)}if(o!==0){if(o===2&&(g=Wu(i),g!==0&&(f=g,o=ch(i,g))),o===1)throw u=mo,Ai(i,0),Xr(i,f),Jt(i,rt()),u;if(o===6)Xr(i,f);else{if(g=i.current.alternate,(f&30)===0&&!uw(g)&&(o=ha(i,f),o===2&&(y=Wu(i),y!==0&&(f=y,o=ch(i,y))),o===1))throw u=mo,Ai(i,0),Xr(i,f),Jt(i,rt()),u;switch(i.finishedWork=g,i.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:Ri(i,Gt,vr);break;case 3:if(Xr(i,f),(f&130023424)===f&&(o=lh+500-rt(),10<o)){if(vl(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){Vt(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=mc(Ri.bind(null,i,Gt,vr),o);break}Ri(i,Gt,vr);break;case 4:if(Xr(i,f),(f&4194240)===f)break;for(o=i.eventTimes,g=-1;0<f;){var w=31-An(f);y=1<<w,w=o[w],w>g&&(g=w),f&=~y}if(f=g,f=rt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*aw(f/1960))-f,10<f){i.timeoutHandle=mc(Ri.bind(null,i,Gt,vr),f);break}Ri(i,Gt,vr);break;case 5:Ri(i,Gt,vr);break;default:throw Error(t(329))}}}return Jt(i,rt()),i.callbackNode===u?sm.bind(null,i):null}function ch(i,o){var u=yo;return i.current.memoizedState.isDehydrated&&(Ai(i,o).flags|=256),i=ha(i,o),i!==2&&(o=Gt,Gt=u,o!==null&&hh(o)),i}function hh(i){Gt===null?Gt=i:Gt.push.apply(Gt,i)}function uw(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],y=g.getSnapshot;g=g.value;try{if(!Rn(y(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Xr(i,o){for(o&=~oh,o&=~sa,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-An(o),f=1<<u;i[u]=-1,o&=~f}}function om(i){if((Me&6)!==0)throw Error(t(327));hs();var o=vl(i,0);if((o&1)===0)return Jt(i,rt()),null;var u=ha(i,o);if(i.tag!==0&&u===2){var f=Wu(i);f!==0&&(o=f,u=ch(i,f))}if(u===1)throw u=mo,Ai(i,0),Xr(i,o),Jt(i,rt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Ri(i,Gt,vr),Jt(i,rt()),null}function fh(i,o){var u=Me;Me|=1;try{return i(o)}finally{Me=u,Me===0&&(cs=rt()+500,zl&&_r())}}function Ei(i){$r!==null&&$r.tag===0&&(Me&6)===0&&hs();var o=Me;Me|=1;var u=xn.transition,f=ze;try{if(xn.transition=null,ze=1,i)return i()}finally{ze=f,xn.transition=u,Me=o,(Me&6)===0&&_r()}}function dh(){an=us.current,Qe(us)}function Ai(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,Fk(u)),ut!==null)for(u=ut.return;u!==null;){var f=u;switch(bc(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Il();break;case 3:os(),Qe(Kt),Qe(Mt),jc();break;case 5:Dc(f);break;case 4:os();break;case 13:Qe(Ye);break;case 19:Qe(Ye);break;case 10:Ec(f.type._context);break;case 22:case 23:dh()}u=u.return}if(xt=i,ut=i=Kr(i.current,null),Ot=an=o,pt=0,mo=null,oh=sa=Ni=0,Gt=yo=null,Oi!==null){for(o=0;o<Oi.length;o++)if(u=Oi[o],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,y=u.pending;if(y!==null){var w=y.next;y.next=g,f.next=w}u.pending=f}Oi=null}return i}function lm(i,o){do{var u=ut;try{if(Nc(),Kl.current=Jl,ql){for(var f=Ge.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}ql=!1}if(Pi=0,yt=dt=Ge=null,uo=!1,co=0,sh.current=null,u===null||u.return===null){pt=1,mo=o,ut=null;break}e:{var y=i,w=u.return,N=u,A=o;if(o=Ot,N.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var _=A,G=N,te=G.tag;if((G.mode&1)===0&&(te===0||te===11||te===15)){var q=G.alternate;q?(G.updateQueue=q.updateQueue,G.memoizedState=q.memoizedState,G.lanes=q.lanes):(G.updateQueue=null,G.memoizedState=null)}var fe=Tg(w);if(fe!==null){fe.flags&=-257,Dg(fe,w,N,y,o),fe.mode&1&&Mg(y,_,o),o=fe,A=_;var ge=o.updateQueue;if(ge===null){var me=new Set;me.add(A),o.updateQueue=me}else ge.add(A);break e}else{if((o&1)===0){Mg(y,_,o),ph();break e}A=Error(t(426))}}else if(Xe&&N.mode&1){var it=Tg(w);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),Dg(it,w,N,y,o),Cc(ls(A,N));break e}}y=A=ls(A,N),pt!==4&&(pt=2),yo===null?yo=[y]:yo.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var I=Ag(y,A,o);ng(y,I);break e;case 1:N=A;var R=y.type,z=y.stateNode;if((y.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Qr===null||!Qr.has(z)))){y.flags|=65536,o&=-o,y.lanes|=o;var ie=Rg(y,N,o);ng(y,ie);break e}}y=y.return}while(y!==null)}cm(u)}catch(xe){o=xe,ut===u&&u!==null&&(ut=u=u.return);continue}break}while(!0)}function am(){var i=ia.current;return ia.current=Jl,i===null?Jl:i}function ph(){(pt===0||pt===3||pt===2)&&(pt=4),xt===null||(Ni&268435455)===0&&(sa&268435455)===0||Xr(xt,Ot)}function ha(i,o){var u=Me;Me|=2;var f=am();(xt!==i||Ot!==o)&&(vr=null,Ai(i,o));do try{cw();break}catch(g){lm(i,g)}while(!0);if(Nc(),Me=u,ia.current=f,ut!==null)throw Error(t(261));return xt=null,Ot=0,pt}function cw(){for(;ut!==null;)um(ut)}function hw(){for(;ut!==null&&!I1();)um(ut)}function um(i){var o=dm(i.alternate,i,an);i.memoizedProps=i.pendingProps,o===null?cm(i):ut=o,sh.current=null}function cm(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=rw(u,o,an),u!==null){ut=u;return}}else{if(u=iw(u,o),u!==null){u.flags&=32767,ut=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{pt=6,ut=null;return}}if(o=o.sibling,o!==null){ut=o;return}ut=o=i}while(o!==null);pt===0&&(pt=5)}function Ri(i,o,u){var f=ze,g=xn.transition;try{xn.transition=null,ze=1,fw(i,o,u,f)}finally{xn.transition=g,ze=f}return null}function fw(i,o,u,f){do hs();while($r!==null);if((Me&6)!==0)throw Error(t(327));u=i.finishedWork;var g=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=u.lanes|u.childLanes;if(U1(i,y),i===xt&&(ut=xt=null,Ot=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||la||(la=!0,pm(gl,function(){return hs(),null})),y=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||y){y=xn.transition,xn.transition=null;var w=ze;ze=1;var N=Me;Me|=4,sh.current=null,ow(i,u),em(u,i),Tk(pc),bl=!!dc,pc=dc=null,i.current=u,lw(u),B1(),Me=N,ze=w,xn.transition=y}else i.current=u;if(la&&(la=!1,$r=i,aa=g),y=i.pendingLanes,y===0&&(Qr=null),_1(u.stateNode),Jt(i,rt()),o!==null)for(f=i.onRecoverableError,u=0;u<o.length;u++)g=o[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(oa)throw oa=!1,i=ah,ah=null,i;return(aa&1)!==0&&i.tag!==0&&hs(),y=i.pendingLanes,(y&1)!==0?i===uh?xo++:(xo=0,uh=i):xo=0,_r(),null}function hs(){if($r!==null){var i=Jd(aa),o=xn.transition,u=ze;try{if(xn.transition=null,ze=16>i?16:i,$r===null)var f=!1;else{if(i=$r,$r=null,aa=0,(Me&6)!==0)throw Error(t(331));var g=Me;for(Me|=4,pe=i.current;pe!==null;){var y=pe,w=y.child;if((pe.flags&16)!==0){var N=y.deletions;if(N!==null){for(var A=0;A<N.length;A++){var _=N[A];for(pe=_;pe!==null;){var G=pe;switch(G.tag){case 0:case 11:case 15:go(8,G,y)}var te=G.child;if(te!==null)te.return=G,pe=te;else for(;pe!==null;){G=pe;var q=G.sibling,fe=G.return;if(qg(G),G===_){pe=null;break}if(q!==null){q.return=fe,pe=q;break}pe=fe}}}var ge=y.alternate;if(ge!==null){var me=ge.child;if(me!==null){ge.child=null;do{var it=me.sibling;me.sibling=null,me=it}while(me!==null)}}pe=y}}if((y.subtreeFlags&2064)!==0&&w!==null)w.return=y,pe=w;else e:for(;pe!==null;){if(y=pe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:go(9,y,y.return)}var I=y.sibling;if(I!==null){I.return=y.return,pe=I;break e}pe=y.return}}var R=i.current;for(pe=R;pe!==null;){w=pe;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,pe=z;else e:for(w=R;pe!==null;){if(N=pe,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:ra(9,N)}}catch(xe){Ze(N,N.return,xe)}if(N===w){pe=null;break e}var ie=N.sibling;if(ie!==null){ie.return=N.return,pe=ie;break e}pe=N.return}}if(Me=g,_r(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(ml,i)}catch{}f=!0}return f}finally{ze=u,xn.transition=o}}return!1}function hm(i,o,u){o=ls(u,o),o=Ag(i,o,1),i=Vr(i,o,1),o=Vt(),i!==null&&(Hs(i,1,o),Jt(i,o))}function Ze(i,o,u){if(i.tag===3)hm(i,i,u);else for(;o!==null;){if(o.tag===3){hm(o,i,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Qr===null||!Qr.has(f))){i=ls(u,i),i=Rg(o,i,1),o=Vr(o,i,1),i=Vt(),o!==null&&(Hs(o,1,i),Jt(o,i));break}}o=o.return}}function dw(i,o,u){var f=i.pingCache;f!==null&&f.delete(o),o=Vt(),i.pingedLanes|=i.suspendedLanes&u,xt===i&&(Ot&u)===u&&(pt===4||pt===3&&(Ot&130023424)===Ot&&500>rt()-lh?Ai(i,0):oh|=u),Jt(i,o)}function fm(i,o){o===0&&((i.mode&1)===0?o=1:(o=xl,xl<<=1,(xl&130023424)===0&&(xl=4194304)));var u=Vt();i=mr(i,o),i!==null&&(Hs(i,o,u),Jt(i,u))}function pw(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),fm(i,u)}function gw(i,o){var u=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),fm(i,u)}var dm;dm=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||Kt.current)Yt=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return Yt=!1,nw(i,o,u);Yt=(i.flags&131072)!==0}else Yt=!1,Xe&&(o.flags&1048576)!==0&&Up(o,_l,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;ta(i,o),i=o.pendingProps;var g=Zi(o,Mt.current);ss(o,u),g=zc(null,o,f,i,g,u);var y=Fc();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,qt(f)?(y=!0,Bl(o)):y=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Mc(o),g.updater=Zl,o.stateNode=g,g._reactInternals=o,$c(o,f,i,u),o=qc(null,o,f,!0,y,u)):(o.tag=0,Xe&&y&&wc(o),Ht(null,o,g,u),o=o.child),o;case 16:f=o.elementType;e:{switch(ta(i,o),i=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=yw(f),i=Tn(f,i),g){case 0:o=Kc(null,o,f,i,u);break e;case 1:o=Fg(null,o,f,i,u);break e;case 11:o=Lg(null,o,f,i,u);break e;case 14:o=jg(null,o,f,Tn(f.type,i),u);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Tn(f,g),Kc(i,o,f,g,u);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Tn(f,g),Fg(i,o,f,g,u);case 3:e:{if(_g(o),i===null)throw Error(t(387));f=o.pendingProps,y=o.memoizedState,g=y.element,tg(i,o),Ul(o,f,null,u);var w=o.memoizedState;if(f=w.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){g=ls(Error(t(423)),o),o=Hg(i,o,f,u,g);break e}else if(f!==g){g=ls(Error(t(424)),o),o=Hg(i,o,f,u,g);break e}else for(ln=Br(o.stateNode.containerInfo.firstChild),on=o,Xe=!0,Mn=null,u=Zp(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ns(),f===g){o=xr(i,o,u);break e}Ht(i,o,f,u)}o=o.child}return o;case 5:return ig(o),i===null&&Oc(o),f=o.type,g=o.pendingProps,y=i!==null?i.memoizedProps:null,w=g.children,gc(f,g)?w=null:y!==null&&gc(f,y)&&(o.flags|=32),zg(i,o),Ht(i,o,w,u),o.child;case 6:return i===null&&Oc(o),null;case 13:return Vg(i,o,u);case 4:return Tc(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=rs(o,null,f,u):Ht(i,o,f,u),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Tn(f,g),Lg(i,o,f,g,u);case 7:return Ht(i,o,o.pendingProps,u),o.child;case 8:return Ht(i,o,o.pendingProps.children,u),o.child;case 12:return Ht(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,y=o.memoizedProps,w=g.value,Ve(Wl,f._currentValue),f._currentValue=w,y!==null)if(Rn(y.value,w)){if(y.children===g.children&&!Kt.current){o=xr(i,o,u);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var N=y.dependencies;if(N!==null){w=y.child;for(var A=N.firstContext;A!==null;){if(A.context===f){if(y.tag===1){A=yr(-1,u&-u),A.tag=2;var _=y.updateQueue;if(_!==null){_=_.shared;var G=_.pending;G===null?A.next=A:(A.next=G.next,G.next=A),_.pending=A}}y.lanes|=u,A=y.alternate,A!==null&&(A.lanes|=u),Ac(y.return,u,o),N.lanes|=u;break}A=A.next}}else if(y.tag===10)w=y.type===o.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(t(341));w.lanes|=u,N=w.alternate,N!==null&&(N.lanes|=u),Ac(w,u,o),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===o){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}Ht(i,o,g.children,u),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,ss(o,u),g=mn(g),f=f(g),o.flags|=1,Ht(i,o,f,u),o.child;case 14:return f=o.type,g=Tn(f,o.pendingProps),g=Tn(f.type,g),jg(i,o,f,g,u);case 15:return Ig(i,o,o.type,o.pendingProps,u);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Tn(f,g),ta(i,o),o.tag=1,qt(f)?(i=!0,Bl(o)):i=!1,ss(o,u),Ng(o,f,g),$c(o,f,g,u),qc(null,o,f,!0,i,u);case 19:return Qg(i,o,u);case 22:return Bg(i,o,u)}throw Error(t(156,o.tag))};function pm(i,o){return Xd(i,o)}function mw(i,o,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(i,o,u,f){return new mw(i,o,u,f)}function gh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function yw(i){if(typeof i=="function")return gh(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Q)return 11;if(i===X)return 14}return 2}function Kr(i,o){var u=i.alternate;return u===null?(u=vn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function fa(i,o,u,f,g,y){var w=2;if(f=i,typeof i=="function")gh(i)&&(w=1);else if(typeof i=="string")w=5;else e:switch(i){case j:return Mi(u.children,g,y,o);case W:w=8,g|=8;break;case Y:return i=vn(12,u,o,g|2),i.elementType=Y,i.lanes=y,i;case J:return i=vn(13,u,o,g),i.elementType=J,i.lanes=y,i;case ee:return i=vn(19,u,o,g),i.elementType=ee,i.lanes=y,i;case de:return da(u,g,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case K:w=10;break e;case V:w=9;break e;case Q:w=11;break e;case X:w=14;break e;case ue:w=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=vn(w,u,o,g),o.elementType=i,o.type=f,o.lanes=y,o}function Mi(i,o,u,f){return i=vn(7,i,f,o),i.lanes=u,i}function da(i,o,u,f){return i=vn(22,i,f,o),i.elementType=de,i.lanes=u,i.stateNode={isHidden:!1},i}function mh(i,o,u){return i=vn(6,i,null,o),i.lanes=u,i}function yh(i,o,u){return o=vn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function xw(i,o,u,f,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Qu(0),this.expirationTimes=Qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Qu(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function xh(i,o,u,f,g,y,w,N,A){return i=new xw(i,o,u,N,A),o===1?(o=1,y===!0&&(o|=8)):o=0,y=vn(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Mc(y),i}function vw(i,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:f==null?null:""+f,children:i,containerInfo:o,implementation:u}}function gm(i){if(!i)return Fr;i=i._reactInternals;e:{if(vi(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(qt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(qt(u))return Wp(i,u,o)}return o}function mm(i,o,u,f,g,y,w,N,A){return i=xh(u,f,!0,i,g,y,w,N,A),i.context=gm(null),u=i.current,f=Vt(),g=Ur(u),y=yr(f,g),y.callback=o??null,Vr(u,y,g),i.current.lanes=g,Hs(i,g,f),Jt(i,f),i}function pa(i,o,u,f){var g=o.current,y=Vt(),w=Ur(g);return u=gm(u),o.context===null?o.context=u:o.pendingContext=u,o=yr(y,w),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=Vr(g,o,w),i!==null&&(jn(i,g,w,y),$l(i,g,w)),w}function ga(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function ym(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function vh(i,o){ym(i,o),(i=i.alternate)&&ym(i,o)}function kw(){return null}var xm=typeof reportError=="function"?reportError:function(i){console.error(i)};function kh(i){this._internalRoot=i}ma.prototype.render=kh.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));pa(i,o,null,null)},ma.prototype.unmount=kh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Ei(function(){pa(null,i,null,null)}),o[fr]=null}};function ma(i){this._internalRoot=i}ma.prototype.unstable_scheduleHydration=function(i){if(i){var o=tp();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Lr.length&&o!==0&&o<Lr[u].priority;u++);Lr.splice(u,0,i),u===0&&ip(i)}};function wh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ya(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function vm(){}function ww(i,o,u,f,g){if(g){if(typeof f=="function"){var y=f;f=function(){var _=ga(w);y.call(_)}}var w=mm(o,f,i,0,null,!1,!1,"",vm);return i._reactRootContainer=w,i[fr]=w.current,to(i.nodeType===8?i.parentNode:i),Ei(),w}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var N=f;f=function(){var _=ga(A);N.call(_)}}var A=xh(i,0,!1,null,null,!1,!1,"",vm);return i._reactRootContainer=A,i[fr]=A.current,to(i.nodeType===8?i.parentNode:i),Ei(function(){pa(o,A,u,f)}),A}function xa(i,o,u,f,g){var y=u._reactRootContainer;if(y){var w=y;if(typeof g=="function"){var N=g;g=function(){var A=ga(w);N.call(A)}}pa(o,w,i,g)}else w=ww(u,o,i,g,f);return ga(w)}Zd=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=_s(o.pendingLanes);u!==0&&($u(o,u|1),Jt(o,rt()),(Me&6)===0&&(cs=rt()+500,_r()))}break;case 13:Ei(function(){var f=mr(i,1);if(f!==null){var g=Vt();jn(f,i,1,g)}}),vh(i,1)}},Uu=function(i){if(i.tag===13){var o=mr(i,134217728);if(o!==null){var u=Vt();jn(o,i,134217728,u)}vh(i,134217728)}},ep=function(i){if(i.tag===13){var o=Ur(i),u=mr(i,o);if(u!==null){var f=Vt();jn(u,i,o,f)}vh(i,o)}},tp=function(){return ze},np=function(i,o){var u=ze;try{return ze=i,o()}finally{ze=u}},zs=function(i,o,u){switch(o){case"input":if(Er(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==i&&f.form===i.form){var g=jl(f);if(!g)throw Error(t(90));_e(f),Er(f,g)}}}break;case"textarea":pi(i,u);break;case"select":o=u.value,o!=null&&Ft(i,!!u.multiple,o,!1)}},_t=fh,At=Ei;var bw={usingClientEntryPoint:!1,Events:[io,Gi,jl,Et,Pn,fh]},vo={findFiberByHostInstance:ki,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Sw={bundleType:vo.bundleType,version:vo.version,rendererPackageName:vo.rendererPackageName,rendererConfig:vo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=$d(i),i===null?null:i.stateNode},findFiberByHostInstance:vo.findFiberByHostInstance||kw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var va=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!va.isDisabled&&va.supportsFiber)try{ml=va.inject(Sw),Un=va}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bw,Zt.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wh(o))throw Error(t(200));return vw(i,o,null,u)},Zt.createRoot=function(i,o){if(!wh(i))throw Error(t(299));var u=!1,f="",g=xm;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=xh(i,1,!1,null,null,u,!1,f,g),i[fr]=o.current,to(i.nodeType===8?i.parentNode:i),new kh(o)},Zt.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=$d(o),i=i===null?null:i.stateNode,i},Zt.flushSync=function(i){return Ei(i)},Zt.hydrate=function(i,o,u){if(!ya(o))throw Error(t(200));return xa(null,i,o,!0,u)},Zt.hydrateRoot=function(i,o,u){if(!wh(i))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,y="",w=xm;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(w=u.onRecoverableError)),o=mm(o,null,i,1,u??null,g,!1,y,w),i[fr]=o.current,to(i),f)for(i=0;i<f.length;i++)u=f[i],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new ma(o)},Zt.render=function(i,o,u){if(!ya(o))throw Error(t(200));return xa(null,i,o,!1,u)},Zt.unmountComponentAtNode=function(i){if(!ya(i))throw Error(t(40));return i._reactRootContainer?(Ei(function(){xa(null,null,i,!1,function(){i._reactRootContainer=null,i[fr]=null})}),!0):!1},Zt.unstable_batchedUpdates=fh,Zt.unstable_renderSubtreeIntoContainer=function(i,o,u,f){if(!ya(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return xa(i,o,u,!1,f)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var Em;function By(){if(Em)return Oh.exports;Em=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Oh.exports=Tw(),Oh.exports}var Am;function Dw(){if(Am)return ka;Am=1;var n=By();return ka.createRoot=n.createRoot,ka.hydrateRoot=n.hydrateRoot,ka}var Lw=Dw();const jw=Iy(Lw);var Po=By();function Iw(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return O.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Pu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ts(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function cd(n){return"nodeType"in n}function tn(n){var e,t;return n?Ts(n)?n:cd(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function hd(n){const{Document:e}=tn(n);return n instanceof e}function il(n){return Ts(n)?!1:n instanceof tn(n).HTMLElement}function zy(n){return n instanceof tn(n).SVGElement}function Ds(n){return n?Ts(n)?n.document:cd(n)?hd(n)?n:il(n)||zy(n)?n.ownerDocument:document:document:document}const ir=Pu?O.useLayoutEffect:O.useEffect;function fd(n){const e=O.useRef(n);return ir(()=>{e.current=n}),O.useCallback(function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function Bw(){const n=O.useRef(null),e=O.useCallback((r,s)=>{n.current=setInterval(r,s)},[]),t=O.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function Wo(n,e){e===void 0&&(e=[n]);const t=O.useRef(n);return ir(()=>{t.current!==n&&(t.current=n)},e),t}function sl(n,e){const t=O.useRef();return O.useMemo(()=>{const r=n(t.current);return t.current=r,r},[...e])}function iu(n){const e=fd(n),t=O.useRef(null),r=O.useCallback(s=>{s!==t.current&&(e==null||e(s,t.current)),t.current=s},[]);return[t,r]}function lf(n){const e=O.useRef();return O.useEffect(()=>{e.current=n},[n]),e.current}let Nh={};function ol(n,e){return O.useMemo(()=>{if(e)return e;const t=Nh[n]==null?0:Nh[n]+1;return Nh[n]=t,n+"-"+t},[n,e])}function Fy(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const c=Object.entries(a);for(const[h,p]of c){const d=l[h];d!=null&&(l[h]=d+n*p)}return l},{...e})}}const xs=Fy(1),su=Fy(-1);function zw(n){return"clientX"in n&&"clientY"in n}function dd(n){if(!n)return!1;const{KeyboardEvent:e}=tn(n.target);return e&&n instanceof e}function Fw(n){if(!n)return!1;const{TouchEvent:e}=tn(n.target);return e&&n instanceof e}function af(n){if(Fw(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return zw(n)?{x:n.clientX,y:n.clientY}:null}const Qo=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[Qo.Translate.toString(n),Qo.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:r}=n;return e+" "+t+"ms "+r}}}),Rm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function _w(n){return n.matches(Rm)?n:n.querySelector(Rm)}const Hw={display:"none"};function Vw(n){let{id:e,value:t}=n;return ot.createElement("div",{id:e,style:Hw},t)}function Ww(n){let{id:e,announcement:t,ariaLiveType:r="assertive"}=n;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ot.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},t)}function Qw(){const[n,e]=O.useState("");return{announce:O.useCallback(r=>{r!=null&&e(r)},[]),announcement:n}}const _y=O.createContext(null);function $w(n){const e=O.useContext(_y);O.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function Uw(){const[n]=O.useState(()=>new Set),e=O.useCallback(r=>(n.add(r),()=>n.delete(r)),[n]);return[O.useCallback(r=>{let{type:s,event:l}=r;n.forEach(a=>{var c;return(c=a[s])==null?void 0:c.call(a,l)})},[n]),e]}const Xw={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Kw={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function qw(n){let{announcements:e=Kw,container:t,hiddenTextDescribedById:r,screenReaderInstructions:s=Xw}=n;const{announce:l,announcement:a}=Qw(),c=ol("DndLiveRegion"),[h,p]=O.useState(!1);if(O.useEffect(()=>{p(!0)},[]),$w(O.useMemo(()=>({onDragStart(m){let{active:x}=m;l(e.onDragStart({active:x}))},onDragMove(m){let{active:x,over:k}=m;e.onDragMove&&l(e.onDragMove({active:x,over:k}))},onDragOver(m){let{active:x,over:k}=m;l(e.onDragOver({active:x,over:k}))},onDragEnd(m){let{active:x,over:k}=m;l(e.onDragEnd({active:x,over:k}))},onDragCancel(m){let{active:x,over:k}=m;l(e.onDragCancel({active:x,over:k}))}}),[l,e])),!h)return null;const d=ot.createElement(ot.Fragment,null,ot.createElement(Vw,{id:r,value:s.draggable}),ot.createElement(Ww,{id:c,announcement:a}));return t?Po.createPortal(d,t):d}var gt;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(gt||(gt={}));function ou(){}function Mm(n,e){return O.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function Yw(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return O.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Bn=Object.freeze({x:0,y:0});function Gw(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Jw(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return t-r}function Zw(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return r-t}function eb(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function Tm(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const tb=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=Tm(e,e.left,e.top),l=[];for(const a of r){const{id:c}=a,h=t.get(c);if(h){const p=Gw(Tm(h),s);l.push({id:c,data:{droppableContainer:a,value:p}})}}return l.sort(Jw)};function nb(n,e){const t=Math.max(e.top,n.top),r=Math.max(e.left,n.left),s=Math.min(e.left+e.width,n.left+n.width),l=Math.min(e.top+e.height,n.top+n.height),a=s-r,c=l-t;if(r<s&&t<l){const h=e.width*e.height,p=n.width*n.height,d=a*c,m=d/(h+p-d);return Number(m.toFixed(4))}return 0}const rb=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=[];for(const l of r){const{id:a}=l,c=t.get(a);if(c){const h=nb(c,e);h>0&&s.push({id:a,data:{droppableContainer:l,value:h}})}}return s.sort(Zw)};function ib(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Hy(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Bn}function sb(n){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,c)=>({...a,top:a.top+n*c.y,bottom:a.bottom+n*c.y,left:a.left+n*c.x,right:a.right+n*c.x}),{...t})}}const ob=sb(1);function lb(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function ab(n,e,t){const r=lb(e);if(!r)return n;const{scaleX:s,scaleY:l,x:a,y:c}=r,h=n.left-a-(1-s)*parseFloat(t),p=n.top-c-(1-l)*parseFloat(t.slice(t.indexOf(" ")+1)),d=s?n.width/s:n.width,m=l?n.height/l:n.height;return{width:d,height:m,top:p,right:h+d,bottom:p+m,left:h}}const ub={ignoreTransform:!1};function Ls(n,e){e===void 0&&(e=ub);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:d}=tn(n).getComputedStyle(n);p&&(t=ab(t,p,d))}const{top:r,left:s,width:l,height:a,bottom:c,right:h}=t;return{top:r,left:s,width:l,height:a,bottom:c,right:h}}function Dm(n){return Ls(n,{ignoreTransform:!0})}function cb(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function hb(n,e){return e===void 0&&(e=tn(n).getComputedStyle(n)),e.position==="fixed"}function fb(n,e){e===void 0&&(e=tn(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=e[s];return typeof l=="string"?t.test(l):!1})}function pd(n,e){const t=[];function r(s){if(e!=null&&t.length>=e||!s)return t;if(hd(s)&&s.scrollingElement!=null&&!t.includes(s.scrollingElement))return t.push(s.scrollingElement),t;if(!il(s)||zy(s)||t.includes(s))return t;const l=tn(n).getComputedStyle(s);return s!==n&&fb(s,l)&&t.push(s),hb(s,l)?t:r(s.parentNode)}return n?r(n):t}function Vy(n){const[e]=pd(n,1);return e??null}function Eh(n){return!Pu||!n?null:Ts(n)?n:cd(n)?hd(n)||n===Ds(n).scrollingElement?window:il(n)?n:null:null}function Wy(n){return Ts(n)?n.scrollX:n.scrollLeft}function Qy(n){return Ts(n)?n.scrollY:n.scrollTop}function uf(n){return{x:Wy(n),y:Qy(n)}}var kt;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(kt||(kt={}));function $y(n){return!Pu||!n?!1:n===document.scrollingElement}function Uy(n){const e={x:0,y:0},t=$y(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},r={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},s=n.scrollTop<=e.y,l=n.scrollLeft<=e.x,a=n.scrollTop>=r.y,c=n.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:c,maxScroll:r,minScroll:e}}const db={x:.2,y:.2};function pb(n,e,t,r,s){let{top:l,left:a,right:c,bottom:h}=t;r===void 0&&(r=10),s===void 0&&(s=db);const{isTop:p,isBottom:d,isLeft:m,isRight:x}=Uy(n),k={x:0,y:0},b={x:0,y:0},S={height:e.height*s.y,width:e.width*s.x};return!p&&l<=e.top+S.height?(k.y=kt.Backward,b.y=r*Math.abs((e.top+S.height-l)/S.height)):!d&&h>=e.bottom-S.height&&(k.y=kt.Forward,b.y=r*Math.abs((e.bottom-S.height-h)/S.height)),!x&&c>=e.right-S.width?(k.x=kt.Forward,b.x=r*Math.abs((e.right-S.width-c)/S.width)):!m&&a<=e.left+S.width&&(k.x=kt.Backward,b.x=r*Math.abs((e.left+S.width-a)/S.width)),{direction:k,speed:b}}function gb(n){if(n===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:e,left:t,right:r,bottom:s}=n.getBoundingClientRect();return{top:e,left:t,right:r,bottom:s,width:n.clientWidth,height:n.clientHeight}}function Xy(n){return n.reduce((e,t)=>xs(e,uf(t)),Bn)}function mb(n){return n.reduce((e,t)=>e+Wy(t),0)}function yb(n){return n.reduce((e,t)=>e+Qy(t),0)}function xb(n,e){if(e===void 0&&(e=Ls),!n)return;const{top:t,left:r,bottom:s,right:l}=e(n);Vy(n)&&(s<=0||l<=0||t>=window.innerHeight||r>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const vb=[["x",["left","right"],mb],["y",["top","bottom"],yb]];class gd{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=pd(t),s=Xy(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,a,c]of vb)for(const h of a)Object.defineProperty(this,h,{get:()=>{const p=c(r),d=s[l]-p;return this.rect[h]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class To{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var s;(s=this.target)==null||s.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function kb(n){const{EventTarget:e}=tn(n);return n instanceof e?n:Ds(n)}function Ah(n,e){const t=Math.abs(n.x),r=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var kn;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(kn||(kn={}));function Lm(n){n.preventDefault()}function wb(n){n.stopPropagation()}var Le;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Le||(Le={}));const Ky={start:[Le.Space,Le.Enter],cancel:[Le.Esc],end:[Le.Space,Le.Enter,Le.Tab]},bb=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Le.Right:return{...t,x:t.x+25};case Le.Left:return{...t,x:t.x-25};case Le.Down:return{...t,y:t.y+25};case Le.Up:return{...t,y:t.y-25}}};class md{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new To(Ds(t)),this.windowListeners=new To(tn(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(kn.Resize,this.handleCancel),this.windowListeners.add(kn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(kn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&xb(r),t(Bn)}handleKeyDown(e){if(dd(e)){const{active:t,context:r,options:s}=this.props,{keyboardCodes:l=Ky,coordinateGetter:a=bb,scrollBehavior:c="smooth"}=s,{code:h}=e;if(l.end.includes(h)){this.handleEnd(e);return}if(l.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:p}=r.current,d=p?{x:p.left,y:p.top}:Bn;this.referenceCoordinates||(this.referenceCoordinates=d);const m=a(e,{active:t,context:r.current,currentCoordinates:d});if(m){const x=su(m,d),k={x:0,y:0},{scrollableAncestors:b}=r.current;for(const S of b){const C=e.code,{isTop:P,isRight:M,isLeft:T,isBottom:B,maxScroll:L,minScroll:F}=Uy(S),j=gb(S),W={x:Math.min(C===Le.Right?j.right-j.width/2:j.right,Math.max(C===Le.Right?j.left:j.left+j.width/2,m.x)),y:Math.min(C===Le.Down?j.bottom-j.height/2:j.bottom,Math.max(C===Le.Down?j.top:j.top+j.height/2,m.y))},Y=C===Le.Right&&!M||C===Le.Left&&!T,K=C===Le.Down&&!B||C===Le.Up&&!P;if(Y&&W.x!==m.x){const V=S.scrollLeft+x.x,Q=C===Le.Right&&V<=L.x||C===Le.Left&&V>=F.x;if(Q&&!x.y){S.scrollTo({left:V,behavior:c});return}Q?k.x=S.scrollLeft-V:k.x=C===Le.Right?S.scrollLeft-L.x:S.scrollLeft-F.x,k.x&&S.scrollBy({left:-k.x,behavior:c});break}else if(K&&W.y!==m.y){const V=S.scrollTop+x.y,Q=C===Le.Down&&V<=L.y||C===Le.Up&&V>=F.y;if(Q&&!x.x){S.scrollTo({top:V,behavior:c});return}Q?k.y=S.scrollTop-V:k.y=C===Le.Down?S.scrollTop-L.y:S.scrollTop-F.y,k.y&&S.scrollBy({top:-k.y,behavior:c});break}}this.handleMove(e,xs(su(m,this.referenceCoordinates),k))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}md.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:r=Ky,onActivation:s}=e,{active:l}=t;const{code:a}=n.nativeEvent;if(r.start.includes(a)){const c=l.activatorNode.current;return c&&n.target!==c?!1:(n.preventDefault(),s==null||s({event:n.nativeEvent}),!0)}return!1}}];function jm(n){return!!(n&&"distance"in n)}function Im(n){return!!(n&&"delay"in n)}class yd{constructor(e,t,r){var s;r===void 0&&(r=kb(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:a}=l;this.props=e,this.events=t,this.document=Ds(a),this.documentListeners=new To(this.document),this.listeners=new To(r),this.windowListeners=new To(tn(a)),this.initialCoordinates=(s=af(l))!=null?s:Bn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(kn.Resize,this.handleCancel),this.windowListeners.add(kn.DragStart,Lm),this.windowListeners.add(kn.VisibilityChange,this.handleCancel),this.windowListeners.add(kn.ContextMenu,Lm),this.documentListeners.add(kn.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Im(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(jm(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(kn.Click,wb,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(kn.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:c}}=l;if(!s)return;const h=(t=af(e))!=null?t:Bn,p=su(s,h);if(!r&&c){if(jm(c)){if(c.tolerance!=null&&Ah(p,c.tolerance))return this.handleCancel();if(Ah(p,c.distance))return this.handleStart()}if(Im(c)&&Ah(p,c.tolerance))return this.handleCancel();this.handlePending(c,p);return}e.cancelable&&e.preventDefault(),a(h)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Le.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Sb={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class xd extends yd{constructor(e){const{event:t}=e,r=Ds(t.target);super(e,Sb,r)}}xd.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r==null||r({event:t}),!0)}}];const Ob={move:{name:"mousemove"},end:{name:"mouseup"}};var cf;(function(n){n[n.RightClick=2]="RightClick"})(cf||(cf={}));class Cb extends yd{constructor(e){super(e,Ob,Ds(e.event.target))}}Cb.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return t.button===cf.RightClick?!1:(r==null||r({event:t}),!0)}}];const Rh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Pb extends yd{constructor(e){super(e,Rh)}static setup(){return window.addEventListener(Rh.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Rh.move.name,e)};function e(){}}}Pb.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;const{touches:s}=t;return s.length>1?!1:(r==null||r({event:t}),!0)}}];var Do;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(Do||(Do={}));var lu;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(lu||(lu={}));function Nb(n){let{acceleration:e,activator:t=Do.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:c=lu.TreeOrder,pointerCoordinates:h,scrollableAncestors:p,scrollableAncestorRects:d,delta:m,threshold:x}=n;const k=Ab({delta:m,disabled:!l}),[b,S]=Bw(),C=O.useRef({x:0,y:0}),P=O.useRef({x:0,y:0}),M=O.useMemo(()=>{switch(t){case Do.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Do.DraggableRect:return s}},[t,s,h]),T=O.useRef(null),B=O.useCallback(()=>{const F=T.current;if(!F)return;const j=C.current.x*P.current.x,W=C.current.y*P.current.y;F.scrollBy(j,W)},[]),L=O.useMemo(()=>c===lu.TreeOrder?[...p].reverse():p,[c,p]);O.useEffect(()=>{if(!l||!p.length||!M){S();return}for(const F of L){if((r==null?void 0:r(F))===!1)continue;const j=p.indexOf(F),W=d[j];if(!W)continue;const{direction:Y,speed:K}=pb(F,W,M,e,x);for(const V of["x","y"])k[V][Y[V]]||(K[V]=0,Y[V]=0);if(K.x>0||K.y>0){S(),T.current=F,b(B,a),C.current=K,P.current=Y;return}}C.current={x:0,y:0},P.current={x:0,y:0},S()},[e,B,r,S,l,a,JSON.stringify(M),JSON.stringify(k),b,p,L,d,JSON.stringify(x)])}const Eb={x:{[kt.Backward]:!1,[kt.Forward]:!1},y:{[kt.Backward]:!1,[kt.Forward]:!1}};function Ab(n){let{delta:e,disabled:t}=n;const r=lf(e);return sl(s=>{if(t||!r||!s)return Eb;const l={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[kt.Backward]:s.x[kt.Backward]||l.x===-1,[kt.Forward]:s.x[kt.Forward]||l.x===1},y:{[kt.Backward]:s.y[kt.Backward]||l.y===-1,[kt.Forward]:s.y[kt.Forward]||l.y===1}}},[t,e,r])}function Rb(n,e){const t=e!=null?n.get(e):void 0,r=t?t.node.current:null;return sl(s=>{var l;return e==null?null:(l=r??s)!=null?l:null},[r,e])}function Mb(n,e){return O.useMemo(()=>n.reduce((t,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...t,...l]},[]),[n,e])}var $o;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})($o||($o={}));var hf;(function(n){n.Optimized="optimized"})(hf||(hf={}));const Bm=new Map;function Tb(n,e){let{dragging:t,dependencies:r,config:s}=e;const[l,a]=O.useState(null),{frequency:c,measure:h,strategy:p}=s,d=O.useRef(n),m=C(),x=Wo(m),k=O.useCallback(function(P){P===void 0&&(P=[]),!x.current&&a(M=>M===null?P:M.concat(P.filter(T=>!M.includes(T))))},[x]),b=O.useRef(null),S=sl(P=>{if(m&&!t)return Bm;if(!P||P===Bm||d.current!==n||l!=null){const M=new Map;for(let T of n){if(!T)continue;if(l&&l.length>0&&!l.includes(T.id)&&T.rect.current){M.set(T.id,T.rect.current);continue}const B=T.node.current,L=B?new gd(h(B),B):null;T.rect.current=L,L&&M.set(T.id,L)}return M}return P},[n,l,t,m,h]);return O.useEffect(()=>{d.current=n},[n]),O.useEffect(()=>{m||k()},[t,m]),O.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),O.useEffect(()=>{m||typeof c!="number"||b.current!==null||(b.current=setTimeout(()=>{k(),b.current=null},c))},[c,m,k,...r]),{droppableRects:S,measureDroppableContainers:k,measuringScheduled:l!=null};function C(){switch(p){case $o.Always:return!1;case $o.BeforeDragging:return t;default:return!t}}}function qy(n,e){return sl(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function Db(n,e){return qy(n,e)}function Lb(n){let{callback:e,disabled:t}=n;const r=fd(e),s=O.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(r)},[r,t]);return O.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Nu(n){let{callback:e,disabled:t}=n;const r=fd(e),s=O.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(r)},[t]);return O.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function jb(n){return new gd(Ls(n),n)}function zm(n,e,t){e===void 0&&(e=jb);const[r,s]=O.useState(null);function l(){s(h=>{if(!n)return null;if(n.isConnected===!1){var p;return(p=h??t)!=null?p:null}const d=e(n);return JSON.stringify(h)===JSON.stringify(d)?h:d})}const a=Lb({callback(h){if(n)for(const p of h){const{type:d,target:m}=p;if(d==="childList"&&m instanceof HTMLElement&&m.contains(n)){l();break}}}}),c=Nu({callback:l});return ir(()=>{l(),n?(c==null||c.observe(n),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),a==null||a.disconnect())},[n]),r}function Ib(n){const e=qy(n);return Hy(n,e)}const Fm=[];function Bb(n){const e=O.useRef(n),t=sl(r=>n?r&&r!==Fm&&n&&e.current&&n.parentNode===e.current.parentNode?r:pd(n):Fm,[n]);return O.useEffect(()=>{e.current=n},[n]),t}function zb(n){const[e,t]=O.useState(null),r=O.useRef(n),s=O.useCallback(l=>{const a=Eh(l.target);a&&t(c=>c?(c.set(a,uf(a)),new Map(c)):null)},[]);return O.useEffect(()=>{const l=r.current;if(n!==l){a(l);const c=n.map(h=>{const p=Eh(h);return p?(p.addEventListener("scroll",s,{passive:!0}),[p,uf(p)]):null}).filter(h=>h!=null);t(c.length?new Map(c):null),r.current=n}return()=>{a(n),a(l)};function a(c){c.forEach(h=>{const p=Eh(h);p==null||p.removeEventListener("scroll",s)})}},[s,n]),O.useMemo(()=>n.length?e?Array.from(e.values()).reduce((l,a)=>xs(l,a),Bn):Xy(n):Bn,[n,e])}function _m(n,e){e===void 0&&(e=[]);const t=O.useRef(null);return O.useEffect(()=>{t.current=null},e),O.useEffect(()=>{const r=n!==Bn;r&&!t.current&&(t.current=n),!r&&t.current&&(t.current=null)},[n]),t.current?su(n,t.current):Bn}function Fb(n){O.useEffect(()=>{if(!Pu)return;const e=n.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t==null||t()}},n.map(e=>{let{sensor:t}=e;return t}))}function _b(n,e){return O.useMemo(()=>n.reduce((t,r)=>{let{eventName:s,handler:l}=r;return t[s]=a=>{l(a,e)},t},{}),[n,e])}function Yy(n){return O.useMemo(()=>n?cb(n):null,[n])}const Hm=[];function Hb(n,e){e===void 0&&(e=Ls);const[t]=n,r=Yy(t?tn(t):null),[s,l]=O.useState(Hm);function a(){l(()=>n.length?n.map(h=>$y(h)?r:new gd(e(h),h)):Hm)}const c=Nu({callback:a});return ir(()=>{c==null||c.disconnect(),a(),n.forEach(h=>c==null?void 0:c.observe(h))},[n]),s}function Vb(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return il(e)?e:n}function Wb(n){let{measure:e}=n;const[t,r]=O.useState(null),s=O.useCallback(p=>{for(const{target:d}of p)if(il(d)){r(m=>{const x=e(d);return m?{...m,width:x.width,height:x.height}:x});break}},[e]),l=Nu({callback:s}),a=O.useCallback(p=>{const d=Vb(p);l==null||l.disconnect(),d&&(l==null||l.observe(d)),r(d?e(d):null)},[e,l]),[c,h]=iu(a);return O.useMemo(()=>({nodeRef:c,rect:t,setRef:h}),[t,c,h])}const Qb=[{sensor:xd,options:{}},{sensor:md,options:{}}],$b={current:{}},$a={draggable:{measure:Dm},droppable:{measure:Dm,strategy:$o.WhileDragging,frequency:hf.Optimized},dragOverlay:{measure:Ls}};class Lo extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const Ub={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Lo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ou},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:$a,measureDroppableContainers:ou,windowRect:null,measuringScheduled:!1},Xb={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ou,draggableNodes:new Map,over:null,measureDroppableContainers:ou},Eu=O.createContext(Xb),Gy=O.createContext(Ub);function Kb(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Lo}}}function qb(n,e){switch(e.type){case gt.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case gt.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case gt.DragEnd:case gt.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case gt.RegisterDroppable:{const{element:t}=e,{id:r}=t,s=new Lo(n.droppable.containers);return s.set(r,t),{...n,droppable:{...n.droppable,containers:s}}}case gt.SetDroppableDisabled:{const{id:t,key:r,disabled:s}=e,l=n.droppable.containers.get(t);if(!l||r!==l.key)return n;const a=new Lo(n.droppable.containers);return a.set(t,{...l,disabled:s}),{...n,droppable:{...n.droppable,containers:a}}}case gt.UnregisterDroppable:{const{id:t,key:r}=e,s=n.droppable.containers.get(t);if(!s||r!==s.key)return n;const l=new Lo(n.droppable.containers);return l.delete(t),{...n,droppable:{...n.droppable,containers:l}}}default:return n}}function Yb(n){let{disabled:e}=n;const{active:t,activatorEvent:r,draggableNodes:s}=O.useContext(Eu),l=lf(r),a=lf(t==null?void 0:t.id);return O.useEffect(()=>{if(!e&&!r&&l&&a!=null){if(!dd(l)||document.activeElement===l.target)return;const c=s.get(a);if(!c)return;const{activatorNode:h,node:p}=c;if(!h.current&&!p.current)return;requestAnimationFrame(()=>{for(const d of[h.current,p.current]){if(!d)continue;const m=_w(d);if(m){m.focus();break}}})}},[r,e,s,a,l]),null}function Gb(n,e){let{transform:t,...r}=e;return n!=null&&n.length?n.reduce((s,l)=>l({transform:s,...r}),t):t}function Jb(n){return O.useMemo(()=>({draggable:{...$a.draggable,...n==null?void 0:n.draggable},droppable:{...$a.droppable,...n==null?void 0:n.droppable},dragOverlay:{...$a.dragOverlay,...n==null?void 0:n.dragOverlay}}),[n==null?void 0:n.draggable,n==null?void 0:n.droppable,n==null?void 0:n.dragOverlay])}function Zb(n){let{activeNode:e,measure:t,initialRect:r,config:s=!0}=n;const l=O.useRef(!1),{x:a,y:c}=typeof s=="boolean"?{x:s,y:s}:s;ir(()=>{if(!a&&!c||!e){l.current=!1;return}if(l.current||!r)return;const p=e==null?void 0:e.node.current;if(!p||p.isConnected===!1)return;const d=t(p),m=Hy(d,r);if(a||(m.x=0),c||(m.y=0),l.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const x=Vy(p);x&&x.scrollBy({top:m.y,left:m.x})}},[e,a,c,r,t])}const Jy=O.createContext({...Bn,scaleX:1,scaleY:1});var Yr;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Yr||(Yr={}));const eS=O.memo(function(e){var t,r,s,l;let{id:a,accessibility:c,autoScroll:h=!0,children:p,sensors:d=Qb,collisionDetection:m=rb,measuring:x,modifiers:k,...b}=e;const S=O.useReducer(qb,void 0,Kb),[C,P]=S,[M,T]=Uw(),[B,L]=O.useState(Yr.Uninitialized),F=B===Yr.Initialized,{draggable:{active:j,nodes:W,translate:Y},droppable:{containers:K}}=C,V=j!=null?W.get(j):null,Q=O.useRef({initial:null,translated:null}),J=O.useMemo(()=>{var Ke;return j!=null?{id:j,data:(Ke=V==null?void 0:V.data)!=null?Ke:$b,rect:Q}:null},[j,V]),ee=O.useRef(null),[X,ue]=O.useState(null),[de,$]=O.useState(null),re=Wo(b,Object.values(b)),H=ol("DndDescribedBy",a),E=O.useMemo(()=>K.getEnabled(),[K]),D=Jb(x),{droppableRects:Z,measureDroppableContainers:le,measuringScheduled:ye}=Tb(E,{dragging:F,dependencies:[Y.x,Y.y],config:D.droppable}),ne=Rb(W,j),he=O.useMemo(()=>de?af(de):null,[de]),Se=Rr(),Ce=Db(ne,D.draggable.measure);Zb({activeNode:j!=null?W.get(j):null,config:Se.layoutShiftCompensation,initialRect:Ce,measure:D.draggable.measure});const ve=zm(ne,D.draggable.measure,Ce),Re=zm(ne?ne.parentElement:null),_e=O.useRef({activatorEvent:null,active:null,activeNode:ne,collisionRect:null,collisions:null,droppableRects:Z,draggableNodes:W,draggingNode:null,draggingNodeRect:null,droppableContainers:K,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ue=K.getNodeFor((t=_e.current.over)==null?void 0:t.id),Je=Wb({measure:D.dragOverlay.measure}),ft=(r=Je.nodeRef.current)!=null?r:ne,Cn=F?(s=Je.rect)!=null?s:ve:null,Er=!!(Je.nodeRef.current&&Je.rect),fi=Ib(Er?null:ve),lr=Yy(ft?tn(ft):null),lt=Bb(F?Ue??ne:null),Ft=Hb(lt),Wn=Gb(k,{transform:{x:Y.x-fi.x,y:Y.y-fi.y,scaleX:1,scaleY:1},activatorEvent:de,active:J,activeNodeRect:ve,containerNodeRect:Re,draggingNodeRect:Cn,over:_e.current.over,overlayNodeRect:Je.rect,scrollableAncestors:lt,scrollableAncestorRects:Ft,windowRect:lr}),di=he?xs(he,Y):null,pi=zb(lt),ar=_m(pi),gi=_m(pi,[ve]),nn=xs(Wn,ar),Ne=Cn?ob(Cn,Wn):null,oe=J&&Ne?m({active:J,collisionRect:Ne,droppableRects:Z,droppableContainers:E,pointerCoordinates:di}):null,Ie=eb(oe,"id"),[at,nt]=O.useState(null),mi=Er?Wn:xs(Wn,gi),yi=ib(mi,(l=at==null?void 0:at.rect)!=null?l:null,ve),Ar=O.useRef(null),Qn=O.useCallback((Ke,Nt)=>{let{sensor:Et,options:Pn}=Nt;if(ee.current==null)return;const _t=W.get(ee.current);if(!_t)return;const At=Ke.nativeEvent,Xt=new Et({active:ee.current,activeNode:_t,event:At,options:Pn,context:_e,onAbort(qe){if(!W.get(qe))return;const{onDragAbort:Rt}=re.current,Nn={id:qe};Rt==null||Rt(Nn),M({type:"onDragAbort",event:Nn})},onPending(qe,dn,Rt,Nn){if(!W.get(qe))return;const{onDragPending:$n}=re.current,rn={id:qe,constraint:dn,initialCoordinates:Rt,offset:Nn};$n==null||$n(rn),M({type:"onDragPending",event:rn})},onStart(qe){const dn=ee.current;if(dn==null)return;const Rt=W.get(dn);if(!Rt)return;const{onDragStart:Nn}=re.current,En={activatorEvent:At,active:{id:dn,data:Rt.data,rect:Q}};Po.unstable_batchedUpdates(()=>{Nn==null||Nn(En),L(Yr.Initializing),P({type:gt.DragStart,initialCoordinates:qe,active:dn}),M({type:"onDragStart",event:En}),ue(Ar.current),$(At)})},onMove(qe){P({type:gt.DragMove,coordinates:qe})},onEnd:cr(gt.DragEnd),onCancel:cr(gt.DragCancel)});Ar.current=Xt;function cr(qe){return async function(){const{active:Rt,collisions:Nn,over:En,scrollAdjustedTranslate:$n}=_e.current;let rn=null;if(Rt&&$n){const{cancelDrop:hr}=re.current;rn={activatorEvent:At,active:Rt,collisions:Nn,delta:$n,over:En},qe===gt.DragEnd&&typeof hr=="function"&&await Promise.resolve(hr(rn))&&(qe=gt.DragCancel)}ee.current=null,Po.unstable_batchedUpdates(()=>{P({type:qe}),L(Yr.Uninitialized),nt(null),ue(null),$(null),Ar.current=null;const hr=qe===gt.DragEnd?"onDragEnd":"onDragCancel";if(rn){const Fs=re.current[hr];Fs==null||Fs(rn),M({type:hr,event:rn})}})}}},[W]),xi=O.useCallback((Ke,Nt)=>(Et,Pn)=>{const _t=Et.nativeEvent,At=W.get(Pn);if(ee.current!==null||!At||_t.dndKit||_t.defaultPrevented)return;const Xt={active:At};Ke(Et,Nt.options,Xt)===!0&&(_t.dndKit={capturedBy:Nt.sensor},ee.current=Pn,Qn(Et,Nt))},[W,Qn]),ur=Mb(d,xi);Fb(d),ir(()=>{ve&&B===Yr.Initializing&&L(Yr.Initialized)},[ve,B]),O.useEffect(()=>{const{onDragMove:Ke}=re.current,{active:Nt,activatorEvent:Et,collisions:Pn,over:_t}=_e.current;if(!Nt||!Et)return;const At={active:Nt,activatorEvent:Et,collisions:Pn,delta:{x:nn.x,y:nn.y},over:_t};Po.unstable_batchedUpdates(()=>{Ke==null||Ke(At),M({type:"onDragMove",event:At})})},[nn.x,nn.y]),O.useEffect(()=>{const{active:Ke,activatorEvent:Nt,collisions:Et,droppableContainers:Pn,scrollAdjustedTranslate:_t}=_e.current;if(!Ke||ee.current==null||!Nt||!_t)return;const{onDragOver:At}=re.current,Xt=Pn.get(Ie),cr=Xt&&Xt.rect.current?{id:Xt.id,rect:Xt.rect.current,data:Xt.data,disabled:Xt.disabled}:null,qe={active:Ke,activatorEvent:Nt,collisions:Et,delta:{x:_t.x,y:_t.y},over:cr};Po.unstable_batchedUpdates(()=>{nt(cr),At==null||At(qe),M({type:"onDragOver",event:qe})})},[Ie]),ir(()=>{_e.current={activatorEvent:de,active:J,activeNode:ne,collisionRect:Ne,collisions:oe,droppableRects:Z,draggableNodes:W,draggingNode:ft,draggingNodeRect:Cn,droppableContainers:K,over:at,scrollableAncestors:lt,scrollAdjustedTranslate:nn},Q.current={initial:Cn,translated:Ne}},[J,ne,oe,Ne,W,ft,Cn,Z,K,at,lt,nn]),Nb({...Se,delta:Y,draggingRect:Ne,pointerCoordinates:di,scrollableAncestors:lt,scrollableAncestorRects:Ft});const Bs=O.useMemo(()=>({active:J,activeNode:ne,activeNodeRect:ve,activatorEvent:de,collisions:oe,containerNodeRect:Re,dragOverlay:Je,draggableNodes:W,droppableContainers:K,droppableRects:Z,over:at,measureDroppableContainers:le,scrollableAncestors:lt,scrollableAncestorRects:Ft,measuringConfiguration:D,measuringScheduled:ye,windowRect:lr}),[J,ne,ve,de,oe,Re,Je,W,K,Z,at,le,lt,Ft,D,ye,lr]),zs=O.useMemo(()=>({activatorEvent:de,activators:ur,active:J,activeNodeRect:ve,ariaDescribedById:{draggable:H},dispatch:P,draggableNodes:W,over:at,measureDroppableContainers:le}),[de,ur,J,ve,P,H,W,at,le]);return ot.createElement(_y.Provider,{value:T},ot.createElement(Eu.Provider,{value:zs},ot.createElement(Gy.Provider,{value:Bs},ot.createElement(Jy.Provider,{value:yi},p)),ot.createElement(Yb,{disabled:(c==null?void 0:c.restoreFocus)===!1})),ot.createElement(qw,{...c,hiddenTextDescribedById:H}));function Rr(){const Ke=(X==null?void 0:X.autoScrollEnabled)===!1,Nt=typeof h=="object"?h.enabled===!1:h===!1,Et=F&&!Ke&&!Nt;return typeof h=="object"?{...h,enabled:Et}:{enabled:Et}}}),tS=O.createContext(null),Vm="button",nS="Draggable";function rS(n){let{id:e,data:t,disabled:r=!1,attributes:s}=n;const l=ol(nS),{activators:a,activatorEvent:c,active:h,activeNodeRect:p,ariaDescribedById:d,draggableNodes:m,over:x}=O.useContext(Eu),{role:k=Vm,roleDescription:b="draggable",tabIndex:S=0}=s??{},C=(h==null?void 0:h.id)===e,P=O.useContext(C?Jy:tS),[M,T]=iu(),[B,L]=iu(),F=_b(a,e),j=Wo(t);ir(()=>(m.set(e,{id:e,key:l,node:M,activatorNode:B,data:j}),()=>{const Y=m.get(e);Y&&Y.key===l&&m.delete(e)}),[m,e]);const W=O.useMemo(()=>({role:k,tabIndex:S,"aria-disabled":r,"aria-pressed":C&&k===Vm?!0:void 0,"aria-roledescription":b,"aria-describedby":d.draggable}),[r,k,S,C,b,d.draggable]);return{active:h,activatorEvent:c,activeNodeRect:p,attributes:W,isDragging:C,listeners:r?void 0:F,node:M,over:x,setNodeRef:T,setActivatorNodeRef:L,transform:P}}function iS(){return O.useContext(Gy)}const sS="Droppable",oS={timeout:25};function lS(n){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:s}=n;const l=ol(sS),{active:a,dispatch:c,over:h,measureDroppableContainers:p}=O.useContext(Eu),d=O.useRef({disabled:t}),m=O.useRef(!1),x=O.useRef(null),k=O.useRef(null),{disabled:b,updateMeasurementsFor:S,timeout:C}={...oS,...s},P=Wo(S??r),M=O.useCallback(()=>{if(!m.current){m.current=!0;return}k.current!=null&&clearTimeout(k.current),k.current=setTimeout(()=>{p(Array.isArray(P.current)?P.current:[P.current]),k.current=null},C)},[C]),T=Nu({callback:M,disabled:b||!a}),B=O.useCallback((W,Y)=>{T&&(Y&&(T.unobserve(Y),m.current=!1),W&&T.observe(W))},[T]),[L,F]=iu(B),j=Wo(e);return O.useEffect(()=>{!T||!L.current||(T.disconnect(),m.current=!1,T.observe(L.current))},[L,T]),O.useEffect(()=>(c({type:gt.RegisterDroppable,element:{id:r,key:l,disabled:t,node:L,rect:x,data:j}}),()=>c({type:gt.UnregisterDroppable,key:l,id:r})),[r]),O.useEffect(()=>{t!==d.current.disabled&&(c({type:gt.SetDroppableDisabled,id:r,key:l,disabled:t}),d.current.disabled=t)},[r,l,t,c]),{active:a,rect:x,isOver:(h==null?void 0:h.id)===r,node:L,over:h,setNodeRef:F}}function Zy(n,e,t){const r=n.slice();return r.splice(t<0?r.length+t:t,0,r.splice(e,1)[0]),r}function aS(n,e){return n.reduce((t,r,s)=>{const l=e.get(r);return l&&(t[s]=l),t},Array(n.length))}function wa(n){return n!==null&&n>=0}function uS(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function cS(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const ba={scaleX:1,scaleY:1},hS=n=>{var e;let{rects:t,activeNodeRect:r,activeIndex:s,overIndex:l,index:a}=n;const c=(e=t[s])!=null?e:r;if(!c)return null;const h=fS(t,a,s);if(a===s){const p=t[l];return p?{x:s<l?p.left+p.width-(c.left+c.width):p.left-c.left,y:0,...ba}:null}return a>s&&a<=l?{x:-c.width-h,y:0,...ba}:a<s&&a>=l?{x:c.width+h,y:0,...ba}:{x:0,y:0,...ba}};function fS(n,e,t){const r=n[e],s=n[e-1],l=n[e+1];return!r||!s&&!l?0:t<e?s?r.left-(s.left+s.width):l.left-(r.left+r.width):l?l.left-(r.left+r.width):r.left-(s.left+s.width)}const ex=n=>{let{rects:e,activeIndex:t,overIndex:r,index:s}=n;const l=Zy(e,r,t),a=e[s],c=l[s];return!c||!a?null:{x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height}},tx="Sortable",nx=ot.createContext({activeIndex:-1,containerId:tx,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ex,disabled:{draggable:!1,droppable:!1}});function dS(n){let{children:e,id:t,items:r,strategy:s=ex,disabled:l=!1}=n;const{active:a,dragOverlay:c,droppableRects:h,over:p,measureDroppableContainers:d}=iS(),m=ol(tx,t),x=c.rect!==null,k=O.useMemo(()=>r.map(F=>typeof F=="object"&&"id"in F?F.id:F),[r]),b=a!=null,S=a?k.indexOf(a.id):-1,C=p?k.indexOf(p.id):-1,P=O.useRef(k),M=!uS(k,P.current),T=C!==-1&&S===-1||M,B=cS(l);ir(()=>{M&&b&&d(k)},[M,k,b,d]),O.useEffect(()=>{P.current=k},[k]);const L=O.useMemo(()=>({activeIndex:S,containerId:m,disabled:B,disableTransforms:T,items:k,overIndex:C,useDragOverlay:x,sortedRects:aS(k,h),strategy:s}),[S,m,B.draggable,B.droppable,T,k,C,h,x,s]);return ot.createElement(nx.Provider,{value:L},e)}const pS=n=>{let{id:e,items:t,activeIndex:r,overIndex:s}=n;return Zy(t,r,s).indexOf(e)},gS=n=>{let{containerId:e,isSorting:t,wasDragging:r,index:s,items:l,newIndex:a,previousItems:c,previousContainerId:h,transition:p}=n;return!p||!r||c!==l&&s===a?!1:t?!0:a!==s&&e===h},mS={duration:200,easing:"ease"},rx="transform",yS=Qo.Transition.toString({property:rx,duration:0,easing:"linear"}),xS={roleDescription:"sortable"};function vS(n){let{disabled:e,index:t,node:r,rect:s}=n;const[l,a]=O.useState(null),c=O.useRef(t);return ir(()=>{if(!e&&t!==c.current&&r.current){const h=s.current;if(h){const p=Ls(r.current,{ignoreTransform:!0}),d={x:h.left-p.left,y:h.top-p.top,scaleX:h.width/p.width,scaleY:h.height/p.height};(d.x||d.y)&&a(d)}}t!==c.current&&(c.current=t)},[e,t,r,s]),O.useEffect(()=>{l&&a(null)},[l]),l}function kS(n){let{animateLayoutChanges:e=gS,attributes:t,disabled:r,data:s,getNewIndex:l=pS,id:a,strategy:c,resizeObserverConfig:h,transition:p=mS}=n;const{items:d,containerId:m,activeIndex:x,disabled:k,disableTransforms:b,sortedRects:S,overIndex:C,useDragOverlay:P,strategy:M}=O.useContext(nx),T=wS(r,k),B=d.indexOf(a),L=O.useMemo(()=>({sortable:{containerId:m,index:B,items:d},...s}),[m,s,B,d]),F=O.useMemo(()=>d.slice(d.indexOf(a)),[d,a]),{rect:j,node:W,isOver:Y,setNodeRef:K}=lS({id:a,data:L,disabled:T.droppable,resizeObserverConfig:{updateMeasurementsFor:F,...h}}),{active:V,activatorEvent:Q,activeNodeRect:J,attributes:ee,setNodeRef:X,listeners:ue,isDragging:de,over:$,setActivatorNodeRef:re,transform:H}=rS({id:a,data:L,attributes:{...xS,...t},disabled:T.draggable}),E=Iw(K,X),D=!!V,Z=D&&!b&&wa(x)&&wa(C),le=!P&&de,ye=le&&Z?H:null,he=Z?ye??(c??M)({rects:S,activeNodeRect:J,activeIndex:x,overIndex:C,index:B}):null,Se=wa(x)&&wa(C)?l({id:a,items:d,activeIndex:x,overIndex:C}):B,Ce=V==null?void 0:V.id,ve=O.useRef({activeId:Ce,items:d,newIndex:Se,containerId:m}),Re=d!==ve.current.items,_e=e({active:V,containerId:m,isDragging:de,isSorting:D,id:a,index:B,items:d,newIndex:ve.current.newIndex,previousItems:ve.current.items,previousContainerId:ve.current.containerId,transition:p,wasDragging:ve.current.activeId!=null}),Ue=vS({disabled:!_e,index:B,node:W,rect:j});return O.useEffect(()=>{D&&ve.current.newIndex!==Se&&(ve.current.newIndex=Se),m!==ve.current.containerId&&(ve.current.containerId=m),d!==ve.current.items&&(ve.current.items=d)},[D,Se,m,d]),O.useEffect(()=>{if(Ce===ve.current.activeId)return;if(Ce!=null&&ve.current.activeId==null){ve.current.activeId=Ce;return}const ft=setTimeout(()=>{ve.current.activeId=Ce},50);return()=>clearTimeout(ft)},[Ce]),{active:V,activeIndex:x,attributes:ee,data:L,rect:j,index:B,newIndex:Se,items:d,isOver:Y,isSorting:D,isDragging:de,listeners:ue,node:W,overIndex:C,over:$,setNodeRef:E,setActivatorNodeRef:re,setDroppableNodeRef:K,setDraggableNodeRef:X,transform:Ue??he,transition:Je()};function Je(){if(Ue||Re&&ve.current.newIndex===B)return yS;if(!(le&&!dd(Q)||!p)&&(D||_e))return Qo.Transition.toString({...p,property:rx})}}function wS(n,e){var t,r;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n==null?void 0:n.draggable)!=null?t:e.draggable,droppable:(r=n==null?void 0:n.droppable)!=null?r:e.droppable}}Le.Down,Le.Right,Le.Up,Le.Left;function Wm(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function bS(n){if(Array.isArray(n))return n}function SS(n,e,t){return(e=RS(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function OS(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,l,a,c=[],h=!0,p=!1;try{if(l=(t=t.call(n)).next,e!==0)for(;!(h=(r=l.call(t)).done)&&(c.push(r.value),c.length!==e);h=!0);}catch(d){p=!0,s=d}finally{try{if(!h&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(p)throw s}}return c}}function CS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function $m(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Qm(Object(t),!0).forEach(function(r){SS(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Qm(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function PS(n,e){if(n==null)return{};var t,r,s=NS(n,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(r=0;r<l.length;r++)t=l[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}function NS(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function ES(n,e){return bS(n)||OS(n,e)||MS(n,e)||CS()}function AS(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function RS(n){var e=AS(n,"string");return typeof e=="symbol"?e:e+""}function MS(n,e){if(n){if(typeof n=="string")return Wm(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Wm(n,e):void 0}}function TS(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Um(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Xm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Um(Object(t),!0).forEach(function(r){TS(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Um(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function DS(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){return e.reduceRight(function(s,l){return l(s)},r)}}function No(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return s.length>=n.length?n.apply(this,s):function(){for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];return e.apply(t,[].concat(s,c))}}}function au(n){return{}.toString.call(n).includes("Object")}function LS(n){return!Object.keys(n).length}function Uo(n){return typeof n=="function"}function jS(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function IS(n,e){return au(e)||si("changeType"),Object.keys(e).some(function(t){return!jS(n,t)})&&si("changeField"),e}function BS(n){Uo(n)||si("selectorType")}function zS(n){Uo(n)||au(n)||si("handlerType"),au(n)&&Object.values(n).some(function(e){return!Uo(e)})&&si("handlersType")}function FS(n){n||si("initialIsRequired"),au(n)||si("initialType"),LS(n)&&si("initialContent")}function _S(n,e){throw new Error(n[e]||n.default)}var HS={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},si=No(_S)(HS),Sa={changes:IS,selector:BS,handler:zS,initial:FS};function VS(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Sa.initial(n),Sa.handler(e);var t={current:n},r=No($S)(t,e),s=No(QS)(t),l=No(Sa.changes)(n),a=No(WS)(t);function c(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(d){return d};return Sa.selector(p),p(t.current)}function h(p){DS(r,s,l,a)(p)}return[c,h]}function WS(n,e){return Uo(e)?e(n.current):e}function QS(n,e){return n.current=Xm(Xm({},n.current),e),e}function $S(n,e,t){return Uo(e)?e(n.current):Object.keys(t).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,n.current[r])}),t}var US={create:VS},XS={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function KS(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return s.length>=n.length?n.apply(this,s):function(){for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];return e.apply(t,[].concat(s,c))}}}function qS(n){return{}.toString.call(n).includes("Object")}function YS(n){return n||Km("configIsRequired"),qS(n)||Km("configType"),n.urls?(GS(),{paths:{vs:n.urls.monacoBase}}):n}function GS(){console.warn(ix.deprecation)}function JS(n,e){throw new Error(n[e]||n.default)}var ix={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Km=KS(JS)(ix),ZS={config:YS},e2=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return t.reduceRight(function(l,a){return a(l)},s)}};function sx(n,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&n[t]&&Object.assign(e[t],sx(n[t],e[t]))}),$m($m({},n),e)}var t2={type:"cancelation",msg:"operation is manually canceled"};function Mh(n){var e=!1,t=new Promise(function(r,s){n.then(function(l){return e?s(t2):r(l)}),n.catch(s)});return t.cancel=function(){return e=!0},t}var n2=["monaco"],r2=US.create({config:XS,isInitialized:!1,resolve:null,reject:null,monaco:null}),ox=ES(r2,2),ll=ox[0],Au=ox[1];function i2(n){var e=ZS.config(n),t=e.monaco,r=PS(e,n2);Au(function(s){return{config:sx(s.config,r),monaco:t}})}function s2(){var n=ll(function(e){var t=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:t,isInitialized:r,resolve:s}});if(!n.isInitialized){if(Au({isInitialized:!0}),n.monaco)return n.resolve(n.monaco),Mh(Th);if(window.monaco&&window.monaco.editor)return lx(window.monaco),n.resolve(window.monaco),Mh(Th);e2(o2,a2)(u2)}return Mh(Th)}function o2(n){return document.body.appendChild(n)}function l2(n){var e=document.createElement("script");return n&&(e.src=n),e}function a2(n){var e=ll(function(r){var s=r.config,l=r.reject;return{config:s,reject:l}}),t=l2("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return n()},t.onerror=e.reject,t}function u2(){var n=ll(function(t){var r=t.config,s=t.resolve,l=t.reject;return{config:r,resolve:s,reject:l}}),e=window.require;e.config(n.config),e(["vs/editor/editor.main"],function(t){var r=t.m||t;lx(r),n.resolve(r)},function(t){n.reject(t)})}function lx(n){ll().monaco||Au({monaco:n})}function c2(){return ll(function(n){var e=n.monaco;return e})}var Th=new Promise(function(n,e){return Au({resolve:n,reject:e})}),ax={config:i2,init:s2,__getMonacoInstance:c2},h2={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Dh=h2,f2={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},d2=f2;function p2({children:n}){return ot.createElement("div",{style:d2.container},n)}var g2=p2,m2=g2;function y2({width:n,height:e,isEditorReady:t,loading:r,_ref:s,className:l,wrapperProps:a}){return ot.createElement("section",{style:{...Dh.wrapper,width:n,height:e},...a},!t&&ot.createElement(m2,null,r),ot.createElement("div",{ref:s,style:{...Dh.fullWidth,...!t&&Dh.hide},className:l}))}var x2=y2,ux=O.memo(x2);function v2(n){O.useEffect(n,[])}var cx=v2;function k2(n,e,t=!0){let r=O.useRef(!0);O.useEffect(r.current||!t?()=>{r.current=!1}:n,e)}var hn=k2;function jo(){}function ds(n,e,t,r){return w2(n,r)||b2(n,e,t,r)}function w2(n,e){return n.editor.getModel(hx(n,e))}function b2(n,e,t,r){return n.editor.createModel(e,t,r?hx(n,r):void 0)}function hx(n,e){return n.Uri.parse(e)}function S2({original:n,modified:e,language:t,originalLanguage:r,modifiedLanguage:s,originalModelPath:l,modifiedModelPath:a,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:h=!1,theme:p="light",loading:d="Loading...",options:m={},height:x="100%",width:k="100%",className:b,wrapperProps:S={},beforeMount:C=jo,onMount:P=jo}){let[M,T]=O.useState(!1),[B,L]=O.useState(!0),F=O.useRef(null),j=O.useRef(null),W=O.useRef(null),Y=O.useRef(P),K=O.useRef(C),V=O.useRef(!1);cx(()=>{let X=ax.init();return X.then(ue=>(j.current=ue)&&L(!1)).catch(ue=>(ue==null?void 0:ue.type)!=="cancelation"&&console.error("Monaco initialization: error:",ue)),()=>F.current?ee():X.cancel()}),hn(()=>{if(F.current&&j.current){let X=F.current.getOriginalEditor(),ue=ds(j.current,n||"",r||t||"text",l||"");ue!==X.getModel()&&X.setModel(ue)}},[l],M),hn(()=>{if(F.current&&j.current){let X=F.current.getModifiedEditor(),ue=ds(j.current,e||"",s||t||"text",a||"");ue!==X.getModel()&&X.setModel(ue)}},[a],M),hn(()=>{let X=F.current.getModifiedEditor();X.getOption(j.current.editor.EditorOption.readOnly)?X.setValue(e||""):e!==X.getValue()&&(X.executeEdits("",[{range:X.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),X.pushUndoStop())},[e],M),hn(()=>{var X,ue;(ue=(X=F.current)==null?void 0:X.getModel())==null||ue.original.setValue(n||"")},[n],M),hn(()=>{let{original:X,modified:ue}=F.current.getModel();j.current.editor.setModelLanguage(X,r||t||"text"),j.current.editor.setModelLanguage(ue,s||t||"text")},[t,r,s],M),hn(()=>{var X;(X=j.current)==null||X.editor.setTheme(p)},[p],M),hn(()=>{var X;(X=F.current)==null||X.updateOptions(m)},[m],M);let Q=O.useCallback(()=>{var de;if(!j.current)return;K.current(j.current);let X=ds(j.current,n||"",r||t||"text",l||""),ue=ds(j.current,e||"",s||t||"text",a||"");(de=F.current)==null||de.setModel({original:X,modified:ue})},[t,e,s,n,r,l,a]),J=O.useCallback(()=>{var X;!V.current&&W.current&&(F.current=j.current.editor.createDiffEditor(W.current,{automaticLayout:!0,...m}),Q(),(X=j.current)==null||X.editor.setTheme(p),T(!0),V.current=!0)},[m,p,Q]);O.useEffect(()=>{M&&Y.current(F.current,j.current)},[M]),O.useEffect(()=>{!B&&!M&&J()},[B,M,J]);function ee(){var ue,de,$,re;let X=(ue=F.current)==null?void 0:ue.getModel();c||((de=X==null?void 0:X.original)==null||de.dispose()),h||(($=X==null?void 0:X.modified)==null||$.dispose()),(re=F.current)==null||re.dispose()}return ot.createElement(ux,{width:k,height:x,isEditorReady:M,loading:d,_ref:W,className:b,wrapperProps:S})}var O2=S2;O.memo(O2);function C2(n){let e=O.useRef();return O.useEffect(()=>{e.current=n},[n]),e.current}var P2=C2,Oa=new Map;function N2({defaultValue:n,defaultLanguage:e,defaultPath:t,value:r,language:s,path:l,theme:a="light",line:c,loading:h="Loading...",options:p={},overrideServices:d={},saveViewState:m=!0,keepCurrentModel:x=!1,width:k="100%",height:b="100%",className:S,wrapperProps:C={},beforeMount:P=jo,onMount:M=jo,onChange:T,onValidate:B=jo}){let[L,F]=O.useState(!1),[j,W]=O.useState(!0),Y=O.useRef(null),K=O.useRef(null),V=O.useRef(null),Q=O.useRef(M),J=O.useRef(P),ee=O.useRef(),X=O.useRef(r),ue=P2(l),de=O.useRef(!1),$=O.useRef(!1);cx(()=>{let E=ax.init();return E.then(D=>(Y.current=D)&&W(!1)).catch(D=>(D==null?void 0:D.type)!=="cancelation"&&console.error("Monaco initialization: error:",D)),()=>K.current?H():E.cancel()}),hn(()=>{var D,Z,le,ye;let E=ds(Y.current,n||r||"",e||s||"",l||t||"");E!==((D=K.current)==null?void 0:D.getModel())&&(m&&Oa.set(ue,(Z=K.current)==null?void 0:Z.saveViewState()),(le=K.current)==null||le.setModel(E),m&&((ye=K.current)==null||ye.restoreViewState(Oa.get(l))))},[l],L),hn(()=>{var E;(E=K.current)==null||E.updateOptions(p)},[p],L),hn(()=>{!K.current||r===void 0||(K.current.getOption(Y.current.editor.EditorOption.readOnly)?K.current.setValue(r):r!==K.current.getValue()&&($.current=!0,K.current.executeEdits("",[{range:K.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),K.current.pushUndoStop(),$.current=!1))},[r],L),hn(()=>{var D,Z;let E=(D=K.current)==null?void 0:D.getModel();E&&s&&((Z=Y.current)==null||Z.editor.setModelLanguage(E,s))},[s],L),hn(()=>{var E;c!==void 0&&((E=K.current)==null||E.revealLine(c))},[c],L),hn(()=>{var E;(E=Y.current)==null||E.editor.setTheme(a)},[a],L);let re=O.useCallback(()=>{var E;if(!(!V.current||!Y.current)&&!de.current){J.current(Y.current);let D=l||t,Z=ds(Y.current,r||n||"",e||s||"",D||"");K.current=(E=Y.current)==null?void 0:E.editor.create(V.current,{model:Z,automaticLayout:!0,...p},d),m&&K.current.restoreViewState(Oa.get(D)),Y.current.editor.setTheme(a),c!==void 0&&K.current.revealLine(c),F(!0),de.current=!0}},[n,e,t,r,s,l,p,d,m,a,c]);O.useEffect(()=>{L&&Q.current(K.current,Y.current)},[L]),O.useEffect(()=>{!j&&!L&&re()},[j,L,re]),X.current=r,O.useEffect(()=>{var E,D;L&&T&&((E=ee.current)==null||E.dispose(),ee.current=(D=K.current)==null?void 0:D.onDidChangeModelContent(Z=>{$.current||T(K.current.getValue(),Z)}))},[L,T]),O.useEffect(()=>{if(L){let E=Y.current.editor.onDidChangeMarkers(D=>{var le;let Z=(le=K.current.getModel())==null?void 0:le.uri;if(Z&&D.find(ye=>ye.path===Z.path)){let ye=Y.current.editor.getModelMarkers({resource:Z});B==null||B(ye)}});return()=>{E==null||E.dispose()}}return()=>{}},[L,B]);function H(){var E,D;(E=ee.current)==null||E.dispose(),x?m&&Oa.set(l,K.current.saveViewState()):(D=K.current.getModel())==null||D.dispose(),K.current.dispose()}return ot.createElement(ux,{width:k,height:b,isEditorReady:L,loading:h,_ref:V,className:S,wrapperProps:C})}var E2=N2,A2=O.memo(E2),R2=A2;let ff=[],fx=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?fx:ff).push(t=t+n[e])})();function M2(n){if(n<768)return!1;for(let e=0,t=ff.length;;){let r=e+t>>1;if(n<ff[r])t=r;else if(n>=fx[r])e=r+1;else return!0;if(e==t)return!1}}function qm(n){return n>=127462&&n<=127487}const Ym=8205;function T2(n,e,t=!0,r=!0){return(t?dx:D2)(n,e,r)}function dx(n,e,t){if(e==n.length)return e;e&&px(n.charCodeAt(e))&&gx(n.charCodeAt(e-1))&&e--;let r=Lh(n,e);for(e+=Gm(r);e<n.length;){let s=Lh(n,e);if(r==Ym||s==Ym||t&&M2(s))e+=Gm(s),r=s;else if(qm(s)){let l=0,a=e-2;for(;a>=0&&qm(Lh(n,a));)l++,a-=2;if(l%2==0)break;e+=2}else break}return e}function D2(n,e,t){for(;e>0;){let r=dx(n,e-2,t);if(r<e)return r;e--}return 0}function Lh(n,e){let t=n.charCodeAt(e);if(!gx(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return px(r)?(t-55296<<10)+(r-56320)+65536:t}function px(n){return n>=56320&&n<57344}function gx(n){return n>=55296&&n<56320}function Gm(n){return n<65536?1:2}class Te{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=Ss(this,e,t);let s=[];return this.decompose(0,e,s,2),r.length&&r.decompose(0,r.length,s,3),this.decompose(t,this.length,s,1),tr.from(s,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Ss(this,e,t);let r=[];return this.decompose(e,t,r,0),tr.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),s=new Io(this),l=new Io(e);for(let a=t,c=t;;){if(s.next(a),l.next(a),a=0,s.lineBreak!=l.lineBreak||s.done!=l.done||s.value!=l.value)return!1;if(c+=s.value.length,s.done||c>=r)return!0}}iter(e=1){return new Io(this,e)}iterRange(e,t=this.length){return new mx(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;r=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new yx(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Te.empty:e.length<=32?new st(e):tr.from(st.split(e,[]))}}class st extends Te{constructor(e,t=L2(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,s){for(let l=0;;l++){let a=this.text[l],c=s+a.length;if((t?r:c)>=e)return new j2(s,c,r,a);s=c+1,r++}}decompose(e,t,r,s){let l=e<=0&&t>=this.length?this:new st(Jm(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let a=r.pop(),c=Ua(l.text,a.text.slice(),0,l.length);if(c.length<=32)r.push(new st(c,a.length+l.length));else{let h=c.length>>1;r.push(new st(c.slice(0,h)),new st(c.slice(h)))}}else r.push(l)}replace(e,t,r){if(!(r instanceof st))return super.replace(e,t,r);[e,t]=Ss(this,e,t);let s=Ua(this.text,Ua(r.text,Jm(this.text,0,e)),t),l=this.length+r.length-(t-e);return s.length<=32?new st(s,l):tr.from(st.split(s,[]),l)}sliceString(e,t=this.length,r=`
`){[e,t]=Ss(this,e,t);let s="";for(let l=0,a=0;l<=t&&a<this.text.length;a++){let c=this.text[a],h=l+c.length;l>e&&a&&(s+=r),e<h&&t>l&&(s+=c.slice(Math.max(0,e-l),t-l)),l=h+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],s=-1;for(let l of e)r.push(l),s+=l.length+1,r.length==32&&(t.push(new st(r,s)),r=[],s=-1);return s>-1&&t.push(new st(r,s)),t}}class tr extends Te{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,s){for(let l=0;;l++){let a=this.children[l],c=s+a.length,h=r+a.lines-1;if((t?h:c)>=e)return a.lineInner(e,t,r,s);s=c+1,r=h+1}}decompose(e,t,r,s){for(let l=0,a=0;a<=t&&l<this.children.length;l++){let c=this.children[l],h=a+c.length;if(e<=h&&t>=a){let p=s&((a<=e?1:0)|(h>=t?2:0));a>=e&&h<=t&&!p?r.push(c):c.decompose(e-a,t-a,r,p)}a=h+1}}replace(e,t,r){if([e,t]=Ss(this,e,t),r.lines<this.lines)for(let s=0,l=0;s<this.children.length;s++){let a=this.children[s],c=l+a.length;if(e>=l&&t<=c){let h=a.replace(e-l,t-l,r),p=this.lines-a.lines+h.lines;if(h.lines<p>>4&&h.lines>p>>6){let d=this.children.slice();return d[s]=h,new tr(d,this.length-(t-e)+r.length)}return super.replace(l,c,h)}l=c+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=Ss(this,e,t);let s="";for(let l=0,a=0;l<this.children.length&&a<=t;l++){let c=this.children[l],h=a+c.length;a>e&&l&&(s+=r),e<h&&t>a&&(s+=c.sliceString(e-a,t-a,r)),a=h+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof tr))return 0;let r=0,[s,l,a,c]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,l+=t){if(s==a||l==c)return r;let h=this.children[s],p=e.children[l];if(h!=p)return r+h.scanIdentical(p,t);r+=h.length+1}}static from(e,t=e.reduce((r,s)=>r+s.length+1,-1)){let r=0;for(let k of e)r+=k.lines;if(r<32){let k=[];for(let b of e)b.flatten(k);return new st(k,t)}let s=Math.max(32,r>>5),l=s<<1,a=s>>1,c=[],h=0,p=-1,d=[];function m(k){let b;if(k.lines>l&&k instanceof tr)for(let S of k.children)m(S);else k.lines>a&&(h>a||!h)?(x(),c.push(k)):k instanceof st&&h&&(b=d[d.length-1])instanceof st&&k.lines+b.lines<=32?(h+=k.lines,p+=k.length+1,d[d.length-1]=new st(b.text.concat(k.text),b.length+1+k.length)):(h+k.lines>s&&x(),h+=k.lines,p+=k.length+1,d.push(k))}function x(){h!=0&&(c.push(d.length==1?d[0]:tr.from(d,p)),p=-1,h=d.length=0)}for(let k of e)m(k);return x(),c.length==1?c[0]:new tr(c,t)}}Te.empty=new st([""],0);function L2(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Ua(n,e,t=0,r=1e9){for(let s=0,l=0,a=!0;l<n.length&&s<=r;l++){let c=n[l],h=s+c.length;h>=t&&(h>r&&(c=c.slice(0,r-s)),s<t&&(c=c.slice(t-s)),a?(e[e.length-1]+=c,a=!1):e.push(c)),s=h+1}return e}function Jm(n,e,t){return Ua(n,[""],e,t)}class Io{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof st?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,s=this.nodes[r],l=this.offsets[r],a=l>>1,c=s instanceof st?s.text.length:s.children.length;if(a==(t>0?c:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof st){let h=s.text[a+(t<0?-1:0)];if(this.offsets[r]+=t,h.length>Math.max(0,e))return this.value=e==0?h:t>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=s.children[a+(t<0?-1:0)];e>h.length?(e-=h.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(h),this.offsets.push(t>0?1:(h instanceof st?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class mx{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Io(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=r?s:t<0?s.slice(s.length-r):s.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class yx{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Te.prototype[Symbol.iterator]=function(){return this.iter()},Io.prototype[Symbol.iterator]=mx.prototype[Symbol.iterator]=yx.prototype[Symbol.iterator]=function(){return this});class j2{constructor(e,t,r,s){this.from=e,this.to=t,this.number=r,this.text=s}get length(){return this.to-this.from}}function Ss(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function Qt(n,e,t=!0,r=!0){return T2(n,e,t,r)}function I2(n){return n>=56320&&n<57344}function B2(n){return n>=55296&&n<56320}function z2(n,e){let t=n.charCodeAt(e);if(!B2(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return I2(r)?(t-55296<<10)+(r-56320)+65536:t}function F2(n){return n<65536?1:2}const df=/\r\n?|\n/;var fn=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(fn||(fn={}));class Or{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,s=0;t<this.sections.length;){let l=this.sections[t++],a=this.sections[t++];a<0?(e(r,s,l),s+=l):s+=a,r+=l}}iterChangedRanges(e,t=!1){pf(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];s<0?e.push(r,s):e.push(s,r)}return new Or(e)}composeDesc(e){return this.empty?e:e.empty?this:xx(this,e)}mapDesc(e,t=!1){return e.empty?this:gf(this,e,t)}mapPos(e,t=-1,r=fn.Simple){let s=0,l=0;for(let a=0;a<this.sections.length;){let c=this.sections[a++],h=this.sections[a++],p=s+c;if(h<0){if(p>e)return l+(e-s);l+=c}else{if(r!=fn.Simple&&p>=e&&(r==fn.TrackDel&&s<e&&p>e||r==fn.TrackBefore&&s<e||r==fn.TrackAfter&&p>e))return null;if(p>e||p==e&&t<0&&!c)return e==s||t<0?l:l+h;l+=h}s=p}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return l}touchesRange(e,t=e){for(let r=0,s=0;r<this.sections.length&&s<=t;){let l=this.sections[r++],a=this.sections[r++],c=s+l;if(a>=0&&s<=t&&c>=e)return s<e&&c>t?"cover":!0;s=c}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+r+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Or(e)}static create(e){return new Or(e)}}class wt extends Or{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return pf(this,(t,r,s,l,a)=>e=e.replace(s,s+(r-t),a),!1),e}mapDesc(e,t=!1){return gf(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let s=0,l=0;s<t.length;s+=2){let a=t[s],c=t[s+1];if(c>=0){t[s]=c,t[s+1]=a;let h=s>>1;for(;r.length<h;)r.push(Te.empty);r.push(a?e.slice(l,l+a):Te.empty)}l+=a}return new wt(t,r)}compose(e){return this.empty?e:e.empty?this:xx(this,e,!0)}map(e,t=!1){return e.empty?this:gf(this,e,t,!0)}iterChanges(e,t=!1){pf(this,e,t)}get desc(){return Or.create(this.sections)}filter(e){let t=[],r=[],s=[],l=new Xo(this);e:for(let a=0,c=0;;){let h=a==e.length?1e9:e[a++];for(;c<h||c==h&&l.len==0;){if(l.done)break e;let d=Math.min(l.len,h-c);jt(s,d,-1);let m=l.ins==-1?-1:l.off==0?l.ins:0;jt(t,d,m),m>0&&ei(r,t,l.text),l.forward(d),c+=d}let p=e[a++];for(;c<p;){if(l.done)break e;let d=Math.min(l.len,p-c);jt(t,d,-1),jt(s,d,l.ins==-1?-1:l.off==0?l.ins:0),l.forward(d),c+=d}}return{changes:new wt(t,r),filtered:Or.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],s=this.sections[t+1];s<0?e.push(r):s==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let s=[],l=[],a=0,c=null;function h(d=!1){if(!d&&!s.length)return;a<t&&jt(s,t-a,-1);let m=new wt(s,l);c=c?c.compose(m.map(c)):m,s=[],l=[],a=0}function p(d){if(Array.isArray(d))for(let m of d)p(m);else if(d instanceof wt){if(d.length!=t)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${t})`);h(),c=c?c.compose(d.map(c)):d}else{let{from:m,to:x=m,insert:k}=d;if(m>x||m<0||x>t)throw new RangeError(`Invalid change range ${m} to ${x} (in doc of length ${t})`);let b=k?typeof k=="string"?Te.of(k.split(r||df)):k:Te.empty,S=b.length;if(m==x&&S==0)return;m<a&&h(),m>a&&jt(s,m-a,-1),jt(s,x-m,S),ei(l,s,b),a=x}}return p(e),h(!c),c}static empty(e){return new wt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")t.push(l,-1);else{if(!Array.isArray(l)||typeof l[0]!="number"||l.some((a,c)=>c&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(l.length==1)t.push(l[0],0);else{for(;r.length<s;)r.push(Te.empty);r[s]=Te.of(l.slice(1)),t.push(l[0],r[s].length)}}}return new wt(t,r)}static createSet(e,t){return new wt(e,t)}}function jt(n,e,t,r=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:s>=0&&e==0&&n[s]==0?n[s+1]+=t:r?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function ei(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Te.empty);n.push(t)}}function pf(n,e,t){let r=n.inserted;for(let s=0,l=0,a=0;a<n.sections.length;){let c=n.sections[a++],h=n.sections[a++];if(h<0)s+=c,l+=c;else{let p=s,d=l,m=Te.empty;for(;p+=c,d+=h,h&&r&&(m=m.append(r[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)c=n.sections[a++],h=n.sections[a++];e(s,p,l,d,m),s=p,l=d}}}function gf(n,e,t,r=!1){let s=[],l=r?[]:null,a=new Xo(n),c=new Xo(e);for(let h=-1;;){if(a.done&&c.len||c.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&c.ins==-1){let p=Math.min(a.len,c.len);jt(s,p,-1),a.forward(p),c.forward(p)}else if(c.ins>=0&&(a.ins<0||h==a.i||a.off==0&&(c.len<a.len||c.len==a.len&&!t))){let p=c.len;for(jt(s,c.ins,-1);p;){let d=Math.min(a.len,p);a.ins>=0&&h<a.i&&a.len<=d&&(jt(s,0,a.ins),l&&ei(l,s,a.text),h=a.i),a.forward(d),p-=d}c.next()}else if(a.ins>=0){let p=0,d=a.len;for(;d;)if(c.ins==-1){let m=Math.min(d,c.len);p+=m,d-=m,c.forward(m)}else if(c.ins==0&&c.len<d)d-=c.len,c.next();else break;jt(s,p,h<a.i?a.ins:0),l&&h<a.i&&ei(l,s,a.text),h=a.i,a.forward(a.len-d)}else{if(a.done&&c.done)return l?wt.createSet(s,l):Or.create(s);throw new Error("Mismatched change set lengths")}}}function xx(n,e,t=!1){let r=[],s=t?[]:null,l=new Xo(n),a=new Xo(e);for(let c=!1;;){if(l.done&&a.done)return s?wt.createSet(r,s):Or.create(r);if(l.ins==0)jt(r,l.len,0,c),l.next();else if(a.len==0&&!a.done)jt(r,0,a.ins,c),s&&ei(s,r,a.text),a.next();else{if(l.done||a.done)throw new Error("Mismatched change set lengths");{let h=Math.min(l.len2,a.len),p=r.length;if(l.ins==-1){let d=a.ins==-1?-1:a.off?0:a.ins;jt(r,h,d,c),s&&d&&ei(s,r,a.text)}else a.ins==-1?(jt(r,l.off?0:l.len,h,c),s&&ei(s,r,l.textBit(h))):(jt(r,l.off?0:l.len,a.off?0:a.ins,c),s&&!a.off&&ei(s,r,a.text));c=(l.ins>h||a.ins>=0&&a.len>h)&&(c||r.length>p),l.forward2(h),a.forward(h)}}}}class Xo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Te.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Te.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Ii{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,s;return this.empty?r=s=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),r==this.from&&s==this.to?this:new Ii(r,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return se.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return se.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return se.range(e.anchor,e.head)}static create(e,t,r){return new Ii(e,t,r)}}class se{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:se.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new se([this.main],0)}addRange(e,t=!0){return se.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,se.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new se(e.ranges.map(t=>Ii.fromJSON(t)),e.main)}static single(e,t=e){return new se([se.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,s=0;s<e.length;s++){let l=e[s];if(l.empty?l.from<=r:l.from<r)return se.normalized(e.slice(),t);r=l.to}return new se(e,t)}static cursor(e,t=0,r,s){return Ii.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(s??16777215)<<6)}static range(e,t,r,s){let l=(r??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?Ii.create(t,e,48|l):Ii.create(e,t,(t>e?8:0)|l)}static normalized(e,t=0){let r=e[t];e.sort((s,l)=>s.from-l.from),t=e.indexOf(r);for(let s=1;s<e.length;s++){let l=e[s],a=e[s-1];if(l.empty?l.from<=a.to:l.from<a.to){let c=a.from,h=Math.max(l.to,a.to);s<=t&&t--,e.splice(--s,2,l.anchor>l.head?se.range(h,c):se.range(c,h))}}return new se(e,t)}}function vx(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let vd=0;class ke{constructor(e,t,r,s,l){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=s,this.id=vd++,this.default=e([]),this.extensions=typeof l=="function"?l(this):l}get reader(){return this}static define(e={}){return new ke(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:kd),!!e.static,e.enables)}of(e){return new Xa([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Xa(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Xa(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function kd(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class Xa{constructor(e,t,r,s){this.dependencies=e,this.facet=t,this.type=r,this.value=s,this.id=vd++}dynamicSlot(e){var t;let r=this.value,s=this.facet.compareInput,l=this.id,a=e[l]>>1,c=this.type==2,h=!1,p=!1,d=[];for(let m of this.dependencies)m=="doc"?h=!0:m=="selection"?p=!0:(((t=e[m.id])!==null&&t!==void 0?t:1)&1)==0&&d.push(e[m.id]);return{create(m){return m.values[a]=r(m),1},update(m,x){if(h&&x.docChanged||p&&(x.docChanged||x.selection)||mf(m,d)){let k=r(m);if(c?!Zm(k,m.values[a],s):!s(k,m.values[a]))return m.values[a]=k,1}return 0},reconfigure:(m,x)=>{let k,b=x.config.address[l];if(b!=null){let S=cu(x,b);if(this.dependencies.every(C=>C instanceof ke?x.facet(C)===m.facet(C):C instanceof Wi?x.field(C,!1)==m.field(C,!1):!0)||(c?Zm(k=r(m),S,s):s(k=r(m),S)))return m.values[a]=S,0}else k=r(m);return m.values[a]=k,1}}}}function Zm(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function mf(n,e){let t=!1;for(let r of e)Bo(n,r)&1&&(t=!0);return t}function _2(n,e,t){let r=t.map(h=>n[h.id]),s=t.map(h=>h.type),l=r.filter(h=>!(h&1)),a=n[e.id]>>1;function c(h){let p=[];for(let d=0;d<r.length;d++){let m=cu(h,r[d]);if(s[d]==2)for(let x of m)p.push(x);else p.push(m)}return e.combine(p)}return{create(h){for(let p of r)Bo(h,p);return h.values[a]=c(h),1},update(h,p){if(!mf(h,l))return 0;let d=c(h);return e.compare(d,h.values[a])?0:(h.values[a]=d,1)},reconfigure(h,p){let d=mf(h,r),m=p.config.facets[e.id],x=p.facet(e);if(m&&!d&&kd(t,m))return h.values[a]=x,0;let k=c(h);return e.compare(k,x)?(h.values[a]=x,0):(h.values[a]=k,1)}}}const Ca=ke.define({static:!0});class Wi{constructor(e,t,r,s,l){this.id=e,this.createF=t,this.updateF=r,this.compareF=s,this.spec=l,this.provides=void 0}static define(e){let t=new Wi(vd++,e.create,e.update,e.compare||((r,s)=>r===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Ca).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,s)=>{let l=r.values[t],a=this.updateF(l,s);return this.compareF(l,a)?0:(r.values[t]=a,1)},reconfigure:(r,s)=>{let l=r.facet(Ca),a=s.facet(Ca),c;return(c=l.find(h=>h.field==this))&&c!=a.find(h=>h.field==this)?(r.values[t]=c.create(r),1):s.config.address[this.id]!=null?(r.values[t]=s.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,Ca.of({field:this,create:e})]}get extension(){return this}}const Li={lowest:4,low:3,default:2,high:1,highest:0};function wo(n){return e=>new kx(e,n)}const Ru={highest:wo(Li.highest),high:wo(Li.high),default:wo(Li.default),low:wo(Li.low),lowest:wo(Li.lowest)};class kx{constructor(e,t){this.inner=e,this.prec=t}}class al{of(e){return new yf(this,e)}reconfigure(e){return al.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class yf{constructor(e,t){this.compartment=e,this.inner=t}}class uu{constructor(e,t,r,s,l,a){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=s,this.staticValues=l,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let s=[],l=Object.create(null),a=new Map;for(let x of H2(e,t,a))x instanceof Wi?s.push(x):(l[x.facet.id]||(l[x.facet.id]=[])).push(x);let c=Object.create(null),h=[],p=[];for(let x of s)c[x.id]=p.length<<1,p.push(k=>x.slot(k));let d=r==null?void 0:r.config.facets;for(let x in l){let k=l[x],b=k[0].facet,S=d&&d[x]||[];if(k.every(C=>C.type==0))if(c[b.id]=h.length<<1|1,kd(S,k))h.push(r.facet(b));else{let C=b.combine(k.map(P=>P.value));h.push(r&&b.compare(C,r.facet(b))?r.facet(b):C)}else{for(let C of k)C.type==0?(c[C.id]=h.length<<1|1,h.push(C.value)):(c[C.id]=p.length<<1,p.push(P=>C.dynamicSlot(P)));c[b.id]=p.length<<1,p.push(C=>_2(C,b,k))}}let m=p.map(x=>x(c));return new uu(e,a,m,c,h,l)}}function H2(n,e,t){let r=[[],[],[],[],[]],s=new Map;function l(a,c){let h=s.get(a);if(h!=null){if(h<=c)return;let p=r[h].indexOf(a);p>-1&&r[h].splice(p,1),a instanceof yf&&t.delete(a.compartment)}if(s.set(a,c),Array.isArray(a))for(let p of a)l(p,c);else if(a instanceof yf){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let p=e.get(a.compartment)||a.inner;t.set(a.compartment,p),l(p,c)}else if(a instanceof kx)l(a.inner,a.prec);else if(a instanceof Wi)r[c].push(a),a.provides&&l(a.provides,c);else if(a instanceof Xa)r[c].push(a),a.facet.extensions&&l(a.facet.extensions,Li.default);else{let p=a.extension;if(!p)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(p,c)}}return l(n,Li.default),r.reduce((a,c)=>a.concat(c))}function Bo(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function cu(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const wx=ke.define(),xf=ke.define({combine:n=>n.some(e=>e),static:!0}),bx=ke.define({combine:n=>n.length?n[0]:void 0,static:!0}),Sx=ke.define(),Ox=ke.define(),Cx=ke.define(),Px=ke.define({combine:n=>n.length?n[0]:!1});class js{constructor(e,t){this.type=e,this.value=t}static define(){return new V2}}class V2{of(e){return new js(this,e)}}class W2{constructor(e){this.map=e}of(e){return new mt(this,e)}}class mt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new mt(this.type,t)}is(e){return this.type==e}static define(e={}){return new W2(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let s of e){let l=s.map(t);l&&r.push(l)}return r}}mt.reconfigure=mt.define();mt.appendConfig=mt.define();class Bt{constructor(e,t,r,s,l,a){this.startState=e,this.changes=t,this.selection=r,this.effects=s,this.annotations=l,this.scrollIntoView=a,this._doc=null,this._state=null,r&&vx(r,t.newLength),l.some(c=>c.type==Bt.time)||(this.annotations=l.concat(Bt.time.of(Date.now())))}static create(e,t,r,s,l,a){return new Bt(e,t,r,s,l,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Bt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Bt.time=js.define();Bt.userEvent=js.define();Bt.addToHistory=js.define();Bt.remote=js.define();function Q2(n,e){let t=[];for(let r=0,s=0;;){let l,a;if(r<n.length&&(s==e.length||e[s]>=n[r]))l=n[r++],a=n[r++];else if(s<e.length)l=e[s++],a=e[s++];else return t;!t.length||t[t.length-1]<l?t.push(l,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function Nx(n,e,t){var r;let s,l,a;return t?(s=e.changes,l=wt.empty(e.changes.length),a=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),l=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(s)),{changes:a,selection:e.selection?e.selection.map(l):(r=n.selection)===null||r===void 0?void 0:r.map(s),effects:mt.mapEffects(n.effects,s).concat(mt.mapEffects(e.effects,l)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function vf(n,e,t){let r=e.selection,s=vs(e.annotations);return e.userEvent&&(s=s.concat(Bt.userEvent.of(e.userEvent))),{changes:e.changes instanceof wt?e.changes:wt.of(e.changes||[],t,n.facet(bx)),selection:r&&(r instanceof se?r:se.single(r.anchor,r.head)),effects:vs(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function Ex(n,e,t){let r=vf(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let l=1;l<e.length;l++){e[l].filter===!1&&(t=!1);let a=!!e[l].sequential;r=Nx(r,vf(n,e[l],a?r.changes.newLength:n.doc.length),a)}let s=Bt.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return U2(t?$2(s):s)}function $2(n){let e=n.startState,t=!0;for(let s of e.facet(Sx)){let l=s(n);if(l===!1){t=!1;break}Array.isArray(l)&&(t=t===!0?l:Q2(t,l))}if(t!==!0){let s,l;if(t===!1)l=n.changes.invertedDesc,s=wt.empty(e.doc.length);else{let a=n.changes.filter(t);s=a.changes,l=a.filtered.mapDesc(a.changes).invertedDesc}n=Bt.create(e,s,n.selection&&n.selection.map(l),mt.mapEffects(n.effects,l),n.annotations,n.scrollIntoView)}let r=e.facet(Ox);for(let s=r.length-1;s>=0;s--){let l=r[s](n);l instanceof Bt?n=l:Array.isArray(l)&&l.length==1&&l[0]instanceof Bt?n=l[0]:n=Ex(e,vs(l),!1)}return n}function U2(n){let e=n.startState,t=e.facet(Cx),r=n;for(let s=t.length-1;s>=0;s--){let l=t[s](n);l&&Object.keys(l).length&&(r=Nx(r,vf(e,l,n.changes.newLength),!0))}return r==n?n:Bt.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const X2=[];function vs(n){return n==null?X2:Array.isArray(n)?n:[n]}var Sr=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(Sr||(Sr={}));const K2=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let kf;try{kf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function q2(n){if(kf)return kf.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||K2.test(t)))return!0}return!1}function Y2(n){return e=>{if(!/\S/.test(e))return Sr.Space;if(q2(e))return Sr.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Sr.Word;return Sr.Other}}class je{constructor(e,t,r,s,l,a){this.config=e,this.doc=t,this.selection=r,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=l,a&&(a._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)Bo(this,c<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return Bo(this,r),cu(this,r)}update(...e){return Ex(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:s}=t;for(let c of e.effects)c.is(al.reconfigure)?(t&&(s=new Map,t.compartments.forEach((h,p)=>s.set(p,h)),t=null),s.set(c.value.compartment,c.value.extension)):c.is(mt.reconfigure)?(t=null,r=c.value):c.is(mt.appendConfig)&&(t=null,r=vs(r).concat(c.value));let l;t?l=e.startState.values.slice():(t=uu.resolve(r,s,this),l=new je(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(h,p)=>p.reconfigure(h,this),null).values);let a=e.startState.facet(xf)?e.newSelection:e.newSelection.asSingle();new je(t,e.newDoc,a,l,(c,h)=>h.update(c,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:se.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),s=this.changes(r.changes),l=[r.range],a=vs(r.effects);for(let c=1;c<t.ranges.length;c++){let h=e(t.ranges[c]),p=this.changes(h.changes),d=p.map(s);for(let x=0;x<c;x++)l[x]=l[x].map(d);let m=s.mapDesc(p,!0);l.push(h.range.map(m)),s=s.compose(d),a=mt.mapEffects(a,d).concat(mt.mapEffects(vs(h.effects),m))}return{changes:s,selection:se.create(l,t.mainIndex),effects:a}}changes(e=[]){return e instanceof wt?e:wt.of(e,this.doc.length,this.facet(je.lineSeparator))}toText(e){return Te.of(e.split(this.facet(je.lineSeparator)||df))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Bo(this,t),cu(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let s=e[r];s instanceof Wi&&this.config.address[s.id]!=null&&(t[r]=s.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(r){for(let l in r)if(Object.prototype.hasOwnProperty.call(e,l)){let a=r[l],c=e[l];s.push(a.init(h=>a.spec.fromJSON(c,h)))}}return je.create({doc:e.doc,selection:se.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=uu.resolve(e.extensions||[],new Map),r=e.doc instanceof Te?e.doc:Te.of((e.doc||"").split(t.staticFacet(je.lineSeparator)||df)),s=e.selection?e.selection instanceof se?e.selection:se.single(e.selection.anchor,e.selection.head):se.single(0);return vx(s,r.length),t.staticFacet(xf)||(s=s.asSingle()),new je(t,r,s,t.dynamicSlots.map(()=>null),(l,a)=>a.create(l),null)}get tabSize(){return this.facet(je.tabSize)}get lineBreak(){return this.facet(je.lineSeparator)||`
`}get readOnly(){return this.facet(Px)}phrase(e,...t){for(let r of this.facet(je.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,s)=>{if(s=="$")return"$";let l=+(s||1);return!l||l>t.length?r:t[l-1]})),e}languageDataAt(e,t,r=-1){let s=[];for(let l of this.facet(wx))for(let a of l(this,t,r))Object.prototype.hasOwnProperty.call(a,e)&&s.push(a[e]);return s}charCategorizer(e){return Y2(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:s}=this.doc.lineAt(e),l=this.charCategorizer(e),a=e-r,c=e-r;for(;a>0;){let h=Qt(t,a,!1);if(l(t.slice(h,a))!=Sr.Word)break;a=h}for(;c<s;){let h=Qt(t,c);if(l(t.slice(c,h))!=Sr.Word)break;c=h}return a==c?null:se.range(a+r,c+r)}}je.allowMultipleSelections=xf;je.tabSize=ke.define({combine:n=>n.length?n[0]:4});je.lineSeparator=bx;je.readOnly=Px;je.phrases=ke.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(s=>n[s]==e[s])}});je.languageData=wx;je.changeFilter=Sx;je.transactionFilter=Ox;je.transactionExtender=Cx;al.reconfigure=mt.define();function Ax(n,e,t={}){let r={};for(let s of n)for(let l of Object.keys(s)){let a=s[l],c=r[l];if(c===void 0)r[l]=a;else if(!(c===a||a===void 0))if(Object.hasOwnProperty.call(t,l))r[l]=t[l](c,a);else throw new Error("Config merge conflict for field "+l)}for(let s in e)r[s]===void 0&&(r[s]=e[s]);return r}class Os{eq(e){return this==e}range(e,t=e){return wf.create(e,t,this)}}Os.prototype.startSide=Os.prototype.endSide=0;Os.prototype.point=!1;Os.prototype.mapMode=fn.TrackDel;let wf=class Rx{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new Rx(e,t,r)}};function bf(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class wd{constructor(e,t,r,s){this.from=e,this.to=t,this.value=r,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,s=0){let l=r?this.to:this.from;for(let a=s,c=l.length;;){if(a==c)return a;let h=a+c>>1,p=l[h]-e||(r?this.value[h].endSide:this.value[h].startSide)-t;if(h==a)return p>=0?a:c;p>=0?c=h:a=h+1}}between(e,t,r,s){for(let l=this.findIndex(t,-1e9,!0),a=this.findIndex(r,1e9,!1,l);l<a;l++)if(s(this.from[l]+e,this.to[l]+e,this.value[l])===!1)return!1}map(e,t){let r=[],s=[],l=[],a=-1,c=-1;for(let h=0;h<this.value.length;h++){let p=this.value[h],d=this.from[h]+e,m=this.to[h]+e,x,k;if(d==m){let b=t.mapPos(d,p.startSide,p.mapMode);if(b==null||(x=k=b,p.startSide!=p.endSide&&(k=t.mapPos(d,p.endSide),k<x)))continue}else if(x=t.mapPos(d,p.startSide),k=t.mapPos(m,p.endSide),x>k||x==k&&p.startSide>0&&p.endSide<=0)continue;(k-x||p.endSide-p.startSide)<0||(a<0&&(a=x),p.point&&(c=Math.max(c,k-x)),r.push(p),s.push(x-a),l.push(k-a))}return{mapped:r.length?new wd(s,l,r,c):null,pos:a}}}class Be{constructor(e,t,r,s){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=s}static create(e,t,r,s){return new Be(e,t,r,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:s=0,filterTo:l=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(r&&(t=t.slice().sort(bf)),this.isEmpty)return t.length?Be.of(t):this;let c=new Mx(this,null,-1).goto(0),h=0,p=[],d=new Ko;for(;c.value||h<t.length;)if(h<t.length&&(c.from-t[h].from||c.startSide-t[h].value.startSide)>=0){let m=t[h++];d.addInner(m.from,m.to,m.value)||p.push(m)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(h==t.length||this.chunkEnd(c.chunkIndex)<t[h].from)&&(!a||s>this.chunkEnd(c.chunkIndex)||l<this.chunkPos[c.chunkIndex])&&d.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!a||s>c.to||l<c.from||a(c.from,c.to,c.value))&&(d.addInner(c.from,c.to,c.value)||p.push(wf.create(c.from,c.to,c.value))),c.next());return d.finishInner(this.nextLayer.isEmpty&&!p.length?Be.empty:this.nextLayer.update({add:p,filter:a,filterFrom:s,filterTo:l}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],s=-1;for(let a=0;a<this.chunk.length;a++){let c=this.chunkPos[a],h=this.chunk[a],p=e.touchesRange(c,c+h.length);if(p===!1)s=Math.max(s,h.maxPoint),t.push(h),r.push(e.mapPos(c));else if(p===!0){let{mapped:d,pos:m}=h.map(c,e);d&&(s=Math.max(s,d.maxPoint),t.push(d),r.push(m))}}let l=this.nextLayer.map(e);return t.length==0?l:new Be(r,t,l||Be.empty,s)}between(e,t,r){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],a=this.chunk[s];if(t>=l&&e<=l+a.length&&a.between(l,e-l,t-l,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return qo.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return qo.from(e).goto(t)}static compare(e,t,r,s,l=-1){let a=e.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=l),c=t.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=l),h=e0(a,c,r),p=new bo(a,h,l),d=new bo(c,h,l);r.iterGaps((m,x,k)=>t0(p,m,d,x,k,s)),r.empty&&r.length==0&&t0(p,0,d,0,0,s)}static eq(e,t,r=0,s){s==null&&(s=999999999);let l=e.filter(d=>!d.isEmpty&&t.indexOf(d)<0),a=t.filter(d=>!d.isEmpty&&e.indexOf(d)<0);if(l.length!=a.length)return!1;if(!l.length)return!0;let c=e0(l,a),h=new bo(l,c,0).goto(r),p=new bo(a,c,0).goto(r);for(;;){if(h.to!=p.to||!Sf(h.active,p.active)||h.point&&(!p.point||!h.point.eq(p.point)))return!1;if(h.to>s)return!0;h.next(),p.next()}}static spans(e,t,r,s,l=-1){let a=new bo(e,null,l).goto(t),c=t,h=a.openStart;for(;;){let p=Math.min(a.to,r);if(a.point){let d=a.activeForPoint(a.to),m=a.pointFrom<t?d.length+1:a.point.startSide<0?d.length:Math.min(d.length,h);s.point(c,p,a.point,d,m,a.pointRank),h=Math.min(a.openEnd(p),d.length)}else p>c&&(s.span(c,p,a.active,h),h=a.openEnd(p));if(a.to>r)return h+(a.point&&a.to>r?1:0);c=a.to,a.next()}}static of(e,t=!1){let r=new Ko;for(let s of e instanceof wf?[e]:t?G2(e):e)r.add(s.from,s.to,s.value);return r.finish()}static join(e){if(!e.length)return Be.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let s=e[r];s!=Be.empty;s=s.nextLayer)t=new Be(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}Be.empty=new Be([],[],null,-1);function G2(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(bf(e,r)>0)return n.slice().sort(bf);e=r}return n}Be.empty.nextLayer=Be.empty;class Ko{finishChunk(e){this.chunks.push(new wd(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Ko)).add(e,t,r)}addInner(e,t,r){let s=e-this.lastTo||r.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Be.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Be.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function e0(n,e,t){let r=new Map;for(let l of n)for(let a=0;a<l.chunk.length;a++)l.chunk[a].maxPoint<=0&&r.set(l.chunk[a],l.chunkPos[a]);let s=new Set;for(let l of e)for(let a=0;a<l.chunk.length;a++){let c=r.get(l.chunk[a]);c!=null&&(t?t.mapPos(c):c)==l.chunkPos[a]&&!(t!=null&&t.touchesRange(c,c+l.chunk[a].length))&&s.add(l.chunk[a])}return s}class Mx{constructor(e,t,r,s=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class qo{constructor(e){this.heap=e}static from(e,t=null,r=-1){let s=[];for(let l=0;l<e.length;l++)for(let a=e[l];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&s.push(new Mx(a,t,r,l));return s.length==1?s[0]:new qo(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)jh(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)jh(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),jh(this.heap,0)}}}function jh(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let s=n[r];if(r+1<n.length&&s.compare(n[r+1])>=0&&(s=n[r+1],r++),t.compare(s)<0)break;n[r]=t,n[e]=s,e=r}}class bo{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=qo.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Pa(this.active,e),Pa(this.activeTo,e),Pa(this.activeRank,e),this.minActive=n0(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:s,rank:l}=this.cursor;for(;t<this.activeRank.length&&(l-this.activeRank[t]||s-this.activeTo[t])>0;)t++;Na(this.active,t,r),Na(this.activeTo,t,s),Na(this.activeRank,t,l),e&&Na(e,t,this.cursor.from),this.minActive=n0(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),r&&Pa(r,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let s=r.length-1;s>=0&&r[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function t0(n,e,t,r,s,l){n.goto(e),t.goto(r);let a=r+s,c=r,h=r-e;for(;;){let p=n.to+h-t.to,d=p||n.endSide-t.endSide,m=d<0?n.to+h:t.to,x=Math.min(m,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Sf(n.activeForPoint(n.to),t.activeForPoint(t.to))||l.comparePoint(c,x,n.point,t.point):x>c&&!Sf(n.active,t.active)&&l.compareRange(c,x,n.active,t.active),m>a)break;(p||n.openEnd!=t.openEnd)&&l.boundChange&&l.boundChange(m),c=m,d<=0&&n.next(),d>=0&&t.next()}}function Sf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Pa(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function Na(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function n0(n,e){let t=-1,r=1e9;for(let s=0;s<e.length;s++)(e[s]-r||n[s].endSide-n[t].endSide)<0&&(t=s,r=e[s]);return t}function Mu(n,e,t=n.length){let r=0;for(let s=0;s<t&&s<n.length;)n.charCodeAt(s)==9?(r+=e-r%e,s++):(r++,s=Qt(n,s));return r}function J2(n,e,t,r){for(let s=0,l=0;;){if(l>=e)return s;if(s==n.length)break;l+=n.charCodeAt(s)==9?t-l%t:1,s=Qt(n,s)}return n.length}const Of="",r0=typeof Symbol>"u"?"__"+Of:Symbol.for(Of),Cf=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),i0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class oi{constructor(e,t){this.rules=[];let{finish:r}=t||{};function s(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function l(a,c,h,p){let d=[],m=/^@(\w+)\b/.exec(a[0]),x=m&&m[1]=="keyframes";if(m&&c==null)return h.push(a[0]+";");for(let k in c){let b=c[k];if(/&/.test(k))l(k.split(/,\s*/).map(S=>a.map(C=>S.replace(/&/,C))).reduce((S,C)=>S.concat(C)),b,h);else if(b&&typeof b=="object"){if(!m)throw new RangeError("The value of a property ("+k+") should be a primitive value.");l(s(k),b,d,x)}else b!=null&&d.push(k.replace(/_.*/,"").replace(/[A-Z]/g,S=>"-"+S.toLowerCase())+": "+b+";")}(d.length||x)&&h.push((r&&!m&&!p?a.map(r):a).join(", ")+" {"+d.join(" ")+"}")}for(let a in e)l(s(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=i0[r0]||1;return i0[r0]=e+1,Of+e.toString(36)}static mount(e,t,r){let s=e[Cf],l=r&&r.nonce;s?l&&s.setNonce(l):s=new Z2(e,l),s.mount(Array.isArray(t)?t:[t],e)}}let s0=new Map;class Z2{constructor(e,t){let r=e.ownerDocument||e,s=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let l=s0.get(r);if(l)return e[Cf]=l;this.sheet=new s.CSSStyleSheet,s0.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Cf]=this}mount(e,t){let r=this.sheet,s=0,l=0;for(let a=0;a<e.length;a++){let c=e[a],h=this.modules.indexOf(c);if(h<l&&h>-1&&(this.modules.splice(h,1),l--,h=-1),h==-1){if(this.modules.splice(l++,0,c),r)for(let p=0;p<c.rules.length;p++)r.insertRule(c.rules[p],s++)}else{for(;l<h;)s+=this.modules[l++].rules.length;s+=c.rules.length,l++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let h=0;h<this.modules.length;h++)a+=this.modules[h].getRules()+`
`;this.styleTag.textContent=a;let c=t.head||t;this.styleTag.parentNode!=c&&c.insertBefore(this.styleTag,c.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var li={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Yo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},eO=typeof navigator<"u"&&/Mac/.test(navigator.platform),tO=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Pt=0;Pt<10;Pt++)li[48+Pt]=li[96+Pt]=String(Pt);for(var Pt=1;Pt<=24;Pt++)li[Pt+111]="F"+Pt;for(var Pt=65;Pt<=90;Pt++)li[Pt]=String.fromCharCode(Pt+32),Yo[Pt]=String.fromCharCode(Pt);for(var Ih in li)Yo.hasOwnProperty(Ih)||(Yo[Ih]=li[Ih]);function nO(n){var e=eO&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||tO&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Yo:li)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}let Wt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Pf=typeof document<"u"?document:{documentElement:{style:{}}};const Nf=/Edge\/(\d+)/.exec(Wt.userAgent),Tx=/MSIE \d/.test(Wt.userAgent),Ef=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Wt.userAgent),Tu=!!(Tx||Ef||Nf),o0=!Tu&&/gecko\/(\d+)/i.test(Wt.userAgent),Bh=!Tu&&/Chrome\/(\d+)/.exec(Wt.userAgent),rO="webkitFontSmoothing"in Pf.documentElement.style,Af=!Tu&&/Apple Computer/.test(Wt.vendor),l0=Af&&(/Mobile\/\w+/.test(Wt.userAgent)||Wt.maxTouchPoints>2);var ce={mac:l0||/Mac/.test(Wt.platform),windows:/Win/.test(Wt.platform),linux:/Linux|X11/.test(Wt.platform),ie:Tu,ie_version:Tx?Pf.documentMode||6:Ef?+Ef[1]:Nf?+Nf[1]:0,gecko:o0,gecko_version:o0?+(/Firefox\/(\d+)/.exec(Wt.userAgent)||[0,0])[1]:0,chrome:!!Bh,chrome_version:Bh?+Bh[1]:0,ios:l0,android:/Android\b/.test(Wt.userAgent),webkit_version:rO?+(/\bAppleWebKit\/(\d+)/.exec(Wt.userAgent)||[0,0])[1]:0,safari:Af,safari_version:Af?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Wt.userAgent)||[0,0])[1]:0,tabSize:Pf.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Go(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Rf(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Ka(n,e){if(!e.anchorNode)return!1;try{return Rf(n,e.anchorNode)}catch{return!1}}function Jo(n){return n.nodeType==3?_i(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function zo(n,e,t,r){return t?a0(n,e,t,r,-1)||a0(n,e,t,r,1):!1}function Fi(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function hu(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function a0(n,e,t,r,s){for(;;){if(n==t&&e==r)return!0;if(e==(s<0?0:sr(n))){if(n.nodeName=="DIV")return!1;let l=n.parentNode;if(!l||l.nodeType!=1)return!1;e=Fi(n)+(s<0?0:1),n=l}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?sr(n):0}else return!1}}function sr(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Du(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function iO(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Dx(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function sO(n,e,t,r,s,l,a,c){let h=n.ownerDocument,p=h.defaultView||window;for(let d=n,m=!1;d&&!m;)if(d.nodeType==1){let x,k=d==h.body,b=1,S=1;if(k)x=iO(p);else{if(/^(fixed|sticky)$/.test(getComputedStyle(d).position)&&(m=!0),d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let M=d.getBoundingClientRect();({scaleX:b,scaleY:S}=Dx(d,M)),x={left:M.left,right:M.left+d.clientWidth*b,top:M.top,bottom:M.top+d.clientHeight*S}}let C=0,P=0;if(s=="nearest")e.top<x.top?(P=e.top-(x.top+a),t>0&&e.bottom>x.bottom+P&&(P=e.bottom-x.bottom+a)):e.bottom>x.bottom&&(P=e.bottom-x.bottom+a,t<0&&e.top-P<x.top&&(P=e.top-(x.top+a)));else{let M=e.bottom-e.top,T=x.bottom-x.top;P=(s=="center"&&M<=T?e.top+M/2-T/2:s=="start"||s=="center"&&t<0?e.top-a:e.bottom-T+a)-x.top}if(r=="nearest"?e.left<x.left?(C=e.left-(x.left+l),t>0&&e.right>x.right+C&&(C=e.right-x.right+l)):e.right>x.right&&(C=e.right-x.right+l,t<0&&e.left<x.left+C&&(C=e.left-(x.left+l))):C=(r=="center"?e.left+(e.right-e.left)/2-(x.right-x.left)/2:r=="start"==c?e.left-l:e.right-(x.right-x.left)+l)-x.left,C||P)if(k)p.scrollBy(C,P);else{let M=0,T=0;if(P){let B=d.scrollTop;d.scrollTop+=P/S,T=(d.scrollTop-B)*S}if(C){let B=d.scrollLeft;d.scrollLeft+=C/b,M=(d.scrollLeft-B)*b}e={left:e.left-M,top:e.top-T,right:e.right-M,bottom:e.bottom-T},M&&Math.abs(M-C)<1&&(r="nearest"),T&&Math.abs(T-P)<1&&(s="nearest")}if(k)break;(e.top<x.top||e.bottom>x.bottom||e.left<x.left||e.right>x.right)&&(e={left:Math.max(e.left,x.left),right:Math.min(e.right,x.right),top:Math.max(e.top,x.top),bottom:Math.min(e.bottom,x.bottom)}),d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}function oO(n){let e=n.ownerDocument,t,r;for(let s=n.parentNode;s&&!(s==e.body||t&&r);)if(s.nodeType==1)!r&&s.scrollHeight>s.clientHeight&&(r=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:r}}class lO{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?sr(t):0),r,Math.min(e.focusOffset,r?sr(r):0))}set(e,t,r,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=s}}let Di=null;ce.safari&&ce.safari_version>=26&&(Di=!1);function Lx(n){if(n.setActive)return n.setActive();if(Di)return n.focus(Di);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Di==null?{get preventScroll(){return Di={preventScroll:!0},!0}}:void 0),!Di){Di=!1;for(let t=0;t<e.length;){let r=e[t++],s=e[t++],l=e[t++];r.scrollTop!=s&&(r.scrollTop=s),r.scrollLeft!=l&&(r.scrollLeft=l)}}}let u0;function _i(n,e,t=e){let r=u0||(u0=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function ks(n,e,t,r){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=r);let l=new KeyboardEvent("keydown",s);l.synthetic=!0,n.dispatchEvent(l);let a=new KeyboardEvent("keyup",s);return a.synthetic=!0,n.dispatchEvent(a),l.defaultPrevented||a.defaultPrevented}function aO(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function jx(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function uO(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,sr(t));;)if(r){if(t.nodeType!=1)return!1;let s=t.childNodes[r-1];s.contentEditable=="false"?r--:(t=s,r=sr(t))}else{if(t==n)return!0;r=Fi(t),t=t.parentNode}}function Ix(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Bx(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=sr(t)}else if(t.parentNode&&!hu(t))r=Fi(t),t=t.parentNode;else return null}}function zx(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!hu(t))r=Fi(t)+1,t=t.parentNode;else return null}}class It{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new It(e.parentNode,Fi(e),t)}static after(e,t){return new It(e.parentNode,Fi(e)+1,t)}}const bd=[];class Fe{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,s=null,l;for(let a of this.children){if(a.flags&7){if(!a.dom&&(l=s?s.nextSibling:r.firstChild)){let c=Fe.get(l);(!c||!c.parent&&c.canReuseDOM(a))&&a.reuseDOM(l)}a.sync(e,t),a.flags&=-8}if(l=s?s.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&l!=a.dom&&(t.written=!0),a.dom.parentNode==r)for(;l&&l!=a.dom;)l=c0(l);else r.insertBefore(a.dom,l);s=a.dom}for(l=s?s.nextSibling:r.firstChild,l&&t&&t.node==r&&(t.written=!0);l;)l=c0(l)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let s=sr(e)==0?0:t==0?-1:1;for(;;){let l=e.parentNode;if(l==this.dom)break;s==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?s=-1:s=1),e=l}s<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Fe.get(r);)r=r.nextSibling;if(!r)return this.length;for(let s=0,l=0;;s++){let a=this.children[s];if(a.dom==r)return l;l+=a.length+a.breakAfter}}domBoundsAround(e,t,r=0){let s=-1,l=-1,a=-1,c=-1;for(let h=0,p=r,d=r;h<this.children.length;h++){let m=this.children[h],x=p+m.length;if(p<e&&x>t)return m.domBoundsAround(e,t,p);if(x>=e&&s==-1&&(s=h,l=p),p>t&&m.dom.parentNode==this.dom){a=h,c=d;break}d=x,p=x+m.breakAfter}return{from:l,to:c<0?r+this.length:c,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=bd){this.markDirty();for(let s=e;s<t;s++){let l=this.children[s];l.parent==this&&r.indexOf(l)<0&&l.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let s=0;s<r.length;s++)r[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Fx(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,s,l,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Fe.prototype.breakAfter=0;function c0(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Fx{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function _x(n,e,t,r,s,l,a,c,h){let{children:p}=n,d=p.length?p[e]:null,m=l.length?l[l.length-1]:null,x=m?m.breakAfter:a;if(!(e==r&&d&&!a&&!x&&l.length<2&&d.merge(t,s,l.length?m:null,t==0,c,h))){if(r<p.length){let k=p[r];k&&(s<k.length||k.breakAfter&&(m!=null&&m.breakAfter))?(e==r&&(k=k.split(s),s=0),!x&&m&&k.merge(0,s,m,!0,0,h)?l[l.length-1]=k:((s||k.children.length&&!k.children[0].length)&&k.merge(0,s,null,!1,0,h),l.push(k))):k!=null&&k.breakAfter&&(m?m.breakAfter=1:a=1),r++}for(d&&(d.breakAfter=a,t>0&&(!a&&l.length&&d.merge(t,d.length,l[0],!1,c,0)?d.breakAfter=l.shift().breakAfter:(t<d.length||d.children.length&&d.children[d.children.length-1].length==0)&&d.merge(t,d.length,null,!1,c,0),e++));e<r&&l.length;)if(p[r-1].become(l[l.length-1]))r--,l.pop(),h=l.length?0:c;else if(p[e].become(l[0]))e++,l.shift(),c=l.length?0:h;else break;!l.length&&e&&r<p.length&&!p[e-1].breakAfter&&p[r].merge(0,0,p[e-1],!1,c,h)&&e--,(e<r||l.length)&&n.replaceChildren(e,r,l)}}function Hx(n,e,t,r,s,l){let a=n.childCursor(),{i:c,off:h}=a.findPos(t,1),{i:p,off:d}=a.findPos(e,-1),m=e-t;for(let x of r)m+=x.length;n.length+=m,_x(n,p,d,c,h,r,0,s,l)}const cO=256;class zn extends Fe{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof zn)||this.length-(t-e)+r.length>cO||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new zn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new It(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return hO(this.dom,e,t)}}class Pr extends Fe{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let s of t)s.setParent(this)}setAttrs(e){if(jx(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,s,l,a){return r&&(!(r instanceof Pr&&r.mark.eq(this.mark))||e&&l<=0||t<this.length&&a<=0)?!1:(Hx(this,e,t,r?r.children.slice():[],l-1,a-1),this.markDirty(),!0)}split(e){let t=[],r=0,s=-1,l=0;for(let c of this.children){let h=r+c.length;h>e&&t.push(r<e?c.split(e-r):c),s<0&&r>=e&&(s=l),r=h,l++}let a=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new Pr(this.mark,t,a)}domAtPos(e){return Vx(this,e)}coordsAt(e,t){return Qx(this,e,t)}}function hO(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let s=e,l=e,a=0;e==0&&t<0||e==r&&t>=0?ce.chrome||ce.gecko||(e?(s--,a=1):l<r&&(l++,a=-1)):t<0?s--:l<r&&l++;let c=_i(n,s,l).getClientRects();if(!c.length)return null;let h=c[(a?a<0:t>=0)?0:c.length-1];return ce.safari&&!a&&h.width==0&&(h=Array.prototype.find.call(c,p=>p.width)||h),a?Du(h,a<0):h||null}class ti extends Fe{static create(e,t,r){return new ti(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=ti.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,s,l,a){return r&&(!(r instanceof ti)||!this.widget.compare(r.widget)||e>0&&l<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof ti&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Te.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,s=this.posAtStart;return r?r.slice(s,s+this.length):Te.empty}domAtPos(e){return(this.length?e==0:this.side>0)?It.before(this.dom):It.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let s=this.dom.getClientRects(),l=null;if(!s.length)return null;let a=this.side?this.side<0:e>0;for(let c=a?s.length-1:0;l=s[c],!(e>0?c==0:c==s.length-1||l.top<l.bottom);c+=a?-1:1);return Du(l,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Cs extends Fe{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Cs&&e.side==this.side}split(){return new Cs(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?It.before(this.dom):It.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Te.empty}get isHidden(){return!0}}zn.prototype.children=ti.prototype.children=Cs.prototype.children=bd;function Vx(n,e){let t=n.dom,{children:r}=n,s=0;for(let l=0;s<r.length;s++){let a=r[s],c=l+a.length;if(!(c==l&&a.getSide()<=0)){if(e>l&&e<c&&a.dom.parentNode==t)return a.domAtPos(e-l);if(e<=l)break;l=c}}for(let l=s;l>0;l--){let a=r[l-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let l=s;l<r.length;l++){let a=r[l];if(a.dom.parentNode==t)return a.domAtPos(0)}return new It(t,0)}function Wx(n,e,t){let r,{children:s}=n;t>0&&e instanceof Pr&&s.length&&(r=s[s.length-1])instanceof Pr&&r.mark.eq(e.mark)?Wx(r,e.children[0],t-1):(s.push(e),e.setParent(n)),n.length+=e.length}function Qx(n,e,t){let r=null,s=-1,l=null,a=-1;function c(p,d){for(let m=0,x=0;m<p.children.length&&x<=d;m++){let k=p.children[m],b=x+k.length;b>=d&&(k.children.length?c(k,d-x):(!l||l.isHidden&&(t>0||dO(l,k)))&&(b>d||x==b&&k.getSide()>0)?(l=k,a=d-x):(x<d||x==b&&k.getSide()<0&&!k.isHidden)&&(r=k,s=d-x)),x=b}}c(n,e);let h=(t<0?r:l)||r||l;return h?h.coordsAt(Math.max(0,h==r?s:a),t):fO(n)}function fO(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Jo(e);return t[t.length-1]||null}function dO(n,e){let t=n.coordsAt(0,1),r=e.coordsAt(0,1);return t&&r&&r.top<t.bottom}function Mf(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const h0=Object.create(null);function fu(n,e,t){if(n==e)return!0;n||(n=h0),e||(e=h0);let r=Object.keys(n),s=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let l of r)if(l!=t&&(s.indexOf(l)==-1||n[l]!==e[l]))return!1;return!0}function Tf(n,e,t){let r=!1;if(e)for(let s in e)t&&s in t||(r=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(r=!0,s=="style"?n.style.cssText=t[s]:n.setAttribute(s,t[s]));return r}function pO(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class ul{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var $t=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})($t||($t={}));class tt extends Os{constructor(e,t,r,s){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=s}get heightRelevant(){return!1}static mark(e){return new cl(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new ai(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,s;if(e.isBlockGap)r=-5e8,s=4e8;else{let{start:l,end:a}=$x(e,t);r=(l?t?-3e8:-1:5e8)-1,s=(a?t?2e8:1:-6e8)+1}return new ai(e,r,s,t,e.widget||null,!0)}static line(e){return new hl(e)}static set(e,t=!1){return Be.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}tt.none=Be.empty;class cl extends tt{constructor(e){let{start:t,end:r}=$x(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof cl&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&fu(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}cl.prototype.point=!1;class hl extends tt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof hl&&this.spec.class==e.spec.class&&fu(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}hl.prototype.mapMode=fn.TrackBefore;hl.prototype.point=!0;class ai extends tt{constructor(e,t,r,s,l,a){super(t,r,l,e),this.block=s,this.isReplace=a,this.mapMode=s?t<=0?fn.TrackBefore:fn.TrackAfter:fn.TrackDel}get type(){return this.startSide!=this.endSide?$t.WidgetRange:this.startSide<=0?$t.WidgetBefore:$t.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ai&&gO(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}ai.prototype.point=!0;function $x(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function gO(n,e){return n==e||!!(n&&e&&n.compare(e))}function qa(n,e,t,r=0){let s=t.length-1;s>=0&&t[s]+r>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class ct extends Fe{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,s,l,a){if(r){if(!(r instanceof ct))return!1;this.dom||r.transferDOM(this)}return s&&this.setDeco(r?r.attrs:null),Hx(this,e,t,r?r.children.slice():[],l,a),!0}split(e){let t=new ct;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:s}=this.childPos(e);s&&(t.append(this.children[r].split(s),0),this.children[r].merge(s,this.children[r].length,null,!1,0,0),r++);for(let l=r;l<this.children.length;l++)t.append(this.children[l],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){fu(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Wx(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=Mf(t,this.attrs||{})),r&&(this.attrs=Mf({class:r},this.attrs||{}))}domAtPos(e){return Vx(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(jx(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Tf(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&Fe.get(s)instanceof Pr;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((r=Fe.get(s))===null||r===void 0?void 0:r.isEditable)==!1&&(!ce.ios||!this.children.some(l=>l instanceof zn))){let l=document.createElement("BR");l.cmIgnore=!0,this.dom.appendChild(l)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof zn)||/[^ -~]/.test(r.text))return null;let s=Jo(r.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=Qx(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:s}=this.parent.view.viewState,l=r.bottom-r.top;if(Math.abs(l-s.lineHeight)<2&&s.textHeight<l){let a=(l-s.textHeight)/2;return{top:r.top+a,bottom:r.bottom-a,left:r.left,right:r.left}}}return r}become(e){return e instanceof ct&&this.children.length==0&&e.children.length==0&&fu(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,s=0;r<e.children.length;r++){let l=e.children[r],a=s+l.length;if(a>=t){if(l instanceof ct)return l;if(a>t)break}s=a+l.breakAfter}return null}}class Cr extends Fe{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,s,l,a){return r&&(!(r instanceof Cr)||!this.widget.compare(r.widget)||e>0&&l<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?It.before(this.dom):It.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new Cr(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return bd}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Te.empty}domBoundsAround(){return null}become(e){return e instanceof Cr&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof Df?null:Du(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class Df extends ul{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Fo{constructor(e,t,r,s){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Cr&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ct),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Ea(new Cs(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Cr)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:c,done:h}=this.cursor.next(this.skip);if(this.skip=0,h)throw new Error("Ran out of text content when drawing inline views");if(c){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e),l=Math.min(s,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(Ea(new zn(this.text.slice(this.textOff,this.textOff+l)),t),r),this.atCursorPos=!0,this.textOff+=l,e-=l,r=s<=l?0:t.length}}span(e,t,r,s){this.buildText(t-e,r,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,r,s,l,a){if(this.disallowBlockEffectsFor[a]&&r instanceof ai){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let c=t-e;if(r instanceof ai)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Cr(r.widget||Ps.block,c,r));else{let h=ti.create(r.widget||Ps.inline,c,c?0:r.startSide),p=this.atCursorPos&&!h.isEditable&&l<=s.length&&(e<t||r.startSide>0),d=!h.isEditable&&(e<t||l>s.length||r.startSide<=0),m=this.getLine();this.pendingBuffer==2&&!p&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),p&&(m.append(Ea(new Cs(1),s),l),l=s.length+Math.max(0,l-s.length)),m.append(Ea(h,s),l),this.atCursorPos=d,this.pendingBuffer=d?e<t||l>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);c&&(this.textOff+c<=this.text.length?this.textOff+=c:(this.skip+=c-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=l)}static build(e,t,r,s,l){let a=new Fo(e,t,r,l);return a.openEnd=Be.spans(s,t,r,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function Ea(n,e){for(let t of e)n=new Pr(t,[n],n.length);return n}class Ps extends ul{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ps.inline=new Ps("span");Ps.block=new Ps("div");var et=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(et||(et={}));const Hi=et.LTR,Sd=et.RTL;function Ux(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const mO=Ux("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),yO=Ux("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Lf=Object.create(null),Gn=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Lf[e]=t,Lf[t]=-e}function Xx(n){return n<=247?mO[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?yO[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const xO=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ni{get dir(){return this.level%2?Sd:Hi}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,s){let l=-1;for(let a=0;a<e.length;a++){let c=e[a];if(c.from<=t&&c.to>=t){if(c.level==r)return a;(l<0||(s!=0?s<0?c.from<t:c.to>t:e[l].level>c.level))&&(l=a)}}if(l<0)throw new RangeError("Index out of range");return l}}function Kx(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],s=e[t];if(r.from!=s.from||r.to!=s.to||r.direction!=s.direction||!Kx(r.inner,s.inner))return!1}return!0}const He=[];function vO(n,e,t,r,s){for(let l=0;l<=r.length;l++){let a=l?r[l-1].to:e,c=l<r.length?r[l].from:t,h=l?256:s;for(let p=a,d=h,m=h;p<c;p++){let x=Xx(n.charCodeAt(p));x==512?x=d:x==8&&m==4&&(x=16),He[p]=x==4?2:x,x&7&&(m=x),d=x}for(let p=a,d=h,m=h;p<c;p++){let x=He[p];if(x==128)p<c-1&&d==He[p+1]&&d&24?x=He[p]=d:He[p]=256;else if(x==64){let k=p+1;for(;k<c&&He[k]==64;)k++;let b=p&&d==8||k<t&&He[k]==8?m==1?1:8:256;for(let S=p;S<k;S++)He[S]=b;p=k-1}else x==8&&m==1&&(He[p]=1);d=x,x&7&&(m=x)}}}function kO(n,e,t,r,s){let l=s==1?2:1;for(let a=0,c=0,h=0;a<=r.length;a++){let p=a?r[a-1].to:e,d=a<r.length?r[a].from:t;for(let m=p,x,k,b;m<d;m++)if(k=Lf[x=n.charCodeAt(m)])if(k<0){for(let S=c-3;S>=0;S-=3)if(Gn[S+1]==-k){let C=Gn[S+2],P=C&2?s:C&4?C&1?l:s:0;P&&(He[m]=He[Gn[S]]=P),c=S;break}}else{if(Gn.length==189)break;Gn[c++]=m,Gn[c++]=x,Gn[c++]=h}else if((b=He[m])==2||b==1){let S=b==s;h=S?0:1;for(let C=c-3;C>=0;C-=3){let P=Gn[C+2];if(P&2)break;if(S)Gn[C+2]|=2;else{if(P&4)break;Gn[C+2]|=4}}}}}function wO(n,e,t,r){for(let s=0,l=r;s<=t.length;s++){let a=s?t[s-1].to:n,c=s<t.length?t[s].from:e;for(let h=a;h<c;){let p=He[h];if(p==256){let d=h+1;for(;;)if(d==c){if(s==t.length)break;d=t[s++].to,c=s<t.length?t[s].from:e}else if(He[d]==256)d++;else break;let m=l==1,x=(d<e?He[d]:r)==1,k=m==x?m?1:2:r;for(let b=d,S=s,C=S?t[S-1].to:n;b>h;)b==C&&(b=t[--S].from,C=S?t[S-1].to:n),He[--b]=k;h=d}else l=p,h++}}}function jf(n,e,t,r,s,l,a){let c=r%2?2:1;if(r%2==s%2)for(let h=e,p=0;h<t;){let d=!0,m=!1;if(p==l.length||h<l[p].from){let S=He[h];S!=c&&(d=!1,m=S==16)}let x=!d&&c==1?[]:null,k=d?r:r+1,b=h;e:for(;;)if(p<l.length&&b==l[p].from){if(m)break e;let S=l[p];if(!d)for(let C=S.to,P=p+1;;){if(C==t)break e;if(P<l.length&&l[P].from==C)C=l[P++].to;else{if(He[C]==c)break e;break}}if(p++,x)x.push(S);else{S.from>h&&a.push(new ni(h,S.from,k));let C=S.direction==Hi!=!(k%2);If(n,C?r+1:r,s,S.inner,S.from,S.to,a),h=S.to}b=S.to}else{if(b==t||(d?He[b]!=c:He[b]==c))break;b++}x?jf(n,h,b,r+1,s,x,a):h<b&&a.push(new ni(h,b,k)),h=b}else for(let h=t,p=l.length;h>e;){let d=!0,m=!1;if(!p||h>l[p-1].to){let S=He[h-1];S!=c&&(d=!1,m=S==16)}let x=!d&&c==1?[]:null,k=d?r:r+1,b=h;e:for(;;)if(p&&b==l[p-1].to){if(m)break e;let S=l[--p];if(!d)for(let C=S.from,P=p;;){if(C==e)break e;if(P&&l[P-1].to==C)C=l[--P].from;else{if(He[C-1]==c)break e;break}}if(x)x.push(S);else{S.to<h&&a.push(new ni(S.to,h,k));let C=S.direction==Hi!=!(k%2);If(n,C?r+1:r,s,S.inner,S.from,S.to,a),h=S.from}b=S.from}else{if(b==e||(d?He[b-1]!=c:He[b-1]==c))break;b--}x?jf(n,b,h,r+1,s,x,a):b<h&&a.push(new ni(b,h,k)),h=b}}function If(n,e,t,r,s,l,a){let c=e%2?2:1;vO(n,s,l,r,c),kO(n,s,l,r,c),wO(s,l,r,c),jf(n,s,l,e,t,r,a)}function bO(n,e,t){if(!n)return[new ni(0,0,e==Sd?1:0)];if(e==Hi&&!t.length&&!xO.test(n))return qx(n.length);if(t.length)for(;n.length>He.length;)He[He.length]=256;let r=[],s=e==Hi?0:1;return If(n,s,s,t,0,n.length,r),r}function qx(n){return[new ni(0,n,0)]}let Yx="";function SO(n,e,t,r,s){var l;let a=r.head-n.from,c=ni.find(e,a,(l=r.bidiLevel)!==null&&l!==void 0?l:-1,r.assoc),h=e[c],p=h.side(s,t);if(a==p){let x=c+=s?1:-1;if(x<0||x>=e.length)return null;h=e[c=x],a=h.side(!s,t),p=h.side(s,t)}let d=Qt(n.text,a,h.forward(s,t));(d<h.from||d>h.to)&&(d=p),Yx=n.text.slice(Math.min(a,d),Math.max(a,d));let m=c==(s?e.length-1:0)?null:e[c+(s?1:-1)];return m&&d==p&&m.level+(s?0:1)<h.level?se.cursor(m.side(!s,t)+n.from,m.forward(s,t)?1:-1,m.level):se.cursor(d+n.from,h.forward(s,t)?-1:1,h.level)}function OO(n,e,t){for(let r=e;r<t;r++){let s=Xx(n.charCodeAt(r));if(s==1)return Hi;if(s==2||s==4)return Sd}return Hi}const Gx=ke.define(),Jx=ke.define(),Zx=ke.define(),ev=ke.define(),Bf=ke.define(),tv=ke.define(),nv=ke.define(),Od=ke.define(),Cd=ke.define(),rv=ke.define({combine:n=>n.some(e=>e)}),iv=ke.define({combine:n=>n.some(e=>e)}),sv=ke.define();class ws{constructor(e,t="nearest",r="nearest",s=5,l=5,a=!1){this.range=e,this.y=t,this.x=r,this.yMargin=s,this.xMargin=l,this.isSnapshot=a}map(e){return e.empty?this:new ws(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ws(se.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Aa=mt.define({map:(n,e)=>n.map(e)}),ov=mt.define();function rr(n,e,t){let r=n.facet(ev);r.length?r[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const br=ke.define({combine:n=>n.length?n[0]:!0});let CO=0;const ps=ke.define({combine(n){return n.filter((e,t)=>{for(let r=0;r<t;r++)if(n[r].plugin==e.plugin)return!1;return!0})}});class Fn{constructor(e,t,r,s,l){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=s,this.baseExtensions=l(this),this.extension=this.baseExtensions.concat(ps.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(ps.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:r,eventObservers:s,provide:l,decorations:a}=t||{};return new Fn(CO++,e,r,s,c=>{let h=[];return a&&h.push(Zo.of(p=>{let d=p.plugin(c);return d?a(d):tt.none})),l&&h.push(l(c)),h})}static fromClass(e,t){return Fn.define((r,s)=>new e(r,s),t)}}class zh{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(rr(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){rr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){rr(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const lv=ke.define(),Pd=ke.define(),Zo=ke.define(),av=ke.define(),fl=ke.define(),uv=ke.define();function f0(n,e){let t=n.state.facet(uv);if(!t.length)return t;let r=t.map(l=>l instanceof Function?l(n):l),s=[];return Be.spans(r,e.from,e.to,{point(){},span(l,a,c,h){let p=l-e.from,d=a-e.from,m=s;for(let x=c.length-1;x>=0;x--,h--){let k=c[x].spec.bidiIsolate,b;if(k==null&&(k=OO(e.text,p,d)),h>0&&m.length&&(b=m[m.length-1]).to==p&&b.direction==k)b.to=d,m=b.inner;else{let S={from:p,to:d,direction:k,inner:[]};m.push(S),m=S.inner}}}}),s}const cv=ke.define();function hv(n){let e=0,t=0,r=0,s=0;for(let l of n.state.facet(cv)){let a=l(n);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(r=Math.max(r,a.top)),a.bottom!=null&&(s=Math.max(s,a.bottom)))}return{left:e,right:t,top:r,bottom:s}}const Eo=ke.define();class wn{constructor(e,t,r,s){this.fromA=e,this.toA=t,this.fromB=r,this.toB=s}join(e){return new wn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>r.toA)){if(s.toA<r.fromA)break;r=r.join(s),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let s=0,l=0,a=0,c=0;;s++){let h=s==e.length?null:e[s],p=a-c,d=h?h.fromB:1e9;for(;l<t.length&&t[l]<d;){let m=t[l],x=t[l+1],k=Math.max(c,m),b=Math.min(d,x);if(k<=b&&new wn(k+p,b+p,k,b).addToSet(r),x>d)break;l+=2}if(!h)return r;new wn(h.fromA,h.toA,h.fromB,h.toB).addToSet(r),a=h.toA,c=h.toB}}}class du{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=wt.empty(this.startState.doc.length);for(let l of r)this.changes=this.changes.compose(l.changes);let s=[];this.changes.iterChangedRanges((l,a,c,h)=>s.push(new wn(l,a,c,h))),this.changedRanges=s}static create(e,t,r){return new du(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class d0 extends Fe{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=tt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ct],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new wn(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:p,toA:d})=>d<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!TO(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let l=s>-1?NO(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:p,to:d}=this.hasComposition;r=new wn(p,d,e.changes.mapPos(p,-1),e.changes.mapPos(d,1)).addToSet(r.slice())}this.hasComposition=l?{from:l.range.fromB,to:l.range.toB}:null,(ce.ie||ce.chrome)&&!l&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,c=this.updateDeco(),h=RO(a,c,e.changes);return r=wn.extendWithRanges(r,h),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,l),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=ce.chrome||ce.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||s.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let l=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof Cr&&a.widget instanceof Df&&l.push(a.dom);s.updateGaps(l)}updateChildren(e,t,r){let s=r?r.range.addToSet(e.slice()):e,l=this.childCursor(t);for(let a=s.length-1;;a--){let c=a>=0?s[a]:null;if(!c)break;let{fromA:h,toA:p,fromB:d,toB:m}=c,x,k,b,S;if(r&&r.range.fromB<m&&r.range.toB>d){let B=Fo.build(this.view.state.doc,d,r.range.fromB,this.decorations,this.dynamicDecorationMap),L=Fo.build(this.view.state.doc,r.range.toB,m,this.decorations,this.dynamicDecorationMap);k=B.breakAtStart,b=B.openStart,S=L.openEnd;let F=this.compositionView(r);L.breakAtStart?F.breakAfter=1:L.content.length&&F.merge(F.length,F.length,L.content[0],!1,L.openStart,0)&&(F.breakAfter=L.content[0].breakAfter,L.content.shift()),B.content.length&&F.merge(0,0,B.content[B.content.length-1],!0,0,B.openEnd)&&B.content.pop(),x=B.content.concat(F).concat(L.content)}else({content:x,breakAtStart:k,openStart:b,openEnd:S}=Fo.build(this.view.state.doc,d,m,this.decorations,this.dynamicDecorationMap));let{i:C,off:P}=l.findPos(p,1),{i:M,off:T}=l.findPos(h,-1);_x(this,M,T,C,P,x,k,b,S)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(ov)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new zn(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new Pr(s,[t],t.length);let r=new ct;return r.append(t,0),r}fixCompositionDOM(e){let t=(l,a)=>{a.flags|=8|(a.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(a);let c=Fe.get(l);c&&c!=a&&(c.dom=null),a.setDOM(l)},r=this.childPos(e.range.fromB,1),s=this.children[r.i];t(e.line,s);for(let l=e.marks.length-1;l>=-1;l--)r=s.childPos(r.off,1),s=s.children[r.i],t(l>=0?e.marks[l].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,s=r==this.dom,l=!s&&!(this.view.state.facet(br)||this.dom.tabIndex>-1)&&Ka(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(s||t||l))return;let a=this.forceSelection;this.forceSelection=!1;let c=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(c.anchor)),p=c.empty?h:this.moveToLine(this.domAtPos(c.head));if(ce.gecko&&c.empty&&!this.hasComposition&&PO(h)){let m=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(m,h.node.childNodes[h.offset]||null)),h=p=new It(m,0),a=!0}let d=this.view.observer.selectionRange;(a||!d.focusNode||(!zo(h.node,h.offset,d.anchorNode,d.anchorOffset)||!zo(p.node,p.offset,d.focusNode,d.focusOffset))&&!this.suppressWidgetCursorChange(d,c))&&(this.view.observer.ignore(()=>{ce.android&&ce.chrome&&this.dom.contains(d.focusNode)&&MO(d.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let m=Go(this.view.root);if(m)if(c.empty){if(ce.gecko){let x=EO(h.node,h.offset);if(x&&x!=3){let k=(x==1?Bx:zx)(h.node,h.offset);k&&(h=new It(k.node,k.offset))}}m.collapse(h.node,h.offset),c.bidiLevel!=null&&m.caretBidiLevel!==void 0&&(m.caretBidiLevel=c.bidiLevel)}else if(m.extend){m.collapse(h.node,h.offset);try{m.extend(p.node,p.offset)}catch{}}else{let x=document.createRange();c.anchor>c.head&&([h,p]=[p,h]),x.setEnd(p.node,p.offset),x.setStart(h.node,h.offset),m.removeAllRanges(),m.addRange(x)}l&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(h,p)),this.impreciseAnchor=h.precise?null:new It(d.anchorNode,d.anchorOffset),this.impreciseHead=p.precise?null:new It(d.focusNode,d.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&zo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=Go(e.root),{anchorNode:s,anchorOffset:l}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let a=ct.find(this,t.head);if(!a)return;let c=a.posAtStart;if(t.head==c||t.head==c+a.length)return;let h=this.coordsAt(t.head,-1),p=this.coordsAt(t.head,1);if(!h||!p||h.bottom>p.top)return;let d=this.domAtPos(t.head+t.assoc);r.collapse(d.node,d.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let m=e.observer.selectionRange;e.docView.posFromDOM(m.anchorNode,m.anchorOffset)!=t.from&&r.collapse(s,l)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let s=e.offset;!r&&s<t.childNodes.length;s++){let l=Fe.get(t.childNodes[s]);l instanceof ct&&(r=l.domAtPos(0))}for(let s=e.offset-1;!r&&s>=0;s--){let l=Fe.get(t.childNodes[s]);l instanceof ct&&(r=l.domAtPos(l.length))}return r?new It(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=Fe.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(r<s.length||s instanceof ct)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,s=0;for(let l=this.length,a=this.children.length-1;a>=0;a--){let c=this.children[a],h=l-c.breakAfter,p=h-c.length;if(h<e)break;if(p<=e&&(p<e||c.covers(-1))&&(h>e||c.covers(1))&&(!r||c instanceof ct&&!(r instanceof ct&&t>=0)))r=c,s=p;else if(r&&p==e&&h==e&&c instanceof Cr&&Math.abs(t)<2){if(c.deco.startSide<0)break;a&&(r=null)}l=p}return r?r.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),s=this.children[t];if(!(s instanceof ct))return null;for(;s.children.length;){let{i:c,off:h}=s.childPos(r,1);for(;;c++){if(c==s.children.length)return null;if((s=s.children[c]).length)break}r=h}if(!(s instanceof zn))return null;let l=Qt(s.text,r);if(l==r)return null;let a=_i(s.dom,r,l).getClientRects();for(let c=0;c<a.length;c++){let h=a[c];if(c==a.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:s}=e,l=this.view.contentDOM.clientWidth,a=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,h=this.view.textDirection==et.LTR;for(let p=0,d=0;d<this.children.length;d++){let m=this.children[d],x=p+m.length;if(x>s)break;if(p>=r){let k=m.dom.getBoundingClientRect();if(t.push(k.height),a){let b=m.dom.lastChild,S=b?Jo(b):[];if(S.length){let C=S[S.length-1],P=h?C.right-k.left:k.right-C.left;P>c&&(c=P,this.minWidth=l,this.minWidthFrom=p,this.minWidthTo=x)}}}p=x+m.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?et.RTL:et.LTR}measureTextSize(){for(let l of this.children)if(l instanceof ct){let a=l.measureTextSize();if(a)return a}let e=document.createElement("div"),t,r,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let l=Jo(e.firstChild)[0];t=e.getBoundingClientRect().height,r=l?l.width/27:7,s=l?l.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Fx(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,s=0;;s++){let l=s==t.viewports.length?null:t.viewports[s],a=l?l.from-1:this.length;if(a>r){let c=(t.lineBlockAt(a).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(tt.replace({widget:new Df(c),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!l)break;r=l.to+1}return tt.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Zo).map(l=>(this.dynamicDecorationMap[e++]=typeof l=="function")?l(this.view):l),r=!1,s=this.view.state.facet(av).map((l,a)=>{let c=typeof l=="function";return c&&(r=!0),c?l(this.view):l});for(s.length&&(this.dynamicDecorationMap[e++]=r,t.push(Be.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let p=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=p.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let p of this.view.state.facet(sv))try{if(p(this.view,e.range,e))return!0}catch(d){rr(this.view.state,d,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!r)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,s.left),top:Math.min(r.top,s.top),right:Math.max(r.right,s.right),bottom:Math.max(r.bottom,s.bottom)});let l=hv(this.view),a={left:r.left-l.left,top:r.top-l.top,right:r.right+l.right,bottom:r.bottom+l.bottom},{offsetWidth:c,offsetHeight:h}=this.view.scrollDOM;sO(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,c),-c),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==et.LTR)}lineHasWidget(e){let{i:t}=this.childCursor().findPos(e);if(t==this.children.length)return!1;let r=s=>s instanceof ti||s.children.some(r);return r(this.children[t])}}function PO(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function fv(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=Bx(t.focusNode,t.focusOffset),s=zx(t.focusNode,t.focusOffset),l=r||s;if(s&&r&&s.node!=r.node){let c=Fe.get(s.node);if(!c||c instanceof zn&&c.text!=s.node.nodeValue)l=s;else if(n.docView.lastCompositionAfterCursor){let h=Fe.get(r.node);!h||h instanceof zn&&h.text!=r.node.nodeValue||(l=s)}}if(n.docView.lastCompositionAfterCursor=l!=r,!l)return null;let a=e-l.offset;return{from:a,to:a+l.node.nodeValue.length,node:l.node}}function NO(n,e,t){let r=fv(n,t);if(!r)return null;let{node:s,from:l,to:a}=r,c=s.nodeValue;if(/[\n\r]/.test(c)||n.state.doc.sliceString(r.from,r.to)!=c)return null;let h=e.invertedDesc,p=new wn(h.mapPos(l),h.mapPos(a),l,a),d=[];for(let m=s.parentNode;;m=m.parentNode){let x=Fe.get(m);if(x instanceof Pr)d.push({node:m,deco:x.mark});else{if(x instanceof ct||m.nodeName=="DIV"&&m.parentNode==n.contentDOM)return{range:p,text:s,marks:d,line:m};if(m!=n.contentDOM)d.push({node:m,deco:new cl({inclusive:!0,attributes:pO(m),tagName:m.tagName.toLowerCase()})});else return null}}}function EO(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let AO=class{constructor(){this.changes=[]}compareRange(e,t){qa(e,t,this.changes)}comparePoint(e,t){qa(e,t,this.changes)}boundChange(e){qa(e,e,this.changes)}};function RO(n,e,t){let r=new AO;return Be.compare(n,e,t,r),r.changes}function MO(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function TO(n,e){let t=!1;return e&&n.iterChangedRanges((r,s)=>{r<e.to&&s>e.from&&(t=!0)}),t}function DO(n,e,t=1){let r=n.charCategorizer(e),s=n.doc.lineAt(e),l=e-s.from;if(s.length==0)return se.cursor(e);l==0?t=1:l==s.length&&(t=-1);let a=l,c=l;t<0?a=Qt(s.text,l,!1):c=Qt(s.text,l);let h=r(s.text.slice(a,c));for(;a>0;){let p=Qt(s.text,a,!1);if(r(s.text.slice(p,a))!=h)break;a=p}for(;c<s.length;){let p=Qt(s.text,c);if(r(s.text.slice(c,p))!=h)break;c=p}return se.range(a+s.from,c+s.from)}function LO(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function jO(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Fh(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function p0(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function g0(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function zf(n,e,t){let r,s,l,a,c=!1,h,p,d,m;for(let b=n.firstChild;b;b=b.nextSibling){let S=Jo(b);for(let C=0;C<S.length;C++){let P=S[C];s&&Fh(s,P)&&(P=p0(g0(P,s.bottom),s.top));let M=LO(e,P),T=jO(t,P);if(M==0&&T==0)return b.nodeType==3?m0(b,e,t):zf(b,e,t);(!r||a>T||a==T&&l>M)&&(r=b,s=P,l=M,a=T,c=M?e<P.left?C>0:C<S.length-1:!0),M==0?t>P.bottom&&(!d||d.bottom<P.bottom)?(h=b,d=P):t<P.top&&(!m||m.top>P.top)&&(p=b,m=P):d&&Fh(d,P)?d=g0(d,P.bottom):m&&Fh(m,P)&&(m=p0(m,P.top))}}if(d&&d.bottom>=t?(r=h,s=d):m&&m.top<=t&&(r=p,s=m),!r)return{node:n,offset:0};let x=Math.max(s.left,Math.min(s.right,e));if(r.nodeType==3)return m0(r,x,t);if(c&&r.contentEditable!="false")return zf(r,x,t);let k=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:k}}function m0(n,e,t){let r=n.nodeValue.length,s=-1,l=1e9,a=0;for(let c=0;c<r;c++){let h=_i(n,c,c+1).getClientRects();for(let p=0;p<h.length;p++){let d=h[p];if(d.top==d.bottom)continue;a||(a=e-d.left);let m=(d.top>t?d.top-t:t-d.bottom)-1;if(d.left-1<=e&&d.right+1>=e&&m<l){let x=e>=(d.left+d.right)/2,k=x;if(ce.chrome||ce.gecko){let b=_i(n,c).getBoundingClientRect();Math.abs(b.left-d.right)<.1&&(k=!x)}if(m<=0)return{node:n,offset:c+(k?1:0)};s=c+(k?1:0),l=m}}}return{node:n,offset:s>-1?s:a>0?n.nodeValue.length:0}}function dv(n,e,t,r=-1){var s,l;let a=n.contentDOM.getBoundingClientRect(),c=a.top+n.viewState.paddingTop,h,{docHeight:p}=n.viewState,{x:d,y:m}=e,x=m-c;if(x<0)return 0;if(x>p)return n.state.doc.length;for(let B=n.viewState.heightOracle.textHeight/2,L=!1;h=n.elementAtHeight(x),h.type!=$t.Text;)for(;x=r>0?h.bottom+B:h.top-B,!(x>=0&&x<=p);){if(L)return t?null:0;L=!0,r=-r}m=c+x;let k=h.from;if(k<n.viewport.from)return n.viewport.from==0?0:t?null:y0(n,a,h,d,m);if(k>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:y0(n,a,h,d,m);let b=n.dom.ownerDocument,S=n.root.elementFromPoint?n.root:b,C=S.elementFromPoint(d,m);C&&!n.contentDOM.contains(C)&&(C=null),C||(d=Math.max(a.left+1,Math.min(a.right-1,d)),C=S.elementFromPoint(d,m),C&&!n.contentDOM.contains(C)&&(C=null));let P,M=-1;if(C&&((s=n.docView.nearest(C))===null||s===void 0?void 0:s.isEditable)!=!1){if(b.caretPositionFromPoint){let B=b.caretPositionFromPoint(d,m);B&&({offsetNode:P,offset:M}=B)}else if(b.caretRangeFromPoint){let B=b.caretRangeFromPoint(d,m);B&&({startContainer:P,startOffset:M}=B)}P&&(!n.contentDOM.contains(P)||ce.safari&&IO(P,M,d)||ce.chrome&&BO(P,M,d))&&(P=void 0),P&&(M=Math.min(sr(P),M))}if(!P||!n.docView.dom.contains(P)){let B=ct.find(n.docView,k);if(!B)return x>h.top+h.height/2?h.to:h.from;({node:P,offset:M}=zf(B.dom,d,m))}let T=n.docView.nearest(P);if(!T)return null;if(T.isWidget&&((l=T.dom)===null||l===void 0?void 0:l.nodeType)==1){let B=T.dom.getBoundingClientRect();return e.y<B.top||e.y<=B.bottom&&e.x<=(B.left+B.right)/2?T.posAtStart:T.posAtEnd}else return T.localPosFromDOM(P,M)+T.posAtStart}function y0(n,e,t,r,s){let l=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let c=n.viewState.heightOracle.textHeight,h=Math.floor((s-t.top-(n.defaultLineHeight-c)*.5)/c);l+=h*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(t.from,t.to);return t.from+J2(a,l,n.state.tabSize)}function pv(n,e,t){let r,s=n;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(;;){let l=s.nextSibling;if(l){if(l.nodeName=="BR")break;return!1}else{let a=s.parentNode;if(!a||a.nodeName=="DIV")break;s=a}}return _i(n,r-1,r).getBoundingClientRect().right>t}function IO(n,e,t){return pv(n,e,t)}function BO(n,e,t){if(e!=0)return pv(n,e,t);for(let s=n;;){let l=s.parentNode;if(!l||l.nodeType!=1||l.firstChild!=s)return!1;if(l.classList.contains("cm-line"))break;s=l}let r=n.nodeType==1?n.getBoundingClientRect():_i(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function Ff(n,e,t){let r=n.lineBlockAt(e);if(Array.isArray(r.type)){let s;for(let l of r.type){if(l.from>e)break;if(!(l.to<e)){if(l.from<e&&l.to>e)return l;(!s||l.type==$t.Text&&(s.type!=l.type||(t<0?l.from<e:l.to>e)))&&(s=l)}}return s||r}return r}function zO(n,e,t,r){let s=Ff(n,e.head,e.assoc||-1),l=!r||s.type!=$t.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(l){let a=n.dom.getBoundingClientRect(),c=n.textDirectionAt(s.from),h=n.posAtCoords({x:t==(c==et.LTR)?a.right-1:a.left+1,y:(l.top+l.bottom)/2});if(h!=null)return se.cursor(h,t?-1:1)}return se.cursor(t?s.to:s.from,t?-1:1)}function x0(n,e,t,r){let s=n.state.doc.lineAt(e.head),l=n.bidiSpans(s),a=n.textDirectionAt(s.from);for(let c=e,h=null;;){let p=SO(s,l,a,c,t),d=Yx;if(!p){if(s.number==(t?n.state.doc.lines:1))return c;d=`
`,s=n.state.doc.line(s.number+(t?1:-1)),l=n.bidiSpans(s),p=n.visualLineSide(s,!t)}if(h){if(!h(d))return c}else{if(!r)return p;h=r(d)}c=p}}function FO(n,e,t){let r=n.state.charCategorizer(e),s=r(t);return l=>{let a=r(l);return s==Sr.Space&&(s=a),s==a}}function _O(n,e,t,r){let s=e.head,l=t?1:-1;if(s==(t?n.state.doc.length:0))return se.cursor(s,e.assoc);let a=e.goalColumn,c,h=n.contentDOM.getBoundingClientRect(),p=n.coordsAtPos(s,e.assoc||-1),d=n.documentTop;if(p)a==null&&(a=p.left-h.left),c=l<0?p.top:p.bottom;else{let k=n.viewState.lineBlockAt(s);a==null&&(a=Math.min(h.right-h.left,n.defaultCharacterWidth*(s-k.from))),c=(l<0?k.top:k.bottom)+d}let m=h.left+a,x=r??n.viewState.heightOracle.textHeight>>1;for(let k=0;;k+=10){let b=c+(x+k)*l,S=dv(n,{x:m,y:b},!1,l);if(b<h.top||b>h.bottom||(l<0?S<s:S>s)){let C=n.docView.coordsForChar(S),P=!C||b<C.top?-1:1;return se.cursor(S,P,void 0,a)}}}function _o(n,e,t){for(;;){let r=0;for(let s of n)s.between(e-1,e+1,(l,a,c)=>{if(e>l&&e<a){let h=r||t||(e-l<a-e?-1:1);e=h<0?l:a,r=h}});if(!r)return e}}function gv(n,e){let t=null;for(let r=0;r<e.ranges.length;r++){let s=e.ranges[r],l=null;if(s.empty){let a=_o(n,s.from,0);a!=s.from&&(l=se.cursor(a,-1))}else{let a=_o(n,s.from,-1),c=_o(n,s.to,1);(a!=s.from||c!=s.to)&&(l=se.range(s.from==s.anchor?a:c,s.from==s.head?a:c))}l&&(t||(t=e.ranges.slice()),t[r]=l)}return t?se.create(t,e.mainIndex):e}function _h(n,e,t){let r=_o(n.state.facet(fl).map(s=>s(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:se.cursor(r,r<t.from?1:-1)}const Ao="";class HO{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(je.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ao}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let s=e;;){this.findPointBefore(r,s);let l=this.text.length;this.readNode(s);let a=s.nextSibling;if(a==t)break;let c=Fe.get(s),h=Fe.get(a);(c&&h?c.breakAfter:(c?c.breakAfter:hu(s))||hu(a)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>l)&&!WO(a,t)&&this.lineBreak(),s=a}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,a=1,c;if(this.lineSeparator?(l=t.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(c=s.exec(t))&&(l=c.index,a=c[0].length),this.append(t.slice(r,l<0?t.length:l)),l<0)break;if(this.lineBreak(),a>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=a-1);r=l+a}}readNode(e){if(e.cmIgnore)return;let t=Fe.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let s=r.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(VO(e,r.node,r.offset)?t:0))}}function VO(n,e,t){for(;;){if(!e||t<sr(e))return!1;if(e==n)return!0;t=Fi(e)+1,e=e.parentNode}}function WO(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let r=Fe.get(n);if(!(r!=null&&r.isWidget||n.cmIgnore))return!1;r&&(t||(t=[])).push(r)}if(t)for(let r of t){let s=r.overrideDOMText;if(s!=null&&s.length)return!1}return!0}class v0{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class QO{constructor(e,t,r,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:l,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let c=l||a?[]:UO(e),h=new HO(c,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=XO(c,this.bounds.from)}else{let c=e.observer.selectionRange,h=l&&l.node==c.focusNode&&l.offset==c.focusOffset||!Rf(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),p=a&&a.node==c.anchorNode&&a.offset==c.anchorOffset||!Rf(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset),d=e.viewport;if((ce.ios||ce.chrome)&&e.state.selection.main.empty&&h!=p&&(d.from>0||d.to<e.state.doc.length)){let m=Math.min(h,p),x=Math.max(h,p),k=d.from-m,b=d.to-x;(k==0||k==1||m==0)&&(b==0||b==-1||x==e.state.doc.length)&&(h=0,p=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(se.range(p,h)):this.newSel=se.single(p,h)}}}function mv(n,e){let t,{newSel:r}=e,s=n.state.selection.main,l=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:c}=e.bounds,h=s.from,p=null;(l===8||ce.android&&e.text.length<c-a)&&(h=s.to,p="end");let d=yv(n.state.doc.sliceString(a,c,Ao),e.text,h-a,p);d&&(ce.chrome&&l==13&&d.toB==d.from+2&&e.text.slice(d.from,d.toB)==Ao+Ao&&d.toB--,t={from:a+d.from,to:a+d.toA,insert:Te.of(e.text.slice(d.from,d.toB).split(Ao))})}else r&&(!n.hasFocus&&n.state.facet(br)||r.main.eq(s))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!s.empty&&r&&r.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:(ce.mac||ce.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=se.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:Te.of([t.insert.toString().replace("."," ")])}):t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:n.state.doc.lineAt(s.from).to<s.to&&n.docView.lineHasWidget(s.to)&&n.inputState.insertingTextAt>Date.now()-50?t={from:s.from,to:s.to,insert:n.state.toText(n.inputState.insertingText)}:ce.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=se.single(r.main.anchor-1,r.main.head-1)),t={from:s.from,to:s.to,insert:Te.of([" "])}),t)return Nd(n,t,r,l);if(r&&!r.main.eq(s)){let a=!1,c="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),c=n.inputState.lastSelectionOrigin,c=="select.pointer"&&(r=gv(n.state.facet(fl).map(h=>h(n)),r))),n.dispatch({selection:r,scrollIntoView:a,userEvent:c}),!0}else return!1}function Nd(n,e,t,r=-1){if(ce.ios&&n.inputState.flushIOSKey(e))return!0;let s=n.state.selection.main;if(ce.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&n.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ks(n.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&ks(n.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&ks(n.contentDOM,"Delete",46)))return!0;let l=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let a,c=()=>a||(a=$O(n,e,t));return n.state.facet(tv).some(h=>h(n,e.from,e.to,l,c))||n.dispatch(c()),!0}function $O(n,e,t){let r,s=n.state,l=s.selection.main,a=-1;if(e.from==e.to&&e.from<l.from||e.from>l.to){let h=e.from<l.from?-1:1,p=h<0?l.from:l.to,d=_o(s.facet(fl).map(m=>m(n)),p,h);e.from==d&&(a=d)}if(a>-1)r={changes:e,selection:se.cursor(e.from+e.insert.length,-1)};else if(e.from>=l.from&&e.to<=l.to&&e.to-e.from>=(l.to-l.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let h=l.from<e.from?s.sliceDoc(l.from,e.from):"",p=l.to>e.to?s.sliceDoc(e.to,l.to):"";r=s.replaceSelection(n.state.toText(h+e.insert.sliceString(0,void 0,n.state.lineBreak)+p))}else{let h=s.changes(e),p=t&&t.main.to<=h.newLength?t.main:void 0;if(s.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&e.to<=l.to+10&&e.to>=l.to-10){let d=n.state.sliceDoc(e.from,e.to),m,x=t&&fv(n,t.main.head);if(x){let b=e.insert.length-(e.to-e.from);m={from:x.from,to:x.to-b}}else m=n.state.doc.lineAt(l.head);let k=l.to-e.to;r=s.changeByRange(b=>{if(b.from==l.from&&b.to==l.to)return{changes:h,range:p||b.map(h)};let S=b.to-k,C=S-d.length;if(n.state.sliceDoc(C,S)!=d||S>=m.from&&C<=m.to)return{range:b};let P=s.changes({from:C,to:S,insert:e.insert}),M=b.to-l.to;return{changes:P,range:p?se.range(Math.max(0,p.anchor+M),Math.max(0,p.head+M)):b.map(P)}})}else r={changes:h,selection:p&&s.selection.replaceRange(p)}}let c="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,c+=".compose",n.inputState.compositionFirstChange&&(c+=".start",n.inputState.compositionFirstChange=!1)),s.update(r,{userEvent:c,scrollIntoView:!0})}function yv(n,e,t,r){let s=Math.min(n.length,e.length),l=0;for(;l<s&&n.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==s&&n.length==e.length)return null;let a=n.length,c=e.length;for(;a>0&&c>0&&n.charCodeAt(a-1)==e.charCodeAt(c-1);)a--,c--;if(r=="end"){let h=Math.max(0,l-Math.min(a,c));t-=a+h-l}if(a<l&&n.length<e.length){let h=t<=l&&t>=a?l-t:0;l-=h,c=l+(c-a),a=l}else if(c<l){let h=t<=l&&t>=c?l-t:0;l-=h,a=l+(a-c),c=l}return{from:l,toA:a,toB:c}}function UO(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:l}=n.observer.selectionRange;return t&&(e.push(new v0(t,r)),(s!=t||l!=r)&&e.push(new v0(s,l))),e}function XO(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?se.single(t+e,r+e):null}class KO{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,ce.safari&&e.contentDOM.addEventListener("input",()=>null),ce.gecko&&cC(e.contentDOM.ownerDocument)}handleEvent(e){!nC(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let s of r.observers)s(this.view,t);for(let s of r.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=qO(e),r=this.handlers,s=this.view.contentDOM;for(let l in t)if(l!="scroll"){let a=!t[l].handlers.length,c=r[l];c&&a!=!c.handlers.length&&(s.removeEventListener(l,this.handleEvent),c=null),c||s.addEventListener(l,this.handleEvent,{passive:a})}for(let l in r)l!="scroll"&&!t[l]&&s.removeEventListener(l,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&vv.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),ce.android&&ce.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return ce.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=xv.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||YO.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ks(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:ce.safari&&!ce.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function k0(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(s){rr(t.state,s)}}}function qO(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let s=r.spec,l=s&&s.plugin.domEventHandlers,a=s&&s.plugin.domEventObservers;if(l)for(let c in l){let h=l[c];h&&t(c).handlers.push(k0(r.value,h))}if(a)for(let c in a){let h=a[c];h&&t(c).observers.push(k0(r.value,h))}}for(let r in _n)t(r).handlers.push(_n[r]);for(let r in Sn)t(r).observers.push(Sn[r]);return e}const xv=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],YO="dthko",vv=[16,17,18,20,91,92,224,225],Ra=6;function Ma(n){return Math.max(0,n)*.7+8}function GO(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class JO{constructor(e,t,r,s){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=oO(e.contentDOM),this.atoms=e.state.facet(fl).map(a=>a(e));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(je.allowMultipleSelections)&&ZO(e,t),this.dragging=tC(e,t)&&bv(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&GO(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,s=0,l=0,a=this.view.win.innerWidth,c=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:l,bottom:c}=this.scrollParents.y.getBoundingClientRect());let h=hv(this.view);e.clientX-h.left<=s+Ra?t=-Ma(s-e.clientX):e.clientX+h.right>=a-Ra&&(t=Ma(e.clientX-a)),e.clientY-h.top<=l+Ra?r=-Ma(l-e.clientY):e.clientY+h.bottom>=c-Ra&&(r=Ma(e.clientY-c)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,r=gv(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function ZO(n,e){let t=n.state.facet(Gx);return t.length?t[0](e):ce.mac?e.metaKey:e.ctrlKey}function eC(n,e){let t=n.state.facet(Jx);return t.length?t[0](e):ce.mac?!e.altKey:!e.ctrlKey}function tC(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=Go(n.root);if(!r||r.rangeCount==0)return!0;let s=r.getRangeAt(0).getClientRects();for(let l=0;l<s.length;l++){let a=s[l];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function nC(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Fe.get(t))&&r.ignoreEvent(e))return!1;return!0}const _n=Object.create(null),Sn=Object.create(null),kv=ce.ie&&ce.ie_version<15||ce.ios&&ce.webkit_version<604;function rC(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),wv(n,t.value)},50)}function Lu(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function wv(n,e){e=Lu(n.state,Od,e);let{state:t}=n,r,s=1,l=t.toText(e),a=l.lines==t.selection.ranges.length;if(_f!=null&&t.selection.ranges.every(h=>h.empty)&&_f==l.toString()){let h=-1;r=t.changeByRange(p=>{let d=t.doc.lineAt(p.from);if(d.from==h)return{range:p};h=d.from;let m=t.toText((a?l.line(s++).text:e)+t.lineBreak);return{changes:{from:d.from,insert:m},range:se.cursor(p.from+m.length)}})}else a?r=t.changeByRange(h=>{let p=l.line(s++);return{changes:{from:h.from,to:h.to,insert:p.text},range:se.cursor(h.from+p.length)}}):r=t.replaceSelection(l);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Sn.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};_n.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Sn.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Sn.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};_n.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(Zx))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=oC(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new JO(n,e,t,r)),r&&n.observer.ignore(()=>{Lx(n.contentDOM);let l=n.root.activeElement;l&&!l.contains(n.contentDOM)&&l.blur()});let s=n.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function w0(n,e,t,r){if(r==1)return se.cursor(e,t);if(r==2)return DO(n.state,e,t);{let s=ct.find(n.docView,e),l=n.state.doc.lineAt(s?s.posAtEnd:e),a=s?s.posAtStart:l.from,c=s?s.posAtEnd:l.to;return c<n.state.doc.length&&c==l.to&&c++,se.range(a,c)}}let b0=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function iC(n,e,t,r){let s=ct.find(n.docView,e);if(!s)return 1;let l=e-s.posAtStart;if(l==0)return 1;if(l==s.length)return-1;let a=s.coordsAt(l,-1);if(a&&b0(t,r,a))return-1;let c=s.coordsAt(l,1);return c&&b0(t,r,c)?1:a&&a.bottom>=r?-1:1}function S0(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:iC(n,t,e.clientX,e.clientY)}}const sC=ce.ie&&ce.ie_version<=11;let O0=null,C0=0,P0=0;function bv(n){if(!sC)return n.detail;let e=O0,t=P0;return O0=n,P0=Date.now(),C0=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(C0+1)%3:1}function oC(n,e){let t=S0(n,e),r=bv(e),s=n.state.selection;return{update(l){l.docChanged&&(t.pos=l.changes.mapPos(t.pos),s=s.map(l.changes))},get(l,a,c){let h=S0(n,l),p,d=w0(n,h.pos,h.bias,r);if(t.pos!=h.pos&&!a){let m=w0(n,t.pos,t.bias,r),x=Math.min(m.from,d.from),k=Math.max(m.to,d.to);d=x<d.from?se.range(x,k):se.range(k,x)}return a?s.replaceRange(s.main.extend(d.from,d.to)):c&&r==1&&s.ranges.length>1&&(p=lC(s,h.pos))?p:c?s.addRange(d):se.create([d])}}}function lC(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:s}=n.ranges[t];if(r<=e&&s>=e)return se.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}_n.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let s=n.docView.nearest(e.target);if(s&&s.isWidget){let l=s.posAtStart,a=l+s.length;(l>=t.to||a<=t.from)&&(t=se.range(l,a))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Lu(n.state,Cd,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};_n.dragend=n=>(n.inputState.draggedContent=null,!1);function N0(n,e,t,r){if(t=Lu(n.state,Od,t),!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:l}=n.inputState,a=r&&l&&eC(n,e)?{from:l.from,to:l.to}:null,c={from:s,insert:t},h=n.state.changes(a?[a,c]:c);n.focus(),n.dispatch({changes:h,selection:{anchor:h.mapPos(s,-1),head:h.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"}),n.inputState.draggedContent=null}_n.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),s=0,l=()=>{++s==t.length&&N0(n,e,r.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let c=new FileReader;c.onerror=l,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(r[a]=c.result),l()},c.readAsText(t[a])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return N0(n,e,r,!0),!0}return!1};_n.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=kv?null:e.clipboardData;return t?(wv(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(rC(n),!1)};function aC(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function uC(n){let e=[],t=[],r=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:l}of n.selection.ranges){let a=n.doc.lineAt(l);a.number>s&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),s=a.number}r=!0}return{text:Lu(n,Cd,e.join(n.lineBreak)),ranges:t,linewise:r}}let _f=null;_n.copy=_n.cut=(n,e)=>{let{text:t,ranges:r,linewise:s}=uC(n.state);if(!t&&!s)return!1;_f=s?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let l=kv?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",t),!0):(aC(n,t),!1)};const Sv=js.define();function Ov(n,e){let t=[];for(let r of n.facet(nv)){let s=r(n,e);s&&t.push(s)}return t.length?n.update({effects:t,annotations:Sv.of(!0)}):null}function Cv(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=Ov(n.state,e);t?n.dispatch(t):n.update([])}},10)}Sn.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Cv(n)};Sn.blur=n=>{n.observer.clearSelectionRange(),Cv(n)};Sn.compositionstart=Sn.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Sn.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,ce.chrome&&ce.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Sn.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};_n.beforeinput=(n,e)=>{var t,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let l=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),a=e.getTargetRanges();if(l&&a.length){let c=a[0],h=n.posAtDOM(c.startContainer,c.startOffset),p=n.posAtDOM(c.endContainer,c.endOffset);return Nd(n,{from:h,to:p,insert:n.state.toText(l)},null),!0}}let s;if(ce.chrome&&ce.android&&(s=xv.find(l=>l.inputType==e.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let l=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>l+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return ce.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),ce.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Sn.compositionend(n,e),20),!1};const E0=new Set;function cC(n){E0.has(n)||(E0.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const A0=["pre-wrap","normal","pre-line","break-spaces"];let Ns=!1;function R0(){Ns=!1}class hC{constructor(e){this.lineWrapping=e,this.doc=Te.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return A0.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let s=e[r];s<0?r++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,r,s,l,a){let c=A0.indexOf(e)>-1,h=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=c;if(this.lineWrapping=c,this.lineHeight=t,this.charWidth=r,this.textHeight=s,this.lineLength=l,h){this.heightSamples={};for(let p=0;p<a.length;p++){let d=a[p];d<0?p++:this.heightSamples[Math.floor(d*10)]=!0}}return h}}class fC{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class nr{constructor(e,t,r,s,l){this.from=e,this.length=t,this.top=r,this.height=s,this._content=l}get type(){return typeof this._content=="number"?$t.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ai?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new nr(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var $e=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})($e||($e={}));const Ya=.001;class Ut{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ya&&(Ns=!0),this.height=e)}replace(e,t,r){return Ut.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,s){let l=this,a=r.doc;for(let c=s.length-1;c>=0;c--){let{fromA:h,toA:p,fromB:d,toB:m}=s[c],x=l.lineAt(h,$e.ByPosNoHeight,r.setDoc(t),0,0),k=x.to>=p?x:l.lineAt(p,$e.ByPosNoHeight,r,0,0);for(m+=k.to-p,p=k.to;c>0&&x.from<=s[c-1].toA;)h=s[c-1].fromA,d=s[c-1].fromB,c--,h<x.from&&(x=l.lineAt(h,$e.ByPosNoHeight,r,0,0));d+=x.from-h,h=x.from;let b=Ed.build(r.setDoc(a),e,d,m);l=pu(l,l.replace(h,p,b))}return l.updateHeight(r,0)}static empty(){return new cn(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,s=0,l=0;for(;;)if(t==r)if(s>l*2){let c=e[t-1];c.break?e.splice(--t,1,c.left,null,c.right):e.splice(--t,1,c.left,c.right),r+=1+c.break,s-=c.size}else if(l>s*2){let c=e[r];c.break?e.splice(r,1,c.left,null,c.right):e.splice(r,1,c.left,c.right),r+=2+c.break,l-=c.size}else break;else if(s<l){let c=e[t++];c&&(s+=c.size)}else{let c=e[--r];c&&(l+=c.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,r++),new dC(Ut.of(e.slice(0,t)),a,Ut.of(e.slice(r)))}}function pu(n,e){return n==e?n:(n.constructor!=e.constructor&&(Ns=!0),e)}Ut.prototype.size=1;class Pv extends Ut{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,s){return new nr(s,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,s,l){return this.blockAt(0,r,s,l)}forEachLine(e,t,r,s,l,a){e<=l+this.length&&t>=l&&a(this.blockAt(0,r,s,l))}updateHeight(e,t=0,r=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class cn extends Pv{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,s){return new nr(s,this.length,r,this.height,this.breaks)}replace(e,t,r){let s=r[0];return r.length==1&&(s instanceof cn||s instanceof Ct&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Ct?s=new cn(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):Ut.of(r)}updateHeight(e,t=0,r=!1,s){return s&&s.from<=t&&s.more?this.setHeight(s.heights[s.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ct extends Ut{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,l=s-r+1,a,c=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*l);a=h/l,this.length>l+1&&(c=(this.height-h)/(this.length-l-1))}else a=this.height/l;return{firstLine:r,lastLine:s,perLine:a,perChar:c}}blockAt(e,t,r,s){let{firstLine:l,lastLine:a,perLine:c,perChar:h}=this.heightMetrics(t,s);if(t.lineWrapping){let p=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),d=t.doc.lineAt(p),m=c+d.length*h,x=Math.max(r,e-m/2);return new nr(d.from,d.length,x,m,0)}else{let p=Math.max(0,Math.min(a-l,Math.floor((e-r)/c))),{from:d,length:m}=t.doc.line(l+p);return new nr(d,m,r+c*p,c,0)}}lineAt(e,t,r,s,l){if(t==$e.ByHeight)return this.blockAt(e,r,s,l);if(t==$e.ByPosNoHeight){let{from:k,to:b}=r.doc.lineAt(e);return new nr(k,b-k,0,0,0)}let{firstLine:a,perLine:c,perChar:h}=this.heightMetrics(r,l),p=r.doc.lineAt(e),d=c+p.length*h,m=p.number-a,x=s+c*m+h*(p.from-l-m);return new nr(p.from,p.length,Math.max(s,Math.min(x,s+this.height-d)),d,0)}forEachLine(e,t,r,s,l,a){e=Math.max(e,l),t=Math.min(t,l+this.length);let{firstLine:c,perLine:h,perChar:p}=this.heightMetrics(r,l);for(let d=e,m=s;d<=t;){let x=r.doc.lineAt(d);if(d==e){let b=x.number-c;m+=h*b+p*(e-l-b)}let k=h+p*x.length;a(new nr(x.from,x.length,m,k,0)),m+=k,d=x.to+1}}replace(e,t,r){let s=this.length-t;if(s>0){let l=r[r.length-1];l instanceof Ct?r[r.length-1]=new Ct(l.length+s):r.push(null,new Ct(s-1))}if(e>0){let l=r[0];l instanceof Ct?r[0]=new Ct(e+l.length):r.unshift(new Ct(e-1),null)}return Ut.of(r)}decomposeLeft(e,t){t.push(new Ct(e-1),null)}decomposeRight(e,t){t.push(null,new Ct(this.length-e-1))}updateHeight(e,t=0,r=!1,s){let l=t+this.length;if(s&&s.from<=t+this.length&&s.more){let a=[],c=Math.max(t,s.from),h=-1;for(s.from>t&&a.push(new Ct(s.from-t-1).updateHeight(e,t));c<=l&&s.more;){let d=e.doc.lineAt(c).length;a.length&&a.push(null);let m=s.heights[s.index++];h==-1?h=m:Math.abs(m-h)>=Ya&&(h=-2);let x=new cn(d,m);x.outdated=!1,a.push(x),c+=d+1}c<=l&&a.push(null,new Ct(l-c).updateHeight(e,c));let p=Ut.of(a);return(h<0||Math.abs(p.height-this.height)>=Ya||Math.abs(h-this.heightMetrics(e,t).perLine)>=Ya)&&(Ns=!0),pu(this,p)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class dC extends Ut{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,s){let l=r+this.left.height;return e<l?this.left.blockAt(e,t,r,s):this.right.blockAt(e,t,l,s+this.left.length+this.break)}lineAt(e,t,r,s,l){let a=s+this.left.height,c=l+this.left.length+this.break,h=t==$e.ByHeight?e<a:e<c,p=h?this.left.lineAt(e,t,r,s,l):this.right.lineAt(e,t,r,a,c);if(this.break||(h?p.to<c:p.from>c))return p;let d=t==$e.ByPosNoHeight?$e.ByPosNoHeight:$e.ByPos;return h?p.join(this.right.lineAt(c,d,r,a,c)):this.left.lineAt(c,d,r,s,l).join(p)}forEachLine(e,t,r,s,l,a){let c=s+this.left.height,h=l+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,t,r,s,l,a),t>=h&&this.right.forEachLine(e,t,r,c,h,a);else{let p=this.lineAt(h,$e.ByPos,r,s,l);e<p.from&&this.left.forEachLine(e,p.from-1,r,s,l,a),p.to>=e&&p.from<=t&&a(p),t>p.to&&this.right.forEachLine(p.to+1,t,r,c,h,a)}}replace(e,t,r){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,r));let l=[];e>0&&this.decomposeLeft(e,l);let a=l.length;for(let c of r)l.push(c);if(e>0&&M0(l,a-1),t<this.length){let c=l.length;this.decomposeRight(t,l),M0(l,c)}return Ut.of(l)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,s=r+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Ut.of(this.break?[e,null,t]:[e,t]):(this.left=pu(this.left,e),this.right=pu(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,s){let{left:l,right:a}=this,c=t+l.length+this.break,h=null;return s&&s.from<=t+l.length&&s.more?h=l=l.updateHeight(e,t,r,s):l.updateHeight(e,t,r),s&&s.from<=c+a.length&&s.more?h=a=a.updateHeight(e,c,r,s):a.updateHeight(e,c,r),h?this.balanced(l,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function M0(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof Ct&&(r=n[e+1])instanceof Ct&&n.splice(e-1,3,new Ct(t.length+1+r.length))}const pC=5;class Ed{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof cn?s.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new cn(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let s=r.widget?r.widget.estimatedHeight:0,l=r.widget?r.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let a=t-e;r.block?this.addBlock(new Pv(a,s,r)):(a||l||s>=pC)&&this.addLineDeco(s,l,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new cn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new Ct(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof cn)return e;let t=new cn(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let s=this.ensureLine();s.length+=r,s.collapsed+=r,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof cn)&&!this.isCovered?this.nodes.push(new cn(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let s of this.nodes)s instanceof cn&&s.updateHeight(this.oracle,r),r+=s?s.length:1;return this.nodes}static build(e,t,r,s){let l=new Ed(r,e);return Be.spans(t,r,s,l,0),l.finish(r)}}function gC(n,e,t){let r=new mC;return Be.compare(n,e,t,r,0),r.changes}class mC{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,s){(e<t||r&&r.heightRelevant||s&&s.heightRelevant)&&qa(e,t,this.changes,5)}}function yC(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,s=r.defaultView||window,l=Math.max(0,t.left),a=Math.min(s.innerWidth,t.right),c=Math.max(0,t.top),h=Math.min(s.innerHeight,t.bottom);for(let p=n.parentNode;p&&p!=r.body;)if(p.nodeType==1){let d=p,m=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&m.overflow!="visible"){let x=d.getBoundingClientRect();l=Math.max(l,x.left),a=Math.min(a,x.right),c=Math.max(c,x.top),h=Math.min(p==n.parentNode?s.innerHeight:h,x.bottom)}p=m.position=="absolute"||m.position=="fixed"?d.offsetParent:d.parentNode}else if(p.nodeType==11)p=p.host;else break;return{left:l-t.left,right:Math.max(l,a)-t.left,top:c-(t.top+e),bottom:Math.max(c,h)-(t.top+e)}}function xC(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function vC(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Hh{constructor(e,t,r,s){this.from=e,this.to=t,this.size=r,this.displaySize=s}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let s=e[r],l=t[r];if(s.from!=l.from||s.to!=l.to||s.size!=l.size)return!1}return!0}draw(e,t){return tt.replace({widget:new kC(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class kC extends ul{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class T0{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=D0,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=et.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Pd).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new hC(t),this.stateDeco=e.facet(Zo).filter(r=>typeof r!="function"),this.heightMap=Ut.empty().applyChanges(this.stateDeco,Te.empty,this.heightOracle.setDoc(e.doc),[new wn(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=tt.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let s=r?t.head:t.anchor;if(!e.some(({from:l,to:a})=>s>=l&&s<=a)){let{from:l,to:a}=this.lineBlockAt(s);e.push(new Ta(l,a))}}return this.viewports=e.sort((r,s)=>r.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?D0:new Ad(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Ro(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Zo).filter(d=>typeof d!="function");let s=e.changedRanges,l=wn.extendWithRanges(s,gC(r,this.stateDeco,e?e.changes:wt.empty(this.state.doc.length))),a=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);R0(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),(this.heightMap.height!=a||Ns)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let h=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<h.from||t.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t));let p=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(p||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(iv)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),s=this.heightOracle,l=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?et.RTL:et.LTR;let a=this.heightOracle.mustRefreshForWrapping(l),c=t.getBoundingClientRect(),h=a||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let p=0,d=0;if(c.width&&c.height){let{scaleX:B,scaleY:L}=Dx(t,c);(B>.005&&Math.abs(this.scaleX-B)>.005||L>.005&&Math.abs(this.scaleY-L)>.005)&&(this.scaleX=B,this.scaleY=L,p|=16,a=h=!0)}let m=(parseInt(r.paddingTop)||0)*this.scaleY,x=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=m||this.paddingBottom!=x)&&(this.paddingTop=m,this.paddingBottom=x,p|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,p|=16);let k=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=k&&(this.scrollAnchorHeight=-1,this.scrollTop=k),this.scrolledToBottom=Ix(e.scrollDOM);let b=(this.printing?vC:yC)(t,this.paddingTop),S=b.top-this.pixelViewport.top,C=b.bottom-this.pixelViewport.bottom;this.pixelViewport=b;let P=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(P!=this.inView&&(this.inView=P,P&&(h=!0)),!this.inView&&!this.scrollTarget&&!xC(e.dom))return 0;let M=c.width;if((this.contentDOMWidth!=M||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,p|=16),h){let B=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(B)&&(a=!0),a||s.lineWrapping&&Math.abs(M-this.contentDOMWidth)>s.charWidth){let{lineHeight:L,charWidth:F,textHeight:j}=e.docView.measureTextSize();a=L>0&&s.refresh(l,L,F,j,Math.max(5,M/F),B),a&&(e.docView.minWidth=0,p|=16)}S>0&&C>0?d=Math.max(S,C):S<0&&C<0&&(d=Math.min(S,C)),R0();for(let L of this.viewports){let F=L.from==this.viewport.from?B:e.docView.measureVisibleLineHeights(L);this.heightMap=(a?Ut.empty().applyChanges(this.stateDeco,Te.empty,this.heightOracle,[new wn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,a,new fC(L.from,F))}Ns&&(p|=2)}let T=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return T&&(p&2&&(p|=this.updateScaler()),this.viewport=this.getViewport(d,this.scrollTarget),p|=this.updateForViewport()),(p&2||T)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),p|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),p}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,l=this.heightOracle,{visibleTop:a,visibleBottom:c}=this,h=new Ta(s.lineAt(a-r*1e3,$e.ByHeight,l,0,0).from,s.lineAt(c+(1-r)*1e3,$e.ByHeight,l,0,0).to);if(t){let{head:p}=t.range;if(p<h.from||p>h.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),m=s.lineAt(p,$e.ByPos,l,0,0),x;t.y=="center"?x=(m.top+m.bottom)/2-d/2:t.y=="start"||t.y=="nearest"&&p<h.from?x=m.top:x=m.bottom-d,h=new Ta(s.lineAt(x-1e3/2,$e.ByHeight,l,0,0).from,s.lineAt(x+d+1e3/2,$e.ByHeight,l,0,0).to)}}return h}mapViewport(e,t){let r=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new Ta(this.heightMap.lineAt(r,$e.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,$e.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,$e.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(t,$e.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:c}=this;return(e==0||s<=a-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||l>=c+Math.max(10,Math.min(r,250)))&&s>a-2*1e3&&l<c+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let s of e)t.touchesRange(s.from,s.to)||r.push(new Hh(t.mapPos(s.from),t.mapPos(s.to),s.size,s.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,s=r?1e4:2e3,l=s>>1,a=s<<1;if(this.defaultTextDirection!=et.LTR&&!r)return[];let c=[],h=(d,m,x,k)=>{if(m-d<l)return;let b=this.state.selection.main,S=[b.from];b.empty||S.push(b.to);for(let P of S)if(P>d&&P<m){h(d,P-10,x,k),h(P+10,m,x,k);return}let C=bC(e,P=>P.from>=x.from&&P.to<=x.to&&Math.abs(P.from-d)<l&&Math.abs(P.to-m)<l&&!S.some(M=>P.from<M&&P.to>M));if(!C){if(m<x.to&&t&&r&&t.visibleRanges.some(T=>T.from<=m&&T.to>=m)){let T=t.moveToLineBoundary(se.cursor(m),!1,!0).head;T>d&&(m=T)}let P=this.gapSize(x,d,m,k),M=r||P<2e6?P:2e6;C=new Hh(d,m,P,M)}c.push(C)},p=d=>{if(d.length<a||d.type!=$t.Text)return;let m=wC(d.from,d.to,this.stateDeco);if(m.total<a)return;let x=this.scrollTarget?this.scrollTarget.range.head:null,k,b;if(r){let S=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,C,P;if(x!=null){let M=La(m,x),T=((this.visibleBottom-this.visibleTop)/2+S)/d.height;C=M-T,P=M+T}else C=(this.visibleTop-d.top-S)/d.height,P=(this.visibleBottom-d.top+S)/d.height;k=Da(m,C),b=Da(m,P)}else{let S=m.total*this.heightOracle.charWidth,C=s*this.heightOracle.charWidth,P=0;if(S>2e6)for(let F of e)F.from>=d.from&&F.from<d.to&&F.size!=F.displaySize&&F.from*this.heightOracle.charWidth+P<this.pixelViewport.left&&(P=F.size-F.displaySize);let M=this.pixelViewport.left+P,T=this.pixelViewport.right+P,B,L;if(x!=null){let F=La(m,x),j=((T-M)/2+C)/S;B=F-j,L=F+j}else B=(M-C)/S,L=(T+C)/S;k=Da(m,B),b=Da(m,L)}k>d.from&&h(d.from,k,d,m),b<d.to&&h(b,d.to,d,m)};for(let d of this.viewportLines)Array.isArray(d.type)?d.type.forEach(p):p(d);return c}gapSize(e,t,r,s){let l=La(s,r)-La(s,t);return this.heightOracle.lineWrapping?e.height*l:s.total*this.heightOracle.charWidth*l}updateLineGaps(e){Hh.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=tt.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];Be.spans(t,this.viewport.from,this.viewport.to,{span(l,a){r.push({from:l,to:a})},point(){}},20);let s=0;if(r.length!=this.visibleRanges.length)s=12;else for(let l=0;l<r.length&&!(s&8);l++){let a=this.visibleRanges[l],c=r[l];(a.from!=c.from||a.to!=c.to)&&(s|=4,e&&e.mapPos(a.from,-1)==c.from&&e.mapPos(a.to,1)==c.to||(s|=8))}return this.visibleRanges=r,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ro(this.heightMap.lineAt(e,$e.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Ro(this.heightMap.lineAt(this.scaler.fromDOM(e),$e.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Ro(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ta{constructor(e,t){this.from=e,this.to=t}}function wC(n,e,t){let r=[],s=n,l=0;return Be.spans(t,n,e,{span(){},point(a,c){a>s&&(r.push({from:s,to:a}),l+=a-s),s=c}},20),s<e&&(r.push({from:s,to:e}),l+=e-s),{total:l,ranges:r}}function Da({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let s=0;;s++){let{from:l,to:a}=e[s],c=a-l;if(r<=c)return l+r;r-=c}}function La(n,e){let t=0;for(let{from:r,to:s}of n.ranges){if(e<=s){t+=e-r;break}t+=s-r}return t/n.total}function bC(n,e){for(let t of n)if(e(t))return t}const D0={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class Ad{constructor(e,t,r){let s=0,l=0,a=0;this.viewports=r.map(({from:c,to:h})=>{let p=t.lineAt(c,$e.ByPos,e,0,0).top,d=t.lineAt(h,$e.ByPos,e,0,0).bottom;return s+=d-p,{from:c,to:h,top:p,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let c of this.viewports)c.domTop=a+(c.top-l)*this.scale,a=c.domBottom=c.domTop+(c.bottom-c.top),l=c.bottom}toDOM(e){for(let t=0,r=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.top)return s+(e-r)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);r=l.bottom,s=l.domBottom}}fromDOM(e){for(let t=0,r=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.domTop)return r+(e-s)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);r=l.bottom,s=l.domBottom}}eq(e){return e instanceof Ad?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function Ro(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new nr(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(s=>Ro(s,e)):n._content)}const ja=ke.define({combine:n=>n.join(" ")}),Hf=ke.define({combine:n=>n.indexOf(!0)>-1}),Vf=oi.newName(),Nv=oi.newName(),Ev=oi.newName(),Av={"&light":"."+Nv,"&dark":"."+Ev};function Wf(n,e,t){return new oi(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+r}})}const SC=Wf("."+Vf,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Av),OC={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Vh=ce.ie&&ce.ie_version<=11;class CC{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new lO,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(ce.ie&&ce.ie_version<=11||ce.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&ce.android&&e.constructor.EDIT_CONTEXT!==!1&&!(ce.chrome&&ce.chrome_version<126)&&(this.editContext=new NC(e),e.state.facet(br)&&(e.contentDOM.editContext=this.editContext.editContext)),Vh&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,s=this.selectionRange;if(r.state.facet(br)?r.root.activeElement!=this.dom:!Ka(this.dom,s))return;let l=s.anchorNode&&r.docView.nearest(s.anchorNode);if(l&&l.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(ce.ie&&ce.ie_version<=11||ce.android&&ce.chrome)&&!r.state.selection.main.empty&&s.focusNode&&zo(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Go(e.root);if(!t)return!1;let r=ce.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&PC(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let s=Ka(this.dom,r);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&uO(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,OC),Vh&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Vh&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let s=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=l.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&l.force&&ks(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,s=!1;for(let l of e){let a=this.readMutation(l);a&&(a.typeOver&&(s=!0),t==-1?{from:t,to:r}=a:(t=Math.min(a.from,t),r=Math.max(a.to,r)))}return{from:t,to:r,typeOver:s}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),s=this.selectionChanged&&Ka(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let l=new QO(this.view,e,t,r);return this.view.docView.domChanged={newSel:l.newSel?l.newSel.main:null},l}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,s=mv(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=L0(t,e.previousSibling||e.target.previousSibling,-1),s=L0(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(br)!=e.state.facet(br)&&(e.view.contentDOM.editContext=e.state.facet(br)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function L0(n,e,t){for(;e;){let r=Fe.get(e);if(r&&r.parent==n)return r;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function j0(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,l=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return zo(a.node,a.offset,s,l)&&([t,r,s,l]=[s,l,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:l}}function PC(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return j0(n,s)}let t=null;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?j0(n,t):null}class NC{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let s=e.state.selection.main,{anchor:l,head:a}=s,c=this.toEditorPos(r.updateRangeStart),h=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:c,drifted:!1});let p=h-c>r.text.length;c==this.from&&l<this.from?c=l:h==this.to&&l>this.to&&(h=l);let d=yv(e.state.sliceDoc(c,h),r.text,(p?s.from:s.to)-c,p?"end":null);if(!d){let x=se.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));x.main.eq(s)||e.dispatch({selection:x,userEvent:"select"});return}let m={from:d.from+c,to:d.toA+c,insert:Te.of(r.text.slice(d.from,d.toB).split(`
`))};if((ce.mac||ce.android)&&m.from==a-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(m={from:c,to:h,insert:Te.of([r.text.replace("."," ")])}),this.pendingContextChange=m,!e.state.readOnly){let x=this.to-this.from+(m.to-m.from+m.insert.length);Nd(e,m,se.single(this.toEditorPos(r.selectionStart,x),this.toEditorPos(r.selectionEnd,x)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),m.from<m.to&&!m.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(t.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let s=[],l=null;for(let a=this.toEditorPos(r.rangeStart),c=this.toEditorPos(r.rangeEnd);a<c;a++){let h=e.coordsForChar(a);l=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||l||new DOMRect,s.push(l)}t.updateCharacterBounds(r.rangeStart,s)},this.handlers.textformatupdate=r=>{let s=[];for(let l of r.getTextFormats()){let a=l.underlineStyle,c=l.underlineThickness;if(!/none/i.test(a)&&!/none/i.test(c)){let h=this.toEditorPos(l.rangeStart),p=this.toEditorPos(l.rangeEnd);if(h<p){let d=`text-decoration: underline ${/^[a-z]/.test(a)?a+" ":a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${/thin/i.test(c)?1:2}px`;s.push(tt.mark({attributes:{style:d}}).range(h,p))}}}e.dispatch({effects:ov.of(tt.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let s=Go(r.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,s=this.pendingContextChange;return e.changes.iterChanges((l,a,c,h,p)=>{if(r)return;let d=p.length-(a-l);if(s&&a>=s.to)if(s.from==l&&s.to==a&&s.insert.eq(p)){s=this.pendingContextChange=null,t+=d,this.to+=d;return}else s=null,this.revertPending(e.state);if(l+=t,a+=t,a<=this.from)this.from+=d,this.to+=d;else if(l<this.to){if(l<this.from||a>this.to||this.to-this.from+p.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(l),this.toContextPos(a),p.toString()),this.to+=d}t+=d}),s&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(r,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Pe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(s=>s.forEach(l=>r(l,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||aO(e.parent)||document,this.viewState=new T0(e.state||je.create(e)),e.scrollTo&&e.scrollTo.is(Aa)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ps).map(s=>new zh(s));for(let s of this.plugins)s.update(this);this.observer=new CC(this),this.inputState=new KO(this),this.inputState.ensureHandlers(this.plugins),this.docView=new d0(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Bt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,s,l=this.state;for(let x of e){if(x.startState!=l)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");l=x.state}if(this.destroyed){this.viewState.state=l;return}let a=this.hasFocus,c=0,h=null;e.some(x=>x.annotation(Sv))?(this.inputState.notifiedFocused=a,c=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,h=Ov(l,a),h||(c=1));let p=this.observer.delayedAndroidKey,d=null;if(p?(this.observer.clearDelayedAndroidKey(),d=this.observer.readChange(),(d&&!this.state.doc.eq(l.doc)||!this.state.selection.eq(l.selection))&&(d=null)):this.observer.clear(),l.facet(je.phrases)!=this.state.facet(je.phrases))return this.setState(l);s=du.create(this,l,e),s.flags|=c;let m=this.viewState.scrollTarget;try{this.updateState=2;for(let x of e){if(m&&(m=m.map(x.changes)),x.scrollIntoView){let{main:k}=x.state.selection;m=new ws(k.empty?k:se.cursor(k.head,k.head>k.anchor?-1:1))}for(let k of x.effects)k.is(Aa)&&(m=k.value.clip(this.state))}this.viewState.update(s,m),this.bidiCache=gu.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(Eo)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(x=>x.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(ja)!=s.state.facet(ja)&&(this.viewState.mustMeasureContent=!0),(t||r||m||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let x of this.state.facet(Bf))try{x(s)}catch(k){rr(this.state,k,"update listener")}(h||d)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),d&&!mv(this,d)&&p.force&&ks(this.contentDOM,p.key,p.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new T0(e),this.plugins=e.facet(ps).map(r=>new zh(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new d0(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ps),r=e.state.facet(ps);if(t!=r){let s=[];for(let l of r){let a=t.indexOf(l);if(a<0)s.push(new zh(l));else{let c=this.plugins[a];c.mustUpdate=e,s.push(c)}}for(let l of this.plugins)l.mustUpdate!=e&&l.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){rr(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,s=r.scrollTop*this.scaleY,{scrollAnchorPos:l,scrollAnchorHeight:a}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(a<0)if(Ix(r))l=-1,a=this.viewState.heightMap.height;else{let k=this.viewState.scrollAnchorAt(s);l=k.from,a=k.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let p=[];h&4||([this.measureRequests,p]=[p,this.measureRequests]);let d=p.map(k=>{try{return k.read(this)}catch(b){return rr(this.state,b),I0}}),m=du.create(this,this.state,[]),x=!1;m.flags|=h,t?t.flags|=h:t=m,this.updateState=2,m.empty||(this.updatePlugins(m),this.inputState.update(m),this.updateAttrs(),x=this.docView.update(m),x&&this.docViewUpdate());for(let k=0;k<p.length;k++)if(d[k]!=I0)try{let b=p[k];b.write&&b.write(d[k],this)}catch(b){rr(this.state,b)}if(x&&this.docView.updateSelection(!0),!m.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let b=(l<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(l).top)-a;if(b>1||b<-1){s=s+b,r.scrollTop=s/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let c of this.state.facet(Bf))c(t)}get themeClasses(){return Vf+" "+(this.state.facet(Hf)?Ev:Nv)+" "+this.state.facet(ja)}updateAttrs(){let e=B0(this,lv,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(br)?"true":"false",class:"cm-content",style:`${ce.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),B0(this,Pd,t);let r=this.observer.ignore(()=>{let s=Tf(this.contentDOM,this.contentAttrs,t),l=Tf(this.dom,this.editorAttrs,e);return s||l});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let s of r.effects)if(s.is(Pe.announce)){t&&(this.announceDOM.textContent=""),t=!1;let l=this.announceDOM.appendChild(document.createElement("div"));l.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Eo);let e=this.state.facet(Pe.cspNonce);oi.mount(this.root,this.styleModules.concat(SC).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return _h(this,e,x0(this,e,t,r))}moveByGroup(e,t){return _h(this,e,x0(this,e,t,r=>FO(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),s=this.textDirectionAt(e.from),l=r[t?r.length-1:0];return se.cursor(l.side(t,s)+e.from,l.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,r=!0){return zO(this,e,t,r)}moveVertically(e,t,r){return _h(this,e,_O(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),dv(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let s=this.state.doc.lineAt(e),l=this.bidiSpans(s),a=l[ni.find(l,e-s.from,-1,t)];return Du(r,a.dir==et.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(rv)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>EC)return qx(e.length);let t=this.textDirectionAt(e.from),r;for(let l of this.bidiCache)if(l.from==e.from&&l.dir==t&&(l.fresh||Kx(l.isolates,r=f0(this,e))))return l.order;r||(r=f0(this,e));let s=bO(e.text,t,r);return this.bidiCache.push(new gu(e.from,e.to,t,r,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ce.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Lx(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Aa.of(new ws(typeof e=="number"?se.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Aa.of(new ws(se.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Fn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Fn.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=oi.newName(),s=[ja.of(r),Eo.of(Wf(`.${r}`,e))];return t&&t.dark&&s.push(Hf.of(!0)),s}static baseTheme(e){return Ru.lowest(Eo.of(Wf("."+Vf,e,Av)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),s=r&&Fe.get(r)||Fe.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}Pe.styleModule=Eo;Pe.inputHandler=tv;Pe.clipboardInputFilter=Od;Pe.clipboardOutputFilter=Cd;Pe.scrollHandler=sv;Pe.focusChangeEffect=nv;Pe.perLineTextDirection=rv;Pe.exceptionSink=ev;Pe.updateListener=Bf;Pe.editable=br;Pe.mouseSelectionStyle=Zx;Pe.dragMovesSelection=Jx;Pe.clickAddsSelectionRange=Gx;Pe.decorations=Zo;Pe.outerDecorations=av;Pe.atomicRanges=fl;Pe.bidiIsolatedRanges=uv;Pe.scrollMargins=cv;Pe.darkTheme=Hf;Pe.cspNonce=ke.define({combine:n=>n.length?n[0]:""});Pe.contentAttributes=Pd;Pe.editorAttributes=lv;Pe.lineWrapping=Pe.contentAttributes.of({class:"cm-lineWrapping"});Pe.announce=mt.define();const EC=4096,I0={};class gu{constructor(e,t,r,s,l,a){this.from=e,this.to=t,this.dir=r,this.isolates=s,this.fresh=l,this.order=a}static update(e,t){if(t.empty&&!e.some(l=>l.fresh))return e;let r=[],s=e.length?e[e.length-1].dir:et.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let a=e[l];a.dir==s&&!t.touchesRange(a.from,a.to)&&r.push(new gu(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return r}}function B0(n,e,t){for(let r=n.state.facet(e),s=r.length-1;s>=0;s--){let l=r[s],a=typeof l=="function"?l(n):l;a&&Mf(a,t)}return t}const AC=ce.mac?"mac":ce.windows?"win":ce.linux?"linux":"key";function RC(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let s,l,a,c;for(let h=0;h<t.length-1;++h){const p=t[h];if(/^(cmd|meta|m)$/i.test(p))c=!0;else if(/^a(lt)?$/i.test(p))s=!0;else if(/^(c|ctrl|control)$/i.test(p))l=!0;else if(/^s(hift)?$/i.test(p))a=!0;else if(/^mod$/i.test(p))e=="mac"?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+p)}return s&&(r="Alt-"+r),l&&(r="Ctrl-"+r),c&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function Ia(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const MC=Ru.default(Pe.domEventHandlers({keydown(n,e){return jC(TC(e.state),n,e,"editor")}})),Rd=ke.define({enables:MC}),z0=new WeakMap;function TC(n){let e=n.facet(Rd),t=z0.get(e);return t||z0.set(e,t=LC(e.reduce((r,s)=>r.concat(s),[]))),t}let Zr=null;const DC=4e3;function LC(n,e=AC){let t=Object.create(null),r=Object.create(null),s=(a,c)=>{let h=r[a];if(h==null)r[a]=c;else if(h!=c)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},l=(a,c,h,p,d)=>{var m,x;let k=t[a]||(t[a]=Object.create(null)),b=c.split(/ (?!$)/).map(P=>RC(P,e));for(let P=1;P<b.length;P++){let M=b.slice(0,P).join(" ");s(M,!0),k[M]||(k[M]={preventDefault:!0,stopPropagation:!1,run:[T=>{let B=Zr={view:T,prefix:M,scope:a};return setTimeout(()=>{Zr==B&&(Zr=null)},DC),!0}]})}let S=b.join(" ");s(S,!1);let C=k[S]||(k[S]={preventDefault:!1,stopPropagation:!1,run:((x=(m=k._any)===null||m===void 0?void 0:m.run)===null||x===void 0?void 0:x.slice())||[]});h&&C.run.push(h),p&&(C.preventDefault=!0),d&&(C.stopPropagation=!0)};for(let a of n){let c=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let p of c){let d=t[p]||(t[p]=Object.create(null));d._any||(d._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:m}=a;for(let x in d)d[x].run.push(k=>m(k,Qf))}let h=a[e]||a.key;if(h)for(let p of c)l(p,h,a.run,a.preventDefault,a.stopPropagation),a.shift&&l(p,"Shift-"+h,a.shift,a.preventDefault,a.stopPropagation)}return t}let Qf=null;function jC(n,e,t,r){Qf=e;let s=nO(e),l=z2(s,0),a=F2(l)==s.length&&s!=" ",c="",h=!1,p=!1,d=!1;Zr&&Zr.view==t&&Zr.scope==r&&(c=Zr.prefix+" ",vv.indexOf(e.keyCode)<0&&(p=!0,Zr=null));let m=new Set,x=C=>{if(C){for(let P of C.run)if(!m.has(P)&&(m.add(P),P(t)))return C.stopPropagation&&(d=!0),!0;C.preventDefault&&(C.stopPropagation&&(d=!0),p=!0)}return!1},k=n[r],b,S;return k&&(x(k[c+Ia(s,e,!a)])?h=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ce.windows&&e.ctrlKey&&e.altKey)&&!(ce.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(b=li[e.keyCode])&&b!=s?(x(k[c+Ia(b,e,!0)])||e.shiftKey&&(S=Yo[e.keyCode])!=s&&S!=b&&x(k[c+Ia(S,e,!1)]))&&(h=!0):a&&e.shiftKey&&x(k[c+Ia(s,e,!0)])&&(h=!0),!h&&x(k._any)&&(h=!0)),p&&(h=!0),h&&d&&e.stopPropagation(),Qf=null,h}class dl{constructor(e,t,r,s,l){this.className=e,this.left=t,this.top=r,this.width=s,this.height=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let s=e.coordsAtPos(r.head,r.assoc||1);if(!s)return[];let l=Rv(e);return[new dl(t,s.left-l.left,s.top-l.top,null,s.bottom-s.top)]}else return IC(e,t,r)}}function Rv(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==et.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function F0(n,e,t,r){let s=n.coordsAtPos(e,t*2);if(!s)return r;let l=n.dom.getBoundingClientRect(),a=(s.top+s.bottom)/2,c=n.posAtCoords({x:l.left+1,y:a}),h=n.posAtCoords({x:l.right-1,y:a});return c==null||h==null?r:{from:Math.max(r.from,Math.min(c,h)),to:Math.min(r.to,Math.max(c,h))}}function IC(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),l=n.textDirection==et.LTR,a=n.contentDOM,c=a.getBoundingClientRect(),h=Rv(n),p=a.querySelector(".cm-line"),d=p&&window.getComputedStyle(p),m=c.left+(d?parseInt(d.paddingLeft)+Math.min(0,parseInt(d.textIndent)):0),x=c.right-(d?parseInt(d.paddingRight):0),k=Ff(n,r,1),b=Ff(n,s,-1),S=k.type==$t.Text?k:null,C=b.type==$t.Text?b:null;if(S&&(n.lineWrapping||k.widgetLineBreaks)&&(S=F0(n,r,1,S)),C&&(n.lineWrapping||b.widgetLineBreaks)&&(C=F0(n,s,-1,C)),S&&C&&S.from==C.from&&S.to==C.to)return M(T(t.from,t.to,S));{let L=S?T(t.from,null,S):B(k,!1),F=C?T(null,t.to,C):B(b,!0),j=[];return(S||k).to<(C||b).from-(S&&C?1:0)||k.widgetLineBreaks>1&&L.bottom+n.defaultLineHeight/2<F.top?j.push(P(m,L.bottom,x,F.top)):L.bottom<F.top&&n.elementAtHeight((L.bottom+F.top)/2).type==$t.Text&&(L.bottom=F.top=(L.bottom+F.top)/2),M(L).concat(j).concat(M(F))}function P(L,F,j,W){return new dl(e,L-h.left,F-h.top,j-L,W-F)}function M({top:L,bottom:F,horizontal:j}){let W=[];for(let Y=0;Y<j.length;Y+=2)W.push(P(j[Y],L,j[Y+1],F));return W}function T(L,F,j){let W=1e9,Y=-1e9,K=[];function V(ee,X,ue,de,$){let re=n.coordsAtPos(ee,ee==j.to?-2:2),H=n.coordsAtPos(ue,ue==j.from?2:-2);!re||!H||(W=Math.min(re.top,H.top,W),Y=Math.max(re.bottom,H.bottom,Y),$==et.LTR?K.push(l&&X?m:re.left,l&&de?x:H.right):K.push(!l&&de?m:H.left,!l&&X?x:re.right))}let Q=L??j.from,J=F??j.to;for(let ee of n.visibleRanges)if(ee.to>Q&&ee.from<J)for(let X=Math.max(ee.from,Q),ue=Math.min(ee.to,J);;){let de=n.state.doc.lineAt(X);for(let $ of n.bidiSpans(de)){let re=$.from+de.from,H=$.to+de.from;if(re>=ue)break;H>X&&V(Math.max(re,X),L==null&&re<=Q,Math.min(H,ue),F==null&&H>=J,$.dir)}if(X=de.to+1,X>=ue)break}return K.length==0&&V(Q,L==null,J,F==null,n.textDirection),{top:W,bottom:Y,horizontal:K}}function B(L,F){let j=c.top+(F?L.top:L.bottom);return{top:j,bottom:j,horizontal:[]}}}function BC(n,e){return n.constructor==e.constructor&&n.eq(e)}class zC{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Ga)!=e.state.facet(Ga)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(Ga);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!BC(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[r].constructor&&s.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e,ce.safari&&ce.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Ga=ke.define();function Mv(n){return[Fn.define(e=>new zC(e,n)),Ga.of(n)]}const el=ke.define({combine(n){return Ax(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function FC(n={}){return[el.of(n),_C,HC,VC,iv.of(!0)]}function Tv(n){return n.startState.facet(el)!=n.state.facet(el)}const _C=Mv({above:!0,markers(n){let{state:e}=n,t=e.facet(el),r=[];for(let s of e.selection.ranges){let l=s==e.selection.main;if(s.empty||t.drawRangeCursor){let a=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=s.empty?s:se.cursor(s.head,s.head>s.anchor?-1:1);for(let h of dl.forRange(n,a,c))r.push(h)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Tv(n);return t&&_0(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){_0(e.state,n)},class:"cm-cursorLayer"});function _0(n,e){e.style.animationDuration=n.facet(el).cursorBlinkRate+"ms"}const HC=Mv({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:dl.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Tv(n)},class:"cm-selectionLayer"}),VC=Ru.highest(Pe.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function WC(){return $C}const QC=tt.line({class:"cm-activeLine"}),$C=Fn.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let s=n.lineBlockAt(r.head);s.from>e&&(t.push(QC.range(s.from)),e=s.from)}return tt.set(t)}},{decorations:n=>n.decorations});class ui extends Os{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ui.prototype.elementClass="";ui.prototype.toDOM=void 0;ui.prototype.mapMode=fn.TrackBefore;ui.prototype.startSide=ui.prototype.endSide=-1;ui.prototype.point=!0;const Ja=ke.define(),UC=ke.define(),Za=ke.define(),H0=ke.define({combine:n=>n.some(e=>e)});function XC(n){return[KC]}const KC=Fn.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(Za).map(e=>new W0(n,e)),this.fixed=!n.state.facet(H0);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(H0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Be.iter(this.view.state.facet(Ja),this.view.viewport.from),r=[],s=this.gutters.map(l=>new qC(l,this.view.viewport,-this.view.documentPadding.top));for(let l of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(l.type)){let a=!0;for(let c of l.type)if(c.type==$t.Text&&a){$f(t,r,c.from);for(let h of s)h.line(this.view,c,r);a=!1}else if(c.widget)for(let h of s)h.widget(this.view,c)}else if(l.type==$t.Text){$f(t,r,l.from);for(let a of s)a.line(this.view,l,r)}else if(l.widget)for(let a of s)a.widget(this.view,l);for(let l of s)l.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(Za),t=n.state.facet(Za),r=n.docChanged||n.heightChanged||n.viewportChanged||!Be.eq(n.startState.facet(Ja),n.state.facet(Ja),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(r=!0);else{r=!0;let s=[];for(let l of t){let a=e.indexOf(l);a<0?s.push(new W0(this.view,l)):(this.gutters[a].update(n),s.push(this.gutters[a]))}for(let l of this.gutters)l.dom.remove(),s.indexOf(l)<0&&l.destroy();for(let l of s)l.config.side=="after"?this.getDOMAfter().appendChild(l.dom):this.dom.appendChild(l.dom);this.gutters=s}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Pe.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let r=t.dom.offsetWidth*e.scaleX,s=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==et.LTR?{left:r,right:s}:{right:r,left:s}})});function V0(n){return Array.isArray(n)?n:[n]}function $f(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class qC{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Be.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:s}=this,l=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==s.elements.length){let c=new Dv(e,a,l,r);s.elements.push(c),s.dom.appendChild(c.dom)}else s.elements[this.i].update(e,a,l,r);this.height=t.bottom,this.i++}line(e,t,r){let s=[];$f(this.cursor,s,t.from),r.length&&(s=s.concat(r));let l=this.gutter.config.lineMarker(e,t,s);l&&s.unshift(l);let a=this.gutter;s.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),s=r?[r]:null;for(let l of e.state.facet(UC)){let a=l(e,t.widget,t);a&&(s||(s=[])).push(a)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class W0{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,s=>{let l=s.target,a;if(l!=this.dom&&this.dom.contains(l)){for(;l.parentNode!=this.dom;)l=l.parentNode;let h=l.getBoundingClientRect();a=(h.top+h.bottom)/2}else a=s.clientY;let c=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[r](e,c,s)&&s.preventDefault()});this.markers=V0(t.markers(e)),t.initialSpacer&&(this.spacer=new Dv(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=V0(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let r=e.view.viewport;return!Be.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Dv{constructor(e,t,r,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,s)}update(e,t,r,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),YC(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let r="cm-gutterElement",s=this.dom.firstChild;for(let l=0,a=0;;){let c=a,h=l<t.length?t[l++]:null,p=!1;if(h){let d=h.elementClass;d&&(r+=" "+d);for(let m=a;m<this.markers.length;m++)if(this.markers[m].compare(h)){c=m,p=!0;break}}else c=this.markers.length;for(;a<c;){let d=this.markers[a++];if(d.toDOM){d.destroy(s);let m=s.nextSibling;s.remove(),s=m}}if(!h)break;h.toDOM&&(p?s=s.nextSibling:this.dom.insertBefore(h.toDOM(e),s)),p&&a++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function YC(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const GC=ke.define(),JC=ke.define(),gs=ke.define({combine(n){return Ax(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let s in t){let l=r[s],a=t[s];r[s]=l?(c,h,p)=>l(c,h,p)||a(c,h,p):a}return r}})}});class Wh extends ui{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Qh(n,e){return n.state.facet(gs).formatNumber(e,n.state)}const ZC=Za.compute([gs],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(GC)},lineMarker(e,t,r){return r.some(s=>s.toDOM)?null:new Wh(Qh(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let s of e.state.facet(JC)){let l=s(e,t,r);if(l)return l}return null},lineMarkerChange:e=>e.startState.facet(gs)!=e.state.facet(gs),initialSpacer(e){return new Wh(Qh(e,Q0(e.state.doc.lines)))},updateSpacer(e,t){let r=Qh(t.view,Q0(t.view.state.doc.lines));return r==e.number?e:new Wh(r)},domEventHandlers:n.facet(gs).domEventHandlers,side:"before"}));function eP(n={}){return[gs.of(n),XC(),ZC]}function Q0(n){let e=9;for(;e<n;)e=e*10+9;return e}const tP=new class extends ui{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},nP=Ja.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let s=n.doc.lineAt(r.head).from;s>t&&(t=s,e.push(tP.range(s)))}return Be.of(e)});function rP(){return nP}const Lv=1024;let iP=0;class $h{constructor(e,t){this.from=e,this.to=t}}class Ae{constructor(e={}){this.id=iP++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=en.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Ae.closedBy=new Ae({deserialize:n=>n.split(" ")});Ae.openedBy=new Ae({deserialize:n=>n.split(" ")});Ae.group=new Ae({deserialize:n=>n.split(" ")});Ae.isolate=new Ae({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Ae.contextHash=new Ae({perNode:!0});Ae.lookAhead=new Ae({perNode:!0});Ae.mounted=new Ae({perNode:!0});class mu{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Ae.mounted.id]}}const sP=Object.create(null);class en{constructor(e,t,r,s=0){this.name=e,this.props=t,this.id=r,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):sP,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new en(e.name||"",t,e.id,r);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(s)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[l[0].id]=l[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ae.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let s of r.split(" "))t[s]=e[r];return r=>{for(let s=r.prop(Ae.group),l=-1;l<(s?s.length:0);l++){let a=t[l<0?r.name:s[l]];if(a)return a}}}}en.none=new en("",Object.create(null),0,8);class Md{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let s=null;for(let l of e){let a=l(r);if(a){s||(s=Object.assign({},r.props));let c=a[1],h=a[0];h.combine&&h.id in s&&(c=h.combine(s[h.id],c)),s[h.id]=c}}t.push(s?new en(r.name,s,r.id,r.flags):r)}return new Md(t)}}const Ba=new WeakMap,$0=new WeakMap;var bt;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(bt||(bt={}));class ht{constructor(e,t,r,s,l){if(this.type=e,this.children=t,this.positions=r,this.length=s,this.props=null,l&&l.length){this.props=Object.create(null);for(let[a,c]of l)this.props[typeof a=="number"?a:a.id]=c}}toString(){let e=mu.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let s=r.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Xf(this.topNode,e)}cursorAt(e,t=0,r=0){let s=Ba.get(this)||this.topNode,l=new Xf(s);return l.moveTo(e,t),Ba.set(this,l._tree),l}get topNode(){return new bn(this,0,0,null)}resolve(e,t=0){let r=tl(Ba.get(this)||this.topNode,e,t,!1);return Ba.set(this,r),r}resolveInner(e,t=0){let r=tl($0.get(this)||this.topNode,e,t,!0);return $0.set(this,r),r}resolveStack(e,t=0){return aP(this,e,t)}iterate(e){let{enter:t,leave:r,from:s=0,to:l=this.length}=e,a=e.mode||0,c=(a&bt.IncludeAnonymous)>0;for(let h=this.cursor(a|bt.IncludeAnonymous);;){let p=!1;if(h.from<=l&&h.to>=s&&(!c&&h.type.isAnonymous||t(h)!==!1)){if(h.firstChild())continue;p=!0}for(;p&&r&&(c||!h.type.isAnonymous)&&r(h),!h.nextSibling();){if(!h.parent())return;p=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Ld(en.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,s)=>new ht(this.type,t,r,s,this.propValues),e.makeTree||((t,r,s)=>new ht(en.none,t,r,s)))}static build(e){return uP(e)}}ht.empty=new ht(en.none,[],[],0);class Td{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Td(this.buffer,this.index)}}class ci{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return en.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],s=this.set.types[t],l=s.name;if(/\W/.test(l)&&!s.isError&&(l=JSON.stringify(l)),e+=4,r==e)return l;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return l+"("+a.join(",")+")"}findChild(e,t,r,s,l){let{buffer:a}=this,c=-1;for(let h=e;h!=t&&!(jv(l,s,a[h+1],a[h+2])&&(c=h,r>0));h=a[h+3]);return c}slice(e,t,r){let s=this.buffer,l=new Uint16Array(t-e),a=0;for(let c=e,h=0;c<t;){l[h++]=s[c++],l[h++]=s[c++]-r;let p=l[h++]=s[c++]-r;l[h++]=s[c++]-e,a=Math.max(a,p)}return new ci(l,a,this.set)}}function jv(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function tl(n,e,t,r){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!r&&n instanceof bn&&n.index<0?null:n.parent;if(!a)return n;n=a}let l=r?0:bt.IgnoreOverlays;if(r)for(let a=n,c=a.parent;c;a=c,c=a.parent)a instanceof bn&&a.index<0&&((s=c.enter(e,t,l))===null||s===void 0?void 0:s.from)!=a.from&&(n=c);for(;;){let a=n.enter(e,t,l);if(!a)return n;n=a}}class Iv{cursor(e=0){return new Xf(this,e)}getChild(e,t=null,r=null){let s=U0(this,e,t,r);return s.length?s[0]:null}getChildren(e,t=null,r=null){return U0(this,e,t,r)}resolve(e,t=0){return tl(this,e,t,!1)}resolveInner(e,t=0){return tl(this,e,t,!0)}matchContext(e){return Uf(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(r=t,t=s.prevSibling):t=s}return r}get node(){return this}get next(){return this.parent}}class bn extends Iv{constructor(e,t,r,s){super(),this._tree=e,this.from=t,this.index=r,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,s,l=0){for(let a=this;;){for(let{children:c,positions:h}=a._tree,p=t>0?c.length:-1;e!=p;e+=t){let d=c[e],m=h[e]+a.from;if(jv(s,r,m,m+d.length)){if(d instanceof ci){if(l&bt.ExcludeBuffers)continue;let x=d.findChild(0,d.buffer.length,t,r-m,s);if(x>-1)return new ri(new oP(a,d,e,m),null,x)}else if(l&bt.IncludeAnonymous||!d.type.isAnonymous||Dd(d)){let x;if(!(l&bt.IgnoreMounts)&&(x=mu.get(d))&&!x.overlay)return new bn(x.tree,m,e,a);let k=new bn(d,m,e,a);return l&bt.IncludeAnonymous||!k.type.isAnonymous?k:k.nextChild(t<0?d.children.length-1:0,t,r,s)}}}if(l&bt.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let s;if(!(r&bt.IgnoreOverlays)&&(s=mu.get(this._tree))&&s.overlay){let l=e-this.from;for(let{from:a,to:c}of s.overlay)if((t>0?a<=l:a<l)&&(t<0?c>=l:c>l))return new bn(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function U0(n,e,t,r){let s=n.cursor(),l=[];if(!s.firstChild())return l;if(t!=null){for(let a=!1;!a;)if(a=s.type.is(t),!s.nextSibling())return l}for(;;){if(r!=null&&s.type.is(r))return l;if(s.type.is(e)&&l.push(s.node),!s.nextSibling())return r==null?l:[]}}function Uf(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class oP{constructor(e,t,r,s){this.parent=e,this.buffer=t,this.index=r,this.start=s}}class ri extends Iv{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,r);return l<0?null:new ri(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&bt.ExcludeBuffers)return null;let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return l<0?null:new ri(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ri(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ri(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,s=this.index+4,l=r.buffer[this.index+3];if(l>s){let a=r.buffer[this.index+1];e.push(r.slice(s,l,a)),t.push(0)}return new ht(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Bv(n){if(!n.length)return null;let e=0,t=n[0];for(let l=1;l<n.length;l++){let a=n[l];(a.from>t.from||a.to<t.to)&&(t=a,e=l)}let r=t instanceof bn&&t.index<0?null:t.parent,s=n.slice();return r?s[e]=r:s.splice(e,1),new lP(s,t)}class lP{constructor(e,t){this.heads=e,this.node=t}get next(){return Bv(this.heads)}}function aP(n,e,t){let r=n.resolveInner(e,t),s=null;for(let l=r instanceof bn?r:r.context.parent;l;l=l.parent)if(l.index<0){let a=l.parent;(s||(s=[r])).push(a.resolve(e,t)),l=a}else{let a=mu.get(l.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let c=new bn(a.tree,a.overlay[0].from+l.from,-1,l);(s||(s=[r])).push(tl(c,e,t,!1))}}return s?Bv(s):r}class Xf{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof bn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=r+s.buffer[e+1],this.to=r+s.buffer[e+2],!0}yield(e){return e?e instanceof bn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:s}=this.buffer,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,r);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&bt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&bt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&bt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let s=r<0?0:this.stack[r]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(s)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(s.buffer.buffer[l+3]<this.index)return!1;({index:t,parent:r}=s)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let l=t+e,a=e<0?-1:r._tree.children.length;l!=a;l+=e){let c=r._tree.children[l];if(this.mode&bt.IncludeAnonymous||c instanceof ci||!c.type.isAnonymous||Dd(c))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let s=this.index,l=this.stack.length;l>=0;){for(let a=e;a;a=a._parent)if(a.index==s){if(s==this.index)return a;t=a,r=l+1;break e}s=this.stack[--l]}for(let s=r;s<this.stack.length;s++)t=new ri(this.buffer,t,this.stack[s]);return this.bufferNode=new ri(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&t&&t(this),s=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,s=!0}}}matchContext(e){if(!this.buffer)return Uf(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let s=e.length-1,l=this.stack.length-1;s>=0;l--){if(l<0)return Uf(this._tree,e,s);let a=r[t.buffer[this.stack[l]]];if(!a.isAnonymous){if(e[s]&&e[s]!=a.name)return!1;s--}}return!0}}function Dd(n){return n.children.some(e=>e instanceof ci||!e.type.isAnonymous||Dd(e))}function uP(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:s=Lv,reused:l=[],minRepeatType:a=r.types.length}=n,c=Array.isArray(t)?new Td(t,t.length):t,h=r.types,p=0,d=0;function m(L,F,j,W,Y,K){let{id:V,start:Q,end:J,size:ee}=c,X=d,ue=p;if(ee<0)if(c.next(),ee==-1){let E=l[V];j.push(E),W.push(Q-L);return}else if(ee==-3){p=V;return}else if(ee==-4){d=V;return}else throw new RangeError(`Unrecognized record size: ${ee}`);let de=h[V],$,re,H=Q-L;if(J-Q<=s&&(re=C(c.pos-F,Y))){let E=new Uint16Array(re.size-re.skip),D=c.pos-re.size,Z=E.length;for(;c.pos>D;)Z=P(re.start,E,Z);$=new ci(E,J-re.start,r),H=re.start-L}else{let E=c.pos-ee;c.next();let D=[],Z=[],le=V>=a?V:-1,ye=0,ne=J;for(;c.pos>E;)le>=0&&c.id==le&&c.size>=0?(c.end<=ne-s&&(b(D,Z,Q,ye,c.end,ne,le,X,ue),ye=D.length,ne=c.end),c.next()):K>2500?x(Q,E,D,Z):m(Q,E,D,Z,le,K+1);if(le>=0&&ye>0&&ye<D.length&&b(D,Z,Q,ye,Q,ne,le,X,ue),D.reverse(),Z.reverse(),le>-1&&ye>0){let he=k(de,ue);$=Ld(de,D,Z,0,D.length,0,J-Q,he,he)}else $=S(de,D,Z,J-Q,X-J,ue)}j.push($),W.push(H)}function x(L,F,j,W){let Y=[],K=0,V=-1;for(;c.pos>F;){let{id:Q,start:J,end:ee,size:X}=c;if(X>4)c.next();else{if(V>-1&&J<V)break;V<0&&(V=ee-s),Y.push(Q,J,ee),K++,c.next()}}if(K){let Q=new Uint16Array(K*4),J=Y[Y.length-2];for(let ee=Y.length-3,X=0;ee>=0;ee-=3)Q[X++]=Y[ee],Q[X++]=Y[ee+1]-J,Q[X++]=Y[ee+2]-J,Q[X++]=X;j.push(new ci(Q,Y[2]-J,r)),W.push(J-L)}}function k(L,F){return(j,W,Y)=>{let K=0,V=j.length-1,Q,J;if(V>=0&&(Q=j[V])instanceof ht){if(!V&&Q.type==L&&Q.length==Y)return Q;(J=Q.prop(Ae.lookAhead))&&(K=W[V]+Q.length+J)}return S(L,j,W,Y,K,F)}}function b(L,F,j,W,Y,K,V,Q,J){let ee=[],X=[];for(;L.length>W;)ee.push(L.pop()),X.push(F.pop()+j-Y);L.push(S(r.types[V],ee,X,K-Y,Q-K,J)),F.push(Y-j)}function S(L,F,j,W,Y,K,V){if(K){let Q=[Ae.contextHash,K];V=V?[Q].concat(V):[Q]}if(Y>25){let Q=[Ae.lookAhead,Y];V=V?[Q].concat(V):[Q]}return new ht(L,F,j,W,V)}function C(L,F){let j=c.fork(),W=0,Y=0,K=0,V=j.end-s,Q={size:0,start:0,skip:0};e:for(let J=j.pos-L;j.pos>J;){let ee=j.size;if(j.id==F&&ee>=0){Q.size=W,Q.start=Y,Q.skip=K,K+=4,W+=4,j.next();continue}let X=j.pos-ee;if(ee<0||X<J||j.start<V)break;let ue=j.id>=a?4:0,de=j.start;for(j.next();j.pos>X;){if(j.size<0)if(j.size==-3)ue+=4;else break e;else j.id>=a&&(ue+=4);j.next()}Y=de,W+=ee,K+=ue}return(F<0||W==L)&&(Q.size=W,Q.start=Y,Q.skip=K),Q.size>4?Q:void 0}function P(L,F,j){let{id:W,start:Y,end:K,size:V}=c;if(c.next(),V>=0&&W<a){let Q=j;if(V>4){let J=c.pos-(V-4);for(;c.pos>J;)j=P(L,F,j)}F[--j]=Q,F[--j]=K-L,F[--j]=Y-L,F[--j]=W}else V==-3?p=W:V==-4&&(d=W);return j}let M=[],T=[];for(;c.pos>0;)m(n.start||0,n.bufferStart||0,M,T,-1,0);let B=(e=n.length)!==null&&e!==void 0?e:M.length?T[0]+M[0].length:0;return new ht(h[n.topID],M.reverse(),T.reverse(),B)}const X0=new WeakMap;function eu(n,e){if(!n.isAnonymous||e instanceof ci||e.type!=n)return 1;let t=X0.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof ht)){t=1;break}t+=eu(n,r)}X0.set(e,t)}return t}function Ld(n,e,t,r,s,l,a,c,h){let p=0;for(let b=r;b<s;b++)p+=eu(n,e[b]);let d=Math.ceil(p*1.5/8),m=[],x=[];function k(b,S,C,P,M){for(let T=C;T<P;){let B=T,L=S[T],F=eu(n,b[T]);for(T++;T<P;T++){let j=eu(n,b[T]);if(F+j>=d)break;F+=j}if(T==B+1){if(F>d){let j=b[B];k(j.children,j.positions,0,j.children.length,S[B]+M);continue}m.push(b[B])}else{let j=S[T-1]+b[T-1].length-L;m.push(Ld(n,b,S,B,T,L,j,null,h))}x.push(L+M-l)}}return k(e,t,r,s,0),(c||h)(m,x,a)}class zi{constructor(e,t,r,s,l=!1,a=!1){this.from=e,this.to=t,this.tree=r,this.offset=s,this.open=(l?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let s=[new zi(0,e.length,e,0,!1,r)];for(let l of t)l.to>e.length&&s.push(l);return s}static applyChanges(e,t,r=128){if(!t.length)return e;let s=[],l=1,a=e.length?e[0]:null;for(let c=0,h=0,p=0;;c++){let d=c<t.length?t[c]:null,m=d?d.fromA:1e9;if(m-h>=r)for(;a&&a.from<m;){let x=a;if(h>=x.from||m<=x.to||p){let k=Math.max(x.from,h)-p,b=Math.min(x.to,m)-p;x=k>=b?null:new zi(k,b,x.tree,x.offset+p,c>0,!!d)}if(x&&s.push(x),a.to>m)break;a=l<e.length?e[l++]:null}if(!d)break;h=d.toA,p=d.toA-d.toB}return s}}let zv=class{startParse(e,t,r){return typeof e=="string"&&(e=new cP(e)),r=r?r.length?r.map(s=>new $h(s.from,s.to)):[new $h(0,0)]:[new $h(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let s=this.startParse(e,t,r);for(;;){let l=s.advance();if(l)return l}}};class cP{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Ae({perNode:!0});var K0={};class yu{constructor(e,t,r,s,l,a,c,h,p,d=0,m){this.p=e,this.stack=t,this.state=r,this.reducePos=s,this.pos=l,this.score=a,this.buffer=c,this.bufferBase=h,this.curContext=p,this.lookAhead=d,this.parent=m}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let s=e.parser.context;return new yu(e,[],t,r,r,0,[],0,s?new q0(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,s=e&65535,{parser:l}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let c=l.dynamicPrecedence(s);if(c&&(this.score+=c),r==0){this.pushState(l.getGoto(this.state,s,!0),this.reducePos),s<l.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(s,this.reducePos);return}let h=this.stack.length-(r-1)*3-(e&262144?6:0),p=h?this.stack[h-2]:this.p.ranges[0].from,d=this.reducePos-p;d>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(p==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=d):this.p.lastBigReductionSize<d&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=p,this.p.lastBigReductionSize=d));let m=h?this.stack[h-1]:0,x=this.bufferBase+this.buffer.length-m;if(s<l.minRepeatTerm||e&131072){let k=l.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,p,k,x+4,!0)}if(e&262144)this.state=this.stack[h];else{let k=this.stack[h-3];this.state=l.getGoto(k,s,!0)}for(;this.stack.length>h;)this.stack.pop();this.reduceContext(s,p)}storeNode(e,t,r,s=4,l=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,c=this.buffer.length;if(c==0&&a.parent&&(c=a.bufferBase-a.parent.bufferBase,a=a.parent),c>0&&a.buffer[c-4]==0&&a.buffer[c-1]>-1){if(t==r)return;if(a.buffer[c-2]>=t){a.buffer[c-2]=r;return}}}if(!l||this.pos==r)this.buffer.push(e,t,r,s);else{let a=this.buffer.length;if(a>0&&(this.buffer[a-4]!=0||this.buffer[a-1]<0)){let c=!1;for(let h=a;h>0&&this.buffer[h-2]>r;h-=4)if(this.buffer[h-1]>=0){c=!0;break}if(c)for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4)}this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=r,this.buffer[a+3]=s}}shift(e,t,r,s){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let l=e,{parser:a}=this.p;(s>this.pos||t<=a.maxNode)&&(this.pos=s,a.stateFlag(l,1)||(this.reducePos=s)),this.pushState(l,r),this.shiftContext(t,r),t<=a.maxNode&&this.buffer.push(t,r,s,4)}else this.pos=s,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,s,4)}apply(e,t,r,s){e&65536?this.reduce(e):this.shift(e,t,r,s)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(r,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new yu(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new hP(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if((r&65536)==0)return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let l=0,a;l<t.length;l+=2)(a=t[l+1])!=this.state&&this.p.parser.hasAction(a,e)&&s.push(t[l],a);if(this.stack.length<120)for(let l=0;s.length<8&&l<t.length;l+=2){let a=t[l+1];s.some((c,h)=>h&1&&c==a)||s.push(t[l],a)}t=s}let r=[];for(let s=0;s<t.length&&r.length<4;s+=2){let l=t[s+1];if(l==this.state)continue;let a=this.split();a.pushState(l,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[s],this.pos),a.reducePos=this.pos,a.score-=200,r.push(a)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let r=t>>19,s=t&65535,l=this.stack.length-r*3;if(l<0||e.getGoto(this.stack[l],s,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;t=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(s,l)=>{if(!t.includes(s))return t.push(s),e.allActions(s,a=>{if(!(a&393216))if(a&65536){let c=(a>>19)-l;if(c>1){let h=a&65535,p=this.stack.length-c*3;if(p>=0&&e.getGoto(this.stack[p],h,!1)>=0)return c<<19|65536|h}}else{let c=r(a,l+1);if(c!=null)return c}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new q0(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class q0{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class hP{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class xu{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new xu(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new xu(this.stack,this.pos,this.index)}}function za(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,s=0;r<n.length;){let l=0;for(;;){let a=n.charCodeAt(r++),c=!1;if(a==126){l=65535;break}a>=92&&a--,a>=34&&a--;let h=a-32;if(h>=46&&(h-=46,c=!0),l+=h,c)break;l*=46}t?t[s++]=l:t=new e(l)}return t}class tu{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Y0=new tu;class fP{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Y0,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,s=this.rangeIndex,l=this.pos+e;for(;l<r.from;){if(!s)return null;let a=this.ranges[--s];l-=r.from-a.to,r=a}for(;t<0?l>r.to:l>=r.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];l+=a.from-r.to,r=a}return l}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,s;if(t>=0&&t<this.chunk.length)r=this.pos+e,s=this.chunk.charCodeAt(t);else{let l=this.resolveOffset(e,1);if(l==null)return-1;if(r=l,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let a=this.rangeIndex,c=this.range;for(;c.to<=r;)c=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>c.to&&(this.chunk2=this.chunk2.slice(0,c.to-r)),s=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),s}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Y0,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(r+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return r}}class bs{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;dP(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}bs.prototype.contextual=bs.prototype.fallback=bs.prototype.extend=!1;bs.prototype.fallback=bs.prototype.extend=!1;class ju{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function dP(n,e,t,r,s,l){let a=0,c=1<<r,{dialect:h}=t.p.parser;e:for(;(c&n[a])!=0;){let p=n[a+1];for(let k=a+3;k<p;k+=2)if((n[k+1]&c)>0){let b=n[k];if(h.allows(b)&&(e.token.value==-1||e.token.value==b||pP(b,e.token.value,s,l))){e.acceptToken(b);break}}let d=e.next,m=0,x=n[a+2];if(e.next<0&&x>m&&n[p+x*3-3]==65535){a=n[p+x*3-1];continue e}for(;m<x;){let k=m+x>>1,b=p+k+(k<<1),S=n[b],C=n[b+1]||65536;if(d<S)x=k;else if(d>=C)m=k+1;else{a=n[b+2],e.advance();continue e}}break}}function G0(n,e,t){for(let r=e,s;(s=n[r])!=65535;r++)if(s==t)return r-e;return-1}function pP(n,e,t,r){let s=G0(t,r,e);return s<0||G0(t,r,n)<s}const un=typeof process<"u"&&K0&&/\bparse\b/.test(K0.LOG);let Uh=null;function J0(n,e,t){let r=n.cursor(bt.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class gP{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?J0(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?J0(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],s=this.index[t];if(s==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let l=r.children[s],a=this.start[t]+r.positions[s];if(a>e)return this.nextStart=a,null;if(l instanceof ht){if(a==e){if(a<this.safeFrom)return null;let c=a+l.length;if(c<=this.safeTo){let h=l.prop(Ae.lookAhead);if(!h||c+h<this.fragment.to)return l}}this.index[t]++,a+l.length>=Math.max(this.safeFrom,e)&&(this.trees.push(l),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+l.length}}}class mP{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new tu)}getActions(e){let t=0,r=null,{parser:s}=e.p,{tokenizers:l}=s,a=s.stateSlot(e.state,3),c=e.curContext?e.curContext.hash:0,h=0;for(let p=0;p<l.length;p++){if((1<<p&a)==0)continue;let d=l[p],m=this.tokens[p];if(!(r&&!d.fallback)&&((d.contextual||m.start!=e.pos||m.mask!=a||m.context!=c)&&(this.updateCachedToken(m,d,e),m.mask=a,m.context=c),m.lookAhead>m.end+25&&(h=Math.max(m.lookAhead,h)),m.value!=0)){let x=t;if(m.extended>-1&&(t=this.addActions(e,m.extended,m.end,t)),t=this.addActions(e,m.value,m.end,t),!d.extend&&(r=m,t>x))break}}for(;this.actions.length>t;)this.actions.pop();return h&&e.setLookAhead(h),!r&&e.pos==this.stream.end&&(r=new tu,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new tu,{pos:r,p:s}=e;return t.start=r,t.end=Math.min(r+1,s.stream.end),t.value=r==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,r){let s=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(s,e),r),e.value>-1){let{parser:l}=r.p;for(let a=0;a<l.specialized.length;a++)if(l.specialized[a]==e.value){let c=l.specializers[a](this.stream.read(e.start,e.end),r);if(c>=0&&r.p.parser.dialect.allows(c>>1)){(c&1)==0?e.value=c>>1:e.extended=c>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,r,s){for(let l=0;l<s;l+=3)if(this.actions[l]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=r,s}addActions(e,t,r,s){let{state:l}=e,{parser:a}=e.p,{data:c}=a;for(let h=0;h<2;h++)for(let p=a.stateSlot(l,h?2:1);;p+=3){if(c[p]==65535)if(c[p+1]==1)p=kr(c,p+2);else{s==0&&c[p+1]==2&&(s=this.putAction(kr(c,p+2),t,r,s));break}c[p]==t&&(s=this.putAction(kr(c,p+1),t,r,s))}return s}}class yP{constructor(e,t,r,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new fP(t,s),this.tokens=new mP(e,this.stream),this.topTerm=e.top[1];let{from:l}=s[0];this.stacks=[yu.start(this,e.top[0],l)],this.fragments=r.length&&this.stream.end-l>e.bufferLength*4?new gP(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],s,l;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let c=e[a];for(;;){if(this.tokens.mainToken=null,c.pos>t)r.push(c);else{if(this.advanceStack(c,r,e))continue;{s||(s=[],l=[]),s.push(c);let h=this.tokens.getMainToken(c);l.push(h.value,h.end)}}break}}if(!r.length){let a=s&&kP(s);if(a)return un&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw un&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let a=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,l,r);if(a)return un&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(r.length>a)for(r.sort((c,h)=>h.score-c.score);r.length>a;)r.pop();r.some(c=>c.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let a=0;a<r.length-1;a++){let c=r[a];for(let h=a+1;h<r.length;h++){let p=r[h];if(c.sameState(p)||c.buffer.length>500&&p.buffer.length>500)if((c.score-p.score||c.buffer.length-p.buffer.length)>0)r.splice(h--,1);else{r.splice(a--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let s=e.pos,{parser:l}=this,a=un?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let p=e.curContext&&e.curContext.tracker.strict,d=p?e.curContext.hash:0;for(let m=this.fragments.nodeAt(s);m;){let x=this.parser.nodeSet.types[m.type.id]==m.type?l.getGoto(e.state,m.type.id):-1;if(x>-1&&m.length&&(!p||(m.prop(Ae.contextHash)||0)==d))return e.useNode(m,x),un&&console.log(a+this.stackID(e)+` (via reuse of ${l.getName(m.type.id)})`),!0;if(!(m instanceof ht)||m.children.length==0||m.positions[0]>0)break;let k=m.children[0];if(k instanceof ht&&m.positions[0]==0)m=k;else break}}let c=l.stateSlot(e.state,4);if(c>0)return e.reduce(c),un&&console.log(a+this.stackID(e)+` (via always-reduce ${l.getName(c&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let p=0;p<h.length;){let d=h[p++],m=h[p++],x=h[p++],k=p==h.length||!r,b=k?e:e.split(),S=this.tokens.mainToken;if(b.apply(d,m,S?S.start:b.pos,x),un&&console.log(a+this.stackID(b)+` (via ${(d&65536)==0?"shift":`reduce of ${l.getName(d&65535)}`} for ${l.getName(m)} @ ${s}${b==e?"":", split"})`),k)return!0;b.pos>s?t.push(b):r.push(b)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return Z0(e,t),!0}}runRecovery(e,t,r){let s=null,l=!1;for(let a=0;a<e.length;a++){let c=e[a],h=t[a<<1],p=t[(a<<1)+1],d=un?this.stackID(c)+" -> ":"";if(c.deadEnd&&(l||(l=!0,c.restart(),un&&console.log(d+this.stackID(c)+" (restarted)"),this.advanceFully(c,r))))continue;let m=c.split(),x=d;for(let k=0;k<10&&m.forceReduce()&&(un&&console.log(x+this.stackID(m)+" (via force-reduce)"),!this.advanceFully(m,r));k++)un&&(x=this.stackID(m)+" -> ");for(let k of c.recoverByInsert(h))un&&console.log(d+this.stackID(k)+" (via recover-insert)"),this.advanceFully(k,r);this.stream.end>c.pos?(p==c.pos&&(p++,h=0),c.recoverByDelete(h,p),un&&console.log(d+this.stackID(c)+` (via recover-delete ${this.parser.getName(h)})`),Z0(c,r)):(!s||s.score<c.score)&&(s=c)}return s}stackToTree(e){return e.close(),ht.build({buffer:xu.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Uh||(Uh=new WeakMap)).get(e);return t||Uh.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Z0(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class xP{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const Xh=n=>n;class vP{constructor(e){this.start=e.start,this.shift=e.shift||Xh,this.reduce=e.reduce||Xh,this.reuse=e.reuse||Xh,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class vu extends zv{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let c=0;c<e.repeatNodeCount;c++)t.push("");let r=Object.keys(e.topRules).map(c=>e.topRules[c][1]),s=[];for(let c=0;c<t.length;c++)s.push([]);function l(c,h,p){s[c].push([h,h.deserialize(String(p))])}if(e.nodeProps)for(let c of e.nodeProps){let h=c[0];typeof h=="string"&&(h=Ae[h]);for(let p=1;p<c.length;){let d=c[p++];if(d>=0)l(d,h,c[p++]);else{let m=c[p+-d];for(let x=-d;x>0;x--)l(c[p++],h,m);p++}}}this.nodeSet=new Md(t.map((c,h)=>en.define({name:h>=this.minRepeatTerm?void 0:c,id:h,props:s[h],top:r.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Lv;let a=za(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let c=0;c<this.specializerSpecs.length;c++)this.specialized[c]=this.specializerSpecs[c].term;this.specializers=this.specializerSpecs.map(ey),this.states=za(e.states,Uint32Array),this.data=za(e.stateData),this.goto=za(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(c=>typeof c=="number"?new bs(a,c):c),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let s=new yP(this,e,t,r);for(let l of this.wrappers)s=l(s,e,t,r);return s}getGoto(e,t,r=!1){let s=this.goto;if(t>=s[0])return-1;for(let l=s[t+1];;){let a=s[l++],c=a&1,h=s[l++];if(c&&r)return h;for(let p=l+(a>>1);l<p;l++)if(s[l]==e)return h;if(c)return-1}}hasAction(e,t){let r=this.data;for(let s=0;s<2;s++)for(let l=this.stateSlot(e,s?2:1),a;;l+=3){if((a=r[l])==65535)if(r[l+1]==1)a=r[l=kr(r,l+2)];else{if(r[l+1]==2)return kr(r,l+2);break}if(a==t||a==0)return kr(r,l+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t?!0:null)}allActions(e,t){let r=this.stateSlot(e,4),s=r?t(r):void 0;for(let l=this.stateSlot(e,1);s==null;l+=3){if(this.data[l]==65535)if(this.data[l+1]==1)l=kr(this.data,l+2);else break;s=t(kr(this.data,l+1))}return s}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=kr(this.data,r+2);else break;if((this.data[r+2]&1)==0){let s=this.data[r+1];t.some((l,a)=>a&1&&l==s)||t.push(this.data[r],s)}}return t}configure(e){let t=Object.assign(Object.create(vu.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let s=e.tokenizers.find(l=>l.from==r);return s?s.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,s)=>{let l=e.specializers.find(c=>c.from==r.external);if(!l)return r;let a=Object.assign(Object.assign({},r),{external:l.to});return t.specializers[s]=ey(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let l of e.split(" ")){let a=t.indexOf(l);a>=0&&(r[a]=!0)}let s=null;for(let l=0;l<t.length;l++)if(!r[l])for(let a=this.dialects[t[l]],c;(c=this.data[a++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[c]=1;return new xP(e,r,s)}static deserialize(e){return new vu(e)}}function kr(n,e){return n[e]|n[e+1]<<16}function kP(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function ey(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}let wP=0,wr=class Kf{constructor(e,t,r,s){this.name=e,this.set=t,this.base=r,this.modified=s,this.id=wP++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof Kf&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let s=new Kf(r,[],null,[]);if(s.set.push(s),t)for(let l of t.set)s.set.push(l);return s}static defineModifier(e){let t=new ku(e);return r=>r.modified.indexOf(t)>-1?r:ku.get(r.base||r,r.modified.concat(t).sort((s,l)=>s.id-l.id))}},bP=0;class ku{constructor(e){this.name=e,this.instances=[],this.id=bP++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(c=>c.base==e&&SP(t,c.modified));if(r)return r;let s=[],l=new wr(e.name,s,e,t);for(let c of t)c.instances.push(l);let a=OP(t);for(let c of e.set)if(!c.modified.length)for(let h of a)s.push(ku.get(c,h));return l}}function SP(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function OP(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,s=e.length;r<s;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function Fv(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let s of t.split(" "))if(s){let l=[],a=2,c=s;for(let m=0;;){if(c=="..."&&m>0&&m+3==s.length){a=1;break}let x=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!x)throw new RangeError("Invalid path: "+s);if(l.push(x[0]=="*"?"":x[0][0]=='"'?JSON.parse(x[0]):x[0]),m+=x[0].length,m==s.length)break;let k=s[m++];if(m==s.length&&k=="!"){a=0;break}if(k!="/")throw new RangeError("Invalid path: "+s);c=s.slice(m)}let h=l.length-1,p=l[h];if(!p)throw new RangeError("Invalid path: "+s);let d=new nl(r,a,h>0?l.slice(0,h):null);e[p]=d.sort(e[p])}}return _v.add(e)}const _v=new Ae({combine(n,e){let t,r,s;for(;n||e;){if(!n||e&&n.depth>=e.depth?(s=e,e=e.next):(s=n,n=n.next),t&&t.mode==s.mode&&!s.context&&!t.context)continue;let l=new nl(s.tags,s.mode,s.context);t?t.next=l:r=l,t=l}return r}});class nl{constructor(e,t,r,s){this.tags=e,this.mode=t,this.context=r,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}nl.empty=new nl([],2,null);function Hv(n,e){let t=Object.create(null);for(let l of n)if(!Array.isArray(l.tag))t[l.tag.id]=l.class;else for(let a of l.tag)t[a.id]=l.class;let{scope:r,all:s=null}=e||{};return{style:l=>{let a=s;for(let c of l)for(let h of c.set){let p=t[h.id];if(p){a=a?a+" "+p:p;break}}return a},scope:r}}function CP(n,e){let t=null;for(let r of n){let s=r.style(e);s&&(t=t?t+" "+s:s)}return t}function PP(n,e,t,r=0,s=n.length){let l=new NP(r,Array.isArray(e)?e:[e],t);l.highlightRange(n.cursor(),r,s,"",l.highlighters),l.flush(s)}class NP{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,s,l){let{type:a,from:c,to:h}=e;if(c>=r||h<=t)return;a.isTop&&(l=this.highlighters.filter(k=>!k.scope||k.scope(a)));let p=s,d=EP(e)||nl.empty,m=CP(l,d.tags);if(m&&(p&&(p+=" "),p+=m,d.mode==1&&(s+=(s?" ":"")+m)),this.startSpan(Math.max(t,c),p),d.opaque)return;let x=e.tree&&e.tree.prop(Ae.mounted);if(x&&x.overlay){let k=e.node.enter(x.overlay[0].from+c,1),b=this.highlighters.filter(C=>!C.scope||C.scope(x.tree.type)),S=e.firstChild();for(let C=0,P=c;;C++){let M=C<x.overlay.length?x.overlay[C]:null,T=M?M.from+c:h,B=Math.max(t,P),L=Math.min(r,T);if(B<L&&S)for(;e.from<L&&(this.highlightRange(e,B,L,s,l),this.startSpan(Math.min(L,e.to),p),!(e.to>=T||!e.nextSibling())););if(!M||T>r)break;P=M.to+c,P>t&&(this.highlightRange(k.cursor(),Math.max(t,M.from+c),Math.min(r,P),"",b),this.startSpan(Math.min(r,P),p))}S&&e.parent()}else if(e.firstChild()){x&&(s="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,s,l),this.startSpan(Math.min(r,e.to),p)}while(e.nextSibling());e.parent()}}}function EP(n){let e=n.type.prop(_v);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const ae=wr.define,Fa=ae(),Gr=ae(),ty=ae(Gr),ny=ae(Gr),Jr=ae(),_a=ae(Jr),Kh=ae(Jr),er=ae(),Ti=ae(er),Jn=ae(),Zn=ae(),qf=ae(),So=ae(qf),Ha=ae(),U={comment:Fa,lineComment:ae(Fa),blockComment:ae(Fa),docComment:ae(Fa),name:Gr,variableName:ae(Gr),typeName:ty,tagName:ae(ty),propertyName:ny,attributeName:ae(ny),className:ae(Gr),labelName:ae(Gr),namespace:ae(Gr),macroName:ae(Gr),literal:Jr,string:_a,docString:ae(_a),character:ae(_a),attributeValue:ae(_a),number:Kh,integer:ae(Kh),float:ae(Kh),bool:ae(Jr),regexp:ae(Jr),escape:ae(Jr),color:ae(Jr),url:ae(Jr),keyword:Jn,self:ae(Jn),null:ae(Jn),atom:ae(Jn),unit:ae(Jn),modifier:ae(Jn),operatorKeyword:ae(Jn),controlKeyword:ae(Jn),definitionKeyword:ae(Jn),moduleKeyword:ae(Jn),operator:Zn,derefOperator:ae(Zn),arithmeticOperator:ae(Zn),logicOperator:ae(Zn),bitwiseOperator:ae(Zn),compareOperator:ae(Zn),updateOperator:ae(Zn),definitionOperator:ae(Zn),typeOperator:ae(Zn),controlOperator:ae(Zn),punctuation:qf,separator:ae(qf),bracket:So,angleBracket:ae(So),squareBracket:ae(So),paren:ae(So),brace:ae(So),content:er,heading:Ti,heading1:ae(Ti),heading2:ae(Ti),heading3:ae(Ti),heading4:ae(Ti),heading5:ae(Ti),heading6:ae(Ti),contentSeparator:ae(er),list:ae(er),quote:ae(er),emphasis:ae(er),strong:ae(er),link:ae(er),monospace:ae(er),strikethrough:ae(er),inserted:ae(),deleted:ae(),changed:ae(),invalid:ae(),meta:Ha,documentMeta:ae(Ha),annotation:ae(Ha),processingInstruction:ae(Ha),definition:wr.defineModifier("definition"),constant:wr.defineModifier("constant"),function:wr.defineModifier("function"),standard:wr.defineModifier("standard"),local:wr.defineModifier("local"),special:wr.defineModifier("special")};for(let n in U){let e=U[n];e instanceof wr&&(e.name=n)}Hv([{tag:U.link,class:"tok-link"},{tag:U.heading,class:"tok-heading"},{tag:U.emphasis,class:"tok-emphasis"},{tag:U.strong,class:"tok-strong"},{tag:U.keyword,class:"tok-keyword"},{tag:U.atom,class:"tok-atom"},{tag:U.bool,class:"tok-bool"},{tag:U.url,class:"tok-url"},{tag:U.labelName,class:"tok-labelName"},{tag:U.inserted,class:"tok-inserted"},{tag:U.deleted,class:"tok-deleted"},{tag:U.literal,class:"tok-literal"},{tag:U.string,class:"tok-string"},{tag:U.number,class:"tok-number"},{tag:[U.regexp,U.escape,U.special(U.string)],class:"tok-string2"},{tag:U.variableName,class:"tok-variableName"},{tag:U.local(U.variableName),class:"tok-variableName tok-local"},{tag:U.definition(U.variableName),class:"tok-variableName tok-definition"},{tag:U.special(U.variableName),class:"tok-variableName2"},{tag:U.definition(U.propertyName),class:"tok-propertyName tok-definition"},{tag:U.typeName,class:"tok-typeName"},{tag:U.namespace,class:"tok-namespace"},{tag:U.className,class:"tok-className"},{tag:U.macroName,class:"tok-macroName"},{tag:U.propertyName,class:"tok-propertyName"},{tag:U.operator,class:"tok-operator"},{tag:U.comment,class:"tok-comment"},{tag:U.meta,class:"tok-meta"},{tag:U.invalid,class:"tok-invalid"},{tag:U.punctuation,class:"tok-punctuation"}]);const fs=63,ry=64,AP=1,RP=2,Vv=3,MP=4,Wv=5,TP=6,DP=7,Qv=65,LP=66,jP=8,IP=9,BP=10,zP=11,FP=12,$v=13,_P=19,HP=20,VP=29,WP=33,QP=34,$P=47,UP=0,jd=1,Yf=2,rl=3,Gf=4;class ji{constructor(e,t,r){this.parent=e,this.depth=t,this.type=r,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+r}}ji.top=new ji(null,-1,UP);function Ho(n,e){for(let t=0,r=e-n.pos-1;;r--,t++){let s=n.peek(r);if(Nr(s)||s==-1)return t}}function Jf(n){return n==32||n==9}function Nr(n){return n==10||n==13}function Uv(n){return Jf(n)||Nr(n)}function Bi(n){return n<0||Uv(n)}const XP=new vP({start:ji.top,reduce(n,e){return n.type==rl&&(e==HP||e==QP)?n.parent:n},shift(n,e,t,r){if(e==Vv)return new ji(n,Ho(r,r.pos),jd);if(e==Qv||e==Wv)return new ji(n,Ho(r,r.pos),Yf);if(e==fs)return n.parent;if(e==_P||e==WP)return new ji(n,0,rl);if(e==$v&&n.type==Gf)return n.parent;if(e==$P){let s=/[1-9]/.exec(r.read(r.pos,t.pos));if(s)return new ji(n,n.depth+ +s[0],Gf)}return n},hash(n){return n.hash}});function Es(n,e,t=0){return n.peek(t)==e&&n.peek(t+1)==e&&n.peek(t+2)==e&&Bi(n.peek(t+3))}const KP=new ju((n,e)=>{if(n.next==-1&&e.canShift(ry))return n.acceptToken(ry);let t=n.peek(-1);if((Nr(t)||t<0)&&e.context.type!=rl){if(Es(n,45))if(e.canShift(fs))n.acceptToken(fs);else return n.acceptToken(AP,3);if(Es(n,46))if(e.canShift(fs))n.acceptToken(fs);else return n.acceptToken(RP,3);let r=0;for(;n.next==32;)r++,n.advance();(r<e.context.depth||r==e.context.depth&&e.context.type==jd&&(n.next!=45||!Bi(n.peek(1))))&&n.next!=-1&&!Nr(n.next)&&n.next!=35&&n.acceptToken(fs,-r)}},{contextual:!0}),qP=new ju((n,e)=>{if(e.context.type==rl){n.next==63&&(n.advance(),Bi(n.next)&&n.acceptToken(DP));return}if(n.next==45)n.advance(),Bi(n.next)&&n.acceptToken(e.context.type==jd&&e.context.depth==Ho(n,n.pos-1)?MP:Vv);else if(n.next==63)n.advance(),Bi(n.next)&&n.acceptToken(e.context.type==Yf&&e.context.depth==Ho(n,n.pos-1)?TP:Wv);else{let t=n.pos;for(;;)if(Jf(n.next)){if(n.pos==t)return;n.advance()}else if(n.next==33)Xv(n);else if(n.next==38)Zf(n);else if(n.next==42){Zf(n);break}else if(n.next==39||n.next==34){if(Id(n,!0))break;return}else if(n.next==91||n.next==123){if(!GP(n))return;break}else{Kv(n,!0,!1,0);break}for(;Jf(n.next);)n.advance();if(n.next==58){if(n.pos==t&&e.canShift(VP))return;let r=n.peek(1);Bi(r)&&n.acceptTokenTo(e.context.type==Yf&&e.context.depth==Ho(n,t)?LP:Qv,t)}}},{contextual:!0});function YP(n){return n>32&&n<127&&n!=34&&n!=37&&n!=44&&n!=60&&n!=62&&n!=92&&n!=94&&n!=96&&n!=123&&n!=124&&n!=125}function iy(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function sy(n,e){return n.next==37?(n.advance(),iy(n.next)&&n.advance(),iy(n.next)&&n.advance(),!0):YP(n.next)||e&&n.next==44?(n.advance(),!0):!1}function Xv(n){if(n.advance(),n.next==60){for(n.advance();;)if(!sy(n,!0)){n.next==62&&n.advance();break}}else for(;sy(n,!1););}function Zf(n){for(n.advance();!Bi(n.next)&&wu(n.tag)!="f";)n.advance()}function Id(n,e){let t=n.next,r=!1,s=n.pos;for(n.advance();;){let l=n.next;if(l<0)break;if(n.advance(),l==t)if(l==39)if(n.next==39)n.advance();else break;else break;else if(l==92&&t==34)n.next>=0&&n.advance();else if(Nr(l)){if(e)return!1;r=!0}else if(e&&n.pos>=s+1024)return!1}return!r}function GP(n){for(let e=[],t=n.pos+1024;;)if(n.next==91||n.next==123)e.push(n.next),n.advance();else if(n.next==39||n.next==34){if(!Id(n,!0))return!1}else if(n.next==93||n.next==125){if(e[e.length-1]!=n.next-2)return!1;if(e.pop(),n.advance(),!e.length)return!0}else{if(n.next<0||n.pos>t||Nr(n.next))return!1;n.advance()}}const JP="iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif";function wu(n){return n<33?"u":n>125?"s":JP[n-33]}function qh(n,e){let t=wu(n);return t!="u"&&!(e&&t=="f")}function Kv(n,e,t,r){if(wu(n.next)=="s"||(n.next==63||n.next==58||n.next==45)&&qh(n.peek(1),t))n.advance();else return!1;let s=n.pos;for(;;){let l=n.next,a=0,c=r+1;for(;Uv(l);){if(Nr(l)){if(e)return!1;c=0}else c++;l=n.peek(++a)}if(!(l>=0&&(l==58?qh(n.peek(a+1),t):l==35?n.peek(a-1)!=32:qh(l,t)))||!t&&c<=r||c==0&&!t&&(Es(n,45,a)||Es(n,46,a)))break;if(e&&wu(l)=="f")return!1;for(let p=a;p>=0;p--)n.advance();if(e&&n.pos>s+1024)return!1}return!0}const ZP=new ju((n,e)=>{if(n.next==33)Xv(n),n.acceptToken(FP);else if(n.next==38||n.next==42){let t=n.next==38?BP:zP;Zf(n),n.acceptToken(t)}else n.next==39||n.next==34?(Id(n,!1),n.acceptToken(IP)):Kv(n,!1,e.context.type==rl,e.context.depth)&&n.acceptToken(jP)}),eN=new ju((n,e)=>{let t=e.context.type==Gf?e.context.depth:-1,r=n.pos;e:for(;;){let s=0,l=n.next;for(;l==32;)l=n.peek(++s);if(!s&&(Es(n,45,s)||Es(n,46,s))||!Nr(l)&&(t<0&&(t=Math.max(e.context.depth+1,s)),s<t))break;for(;;){if(n.next<0)break e;let a=Nr(n.next);if(n.advance(),a)continue e;r=n.pos}}n.acceptTokenTo($v,r)}),tN=Fv({DirectiveName:U.keyword,DirectiveContent:U.attributeValue,"DirectiveEnd DocEnd":U.meta,QuotedLiteral:U.string,BlockLiteralHeader:U.special(U.string),BlockLiteralContent:U.content,Literal:U.content,"Key/Literal Key/QuotedLiteral":U.definition(U.propertyName),"Anchor Alias":U.labelName,Tag:U.typeName,Comment:U.lineComment,": , -":U.separator,"?":U.punctuation,"[ ]":U.squareBracket,"{ }":U.brace}),nN=vu.deserialize({version:14,states:"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y",stateData:";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O",goto:",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv",nodeNames:" DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document",maxTerm:74,context:XP,nodeProps:[["isolate",-3,8,9,14,""],["openedBy",18,"[",32,"{"],["closedBy",19,"]",33,"}"]],propSources:[tN],skippedNodes:[0],repeatNodeCount:6,tokenData:"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P",tokenizers:[KP,qP,ZP,eN,0,1],topRules:{Stream:[0,15]},tokenPrec:0});var Yh;const ms=new Ae;function rN(n){return ke.define({combine:n?e=>e.concat(n):void 0})}const iN=new Ae;class In{constructor(e,t,r=[],s=""){this.data=e,this.name=s,je.prototype.hasOwnProperty("tree")||Object.defineProperty(je.prototype,"tree",{get(){return or(this)}}),this.parser=t,this.extension=[Rs.of(this),je.languageData.of((l,a,c)=>{let h=oy(l,a,c),p=h.type.prop(ms);if(!p)return[];let d=l.facet(p),m=h.type.prop(iN);if(m){let x=h.resolve(a-h.from,c);for(let k of m)if(k.test(x,l)){let b=l.facet(k.facet);return k.type=="replace"?b:b.concat(d)}}return d})].concat(r)}isActiveAt(e,t,r=-1){return oy(e,t,r).type.prop(ms)==this.data}findRegions(e){let t=e.facet(Rs);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],s=(l,a)=>{if(l.prop(ms)==this.data){r.push({from:a,to:a+l.length});return}let c=l.prop(Ae.mounted);if(c){if(c.tree.prop(ms)==this.data){if(c.overlay)for(let h of c.overlay)r.push({from:h.from+a,to:h.to+a});else r.push({from:a,to:a+l.length});return}else if(c.overlay){let h=r.length;if(s(c.tree,c.overlay[0].from+a),r.length>h)return}}for(let h=0;h<l.children.length;h++){let p=l.children[h];p instanceof ht&&s(p,l.positions[h]+a)}};return s(or(e),0),r}get allowsNesting(){return!0}}In.setState=mt.define();function oy(n,e,t){let r=n.facet(Rs),s=or(n).topNode;if(!r||r.allowsNesting)for(let l=s;l;l=l.enter(e,t,bt.ExcludeBuffers))l.type.isTop&&(s=l);return s}class bu extends In{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=rN(e.languageData);return new bu(t,e.parser.configure({props:[ms.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new bu(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function or(n){let e=n.field(In.state,!1);return e?e.tree:ht.empty}class sN{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let Oo=null;class Su{constructor(e,t,r=[],s,l,a,c,h){this.parser=e,this.state=t,this.fragments=r,this.tree=s,this.treeLen=l,this.viewport=a,this.skipped=c,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Su(e,t,[],ht.empty,0,r,[],null)}startParse(){return this.parser.startParse(new sN(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=ht.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(zi.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(zi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Oo;Oo=this;try{return e()}finally{Oo=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=ly(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:s,treeLen:l,viewport:a,skipped:c}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((p,d,m,x)=>h.push({fromA:p,toA:d,fromB:m,toB:x})),r=zi.applyChanges(r,h),s=ht.empty,l=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){c=[];for(let p of this.skipped){let d=e.mapPos(p.from,1),m=e.mapPos(p.to,-1);d<m&&c.push({from:d,to:m})}}}return new Su(this.parser,t,r,s,l,a,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:s,to:l}=this.skipped[r];s<e.to&&l>e.from&&(this.fragments=ly(this.fragments,s,l),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends zv{createParse(t,r,s){let l=s[0].from,a=s[s.length-1].to;return{parsedPos:l,advance(){let h=Oo;if(h){for(let p of s)h.tempSkipped.push(p);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=a,new ht(en.none,[],[],a-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Oo}}function ly(n,e,t){return zi.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class As{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new As(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Su.create(e.facet(Rs).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new As(r)}}In.state=Wi.define({create:As.init,update(n,e){for(let t of e.effects)if(t.is(In.setState))return t.value;return e.startState.facet(Rs)!=e.state.facet(Rs)?As.init(e.state):n.apply(e)}});let qv=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(qv=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Gh=typeof navigator<"u"&&(!((Yh=navigator.scheduling)===null||Yh===void 0)&&Yh.isInputPending)?()=>navigator.scheduling.isInputPending():null,oN=Fn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(In.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(In.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=qv(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:s}}=this.view,l=r.field(In.state);if(l.tree==l.context.tree&&l.context.isDone(s+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!Gh?Math.max(25,e.timeRemaining()-5):1e9),c=l.context.treeLen<s&&r.doc.length>s+1e3,h=l.context.work(()=>Gh&&Gh()||Date.now()>a,s+(c?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:In.setState.of(new As(l.context))})),this.chunkBudget>0&&!(h&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>rr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Rs=ke.define({combine(n){return n.length?n[0]:null},enables:n=>[In.state,oN,Pe.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class lN{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const aN=ke.define(),Bd=ke.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Ou(n){let e=n.facet(Bd);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Cu(n,e){let t="",r=n.tabSize,s=n.facet(Bd)[0];if(s=="	"){for(;e>=r;)t+="	",e-=r;s=" "}for(let l=0;l<e;l++)t+=s;return t}function Yv(n,e){n instanceof je&&(n=new Iu(n));for(let r of n.state.facet(aN)){let s=r(n,e);if(s!==void 0)return s}let t=or(n.state);return t.length>=e?uN(n,t,e):null}class Iu{constructor(e,t={}){this.state=e,this.options=t,this.unit=Ou(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:l}=this.options;return s!=null&&s>=r.from&&s<=r.to?l&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:r.text.slice(s-r.from),from:s}:{text:r.text.slice(0,s-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:s}=this.lineAt(e,t);return r.slice(e-s,Math.min(r.length,e+100-s))}column(e,t=1){let{text:r,from:s}=this.lineAt(e,t),l=this.countColumn(r,e-s),a=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return a>-1&&(l+=a-this.countColumn(r,r.search(/\S|$/))),l}countColumn(e,t=e.length){return Mu(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:s}=this.lineAt(e,t),l=this.options.overrideIndentation;if(l){let a=l(s);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Gv=new Ae;function uN(n,e,t){let r=e.resolveStack(t),s=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(s!=r.node){let l=[];for(let a=s;a&&!(a.from<r.node.from||a.to>r.node.to||a.from==r.node.from&&a.type==r.node.type);a=a.parent)l.push(a);for(let a=l.length-1;a>=0;a--)r={node:l[a],next:r}}return Jv(r,n,t)}function Jv(n,e,t){for(let r=n;r;r=r.next){let s=hN(r.node);if(s)return s(zd.create(e,t,r))}return 0}function cN(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function hN(n){let e=n.type.prop(Gv);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Ae.closedBy))){let s=n.lastChild,l=s&&r.indexOf(s.name)>-1;return a=>Zv(a,!0,1,void 0,l&&!cN(a)?s.from:void 0)}return n.parent==null?fN:null}function fN(){return 0}class zd extends Iu{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new zd(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(dN(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return Jv(this.context.next,this.base,this.pos)}}function dN(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function pN(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,l=n.state.doc.lineAt(t.from),a=s==null||s<=l.from?l.to:Math.min(l.to,s);for(let c=t.to;;){let h=e.childAfter(c);if(!h||h==r)return null;if(!h.type.isSkipped){if(h.from>=a)return null;let p=/^ */.exec(l.text.slice(t.to-l.from))[0].length;return{from:t.from,to:t.to+p}}c=h.to}}function ay({closing:n,align:e=!0,units:t=1}){return r=>Zv(r,e,t,n)}function Zv(n,e,t,r,s){let l=n.textAfter,a=l.match(/^\s*/)[0].length,c=r&&l.slice(a,a+r.length)==r||s==n.pos+a,h=e?pN(n):null;return h?c?n.column(h.from):n.column(h.to):n.baseIndent+(c?0:n.unit*t)}const gN=new Ae;function mN(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}class Bu{constructor(e,t){this.specs=e;let r;function s(c){let h=oi.newName();return(r||(r=Object.create(null)))["."+h]=c,h}const l=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,a=t.scope;this.scope=a instanceof In?c=>c.prop(ms)==a.data:a?c=>c==a:void 0,this.style=Hv(e.map(c=>({tag:c.tag,class:c.class||s(Object.assign({},c,{tag:null}))})),{all:l}).style,this.module=r?new oi(r):null,this.themeType=t.themeType}static define(e,t){return new Bu(e,t||{})}}const ed=ke.define(),yN=ke.define({combine(n){return n.length?[n[0]]:null}});function Jh(n){let e=n.facet(ed);return e.length?e:n.facet(yN)}function xN(n,e){let t=[kN],r;return n instanceof Bu&&(n.module&&t.push(Pe.styleModule.of(n.module)),r=n.themeType),r?t.push(ed.computeN([Pe.darkTheme],s=>s.facet(Pe.darkTheme)==(r=="dark")?[n]:[])):t.push(ed.of(n)),t}class vN{constructor(e){this.markCache=Object.create(null),this.tree=or(e.state),this.decorations=this.buildDeco(e,Jh(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=or(e.state),r=Jh(e.state),s=r!=Jh(e.startState),{viewport:l}=e.view,a=e.changes.mapPos(this.decoratedTo,1);t.length<l.to&&!s&&t.type==this.tree.type&&a>=l.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=l.to)}buildDeco(e,t){if(!t||!this.tree.length)return tt.none;let r=new Ko;for(let{from:s,to:l}of e.visibleRanges)PP(this.tree,t,(a,c,h)=>{r.add(a,c,this.markCache[h]||(this.markCache[h]=tt.mark({class:h})))},s,l);return r.finish()}}const kN=Ru.high(Fn.fromClass(vN,{decorations:n=>n.decorations})),wN=1e4,bN="()[]{}",SN=new Ae;function td(n,e,t){let r=n.prop(e<0?Ae.openedBy:Ae.closedBy);if(r)return r;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function nd(n){let e=n.type.prop(SN);return e?e(n.node):n}function ys(n,e,t,r={}){let s=r.maxScanDistance||wN,l=r.brackets||bN,a=or(n),c=a.resolveInner(e,t);for(let h=c;h;h=h.parent){let p=td(h.type,t,l);if(p&&h.from<h.to){let d=nd(h);if(d&&(t>0?e>=d.from&&e<d.to:e>d.from&&e<=d.to))return ON(n,e,t,h,d,p,l)}}return CN(n,e,t,a,c.type,s,l)}function ON(n,e,t,r,s,l,a){let c=r.parent,h={from:s.from,to:s.to},p=0,d=c==null?void 0:c.cursor();if(d&&(t<0?d.childBefore(r.from):d.childAfter(r.to)))do if(t<0?d.to<=r.from:d.from>=r.to){if(p==0&&l.indexOf(d.type.name)>-1&&d.from<d.to){let m=nd(d);return{start:h,end:m?{from:m.from,to:m.to}:void 0,matched:!0}}else if(td(d.type,t,a))p++;else if(td(d.type,-t,a)){if(p==0){let m=nd(d);return{start:h,end:m&&m.from<m.to?{from:m.from,to:m.to}:void 0,matched:!1}}p--}}while(t<0?d.prevSibling():d.nextSibling());return{start:h,matched:!1}}function CN(n,e,t,r,s,l,a){let c=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),h=a.indexOf(c);if(h<0||h%2==0!=t>0)return null;let p={from:t<0?e-1:e,to:t>0?e+1:e},d=n.doc.iterRange(e,t>0?n.doc.length:0),m=0;for(let x=0;!d.next().done&&x<=l;){let k=d.value;t<0&&(x+=k.length);let b=e+x*t;for(let S=t>0?0:k.length-1,C=t>0?k.length:-1;S!=C;S+=t){let P=a.indexOf(k[S]);if(!(P<0||r.resolveInner(b+S,1).type!=s))if(P%2==0==t>0)m++;else{if(m==1)return{start:p,end:{from:b+S,to:b+S+1},matched:P>>1==h>>1};m--}}t>0&&(x+=k.length)}return d.done?{start:p,matched:!1}:null}const PN=Object.create(null),uy=[en.none],cy=[],hy=Object.create(null),NN=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])NN[n]=EN(PN,e);function Zh(n,e){cy.indexOf(n)>-1||(cy.push(n),console.warn(e))}function EN(n,e){let t=[];for(let c of e.split(" ")){let h=[];for(let p of c.split(".")){let d=n[p]||U[p];d?typeof d=="function"?h.length?h=h.map(d):Zh(p,`Modifier ${p} used at start of tag`):h.length?Zh(p,`Tag ${p} used as modifier`):h=Array.isArray(d)?d:[d]:Zh(p,`Unknown highlighting tag ${p}`)}for(let p of h)t.push(p)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),s=r+" "+t.map(c=>c.id),l=hy[s];if(l)return l.id;let a=hy[s]=en.define({id:uy.length,name:r,props:[Fv({[r]:t})]});return uy.push(a),a.id}et.RTL,et.LTR;const AN=bu.define({name:"yaml",parser:nN.configure({props:[Gv.add({Stream:n=>{for(let e=n.node.resolve(n.pos,-1);e&&e.to>=n.pos;e=e.parent){if(e.name=="BlockLiteralContent"&&e.from<e.to)return n.baseIndentFor(e);if(e.name=="BlockLiteral")return n.baseIndentFor(e)+n.unit;if(e.name=="BlockSequence"||e.name=="BlockMapping")return n.column(e.from,1);if(e.name=="QuotedLiteral")return null;if(e.name=="Literal"){let t=n.column(e.from,1);if(t==n.lineIndent(e.from,1))return t;if(e.to>n.pos)return null}}return null},FlowMapping:ay({closing:"}"}),FlowSequence:ay({closing:"]"})}),gN.add({"FlowMapping FlowSequence":mN,"Item Pair BlockLiteral":(n,e)=>({from:e.doc.lineAt(n.from).to,to:n.to})})]}),languageData:{commentTokens:{line:"#"},indentOnInput:/^\s*[\]\}]$/}});function RN(){return new lN(AN)}const MN="#e5c07b",fy="#e06c75",TN="#56b6c2",DN="#ffffff",nu="#abb2bf",rd="#7d8799",LN="#61afef",jN="#98c379",dy="#d19a66",IN="#c678dd",BN="#21252b",py="#2c313a",gy="#282c34",ef="#353a42",zN="#3E4451",my="#528bff",FN=Pe.theme({"&":{color:nu,backgroundColor:gy},".cm-content":{caretColor:my},".cm-cursor, .cm-dropCursor":{borderLeftColor:my},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:zN},".cm-panels":{backgroundColor:BN,color:nu},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:gy,color:rd,border:"none"},".cm-activeLineGutter":{backgroundColor:py},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:ef},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:ef,borderBottomColor:ef},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:py,color:nu}}},{dark:!0}),_N=Bu.define([{tag:U.keyword,color:IN},{tag:[U.name,U.deleted,U.character,U.propertyName,U.macroName],color:fy},{tag:[U.function(U.variableName),U.labelName],color:LN},{tag:[U.color,U.constant(U.name),U.standard(U.name)],color:dy},{tag:[U.definition(U.name),U.separator],color:nu},{tag:[U.typeName,U.className,U.number,U.changed,U.annotation,U.modifier,U.self,U.namespace],color:MN},{tag:[U.operator,U.operatorKeyword,U.url,U.escape,U.regexp,U.link,U.special(U.string)],color:TN},{tag:[U.meta,U.comment],color:rd},{tag:U.strong,fontWeight:"bold"},{tag:U.emphasis,fontStyle:"italic"},{tag:U.strikethrough,textDecoration:"line-through"},{tag:U.link,color:rd,textDecoration:"underline"},{tag:U.heading,fontWeight:"bold",color:fy},{tag:[U.atom,U.bool,U.special(U.variableName)],color:dy},{tag:[U.processingInstruction,U.string,U.inserted],color:jN},{tag:U.invalid,color:DN}]),HN=[FN,xN(_N)],VN=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=_d(n.state,t.from);return r.line?WN(n):r.block?$N(n):!1};function Fd(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(r(t.update(s)),!0):!1}}const WN=Fd(KN,0),QN=Fd(e1,0),$N=Fd((n,e)=>e1(n,e,XN(e)),0);function _d(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const Co=50;function UN(n,{open:e,close:t},r,s){let l=n.sliceDoc(r-Co,r),a=n.sliceDoc(s,s+Co),c=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(a)[0].length,p=l.length-c;if(l.slice(p-e.length,p)==e&&a.slice(h,h+t.length)==t)return{open:{pos:r-c,margin:c&&1},close:{pos:s+h,margin:h&&1}};let d,m;s-r<=2*Co?d=m=n.sliceDoc(r,s):(d=n.sliceDoc(r,r+Co),m=n.sliceDoc(s-Co,s));let x=/^\s*/.exec(d)[0].length,k=/\s*$/.exec(m)[0].length,b=m.length-k-t.length;return d.slice(x,x+e.length)==e&&m.slice(b,b+t.length)==t?{open:{pos:r+x+e.length,margin:/\s/.test(d.charAt(x+e.length))?1:0},close:{pos:s-k-t.length,margin:/\s/.test(m.charAt(b-1))?1:0}}:null}function XN(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),s=t.to<=r.to?r:n.doc.lineAt(t.to);s.from>r.from&&s.from==t.to&&(s=t.to==r.to+1?r:n.doc.lineAt(t.to-1));let l=e.length-1;l>=0&&e[l].to>r.from?e[l].to=s.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:s.to})}return e}function e1(n,e,t=e.selection.ranges){let r=t.map(l=>_d(e,l.from).block);if(!r.every(l=>l))return null;let s=t.map((l,a)=>UN(e,r[a],l.from,l.to));if(n!=2&&!s.every(l=>l))return{changes:e.changes(t.map((l,a)=>s[a]?[]:[{from:l.from,insert:r[a].open+" "},{from:l.to,insert:" "+r[a].close}]))};if(n!=1&&s.some(l=>l)){let l=[];for(let a=0,c;a<s.length;a++)if(c=s[a]){let h=r[a],{open:p,close:d}=c;l.push({from:p.pos-h.open.length,to:p.pos+p.margin},{from:d.pos-d.margin,to:d.pos+h.close.length})}return{changes:l}}return null}function KN(n,e,t=e.selection.ranges){let r=[],s=-1;for(let{from:l,to:a}of t){let c=r.length,h=1e9,p=_d(e,l).line;if(p){for(let d=l;d<=a;){let m=e.doc.lineAt(d);if(m.from>s&&(l==a||a>m.from)){s=m.from;let x=/^\s*/.exec(m.text)[0].length,k=x==m.length,b=m.text.slice(x,x+p.length)==p?x:-1;x<m.text.length&&x<h&&(h=x),r.push({line:m,comment:b,token:p,indent:x,empty:k,single:!1})}d=m.to+1}if(h<1e9)for(let d=c;d<r.length;d++)r[d].indent<r[d].line.text.length&&(r[d].indent=h);r.length==c+1&&(r[c].single=!0)}}if(n!=2&&r.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:c,token:h,indent:p,empty:d,single:m}of r)(m||!d)&&l.push({from:c.from+p,insert:h+" "});let a=e.changes(l);return{changes:a,selection:e.selection.map(a,1)}}else if(n!=1&&r.some(l=>l.comment>=0)){let l=[];for(let{line:a,comment:c,token:h}of r)if(c>=0){let p=a.from+c,d=p+h.length;a.text[d-a.from]==" "&&d++,l.push({from:p,to:d})}return{changes:l}}return null}function Is(n,e){return se.create(n.ranges.map(e),n.mainIndex)}function Hn(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Vn({state:n,dispatch:e},t){let r=Is(n.selection,t);return r.eq(n.selection,!0)?!1:(e(Hn(n,r)),!0)}function zu(n,e){return se.cursor(e?n.to:n.from)}function t1(n,e){return Vn(n,t=>t.empty?n.moveByChar(t,e):zu(t,e))}function zt(n){return n.textDirectionAt(n.state.selection.main.head)==et.LTR}const n1=n=>t1(n,!zt(n)),r1=n=>t1(n,zt(n));function i1(n,e){return Vn(n,t=>t.empty?n.moveByGroup(t,e):zu(t,e))}const qN=n=>i1(n,!zt(n)),YN=n=>i1(n,zt(n));function GN(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Fu(n,e,t){let r=or(n).resolveInner(e.head),s=t?Ae.closedBy:Ae.openedBy;for(let h=e.head;;){let p=t?r.childAfter(h):r.childBefore(h);if(!p)break;GN(n,p,s)?r=p:h=t?p.to:p.from}let l=r.type.prop(s),a,c;return l&&(a=t?ys(n,r.from,1):ys(n,r.to,-1))&&a.matched?c=t?a.end.to:a.end.from:c=t?r.to:r.from,se.cursor(c,t?-1:1)}const JN=n=>Vn(n,e=>Fu(n.state,e,!zt(n))),ZN=n=>Vn(n,e=>Fu(n.state,e,zt(n)));function s1(n,e){return Vn(n,t=>{if(!t.empty)return zu(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const o1=n=>s1(n,!1),l1=n=>s1(n,!0);function a1(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,s;if(e){for(let l of n.state.facet(Pe.scrollMargins)){let a=l(n);a!=null&&a.top&&(t=Math.max(a==null?void 0:a.top,t)),a!=null&&a.bottom&&(r=Math.max(a==null?void 0:a.bottom,r))}s=n.scrollDOM.clientHeight-t-r}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function u1(n,e){let t=a1(n),{state:r}=n,s=Is(r.selection,a=>a.empty?n.moveVertically(a,e,t.height):zu(a,e));if(s.eq(r.selection))return!1;let l;if(t.selfScroll){let a=n.coordsAtPos(r.selection.main.head),c=n.scrollDOM.getBoundingClientRect(),h=c.top+t.marginTop,p=c.bottom-t.marginBottom;a&&a.top>h&&a.bottom<p&&(l=Pe.scrollIntoView(s.main.head,{y:"start",yMargin:a.top-h}))}return n.dispatch(Hn(r,s),{effects:l}),!0}const yy=n=>u1(n,!1),id=n=>u1(n,!0);function hi(n,e,t){let r=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?r.to:r.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==r.from&&r.length){let l=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;l&&e.head!=r.from+l&&(s=se.cursor(r.from+l))}return s}const eE=n=>Vn(n,e=>hi(n,e,!0)),tE=n=>Vn(n,e=>hi(n,e,!1)),nE=n=>Vn(n,e=>hi(n,e,!zt(n))),rE=n=>Vn(n,e=>hi(n,e,zt(n))),iE=n=>Vn(n,e=>se.cursor(n.lineBlockAt(e.head).from,1)),sE=n=>Vn(n,e=>se.cursor(n.lineBlockAt(e.head).to,-1));function oE(n,e,t){let r=!1,s=Is(n.selection,l=>{let a=ys(n,l.head,-1)||ys(n,l.head,1)||l.head>0&&ys(n,l.head-1,1)||l.head<n.doc.length&&ys(n,l.head+1,-1);if(!a||!a.end)return l;r=!0;let c=a.start.from==l.head?a.end.to:a.end.from;return se.cursor(c)});return r?(e(Hn(n,s)),!0):!1}const lE=({state:n,dispatch:e})=>oE(n,e);function On(n,e){let t=Is(n.state.selection,r=>{let s=e(r);return se.range(r.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Hn(n.state,t)),!0)}function c1(n,e){return On(n,t=>n.moveByChar(t,e))}const h1=n=>c1(n,!zt(n)),f1=n=>c1(n,zt(n));function d1(n,e){return On(n,t=>n.moveByGroup(t,e))}const aE=n=>d1(n,!zt(n)),uE=n=>d1(n,zt(n)),cE=n=>On(n,e=>Fu(n.state,e,!zt(n))),hE=n=>On(n,e=>Fu(n.state,e,zt(n)));function p1(n,e){return On(n,t=>n.moveVertically(t,e))}const g1=n=>p1(n,!1),m1=n=>p1(n,!0);function y1(n,e){return On(n,t=>n.moveVertically(t,e,a1(n).height))}const xy=n=>y1(n,!1),vy=n=>y1(n,!0),fE=n=>On(n,e=>hi(n,e,!0)),dE=n=>On(n,e=>hi(n,e,!1)),pE=n=>On(n,e=>hi(n,e,!zt(n))),gE=n=>On(n,e=>hi(n,e,zt(n))),mE=n=>On(n,e=>se.cursor(n.lineBlockAt(e.head).from)),yE=n=>On(n,e=>se.cursor(n.lineBlockAt(e.head).to)),ky=({state:n,dispatch:e})=>(e(Hn(n,{anchor:0})),!0),wy=({state:n,dispatch:e})=>(e(Hn(n,{anchor:n.doc.length})),!0),by=({state:n,dispatch:e})=>(e(Hn(n,{anchor:n.selection.main.anchor,head:0})),!0),Sy=({state:n,dispatch:e})=>(e(Hn(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),xE=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),vE=({state:n,dispatch:e})=>{let t=_u(n).map(({from:r,to:s})=>se.range(r,Math.min(s+1,n.doc.length)));return e(n.update({selection:se.create(t),userEvent:"select"})),!0},kE=({state:n,dispatch:e})=>{let t=Is(n.selection,r=>{let s=or(n),l=s.resolveStack(r.from,1);if(r.empty){let a=s.resolveStack(r.from,-1);a.node.from>=l.node.from&&a.node.to<=l.node.to&&(l=a)}for(let a=l;a;a=a.next){let{node:c}=a;if((c.from<r.from&&c.to>=r.to||c.to>r.to&&c.from<=r.from)&&a.next)return se.range(c.to,c.from)}return r});return t.eq(n.selection)?!1:(e(Hn(n,t)),!0)};function x1(n,e){let{state:t}=n,r=t.selection,s=t.selection.ranges.slice();for(let l of t.selection.ranges){let a=t.doc.lineAt(l.head);if(e?a.to<n.state.doc.length:a.from>0)for(let c=l;;){let h=n.moveVertically(c,e);if(h.head<a.from||h.head>a.to){s.some(p=>p.head==h.head)||s.push(h);break}else{if(h.head==c.head)break;c=h}}}return s.length==r.ranges.length?!1:(n.dispatch(Hn(t,se.create(s,s.length-1))),!0)}const wE=n=>x1(n,!1),bE=n=>x1(n,!0),SE=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=se.create([t.main]):t.main.empty||(r=se.create([se.cursor(t.main.head)])),r?(e(Hn(n,r)),!0):!1};function pl(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,s=r.changeByRange(l=>{let{from:a,to:c}=l;if(a==c){let h=e(l);h<a?(t="delete.backward",h=Va(n,h,!1)):h>a&&(t="delete.forward",h=Va(n,h,!0)),a=Math.min(a,h),c=Math.max(c,h)}else a=Va(n,a,!1),c=Va(n,c,!0);return a==c?{range:l}:{changes:{from:a,to:c},range:se.cursor(a,a<l.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(r.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Pe.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Va(n,e,t){if(n instanceof Pe)for(let r of n.state.facet(Pe.atomicRanges).map(s=>s(n)))r.between(e,e,(s,l)=>{s<e&&l>e&&(e=t?l:s)});return e}const v1=(n,e,t)=>pl(n,r=>{let s=r.from,{state:l}=n,a=l.doc.lineAt(s),c,h;if(t&&!e&&s>a.from&&s<a.from+200&&!/[^ \t]/.test(c=a.text.slice(0,s-a.from))){if(c[c.length-1]=="	")return s-1;let p=Mu(c,l.tabSize),d=p%Ou(l)||Ou(l);for(let m=0;m<d&&c[c.length-1-m]==" ";m++)s--;h=s}else h=Qt(a.text,s-a.from,e,e)+a.from,h==s&&a.number!=(e?l.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(h-a.from,s-a.from))&&(h=Qt(a.text,h-a.from,!1,!1)+a.from);return h}),sd=n=>v1(n,!1,!0),k1=n=>v1(n,!0,!1),w1=(n,e)=>pl(n,t=>{let r=t.head,{state:s}=n,l=s.doc.lineAt(r),a=s.charCategorizer(r);for(let c=null;;){if(r==(e?l.to:l.from)){r==t.head&&l.number!=(e?s.doc.lines:1)&&(r+=e?1:-1);break}let h=Qt(l.text,r-l.from,e)+l.from,p=l.text.slice(Math.min(r,h)-l.from,Math.max(r,h)-l.from),d=a(p);if(c!=null&&d!=c)break;(p!=" "||r!=t.head)&&(c=d),r=h}return r}),b1=n=>w1(n,!1),OE=n=>w1(n,!0),CE=n=>pl(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),PE=n=>pl(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),NE=n=>pl(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),EE=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Te.of(["",""])},range:se.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},AE=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let s=r.from,l=n.doc.lineAt(s),a=s==l.from?s-1:Qt(l.text,s-l.from,!1)+l.from,c=s==l.to?s+1:Qt(l.text,s-l.from,!0)+l.from;return{changes:{from:a,to:c,insert:n.doc.slice(s,c).append(n.doc.slice(a,s))},range:se.cursor(c)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function _u(n){let e=[],t=-1;for(let r of n.selection.ranges){let s=n.doc.lineAt(r.from),l=n.doc.lineAt(r.to);if(!r.empty&&r.to==l.from&&(l=n.doc.lineAt(r.to-1)),t>=s.number){let a=e[e.length-1];a.to=l.to,a.ranges.push(r)}else e.push({from:s.from,to:l.to,ranges:[r]});t=l.number+1}return e}function S1(n,e,t){if(n.readOnly)return!1;let r=[],s=[];for(let l of _u(n)){if(t?l.to==n.doc.length:l.from==0)continue;let a=n.doc.lineAt(t?l.to+1:l.from-1),c=a.length+1;if(t){r.push({from:l.to,to:a.to},{from:l.from,insert:a.text+n.lineBreak});for(let h of l.ranges)s.push(se.range(Math.min(n.doc.length,h.anchor+c),Math.min(n.doc.length,h.head+c)))}else{r.push({from:a.from,to:l.from},{from:l.to,insert:n.lineBreak+a.text});for(let h of l.ranges)s.push(se.range(h.anchor-c,h.head-c))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:se.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const RE=({state:n,dispatch:e})=>S1(n,e,!1),ME=({state:n,dispatch:e})=>S1(n,e,!0);function O1(n,e,t){if(n.readOnly)return!1;let r=[];for(let s of _u(n))t?r.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):r.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const TE=({state:n,dispatch:e})=>O1(n,e,!1),DE=({state:n,dispatch:e})=>O1(n,e,!0),LE=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(_u(e).map(({from:s,to:l})=>(s>0?s--:l<e.doc.length&&l++,{from:s,to:l}))),r=Is(e.selection,s=>{let l;if(n.lineWrapping){let a=n.lineBlockAt(s.head),c=n.coordsAtPos(s.head,s.assoc||1);c&&(l=a.bottom+n.documentTop-c.bottom+n.defaultLineHeight/2)}return n.moveVertically(s,!0,l)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function jE(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=or(n).resolveInner(e),r=t.childBefore(e),s=t.childAfter(e),l;return r&&s&&r.to<=e&&s.from>=e&&(l=r.type.prop(Ae.closedBy))&&l.indexOf(s.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(r.to,s.from))?{from:r.to,to:s.from}:null}const Oy=C1(!1),IE=C1(!0);function C1(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(s=>{let{from:l,to:a}=s,c=e.doc.lineAt(l),h=!n&&l==a&&jE(e,l);n&&(l=a=(a<=c.to?c:e.doc.lineAt(a)).to);let p=new Iu(e,{simulateBreak:l,simulateDoubleBreak:!!h}),d=Yv(p,l);for(d==null&&(d=Mu(/^\s*/.exec(e.doc.lineAt(l).text)[0],e.tabSize));a<c.to&&/\s/.test(c.text[a-c.from]);)a++;h?{from:l,to:a}=h:l>c.from&&l<c.from+100&&!/\S/.test(c.text.slice(0,l))&&(l=c.from);let m=["",Cu(e,d)];return h&&m.push(Cu(e,p.lineIndent(c.from,-1))),{changes:{from:l,to:a,insert:Te.of(m)},range:se.cursor(l+1+m[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Hd(n,e){let t=-1;return n.changeByRange(r=>{let s=[];for(let a=r.from;a<=r.to;){let c=n.doc.lineAt(a);c.number>t&&(r.empty||r.to>c.from)&&(e(c,s,r),t=c.number),a=c.to+1}let l=n.changes(s);return{changes:s,range:se.range(l.mapPos(r.anchor,1),l.mapPos(r.head,1))}})}const BE=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new Iu(n,{overrideIndentation:l=>{let a=t[l];return a??-1}}),s=Hd(n,(l,a,c)=>{let h=Yv(r,l.from);if(h==null)return;/\S/.test(l.text)||(h=0);let p=/^\s*/.exec(l.text)[0],d=Cu(n,h);(p!=d||c.from<l.from+p.length)&&(t[l.from]=h,a.push({from:l.from,to:l.from+p.length,insert:d}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},zE=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Hd(n,(t,r)=>{r.push({from:t.from,insert:n.facet(Bd)})}),{userEvent:"input.indent"})),!0),FE=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Hd(n,(t,r)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let l=Mu(s,n.tabSize),a=0,c=Cu(n,Math.max(0,l-Ou(n)));for(;a<s.length&&a<c.length&&s.charCodeAt(a)==c.charCodeAt(a);)a++;r.push({from:t.from+a,to:t.from+s.length,insert:c.slice(a)})}),{userEvent:"delete.dedent"})),!0),_E=n=>(n.setTabFocusMode(),!0),HE=[{key:"Ctrl-b",run:n1,shift:h1,preventDefault:!0},{key:"Ctrl-f",run:r1,shift:f1},{key:"Ctrl-p",run:o1,shift:g1},{key:"Ctrl-n",run:l1,shift:m1},{key:"Ctrl-a",run:iE,shift:mE},{key:"Ctrl-e",run:sE,shift:yE},{key:"Ctrl-d",run:k1},{key:"Ctrl-h",run:sd},{key:"Ctrl-k",run:CE},{key:"Ctrl-Alt-h",run:b1},{key:"Ctrl-o",run:EE},{key:"Ctrl-t",run:AE},{key:"Ctrl-v",run:id}],VE=[{key:"ArrowLeft",run:n1,shift:h1,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:qN,shift:aE,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:nE,shift:pE,preventDefault:!0},{key:"ArrowRight",run:r1,shift:f1,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:YN,shift:uE,preventDefault:!0},{mac:"Cmd-ArrowRight",run:rE,shift:gE,preventDefault:!0},{key:"ArrowUp",run:o1,shift:g1,preventDefault:!0},{mac:"Cmd-ArrowUp",run:ky,shift:by},{mac:"Ctrl-ArrowUp",run:yy,shift:xy},{key:"ArrowDown",run:l1,shift:m1,preventDefault:!0},{mac:"Cmd-ArrowDown",run:wy,shift:Sy},{mac:"Ctrl-ArrowDown",run:id,shift:vy},{key:"PageUp",run:yy,shift:xy},{key:"PageDown",run:id,shift:vy},{key:"Home",run:tE,shift:dE,preventDefault:!0},{key:"Mod-Home",run:ky,shift:by},{key:"End",run:eE,shift:fE,preventDefault:!0},{key:"Mod-End",run:wy,shift:Sy},{key:"Enter",run:Oy,shift:Oy},{key:"Mod-a",run:xE},{key:"Backspace",run:sd,shift:sd,preventDefault:!0},{key:"Delete",run:k1,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:b1,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:OE,preventDefault:!0},{mac:"Mod-Backspace",run:PE,preventDefault:!0},{mac:"Mod-Delete",run:NE,preventDefault:!0}].concat(HE.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),WE=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:JN,shift:cE},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:ZN,shift:hE},{key:"Alt-ArrowUp",run:RE},{key:"Shift-Alt-ArrowUp",run:TE},{key:"Alt-ArrowDown",run:ME},{key:"Shift-Alt-ArrowDown",run:DE},{key:"Mod-Alt-ArrowUp",run:wE},{key:"Mod-Alt-ArrowDown",run:bE},{key:"Escape",run:SE},{key:"Mod-Enter",run:IE},{key:"Alt-l",mac:"Ctrl-l",run:vE},{key:"Mod-i",run:kE,preventDefault:!0},{key:"Mod-[",run:FE},{key:"Mod-]",run:zE},{key:"Mod-Alt-\\",run:BE},{key:"Shift-Mod-k",run:LE},{key:"Shift-Mod-\\",run:lE},{key:"Mod-/",run:VN},{key:"Alt-A",run:QN},{key:"Ctrl-m",mac:"Shift-Alt-m",run:_E}].concat(VE),QE=n=>{const{state:e}=n,t=e.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:"	"},range:se.cursor(r.from+1)}));return n.dispatch(t),!0},$E=Rd.of([{key:"Tab",run:QE}]);class UE extends ul{toDOM(){const e=document.createElement("span");return e.className="cm-space-dot",e.textContent="",e}}class XE extends ul{toDOM(){const e=document.createElement("span");return e.className="cm-tab-arrow",e.textContent="",e}}const KE=Fn.fromClass(class{constructor(n){km(this,"decorations");this.decorations=this.buildDecorations(n)}update(n){(n.docChanged||n.viewportChanged)&&(this.decorations=this.buildDecorations(n.view))}buildDecorations(n){const e=[];for(const{from:t,to:r}of n.visibleRanges){const s=n.state.doc.sliceString(t,r);for(let l=0;l<s.length;l++){const a=s[l],c=t+l;a===" "?e.push({from:c,to:c+1,decoration:tt.replace({widget:new UE})}):a==="	"&&e.push({from:c,to:c+1,decoration:tt.replace({widget:new XE})})}}return tt.set(e.map(t=>t.decoration.range(t.from,t.to)))}},{decorations:n=>n.decorations}),qE=Pe.theme({"&":{backgroundColor:"#ffffff",color:"#000000"},".cm-content":{caretColor:"#000000"},".cm-gutters":{backgroundColor:"#f5f5f5",color:"#999999",border:"none"},".cm-activeLineGutter":{backgroundColor:"#e8e8e8"},".cm-activeLine":{backgroundColor:"#f0f0f0"},".cm-space-dot":{color:"#999999"},".cm-tab-arrow":{color:"#999999",display:"inline-block",width:"calc(4ch)",textAlign:"left"}}),YE=Pe.theme({".cm-space-dot":{color:"#666666"},".cm-tab-arrow":{color:"#666666",display:"inline-block",width:"calc(4ch)",textAlign:"left"}});function Cy(n){switch(n){case"light":return[qE];case"dark":default:return[HN,YE]}}const GE=O.forwardRef(function({value:e,onChange:t,colorScheme:r,onFocusChange:s},l){const a=O.useRef(null),c=O.useRef(null),h=O.useRef(new al),p=O.useRef(s);p.current=s,O.useImperativeHandle(l,()=>({focus:()=>{var m;(m=c.current)==null||m.focus()},blur:()=>{var m;(m=c.current)==null||m.contentDOM.blur()}}),[]),O.useEffect(()=>{if(!a.current||c.current)return;const m=je.create({doc:e,extensions:[eP(),rP(),WC(),FC(),RN(),$E,Rd.of(WE),je.tabSize.of(4),KE,Pe.updateListener.of(x=>{var k;x.docChanged&&t(x.state.doc.toString()),x.focusChanged&&((k=p.current)==null||k.call(p,x.view.hasFocus))}),h.current.of(Cy(r)),Pe.lineWrapping]});return c.current=new Pe({state:m,parent:a.current}),()=>{var x;(x=c.current)==null||x.destroy(),c.current=null}},[]);const d=O.useCallback(m=>{const x=c.current;if(!x)return;const k=x.state.doc.toString();k!==m&&x.dispatch({changes:{from:0,to:k.length,insert:m}})},[]);return O.useEffect(()=>{d(e)},[e,d]),O.useEffect(()=>{const m=c.current;m&&m.dispatch({effects:h.current.reconfigure(Cy(r))})},[r]),v.jsx("div",{ref:a,className:"h-full w-full overflow-auto [&_.cm-editor]:h-full [&_.cm-scroller]:overflow-auto",style:{fontSize:"14px"}})});let Wa=null,tf=null;async function P1(){return Wa||(tf||(tf=(async()=>{const n=await fetch("/testsuite/tests.json");if(!n.ok)throw new Error(`Failed to load test suite: ${n.status}`);return Wa=await n.json(),Wa})()),tf)}function JE({isOpen:n,onClose:e,onSelect:t}){const[r,s]=O.useState([]),[l,a]=O.useState([]),[c,h]=O.useState(""),[p,d]=O.useState(!1),[m,x]=O.useState(null),[k,b]=O.useState(null),S=O.useRef(null);O.useEffect(()=>{n&&r.length===0&&!p&&(d(!0),P1().then(P=>{s(P.tests),a(P.tests),d(!1)}).catch(P=>{x(P.message),d(!1)}))},[n,r.length,p]),O.useEffect(()=>{n&&setTimeout(()=>{var P;return(P=S.current)==null?void 0:P.focus()},100)},[n]),O.useEffect(()=>{if(!c){a(r),b(null);return}try{const P=new RegExp(c,"i");b(null),a(r.filter(M=>P.test(M.id)||P.test(M.name)))}catch{b("Invalid regex"),a([])}},[c,r]),O.useEffect(()=>{const P=M=>{M.key==="Escape"&&n&&e()};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[n,e]);const C=P=>{t(P.yaml),e(),h("")};return n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-[600px] max-h-[80vh] flex flex-col",children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Search"," ",v.jsx("a",{href:"https://github.com/yaml/yaml-test-suite/tree/data",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 underline",children:"YAML Test Suite"})]}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white transition-colors",children:"X"})]}),v.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[v.jsx("input",{ref:S,type:"text",placeholder:"Search by regex (e.g., 'block.*map' or 'spec example')",value:c,onChange:P=>h(P.target.value),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white rounded border border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:outline-none"}),k&&v.jsx("div",{className:"mt-1 text-red-600 dark:text-red-400 text-sm",children:k})]}),v.jsxs("div",{className:"flex-1 overflow-y-auto",children:[p&&v.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Loading tests..."}),m&&v.jsx("div",{className:"p-8 text-center text-red-600 dark:text-red-400",children:m}),!p&&!m&&l.map(P=>v.jsxs("button",{onClick:()=>C(P),className:"w-full px-4 py-3 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[v.jsx("span",{className:`font-mono ${P.error?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:P.id}),v.jsx("span",{className:"text-gray-500 dark:text-gray-400 mx-2",children:"-"}),v.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:P.name})]},P.id)),!p&&!m&&l.length===0&&c&&!k&&v.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No tests match your search"})]}),v.jsxs("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700 text-sm text-gray-500 flex justify-between",children:[v.jsxs("span",{children:[l.length," of ",r.length," tests"]}),v.jsx("span",{children:"(E) = expected parse error"})]})]})}):null}const ZE={dark:"vs-dark",light:"light"},Vo=`# Edit this YAML and see how
# different parsers handle it.

# Green = matches reference parser
# Red = differs or errored

name: YAML Parser Playground

url: https://play.yaml.com/
repo:
  https://github.com/yaml/yaml-play

current parsers: 17
actively maintained: true

features:
- Compare outputs from multiple
  YAML parsers
- Search and load tests from the
  YAML Test Suite
- Select and drag output panes
- Click Help for shortcut keys
`,Py=200,Ny=800,Ey=O.forwardRef(function({value:e,onChange:t,width:r,onWidthChange:s,colorScheme:l,editorType:a,showBorder:c=!0,heightMode:h="full",isMobile:p=!1},d){const m=O.useRef(!1),x=O.useRef(0),k=O.useRef(0),b=O.useRef(null),S=O.useRef(null),[C,P]=O.useState(!1),[M,T]=O.useState(!1),[B,L]=O.useState(!1),F=O.useRef(null);O.useEffect(()=>{if(!M)return;const J=X=>{F.current&&!F.current.contains(X.target)&&T(!1)},ee=X=>{X.key==="Escape"&&T(!1)};return document.addEventListener("mousedown",J),document.addEventListener("keydown",ee),()=>{document.removeEventListener("mousedown",J),document.removeEventListener("keydown",ee)}},[M]),O.useImperativeHandle(d,()=>({focus:()=>{var J,ee;a==="codemirror"?(J=S.current)==null||J.focus():(ee=b.current)==null||ee.focus()},blur:()=>{var J,ee,X;a==="codemirror"?(J=S.current)==null||J.blur():(ee=b.current)!=null&&ee.getDomNode()&&((X=document.activeElement)==null||X.blur())}}),[a]);const j=O.useCallback(J=>{b.current=J;const ee=J.getModel();ee&&ee.updateOptions({tabSize:4,insertSpaces:!1}),J.onDidFocusEditorText(()=>L(!0)),J.onDidBlurEditorText(()=>L(!1))},[]),W=O.useCallback(J=>{m.current=!0,x.current=J.clientX,k.current=r,document.body.style.cursor="col-resize",document.body.style.userSelect="none";const ee=ue=>{if(!m.current)return;const de=ue.clientX-x.current,$=Math.min(Ny,Math.max(Py,k.current+de));s($)},X=()=>{m.current=!1,document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",ee),document.removeEventListener("mouseup",X)};document.addEventListener("mousemove",ee),document.addEventListener("mouseup",X)},[r,s]),Y=h==="full"?"h-full":"h-full overflow-hidden",K=c?"border-r border-gray-300 dark:border-gray-700":"",V=B?"ring-2 ring-blue-500 ring-inset":"",Q=p?{}:{width:`${r}px`,minWidth:`${Py}px`,maxWidth:`${Ny}px`};return v.jsxs("div",{className:`flex flex-col ${Y} ${p?"w-full border-b border-gray-300 dark:border-gray-700":K} ${V} relative transition-shadow`,style:Q,children:[v.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 py-2 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:`font-semibold transition-colors ${B?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-500"}`,children:B?"YAML Input Editor (editing)":"YAML Input Editor"}),v.jsxs("div",{className:"flex items-center gap-1",children:[v.jsx("button",{onClick:()=>navigator.clipboard.writeText(e),className:"text-gray-400 hover:text-gray-700 dark:hover:text-white p-1",title:"Copy YAML",children:v.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),v.jsxs("div",{className:"relative",ref:F,children:[v.jsx("button",{onClick:()=>T(!M),className:"text-gray-400 hover:text-gray-700 dark:hover:text-white p-1",title:"Menu",children:v.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),M&&v.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[v.jsx("button",{onClick:()=>{T(!1),P(!0)},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Search Test Suite"}),v.jsx("button",{onClick:()=>{var J,ee;T(!1),t(""),a==="codemirror"?(J=S.current)==null||J.focus():(ee=b.current)==null||ee.focus()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Clear"}),v.jsx("button",{onClick:()=>{T(!1),t(Vo)},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Default YAML"})]})]})]})]}),v.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:a==="codemirror"?v.jsx(GE,{ref:S,value:e,onChange:t,colorScheme:l,onFocusChange:L}):v.jsx(R2,{height:"100%",defaultLanguage:"yaml",defaultValue:Vo,value:e,onChange:J=>t(J||""),theme:ZE[l],onMount:j,options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",renderWhitespace:"all",tabSize:4,insertSpaces:!1,detectIndentation:!1,useTabStops:!1,scrollBeyondLastLine:!1,wordWrap:"on",automaticLayout:!0}})}),!p&&v.jsx("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-blue-500 transition-colors",onMouseDown:W}),v.jsx(JE,{isOpen:C,onClose:()=>P(!1),onSelect:t})]})});function eA({parser:n,agrees:e,loading:t,onClose:r,onAddPane:s,isDraggable:l=!0,onInfoClick:a,onRunTestSuite:c,showTestSuite:h=!0,output:p,parseSuccess:d}){const[m,x]=O.useState(!1),k=O.useRef(null);O.useEffect(()=>{if(!m)return;const V=J=>{k.current&&!k.current.contains(J.target)&&x(!1)},Q=J=>{J.key==="Escape"&&x(!1)};return document.addEventListener("mousedown",V),document.addEventListener("keydown",Q),()=>{document.removeEventListener("mousedown",V),document.removeEventListener("keydown",Q)}},[m]);const{attributes:b,listeners:S,setNodeRef:C,transform:P,transition:M,isDragging:T}=kS({id:n.id,disabled:!l}),B={transform:Qo.Transform.toString(P),transition:M,opacity:T?.5:1},L=t||d===void 0?"bg-gray-300":d?"bg-green-300":"bg-red-300",W=!(n.id==="refparse")&&!t&&e===!1?"border-red-600":t||d===void 0?"border-gray-300":d?"border-green-300":"border-red-300",Y=`${n.name} v${n.version} (${n.language})`,K=V=>{V.stopPropagation(),x(!m)};return v.jsxs("div",{ref:C,style:B,className:`${L} ${W} border-4 px-3 py-2 flex items-center justify-between cursor-grab active:cursor-grabbing select-none`,...b,...S,children:[v.jsxs("div",{className:"flex items-center gap-2 cursor-pointer flex-1 relative",onClick:K,ref:k,children:[v.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),v.jsx("span",{className:"text-gray-900 font-semibold",title:Y,children:n.name}),m&&v.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[140px]",children:[h&&v.jsx("button",{onClick:V=>{V.stopPropagation(),x(!1),c==null||c()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Test Suite"}),v.jsx("button",{onClick:V=>{V.stopPropagation(),x(!1),a==null||a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Parser Info"})]})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[t&&v.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-gray-700 border-t-transparent rounded-full"}),p&&v.jsx("button",{onClick:V=>{V.stopPropagation(),navigator.clipboard.writeText(p)},className:"text-gray-700 hover:text-gray-500 p-1",title:"Copy output",children:v.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),s&&v.jsx("button",{onClick:V=>{V.stopPropagation(),s()},className:"text-gray-700 hover:text-gray-500 p-1",title:"Add pane",children:v.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),r&&v.jsx("button",{onClick:V=>{V.stopPropagation(),r()},className:"text-gray-700 hover:text-gray-500 text-lg leading-none px-1",title:"Close pane",children:""})]})]})}function tA({isOpen:n,onClose:e,parser:t}){return O.useEffect(()=>{if(!n)return;const r=s=>{s.key==="Escape"&&e()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",onClick:r=>r.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsx("div",{className:"p-4 space-y-3",children:v.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-sm",children:[t.repo&&v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Repository"}),v.jsx("a",{href:t.repo,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline truncate",children:t.repo})]}),v.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Language"}),v.jsx("span",{className:"text-gray-900 dark:text-white",children:t.language}),v.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Version"}),v.jsx("span",{className:"text-gray-900 dark:text-white",children:t.version})]})})]})}):null}const Hu="https://localhost:7481",ru="0.1.35";function nA(){return ru}async function rA(){try{return(await fetch(`${Hu}/`,{method:"HEAD"})).ok}catch{return!1}}async function N1(n,e,t){const r=`${Hu}/?version=${encodeURIComponent(ru)}&parser=yaml-test-parse-${n}`;try{const s=new URLSearchParams;s.append("text",e);const l=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!l.ok){const h=(await l.text()).match(/Requires sandbox version (\S+)/);if(h)return{status:-1,output:`Version mismatch: sandbox is ${h[1]}, but frontend requires ${ru}`,versionMismatch:{required:ru,found:h[1]}};throw new Error(`HTTP ${l.status}: ${l.statusText}`)}const a=await l.json();return{status:a.status,output:a.output}}catch(s){return s&&typeof s=="object"&&"versionMismatch"in s?s:{status:-1,output:s instanceof Error?s.message:"Unknown error"}}}async function iA(n){const e=`${Hu}/preview-pr`,t=new URLSearchParams;t.append("yaml",n.yaml),t.append("events",n.events),t.append("isError",n.isError?"true":"false"),t.append("anthropicKey",n.anthropicKey),t.append("githubToken",n.githubToken);const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!r.ok)throw new Error(`Failed to preview PR: ${r.statusText}`);return await r.json()}async function sA(n){const e=`${Hu}/submit-pr`,t=new URLSearchParams;t.append("token",n.token),t.append("testId",n.testId),t.append("testName",n.testName),t.append("yaml",n.yaml),t.append("events",n.events),t.append("isError",n.isError?"true":"false"),t.append("similarTests",JSON.stringify(n.similarTests));const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!r.ok)throw new Error(`Failed to submit PR: ${r.statusText}`);return await r.json()}let od=null,ld=null,Ay=!1;async function oA(){if(Ay)return;const[n,e,t,r,s]=await Promise.all([fetch("/refparse/prelude.js").then(a=>a.text()),fetch("/refparse/grammar.js").then(a=>a.text()),fetch("/refparse/parser.js").then(a=>a.text()),fetch("/refparse/receiver.js").then(a=>a.text()),fetch("/refparse/test-receiver.js").then(a=>a.text())]),l=eval;window.global=window,l(n),l(e),l(t),l(r),l(s),od=window.Parser,ld=window.TestReceiver,Ay=!0}async function E1(n){try{if(await oA(),!ld)return{status:1,output:"TestReceiverClass not loaded"};if(!od)return{status:1,output:"Parser not loaded"};const e=new ld,t=new od(e);return t.parse(n),{status:0,output:t.receiver.output().replace(/\n$/,"")||"(empty output)"}}catch(e){return{status:1,output:e instanceof Error?e.message:String(e)}}}function Ry(n){return n.replace(/\s+(\{\}|\[\])$/mg,"").replace(/^=COMMENT .*\n?/mg,"").replace(/^[^+\-=].*\n?/gm,"").trim()}function A1(n,e,t){let r=Ry(n),s=Ry(e);if(t==="rustyaml"&&(s=s.replace(/<Tag\("!!", "(.*?)"\)>/g,"<tag:yaml.org,2002:$1>").replace(/<Tag\("!", "(.*?)"\)>/g,"<!$1>").replace(/<Tag\("", "!"\)>/g,"<!>").replace(/<Tag\("", "(tag:.*?)"\)>/g,"<$1>").replace(/<Tag\("", "(!.*?)"\)>/g,"<$1>"),r=r.replace(/^\+DOC ---/gm,"+DOC").replace(/^-DOC \.\.\./gm,"-DOC").replace(/^=VAL :$/gm,"=VAL :~").replace(/^\+MAP \{\}( ?)/gm,"+MAP$1").replace(/^\+SEQ \[\]( ?)/gm,"+SEQ$1"),s.match(/&1/))){let l=1,a;for(;a=r.match(/&([a-zA-Z]\S*)/);){const c=a[1];r=r.replace(new RegExp(`([&*])${c}`,"g"),`$1${l}`),l++}}if(t==="goyaml"){const l=r.split(`
`),a=s.split(`
`);l.length===a.length&&(s=a.map((h,p)=>l[p]==="+DOC"&&h==="+DOC ---"?"+DOC":h).join(`
`))}return r===s}const Ms="yaml-play-test-results-";function lA(n){try{const e=Ms+n,t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}}function aA(n,e){try{const t=Ms+n;localStorage.setItem(t,JSON.stringify(e))}catch{}}function Mo(n){try{const e=Ms+n;localStorage.removeItem(e)}catch{}}function uA(n,e,t){return n?n.parserVersion===e&&n.testSuiteVersion===t:!1}function cA(){try{const n=[];for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&t.startsWith(Ms)&&n.push(t)}n.forEach(e=>localStorage.removeItem(e))}catch{}}function hA(){const n=[];try{for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);if(t&&t.startsWith(Ms)){const r=t.substring(Ms.length),s=localStorage.getItem(t);if(s){const l=JSON.parse(s);n.push({parserId:r,cache:l})}}}}catch{}return n}const R1="yaml-play-test-sort";function My(){try{const n=localStorage.getItem(R1);if(n)return JSON.parse(n)}catch{}return{column:"id",direction:"asc"}}function fA(n){try{localStorage.setItem(R1,JSON.stringify(n))}catch{}}function ad({isOpen:n,onClose:e,parser:t,onSelectTest:r,forceRerun:s=!1,onCompare:l,onRunAgain:a,onClearCache:c}){const[h,p]=O.useState([]),[d,m]=O.useState([]),[x,k]=O.useState(!1),[b,S]=O.useState(null),[C,P]=O.useState(0),[M,T]=O.useState(My),[B,L]=O.useState(!1),[F,j]=O.useState(!1),W=O.useRef(!1),Y=O.useRef(!1),K=O.useRef(0),V=O.useRef(null),Q=O.useRef(null),J=O.useRef(null);O.useEffect(()=>{n&&(T(My()),L(!1))},[n]),O.useEffect(()=>{if(!B)return;const ne=he=>{J.current&&!J.current.contains(he.target)&&L(!1)};return document.addEventListener("mousedown",ne),()=>document.removeEventListener("mousedown",ne)},[B]);const ee=O.useCallback((ne,he)=>{const Se=[...ne];return Se.sort((Ce,ve)=>{let Re=0;switch(he.column){case"ok":Re=(Ce.passed?1:0)-(ve.passed?1:0);break;case"id":Re=Ce.testId.localeCompare(ve.testId);break;case"description":Re=Ce.testName.localeCompare(ve.testName);break}return he.direction==="asc"?Re:-Re}),Se},[]),X=ne=>{const he={column:ne,direction:M.column===ne&&M.direction==="asc"?"desc":"asc"};T(he),fA(he)},ue=ne=>M.column!==ne?null:M.direction==="asc"?" ":" ",de=x?d:ee(d,M);O.useEffect(()=>{if(!n){Y.current=!1,j(!1),Q.current&&(clearInterval(Q.current),Q.current=null);return}if(W.current=!1,S(null),m([]),P(0),p([]),!Y.current)return Y.current=!0,k(!0),j(!0),K.current=Date.now(),Q.current=window.setInterval(()=>{P(Date.now()-K.current)},10),()=>{W.current=!0,Q.current&&(clearInterval(Q.current),Q.current=null)}},[n,t.id,t.version,s]),O.useEffect(()=>{if(!F||!n)return;j(!1),(async()=>{try{const he=await P1();if(W.current){k(!1),Y.current=!1,Q.current&&(clearInterval(Q.current),Q.current=null);return}p(he.tests);const Se=lA(t.id);if(!s&&uA(Se,t.version,he.version)){const ve=Se.results.map(Re=>{const _e=he.tests.find(Ue=>Ue.id===Re.testId);return{testId:Re.testId,testName:(_e==null?void 0:_e.name)||Re.testId,passed:Re.passed}});m(ve),k(!1),Y.current=!1,Q.current&&(clearInterval(Q.current),Q.current=null);return}s&&Mo(t.id);const Ce=[];for(let ve=0;ve<he.tests.length&&!W.current;ve++){const Re=he.tests[ve];m(Je=>[...Je,{testId:Re.id,testName:Re.name,passed:!1,running:!0}]);let _e;if(t.id==="refparse"){const Je=await E1(Re.yaml);_e={status:Je.status,output:Je.output}}else _e=await N1(t.id,Re.yaml,t.version);if(W.current)break;let Ue;Re.error?Ue=_e.status!==0:Ue=_e.status===0&&A1(Re.expected,_e.output,t.id),m(Je=>{const ft=[...Je];return ft.length>0&&(ft[ft.length-1]={testId:Re.id,testName:Re.name,passed:Ue,running:!1}),ft}),Ce.push({testId:Re.id,passed:Ue}),setTimeout(()=>{V.current&&(V.current.scrollTop=V.current.scrollHeight)},0)}if(!W.current&&Ce.length===he.tests.length){const ve=Date.now()-K.current,Re={parserVersion:t.version,testSuiteVersion:he.version,results:Ce,elapsedTime:ve};aA(t.id,Re)}}catch(he){S(he instanceof Error?he.message:"Unknown error")}finally{Q.current&&(clearInterval(Q.current),Q.current=null),k(!1),Y.current=!1,setTimeout(()=>{V.current&&(V.current.scrollTop=0)},0)}})()},[F,n,t.id,t.version,s]),O.useEffect(()=>{if(!n)return;const ne=he=>{he.key==="Escape"&&(B?L(!1):(W.current=!0,e())),he.key.toUpperCase()==="C"&&!he.ctrlKey&&!he.metaKey&&!he.altKey&&!x&&l&&(e(),l())};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[n,e,x,l,B]);const $=ne=>{W.current=!0,r(ne.yaml),e()},re=()=>{W.current=!0,e()};if(!n)return null;const H=d.filter(ne=>ne.passed&&!ne.running).length,E=d.filter(ne=>!ne.passed&&!ne.running).length,D=h.length,Z=D>0?Math.round(d.length/D*100):0,le=D>0?(H/D*100).toFixed(1):"0.0",ye=ne=>{const he=Math.floor(ne/1e3),Se=Math.floor(ne%1e3/10);return`${he}.${Se.toString().padStart(2,"0")}s`};return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:re,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] flex flex-col",onClick:ne=>ne.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.name," - Test Suite"]}),v.jsx("button",{onClick:re,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center gap-4",children:[v.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["Pass: ",H]}),v.jsxs("span",{className:"text-red-600 dark:text-red-400",children:["Fail: ",E]}),v.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Total: ",D]}),x?v.jsxs("span",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-2",children:[v.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 dark:border-blue-400 border-t-transparent rounded-full"}),ye(C)," (",Z,"%)"]}):C>0?v.jsxs("span",{className:"text-gray-500",children:[le,"% passing (",ye(C),")"]}):v.jsxs("span",{className:"text-gray-500",children:[le,"% passing (cached)"]}),!x&&(a||c||l)&&v.jsxs("div",{className:"ml-auto relative",ref:J,children:[v.jsx("button",{onClick:()=>L(!B),className:"text-gray-700 dark:text-white hover:text-gray-900 dark:hover:text-gray-300 p-1",title:"Menu",children:v.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),B&&v.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[l&&v.jsxs("button",{onClick:()=>{L(!1),e(),l()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[v.jsx("span",{className:"underline",children:"C"}),"ompare Test Runs"]}),a&&v.jsx("button",{onClick:()=>{L(!1),a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Run Again"}),c&&v.jsx("button",{onClick:()=>{L(!1),c()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Clear Cache"})]})]})]}),b&&v.jsxs("div",{className:"px-4 py-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 text-sm",children:["Error: ",b]}),d.length>0&&v.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[v.jsxs("span",{className:"w-10 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>X("ok"),children:["OK",ue("ok")]}),v.jsxs("span",{className:"w-20 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none font-mono",onClick:()=>X("id"),children:["ID",ue("id")]}),v.jsxs("span",{className:"flex-1 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>X("description"),children:["Description",ue("description")]})]}),v.jsxs("div",{ref:V,className:"flex-1 overflow-y-auto p-2 space-y-1",children:[de.map(ne=>{const he=h.find(Se=>Se.id===ne.testId);return v.jsxs("button",{onClick:()=>he&&$(he),className:`w-full text-left px-3 py-2 rounded text-sm flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${ne.running?"bg-gray-100 dark:bg-gray-700":""}`,children:[v.jsx("span",{className:"w-10 flex-shrink-0 text-center",children:ne.running?v.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 dark:border-blue-400 border-t-transparent rounded-full"}):ne.passed?v.jsx("span",{className:"text-green-600 dark:text-green-400",children:""}):v.jsx("span",{className:"text-red-600 dark:text-red-400",children:""})}),v.jsx("span",{className:"w-20 text-gray-500 dark:text-gray-400 font-mono flex-shrink-0",children:ne.testId}),v.jsx("span",{className:"flex-1 text-gray-700 dark:text-gray-300 truncate",children:ne.testName})]},ne.testId)}),d.length===0&&!x&&!b&&v.jsx("div",{className:"text-gray-500 text-center py-4",children:"No test results available"}),d.length===0&&x&&v.jsx("div",{className:"text-gray-500 text-center py-4",children:"Loading test suite..."})]})]})})}const Vi=[{id:"refparse",name:"Reference Parser",version:"f003194",repo:"https://github.com/yaml/yaml-reference-parser",language:"JavaScript",isJavaScript:!0},{id:"npmyaml",name:"eemeli/yaml",version:"2.8.1",repo:"https://github.com/eemeli/yaml",language:"JavaScript",isJavaScript:!0},{id:"libyaml",name:"libyaml",version:"0.2.5",repo:"https://github.com/yaml/libyaml",language:"C"},{id:"pyyaml",name:"PyYAML",version:"6.0.3",language:"Python"},{id:"ruamel",name:"ruamel.yaml",version:"0.18.16",language:"Python"},{id:"goyaml",name:"go-yaml",version:"94c6e9d",repo:"https://github.com/pantoniou/yaml",language:"Go"},{id:"libfyaml",name:"libfyaml",version:"0.9",repo:"https://github.com/pantoniou/libfyaml",language:"C"},{id:"rapid",name:"rapidyaml",version:"0.10.0",repo:"https://github.com/biojppm/rapidyaml",language:"C++"},{id:"rustyaml",name:"serde-yaml",version:"0.9.34",repo:"https://github.com/dtolnay/serde-yaml",language:"Rust"},{id:"snake",name:"SnakeYAML",version:"2.5",repo:"https://bitbucket.org/snakeyaml/snakeyaml",language:"Java"},{id:"snakeeng",name:"SnakeYAML Engine",version:"3.0.1",repo:"https://bitbucket.org/snakeyaml/snakeyaml-engine",language:"Java"},{id:"dotnet",name:"YamlDotNet",version:"11.2.1",repo:"https://github.com/aaubry/YamlDotNet",language:"C#"},{id:"luayaml",name:"lyaml",version:"6.2.8",repo:"https://github.com/gvvaughan/lyaml",language:"Lua"},{id:"nimyaml",name:"NimYAML",version:"1.0.0",repo:"https://github.com/flyx/NimYAML",language:"Nim"},{id:"ppyaml",name:"YAML::PP",version:"0.039",language:"Perl"},{id:"hsyaml",name:"HsYAML",version:"0.2.1.1",repo:"https://github.com/haskell-hvr/HsYAML",language:"Haskell"},{id:"refhs",name:"yamlreference",version:"bf471f8",repo:"https://github.com/orenbenkiki/yamlreference",language:"Haskell"}],ii=n=>Vi.find(e=>e.id===n),dA=()=>["refparse","pyyaml","libyaml","goyaml"],M1="yaml-play-compare-sort";function pA(n){const e=Math.floor(n/1e3),t=Math.floor(n%1e3/10);return`${e}.${t.toString().padStart(2,"0")}s`}function Ty(){try{const n=localStorage.getItem(M1);if(n)return JSON.parse(n)}catch{}return{column:"percent",direction:"desc"}}function gA(n){try{localStorage.setItem(M1,JSON.stringify(n))}catch{}}function T1({isOpen:n,onClose:e,onSelectParser:t}){const[r,s]=O.useState([]),[l,a]=O.useState(Ty);O.useEffect(()=>{n&&a(Ty())},[n]);const c=O.useCallback((d,m)=>{const x=[...d];return x.sort((k,b)=>{let S=0;switch(m.column){case"parserName":S=k.parserName.localeCompare(b.parserName);break;case"version":S=k.version.localeCompare(b.version);break;case"passed":S=k.passed-b.passed;break;case"failed":S=k.failed-b.failed;break;case"total":S=k.total-b.total;break;case"percent":S=k.percentNum-b.percentNum;break;case"time":S=(k.elapsedTime??0)-(b.elapsedTime??0);break}return m.direction==="asc"?S:-S}),x},[]);O.useEffect(()=>{if(!n)return;const m=hA().map(x=>{const k=ii(x.parserId),b=x.cache.results.filter(T=>T.passed).length,S=x.cache.results.length,C=S-b,P=S>0?b/S*100:0,M=P.toFixed(1);return{parserId:x.parserId,parserName:(k==null?void 0:k.name)||x.parserId,passed:b,failed:C,total:S,percent:M,percentNum:P,version:x.cache.parserVersion,elapsedTime:x.cache.elapsedTime}});s(c(m,l))},[n,l,c]);const h=d=>{const m={column:d,direction:l.column===d&&l.direction==="asc"?"desc":"asc"};a(m),gA(m)},p=d=>l.column!==d?null:l.direction==="asc"?" ":" ";return O.useEffect(()=>{if(!n)return;const d=m=>{m.key==="Escape"&&e()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] flex flex-col",onClick:d=>d.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Compare Test Runs"}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"text-left text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:[v.jsxs("th",{className:"pb-2 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("parserName"),children:["Parser",p("parserName")]}),v.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("version"),children:["Version",p("version")]}),v.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("passed"),children:["Pass",p("passed")]}),v.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("failed"),children:["Fail",p("failed")]}),v.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("total"),children:["Total",p("total")]}),v.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("percent"),children:["%",p("percent")]}),v.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("time"),children:["Time",p("time")]})]})}),v.jsx("tbody",{children:r.map(d=>v.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>{t(d.parserId),e()},children:[v.jsx("td",{className:"py-2 text-gray-900 dark:text-white",children:d.parserName}),v.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400 font-mono text-xs",children:d.version}),v.jsx("td",{className:"py-2 text-right text-green-600 dark:text-green-400",children:d.passed}),v.jsx("td",{className:"py-2 text-right text-red-600 dark:text-red-400",children:d.failed}),v.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400",children:d.total}),v.jsxs("td",{className:"py-2 text-right text-gray-900 dark:text-white font-semibold",children:[d.percent,"%"]}),v.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400 font-mono text-xs",children:d.elapsedTime!=null?pA(d.elapsedTime):"-"})]},d.parserId))})]}),r.length===0&&v.jsx("div",{className:"text-gray-500 text-center py-8",children:"No cached test results available"})]})]})}):null}function mA(n){return["Failed to fetch","NetworkError","network error","ERR_CONNECTION_REFUSED","ECONNREFUSED","fetch failed","Load failed","HTTP 500","HTTP 502","HTTP 503","HTTP 504","Internal Server Error"].some(t=>n.toLowerCase().includes(t.toLowerCase()))}function nf({parser:n,result:e,onClose:t,onAddPane:r,isDraggable:s=!0,onSetYamlInput:l,showTestSuite:a=!0}){const[c,h]=O.useState(!1),[p,d]=O.useState(!1),[m,x]=O.useState(!1),[k,b]=O.useState(0),[S,C]=O.useState(!1),[P,M]=O.useState(null),[T,B]=O.useState(!1),[L,F]=O.useState(0),j=O.useCallback(()=>{Mo(n.id),x(!0),b(ee=>ee+1)},[n.id]),W=O.useCallback(()=>{Mo(n.id),d(!1)},[n.id]),Y=O.useCallback(()=>{P&&(Mo(P),B(!0),F(ee=>ee+1))},[P]),K=O.useCallback(()=>{P&&(Mo(P),M(null))},[P]),V=n.id!=="refparse",Q=V&&(e==null?void 0:e.versionMismatch),J=V&&!Q&&(e==null?void 0:e.status)===-1&&(e==null?void 0:e.output)&&mA(e.output);return v.jsxs("div",{className:"flex flex-col h-full min-h-[200px] bg-gray-100 dark:bg-gray-900",children:[v.jsx(eA,{parser:n,agrees:e==null?void 0:e.agrees,loading:e==null?void 0:e.loading,onClose:t,onAddPane:r,isDraggable:s,onInfoClick:()=>h(!0),onRunTestSuite:()=>{x(!1),d(!0)},showTestSuite:a,output:e==null?void 0:e.output,parseSuccess:e?e.status===0:void 0}),v.jsx(tA,{isOpen:c,onClose:()=>h(!1),parser:n}),v.jsx(ad,{isOpen:p,onClose:()=>d(!1),parser:n,onSelectTest:ee=>l==null?void 0:l(ee),forceRerun:m,onCompare:()=>C(!0),onRunAgain:j,onClearCache:W},k),v.jsx(T1,{isOpen:S,onClose:()=>C(!1),onSelectParser:ee=>M(ee)}),P&&ii(P)&&v.jsx(ad,{isOpen:!0,onClose:()=>{M(null),B(!1)},parser:ii(P),onSelectTest:ee=>l==null?void 0:l(ee),forceRerun:T,onCompare:()=>{M(null),C(!0)},onRunAgain:Y,onClearCache:K},`view-${P}-${L}`),v.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-900 overflow-auto",children:e!=null&&e.error?v.jsxs("pre",{className:"p-3 text-red-600 dark:text-red-400 text-sm font-mono whitespace-pre-wrap",children:["Error: ",e.error]}):Q?v.jsxs("div",{className:"p-3 text-sm",children:[v.jsxs("p",{className:"text-yellow-600 dark:text-yellow-400 mb-2",children:["Wrong sandbox version (",e.versionMismatch.found,") found. Requires ",e.versionMismatch.required,"."]}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Click the "',v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Setup"}),'" button for instructions.']})]}):J?v.jsxs("div",{className:"p-3 text-sm",children:[v.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:"Can't connect to a local YAML parser sandbox server."}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Click the "',v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Setup"}),'" button for instructions.']})]}):e!=null&&e.loading?v.jsx("div",{className:"p-3 text-gray-500 text-sm",children:"Running parser..."}):v.jsx("pre",{className:"p-3 text-gray-800 dark:text-gray-200 text-sm font-mono whitespace-pre-wrap",children:(e==null?void 0:e.output)||"No output yet"})})]})}function yA({total:n,disagreeing:e,disagreeingNames:t,loading:r,sandboxAvailable:s=!0,onSandboxSetup:l}){if(!s)return v.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2 flex items-center justify-between",children:[v.jsxs("span",{className:"text-gray-900 dark:text-white font-semibold",children:["Can't connect to sandbox server. Click"," ",v.jsx("button",{onClick:l,className:"text-yellow-600 dark:text-yellow-400 underline hover:no-underline",children:"Setup"}),"."]}),v.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",title:"View on GitHub",children:v.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.115 2.504.337 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})})})]});if(r)return v.jsx("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2",children:v.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-semibold",children:"Running parsers..."})});const a=e===0;return v.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2 flex items-center justify-between",children:[a?v.jsxs("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:["All ",n," parsers agree with the Reference Parser"]}):v.jsxs("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:[e,"/",n," parsers disagree with the Reference Parser: ",t.join(", ")]}),v.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",title:"View on GitHub",children:v.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.115 2.504.337 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})})})]})}function xA({isOpen:n,onClose:e,paneStates:t,onToggleVisibility:r,insertAfterId:s,onAddPaneAfter:l}){if(O.useEffect(()=>{if(!n)return;const d=m=>{m.key==="Escape"&&e()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[n,e]),!n)return null;const a=s!==void 0&&l!==void 0,c=new Map(t.map(d=>[d.id,d])),h=[...Vi].filter(d=>d.id!=="refparse").filter(d=>{var m;return!a||!(((m=c.get(d.id))==null?void 0:m.visible)??!1)}).sort((d,m)=>d.id.localeCompare(m.id)),p=d=>{a&&(l(s,d),e())};return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full mx-4 max-h-[80vh] overflow-hidden",onClick:d=>d.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a?"Add Parser Pane":"Parser Panes"}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsx("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:h.length===0?v.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"All parsers are already visible."}):h.map(d=>{const m=c.get(d.id),x=(m==null?void 0:m.visible)??!1,k=/^\d+(\.\d+)+$/.test(d.version);return a?v.jsxs("button",{onClick:()=>p(d.id),className:"flex items-center gap-3 py-2 px-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 w-full text-left",children:[v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:d.name}),v.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:d.language}),k&&v.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:d.version})]},d.id):v.jsxs("label",{className:"flex items-center gap-3 py-2 px-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[v.jsx("input",{type:"checkbox",checked:x,onChange:b=>r(d.id,b.target.checked),className:"w-4 h-4 rounded border-gray-400 dark:border-gray-600 bg-white dark:bg-gray-700 text-blue-600 focus:ring-blue-500"}),v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:d.name}),v.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:d.language}),k&&v.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:d.version})]},d.id)})})]})})}const vA=[{id:"light",label:"Light"},{id:"dark",label:"Dark"}],kA=[{id:"monaco",label:"Monaco"},{id:"codemirror",label:"CodeMirror"}];function wA({isOpen:n,onClose:e,colorScheme:t,onColorSchemeChange:r,editorType:s,onEditorTypeChange:l}){return O.useEffect(()=>{if(!n)return;const a=c=>{c.key==="Escape"&&e()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full mx-4",onClick:a=>a.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Options"}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsxs("div",{className:"p-4",children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Editor"}),v.jsx("div",{className:"flex gap-2 mb-4",children:kA.map(a=>v.jsx("button",{onClick:()=>l(a.id),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${s===a.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:a.label},a.id))}),v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Mode"}),v.jsx("div",{className:"flex gap-2",children:vA.map(a=>v.jsx("button",{onClick:()=>r(a.id),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${t===a.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:a.label},a.id))})]})]})}):null}const Vd=nA(),Dy=`docker run --rm -d --name yaml-play -p 7481:7481 yamlio/yaml-play-sandbox:${Vd} 7481`,Ly=`docker run --rm -d --name yaml-play --network host yamlio/yaml-play-sandbox:${Vd} 7481`;function bA({isOpen:n,onClose:e}){const[t,r]=O.useState(!1),[s,l]=O.useState(!1),a=async(c,h)=>{try{await navigator.clipboard.writeText(c),h(!0),setTimeout(()=>h(!1),2e3)}catch{const p=document.createElement("textarea");p.value=c,document.body.appendChild(p),p.select(),document.execCommand("copy"),document.body.removeChild(p),h(!0),setTimeout(()=>h(!1),2e3)}};return O.useEffect(()=>{if(!n)return;const c=h=>{h.key==="Escape"&&e()};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-hidden",onClick:c=>c.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Sandbox Setup"}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh] space-y-6",children:[v.jsxs("section",{children:[v.jsxs("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:["Start the Sandbox Server (version ",Vd,")"]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"These parsers run in a Docker container that you need to start on your machine. If you see connection errors, start the sandbox by running this command in a terminal:"}),v.jsxs("div",{className:"relative",children:[v.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 p-3 pr-16 rounded text-sm text-green-700 dark:text-green-400 font-mono overflow-x-auto",children:Dy}),v.jsx("button",{onClick:()=>a(Dy,r),className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors",children:t?"Copied!":"Copy"})]}),v.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-3 mb-2",children:"The Docker command above does not work for some users. If it does not work for you then try this command instead:"}),v.jsxs("div",{className:"relative",children:[v.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 p-3 pr-16 rounded text-sm text-green-700 dark:text-green-400 font-mono overflow-x-auto",children:Ly}),v.jsx("button",{onClick:()=>a(Ly,l),className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors",children:s?"Copied!":"Copy"})]}),v.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-3",children:"Note: If a different version of the sandbox server Docker container is already running, you'll need to kill that first."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"HTTPS Certificate (if needed)"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"If you are still getting connection errors, you may need to accept the unsigned HTTPS certificate:"}),v.jsxs("ol",{className:"text-gray-600 dark:text-gray-300 text-sm list-decimal list-inside space-y-1",children:[v.jsxs("li",{children:["Click here:"," ",v.jsx("a",{href:"https://localhost:7481",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 underline",children:"https://localhost:7481"})," ","(opens in a new tab)"]}),v.jsx("li",{children:"Accept the security warning / proceed anyway"}),v.jsx("li",{children:"Return to this page and refresh"})]})]})]})]})}):null}function SA({onHelp:n,onOptions:e,onParserPanes:t,onTestFormat:r,onKeyboardShortcuts:s,onSandboxSetup:l,onAddTokens:a,onFactoryReset:c,hasTokens:h}){const[p,d]=O.useState(!1),m=O.useRef(null);return O.useEffect(()=>{if(!p)return;const x=b=>{m.current&&!m.current.contains(b.target)&&d(!1)},k=b=>{b.key==="Escape"&&d(!1)};return document.addEventListener("mousedown",x),document.addEventListener("keydown",k),()=>{document.removeEventListener("mousedown",x),document.removeEventListener("keydown",k)}},[p]),v.jsxs("div",{className:"relative",ref:m,children:[v.jsx("button",{onClick:()=>d(!p),className:"text-gray-700 dark:text-white hover:text-gray-900 dark:hover:text-gray-300 p-2",title:"Menu",children:v.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),p&&v.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[v.jsxs("button",{onClick:()=>{d(!1),n()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[v.jsx("span",{className:"underline",children:"H"}),"elp"]}),v.jsxs("button",{onClick:()=>{d(!1),e()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[v.jsx("span",{className:"underline",children:"O"}),"ptions"]}),v.jsxs("button",{onClick:()=>{d(!1),t()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[v.jsx("span",{className:"underline",children:"P"}),"arser Panes"]}),h&&v.jsxs("button",{onClick:()=>{d(!1),r()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[v.jsx("span",{className:"underline",children:"T"}),"est Format"]}),v.jsxs("button",{onClick:()=>{d(!1),s()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[v.jsx("span",{className:"underline",children:"K"}),"eyboard Shortcuts"]}),v.jsx("button",{onClick:()=>{d(!1),l()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Sandbox Setup"}),v.jsx("button",{onClick:()=>{d(!1),a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Add API Tokens"}),v.jsx("button",{onClick:()=>{d(!1),c()},className:"w-full text-left px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Factory Reset"})]})]})}function OA({isOpen:n,onClose:e}){return O.useEffect(()=>{if(!n)return;const t=r=>{r.key==="Escape"&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[85vh] overflow-hidden flex flex-col",onClick:t=>t.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Help"}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsxs("div",{className:"p-4 space-y-5 overflow-y-auto",children:[v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Overview"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["The ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"YAML Parser Playground"})," lets you compare how 17+ different YAML parser implementations handle the same input. Enter YAML in the input editor on the left, and see the parsed output from each parser in the panes on the right."]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Understanding the Colors"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"Each output pane has a colored header showing the parse status:"}),v.jsxs("div",{className:"space-y-2 text-sm",children:[v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"inline-block w-4 h-4 bg-green-300 border-4 border-green-300 rounded flex-shrink-0 mt-0.5"}),v.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Green:"})," The YAML parsed successfully (no errors)"]})]}),v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"inline-block w-4 h-4 bg-red-300 border-4 border-red-300 rounded flex-shrink-0 mt-0.5"}),v.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Red:"})," The parser returned an error"]})]}),v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"inline-block w-4 h-4 bg-green-300 border-4 border-red-600 rounded flex-shrink-0 mt-0.5"}),v.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Red border:"})," Output differs from the Reference Parser"]})]})]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mt-2",children:"A red border indicates disagreement  either the output differs from RefParse, or one parser succeeded while the other failed."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"The Reference Parser"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["The ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"RefParse"})," pane shows output from the official YAML Reference Parser, which aims to implement the YAML 1.2 specification exactly. All other parsers are compared against it. RefParse runs directly in your browser and doesn't require the sandbox."]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Output Format"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:['The output is a DSL (domain-specific language) representing YAML parser "events"  the internal data structures parsers create when processing YAML. This is the same format used by the'," ",v.jsx("a",{href:"https://github.com/yaml/yaml-test-suite",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"YAML Test Suite"}),'. A "parser" is just one stage in a YAML "loader"  it converts text to events, while later stages convert events to native data structures.']})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Running Other Parsers"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Most parsers (Python, Go, Ruby, Java, etc.) require a local Docker sandbox to run. Click the ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Setup"})," button in the header for instructions on starting the sandbox container. Without it, only the JavaScript-based Reference Parser will work."]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"YAML Test Suite"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Use the ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Search Test Suite"})," feature (in the input pane menu) to load test cases from the official YAML Test Suite. You can also run the entire test suite against any parser by clicking its hamburger menu and selecting ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Test Suite"}),"."]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Sharing URLs"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Your YAML input is automatically encoded in the URL. Copy and share the URL to let others see exactly what you're working on  great for bug reports and discussions about YAML edge cases."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Keyboard Shortcuts"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Press ",v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"K"})," to see all keyboard shortcuts. Highlights include:"]}),v.jsxs("ul",{className:"text-gray-600 dark:text-gray-300 text-sm mt-2 space-y-1 list-disc list-inside",children:[v.jsxs("li",{children:[v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"I"}),"  Focus the input editor"]}),v.jsxs("li",{children:[v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"A"})," / ",v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"N"}),"  Show all / no panes"]}),v.jsxs("li",{children:[v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"D"}),"  Show only differing panes"]}),v.jsxs("li",{children:[v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"O"})," / ",v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"P"}),"  Options / Parser Panes"]})]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Organizing Panes"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Drag parser panes by their headers to reorder them. Use"," ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Parser Panes"})," (press P) to show/hide specific parsers, or ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Options"})," (press O) to change the editor type or color scheme."]})]})]})]})}):null}function CA({isOpen:n,onClose:e}){return O.useEffect(()=>{if(!n)return;const t=r=>{r.key==="Escape"&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4",onClick:t=>t.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Keyboard Shortcuts"}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsx("div",{className:"p-4",children:v.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-sm",children:[v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"Esc"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Unfocus input pane / Close modal"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"I"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Focus input pane"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"\\\\\\"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Clear input and focus"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"A"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show all panes"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"N"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Hide all panes"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"D"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show differing panes"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"S"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show your selected panes"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"C"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Compare Test Runs"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"O"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Open Options"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"P"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Open Parser Panes"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"H"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show help"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"K"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show keyboard shortcuts"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"T"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Test Format (yaml-test-suite entry)"})]})})]})}):null}const PA=["alias","anchor","comment","complex-key","directive","document","double","duplicate-key","edge","empty","empty-key","error","explicit-key","flow","folded","footer","header","indent","literal","local-tag","mapping","scalar","sequence","simple","single","spec","tag","unknown-tag","whitespace","1.3-err","1.3-mod","libyaml-err","upto-1.2"];function NA({isOpen:n,onClose:e,yaml:t,events:r,isError:s}){const[l,a]=O.useState(!0),[c,h]=O.useState(""),[p,d]=O.useState(""),[m,x]=O.useState([]),[k,b]=O.useState(null),[S,C]=O.useState(null),[P,M]=O.useState(""),[T,B]=O.useState([]),[L,F]=O.useState(""),[j,W]=O.useState(!1),[Y,K]=O.useState(!1),[V,Q]=O.useState(""),[J,ee]=O.useState(!1),X=H=>{let E=0;return H.split(`
`).map(D=>{const Z=D.trim();if(!Z)return"";Z.startsWith("-")&&(E=Math.max(0,E-1));const le=" ".repeat(E)+Z;return Z.startsWith("+")&&E++,le}).filter(Boolean).join(`
`)},ue=(H,E,D,Z)=>{let le=`name: ${H}
`;Z&&(le+=`from: github:${Z}
`),E.length>0&&(le+=`tags: ${E.join(" ")}
`),s&&(le+=`fail: true
`),le+=`yaml: |
`,le+=t.split(`
`).map(ne=>"  "+ne).join(`
`)+`
`,le+=`tree: |
`;const ye=X(r);return le+=ye.split(`
`).map(ne=>"  "+ne).join(`
`)+`
`,D&&(le+=`json: |
`,le+=D.split(`
`).map(ne=>"  "+ne).join(`
`)+`
`),le},de=async()=>{try{await navigator.clipboard.writeText(P),W(!0),setTimeout(()=>W(!1),2e3)}catch{const H=document.createElement("textarea");H.value=P,document.body.appendChild(H),H.select(),document.execCommand("copy"),document.body.removeChild(H),W(!0),setTimeout(()=>W(!1),2e3)}},$=async()=>{K(!0),F("");try{const H=localStorage.getItem("github-token")||"",E=await sA({token:H,testId:p,testName:c,yaml:t,events:r,isError:s,similarTests:T});E.success&&E.prUrl?(Q(E.prUrl),ee(!0)):F(E.error||"Failed to create PR")}catch(H){F(H instanceof Error?H.message:"Failed to submit PR")}finally{K(!1)}},re=H=>{x(E=>E.includes(H)?E.filter(D=>D!==H):[...E,H].sort())};return O.useEffect(()=>{n&&(a(!0),F(""),ee(!1),Q(""),(async()=>{try{const E=localStorage.getItem("anthropic-key")||"",D=localStorage.getItem("github-token")||"",Z=await iA({yaml:t,events:r,isError:s,anthropicKey:E,githubToken:D});d(Z.testId),h(Z.testName),x(Z.tags||[]),b(Z.json),C(Z.githubUsername),B(Z.similarTests||[]);const le=ue(Z.testName,Z.tags||[],Z.json,Z.githubUsername);M(le)}catch(E){F(E instanceof Error?E.message:"Failed to load test data")}finally{a(!1)}})())},[n,t,r,s]),O.useEffect(()=>{if(!l&&c){const H=ue(c,m,k,S);M(H)}},[m,c,k,S,l]),O.useEffect(()=>{if(!n)return;const H=E=>{E.key==="Escape"&&e()};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] overflow-hidden",onClick:H=>H.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:J?"PR Created!":"YAML Test Suite Format"}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh] space-y-4",children:[L&&v.jsx("div",{className:"p-3 bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 rounded text-sm",children:L}),l&&v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Generating test format..."})]}),J&&!l&&v.jsxs("div",{className:"text-center py-8 space-y-4",children:[v.jsx("div",{className:"text-green-600 dark:text-green-400 text-5xl",children:""}),v.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"PR Created Successfully!"}),v.jsx("a",{href:V,target:"_blank",rel:"noopener noreferrer",className:"inline-block px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors",children:"View Pull Request"})]}),!l&&!J&&v.jsxs(v.Fragment,{children:[v.jsx("div",{children:v.jsx("textarea",{id:"test-format",value:P,onChange:H=>M(H.target.value),className:"w-full h-64 px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-white font-mono text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 resize-none"})}),v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Tags"}),v.jsx("div",{className:"flex flex-wrap gap-2",children:PA.map(H=>v.jsx("button",{onClick:()=>re(H),className:`px-2 py-1 text-xs rounded transition-colors ${m.includes(H)?"bg-blue-600 text-white hover:bg-blue-500":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:H},H))})]}),T.length>0&&v.jsxs("div",{children:[v.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-2",children:"Similar Tests"}),v.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-3 space-y-2",children:[v.jsx("p",{className:"text-xs text-yellow-800 dark:text-yellow-200 mb-2",children:"The following tests may already cover similar features:"}),v.jsx("ul",{className:"space-y-1.5",children:T.map(H=>v.jsx("li",{children:v.jsxs("a",{href:H.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline font-mono flex items-start",children:[v.jsxs("span",{className:"font-bold mr-2",children:[H.id,":"]}),v.jsx("span",{className:"flex-1",children:H.name})]})},H.id))})]})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:de,className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors",children:j?"Copied!":"Copy"}),v.jsx("button",{onClick:$,disabled:Y,className:"px-4 py-2 bg-green-600 hover:bg-green-500 text-white rounded transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:Y?"Creating PR...":"Create PR"})]}),v.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["This format can be used to submit a test case PR to the"," ",v.jsx("a",{href:"https://github.com/yaml/yaml-test-suite",target:"_blank",rel:"noopener noreferrer",className:"font-bold text-blue-600 dark:text-blue-400 hover:underline",children:"yaml-test-suite"})," ","repository."]})]})]})]})}):null}const rf="github-token",sf="anthropic-key";function EA({isOpen:n,onClose:e}){const[t,r]=O.useState(""),[s,l]=O.useState(""),[a,c]=O.useState(!1),[h,p]=O.useState(!1);O.useEffect(()=>{c(!!localStorage.getItem(rf)),p(!!localStorage.getItem(sf)),r(""),l("")},[n]);const d=()=>{t.trim()&&(localStorage.setItem(rf,t.trim()),c(!0),r(""))},m=()=>{s.trim()&&(localStorage.setItem(sf,s.trim()),p(!0),l(""))},x=()=>{localStorage.removeItem(rf),c(!1),r("")},k=()=>{localStorage.removeItem(sf),p(!1),l("")};return O.useEffect(()=>{if(!n)return;const b=S=>{S.key==="Escape"&&e()};return document.addEventListener("keydown",b),()=>document.removeEventListener("keydown",b)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",onClick:b=>b.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"API Keys"}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsx("div",{className:"px-4 pt-4 pb-2",children:v.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["These API keys enable PR submission to the"," ",v.jsx("a",{href:"https://github.com/yaml/yaml-test-suite",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline font-semibold",children:"yaml-test-suite"})," ","repository. Your GitHub token is required for creating PRs, and the Anthropic key enables AI-powered test naming and duplicate detection (you will be billed for LLM usage). All keys are stored locally in your browser only."]})}),v.jsxs("div",{className:"p-4 space-y-6",children:[v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("a",{href:"https://github.com/settings/tokens/new?scopes=public_repo&description=YAML%20Playground%20PR%20Submission",target:"_blank",rel:"noopener noreferrer",className:"text-md font-semibold text-blue-600 dark:text-blue-400 hover:underline",children:"GitHub Personal Access Token"}),a&&v.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:" Saved"})]}),v.jsxs("div",{children:[v.jsx("input",{id:"github-token",type:"password",value:t,onChange:b=>r(b.target.value),placeholder:a?"**************** (already set)":"ghp_...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Enables PR submission to yaml-test-suite. Stored in your browser."})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:d,disabled:!t.trim(),className:"flex-1 px-3 py-1.5 text-sm bg-blue-600 hover:bg-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded transition-colors",children:"Save"}),a&&v.jsx("button",{onClick:x,className:"px-3 py-1.5 text-sm bg-red-600 hover:bg-red-500 text-white rounded transition-colors",children:"Clear"})]})]}),v.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700"}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("a",{href:"https://console.anthropic.com/settings/keys",target:"_blank",rel:"noopener noreferrer",className:"text-md font-semibold text-blue-600 dark:text-blue-400 hover:underline",children:"Anthropic API Key"}),h&&v.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:" Saved"})]}),v.jsxs("div",{children:[v.jsx("input",{id:"anthropic-key",type:"password",value:s,onChange:b=>l(b.target.value),placeholder:h?"**************** (already set)":"sk-ant-...",className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-white placeholder-gray-400 dark:placeholder-gray-500 focus:outline-none focus:ring-2 focus:ring-blue-500"}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"Used for AI-powered test naming and duplicate detection. You will be billed for LLM usage. Stored in your browser."})]}),v.jsxs("div",{className:"flex gap-2",children:[v.jsx("button",{onClick:m,disabled:!s.trim(),className:"flex-1 px-3 py-1.5 text-sm bg-blue-600 hover:bg-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded transition-colors",children:"Save"}),h&&v.jsx("button",{onClick:k,className:"px-3 py-1.5 text-sm bg-red-600 hover:bg-red-500 text-white rounded transition-colors",children:"Clear"})]})]})]})]})}):null}const of="yaml-play-layout";function jy(){const n=dA();return{panes:Vi.map(t=>{const r=n.indexOf(t.id);return{id:t.id,visible:r>=0,order:r>=0?r:1e3+Vi.findIndex(s=>s.id===t.id)}}),selectedPaneIds:n}}function AA(){const[n,e]=O.useState(()=>{try{const b=localStorage.getItem(of);if(b){const S=JSON.parse(b),C=new Set(S.panes.map(M=>M.id)),P=Vi.filter(M=>!C.has(M.id)).map((M,T)=>({id:M.id,visible:!1,order:S.panes.length+T}));return{...S,panes:[...S.panes,...P]}}}catch{}return jy()});O.useEffect(()=>{localStorage.setItem(of,JSON.stringify(n))},[n]);const t=O.useCallback((b,S)=>{e(C=>{let P;if(S){const T=Math.max(...C.panes.map(B=>B.order));P=C.panes.map(B=>B.id===b?{...B,visible:S,order:T+1}:B)}else P=C.panes.map(T=>T.id===b?{...T,visible:S}:T);const M=P.filter(T=>T.visible).map(T=>T.id);return{...C,panes:P,selectedPaneIds:M}})},[]),r=O.useCallback((b,S)=>{e(C=>{const P=[...C.panes],M=P.findIndex(L=>L.id===b),T=P.findIndex(L=>L.id===S);if(M===-1||T===-1)return C;const[B]=P.splice(M,1);return P.splice(T,0,B),{panes:P.map((L,F)=>({...L,order:F}))}})},[]),s=O.useCallback(()=>{localStorage.removeItem(of),cA(),e(jy())},[]),l=O.useCallback(()=>{e(b=>{const S=b.panes.filter(T=>T.visible),C=S.length>0?Math.max(...S.map(T=>T.order)):-1,P=b.panes.filter(T=>!T.visible&&T.id!=="refparse").sort((T,B)=>T.id.localeCompare(B.id)),M=new Map;return P.forEach((T,B)=>{M.set(T.id,C+1+B)}),{...b,panes:b.panes.map(T=>({...T,visible:!0,order:M.has(T.id)?M.get(T.id):T.order}))}})},[]),a=O.useCallback(()=>{e(b=>({...b,panes:b.panes.map(S=>S.id==="refparse"?S:{...S,visible:!1})}))},[]),c=O.useCallback(()=>{e(b=>{const S=new Set(b.selectedPaneIds??[]);return S.size===0?b:{...b,panes:b.panes.map(C=>({...C,visible:S.has(C.id)}))}})},[]),h=O.useCallback(b=>{e(S=>{const C=new Set(b);if(S.panes.filter(B=>!B.visible&&C.has(B.id)).length===0)return S;let T=Math.max(...S.panes.filter(B=>B.visible).map(B=>B.order),-1)+1;return{...S,panes:S.panes.map(B=>!B.visible&&C.has(B.id)?{...B,visible:!0,order:T++}:B)}})},[]),p=O.useCallback((b,S)=>{e(C=>{const P=C.panes.find(j=>j.id===b);if(!P)return C;const M=P.order,L=[...C.panes.map(j=>j.id===S?{...j,visible:!0,order:M+.5}:j)].sort((j,W)=>j.order-W.order).map((j,W)=>({...j,order:W})),F=L.filter(j=>j.visible).map(j=>j.id);return{...C,panes:L,selectedPaneIds:F}})},[]),d=O.useCallback(b=>{e(S=>({...S,inputPaneWidth:b}))},[]),m=O.useCallback(b=>{e(S=>({...S,colorScheme:b}))},[]),x=O.useCallback(b=>{e(S=>({...S,editorType:b}))},[]),k=O.useCallback(()=>n.panes.filter(b=>b.visible).sort((b,S)=>b.order-S.order),[n.panes]);return{layout:n,updatePaneVisibility:t,reorderPanes:r,resetLayout:s,showAllPanes:l,hideAllPanes:a,showSelectedPanes:c,showErrorPanes:h,addPaneAfter:p,getVisiblePanes:k,inputPaneWidth:n.inputPaneWidth??400,setInputPaneWidth:d,colorScheme:n.colorScheme==="dark"?"dark":"light",setColorScheme:m,editorType:n.editorType??"monaco",setEditorType:x}}const Qa=Vi.filter(n=>n.id!=="refparse").map(n=>n.id);function RA(){const[n,e]=O.useState(new Map),[t,r]=O.useState(""),s=O.useRef(null),l=O.useCallback(async(h,p)=>{s.current&&s.current.abort(),s.current=new AbortController,e(k=>{const b=new Map(k);return b.set("refparse",{parserId:"refparse",output:"",status:0,loading:!0}),Qa.forEach(S=>{b.set(S,{parserId:S,output:"",status:0,loading:!0})}),b});const d=await E1(h),m=d.output,x=d.status;r(m),e(k=>{const b=new Map(k);return b.set("refparse",{parserId:"refparse",output:d.output,status:d.status,loading:!1,matches:d.status===0,agrees:!0}),b}),await Promise.all(Qa.map(async k=>{const b=Vi.find(M=>M.id===k);if(!b)return;const S=await N1(k,h,b.version);let C,P;if(S.status===-1)C=!1,P=!1;else if(k==="refhs"){const M=x===0,T=S.status===0;C=M===T,P=x===0&&C}else x!==0?(C=S.status!==0,P=!1):(C=S.status===0&&A1(m,S.output,k),P=C);e(M=>{const T=new Map(M);return T.set(k,{parserId:k,output:S.output,status:S.status,loading:!1,matches:P,agrees:C,versionMismatch:S.versionMismatch}),T})}))},[]),a=O.useCallback(h=>n.get(h),[n]),c=O.useCallback(()=>{const h=[];let p=0;return Qa.forEach(d=>{const m=n.get(d);if(!m||m.loading)p++;else if(!m.agrees){const x=ii(d);h.push((x==null?void 0:x.name)||d)}}),{total:Qa.length,disagreeing:h.length,disagreeingNames:h,loading:p>0}},[n]);return{results:n,refOutput:t,runAllParsers:l,getResult:a,getAgreementCount:c}}function MA(n=640){const[e,t]=O.useState(typeof window<"u"?window.innerWidth<n:!1);return O.useEffect(()=>{const r=()=>t(window.innerWidth<n);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[n]),e}function TA(){const[n,e]=O.useState(typeof window<"u"?window.innerWidth>window.innerHeight:!1);return O.useEffect(()=>{const t=()=>e(window.innerWidth>window.innerHeight);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n}function DA(){const n=window.location.hash.slice(1);if(!n)return null;try{return atob(n)}catch{return null}}function LA(n){const e=btoa(n);window.history.replaceState(null,"",`#${e}`)}function jA(){var gi,nn;const[n,e]=O.useState(()=>DA()||Vo),[t,r]=O.useState(!1),[s,l]=O.useState(void 0),[a,c]=O.useState(!1),[h,p]=O.useState(!1),[d,m]=O.useState(!1),[x,k]=O.useState(!1),[b,S]=O.useState(!1),[C,P]=O.useState(null),[M,T]=O.useState(!1),[B,L]=O.useState(!1),[F,j]=O.useState(!0),[W,Y]=O.useState(!1),K=O.useRef(null),V=O.useRef(""),Q=MA(640),J=TA(),ee=()=>{const Ne=!!localStorage.getItem("github-token"),oe=!!localStorage.getItem("anthropic-key");return Ne&&oe},{layout:X,updatePaneVisibility:ue,reorderPanes:de,resetLayout:$,showAllPanes:re,hideAllPanes:H,showSelectedPanes:E,showErrorPanes:D,addPaneAfter:Z,getVisiblePanes:le,inputPaneWidth:ye,setInputPaneWidth:ne,colorScheme:he,setColorScheme:Se,editorType:Ce,setEditorType:ve}=AA(),{results:Re,runAllParsers:_e,getResult:Ue,getAgreementCount:Je}=RA(),ft=le(),{total:Cn,disagreeing:Er,disagreeingNames:fi,loading:lr}=Je(),lt=ft.map(Ne=>Ne.id).join(","),Ft=O.useRef({input:"",panes:""}),Wn=Array.from(Re.values()).some(Ne=>Ne.versionMismatch);O.useEffect(()=>{const Ne=async()=>{const Ie=await rA();j(Ie)};Ne();const oe=setInterval(Ne,1e4);return()=>clearInterval(oe)},[]),O.useEffect(()=>{const Ne=X.panes.find(oe=>oe.id==="refparse");Ne&&!Ne.visible&&ue("refparse",!0)},[X.panes,ue]),O.useEffect(()=>{const Ne=setTimeout(()=>{LA(n)},1e3);return()=>clearTimeout(Ne)},[n]),O.useEffect(()=>{if(Ft.current.input===n&&Ft.current.panes===lt)return;const Ne=setTimeout(()=>{const oe=lt.split(",").filter(Boolean);oe.length>0&&(Ft.current={input:n,panes:lt},_e(n,oe))},500);return()=>clearTimeout(Ne)},[n,lt,_e]),O.useEffect(()=>{const Ne=oe=>{var mi,yi,Ar;const Ie=oe.target,at=Ie.tagName==="INPUT"||Ie.tagName==="TEXTAREA"||Ie.closest(".monaco-editor")||Ie.closest(".cm-editor");if(oe.key==="Escape"&&at){oe.preventDefault(),(mi=K.current)==null||mi.blur();return}if(at)return;const nt=oe.key.toUpperCase();if(nt==="I"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),(yi=K.current)==null||yi.focus()),nt==="H"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),m(!0)),nt==="O"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),c(!0)),nt==="P"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),r(!0)),nt==="A"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),re()),nt==="N"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),H()),nt==="S"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),E()),nt==="C"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),S(!0)),nt==="K"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),k(!0)),nt==="T"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&ee()&&(oe.preventDefault(),T(!0)),oe.key==="\\"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(V.current+="\\",V.current==="\\\\\\"&&(oe.preventDefault(),e(""),(Ar=K.current)==null||Ar.focus(),V.current="")),nt==="D"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey){oe.preventDefault();const Qn=[];Re.forEach((xi,ur)=>{ur!=="refparse"&&xi.agrees===!1&&Qn.push(ur)}),Qn.length>0&&D(Qn)}nt==="X"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey?(V.current+="X",V.current==="XXX"&&(oe.preventDefault(),$(),e(Vo),V.current="")):oe.key!=="\\"&&nt!=="X"&&(V.current="")};return document.addEventListener("keydown",Ne),()=>document.removeEventListener("keydown",Ne)},[re,H,E,D,Re,$]);const di=Yw(Mm(xd,{activationConstraint:{distance:8}}),Mm(md)),pi=O.useCallback(Ne=>{const{active:oe,over:Ie}=Ne;if(Ie&&oe.id!==Ie.id){if(oe.id==="refparse")return;de(oe.id,Ie.id)}},[de]),ar=ii("refparse");return Q?v.jsxs("div",{className:`h-screen flex flex-col bg-gray-100 dark:bg-gray-900 ${he==="dark"?"dark":""}`,children:[v.jsxs("header",{className:"bg-white dark:bg-gray-800 px-3 py-2 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[v.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"YAML Playground"}),v.jsxs("div",{className:"relative",children:[v.jsx("button",{onClick:()=>Y(!W),className:"p-2 text-gray-700 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors","aria-label":"Menu",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),W&&v.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-lg z-50",children:[v.jsx("button",{onClick:()=>{m(!0),Y(!1)},className:"w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"About"}),v.jsx("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),Y(!1)},className:"w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Share"}),v.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",onClick:()=>Y(!1),className:"block w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"GitHub"})]})]})]}),v.jsxs("div",{className:`flex-1 flex ${J?"flex-row":"flex-col"} overflow-hidden min-h-0`,children:[v.jsx("div",{className:`${J?"w-1/2 h-full":"h-1/2 w-full"} flex flex-col overflow-hidden ${J?"border-r border-gray-300 dark:border-gray-700":"border-b border-gray-300 dark:border-gray-700"}`,children:v.jsx(Ey,{ref:K,value:n,onChange:e,width:ye,onWidthChange:ne,colorScheme:he,editorType:Ce,showBorder:!1,isMobile:!0})}),ar&&v.jsx("div",{className:`${J?"w-1/2 h-full":"h-1/2 w-full"} flex flex-col overflow-hidden`,children:v.jsx(nf,{parser:ar,result:Ue("refparse"),isDraggable:!1,onSetYamlInput:e,showTestSuite:!1,onAddPane:()=>{l("refparse"),r(!0)}})})]})]}):v.jsxs("div",{className:`h-screen flex flex-col bg-gray-100 dark:bg-gray-900 ${he==="dark"?"dark":""}`,children:[v.jsxs("header",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"YAML Parser Playground"}),v.jsxs("div",{className:"flex items-center gap-2",children:[(!F||Wn)&&v.jsx("button",{onClick:()=>p(!0),className:"px-3 py-1.5 bg-yellow-500 text-black font-semibold rounded hover:bg-yellow-400 transition-colors text-sm",children:"Setup"}),v.jsx(SA,{onHelp:()=>m(!0),onOptions:()=>c(!0),onParserPanes:()=>r(!0),onTestFormat:()=>T(!0),onKeyboardShortcuts:()=>k(!0),onSandboxSetup:()=>p(!0),onAddTokens:()=>L(!0),hasTokens:ee(),onFactoryReset:()=>{$(),e(Vo)}})]})]}),v.jsx("div",{className:"flex-1 flex overflow-hidden",children:(()=>{const Ne=ft.length>8,oe=Ne?ft.filter(Ie=>Ie.id!=="refparse"):ft;return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:`${Ne?"grid grid-rows-2":"flex flex-col"} h-full border-r border-gray-300 dark:border-gray-700`,style:{width:`${ye}px`,minWidth:"200px",maxWidth:"800px"},children:[v.jsx(Ey,{ref:K,value:n,onChange:e,width:ye,onWidthChange:ne,colorScheme:he,editorType:Ce,showBorder:!1,heightMode:Ne?"half":"full"}),Ne&&ar&&v.jsx("div",{className:"h-full overflow-hidden border-t border-gray-300 dark:border-gray-700",children:v.jsx(nf,{parser:ar,result:Ue("refparse"),isDraggable:!1,onSetYamlInput:e,onAddPane:()=>{l("refparse"),r(!0)}},"refparse-sidebar")})]},Ne?"left-col-split":"left-col-full"),v.jsx("div",{className:"flex-1 grid grid-cols-4 overflow-y-auto pane-container gap-px bg-gray-300 dark:bg-gray-700 auto-rows-fr",children:v.jsx(eS,{sensors:di,collisionDetection:tb,onDragEnd:pi,children:v.jsx(dS,{items:oe.map(Ie=>Ie.id),strategy:hS,children:oe.map(Ie=>{const at=ii(Ie.id);if(!at)return null;const nt=Ie.id==="refparse";return v.jsx(nf,{parser:at,result:Ue(Ie.id),onClose:nt?void 0:()=>ue(Ie.id,!1),onAddPane:()=>{l(Ie.id),r(!0)},isDraggable:!nt,onSetYamlInput:e},Ie.id)})})})})]})})()}),v.jsx(yA,{total:Cn,disagreeing:Er,disagreeingNames:fi,loading:lr,sandboxAvailable:F,onSandboxSetup:()=>p(!0)}),v.jsx(xA,{isOpen:t,onClose:()=>{r(!1),l(void 0)},paneStates:X.panes,onToggleVisibility:ue,insertAfterId:s,onAddPaneAfter:Z}),v.jsx(wA,{isOpen:a,onClose:()=>c(!1),colorScheme:he,onColorSchemeChange:Se,editorType:Ce,onEditorTypeChange:ve}),v.jsx(bA,{isOpen:h,onClose:()=>{p(!1);const Ne=lt.split(",").filter(Boolean);Ne.length>0&&_e(n,Ne)}}),v.jsx(OA,{isOpen:d,onClose:()=>m(!1)}),v.jsx(CA,{isOpen:x,onClose:()=>k(!1)}),v.jsx(T1,{isOpen:b,onClose:()=>S(!1),onSelectParser:Ne=>P(Ne)}),v.jsx(NA,{isOpen:M,onClose:()=>T(!1),yaml:n,events:((gi=Ue("refparse"))==null?void 0:gi.output)||"",isError:(((nn=Ue("refparse"))==null?void 0:nn.status)??0)!==0}),v.jsx(EA,{isOpen:B,onClose:()=>L(!1)}),C&&ii(C)&&v.jsx(ad,{isOpen:!0,onClose:()=>P(null),parser:ii(C),onSelectTest:Ne=>e(Ne),forceRerun:!1,onCompare:()=>{P(null),S(!0)}})]})}jw.createRoot(document.getElementById("root")).render(v.jsx(ot.StrictMode,{children:v.jsx(jA,{})}));
//# sourceMappingURL=index-qo6Ph75l.js.map

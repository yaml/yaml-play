var bk=Object.defineProperty;var Sk=(n,e,t)=>e in n?bk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ym=(n,e,t)=>Sk(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function Dy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var kh={exports:{}},mo={},bh={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function Ok(){if(vm)return Me;vm=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function v(M){return M===null||typeof M!="object"?null:(M=m&&M[m]||M["@@iterator"],typeof M=="function"?M:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,S={};function C(M,L,ie){this.props=M,this.context=L,this.refs=S,this.updater=ie||x}C.prototype.isReactComponent={},C.prototype.setState=function(M,L){if(typeof M!="object"&&typeof M!="function"&&M!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,M,L,"setState")},C.prototype.forceUpdate=function(M){this.updater.enqueueForceUpdate(this,M,"forceUpdate")};function E(){}E.prototype=C.prototype;function A(M,L,ie){this.props=M,this.context=L,this.refs=S,this.updater=ie||x}var N=A.prototype=new E;N.constructor=A,k(N,C.prototype),N.isPureReactComponent=!0;var _=Array.isArray,I=Object.prototype.hasOwnProperty,F={current:null},B={key:!0,ref:!0,__self:!0,__source:!0};function Q(M,L,ie){var pe,ye={},re=null,he=null;if(L!=null)for(pe in L.ref!==void 0&&(he=L.ref),L.key!==void 0&&(re=""+L.key),L)I.call(L,pe)&&!B.hasOwnProperty(pe)&&(ye[pe]=L[pe]);var Se=arguments.length-2;if(Se===1)ye.children=ie;else if(1<Se){for(var Pe=Array(Se),ve=0;ve<Se;ve++)Pe[ve]=arguments[ve+2];ye.children=Pe}if(M&&M.defaultProps)for(pe in Se=M.defaultProps,Se)ye[pe]===void 0&&(ye[pe]=Se[pe]);return{$$typeof:n,type:M,key:re,ref:he,props:ye,_owner:F.current}}function q(M,L){return{$$typeof:n,type:M.type,key:L,ref:M.ref,props:M.props,_owner:M._owner}}function V(M){return typeof M=="object"&&M!==null&&M.$$typeof===n}function G(M){var L={"=":"=0",":":"=2"};return"$"+M.replace(/[=:]/g,function(ie){return L[ie]})}var H=/\/+/g;function J(M,L){return typeof M=="object"&&M!==null&&M.key!=null?G(""+M.key):L.toString(36)}function se(M,L,ie,pe,ye){var re=typeof M;(re==="undefined"||re==="boolean")&&(M=null);var he=!1;if(M===null)he=!0;else switch(re){case"string":case"number":he=!0;break;case"object":switch(M.$$typeof){case n:case e:he=!0}}if(he)return he=M,ye=ye(he),M=pe===""?"."+J(he,0):pe,_(ye)?(ie="",M!=null&&(ie=M.replace(H,"$&/")+"/"),se(ye,L,ie,"",function(ve){return ve})):ye!=null&&(V(ye)&&(ye=q(ye,ie+(!ye.key||he&&he.key===ye.key?"":(""+ye.key).replace(H,"$&/")+"/")+M)),L.push(ye)),1;if(he=0,pe=pe===""?".":pe+":",_(M))for(var Se=0;Se<M.length;Se++){re=M[Se];var Pe=pe+J(re,Se);he+=se(re,L,ie,Pe,ye)}else if(Pe=v(M),typeof Pe=="function")for(M=Pe.call(M),Se=0;!(re=M.next()).done;)re=re.value,Pe=pe+J(re,Se++),he+=se(re,L,ie,Pe,ye);else if(re==="object")throw L=String(M),Error("Objects are not valid as a React child (found: "+(L==="[object Object]"?"object with keys {"+Object.keys(M).join(", ")+"}":L)+"). If you meant to render a collection of children, use an array instead.");return he}function U(M,L,ie){if(M==null)return M;var pe=[],ye=0;return se(M,pe,"","",function(re){return L.call(ie,re,ye++)}),pe}function ae(M){if(M._status===-1){var L=M._result;L=L(),L.then(function(ie){(M._status===0||M._status===-1)&&(M._status=1,M._result=ie)},function(ie){(M._status===0||M._status===-1)&&(M._status=2,M._result=ie)}),M._status===-1&&(M._status=0,M._result=L)}if(M._status===1)return M._result.default;throw M._result}var ce={current:null},X={transition:null},ee={ReactCurrentDispatcher:ce,ReactCurrentBatchConfig:X,ReactCurrentOwner:F};function Z(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:U,forEach:function(M,L,ie){U(M,function(){L.apply(this,arguments)},ie)},count:function(M){var L=0;return U(M,function(){L++}),L},toArray:function(M){return U(M,function(L){return L})||[]},only:function(M){if(!V(M))throw Error("React.Children.only expected to receive a single React element child.");return M}},Me.Component=C,Me.Fragment=t,Me.Profiler=s,Me.PureComponent=A,Me.StrictMode=r,Me.Suspense=h,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Me.act=Z,Me.cloneElement=function(M,L,ie){if(M==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+M+".");var pe=k({},M.props),ye=M.key,re=M.ref,he=M._owner;if(L!=null){if(L.ref!==void 0&&(re=L.ref,he=F.current),L.key!==void 0&&(ye=""+L.key),M.type&&M.type.defaultProps)var Se=M.type.defaultProps;for(Pe in L)I.call(L,Pe)&&!B.hasOwnProperty(Pe)&&(pe[Pe]=L[Pe]===void 0&&Se!==void 0?Se[Pe]:L[Pe])}var Pe=arguments.length-2;if(Pe===1)pe.children=ie;else if(1<Pe){Se=Array(Pe);for(var ve=0;ve<Pe;ve++)Se[ve]=arguments[ve+2];pe.children=Se}return{$$typeof:n,type:M.type,key:ye,ref:re,props:pe,_owner:he}},Me.createContext=function(M){return M={$$typeof:a,_currentValue:M,_currentValue2:M,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},M.Provider={$$typeof:l,_context:M},M.Consumer=M},Me.createElement=Q,Me.createFactory=function(M){var L=Q.bind(null,M);return L.type=M,L},Me.createRef=function(){return{current:null}},Me.forwardRef=function(M){return{$$typeof:c,render:M}},Me.isValidElement=V,Me.lazy=function(M){return{$$typeof:d,_payload:{_status:-1,_result:M},_init:ae}},Me.memo=function(M,L){return{$$typeof:p,type:M,compare:L===void 0?null:L}},Me.startTransition=function(M){var L=X.transition;X.transition={};try{M()}finally{X.transition=L}},Me.unstable_act=Z,Me.useCallback=function(M,L){return ce.current.useCallback(M,L)},Me.useContext=function(M){return ce.current.useContext(M)},Me.useDebugValue=function(){},Me.useDeferredValue=function(M){return ce.current.useDeferredValue(M)},Me.useEffect=function(M,L){return ce.current.useEffect(M,L)},Me.useId=function(){return ce.current.useId()},Me.useImperativeHandle=function(M,L,ie){return ce.current.useImperativeHandle(M,L,ie)},Me.useInsertionEffect=function(M,L){return ce.current.useInsertionEffect(M,L)},Me.useLayoutEffect=function(M,L){return ce.current.useLayoutEffect(M,L)},Me.useMemo=function(M,L){return ce.current.useMemo(M,L)},Me.useReducer=function(M,L,ie){return ce.current.useReducer(M,L,ie)},Me.useRef=function(M){return ce.current.useRef(M)},Me.useState=function(M){return ce.current.useState(M)},Me.useSyncExternalStore=function(M,L,ie){return ce.current.useSyncExternalStore(M,L,ie)},Me.useTransition=function(){return ce.current.useTransition()},Me.version="18.3.1",Me}var xm;function ld(){return xm||(xm=1,bh.exports=Ok()),bh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function Ck(){if(wm)return mo;wm=1;var n=ld(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function a(c,h,p){var d,m={},v=null,x=null;p!==void 0&&(v=""+p),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(x=h.ref);for(d in h)r.call(h,d)&&!l.hasOwnProperty(d)&&(m[d]=h[d]);if(c&&c.defaultProps)for(d in h=c.defaultProps,h)m[d]===void 0&&(m[d]=h[d]);return{$$typeof:e,type:c,key:v,ref:x,props:m,_owner:s.current}}return mo.Fragment=t,mo.jsx=a,mo.jsxs=a,mo}var km;function Pk(){return km||(km=1,kh.exports=Ck()),kh.exports}var b=Pk(),O=ld();const st=Dy(O);var wa={},Sh={exports:{}},Jt={},Oh={exports:{}},Ch={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm;function Ek(){return bm||(bm=1,(function(n){function e(X,ee){var Z=X.length;X.push(ee);e:for(;0<Z;){var M=Z-1>>>1,L=X[M];if(0<s(L,ee))X[M]=ee,X[Z]=L,Z=M;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var ee=X[0],Z=X.pop();if(Z!==ee){X[0]=Z;e:for(var M=0,L=X.length,ie=L>>>1;M<ie;){var pe=2*(M+1)-1,ye=X[pe],re=pe+1,he=X[re];if(0>s(ye,Z))re<L&&0>s(he,ye)?(X[M]=he,X[re]=Z,M=re):(X[M]=ye,X[pe]=Z,M=pe);else if(re<L&&0>s(he,Z))X[M]=he,X[re]=Z,M=re;else break e}}return ee}function s(X,ee){var Z=X.sortIndex-ee.sortIndex;return Z!==0?Z:X.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var h=[],p=[],d=1,m=null,v=3,x=!1,k=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,A=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function N(X){for(var ee=t(p);ee!==null;){if(ee.callback===null)r(p);else if(ee.startTime<=X)r(p),ee.sortIndex=ee.expirationTime,e(h,ee);else break;ee=t(p)}}function _(X){if(S=!1,N(X),!k)if(t(h)!==null)k=!0,ae(I);else{var ee=t(p);ee!==null&&ce(_,ee.startTime-X)}}function I(X,ee){k=!1,S&&(S=!1,E(Q),Q=-1),x=!0;var Z=v;try{for(N(ee),m=t(h);m!==null&&(!(m.expirationTime>ee)||X&&!G());){var M=m.callback;if(typeof M=="function"){m.callback=null,v=m.priorityLevel;var L=M(m.expirationTime<=ee);ee=n.unstable_now(),typeof L=="function"?m.callback=L:m===t(h)&&r(h),N(ee)}else r(h);m=t(h)}if(m!==null)var ie=!0;else{var pe=t(p);pe!==null&&ce(_,pe.startTime-ee),ie=!1}return ie}finally{m=null,v=Z,x=!1}}var F=!1,B=null,Q=-1,q=5,V=-1;function G(){return!(n.unstable_now()-V<q)}function H(){if(B!==null){var X=n.unstable_now();V=X;var ee=!0;try{ee=B(!0,X)}finally{ee?J():(F=!1,B=null)}}else F=!1}var J;if(typeof A=="function")J=function(){A(H)};else if(typeof MessageChannel<"u"){var se=new MessageChannel,U=se.port2;se.port1.onmessage=H,J=function(){U.postMessage(null)}}else J=function(){C(H,0)};function ae(X){B=X,F||(F=!0,J())}function ce(X,ee){Q=C(function(){X(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){k||x||(k=!0,ae(I))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(X){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var Z=v;v=ee;try{return X()}finally{v=Z}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,ee){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var Z=v;v=X;try{return ee()}finally{v=Z}},n.unstable_scheduleCallback=function(X,ee,Z){var M=n.unstable_now();switch(typeof Z=="object"&&Z!==null?(Z=Z.delay,Z=typeof Z=="number"&&0<Z?M+Z:M):Z=M,X){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=Z+L,X={id:d++,callback:ee,priorityLevel:X,startTime:Z,expirationTime:L,sortIndex:-1},Z>M?(X.sortIndex=Z,e(p,X),t(h)===null&&X===t(p)&&(S?(E(Q),Q=-1):S=!0,ce(_,Z-M))):(X.sortIndex=L,e(h,X),k||x||(k=!0,ae(I))),X},n.unstable_shouldYield=G,n.unstable_wrapCallback=function(X){var ee=v;return function(){var Z=v;v=ee;try{return X.apply(this,arguments)}finally{v=Z}}}})(Ch)),Ch}var Sm;function Mk(){return Sm||(Sm=1,Oh.exports=Ek()),Oh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om;function Rk(){if(Om)return Jt;Om=1;var n=ld(),e=Mk();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function l(i,o){a(i,o),a(i+"Capture",o)}function a(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},m={};function v(i){return h.call(m,i)?!0:h.call(d,i)?!1:p.test(i)?m[i]=!0:(d[i]=!0,!1)}function x(i,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,o,u,f){if(o===null||typeof o>"u"||x(i,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function S(i,o,u,f,g,y,w){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=w}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];C[o]=new S(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var E=/[\-:]([a-z])/g;function A(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(E,A);C[o]=new S(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(E,A);C[o]=new S(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(E,A);C[o]=new S(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function N(i,o,u,f){var g=C.hasOwnProperty(o)?C[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(k(o,u,g,f)&&(u=null),f||g===null?v(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):g.mustUseProperty?i[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,f=g.attributeNamespace,u===null?i.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?i.setAttributeNS(f,o,u):i.setAttribute(o,u))))}var _=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,I=Symbol.for("react.element"),F=Symbol.for("react.portal"),B=Symbol.for("react.fragment"),Q=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),G=Symbol.for("react.context"),H=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),se=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),ae=Symbol.for("react.lazy"),ce=Symbol.for("react.offscreen"),X=Symbol.iterator;function ee(i){return i===null||typeof i!="object"?null:(i=X&&i[X]||i["@@iterator"],typeof i=="function"?i:null)}var Z=Object.assign,M;function L(i){if(M===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);M=o&&o[1]||""}return`
`+M+i}var ie=!1;function pe(i,o){if(!i||ie)return"";ie=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(z){var f=z}Reflect.construct(i,[],o)}else{try{o.call()}catch(z){f=z}i.call(o.prototype)}else{try{throw Error()}catch(z){f=z}i()}}catch(z){if(z&&f&&typeof z.stack=="string"){for(var g=z.stack.split(`
`),y=f.stack.split(`
`),w=g.length-1,P=y.length-1;1<=w&&0<=P&&g[w]!==y[P];)P--;for(;1<=w&&0<=P;w--,P--)if(g[w]!==y[P]){if(w!==1||P!==1)do if(w--,P--,0>P||g[w]!==y[P]){var R=`
`+g[w].replace(" at new "," at ");return i.displayName&&R.includes("<anonymous>")&&(R=R.replace("<anonymous>",i.displayName)),R}while(1<=w&&0<=P);break}}}finally{ie=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?L(i):""}function ye(i){switch(i.tag){case 5:return L(i.type);case 16:return L("Lazy");case 13:return L("Suspense");case 19:return L("SuspenseList");case 0:case 2:case 15:return i=pe(i.type,!1),i;case 11:return i=pe(i.type.render,!1),i;case 1:return i=pe(i.type,!0),i;default:return""}}function re(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case B:return"Fragment";case F:return"Portal";case q:return"Profiler";case Q:return"StrictMode";case J:return"Suspense";case se:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case G:return(i.displayName||"Context")+".Consumer";case V:return(i._context.displayName||"Context")+".Provider";case H:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case U:return o=i.displayName||null,o!==null?o:re(i.type)||"Memo";case ae:o=i._payload,i=i._init;try{return re(i(o))}catch{}}return null}function he(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return re(o);case 8:return o===Q?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function Se(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Pe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ve(i){var o=Pe(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(w){f=""+w,y.call(this,w)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(w){f=""+w},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ae(i){i._valueTracker||(i._valueTracker=ve(i))}function We(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return i&&(f=Pe(i)?i.checked?"true":"false":i.value),i=f,i!==u?(o.setValue(i),!0):!1}function ot(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Je(i,o){var u=o.checked;return Z({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function ct(i,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=Se(o.value!=null?o.value:u),i._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ee(i,o){o=o.checked,o!=null&&N(i,"checked",o,!1)}function de(i,o){Ee(i,o);var u=Se(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?tn(i,o.type,u):o.hasOwnProperty("defaultValue")&&tn(i,o.type,Se(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Ve(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function tn(i,o,u){(o!=="number"||ot(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var ze=Array.isArray;function Qt(i,o,u,f){if(i=i.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=o.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&f&&(i[u].defaultSelected=!0)}else{for(u=""+Se(u),o=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function On(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return Z({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function or(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(ze(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:Se(u)}}function ui(i,o){var u=Se(o.value),f=Se(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),f!=null&&(i.defaultValue=""+f)}function ci(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function hl(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wn(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?hl(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Cn,Cr=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,g){MSApp.execUnsafeLocalFunction(function(){return i(o,u,f,g)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Cn=Cn||document.createElement("div"),Cn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Cn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Pr(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var $t={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fl=["Webkit","ms","Moz","O"];Object.keys($t).forEach(function(i){fl.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),$t[o]=$t[i]})});function dl(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||$t.hasOwnProperty(i)&&$t[i]?(""+o).trim():o+"px"}function pl(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=dl(u,o[u],f);u==="float"&&(u="cssFloat"),f?i.setProperty(u,g):i[u]=g}}var Ds=Z({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ji(i,o){if(o){if(Ds[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Ns(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Bi=null;function Ts(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Ls=null,Er=null,Ke=null;function Ct(i){if(i=eo(i)){if(typeof Ls!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Il(o),Ls(i.stateNode,i.type,o))}}function Pt(i){Er?Ke?Ke.push(i):Ke=[i]:Er=i}function Pn(){if(Er){var i=Er,o=Ke;if(Ke=Er=null,Ct(i),o)for(i=0;i<o.length;i++)Ct(o[i])}}function Bt(i,o){return i(o)}function Et(){}var Ut=!1;function lr(i,o,u){if(Ut)return i(o,u);Ut=!0;try{return Bt(i,o,u)}finally{Ut=!1,(Er!==null||Ke!==null)&&(Et(),Pn())}}function qe(i,o){var u=i.stateNode;if(u===null)return null;var f=Il(u);if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var fn=!1;if(c)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){fn=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch{fn=!1}function En(i,o,u,f,g,y,w,P,R){var z=Array.prototype.slice.call(arguments,3);try{o.apply(u,z)}catch(K){this.onError(K)}}var Mn=!1,Qn=null,nn=!1,ar=null,Is={onError:function(i){Mn=!0,Qn=i}};function A1(i,o,u,f,g,y,w,P,R){Mn=!1,Qn=null,En.apply(Is,arguments)}function D1(i,o,u,f,g,y,w,P,R){if(A1.apply(this,arguments),Mn){if(Mn){var z=Qn;Mn=!1,Qn=null}else throw Error(t(198));nn||(nn=!0,ar=z)}}function hi(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function _d(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Vd(i){if(hi(i)!==i)throw Error(t(188))}function N1(i){var o=i.alternate;if(!o){if(o=hi(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,f=o;;){var g=u.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===u)return Vd(g),i;if(y===f)return Vd(g),o;y=y.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=y;else{for(var w=!1,P=g.child;P;){if(P===u){w=!0,u=g,f=y;break}if(P===f){w=!0,f=g,u=y;break}P=P.sibling}if(!w){for(P=y.child;P;){if(P===u){w=!0,u=y,f=g;break}if(P===f){w=!0,f=y,u=g;break}P=P.sibling}if(!w)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Hd(i){return i=N1(i),i!==null?Wd(i):null}function Wd(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Wd(i);if(o!==null)return o;i=i.sibling}return null}var Qd=e.unstable_scheduleCallback,$d=e.unstable_cancelCallback,T1=e.unstable_shouldYield,L1=e.unstable_requestPaint,nt=e.unstable_now,I1=e.unstable_getCurrentPriorityLevel,Vu=e.unstable_ImmediatePriority,Ud=e.unstable_UserBlockingPriority,gl=e.unstable_NormalPriority,j1=e.unstable_LowPriority,Xd=e.unstable_IdlePriority,ml=null,$n=null;function B1(i){if($n&&typeof $n.onCommitFiberRoot=="function")try{$n.onCommitFiberRoot(ml,i,void 0,(i.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:_1,z1=Math.log,F1=Math.LN2;function _1(i){return i>>>=0,i===0?32:31-(z1(i)/F1|0)|0}var yl=64,vl=4194304;function js(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function xl(i,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,g=i.suspendedLanes,y=i.pingedLanes,w=u&268435455;if(w!==0){var P=w&~g;P!==0?f=js(P):(y&=w,y!==0&&(f=js(y)))}else w=u&~g,w!==0?f=js(w):y!==0&&(f=js(y));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,y=o&-o,g>=y||g===16&&(y&4194240)!==0))return o;if((f&4)!==0&&(f|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=f;0<o;)u=31-Rn(o),g=1<<u,f|=i[u],o&=~g;return f}function V1(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function H1(i,o){for(var u=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes;0<y;){var w=31-Rn(y),P=1<<w,R=g[w];R===-1?((P&u)===0||(P&f)!==0)&&(g[w]=V1(P,o)):R<=o&&(i.expiredLanes|=P),y&=~P}}function Hu(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Kd(){var i=yl;return yl<<=1,(yl&4194240)===0&&(yl=64),i}function Wu(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Bs(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Rn(o),i[o]=u}function W1(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<u;){var g=31-Rn(u),y=1<<g;o[g]=0,f[g]=-1,i[g]=-1,u&=~y}}function Qu(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var f=31-Rn(u),g=1<<f;g&o|i[f]&o&&(i[f]|=o),u&=~g}}var Be=0;function qd(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Yd,$u,Gd,Jd,Zd,Uu=!1,wl=[],Mr=null,Rr=null,Ar=null,zs=new Map,Fs=new Map,Dr=[],Q1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ep(i,o){switch(i){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Ar=null;break;case"pointerover":case"pointerout":zs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Fs.delete(o.pointerId)}}function _s(i,o,u,f,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},o!==null&&(o=eo(o),o!==null&&$u(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function $1(i,o,u,f,g){switch(o){case"focusin":return Mr=_s(Mr,i,o,u,f,g),!0;case"dragenter":return Rr=_s(Rr,i,o,u,f,g),!0;case"mouseover":return Ar=_s(Ar,i,o,u,f,g),!0;case"pointerover":var y=g.pointerId;return zs.set(y,_s(zs.get(y)||null,i,o,u,f,g)),!0;case"gotpointercapture":return y=g.pointerId,Fs.set(y,_s(Fs.get(y)||null,i,o,u,f,g)),!0}return!1}function tp(i){var o=fi(i.target);if(o!==null){var u=hi(o);if(u!==null){if(o=u.tag,o===13){if(o=_d(u),o!==null){i.blockedOn=o,Zd(i.priority,function(){Gd(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function kl(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Ku(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);Bi=f,u.target.dispatchEvent(f),Bi=null}else return o=eo(u),o!==null&&$u(o),i.blockedOn=u,!1;o.shift()}return!0}function np(i,o,u){kl(i)&&u.delete(o)}function U1(){Uu=!1,Mr!==null&&kl(Mr)&&(Mr=null),Rr!==null&&kl(Rr)&&(Rr=null),Ar!==null&&kl(Ar)&&(Ar=null),zs.forEach(np),Fs.forEach(np)}function Vs(i,o){i.blockedOn===o&&(i.blockedOn=null,Uu||(Uu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,U1)))}function Hs(i){function o(g){return Vs(g,i)}if(0<wl.length){Vs(wl[0],i);for(var u=1;u<wl.length;u++){var f=wl[u];f.blockedOn===i&&(f.blockedOn=null)}}for(Mr!==null&&Vs(Mr,i),Rr!==null&&Vs(Rr,i),Ar!==null&&Vs(Ar,i),zs.forEach(o),Fs.forEach(o),u=0;u<Dr.length;u++)f=Dr[u],f.blockedOn===i&&(f.blockedOn=null);for(;0<Dr.length&&(u=Dr[0],u.blockedOn===null);)tp(u),u.blockedOn===null&&Dr.shift()}var zi=_.ReactCurrentBatchConfig,bl=!0;function X1(i,o,u,f){var g=Be,y=zi.transition;zi.transition=null;try{Be=1,Xu(i,o,u,f)}finally{Be=g,zi.transition=y}}function K1(i,o,u,f){var g=Be,y=zi.transition;zi.transition=null;try{Be=4,Xu(i,o,u,f)}finally{Be=g,zi.transition=y}}function Xu(i,o,u,f){if(bl){var g=Ku(i,o,u,f);if(g===null)hc(i,o,f,Sl,u),ep(i,f);else if($1(g,i,o,u,f))f.stopPropagation();else if(ep(i,f),o&4&&-1<Q1.indexOf(i)){for(;g!==null;){var y=eo(g);if(y!==null&&Yd(y),y=Ku(i,o,u,f),y===null&&hc(i,o,f,Sl,u),y===g)break;g=y}g!==null&&f.stopPropagation()}else hc(i,o,f,null,u)}}var Sl=null;function Ku(i,o,u,f){if(Sl=null,i=Ts(f),i=fi(i),i!==null)if(o=hi(i),o===null)i=null;else if(u=o.tag,u===13){if(i=_d(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Sl=i,null}function rp(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(I1()){case Vu:return 1;case Ud:return 4;case gl:case j1:return 16;case Xd:return 536870912;default:return 16}default:return 16}}var Nr=null,qu=null,Ol=null;function ip(){if(Ol)return Ol;var i,o=qu,u=o.length,f,g="value"in Nr?Nr.value:Nr.textContent,y=g.length;for(i=0;i<u&&o[i]===g[i];i++);var w=u-i;for(f=1;f<=w&&o[u-f]===g[y-f];f++);return Ol=g.slice(i,1<f?1-f:void 0)}function Cl(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Pl(){return!0}function sp(){return!1}function rn(i){function o(u,f,g,y,w){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(u=i[P],this[P]=u?u(y):y[P]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Pl:sp,this.isPropagationStopped=sp,this}return Z(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),o}var Fi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yu=rn(Fi),Ws=Z({},Fi,{view:0,detail:0}),q1=rn(Ws),Gu,Ju,Qs,El=Z({},Ws,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ec,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Qs&&(Qs&&i.type==="mousemove"?(Gu=i.screenX-Qs.screenX,Ju=i.screenY-Qs.screenY):Ju=Gu=0,Qs=i),Gu)},movementY:function(i){return"movementY"in i?i.movementY:Ju}}),op=rn(El),Y1=Z({},El,{dataTransfer:0}),G1=rn(Y1),J1=Z({},Ws,{relatedTarget:0}),Zu=rn(J1),Z1=Z({},Fi,{animationName:0,elapsedTime:0,pseudoElement:0}),ew=rn(Z1),tw=Z({},Fi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),nw=rn(tw),rw=Z({},Fi,{data:0}),lp=rn(rw),iw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},sw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},ow={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lw(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=ow[i])?!!o[i]:!1}function ec(){return lw}var aw=Z({},Ws,{key:function(i){if(i.key){var o=iw[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Cl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?sw[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ec,charCode:function(i){return i.type==="keypress"?Cl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Cl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),uw=rn(aw),cw=Z({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ap=rn(cw),hw=Z({},Ws,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ec}),fw=rn(hw),dw=Z({},Fi,{propertyName:0,elapsedTime:0,pseudoElement:0}),pw=rn(dw),gw=Z({},El,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),mw=rn(gw),yw=[9,13,27,32],tc=c&&"CompositionEvent"in window,$s=null;c&&"documentMode"in document&&($s=document.documentMode);var vw=c&&"TextEvent"in window&&!$s,up=c&&(!tc||$s&&8<$s&&11>=$s),cp=" ",hp=!1;function fp(i,o){switch(i){case"keyup":return yw.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dp(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var _i=!1;function xw(i,o){switch(i){case"compositionend":return dp(o);case"keypress":return o.which!==32?null:(hp=!0,cp);case"textInput":return i=o.data,i===cp&&hp?null:i;default:return null}}function ww(i,o){if(_i)return i==="compositionend"||!tc&&fp(i,o)?(i=ip(),Ol=qu=Nr=null,_i=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return up&&o.locale!=="ko"?null:o.data;default:return null}}var kw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!kw[i.type]:o==="textarea"}function gp(i,o,u,f){Pt(f),o=Nl(o,"onChange"),0<o.length&&(u=new Yu("onChange","change",null,u,f),i.push({event:u,listeners:o}))}var Us=null,Xs=null;function bw(i){Tp(i,0)}function Ml(i){var o=$i(i);if(We(o))return i}function Sw(i,o){if(i==="change")return o}var mp=!1;if(c){var nc;if(c){var rc="oninput"in document;if(!rc){var yp=document.createElement("div");yp.setAttribute("oninput","return;"),rc=typeof yp.oninput=="function"}nc=rc}else nc=!1;mp=nc&&(!document.documentMode||9<document.documentMode)}function vp(){Us&&(Us.detachEvent("onpropertychange",xp),Xs=Us=null)}function xp(i){if(i.propertyName==="value"&&Ml(Xs)){var o=[];gp(o,Xs,i,Ts(i)),lr(bw,o)}}function Ow(i,o,u){i==="focusin"?(vp(),Us=o,Xs=u,Us.attachEvent("onpropertychange",xp)):i==="focusout"&&vp()}function Cw(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ml(Xs)}function Pw(i,o){if(i==="click")return Ml(o)}function Ew(i,o){if(i==="input"||i==="change")return Ml(o)}function Mw(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var An=typeof Object.is=="function"?Object.is:Mw;function Ks(i,o){if(An(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!h.call(o,g)||!An(i[g],o[g]))return!1}return!0}function wp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function kp(i,o){var u=wp(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=o&&f>=o)return{node:u,offset:o-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=wp(u)}}function bp(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?bp(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Sp(){for(var i=window,o=ot();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=ot(i.document)}return o}function ic(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Rw(i){var o=Sp(),u=i.focusedElem,f=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&bp(u.ownerDocument.documentElement,u)){if(f!==null&&ic(u)){if(o=f.start,i=f.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=u.textContent.length,y=Math.min(f.start,g);f=f.end===void 0?y:Math.min(f.end,g),!i.extend&&y>f&&(g=f,f=y,y=g),g=kp(u,y);var w=kp(u,f);g&&w&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==w.node||i.focusOffset!==w.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),y>f?(i.addRange(o),i.extend(w.node,w.offset)):(o.setEnd(w.node,w.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Aw=c&&"documentMode"in document&&11>=document.documentMode,Vi=null,sc=null,qs=null,oc=!1;function Op(i,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;oc||Vi==null||Vi!==ot(f)||(f=Vi,"selectionStart"in f&&ic(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),qs&&Ks(qs,f)||(qs=f,f=Nl(sc,"onSelect"),0<f.length&&(o=new Yu("onSelect","select",null,o,u),i.push({event:o,listeners:f}),o.target=Vi)))}function Rl(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Hi={animationend:Rl("Animation","AnimationEnd"),animationiteration:Rl("Animation","AnimationIteration"),animationstart:Rl("Animation","AnimationStart"),transitionend:Rl("Transition","TransitionEnd")},lc={},Cp={};c&&(Cp=document.createElement("div").style,"AnimationEvent"in window||(delete Hi.animationend.animation,delete Hi.animationiteration.animation,delete Hi.animationstart.animation),"TransitionEvent"in window||delete Hi.transitionend.transition);function Al(i){if(lc[i])return lc[i];if(!Hi[i])return i;var o=Hi[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Cp)return lc[i]=o[u];return i}var Pp=Al("animationend"),Ep=Al("animationiteration"),Mp=Al("animationstart"),Rp=Al("transitionend"),Ap=new Map,Dp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Tr(i,o){Ap.set(i,o),l(o,[i])}for(var ac=0;ac<Dp.length;ac++){var uc=Dp[ac],Dw=uc.toLowerCase(),Nw=uc[0].toUpperCase()+uc.slice(1);Tr(Dw,"on"+Nw)}Tr(Pp,"onAnimationEnd"),Tr(Ep,"onAnimationIteration"),Tr(Mp,"onAnimationStart"),Tr("dblclick","onDoubleClick"),Tr("focusin","onFocus"),Tr("focusout","onBlur"),Tr(Rp,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ys="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Tw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ys));function Np(i,o,u){var f=i.type||"unknown-event";i.currentTarget=u,D1(f,o,void 0,i),i.currentTarget=null}function Tp(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],g=f.event;f=f.listeners;e:{var y=void 0;if(o)for(var w=f.length-1;0<=w;w--){var P=f[w],R=P.instance,z=P.currentTarget;if(P=P.listener,R!==y&&g.isPropagationStopped())break e;Np(g,P,z),y=R}else for(w=0;w<f.length;w++){if(P=f[w],R=P.instance,z=P.currentTarget,P=P.listener,R!==y&&g.isPropagationStopped())break e;Np(g,P,z),y=R}}}if(nn)throw i=ar,nn=!1,ar=null,i}function Qe(i,o){var u=o[yc];u===void 0&&(u=o[yc]=new Set);var f=i+"__bubble";u.has(f)||(Lp(o,i,2,!1),u.add(f))}function cc(i,o,u){var f=0;o&&(f|=4),Lp(u,i,f,o)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function Gs(i){if(!i[Dl]){i[Dl]=!0,r.forEach(function(u){u!=="selectionchange"&&(Tw.has(u)||cc(u,!1,i),cc(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Dl]||(o[Dl]=!0,cc("selectionchange",!1,o))}}function Lp(i,o,u,f){switch(rp(o)){case 1:var g=X1;break;case 4:g=K1;break;default:g=Xu}u=g.bind(null,o,u,i),g=void 0,!fn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(o,u,{capture:!0,passive:g}):i.addEventListener(o,u,!0):g!==void 0?i.addEventListener(o,u,{passive:g}):i.addEventListener(o,u,!1)}function hc(i,o,u,f,g){var y=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var P=f.stateNode.containerInfo;if(P===g||P.nodeType===8&&P.parentNode===g)break;if(w===4)for(w=f.return;w!==null;){var R=w.tag;if((R===3||R===4)&&(R=w.stateNode.containerInfo,R===g||R.nodeType===8&&R.parentNode===g))return;w=w.return}for(;P!==null;){if(w=fi(P),w===null)return;if(R=w.tag,R===5||R===6){f=y=w;continue e}P=P.parentNode}}f=f.return}lr(function(){var z=y,K=Ts(u),Y=[];e:{var $=Ap.get(i);if($!==void 0){var ue=Yu,ge=i;switch(i){case"keypress":if(Cl(u)===0)break e;case"keydown":case"keyup":ue=uw;break;case"focusin":ge="focus",ue=Zu;break;case"focusout":ge="blur",ue=Zu;break;case"beforeblur":case"afterblur":ue=Zu;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=op;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=G1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=fw;break;case Pp:case Ep:case Mp:ue=ew;break;case Rp:ue=pw;break;case"scroll":ue=q1;break;case"wheel":ue=mw;break;case"copy":case"cut":case"paste":ue=nw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=ap}var me=(o&4)!==0,rt=!me&&i==="scroll",T=me?$!==null?$+"Capture":null:$;me=[];for(var D=z,j;D!==null;){j=D;var te=j.stateNode;if(j.tag===5&&te!==null&&(j=te,T!==null&&(te=qe(D,T),te!=null&&me.push(Js(D,te,j)))),rt)break;D=D.return}0<me.length&&($=new ue($,ge,null,u,K),Y.push({event:$,listeners:me}))}}if((o&7)===0){e:{if($=i==="mouseover"||i==="pointerover",ue=i==="mouseout"||i==="pointerout",$&&u!==Bi&&(ge=u.relatedTarget||u.fromElement)&&(fi(ge)||ge[ur]))break e;if((ue||$)&&($=K.window===K?K:($=K.ownerDocument)?$.defaultView||$.parentWindow:window,ue?(ge=u.relatedTarget||u.toElement,ue=z,ge=ge?fi(ge):null,ge!==null&&(rt=hi(ge),ge!==rt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(ue=null,ge=z),ue!==ge)){if(me=op,te="onMouseLeave",T="onMouseEnter",D="mouse",(i==="pointerout"||i==="pointerover")&&(me=ap,te="onPointerLeave",T="onPointerEnter",D="pointer"),rt=ue==null?$:$i(ue),j=ge==null?$:$i(ge),$=new me(te,D+"leave",ue,u,K),$.target=rt,$.relatedTarget=j,te=null,fi(K)===z&&(me=new me(T,D+"enter",ge,u,K),me.target=j,me.relatedTarget=rt,te=me),rt=te,ue&&ge)t:{for(me=ue,T=ge,D=0,j=me;j;j=Wi(j))D++;for(j=0,te=T;te;te=Wi(te))j++;for(;0<D-j;)me=Wi(me),D--;for(;0<j-D;)T=Wi(T),j--;for(;D--;){if(me===T||T!==null&&me===T.alternate)break t;me=Wi(me),T=Wi(T)}me=null}else me=null;ue!==null&&Ip(Y,$,ue,me,!1),ge!==null&&rt!==null&&Ip(Y,rt,ge,me,!0)}}e:{if($=z?$i(z):window,ue=$.nodeName&&$.nodeName.toLowerCase(),ue==="select"||ue==="input"&&$.type==="file")var xe=Sw;else if(pp($))if(mp)xe=Ew;else{xe=Cw;var ke=Ow}else(ue=$.nodeName)&&ue.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(xe=Pw);if(xe&&(xe=xe(i,z))){gp(Y,xe,u,K);break e}ke&&ke(i,$,z),i==="focusout"&&(ke=$._wrapperState)&&ke.controlled&&$.type==="number"&&tn($,"number",$.value)}switch(ke=z?$i(z):window,i){case"focusin":(pp(ke)||ke.contentEditable==="true")&&(Vi=ke,sc=z,qs=null);break;case"focusout":qs=sc=Vi=null;break;case"mousedown":oc=!0;break;case"contextmenu":case"mouseup":case"dragend":oc=!1,Op(Y,u,K);break;case"selectionchange":if(Aw)break;case"keydown":case"keyup":Op(Y,u,K)}var be;if(tc)e:{switch(i){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else _i?fp(i,u)&&(Oe="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Oe="onCompositionStart");Oe&&(up&&u.locale!=="ko"&&(_i||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&_i&&(be=ip()):(Nr=K,qu="value"in Nr?Nr.value:Nr.textContent,_i=!0)),ke=Nl(z,Oe),0<ke.length&&(Oe=new lp(Oe,i,null,u,K),Y.push({event:Oe,listeners:ke}),be?Oe.data=be:(be=dp(u),be!==null&&(Oe.data=be)))),(be=vw?xw(i,u):ww(i,u))&&(z=Nl(z,"onBeforeInput"),0<z.length&&(K=new lp("onBeforeInput","beforeinput",null,u,K),Y.push({event:K,listeners:z}),K.data=be))}Tp(Y,o)})}function Js(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Nl(i,o){for(var u=o+"Capture",f=[];i!==null;){var g=i,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=qe(i,u),y!=null&&f.unshift(Js(i,y,g)),y=qe(i,o),y!=null&&f.push(Js(i,y,g))),i=i.return}return f}function Wi(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Ip(i,o,u,f,g){for(var y=o._reactName,w=[];u!==null&&u!==f;){var P=u,R=P.alternate,z=P.stateNode;if(R!==null&&R===f)break;P.tag===5&&z!==null&&(P=z,g?(R=qe(u,y),R!=null&&w.unshift(Js(u,R,P))):g||(R=qe(u,y),R!=null&&w.push(Js(u,R,P)))),u=u.return}w.length!==0&&i.push({event:o,listeners:w})}var Lw=/\r\n?/g,Iw=/\u0000|\uFFFD/g;function jp(i){return(typeof i=="string"?i:""+i).replace(Lw,`
`).replace(Iw,"")}function Tl(i,o,u){if(o=jp(o),jp(i)!==o&&u)throw Error(t(425))}function Ll(){}var fc=null,dc=null;function pc(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var gc=typeof setTimeout=="function"?setTimeout:void 0,jw=typeof clearTimeout=="function"?clearTimeout:void 0,Bp=typeof Promise=="function"?Promise:void 0,Bw=typeof queueMicrotask=="function"?queueMicrotask:typeof Bp<"u"?function(i){return Bp.resolve(null).then(i).catch(zw)}:gc;function zw(i){setTimeout(function(){throw i})}function mc(i,o){var u=o,f=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){i.removeChild(g),Hs(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);Hs(o)}function Lr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function zp(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var Qi=Math.random().toString(36).slice(2),Un="__reactFiber$"+Qi,Zs="__reactProps$"+Qi,ur="__reactContainer$"+Qi,yc="__reactEvents$"+Qi,Fw="__reactListeners$"+Qi,_w="__reactHandles$"+Qi;function fi(i){var o=i[Un];if(o)return o;for(var u=i.parentNode;u;){if(o=u[ur]||u[Un]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=zp(i);i!==null;){if(u=i[Un])return u;i=zp(i)}return o}i=u,u=i.parentNode}return null}function eo(i){return i=i[Un]||i[ur],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function $i(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Il(i){return i[Zs]||null}var vc=[],Ui=-1;function Ir(i){return{current:i}}function $e(i){0>Ui||(i.current=vc[Ui],vc[Ui]=null,Ui--)}function He(i,o){Ui++,vc[Ui]=i.current,i.current=o}var jr={},Rt=Ir(jr),Xt=Ir(!1),di=jr;function Xi(i,o){var u=i.type.contextTypes;if(!u)return jr;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in u)g[y]=o[y];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function Kt(i){return i=i.childContextTypes,i!=null}function jl(){$e(Xt),$e(Rt)}function Fp(i,o,u){if(Rt.current!==jr)throw Error(t(168));He(Rt,o),He(Xt,u)}function _p(i,o,u){var f=i.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(t(108,he(i)||"Unknown",g));return Z({},u,f)}function Bl(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||jr,di=Rt.current,He(Rt,i),He(Xt,Xt.current),!0}function Vp(i,o,u){var f=i.stateNode;if(!f)throw Error(t(169));u?(i=_p(i,o,di),f.__reactInternalMemoizedMergedChildContext=i,$e(Xt),$e(Rt),He(Rt,i)):$e(Xt),He(Xt,u)}var cr=null,zl=!1,xc=!1;function Hp(i){cr===null?cr=[i]:cr.push(i)}function Vw(i){zl=!0,Hp(i)}function Br(){if(!xc&&cr!==null){xc=!0;var i=0,o=Be;try{var u=cr;for(Be=1;i<u.length;i++){var f=u[i];do f=f(!0);while(f!==null)}cr=null,zl=!1}catch(g){throw cr!==null&&(cr=cr.slice(i+1)),Qd(Vu,Br),g}finally{Be=o,xc=!1}}return null}var Ki=[],qi=0,Fl=null,_l=0,dn=[],pn=0,pi=null,hr=1,fr="";function gi(i,o){Ki[qi++]=_l,Ki[qi++]=Fl,Fl=i,_l=o}function Wp(i,o,u){dn[pn++]=hr,dn[pn++]=fr,dn[pn++]=pi,pi=i;var f=hr;i=fr;var g=32-Rn(f)-1;f&=~(1<<g),u+=1;var y=32-Rn(o)+g;if(30<y){var w=g-g%5;y=(f&(1<<w)-1).toString(32),f>>=w,g-=w,hr=1<<32-Rn(o)+g|u<<g|f,fr=y+i}else hr=1<<y|u<<g|f,fr=i}function wc(i){i.return!==null&&(gi(i,1),Wp(i,1,0))}function kc(i){for(;i===Fl;)Fl=Ki[--qi],Ki[qi]=null,_l=Ki[--qi],Ki[qi]=null;for(;i===pi;)pi=dn[--pn],dn[pn]=null,fr=dn[--pn],dn[pn]=null,hr=dn[--pn],dn[pn]=null}var sn=null,on=null,Xe=!1,Dn=null;function Qp(i,o){var u=vn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function $p(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,sn=i,on=Lr(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,sn=i,on=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=pi!==null?{id:hr,overflow:fr}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=vn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,sn=i,on=null,!0):!1;default:return!1}}function bc(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Sc(i){if(Xe){var o=on;if(o){var u=o;if(!$p(i,o)){if(bc(i))throw Error(t(418));o=Lr(u.nextSibling);var f=sn;o&&$p(i,o)?Qp(f,u):(i.flags=i.flags&-4097|2,Xe=!1,sn=i)}}else{if(bc(i))throw Error(t(418));i.flags=i.flags&-4097|2,Xe=!1,sn=i}}}function Up(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;sn=i}function Vl(i){if(i!==sn)return!1;if(!Xe)return Up(i),Xe=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!pc(i.type,i.memoizedProps)),o&&(o=on)){if(bc(i))throw Xp(),Error(t(418));for(;o;)Qp(i,o),o=Lr(o.nextSibling)}if(Up(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){on=Lr(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}on=null}}else on=sn?Lr(i.stateNode.nextSibling):null;return!0}function Xp(){for(var i=on;i;)i=Lr(i.nextSibling)}function Yi(){on=sn=null,Xe=!1}function Oc(i){Dn===null?Dn=[i]:Dn.push(i)}var Hw=_.ReactCurrentBatchConfig;function to(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,i));var g=f,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(w){var P=g.refs;w===null?delete P[y]:P[y]=w},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Hl(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Kp(i){var o=i._init;return o(i._payload)}function qp(i){function o(T,D){if(i){var j=T.deletions;j===null?(T.deletions=[D],T.flags|=16):j.push(D)}}function u(T,D){if(!i)return null;for(;D!==null;)o(T,D),D=D.sibling;return null}function f(T,D){for(T=new Map;D!==null;)D.key!==null?T.set(D.key,D):T.set(D.index,D),D=D.sibling;return T}function g(T,D){return T=$r(T,D),T.index=0,T.sibling=null,T}function y(T,D,j){return T.index=j,i?(j=T.alternate,j!==null?(j=j.index,j<D?(T.flags|=2,D):j):(T.flags|=2,D)):(T.flags|=1048576,D)}function w(T){return i&&T.alternate===null&&(T.flags|=2),T}function P(T,D,j,te){return D===null||D.tag!==6?(D=gh(j,T.mode,te),D.return=T,D):(D=g(D,j),D.return=T,D)}function R(T,D,j,te){var xe=j.type;return xe===B?K(T,D,j.props.children,te,j.key):D!==null&&(D.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===ae&&Kp(xe)===D.type)?(te=g(D,j.props),te.ref=to(T,D,j),te.return=T,te):(te=fa(j.type,j.key,j.props,null,T.mode,te),te.ref=to(T,D,j),te.return=T,te)}function z(T,D,j,te){return D===null||D.tag!==4||D.stateNode.containerInfo!==j.containerInfo||D.stateNode.implementation!==j.implementation?(D=mh(j,T.mode,te),D.return=T,D):(D=g(D,j.children||[]),D.return=T,D)}function K(T,D,j,te,xe){return D===null||D.tag!==7?(D=Si(j,T.mode,te,xe),D.return=T,D):(D=g(D,j),D.return=T,D)}function Y(T,D,j){if(typeof D=="string"&&D!==""||typeof D=="number")return D=gh(""+D,T.mode,j),D.return=T,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case I:return j=fa(D.type,D.key,D.props,null,T.mode,j),j.ref=to(T,null,D),j.return=T,j;case F:return D=mh(D,T.mode,j),D.return=T,D;case ae:var te=D._init;return Y(T,te(D._payload),j)}if(ze(D)||ee(D))return D=Si(D,T.mode,j,null),D.return=T,D;Hl(T,D)}return null}function $(T,D,j,te){var xe=D!==null?D.key:null;if(typeof j=="string"&&j!==""||typeof j=="number")return xe!==null?null:P(T,D,""+j,te);if(typeof j=="object"&&j!==null){switch(j.$$typeof){case I:return j.key===xe?R(T,D,j,te):null;case F:return j.key===xe?z(T,D,j,te):null;case ae:return xe=j._init,$(T,D,xe(j._payload),te)}if(ze(j)||ee(j))return xe!==null?null:K(T,D,j,te,null);Hl(T,j)}return null}function ue(T,D,j,te,xe){if(typeof te=="string"&&te!==""||typeof te=="number")return T=T.get(j)||null,P(D,T,""+te,xe);if(typeof te=="object"&&te!==null){switch(te.$$typeof){case I:return T=T.get(te.key===null?j:te.key)||null,R(D,T,te,xe);case F:return T=T.get(te.key===null?j:te.key)||null,z(D,T,te,xe);case ae:var ke=te._init;return ue(T,D,j,ke(te._payload),xe)}if(ze(te)||ee(te))return T=T.get(j)||null,K(D,T,te,xe,null);Hl(D,te)}return null}function ge(T,D,j,te){for(var xe=null,ke=null,be=D,Oe=D=0,yt=null;be!==null&&Oe<j.length;Oe++){be.index>Oe?(yt=be,be=null):yt=be.sibling;var Te=$(T,be,j[Oe],te);if(Te===null){be===null&&(be=yt);break}i&&be&&Te.alternate===null&&o(T,be),D=y(Te,D,Oe),ke===null?xe=Te:ke.sibling=Te,ke=Te,be=yt}if(Oe===j.length)return u(T,be),Xe&&gi(T,Oe),xe;if(be===null){for(;Oe<j.length;Oe++)be=Y(T,j[Oe],te),be!==null&&(D=y(be,D,Oe),ke===null?xe=be:ke.sibling=be,ke=be);return Xe&&gi(T,Oe),xe}for(be=f(T,be);Oe<j.length;Oe++)yt=ue(be,T,Oe,j[Oe],te),yt!==null&&(i&&yt.alternate!==null&&be.delete(yt.key===null?Oe:yt.key),D=y(yt,D,Oe),ke===null?xe=yt:ke.sibling=yt,ke=yt);return i&&be.forEach(function(Ur){return o(T,Ur)}),Xe&&gi(T,Oe),xe}function me(T,D,j,te){var xe=ee(j);if(typeof xe!="function")throw Error(t(150));if(j=xe.call(j),j==null)throw Error(t(151));for(var ke=xe=null,be=D,Oe=D=0,yt=null,Te=j.next();be!==null&&!Te.done;Oe++,Te=j.next()){be.index>Oe?(yt=be,be=null):yt=be.sibling;var Ur=$(T,be,Te.value,te);if(Ur===null){be===null&&(be=yt);break}i&&be&&Ur.alternate===null&&o(T,be),D=y(Ur,D,Oe),ke===null?xe=Ur:ke.sibling=Ur,ke=Ur,be=yt}if(Te.done)return u(T,be),Xe&&gi(T,Oe),xe;if(be===null){for(;!Te.done;Oe++,Te=j.next())Te=Y(T,Te.value,te),Te!==null&&(D=y(Te,D,Oe),ke===null?xe=Te:ke.sibling=Te,ke=Te);return Xe&&gi(T,Oe),xe}for(be=f(T,be);!Te.done;Oe++,Te=j.next())Te=ue(be,T,Oe,Te.value,te),Te!==null&&(i&&Te.alternate!==null&&be.delete(Te.key===null?Oe:Te.key),D=y(Te,D,Oe),ke===null?xe=Te:ke.sibling=Te,ke=Te);return i&&be.forEach(function(kk){return o(T,kk)}),Xe&&gi(T,Oe),xe}function rt(T,D,j,te){if(typeof j=="object"&&j!==null&&j.type===B&&j.key===null&&(j=j.props.children),typeof j=="object"&&j!==null){switch(j.$$typeof){case I:e:{for(var xe=j.key,ke=D;ke!==null;){if(ke.key===xe){if(xe=j.type,xe===B){if(ke.tag===7){u(T,ke.sibling),D=g(ke,j.props.children),D.return=T,T=D;break e}}else if(ke.elementType===xe||typeof xe=="object"&&xe!==null&&xe.$$typeof===ae&&Kp(xe)===ke.type){u(T,ke.sibling),D=g(ke,j.props),D.ref=to(T,ke,j),D.return=T,T=D;break e}u(T,ke);break}else o(T,ke);ke=ke.sibling}j.type===B?(D=Si(j.props.children,T.mode,te,j.key),D.return=T,T=D):(te=fa(j.type,j.key,j.props,null,T.mode,te),te.ref=to(T,D,j),te.return=T,T=te)}return w(T);case F:e:{for(ke=j.key;D!==null;){if(D.key===ke)if(D.tag===4&&D.stateNode.containerInfo===j.containerInfo&&D.stateNode.implementation===j.implementation){u(T,D.sibling),D=g(D,j.children||[]),D.return=T,T=D;break e}else{u(T,D);break}else o(T,D);D=D.sibling}D=mh(j,T.mode,te),D.return=T,T=D}return w(T);case ae:return ke=j._init,rt(T,D,ke(j._payload),te)}if(ze(j))return ge(T,D,j,te);if(ee(j))return me(T,D,j,te);Hl(T,j)}return typeof j=="string"&&j!==""||typeof j=="number"?(j=""+j,D!==null&&D.tag===6?(u(T,D.sibling),D=g(D,j),D.return=T,T=D):(u(T,D),D=gh(j,T.mode,te),D.return=T,T=D),w(T)):u(T,D)}return rt}var Gi=qp(!0),Yp=qp(!1),Wl=Ir(null),Ql=null,Ji=null,Cc=null;function Pc(){Cc=Ji=Ql=null}function Ec(i){var o=Wl.current;$e(Wl),i._currentValue=o}function Mc(i,o,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===u)break;i=i.return}}function Zi(i,o){Ql=i,Cc=Ji=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(qt=!0),i.firstContext=null)}function gn(i){var o=i._currentValue;if(Cc!==i)if(i={context:i,memoizedValue:o,next:null},Ji===null){if(Ql===null)throw Error(t(308));Ji=i,Ql.dependencies={lanes:0,firstContext:i}}else Ji=Ji.next=i;return o}var mi=null;function Rc(i){mi===null?mi=[i]:mi.push(i)}function Gp(i,o,u,f){var g=o.interleaved;return g===null?(u.next=u,Rc(o)):(u.next=g.next,g.next=u),o.interleaved=u,dr(i,f)}function dr(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var zr=!1;function Ac(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jp(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function pr(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Fr(i,o,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(De&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,dr(i,u)}return g=f.interleaved,g===null?(o.next=o,Rc(f)):(o.next=g.next,g.next=o),f.interleaved=o,dr(i,u)}function $l(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,Qu(i,u)}}function Zp(i,o){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var w={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?g=y=w:y=y.next=w,u=u.next}while(u!==null);y===null?g=y=o:y=y.next=o}else g=y=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,effects:f.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function Ul(i,o,u,f){var g=i.updateQueue;zr=!1;var y=g.firstBaseUpdate,w=g.lastBaseUpdate,P=g.shared.pending;if(P!==null){g.shared.pending=null;var R=P,z=R.next;R.next=null,w===null?y=z:w.next=z,w=R;var K=i.alternate;K!==null&&(K=K.updateQueue,P=K.lastBaseUpdate,P!==w&&(P===null?K.firstBaseUpdate=z:P.next=z,K.lastBaseUpdate=R))}if(y!==null){var Y=g.baseState;w=0,K=z=R=null,P=y;do{var $=P.lane,ue=P.eventTime;if((f&$)===$){K!==null&&(K=K.next={eventTime:ue,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var ge=i,me=P;switch($=o,ue=u,me.tag){case 1:if(ge=me.payload,typeof ge=="function"){Y=ge.call(ue,Y,$);break e}Y=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=me.payload,$=typeof ge=="function"?ge.call(ue,Y,$):ge,$==null)break e;Y=Z({},Y,$);break e;case 2:zr=!0}}P.callback!==null&&P.lane!==0&&(i.flags|=64,$=g.effects,$===null?g.effects=[P]:$.push(P))}else ue={eventTime:ue,lane:$,tag:P.tag,payload:P.payload,callback:P.callback,next:null},K===null?(z=K=ue,R=Y):K=K.next=ue,w|=$;if(P=P.next,P===null){if(P=g.shared.pending,P===null)break;$=P,P=$.next,$.next=null,g.lastBaseUpdate=$,g.shared.pending=null}}while(!0);if(K===null&&(R=Y),g.baseState=R,g.firstBaseUpdate=z,g.lastBaseUpdate=K,o=g.shared.interleaved,o!==null){g=o;do w|=g.lane,g=g.next;while(g!==o)}else y===null&&(g.shared.lanes=0);xi|=w,i.lanes=w,i.memoizedState=Y}}function eg(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var f=i[o],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var no={},Xn=Ir(no),ro=Ir(no),io=Ir(no);function yi(i){if(i===no)throw Error(t(174));return i}function Dc(i,o){switch(He(io,o),He(ro,i),He(Xn,no),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:Wn(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=Wn(o,i)}$e(Xn),He(Xn,o)}function es(){$e(Xn),$e(ro),$e(io)}function tg(i){yi(io.current);var o=yi(Xn.current),u=Wn(o,i.type);o!==u&&(He(ro,i),He(Xn,u))}function Nc(i){ro.current===i&&($e(Xn),$e(ro))}var Ye=Ir(0);function Xl(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Tc=[];function Lc(){for(var i=0;i<Tc.length;i++)Tc[i]._workInProgressVersionPrimary=null;Tc.length=0}var Kl=_.ReactCurrentDispatcher,Ic=_.ReactCurrentBatchConfig,vi=0,Ge=null,ht=null,gt=null,ql=!1,so=!1,oo=0,Ww=0;function At(){throw Error(t(321))}function jc(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!An(i[u],o[u]))return!1;return!0}function Bc(i,o,u,f,g,y){if(vi=y,Ge=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Kl.current=i===null||i.memoizedState===null?Xw:Kw,i=u(f,g),so){y=0;do{if(so=!1,oo=0,25<=y)throw Error(t(301));y+=1,gt=ht=null,o.updateQueue=null,Kl.current=qw,i=u(f,g)}while(so)}if(Kl.current=Jl,o=ht!==null&&ht.next!==null,vi=0,gt=ht=Ge=null,ql=!1,o)throw Error(t(300));return i}function zc(){var i=oo!==0;return oo=0,i}function Kn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Ge.memoizedState=gt=i:gt=gt.next=i,gt}function mn(){if(ht===null){var i=Ge.alternate;i=i!==null?i.memoizedState:null}else i=ht.next;var o=gt===null?Ge.memoizedState:gt.next;if(o!==null)gt=o,ht=i;else{if(i===null)throw Error(t(310));ht=i,i={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},gt===null?Ge.memoizedState=gt=i:gt=gt.next=i}return gt}function lo(i,o){return typeof o=="function"?o(i):o}function Fc(i){var o=mn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=ht,g=f.baseQueue,y=u.pending;if(y!==null){if(g!==null){var w=g.next;g.next=y.next,y.next=w}f.baseQueue=g=y,u.pending=null}if(g!==null){y=g.next,f=f.baseState;var P=w=null,R=null,z=y;do{var K=z.lane;if((vi&K)===K)R!==null&&(R=R.next={lane:0,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null}),f=z.hasEagerState?z.eagerState:i(f,z.action);else{var Y={lane:K,action:z.action,hasEagerState:z.hasEagerState,eagerState:z.eagerState,next:null};R===null?(P=R=Y,w=f):R=R.next=Y,Ge.lanes|=K,xi|=K}z=z.next}while(z!==null&&z!==y);R===null?w=f:R.next=P,An(f,o.memoizedState)||(qt=!0),o.memoizedState=f,o.baseState=w,o.baseQueue=R,u.lastRenderedState=f}if(i=u.interleaved,i!==null){g=i;do y=g.lane,Ge.lanes|=y,xi|=y,g=g.next;while(g!==i)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function _c(i){var o=mn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=u.dispatch,g=u.pending,y=o.memoizedState;if(g!==null){u.pending=null;var w=g=g.next;do y=i(y,w.action),w=w.next;while(w!==g);An(y,o.memoizedState)||(qt=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,f]}function ng(){}function rg(i,o){var u=Ge,f=mn(),g=o(),y=!An(f.memoizedState,g);if(y&&(f.memoizedState=g,qt=!0),f=f.queue,Vc(og.bind(null,u,f,i),[i]),f.getSnapshot!==o||y||gt!==null&&gt.memoizedState.tag&1){if(u.flags|=2048,ao(9,sg.bind(null,u,f,g,o),void 0,null),mt===null)throw Error(t(349));(vi&30)!==0||ig(u,o,g)}return g}function ig(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Ge.updateQueue,o===null?(o={lastEffect:null,stores:null},Ge.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function sg(i,o,u,f){o.value=u,o.getSnapshot=f,lg(o)&&ag(i)}function og(i,o,u){return u(function(){lg(o)&&ag(i)})}function lg(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!An(i,u)}catch{return!0}}function ag(i){var o=dr(i,1);o!==null&&In(o,i,1,-1)}function ug(i){var o=Kn();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:lo,lastRenderedState:i},o.queue=i,i=i.dispatch=Uw.bind(null,Ge,i),[o.memoizedState,i]}function ao(i,o,u,f){return i={tag:i,create:o,destroy:u,deps:f,next:null},o=Ge.updateQueue,o===null?(o={lastEffect:null,stores:null},Ge.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,o.lastEffect=i)),i}function cg(){return mn().memoizedState}function Yl(i,o,u,f){var g=Kn();Ge.flags|=i,g.memoizedState=ao(1|o,u,void 0,f===void 0?null:f)}function Gl(i,o,u,f){var g=mn();f=f===void 0?null:f;var y=void 0;if(ht!==null){var w=ht.memoizedState;if(y=w.destroy,f!==null&&jc(f,w.deps)){g.memoizedState=ao(o,u,y,f);return}}Ge.flags|=i,g.memoizedState=ao(1|o,u,y,f)}function hg(i,o){return Yl(8390656,8,i,o)}function Vc(i,o){return Gl(2048,8,i,o)}function fg(i,o){return Gl(4,2,i,o)}function dg(i,o){return Gl(4,4,i,o)}function pg(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function gg(i,o,u){return u=u!=null?u.concat([i]):null,Gl(4,4,pg.bind(null,o,i),u)}function Hc(){}function mg(i,o){var u=mn();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&jc(o,f[1])?f[0]:(u.memoizedState=[i,o],i)}function yg(i,o){var u=mn();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&jc(o,f[1])?f[0]:(i=i(),u.memoizedState=[i,o],i)}function vg(i,o,u){return(vi&21)===0?(i.baseState&&(i.baseState=!1,qt=!0),i.memoizedState=u):(An(u,o)||(u=Kd(),Ge.lanes|=u,xi|=u,i.baseState=!0),o)}function Qw(i,o){var u=Be;Be=u!==0&&4>u?u:4,i(!0);var f=Ic.transition;Ic.transition={};try{i(!1),o()}finally{Be=u,Ic.transition=f}}function xg(){return mn().memoizedState}function $w(i,o,u){var f=Wr(i);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},wg(i))kg(o,u);else if(u=Gp(i,o,u,f),u!==null){var g=Ft();In(u,i,f,g),bg(u,o,f)}}function Uw(i,o,u){var f=Wr(i),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(wg(i))kg(o,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var w=o.lastRenderedState,P=y(w,u);if(g.hasEagerState=!0,g.eagerState=P,An(P,w)){var R=o.interleaved;R===null?(g.next=g,Rc(o)):(g.next=R.next,R.next=g),o.interleaved=g;return}}catch{}finally{}u=Gp(i,o,g,f),u!==null&&(g=Ft(),In(u,i,f,g),bg(u,o,f))}}function wg(i){var o=i.alternate;return i===Ge||o!==null&&o===Ge}function kg(i,o){so=ql=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function bg(i,o,u){if((u&4194240)!==0){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,Qu(i,u)}}var Jl={readContext:gn,useCallback:At,useContext:At,useEffect:At,useImperativeHandle:At,useInsertionEffect:At,useLayoutEffect:At,useMemo:At,useReducer:At,useRef:At,useState:At,useDebugValue:At,useDeferredValue:At,useTransition:At,useMutableSource:At,useSyncExternalStore:At,useId:At,unstable_isNewReconciler:!1},Xw={readContext:gn,useCallback:function(i,o){return Kn().memoizedState=[i,o===void 0?null:o],i},useContext:gn,useEffect:hg,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Yl(4194308,4,pg.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Yl(4194308,4,i,o)},useInsertionEffect:function(i,o){return Yl(4,2,i,o)},useMemo:function(i,o){var u=Kn();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var f=Kn();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},f.queue=i,i=i.dispatch=$w.bind(null,Ge,i),[f.memoizedState,i]},useRef:function(i){var o=Kn();return i={current:i},o.memoizedState=i},useState:ug,useDebugValue:Hc,useDeferredValue:function(i){return Kn().memoizedState=i},useTransition:function(){var i=ug(!1),o=i[0];return i=Qw.bind(null,i[1]),Kn().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var f=Ge,g=Kn();if(Xe){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),mt===null)throw Error(t(349));(vi&30)!==0||ig(f,o,u)}g.memoizedState=u;var y={value:u,getSnapshot:o};return g.queue=y,hg(og.bind(null,f,y,i),[i]),f.flags|=2048,ao(9,sg.bind(null,f,y,u,o),void 0,null),u},useId:function(){var i=Kn(),o=mt.identifierPrefix;if(Xe){var u=fr,f=hr;u=(f&~(1<<32-Rn(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=oo++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=Ww++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},Kw={readContext:gn,useCallback:mg,useContext:gn,useEffect:Vc,useImperativeHandle:gg,useInsertionEffect:fg,useLayoutEffect:dg,useMemo:yg,useReducer:Fc,useRef:cg,useState:function(){return Fc(lo)},useDebugValue:Hc,useDeferredValue:function(i){var o=mn();return vg(o,ht.memoizedState,i)},useTransition:function(){var i=Fc(lo)[0],o=mn().memoizedState;return[i,o]},useMutableSource:ng,useSyncExternalStore:rg,useId:xg,unstable_isNewReconciler:!1},qw={readContext:gn,useCallback:mg,useContext:gn,useEffect:Vc,useImperativeHandle:gg,useInsertionEffect:fg,useLayoutEffect:dg,useMemo:yg,useReducer:_c,useRef:cg,useState:function(){return _c(lo)},useDebugValue:Hc,useDeferredValue:function(i){var o=mn();return ht===null?o.memoizedState=i:vg(o,ht.memoizedState,i)},useTransition:function(){var i=_c(lo)[0],o=mn().memoizedState;return[i,o]},useMutableSource:ng,useSyncExternalStore:rg,useId:xg,unstable_isNewReconciler:!1};function Nn(i,o){if(i&&i.defaultProps){o=Z({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function Wc(i,o,u,f){o=i.memoizedState,u=u(f,o),u=u==null?o:Z({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Zl={isMounted:function(i){return(i=i._reactInternals)?hi(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var f=Ft(),g=Wr(i),y=pr(f,g);y.payload=o,u!=null&&(y.callback=u),o=Fr(i,y,g),o!==null&&(In(o,i,g,f),$l(o,i,g))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var f=Ft(),g=Wr(i),y=pr(f,g);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=Fr(i,y,g),o!==null&&(In(o,i,g,f),$l(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Ft(),f=Wr(i),g=pr(u,f);g.tag=2,o!=null&&(g.callback=o),o=Fr(i,g,f),o!==null&&(In(o,i,f,u),$l(o,i,f))}};function Sg(i,o,u,f,g,y,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,y,w):o.prototype&&o.prototype.isPureReactComponent?!Ks(u,f)||!Ks(g,y):!0}function Og(i,o,u){var f=!1,g=jr,y=o.contextType;return typeof y=="object"&&y!==null?y=gn(y):(g=Kt(o)?di:Rt.current,f=o.contextTypes,y=(f=f!=null)?Xi(i,g):jr),o=new o(u,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Zl,i.stateNode=o,o._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=y),o}function Cg(i,o,u,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==i&&Zl.enqueueReplaceState(o,o.state,null)}function Qc(i,o,u,f){var g=i.stateNode;g.props=u,g.state=i.memoizedState,g.refs={},Ac(i);var y=o.contextType;typeof y=="object"&&y!==null?g.context=gn(y):(y=Kt(o)?di:Rt.current,g.context=Xi(i,y)),g.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(Wc(i,o,y,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Zl.enqueueReplaceState(g,g.state,null),Ul(i,u,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function ts(i,o){try{var u="",f=o;do u+=ye(f),f=f.return;while(f);var g=u}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:g,digest:null}}function $c(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Uc(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var Yw=typeof WeakMap=="function"?WeakMap:Map;function Pg(i,o,u){u=pr(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){oa||(oa=!0,lh=f),Uc(i,o)},u}function Eg(i,o,u){u=pr(-1,u),u.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;u.payload=function(){return f(g)},u.callback=function(){Uc(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){Uc(i,o),typeof f!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})}),u}function Mg(i,o,u){var f=i.pingCache;if(f===null){f=i.pingCache=new Yw;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(g.add(u),i=ck.bind(null,i,o,u),o.then(i,i))}function Rg(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Ag(i,o,u,f,g){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=pr(-1,1),o.tag=2,Fr(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var Gw=_.ReactCurrentOwner,qt=!1;function zt(i,o,u,f){o.child=i===null?Yp(o,null,u,f):Gi(o,i.child,u,f)}function Dg(i,o,u,f,g){u=u.render;var y=o.ref;return Zi(o,g),f=Bc(i,o,u,f,y,g),u=zc(),i!==null&&!qt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,gr(i,o,g)):(Xe&&u&&wc(o),o.flags|=1,zt(i,o,f,g),o.child)}function Ng(i,o,u,f,g){if(i===null){var y=u.type;return typeof y=="function"&&!ph(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=y,Tg(i,o,y,f,g)):(i=fa(u.type,null,f,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&g)===0){var w=y.memoizedProps;if(u=u.compare,u=u!==null?u:Ks,u(w,f)&&i.ref===o.ref)return gr(i,o,g)}return o.flags|=1,i=$r(y,f),i.ref=o.ref,i.return=o,o.child=i}function Tg(i,o,u,f,g){if(i!==null){var y=i.memoizedProps;if(Ks(y,f)&&i.ref===o.ref)if(qt=!1,o.pendingProps=f=y,(i.lanes&g)!==0)(i.flags&131072)!==0&&(qt=!0);else return o.lanes=i.lanes,gr(i,o,g)}return Xc(i,o,u,f,g)}function Lg(i,o,u){var f=o.pendingProps,g=f.children,y=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(rs,ln),ln|=u;else{if((u&1073741824)===0)return i=y!==null?y.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,He(rs,ln),ln|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=y!==null?y.baseLanes:u,He(rs,ln),ln|=f}else y!==null?(f=y.baseLanes|u,o.memoizedState=null):f=u,He(rs,ln),ln|=f;return zt(i,o,g,u),o.child}function Ig(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Xc(i,o,u,f,g){var y=Kt(u)?di:Rt.current;return y=Xi(o,y),Zi(o,g),u=Bc(i,o,u,f,y,g),f=zc(),i!==null&&!qt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,gr(i,o,g)):(Xe&&f&&wc(o),o.flags|=1,zt(i,o,u,g),o.child)}function jg(i,o,u,f,g){if(Kt(u)){var y=!0;Bl(o)}else y=!1;if(Zi(o,g),o.stateNode===null)ta(i,o),Og(o,u,f),Qc(o,u,f,g),f=!0;else if(i===null){var w=o.stateNode,P=o.memoizedProps;w.props=P;var R=w.context,z=u.contextType;typeof z=="object"&&z!==null?z=gn(z):(z=Kt(u)?di:Rt.current,z=Xi(o,z));var K=u.getDerivedStateFromProps,Y=typeof K=="function"||typeof w.getSnapshotBeforeUpdate=="function";Y||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==f||R!==z)&&Cg(o,w,f,z),zr=!1;var $=o.memoizedState;w.state=$,Ul(o,f,w,g),R=o.memoizedState,P!==f||$!==R||Xt.current||zr?(typeof K=="function"&&(Wc(o,u,K,f),R=o.memoizedState),(P=zr||Sg(o,u,P,f,$,R,z))?(Y||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=R),w.props=f,w.state=R,w.context=z,f=P):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{w=o.stateNode,Jp(i,o),P=o.memoizedProps,z=o.type===o.elementType?P:Nn(o.type,P),w.props=z,Y=o.pendingProps,$=w.context,R=u.contextType,typeof R=="object"&&R!==null?R=gn(R):(R=Kt(u)?di:Rt.current,R=Xi(o,R));var ue=u.getDerivedStateFromProps;(K=typeof ue=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(P!==Y||$!==R)&&Cg(o,w,f,R),zr=!1,$=o.memoizedState,w.state=$,Ul(o,f,w,g);var ge=o.memoizedState;P!==Y||$!==ge||Xt.current||zr?(typeof ue=="function"&&(Wc(o,u,ue,f),ge=o.memoizedState),(z=zr||Sg(o,u,z,f,$,ge,R)||!1)?(K||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(f,ge,R),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(f,ge,R)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||P===i.memoizedProps&&$===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&$===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ge),w.props=f,w.state=ge,w.context=R,f=z):(typeof w.componentDidUpdate!="function"||P===i.memoizedProps&&$===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&$===i.memoizedState||(o.flags|=1024),f=!1)}return Kc(i,o,u,f,y,g)}function Kc(i,o,u,f,g,y){Ig(i,o);var w=(o.flags&128)!==0;if(!f&&!w)return g&&Vp(o,u,!1),gr(i,o,y);f=o.stateNode,Gw.current=o;var P=w&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,i!==null&&w?(o.child=Gi(o,i.child,null,y),o.child=Gi(o,null,P,y)):zt(i,o,P,y),o.memoizedState=f.state,g&&Vp(o,u,!0),o.child}function Bg(i){var o=i.stateNode;o.pendingContext?Fp(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Fp(i,o.context,!1),Dc(i,o.containerInfo)}function zg(i,o,u,f,g){return Yi(),Oc(g),o.flags|=256,zt(i,o,u,f),o.child}var qc={dehydrated:null,treeContext:null,retryLane:0};function Yc(i){return{baseLanes:i,cachePool:null,transitions:null}}function Fg(i,o,u){var f=o.pendingProps,g=Ye.current,y=!1,w=(o.flags&128)!==0,P;if((P=w)||(P=i!==null&&i.memoizedState===null?!1:(g&2)!==0),P?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),He(Ye,g&1),i===null)return Sc(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(w=f.children,i=f.fallback,y?(f=o.mode,y=o.child,w={mode:"hidden",children:w},(f&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=w):y=da(w,f,0,null),i=Si(i,f,u,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Yc(u),o.memoizedState=qc,i):Gc(o,w));if(g=i.memoizedState,g!==null&&(P=g.dehydrated,P!==null))return Jw(i,o,w,f,P,g,u);if(y){y=f.fallback,w=o.mode,g=i.child,P=g.sibling;var R={mode:"hidden",children:f.children};return(w&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=R,o.deletions=null):(f=$r(g,R),f.subtreeFlags=g.subtreeFlags&14680064),P!==null?y=$r(P,y):(y=Si(y,w,u,null),y.flags|=2),y.return=o,f.return=o,f.sibling=y,o.child=f,f=y,y=o.child,w=i.child.memoizedState,w=w===null?Yc(u):{baseLanes:w.baseLanes|u,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=i.childLanes&~u,o.memoizedState=qc,f}return y=i.child,i=y.sibling,f=$r(y,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=u),f.return=o,f.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=f,o.memoizedState=null,f}function Gc(i,o){return o=da({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function ea(i,o,u,f){return f!==null&&Oc(f),Gi(o,i.child,null,u),i=Gc(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Jw(i,o,u,f,g,y,w){if(u)return o.flags&256?(o.flags&=-257,f=$c(Error(t(422))),ea(i,o,w,f)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=f.fallback,g=o.mode,f=da({mode:"visible",children:f.children},g,0,null),y=Si(y,g,w,null),y.flags|=2,f.return=o,y.return=o,f.sibling=y,o.child=f,(o.mode&1)!==0&&Gi(o,i.child,null,w),o.child.memoizedState=Yc(w),o.memoizedState=qc,y);if((o.mode&1)===0)return ea(i,o,w,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var P=f.dgst;return f=P,y=Error(t(419)),f=$c(y,f,void 0),ea(i,o,w,f)}if(P=(w&i.childLanes)!==0,qt||P){if(f=mt,f!==null){switch(w&-w){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|w))!==0?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,dr(i,g),In(f,i,g,-1))}return dh(),f=$c(Error(t(421))),ea(i,o,w,f)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=hk.bind(null,i),g._reactRetry=o,null):(i=y.treeContext,on=Lr(g.nextSibling),sn=o,Xe=!0,Dn=null,i!==null&&(dn[pn++]=hr,dn[pn++]=fr,dn[pn++]=pi,hr=i.id,fr=i.overflow,pi=o),o=Gc(o,f.children),o.flags|=4096,o)}function _g(i,o,u){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),Mc(i.return,o,u)}function Jc(i,o,u,f,g){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=u,y.tailMode=g)}function Vg(i,o,u){var f=o.pendingProps,g=f.revealOrder,y=f.tail;if(zt(i,o,f.children,u),f=Ye.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&_g(i,u,o);else if(i.tag===19)_g(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(He(Ye,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)i=u.alternate,i!==null&&Xl(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),Jc(o,!1,g,u,y);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Xl(i)===null){o.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}Jc(o,!0,u,null,y);break;case"together":Jc(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ta(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function gr(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),xi|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=$r(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=$r(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function Zw(i,o,u){switch(o.tag){case 3:Bg(o),Yi();break;case 5:tg(o);break;case 1:Kt(o.type)&&Bl(o);break;case 4:Dc(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;He(Wl,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(He(Ye,Ye.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Fg(i,o,u):(He(Ye,Ye.current&1),i=gr(i,o,u),i!==null?i.sibling:null);He(Ye,Ye.current&1);break;case 19:if(f=(u&o.childLanes)!==0,(i.flags&128)!==0){if(f)return Vg(i,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),He(Ye,Ye.current),f)break;return null;case 22:case 23:return o.lanes=0,Lg(i,o,u)}return gr(i,o,u)}var Hg,Zc,Wg,Qg;Hg=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Zc=function(){},Wg=function(i,o,u,f){var g=i.memoizedProps;if(g!==f){i=o.stateNode,yi(Xn.current);var y=null;switch(u){case"input":g=Je(i,g),f=Je(i,f),y=[];break;case"select":g=Z({},g,{value:void 0}),f=Z({},f,{value:void 0}),y=[];break;case"textarea":g=On(i,g),f=On(i,f),y=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Ll)}ji(u,f);var w;u=null;for(z in g)if(!f.hasOwnProperty(z)&&g.hasOwnProperty(z)&&g[z]!=null)if(z==="style"){var P=g[z];for(w in P)P.hasOwnProperty(w)&&(u||(u={}),u[w]="")}else z!=="dangerouslySetInnerHTML"&&z!=="children"&&z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&z!=="autoFocus"&&(s.hasOwnProperty(z)?y||(y=[]):(y=y||[]).push(z,null));for(z in f){var R=f[z];if(P=g!=null?g[z]:void 0,f.hasOwnProperty(z)&&R!==P&&(R!=null||P!=null))if(z==="style")if(P){for(w in P)!P.hasOwnProperty(w)||R&&R.hasOwnProperty(w)||(u||(u={}),u[w]="");for(w in R)R.hasOwnProperty(w)&&P[w]!==R[w]&&(u||(u={}),u[w]=R[w])}else u||(y||(y=[]),y.push(z,u)),u=R;else z==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,P=P?P.__html:void 0,R!=null&&P!==R&&(y=y||[]).push(z,R)):z==="children"?typeof R!="string"&&typeof R!="number"||(y=y||[]).push(z,""+R):z!=="suppressContentEditableWarning"&&z!=="suppressHydrationWarning"&&(s.hasOwnProperty(z)?(R!=null&&z==="onScroll"&&Qe("scroll",i),y||P===R||(y=[])):(y=y||[]).push(z,R))}u&&(y=y||[]).push("style",u);var z=y;(o.updateQueue=z)&&(o.flags|=4)}},Qg=function(i,o,u,f){u!==f&&(o.flags|=4)};function uo(i,o){if(!Xe)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Dt(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(o)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=u,o}function ek(i,o,u){var f=o.pendingProps;switch(kc(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(o),null;case 1:return Kt(o.type)&&jl(),Dt(o),null;case 3:return f=o.stateNode,es(),$e(Xt),$e(Rt),Lc(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Vl(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Dn!==null&&(ch(Dn),Dn=null))),Zc(i,o),Dt(o),null;case 5:Nc(o);var g=yi(io.current);if(u=o.type,i!==null&&o.stateNode!=null)Wg(i,o,u,f,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return Dt(o),null}if(i=yi(Xn.current),Vl(o)){f=o.stateNode,u=o.type;var y=o.memoizedProps;switch(f[Un]=o,f[Zs]=y,i=(o.mode&1)!==0,u){case"dialog":Qe("cancel",f),Qe("close",f);break;case"iframe":case"object":case"embed":Qe("load",f);break;case"video":case"audio":for(g=0;g<Ys.length;g++)Qe(Ys[g],f);break;case"source":Qe("error",f);break;case"img":case"image":case"link":Qe("error",f),Qe("load",f);break;case"details":Qe("toggle",f);break;case"input":ct(f,y),Qe("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!y.multiple},Qe("invalid",f);break;case"textarea":or(f,y),Qe("invalid",f)}ji(u,y),g=null;for(var w in y)if(y.hasOwnProperty(w)){var P=y[w];w==="children"?typeof P=="string"?f.textContent!==P&&(y.suppressHydrationWarning!==!0&&Tl(f.textContent,P,i),g=["children",P]):typeof P=="number"&&f.textContent!==""+P&&(y.suppressHydrationWarning!==!0&&Tl(f.textContent,P,i),g=["children",""+P]):s.hasOwnProperty(w)&&P!=null&&w==="onScroll"&&Qe("scroll",f)}switch(u){case"input":Ae(f),Ve(f,y,!0);break;case"textarea":Ae(f),ci(f);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(f.onclick=Ll)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{w=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=hl(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=w.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=w.createElement(u,{is:f.is}):(i=w.createElement(u),u==="select"&&(w=i,f.multiple?w.multiple=!0:f.size&&(w.size=f.size))):i=w.createElementNS(i,u),i[Un]=o,i[Zs]=f,Hg(i,o,!1,!1),o.stateNode=i;e:{switch(w=Ns(u,f),u){case"dialog":Qe("cancel",i),Qe("close",i),g=f;break;case"iframe":case"object":case"embed":Qe("load",i),g=f;break;case"video":case"audio":for(g=0;g<Ys.length;g++)Qe(Ys[g],i);g=f;break;case"source":Qe("error",i),g=f;break;case"img":case"image":case"link":Qe("error",i),Qe("load",i),g=f;break;case"details":Qe("toggle",i),g=f;break;case"input":ct(i,f),g=Je(i,f),Qe("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=Z({},f,{value:void 0}),Qe("invalid",i);break;case"textarea":or(i,f),g=On(i,f),Qe("invalid",i);break;default:g=f}ji(u,g),P=g;for(y in P)if(P.hasOwnProperty(y)){var R=P[y];y==="style"?pl(i,R):y==="dangerouslySetInnerHTML"?(R=R?R.__html:void 0,R!=null&&Cr(i,R)):y==="children"?typeof R=="string"?(u!=="textarea"||R!=="")&&Pr(i,R):typeof R=="number"&&Pr(i,""+R):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?R!=null&&y==="onScroll"&&Qe("scroll",i):R!=null&&N(i,y,R,w))}switch(u){case"input":Ae(i),Ve(i,f,!1);break;case"textarea":Ae(i),ci(i);break;case"option":f.value!=null&&i.setAttribute("value",""+Se(f.value));break;case"select":i.multiple=!!f.multiple,y=f.value,y!=null?Qt(i,!!f.multiple,y,!1):f.defaultValue!=null&&Qt(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Ll)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Dt(o),null;case 6:if(i&&o.stateNode!=null)Qg(i,o,i.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(u=yi(io.current),yi(Xn.current),Vl(o)){if(f=o.stateNode,u=o.memoizedProps,f[Un]=o,(y=f.nodeValue!==u)&&(i=sn,i!==null))switch(i.tag){case 3:Tl(f.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Tl(f.nodeValue,u,(i.mode&1)!==0)}y&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Un]=o,o.stateNode=f}return Dt(o),null;case 13:if($e(Ye),f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Xe&&on!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Xp(),Yi(),o.flags|=98560,y=!1;else if(y=Vl(o),f!==null&&f.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Un]=o}else Yi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Dt(o),y=!1}else Dn!==null&&(ch(Dn),Dn=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Ye.current&1)!==0?ft===0&&(ft=3):dh())),o.updateQueue!==null&&(o.flags|=4),Dt(o),null);case 4:return es(),Zc(i,o),i===null&&Gs(o.stateNode.containerInfo),Dt(o),null;case 10:return Ec(o.type._context),Dt(o),null;case 17:return Kt(o.type)&&jl(),Dt(o),null;case 19:if($e(Ye),y=o.memoizedState,y===null)return Dt(o),null;if(f=(o.flags&128)!==0,w=y.rendering,w===null)if(f)uo(y,!1);else{if(ft!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(w=Xl(i),w!==null){for(o.flags|=128,uo(y,!1),f=w.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)y=u,i=f,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,i=w.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return He(Ye,Ye.current&1|2),o.child}i=i.sibling}y.tail!==null&&nt()>is&&(o.flags|=128,f=!0,uo(y,!1),o.lanes=4194304)}else{if(!f)if(i=Xl(w),i!==null){if(o.flags|=128,f=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),uo(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!Xe)return Dt(o),null}else 2*nt()-y.renderingStartTime>is&&u!==1073741824&&(o.flags|=128,f=!0,uo(y,!1),o.lanes=4194304);y.isBackwards?(w.sibling=o.child,o.child=w):(u=y.last,u!==null?u.sibling=w:o.child=w,y.last=w)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=nt(),o.sibling=null,u=Ye.current,He(Ye,f?u&1|2:u&1),o):(Dt(o),null);case 22:case 23:return fh(),f=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(ln&1073741824)!==0&&(Dt(o),o.subtreeFlags&6&&(o.flags|=8192)):Dt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function tk(i,o){switch(kc(o),o.tag){case 1:return Kt(o.type)&&jl(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return es(),$e(Xt),$e(Rt),Lc(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Nc(o),null;case 13:if($e(Ye),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Yi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return $e(Ye),null;case 4:return es(),null;case 10:return Ec(o.type._context),null;case 22:case 23:return fh(),null;case 24:return null;default:return null}}var na=!1,Nt=!1,nk=typeof WeakSet=="function"?WeakSet:Set,fe=null;function ns(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Ze(i,o,f)}else u.current=null}function eh(i,o,u){try{u()}catch(f){Ze(i,o,f)}}var $g=!1;function rk(i,o){if(fc=bl,i=Sp(),ic(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var w=0,P=-1,R=-1,z=0,K=0,Y=i,$=null;t:for(;;){for(var ue;Y!==u||g!==0&&Y.nodeType!==3||(P=w+g),Y!==y||f!==0&&Y.nodeType!==3||(R=w+f),Y.nodeType===3&&(w+=Y.nodeValue.length),(ue=Y.firstChild)!==null;)$=Y,Y=ue;for(;;){if(Y===i)break t;if($===u&&++z===g&&(P=w),$===y&&++K===f&&(R=w),(ue=Y.nextSibling)!==null)break;Y=$,$=Y.parentNode}Y=ue}u=P===-1||R===-1?null:{start:P,end:R}}else u=null}u=u||{start:0,end:0}}else u=null;for(dc={focusedElem:i,selectionRange:u},bl=!1,fe=o;fe!==null;)if(o=fe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,fe=i;else for(;fe!==null;){o=fe;try{var ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var me=ge.memoizedProps,rt=ge.memoizedState,T=o.stateNode,D=T.getSnapshotBeforeUpdate(o.elementType===o.type?me:Nn(o.type,me),rt);T.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var j=o.stateNode.containerInfo;j.nodeType===1?j.textContent="":j.nodeType===9&&j.documentElement&&j.removeChild(j.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(te){Ze(o,o.return,te)}if(i=o.sibling,i!==null){i.return=o.return,fe=i;break}fe=o.return}return ge=$g,$g=!1,ge}function co(i,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var y=g.destroy;g.destroy=void 0,y!==void 0&&eh(o,u,y)}g=g.next}while(g!==f)}}function ra(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function th(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function Ug(i){var o=i.alternate;o!==null&&(i.alternate=null,Ug(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Un],delete o[Zs],delete o[yc],delete o[Fw],delete o[_w])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Xg(i){return i.tag===5||i.tag===3||i.tag===4}function Kg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Xg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function nh(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ll));else if(f!==4&&(i=i.child,i!==null))for(nh(i,o,u),i=i.sibling;i!==null;)nh(i,o,u),i=i.sibling}function rh(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(rh(i,o,u),i=i.sibling;i!==null;)rh(i,o,u),i=i.sibling}var kt=null,Tn=!1;function _r(i,o,u){for(u=u.child;u!==null;)qg(i,o,u),u=u.sibling}function qg(i,o,u){if($n&&typeof $n.onCommitFiberUnmount=="function")try{$n.onCommitFiberUnmount(ml,u)}catch{}switch(u.tag){case 5:Nt||ns(u,o);case 6:var f=kt,g=Tn;kt=null,_r(i,o,u),kt=f,Tn=g,kt!==null&&(Tn?(i=kt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):kt.removeChild(u.stateNode));break;case 18:kt!==null&&(Tn?(i=kt,u=u.stateNode,i.nodeType===8?mc(i.parentNode,u):i.nodeType===1&&mc(i,u),Hs(i)):mc(kt,u.stateNode));break;case 4:f=kt,g=Tn,kt=u.stateNode.containerInfo,Tn=!0,_r(i,o,u),kt=f,Tn=g;break;case 0:case 11:case 14:case 15:if(!Nt&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var y=g,w=y.destroy;y=y.tag,w!==void 0&&((y&2)!==0||(y&4)!==0)&&eh(u,o,w),g=g.next}while(g!==f)}_r(i,o,u);break;case 1:if(!Nt&&(ns(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(P){Ze(u,o,P)}_r(i,o,u);break;case 21:_r(i,o,u);break;case 22:u.mode&1?(Nt=(f=Nt)||u.memoizedState!==null,_r(i,o,u),Nt=f):_r(i,o,u);break;default:_r(i,o,u)}}function Yg(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new nk),o.forEach(function(f){var g=fk.bind(null,i,f);u.has(f)||(u.add(f),f.then(g,g))})}}function Ln(i,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var y=i,w=o,P=w;e:for(;P!==null;){switch(P.tag){case 5:kt=P.stateNode,Tn=!1;break e;case 3:kt=P.stateNode.containerInfo,Tn=!0;break e;case 4:kt=P.stateNode.containerInfo,Tn=!0;break e}P=P.return}if(kt===null)throw Error(t(160));qg(y,w,g),kt=null,Tn=!1;var R=g.alternate;R!==null&&(R.return=null),g.return=null}catch(z){Ze(g,o,z)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Gg(o,i),o=o.sibling}function Gg(i,o){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Ln(o,i),qn(i),f&4){try{co(3,i,i.return),ra(3,i)}catch(me){Ze(i,i.return,me)}try{co(5,i,i.return)}catch(me){Ze(i,i.return,me)}}break;case 1:Ln(o,i),qn(i),f&512&&u!==null&&ns(u,u.return);break;case 5:if(Ln(o,i),qn(i),f&512&&u!==null&&ns(u,u.return),i.flags&32){var g=i.stateNode;try{Pr(g,"")}catch(me){Ze(i,i.return,me)}}if(f&4&&(g=i.stateNode,g!=null)){var y=i.memoizedProps,w=u!==null?u.memoizedProps:y,P=i.type,R=i.updateQueue;if(i.updateQueue=null,R!==null)try{P==="input"&&y.type==="radio"&&y.name!=null&&Ee(g,y),Ns(P,w);var z=Ns(P,y);for(w=0;w<R.length;w+=2){var K=R[w],Y=R[w+1];K==="style"?pl(g,Y):K==="dangerouslySetInnerHTML"?Cr(g,Y):K==="children"?Pr(g,Y):N(g,K,Y,z)}switch(P){case"input":de(g,y);break;case"textarea":ui(g,y);break;case"select":var $=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var ue=y.value;ue!=null?Qt(g,!!y.multiple,ue,!1):$!==!!y.multiple&&(y.defaultValue!=null?Qt(g,!!y.multiple,y.defaultValue,!0):Qt(g,!!y.multiple,y.multiple?[]:"",!1))}g[Zs]=y}catch(me){Ze(i,i.return,me)}}break;case 6:if(Ln(o,i),qn(i),f&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,y=i.memoizedProps;try{g.nodeValue=y}catch(me){Ze(i,i.return,me)}}break;case 3:if(Ln(o,i),qn(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Hs(o.containerInfo)}catch(me){Ze(i,i.return,me)}break;case 4:Ln(o,i),qn(i);break;case 13:Ln(o,i),qn(i),g=i.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(oh=nt())),f&4&&Yg(i);break;case 22:if(K=u!==null&&u.memoizedState!==null,i.mode&1?(Nt=(z=Nt)||K,Ln(o,i),Nt=z):Ln(o,i),qn(i),f&8192){if(z=i.memoizedState!==null,(i.stateNode.isHidden=z)&&!K&&(i.mode&1)!==0)for(fe=i,K=i.child;K!==null;){for(Y=fe=K;fe!==null;){switch($=fe,ue=$.child,$.tag){case 0:case 11:case 14:case 15:co(4,$,$.return);break;case 1:ns($,$.return);var ge=$.stateNode;if(typeof ge.componentWillUnmount=="function"){f=$,u=$.return;try{o=f,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(me){Ze(f,u,me)}}break;case 5:ns($,$.return);break;case 22:if($.memoizedState!==null){em(Y);continue}}ue!==null?(ue.return=$,fe=ue):em(Y)}K=K.sibling}e:for(K=null,Y=i;;){if(Y.tag===5){if(K===null){K=Y;try{g=Y.stateNode,z?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(P=Y.stateNode,R=Y.memoizedProps.style,w=R!=null&&R.hasOwnProperty("display")?R.display:null,P.style.display=dl("display",w))}catch(me){Ze(i,i.return,me)}}}else if(Y.tag===6){if(K===null)try{Y.stateNode.nodeValue=z?"":Y.memoizedProps}catch(me){Ze(i,i.return,me)}}else if((Y.tag!==22&&Y.tag!==23||Y.memoizedState===null||Y===i)&&Y.child!==null){Y.child.return=Y,Y=Y.child;continue}if(Y===i)break e;for(;Y.sibling===null;){if(Y.return===null||Y.return===i)break e;K===Y&&(K=null),Y=Y.return}K===Y&&(K=null),Y.sibling.return=Y.return,Y=Y.sibling}}break;case 19:Ln(o,i),qn(i),f&4&&Yg(i);break;case 21:break;default:Ln(o,i),qn(i)}}function qn(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(Xg(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Pr(g,""),f.flags&=-33);var y=Kg(i);rh(i,y,g);break;case 3:case 4:var w=f.stateNode.containerInfo,P=Kg(i);nh(i,P,w);break;default:throw Error(t(161))}}catch(R){Ze(i,i.return,R)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function ik(i,o,u){fe=i,Jg(i)}function Jg(i,o,u){for(var f=(i.mode&1)!==0;fe!==null;){var g=fe,y=g.child;if(g.tag===22&&f){var w=g.memoizedState!==null||na;if(!w){var P=g.alternate,R=P!==null&&P.memoizedState!==null||Nt;P=na;var z=Nt;if(na=w,(Nt=R)&&!z)for(fe=g;fe!==null;)w=fe,R=w.child,w.tag===22&&w.memoizedState!==null?tm(g):R!==null?(R.return=w,fe=R):tm(g);for(;y!==null;)fe=y,Jg(y),y=y.sibling;fe=g,na=P,Nt=z}Zg(i)}else(g.subtreeFlags&8772)!==0&&y!==null?(y.return=g,fe=y):Zg(i)}}function Zg(i){for(;fe!==null;){var o=fe;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Nt||ra(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Nt)if(u===null)f.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:Nn(o.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&eg(o,y,f);break;case 3:var w=o.updateQueue;if(w!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}eg(o,w,u)}break;case 5:var P=o.stateNode;if(u===null&&o.flags&4){u=P;var R=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":R.autoFocus&&u.focus();break;case"img":R.src&&(u.src=R.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var z=o.alternate;if(z!==null){var K=z.memoizedState;if(K!==null){var Y=K.dehydrated;Y!==null&&Hs(Y)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Nt||o.flags&512&&th(o)}catch($){Ze(o,o.return,$)}}if(o===i){fe=null;break}if(u=o.sibling,u!==null){u.return=o.return,fe=u;break}fe=o.return}}function em(i){for(;fe!==null;){var o=fe;if(o===i){fe=null;break}var u=o.sibling;if(u!==null){u.return=o.return,fe=u;break}fe=o.return}}function tm(i){for(;fe!==null;){var o=fe;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{ra(4,o)}catch(R){Ze(o,u,R)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(R){Ze(o,g,R)}}var y=o.return;try{th(o)}catch(R){Ze(o,y,R)}break;case 5:var w=o.return;try{th(o)}catch(R){Ze(o,w,R)}}}catch(R){Ze(o,o.return,R)}if(o===i){fe=null;break}var P=o.sibling;if(P!==null){P.return=o.return,fe=P;break}fe=o.return}}var sk=Math.ceil,ia=_.ReactCurrentDispatcher,ih=_.ReactCurrentOwner,yn=_.ReactCurrentBatchConfig,De=0,mt=null,lt=null,bt=0,ln=0,rs=Ir(0),ft=0,ho=null,xi=0,sa=0,sh=0,fo=null,Yt=null,oh=0,is=1/0,mr=null,oa=!1,lh=null,Vr=null,la=!1,Hr=null,aa=0,po=0,ah=null,ua=-1,ca=0;function Ft(){return(De&6)!==0?nt():ua!==-1?ua:ua=nt()}function Wr(i){return(i.mode&1)===0?1:(De&2)!==0&&bt!==0?bt&-bt:Hw.transition!==null?(ca===0&&(ca=Kd()),ca):(i=Be,i!==0||(i=window.event,i=i===void 0?16:rp(i.type)),i)}function In(i,o,u,f){if(50<po)throw po=0,ah=null,Error(t(185));Bs(i,u,f),((De&2)===0||i!==mt)&&(i===mt&&((De&2)===0&&(sa|=u),ft===4&&Qr(i,bt)),Gt(i,f),u===1&&De===0&&(o.mode&1)===0&&(is=nt()+500,zl&&Br()))}function Gt(i,o){var u=i.callbackNode;H1(i,o);var f=xl(i,i===mt?bt:0);if(f===0)u!==null&&$d(u),i.callbackNode=null,i.callbackPriority=0;else if(o=f&-f,i.callbackPriority!==o){if(u!=null&&$d(u),o===1)i.tag===0?Vw(rm.bind(null,i)):Hp(rm.bind(null,i)),Bw(function(){(De&6)===0&&Br()}),u=null;else{switch(qd(f)){case 1:u=Vu;break;case 4:u=Ud;break;case 16:u=gl;break;case 536870912:u=Xd;break;default:u=gl}u=hm(u,nm.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function nm(i,o){if(ua=-1,ca=0,(De&6)!==0)throw Error(t(327));var u=i.callbackNode;if(ss()&&i.callbackNode!==u)return null;var f=xl(i,i===mt?bt:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||o)o=ha(i,f);else{o=f;var g=De;De|=2;var y=sm();(mt!==i||bt!==o)&&(mr=null,is=nt()+500,ki(i,o));do try{ak();break}catch(P){im(i,P)}while(!0);Pc(),ia.current=y,De=g,lt!==null?o=0:(mt=null,bt=0,o=ft)}if(o!==0){if(o===2&&(g=Hu(i),g!==0&&(f=g,o=uh(i,g))),o===1)throw u=ho,ki(i,0),Qr(i,f),Gt(i,nt()),u;if(o===6)Qr(i,f);else{if(g=i.current.alternate,(f&30)===0&&!ok(g)&&(o=ha(i,f),o===2&&(y=Hu(i),y!==0&&(f=y,o=uh(i,y))),o===1))throw u=ho,ki(i,0),Qr(i,f),Gt(i,nt()),u;switch(i.finishedWork=g,i.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:bi(i,Yt,mr);break;case 3:if(Qr(i,f),(f&130023424)===f&&(o=oh+500-nt(),10<o)){if(xl(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){Ft(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=gc(bi.bind(null,i,Yt,mr),o);break}bi(i,Yt,mr);break;case 4:if(Qr(i,f),(f&4194240)===f)break;for(o=i.eventTimes,g=-1;0<f;){var w=31-Rn(f);y=1<<w,w=o[w],w>g&&(g=w),f&=~y}if(f=g,f=nt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*sk(f/1960))-f,10<f){i.timeoutHandle=gc(bi.bind(null,i,Yt,mr),f);break}bi(i,Yt,mr);break;case 5:bi(i,Yt,mr);break;default:throw Error(t(329))}}}return Gt(i,nt()),i.callbackNode===u?nm.bind(null,i):null}function uh(i,o){var u=fo;return i.current.memoizedState.isDehydrated&&(ki(i,o).flags|=256),i=ha(i,o),i!==2&&(o=Yt,Yt=u,o!==null&&ch(o)),i}function ch(i){Yt===null?Yt=i:Yt.push.apply(Yt,i)}function ok(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],y=g.getSnapshot;g=g.value;try{if(!An(y(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Qr(i,o){for(o&=~sh,o&=~sa,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-Rn(o),f=1<<u;i[u]=-1,o&=~f}}function rm(i){if((De&6)!==0)throw Error(t(327));ss();var o=xl(i,0);if((o&1)===0)return Gt(i,nt()),null;var u=ha(i,o);if(i.tag!==0&&u===2){var f=Hu(i);f!==0&&(o=f,u=uh(i,f))}if(u===1)throw u=ho,ki(i,0),Qr(i,o),Gt(i,nt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,bi(i,Yt,mr),Gt(i,nt()),null}function hh(i,o){var u=De;De|=1;try{return i(o)}finally{De=u,De===0&&(is=nt()+500,zl&&Br())}}function wi(i){Hr!==null&&Hr.tag===0&&(De&6)===0&&ss();var o=De;De|=1;var u=yn.transition,f=Be;try{if(yn.transition=null,Be=1,i)return i()}finally{Be=f,yn.transition=u,De=o,(De&6)===0&&Br()}}function fh(){ln=rs.current,$e(rs)}function ki(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,jw(u)),lt!==null)for(u=lt.return;u!==null;){var f=u;switch(kc(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&jl();break;case 3:es(),$e(Xt),$e(Rt),Lc();break;case 5:Nc(f);break;case 4:es();break;case 13:$e(Ye);break;case 19:$e(Ye);break;case 10:Ec(f.type._context);break;case 22:case 23:fh()}u=u.return}if(mt=i,lt=i=$r(i.current,null),bt=ln=o,ft=0,ho=null,sh=sa=xi=0,Yt=fo=null,mi!==null){for(o=0;o<mi.length;o++)if(u=mi[o],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,y=u.pending;if(y!==null){var w=y.next;y.next=g,f.next=w}u.pending=f}mi=null}return i}function im(i,o){do{var u=lt;try{if(Pc(),Kl.current=Jl,ql){for(var f=Ge.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}ql=!1}if(vi=0,gt=ht=Ge=null,so=!1,oo=0,ih.current=null,u===null||u.return===null){ft=1,ho=o,lt=null;break}e:{var y=i,w=u.return,P=u,R=o;if(o=bt,P.flags|=32768,R!==null&&typeof R=="object"&&typeof R.then=="function"){var z=R,K=P,Y=K.tag;if((K.mode&1)===0&&(Y===0||Y===11||Y===15)){var $=K.alternate;$?(K.updateQueue=$.updateQueue,K.memoizedState=$.memoizedState,K.lanes=$.lanes):(K.updateQueue=null,K.memoizedState=null)}var ue=Rg(w);if(ue!==null){ue.flags&=-257,Ag(ue,w,P,y,o),ue.mode&1&&Mg(y,z,o),o=ue,R=z;var ge=o.updateQueue;if(ge===null){var me=new Set;me.add(R),o.updateQueue=me}else ge.add(R);break e}else{if((o&1)===0){Mg(y,z,o),dh();break e}R=Error(t(426))}}else if(Xe&&P.mode&1){var rt=Rg(w);if(rt!==null){(rt.flags&65536)===0&&(rt.flags|=256),Ag(rt,w,P,y,o),Oc(ts(R,P));break e}}y=R=ts(R,P),ft!==4&&(ft=2),fo===null?fo=[y]:fo.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var T=Pg(y,R,o);Zp(y,T);break e;case 1:P=R;var D=y.type,j=y.stateNode;if((y.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Vr===null||!Vr.has(j)))){y.flags|=65536,o&=-o,y.lanes|=o;var te=Eg(y,P,o);Zp(y,te);break e}}y=y.return}while(y!==null)}lm(u)}catch(xe){o=xe,lt===u&&u!==null&&(lt=u=u.return);continue}break}while(!0)}function sm(){var i=ia.current;return ia.current=Jl,i===null?Jl:i}function dh(){(ft===0||ft===3||ft===2)&&(ft=4),mt===null||(xi&268435455)===0&&(sa&268435455)===0||Qr(mt,bt)}function ha(i,o){var u=De;De|=2;var f=sm();(mt!==i||bt!==o)&&(mr=null,ki(i,o));do try{lk();break}catch(g){im(i,g)}while(!0);if(Pc(),De=u,ia.current=f,lt!==null)throw Error(t(261));return mt=null,bt=0,ft}function lk(){for(;lt!==null;)om(lt)}function ak(){for(;lt!==null&&!T1();)om(lt)}function om(i){var o=cm(i.alternate,i,ln);i.memoizedProps=i.pendingProps,o===null?lm(i):lt=o,ih.current=null}function lm(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=ek(u,o,ln),u!==null){lt=u;return}}else{if(u=tk(u,o),u!==null){u.flags&=32767,lt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{ft=6,lt=null;return}}if(o=o.sibling,o!==null){lt=o;return}lt=o=i}while(o!==null);ft===0&&(ft=5)}function bi(i,o,u){var f=Be,g=yn.transition;try{yn.transition=null,Be=1,uk(i,o,u,f)}finally{yn.transition=g,Be=f}return null}function uk(i,o,u,f){do ss();while(Hr!==null);if((De&6)!==0)throw Error(t(327));u=i.finishedWork;var g=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=u.lanes|u.childLanes;if(W1(i,y),i===mt&&(lt=mt=null,bt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||la||(la=!0,hm(gl,function(){return ss(),null})),y=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||y){y=yn.transition,yn.transition=null;var w=Be;Be=1;var P=De;De|=4,ih.current=null,rk(i,u),Gg(u,i),Rw(dc),bl=!!fc,dc=fc=null,i.current=u,ik(u),L1(),De=P,Be=w,yn.transition=y}else i.current=u;if(la&&(la=!1,Hr=i,aa=g),y=i.pendingLanes,y===0&&(Vr=null),B1(u.stateNode),Gt(i,nt()),o!==null)for(f=i.onRecoverableError,u=0;u<o.length;u++)g=o[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(oa)throw oa=!1,i=lh,lh=null,i;return(aa&1)!==0&&i.tag!==0&&ss(),y=i.pendingLanes,(y&1)!==0?i===ah?po++:(po=0,ah=i):po=0,Br(),null}function ss(){if(Hr!==null){var i=qd(aa),o=yn.transition,u=Be;try{if(yn.transition=null,Be=16>i?16:i,Hr===null)var f=!1;else{if(i=Hr,Hr=null,aa=0,(De&6)!==0)throw Error(t(331));var g=De;for(De|=4,fe=i.current;fe!==null;){var y=fe,w=y.child;if((fe.flags&16)!==0){var P=y.deletions;if(P!==null){for(var R=0;R<P.length;R++){var z=P[R];for(fe=z;fe!==null;){var K=fe;switch(K.tag){case 0:case 11:case 15:co(8,K,y)}var Y=K.child;if(Y!==null)Y.return=K,fe=Y;else for(;fe!==null;){K=fe;var $=K.sibling,ue=K.return;if(Ug(K),K===z){fe=null;break}if($!==null){$.return=ue,fe=$;break}fe=ue}}}var ge=y.alternate;if(ge!==null){var me=ge.child;if(me!==null){ge.child=null;do{var rt=me.sibling;me.sibling=null,me=rt}while(me!==null)}}fe=y}}if((y.subtreeFlags&2064)!==0&&w!==null)w.return=y,fe=w;else e:for(;fe!==null;){if(y=fe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:co(9,y,y.return)}var T=y.sibling;if(T!==null){T.return=y.return,fe=T;break e}fe=y.return}}var D=i.current;for(fe=D;fe!==null;){w=fe;var j=w.child;if((w.subtreeFlags&2064)!==0&&j!==null)j.return=w,fe=j;else e:for(w=D;fe!==null;){if(P=fe,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:ra(9,P)}}catch(xe){Ze(P,P.return,xe)}if(P===w){fe=null;break e}var te=P.sibling;if(te!==null){te.return=P.return,fe=te;break e}fe=P.return}}if(De=g,Br(),$n&&typeof $n.onPostCommitFiberRoot=="function")try{$n.onPostCommitFiberRoot(ml,i)}catch{}f=!0}return f}finally{Be=u,yn.transition=o}}return!1}function am(i,o,u){o=ts(u,o),o=Pg(i,o,1),i=Fr(i,o,1),o=Ft(),i!==null&&(Bs(i,1,o),Gt(i,o))}function Ze(i,o,u){if(i.tag===3)am(i,i,u);else for(;o!==null;){if(o.tag===3){am(o,i,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Vr===null||!Vr.has(f))){i=ts(u,i),i=Eg(o,i,1),o=Fr(o,i,1),i=Ft(),o!==null&&(Bs(o,1,i),Gt(o,i));break}}o=o.return}}function ck(i,o,u){var f=i.pingCache;f!==null&&f.delete(o),o=Ft(),i.pingedLanes|=i.suspendedLanes&u,mt===i&&(bt&u)===u&&(ft===4||ft===3&&(bt&130023424)===bt&&500>nt()-oh?ki(i,0):sh|=u),Gt(i,o)}function um(i,o){o===0&&((i.mode&1)===0?o=1:(o=vl,vl<<=1,(vl&130023424)===0&&(vl=4194304)));var u=Ft();i=dr(i,o),i!==null&&(Bs(i,o,u),Gt(i,u))}function hk(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),um(i,u)}function fk(i,o){var u=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),um(i,u)}var cm;cm=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||Xt.current)qt=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return qt=!1,Zw(i,o,u);qt=(i.flags&131072)!==0}else qt=!1,Xe&&(o.flags&1048576)!==0&&Wp(o,_l,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;ta(i,o),i=o.pendingProps;var g=Xi(o,Rt.current);Zi(o,u),g=Bc(null,o,f,i,g,u);var y=zc();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Kt(f)?(y=!0,Bl(o)):y=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Ac(o),g.updater=Zl,o.stateNode=g,g._reactInternals=o,Qc(o,f,i,u),o=Kc(null,o,f,!0,y,u)):(o.tag=0,Xe&&y&&wc(o),zt(null,o,g,u),o=o.child),o;case 16:f=o.elementType;e:{switch(ta(i,o),i=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=pk(f),i=Nn(f,i),g){case 0:o=Xc(null,o,f,i,u);break e;case 1:o=jg(null,o,f,i,u);break e;case 11:o=Dg(null,o,f,i,u);break e;case 14:o=Ng(null,o,f,Nn(f.type,i),u);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Nn(f,g),Xc(i,o,f,g,u);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Nn(f,g),jg(i,o,f,g,u);case 3:e:{if(Bg(o),i===null)throw Error(t(387));f=o.pendingProps,y=o.memoizedState,g=y.element,Jp(i,o),Ul(o,f,null,u);var w=o.memoizedState;if(f=w.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){g=ts(Error(t(423)),o),o=zg(i,o,f,u,g);break e}else if(f!==g){g=ts(Error(t(424)),o),o=zg(i,o,f,u,g);break e}else for(on=Lr(o.stateNode.containerInfo.firstChild),sn=o,Xe=!0,Dn=null,u=Yp(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Yi(),f===g){o=gr(i,o,u);break e}zt(i,o,f,u)}o=o.child}return o;case 5:return tg(o),i===null&&Sc(o),f=o.type,g=o.pendingProps,y=i!==null?i.memoizedProps:null,w=g.children,pc(f,g)?w=null:y!==null&&pc(f,y)&&(o.flags|=32),Ig(i,o),zt(i,o,w,u),o.child;case 6:return i===null&&Sc(o),null;case 13:return Fg(i,o,u);case 4:return Dc(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=Gi(o,null,f,u):zt(i,o,f,u),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Nn(f,g),Dg(i,o,f,g,u);case 7:return zt(i,o,o.pendingProps,u),o.child;case 8:return zt(i,o,o.pendingProps.children,u),o.child;case 12:return zt(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,y=o.memoizedProps,w=g.value,He(Wl,f._currentValue),f._currentValue=w,y!==null)if(An(y.value,w)){if(y.children===g.children&&!Xt.current){o=gr(i,o,u);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var P=y.dependencies;if(P!==null){w=y.child;for(var R=P.firstContext;R!==null;){if(R.context===f){if(y.tag===1){R=pr(-1,u&-u),R.tag=2;var z=y.updateQueue;if(z!==null){z=z.shared;var K=z.pending;K===null?R.next=R:(R.next=K.next,K.next=R),z.pending=R}}y.lanes|=u,R=y.alternate,R!==null&&(R.lanes|=u),Mc(y.return,u,o),P.lanes|=u;break}R=R.next}}else if(y.tag===10)w=y.type===o.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(t(341));w.lanes|=u,P=w.alternate,P!==null&&(P.lanes|=u),Mc(w,u,o),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===o){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}zt(i,o,g.children,u),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,Zi(o,u),g=gn(g),f=f(g),o.flags|=1,zt(i,o,f,u),o.child;case 14:return f=o.type,g=Nn(f,o.pendingProps),g=Nn(f.type,g),Ng(i,o,f,g,u);case 15:return Tg(i,o,o.type,o.pendingProps,u);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Nn(f,g),ta(i,o),o.tag=1,Kt(f)?(i=!0,Bl(o)):i=!1,Zi(o,u),Og(o,f,g),Qc(o,f,g,u),Kc(null,o,f,!0,i,u);case 19:return Vg(i,o,u);case 22:return Lg(i,o,u)}throw Error(t(156,o.tag))};function hm(i,o){return Qd(i,o)}function dk(i,o,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(i,o,u,f){return new dk(i,o,u,f)}function ph(i){return i=i.prototype,!(!i||!i.isReactComponent)}function pk(i){if(typeof i=="function")return ph(i)?1:0;if(i!=null){if(i=i.$$typeof,i===H)return 11;if(i===U)return 14}return 2}function $r(i,o){var u=i.alternate;return u===null?(u=vn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function fa(i,o,u,f,g,y){var w=2;if(f=i,typeof i=="function")ph(i)&&(w=1);else if(typeof i=="string")w=5;else e:switch(i){case B:return Si(u.children,g,y,o);case Q:w=8,g|=8;break;case q:return i=vn(12,u,o,g|2),i.elementType=q,i.lanes=y,i;case J:return i=vn(13,u,o,g),i.elementType=J,i.lanes=y,i;case se:return i=vn(19,u,o,g),i.elementType=se,i.lanes=y,i;case ce:return da(u,g,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:w=10;break e;case G:w=9;break e;case H:w=11;break e;case U:w=14;break e;case ae:w=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=vn(w,u,o,g),o.elementType=i,o.type=f,o.lanes=y,o}function Si(i,o,u,f){return i=vn(7,i,f,o),i.lanes=u,i}function da(i,o,u,f){return i=vn(22,i,f,o),i.elementType=ce,i.lanes=u,i.stateNode={isHidden:!1},i}function gh(i,o,u){return i=vn(6,i,null,o),i.lanes=u,i}function mh(i,o,u){return o=vn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function gk(i,o,u,f,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wu(0),this.expirationTimes=Wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wu(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function yh(i,o,u,f,g,y,w,P,R){return i=new gk(i,o,u,P,R),o===1?(o=1,y===!0&&(o|=8)):o=0,y=vn(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ac(y),i}function mk(i,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:f==null?null:""+f,children:i,containerInfo:o,implementation:u}}function fm(i){if(!i)return jr;i=i._reactInternals;e:{if(hi(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Kt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Kt(u))return _p(i,u,o)}return o}function dm(i,o,u,f,g,y,w,P,R){return i=yh(u,f,!0,i,g,y,w,P,R),i.context=fm(null),u=i.current,f=Ft(),g=Wr(u),y=pr(f,g),y.callback=o??null,Fr(u,y,g),i.current.lanes=g,Bs(i,g,f),Gt(i,f),i}function pa(i,o,u,f){var g=o.current,y=Ft(),w=Wr(g);return u=fm(u),o.context===null?o.context=u:o.pendingContext=u,o=pr(y,w),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=Fr(g,o,w),i!==null&&(In(i,g,w,y),$l(i,g,w)),w}function ga(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function pm(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function vh(i,o){pm(i,o),(i=i.alternate)&&pm(i,o)}function yk(){return null}var gm=typeof reportError=="function"?reportError:function(i){console.error(i)};function xh(i){this._internalRoot=i}ma.prototype.render=xh.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));pa(i,o,null,null)},ma.prototype.unmount=xh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;wi(function(){pa(null,i,null,null)}),o[ur]=null}};function ma(i){this._internalRoot=i}ma.prototype.unstable_scheduleHydration=function(i){if(i){var o=Jd();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Dr.length&&o!==0&&o<Dr[u].priority;u++);Dr.splice(u,0,i),u===0&&tp(i)}};function wh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ya(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function mm(){}function vk(i,o,u,f,g){if(g){if(typeof f=="function"){var y=f;f=function(){var z=ga(w);y.call(z)}}var w=dm(o,f,i,0,null,!1,!1,"",mm);return i._reactRootContainer=w,i[ur]=w.current,Gs(i.nodeType===8?i.parentNode:i),wi(),w}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var P=f;f=function(){var z=ga(R);P.call(z)}}var R=yh(i,0,!1,null,null,!1,!1,"",mm);return i._reactRootContainer=R,i[ur]=R.current,Gs(i.nodeType===8?i.parentNode:i),wi(function(){pa(o,R,u,f)}),R}function va(i,o,u,f,g){var y=u._reactRootContainer;if(y){var w=y;if(typeof g=="function"){var P=g;g=function(){var R=ga(w);P.call(R)}}pa(o,w,i,g)}else w=vk(u,o,i,g,f);return ga(w)}Yd=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=js(o.pendingLanes);u!==0&&(Qu(o,u|1),Gt(o,nt()),(De&6)===0&&(is=nt()+500,Br()))}break;case 13:wi(function(){var f=dr(i,1);if(f!==null){var g=Ft();In(f,i,1,g)}}),vh(i,1)}},$u=function(i){if(i.tag===13){var o=dr(i,134217728);if(o!==null){var u=Ft();In(o,i,134217728,u)}vh(i,134217728)}},Gd=function(i){if(i.tag===13){var o=Wr(i),u=dr(i,o);if(u!==null){var f=Ft();In(u,i,o,f)}vh(i,o)}},Jd=function(){return Be},Zd=function(i,o){var u=Be;try{return Be=i,o()}finally{Be=u}},Ls=function(i,o,u){switch(o){case"input":if(de(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==i&&f.form===i.form){var g=Il(f);if(!g)throw Error(t(90));We(f),de(f,g)}}}break;case"textarea":ui(i,u);break;case"select":o=u.value,o!=null&&Qt(i,!!u.multiple,o,!1)}},Bt=hh,Et=wi;var xk={usingClientEntryPoint:!1,Events:[eo,$i,Il,Pt,Pn,hh]},go={findFiberByHostInstance:fi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},wk={bundleType:go.bundleType,version:go.version,rendererPackageName:go.rendererPackageName,rendererConfig:go.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Hd(i),i===null?null:i.stateNode},findFiberByHostInstance:go.findFiberByHostInstance||yk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xa.isDisabled&&xa.supportsFiber)try{ml=xa.inject(wk),$n=xa}catch{}}return Jt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=xk,Jt.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!wh(o))throw Error(t(200));return mk(i,o,null,u)},Jt.createRoot=function(i,o){if(!wh(i))throw Error(t(299));var u=!1,f="",g=gm;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=yh(i,1,!1,null,null,u,!1,f,g),i[ur]=o.current,Gs(i.nodeType===8?i.parentNode:i),new xh(o)},Jt.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Hd(o),i=i===null?null:i.stateNode,i},Jt.flushSync=function(i){return wi(i)},Jt.hydrate=function(i,o,u){if(!ya(o))throw Error(t(200));return va(null,i,o,!0,u)},Jt.hydrateRoot=function(i,o,u){if(!wh(i))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,y="",w=gm;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(w=u.onRecoverableError)),o=dm(o,null,i,1,u??null,g,!1,y,w),i[ur]=o.current,Gs(i),f)for(i=0;i<f.length;i++)u=f[i],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new ma(o)},Jt.render=function(i,o,u){if(!ya(o))throw Error(t(200));return va(null,i,o,!1,u)},Jt.unmountComponentAtNode=function(i){if(!ya(i))throw Error(t(40));return i._reactRootContainer?(wi(function(){va(null,null,i,!1,function(){i._reactRootContainer=null,i[ur]=null})}),!0):!1},Jt.unstable_batchedUpdates=hh,Jt.unstable_renderSubtreeIntoContainer=function(i,o,u,f){if(!ya(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return va(i,o,u,!1,f)},Jt.version="18.3.1-next-f1338f8080-20240426",Jt}var Cm;function Ny(){if(Cm)return Sh.exports;Cm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sh.exports=Rk(),Sh.exports}var Pm;function Ak(){if(Pm)return wa;Pm=1;var n=Ny();return wa.createRoot=n.createRoot,wa.hydrateRoot=n.hydrateRoot,wa}var Dk=Ak();const Nk=Dy(Dk);var bo=Ny();function Tk(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return O.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Pu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ps(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function ad(n){return"nodeType"in n}function en(n){var e,t;return n?Ps(n)?n:ad(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function ud(n){const{Document:e}=en(n);return n instanceof e}function el(n){return Ps(n)?!1:n instanceof en(n).HTMLElement}function Ty(n){return n instanceof en(n).SVGElement}function Es(n){return n?Ps(n)?n.document:ad(n)?ud(n)?n:el(n)||Ty(n)?n.ownerDocument:document:document:document}const rr=Pu?O.useLayoutEffect:O.useEffect;function cd(n){const e=O.useRef(n);return rr(()=>{e.current=n}),O.useCallback(function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function Lk(){const n=O.useRef(null),e=O.useCallback((r,s)=>{n.current=setInterval(r,s)},[]),t=O.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function Fo(n,e){e===void 0&&(e=[n]);const t=O.useRef(n);return rr(()=>{t.current!==n&&(t.current=n)},e),t}function tl(n,e){const t=O.useRef();return O.useMemo(()=>{const r=n(t.current);return t.current=r,r},[...e])}function iu(n){const e=cd(n),t=O.useRef(null),r=O.useCallback(s=>{s!==t.current&&(e==null||e(s,t.current)),t.current=s},[]);return[t,r]}function sf(n){const e=O.useRef();return O.useEffect(()=>{e.current=n},[n]),e.current}let Ph={};function nl(n,e){return O.useMemo(()=>{if(e)return e;const t=Ph[n]==null?0:Ph[n]+1;return Ph[n]=t,n+"-"+t},[n,e])}function Ly(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const c=Object.entries(a);for(const[h,p]of c){const d=l[h];d!=null&&(l[h]=d+n*p)}return l},{...e})}}const fs=Ly(1),su=Ly(-1);function Ik(n){return"clientX"in n&&"clientY"in n}function hd(n){if(!n)return!1;const{KeyboardEvent:e}=en(n.target);return e&&n instanceof e}function jk(n){if(!n)return!1;const{TouchEvent:e}=en(n.target);return e&&n instanceof e}function of(n){if(jk(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return Ik(n)?{x:n.clientX,y:n.clientY}:null}const _o=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[_o.Translate.toString(n),_o.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:r}=n;return e+" "+t+"ms "+r}}}),Em="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Bk(n){return n.matches(Em)?n:n.querySelector(Em)}const zk={display:"none"};function Fk(n){let{id:e,value:t}=n;return st.createElement("div",{id:e,style:zk},t)}function _k(n){let{id:e,announcement:t,ariaLiveType:r="assertive"}=n;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return st.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},t)}function Vk(){const[n,e]=O.useState("");return{announce:O.useCallback(r=>{r!=null&&e(r)},[]),announcement:n}}const Iy=O.createContext(null);function Hk(n){const e=O.useContext(Iy);O.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function Wk(){const[n]=O.useState(()=>new Set),e=O.useCallback(r=>(n.add(r),()=>n.delete(r)),[n]);return[O.useCallback(r=>{let{type:s,event:l}=r;n.forEach(a=>{var c;return(c=a[s])==null?void 0:c.call(a,l)})},[n]),e]}const Qk={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},$k={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Uk(n){let{announcements:e=$k,container:t,hiddenTextDescribedById:r,screenReaderInstructions:s=Qk}=n;const{announce:l,announcement:a}=Vk(),c=nl("DndLiveRegion"),[h,p]=O.useState(!1);if(O.useEffect(()=>{p(!0)},[]),Hk(O.useMemo(()=>({onDragStart(m){let{active:v}=m;l(e.onDragStart({active:v}))},onDragMove(m){let{active:v,over:x}=m;e.onDragMove&&l(e.onDragMove({active:v,over:x}))},onDragOver(m){let{active:v,over:x}=m;l(e.onDragOver({active:v,over:x}))},onDragEnd(m){let{active:v,over:x}=m;l(e.onDragEnd({active:v,over:x}))},onDragCancel(m){let{active:v,over:x}=m;l(e.onDragCancel({active:v,over:x}))}}),[l,e])),!h)return null;const d=st.createElement(st.Fragment,null,st.createElement(Fk,{id:r,value:s.draggable}),st.createElement(_k,{id:c,announcement:a}));return t?bo.createPortal(d,t):d}var dt;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(dt||(dt={}));function ou(){}function Mm(n,e){return O.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function Xk(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return O.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Bn=Object.freeze({x:0,y:0});function Kk(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function qk(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return t-r}function Yk(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return r-t}function Gk(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function Rm(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const Jk=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=Rm(e,e.left,e.top),l=[];for(const a of r){const{id:c}=a,h=t.get(c);if(h){const p=Kk(Rm(h),s);l.push({id:c,data:{droppableContainer:a,value:p}})}}return l.sort(qk)};function Zk(n,e){const t=Math.max(e.top,n.top),r=Math.max(e.left,n.left),s=Math.min(e.left+e.width,n.left+n.width),l=Math.min(e.top+e.height,n.top+n.height),a=s-r,c=l-t;if(r<s&&t<l){const h=e.width*e.height,p=n.width*n.height,d=a*c,m=d/(h+p-d);return Number(m.toFixed(4))}return 0}const eb=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=[];for(const l of r){const{id:a}=l,c=t.get(a);if(c){const h=Zk(c,e);h>0&&s.push({id:a,data:{droppableContainer:l,value:h}})}}return s.sort(Yk)};function tb(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function jy(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Bn}function nb(n){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,c)=>({...a,top:a.top+n*c.y,bottom:a.bottom+n*c.y,left:a.left+n*c.x,right:a.right+n*c.x}),{...t})}}const rb=nb(1);function ib(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function sb(n,e,t){const r=ib(e);if(!r)return n;const{scaleX:s,scaleY:l,x:a,y:c}=r,h=n.left-a-(1-s)*parseFloat(t),p=n.top-c-(1-l)*parseFloat(t.slice(t.indexOf(" ")+1)),d=s?n.width/s:n.width,m=l?n.height/l:n.height;return{width:d,height:m,top:p,right:h+d,bottom:p+m,left:h}}const ob={ignoreTransform:!1};function Ms(n,e){e===void 0&&(e=ob);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:d}=en(n).getComputedStyle(n);p&&(t=sb(t,p,d))}const{top:r,left:s,width:l,height:a,bottom:c,right:h}=t;return{top:r,left:s,width:l,height:a,bottom:c,right:h}}function Am(n){return Ms(n,{ignoreTransform:!0})}function lb(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function ab(n,e){return e===void 0&&(e=en(n).getComputedStyle(n)),e.position==="fixed"}function ub(n,e){e===void 0&&(e=en(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=e[s];return typeof l=="string"?t.test(l):!1})}function fd(n,e){const t=[];function r(s){if(e!=null&&t.length>=e||!s)return t;if(ud(s)&&s.scrollingElement!=null&&!t.includes(s.scrollingElement))return t.push(s.scrollingElement),t;if(!el(s)||Ty(s)||t.includes(s))return t;const l=en(n).getComputedStyle(s);return s!==n&&ub(s,l)&&t.push(s),ab(s,l)?t:r(s.parentNode)}return n?r(n):t}function By(n){const[e]=fd(n,1);return e??null}function Eh(n){return!Pu||!n?null:Ps(n)?n:ad(n)?ud(n)||n===Es(n).scrollingElement?window:el(n)?n:null:null}function zy(n){return Ps(n)?n.scrollX:n.scrollLeft}function Fy(n){return Ps(n)?n.scrollY:n.scrollTop}function lf(n){return{x:zy(n),y:Fy(n)}}var vt;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(vt||(vt={}));function _y(n){return!Pu||!n?!1:n===document.scrollingElement}function Vy(n){const e={x:0,y:0},t=_y(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},r={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},s=n.scrollTop<=e.y,l=n.scrollLeft<=e.x,a=n.scrollTop>=r.y,c=n.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:c,maxScroll:r,minScroll:e}}const cb={x:.2,y:.2};function hb(n,e,t,r,s){let{top:l,left:a,right:c,bottom:h}=t;r===void 0&&(r=10),s===void 0&&(s=cb);const{isTop:p,isBottom:d,isLeft:m,isRight:v}=Vy(n),x={x:0,y:0},k={x:0,y:0},S={height:e.height*s.y,width:e.width*s.x};return!p&&l<=e.top+S.height?(x.y=vt.Backward,k.y=r*Math.abs((e.top+S.height-l)/S.height)):!d&&h>=e.bottom-S.height&&(x.y=vt.Forward,k.y=r*Math.abs((e.bottom-S.height-h)/S.height)),!v&&c>=e.right-S.width?(x.x=vt.Forward,k.x=r*Math.abs((e.right-S.width-c)/S.width)):!m&&a<=e.left+S.width&&(x.x=vt.Backward,k.x=r*Math.abs((e.left+S.width-a)/S.width)),{direction:x,speed:k}}function fb(n){if(n===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:e,left:t,right:r,bottom:s}=n.getBoundingClientRect();return{top:e,left:t,right:r,bottom:s,width:n.clientWidth,height:n.clientHeight}}function Hy(n){return n.reduce((e,t)=>fs(e,lf(t)),Bn)}function db(n){return n.reduce((e,t)=>e+zy(t),0)}function pb(n){return n.reduce((e,t)=>e+Fy(t),0)}function gb(n,e){if(e===void 0&&(e=Ms),!n)return;const{top:t,left:r,bottom:s,right:l}=e(n);By(n)&&(s<=0||l<=0||t>=window.innerHeight||r>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const mb=[["x",["left","right"],db],["y",["top","bottom"],pb]];class dd{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=fd(t),s=Hy(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,a,c]of mb)for(const h of a)Object.defineProperty(this,h,{get:()=>{const p=c(r),d=s[l]-p;return this.rect[h]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Mo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var s;(s=this.target)==null||s.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function yb(n){const{EventTarget:e}=en(n);return n instanceof e?n:Es(n)}function Mh(n,e){const t=Math.abs(n.x),r=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var xn;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(xn||(xn={}));function Dm(n){n.preventDefault()}function vb(n){n.stopPropagation()}var Le;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Le||(Le={}));const Wy={start:[Le.Space,Le.Enter],cancel:[Le.Esc],end:[Le.Space,Le.Enter,Le.Tab]},xb=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Le.Right:return{...t,x:t.x+25};case Le.Left:return{...t,x:t.x-25};case Le.Down:return{...t,y:t.y+25};case Le.Up:return{...t,y:t.y-25}}};class pd{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Mo(Es(t)),this.windowListeners=new Mo(en(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(xn.Resize,this.handleCancel),this.windowListeners.add(xn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(xn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&gb(r),t(Bn)}handleKeyDown(e){if(hd(e)){const{active:t,context:r,options:s}=this.props,{keyboardCodes:l=Wy,coordinateGetter:a=xb,scrollBehavior:c="smooth"}=s,{code:h}=e;if(l.end.includes(h)){this.handleEnd(e);return}if(l.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:p}=r.current,d=p?{x:p.left,y:p.top}:Bn;this.referenceCoordinates||(this.referenceCoordinates=d);const m=a(e,{active:t,context:r.current,currentCoordinates:d});if(m){const v=su(m,d),x={x:0,y:0},{scrollableAncestors:k}=r.current;for(const S of k){const C=e.code,{isTop:E,isRight:A,isLeft:N,isBottom:_,maxScroll:I,minScroll:F}=Vy(S),B=fb(S),Q={x:Math.min(C===Le.Right?B.right-B.width/2:B.right,Math.max(C===Le.Right?B.left:B.left+B.width/2,m.x)),y:Math.min(C===Le.Down?B.bottom-B.height/2:B.bottom,Math.max(C===Le.Down?B.top:B.top+B.height/2,m.y))},q=C===Le.Right&&!A||C===Le.Left&&!N,V=C===Le.Down&&!_||C===Le.Up&&!E;if(q&&Q.x!==m.x){const G=S.scrollLeft+v.x,H=C===Le.Right&&G<=I.x||C===Le.Left&&G>=F.x;if(H&&!v.y){S.scrollTo({left:G,behavior:c});return}H?x.x=S.scrollLeft-G:x.x=C===Le.Right?S.scrollLeft-I.x:S.scrollLeft-F.x,x.x&&S.scrollBy({left:-x.x,behavior:c});break}else if(V&&Q.y!==m.y){const G=S.scrollTop+v.y,H=C===Le.Down&&G<=I.y||C===Le.Up&&G>=F.y;if(H&&!v.x){S.scrollTo({top:G,behavior:c});return}H?x.y=S.scrollTop-G:x.y=C===Le.Down?S.scrollTop-I.y:S.scrollTop-F.y,x.y&&S.scrollBy({top:-x.y,behavior:c});break}}this.handleMove(e,fs(su(m,this.referenceCoordinates),x))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}pd.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:r=Wy,onActivation:s}=e,{active:l}=t;const{code:a}=n.nativeEvent;if(r.start.includes(a)){const c=l.activatorNode.current;return c&&n.target!==c?!1:(n.preventDefault(),s==null||s({event:n.nativeEvent}),!0)}return!1}}];function Nm(n){return!!(n&&"distance"in n)}function Tm(n){return!!(n&&"delay"in n)}class gd{constructor(e,t,r){var s;r===void 0&&(r=yb(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:a}=l;this.props=e,this.events=t,this.document=Es(a),this.documentListeners=new Mo(this.document),this.listeners=new Mo(r),this.windowListeners=new Mo(en(a)),this.initialCoordinates=(s=of(l))!=null?s:Bn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(xn.Resize,this.handleCancel),this.windowListeners.add(xn.DragStart,Dm),this.windowListeners.add(xn.VisibilityChange,this.handleCancel),this.windowListeners.add(xn.ContextMenu,Dm),this.documentListeners.add(xn.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Tm(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(Nm(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(xn.Click,vb,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(xn.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:c}}=l;if(!s)return;const h=(t=of(e))!=null?t:Bn,p=su(s,h);if(!r&&c){if(Nm(c)){if(c.tolerance!=null&&Mh(p,c.tolerance))return this.handleCancel();if(Mh(p,c.distance))return this.handleStart()}if(Tm(c)&&Mh(p,c.tolerance))return this.handleCancel();this.handlePending(c,p);return}e.cancelable&&e.preventDefault(),a(h)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Le.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const wb={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class md extends gd{constructor(e){const{event:t}=e,r=Es(t.target);super(e,wb,r)}}md.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r==null||r({event:t}),!0)}}];const kb={move:{name:"mousemove"},end:{name:"mouseup"}};var af;(function(n){n[n.RightClick=2]="RightClick"})(af||(af={}));class bb extends gd{constructor(e){super(e,kb,Es(e.event.target))}}bb.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return t.button===af.RightClick?!1:(r==null||r({event:t}),!0)}}];const Rh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Sb extends gd{constructor(e){super(e,Rh)}static setup(){return window.addEventListener(Rh.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Rh.move.name,e)};function e(){}}}Sb.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;const{touches:s}=t;return s.length>1?!1:(r==null||r({event:t}),!0)}}];var Ro;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(Ro||(Ro={}));var lu;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(lu||(lu={}));function Ob(n){let{acceleration:e,activator:t=Ro.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:c=lu.TreeOrder,pointerCoordinates:h,scrollableAncestors:p,scrollableAncestorRects:d,delta:m,threshold:v}=n;const x=Pb({delta:m,disabled:!l}),[k,S]=Lk(),C=O.useRef({x:0,y:0}),E=O.useRef({x:0,y:0}),A=O.useMemo(()=>{switch(t){case Ro.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Ro.DraggableRect:return s}},[t,s,h]),N=O.useRef(null),_=O.useCallback(()=>{const F=N.current;if(!F)return;const B=C.current.x*E.current.x,Q=C.current.y*E.current.y;F.scrollBy(B,Q)},[]),I=O.useMemo(()=>c===lu.TreeOrder?[...p].reverse():p,[c,p]);O.useEffect(()=>{if(!l||!p.length||!A){S();return}for(const F of I){if((r==null?void 0:r(F))===!1)continue;const B=p.indexOf(F),Q=d[B];if(!Q)continue;const{direction:q,speed:V}=hb(F,Q,A,e,v);for(const G of["x","y"])x[G][q[G]]||(V[G]=0,q[G]=0);if(V.x>0||V.y>0){S(),N.current=F,k(_,a),C.current=V,E.current=q;return}}C.current={x:0,y:0},E.current={x:0,y:0},S()},[e,_,r,S,l,a,JSON.stringify(A),JSON.stringify(x),k,p,I,d,JSON.stringify(v)])}const Cb={x:{[vt.Backward]:!1,[vt.Forward]:!1},y:{[vt.Backward]:!1,[vt.Forward]:!1}};function Pb(n){let{delta:e,disabled:t}=n;const r=sf(e);return tl(s=>{if(t||!r||!s)return Cb;const l={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[vt.Backward]:s.x[vt.Backward]||l.x===-1,[vt.Forward]:s.x[vt.Forward]||l.x===1},y:{[vt.Backward]:s.y[vt.Backward]||l.y===-1,[vt.Forward]:s.y[vt.Forward]||l.y===1}}},[t,e,r])}function Eb(n,e){const t=e!=null?n.get(e):void 0,r=t?t.node.current:null;return tl(s=>{var l;return e==null?null:(l=r??s)!=null?l:null},[r,e])}function Mb(n,e){return O.useMemo(()=>n.reduce((t,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...t,...l]},[]),[n,e])}var Vo;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(Vo||(Vo={}));var uf;(function(n){n.Optimized="optimized"})(uf||(uf={}));const Lm=new Map;function Rb(n,e){let{dragging:t,dependencies:r,config:s}=e;const[l,a]=O.useState(null),{frequency:c,measure:h,strategy:p}=s,d=O.useRef(n),m=C(),v=Fo(m),x=O.useCallback(function(E){E===void 0&&(E=[]),!v.current&&a(A=>A===null?E:A.concat(E.filter(N=>!A.includes(N))))},[v]),k=O.useRef(null),S=tl(E=>{if(m&&!t)return Lm;if(!E||E===Lm||d.current!==n||l!=null){const A=new Map;for(let N of n){if(!N)continue;if(l&&l.length>0&&!l.includes(N.id)&&N.rect.current){A.set(N.id,N.rect.current);continue}const _=N.node.current,I=_?new dd(h(_),_):null;N.rect.current=I,I&&A.set(N.id,I)}return A}return E},[n,l,t,m,h]);return O.useEffect(()=>{d.current=n},[n]),O.useEffect(()=>{m||x()},[t,m]),O.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),O.useEffect(()=>{m||typeof c!="number"||k.current!==null||(k.current=setTimeout(()=>{x(),k.current=null},c))},[c,m,x,...r]),{droppableRects:S,measureDroppableContainers:x,measuringScheduled:l!=null};function C(){switch(p){case Vo.Always:return!1;case Vo.BeforeDragging:return t;default:return!t}}}function Qy(n,e){return tl(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function Ab(n,e){return Qy(n,e)}function Db(n){let{callback:e,disabled:t}=n;const r=cd(e),s=O.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(r)},[r,t]);return O.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Eu(n){let{callback:e,disabled:t}=n;const r=cd(e),s=O.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(r)},[t]);return O.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Nb(n){return new dd(Ms(n),n)}function Im(n,e,t){e===void 0&&(e=Nb);const[r,s]=O.useState(null);function l(){s(h=>{if(!n)return null;if(n.isConnected===!1){var p;return(p=h??t)!=null?p:null}const d=e(n);return JSON.stringify(h)===JSON.stringify(d)?h:d})}const a=Db({callback(h){if(n)for(const p of h){const{type:d,target:m}=p;if(d==="childList"&&m instanceof HTMLElement&&m.contains(n)){l();break}}}}),c=Eu({callback:l});return rr(()=>{l(),n?(c==null||c.observe(n),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),a==null||a.disconnect())},[n]),r}function Tb(n){const e=Qy(n);return jy(n,e)}const jm=[];function Lb(n){const e=O.useRef(n),t=tl(r=>n?r&&r!==jm&&n&&e.current&&n.parentNode===e.current.parentNode?r:fd(n):jm,[n]);return O.useEffect(()=>{e.current=n},[n]),t}function Ib(n){const[e,t]=O.useState(null),r=O.useRef(n),s=O.useCallback(l=>{const a=Eh(l.target);a&&t(c=>c?(c.set(a,lf(a)),new Map(c)):null)},[]);return O.useEffect(()=>{const l=r.current;if(n!==l){a(l);const c=n.map(h=>{const p=Eh(h);return p?(p.addEventListener("scroll",s,{passive:!0}),[p,lf(p)]):null}).filter(h=>h!=null);t(c.length?new Map(c):null),r.current=n}return()=>{a(n),a(l)};function a(c){c.forEach(h=>{const p=Eh(h);p==null||p.removeEventListener("scroll",s)})}},[s,n]),O.useMemo(()=>n.length?e?Array.from(e.values()).reduce((l,a)=>fs(l,a),Bn):Hy(n):Bn,[n,e])}function Bm(n,e){e===void 0&&(e=[]);const t=O.useRef(null);return O.useEffect(()=>{t.current=null},e),O.useEffect(()=>{const r=n!==Bn;r&&!t.current&&(t.current=n),!r&&t.current&&(t.current=null)},[n]),t.current?su(n,t.current):Bn}function jb(n){O.useEffect(()=>{if(!Pu)return;const e=n.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t==null||t()}},n.map(e=>{let{sensor:t}=e;return t}))}function Bb(n,e){return O.useMemo(()=>n.reduce((t,r)=>{let{eventName:s,handler:l}=r;return t[s]=a=>{l(a,e)},t},{}),[n,e])}function $y(n){return O.useMemo(()=>n?lb(n):null,[n])}const zm=[];function zb(n,e){e===void 0&&(e=Ms);const[t]=n,r=$y(t?en(t):null),[s,l]=O.useState(zm);function a(){l(()=>n.length?n.map(h=>_y(h)?r:new dd(e(h),h)):zm)}const c=Eu({callback:a});return rr(()=>{c==null||c.disconnect(),a(),n.forEach(h=>c==null?void 0:c.observe(h))},[n]),s}function Fb(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return el(e)?e:n}function _b(n){let{measure:e}=n;const[t,r]=O.useState(null),s=O.useCallback(p=>{for(const{target:d}of p)if(el(d)){r(m=>{const v=e(d);return m?{...m,width:v.width,height:v.height}:v});break}},[e]),l=Eu({callback:s}),a=O.useCallback(p=>{const d=Fb(p);l==null||l.disconnect(),d&&(l==null||l.observe(d)),r(d?e(d):null)},[e,l]),[c,h]=iu(a);return O.useMemo(()=>({nodeRef:c,rect:t,setRef:h}),[t,c,h])}const Vb=[{sensor:md,options:{}},{sensor:pd,options:{}}],Hb={current:{}},$a={draggable:{measure:Am},droppable:{measure:Am,strategy:Vo.WhileDragging,frequency:uf.Optimized},dragOverlay:{measure:Ms}};class Ao extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const Wb={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Ao,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ou},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:$a,measureDroppableContainers:ou,windowRect:null,measuringScheduled:!1},Qb={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ou,draggableNodes:new Map,over:null,measureDroppableContainers:ou},Mu=O.createContext(Qb),Uy=O.createContext(Wb);function $b(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Ao}}}function Ub(n,e){switch(e.type){case dt.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case dt.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case dt.DragEnd:case dt.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case dt.RegisterDroppable:{const{element:t}=e,{id:r}=t,s=new Ao(n.droppable.containers);return s.set(r,t),{...n,droppable:{...n.droppable,containers:s}}}case dt.SetDroppableDisabled:{const{id:t,key:r,disabled:s}=e,l=n.droppable.containers.get(t);if(!l||r!==l.key)return n;const a=new Ao(n.droppable.containers);return a.set(t,{...l,disabled:s}),{...n,droppable:{...n.droppable,containers:a}}}case dt.UnregisterDroppable:{const{id:t,key:r}=e,s=n.droppable.containers.get(t);if(!s||r!==s.key)return n;const l=new Ao(n.droppable.containers);return l.delete(t),{...n,droppable:{...n.droppable,containers:l}}}default:return n}}function Xb(n){let{disabled:e}=n;const{active:t,activatorEvent:r,draggableNodes:s}=O.useContext(Mu),l=sf(r),a=sf(t==null?void 0:t.id);return O.useEffect(()=>{if(!e&&!r&&l&&a!=null){if(!hd(l)||document.activeElement===l.target)return;const c=s.get(a);if(!c)return;const{activatorNode:h,node:p}=c;if(!h.current&&!p.current)return;requestAnimationFrame(()=>{for(const d of[h.current,p.current]){if(!d)continue;const m=Bk(d);if(m){m.focus();break}}})}},[r,e,s,a,l]),null}function Kb(n,e){let{transform:t,...r}=e;return n!=null&&n.length?n.reduce((s,l)=>l({transform:s,...r}),t):t}function qb(n){return O.useMemo(()=>({draggable:{...$a.draggable,...n==null?void 0:n.draggable},droppable:{...$a.droppable,...n==null?void 0:n.droppable},dragOverlay:{...$a.dragOverlay,...n==null?void 0:n.dragOverlay}}),[n==null?void 0:n.draggable,n==null?void 0:n.droppable,n==null?void 0:n.dragOverlay])}function Yb(n){let{activeNode:e,measure:t,initialRect:r,config:s=!0}=n;const l=O.useRef(!1),{x:a,y:c}=typeof s=="boolean"?{x:s,y:s}:s;rr(()=>{if(!a&&!c||!e){l.current=!1;return}if(l.current||!r)return;const p=e==null?void 0:e.node.current;if(!p||p.isConnected===!1)return;const d=t(p),m=jy(d,r);if(a||(m.x=0),c||(m.y=0),l.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const v=By(p);v&&v.scrollBy({top:m.y,left:m.x})}},[e,a,c,r,t])}const Xy=O.createContext({...Bn,scaleX:1,scaleY:1});var Xr;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Xr||(Xr={}));const Gb=O.memo(function(e){var t,r,s,l;let{id:a,accessibility:c,autoScroll:h=!0,children:p,sensors:d=Vb,collisionDetection:m=eb,measuring:v,modifiers:x,...k}=e;const S=O.useReducer(Ub,void 0,$b),[C,E]=S,[A,N]=Wk(),[_,I]=O.useState(Xr.Uninitialized),F=_===Xr.Initialized,{draggable:{active:B,nodes:Q,translate:q},droppable:{containers:V}}=C,G=B!=null?Q.get(B):null,H=O.useRef({initial:null,translated:null}),J=O.useMemo(()=>{var Ke;return B!=null?{id:B,data:(Ke=G==null?void 0:G.data)!=null?Ke:Hb,rect:H}:null},[B,G]),se=O.useRef(null),[U,ae]=O.useState(null),[ce,X]=O.useState(null),ee=Fo(k,Object.values(k)),Z=nl("DndDescribedBy",a),M=O.useMemo(()=>V.getEnabled(),[V]),L=qb(v),{droppableRects:ie,measureDroppableContainers:pe,measuringScheduled:ye}=Rb(M,{dragging:F,dependencies:[q.x,q.y],config:L.droppable}),re=Eb(Q,B),he=O.useMemo(()=>ce?of(ce):null,[ce]),Se=Er(),Pe=Ab(re,L.draggable.measure);Yb({activeNode:B!=null?Q.get(B):null,config:Se.layoutShiftCompensation,initialRect:Pe,measure:L.draggable.measure});const ve=Im(re,L.draggable.measure,Pe),Ae=Im(re?re.parentElement:null),We=O.useRef({activatorEvent:null,active:null,activeNode:re,collisionRect:null,collisions:null,droppableRects:ie,draggableNodes:Q,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),ot=V.getNodeFor((t=We.current.over)==null?void 0:t.id),Je=_b({measure:L.dragOverlay.measure}),ct=(r=Je.nodeRef.current)!=null?r:re,Ee=F?(s=Je.rect)!=null?s:ve:null,de=!!(Je.nodeRef.current&&Je.rect),Ve=Tb(de?null:ve),tn=$y(ct?en(ct):null),ze=Lb(F?ot??re:null),Qt=zb(ze),On=Kb(x,{transform:{x:q.x-Ve.x,y:q.y-Ve.y,scaleX:1,scaleY:1},activatorEvent:ce,active:J,activeNodeRect:ve,containerNodeRect:Ae,draggingNodeRect:Ee,over:We.current.over,overlayNodeRect:Je.rect,scrollableAncestors:ze,scrollableAncestorRects:Qt,windowRect:tn}),or=he?fs(he,q):null,ui=Ib(ze),ci=Bm(ui),hl=Bm(ui,[ve]),Wn=fs(On,ci),Cn=Ee?rb(Ee,On):null,Cr=J&&Cn?m({active:J,collisionRect:Cn,droppableRects:ie,droppableContainers:M,pointerCoordinates:or}):null,Pr=Gk(Cr,"id"),[$t,fl]=O.useState(null),dl=de?On:fs(On,hl),pl=tb(dl,(l=$t==null?void 0:$t.rect)!=null?l:null,ve),Ds=O.useRef(null),ji=O.useCallback((Ke,Ct)=>{let{sensor:Pt,options:Pn}=Ct;if(se.current==null)return;const Bt=Q.get(se.current);if(!Bt)return;const Et=Ke.nativeEvent,Ut=new Pt({active:se.current,activeNode:Bt,event:Et,options:Pn,context:We,onAbort(qe){if(!Q.get(qe))return;const{onDragAbort:Mt}=ee.current,En={id:qe};Mt==null||Mt(En),A({type:"onDragAbort",event:En})},onPending(qe,fn,Mt,En){if(!Q.get(qe))return;const{onDragPending:Qn}=ee.current,nn={id:qe,constraint:fn,initialCoordinates:Mt,offset:En};Qn==null||Qn(nn),A({type:"onDragPending",event:nn})},onStart(qe){const fn=se.current;if(fn==null)return;const Mt=Q.get(fn);if(!Mt)return;const{onDragStart:En}=ee.current,Mn={activatorEvent:Et,active:{id:fn,data:Mt.data,rect:H}};bo.unstable_batchedUpdates(()=>{En==null||En(Mn),I(Xr.Initializing),E({type:dt.DragStart,initialCoordinates:qe,active:fn}),A({type:"onDragStart",event:Mn}),ae(Ds.current),X(Et)})},onMove(qe){E({type:dt.DragMove,coordinates:qe})},onEnd:lr(dt.DragEnd),onCancel:lr(dt.DragCancel)});Ds.current=Ut;function lr(qe){return async function(){const{active:Mt,collisions:En,over:Mn,scrollAdjustedTranslate:Qn}=We.current;let nn=null;if(Mt&&Qn){const{cancelDrop:ar}=ee.current;nn={activatorEvent:Et,active:Mt,collisions:En,delta:Qn,over:Mn},qe===dt.DragEnd&&typeof ar=="function"&&await Promise.resolve(ar(nn))&&(qe=dt.DragCancel)}se.current=null,bo.unstable_batchedUpdates(()=>{E({type:qe}),I(Xr.Uninitialized),fl(null),ae(null),X(null),Ds.current=null;const ar=qe===dt.DragEnd?"onDragEnd":"onDragCancel";if(nn){const Is=ee.current[ar];Is==null||Is(nn),A({type:ar,event:nn})}})}}},[Q]),Ns=O.useCallback((Ke,Ct)=>(Pt,Pn)=>{const Bt=Pt.nativeEvent,Et=Q.get(Pn);if(se.current!==null||!Et||Bt.dndKit||Bt.defaultPrevented)return;const Ut={active:Et};Ke(Pt,Ct.options,Ut)===!0&&(Bt.dndKit={capturedBy:Ct.sensor},se.current=Pn,ji(Pt,Ct))},[Q,ji]),Bi=Mb(d,Ns);jb(d),rr(()=>{ve&&_===Xr.Initializing&&I(Xr.Initialized)},[ve,_]),O.useEffect(()=>{const{onDragMove:Ke}=ee.current,{active:Ct,activatorEvent:Pt,collisions:Pn,over:Bt}=We.current;if(!Ct||!Pt)return;const Et={active:Ct,activatorEvent:Pt,collisions:Pn,delta:{x:Wn.x,y:Wn.y},over:Bt};bo.unstable_batchedUpdates(()=>{Ke==null||Ke(Et),A({type:"onDragMove",event:Et})})},[Wn.x,Wn.y]),O.useEffect(()=>{const{active:Ke,activatorEvent:Ct,collisions:Pt,droppableContainers:Pn,scrollAdjustedTranslate:Bt}=We.current;if(!Ke||se.current==null||!Ct||!Bt)return;const{onDragOver:Et}=ee.current,Ut=Pn.get(Pr),lr=Ut&&Ut.rect.current?{id:Ut.id,rect:Ut.rect.current,data:Ut.data,disabled:Ut.disabled}:null,qe={active:Ke,activatorEvent:Ct,collisions:Pt,delta:{x:Bt.x,y:Bt.y},over:lr};bo.unstable_batchedUpdates(()=>{fl(lr),Et==null||Et(qe),A({type:"onDragOver",event:qe})})},[Pr]),rr(()=>{We.current={activatorEvent:ce,active:J,activeNode:re,collisionRect:Cn,collisions:Cr,droppableRects:ie,draggableNodes:Q,draggingNode:ct,draggingNodeRect:Ee,droppableContainers:V,over:$t,scrollableAncestors:ze,scrollAdjustedTranslate:Wn},H.current={initial:Ee,translated:Cn}},[J,re,Cr,Cn,Q,ct,Ee,ie,V,$t,ze,Wn]),Ob({...Se,delta:q,draggingRect:Cn,pointerCoordinates:or,scrollableAncestors:ze,scrollableAncestorRects:Qt});const Ts=O.useMemo(()=>({active:J,activeNode:re,activeNodeRect:ve,activatorEvent:ce,collisions:Cr,containerNodeRect:Ae,dragOverlay:Je,draggableNodes:Q,droppableContainers:V,droppableRects:ie,over:$t,measureDroppableContainers:pe,scrollableAncestors:ze,scrollableAncestorRects:Qt,measuringConfiguration:L,measuringScheduled:ye,windowRect:tn}),[J,re,ve,ce,Cr,Ae,Je,Q,V,ie,$t,pe,ze,Qt,L,ye,tn]),Ls=O.useMemo(()=>({activatorEvent:ce,activators:Bi,active:J,activeNodeRect:ve,ariaDescribedById:{draggable:Z},dispatch:E,draggableNodes:Q,over:$t,measureDroppableContainers:pe}),[ce,Bi,J,ve,E,Z,Q,$t,pe]);return st.createElement(Iy.Provider,{value:N},st.createElement(Mu.Provider,{value:Ls},st.createElement(Uy.Provider,{value:Ts},st.createElement(Xy.Provider,{value:pl},p)),st.createElement(Xb,{disabled:(c==null?void 0:c.restoreFocus)===!1})),st.createElement(Uk,{...c,hiddenTextDescribedById:Z}));function Er(){const Ke=(U==null?void 0:U.autoScrollEnabled)===!1,Ct=typeof h=="object"?h.enabled===!1:h===!1,Pt=F&&!Ke&&!Ct;return typeof h=="object"?{...h,enabled:Pt}:{enabled:Pt}}}),Jb=O.createContext(null),Fm="button",Zb="Draggable";function eS(n){let{id:e,data:t,disabled:r=!1,attributes:s}=n;const l=nl(Zb),{activators:a,activatorEvent:c,active:h,activeNodeRect:p,ariaDescribedById:d,draggableNodes:m,over:v}=O.useContext(Mu),{role:x=Fm,roleDescription:k="draggable",tabIndex:S=0}=s??{},C=(h==null?void 0:h.id)===e,E=O.useContext(C?Xy:Jb),[A,N]=iu(),[_,I]=iu(),F=Bb(a,e),B=Fo(t);rr(()=>(m.set(e,{id:e,key:l,node:A,activatorNode:_,data:B}),()=>{const q=m.get(e);q&&q.key===l&&m.delete(e)}),[m,e]);const Q=O.useMemo(()=>({role:x,tabIndex:S,"aria-disabled":r,"aria-pressed":C&&x===Fm?!0:void 0,"aria-roledescription":k,"aria-describedby":d.draggable}),[r,x,S,C,k,d.draggable]);return{active:h,activatorEvent:c,activeNodeRect:p,attributes:Q,isDragging:C,listeners:r?void 0:F,node:A,over:v,setNodeRef:N,setActivatorNodeRef:I,transform:E}}function tS(){return O.useContext(Uy)}const nS="Droppable",rS={timeout:25};function iS(n){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:s}=n;const l=nl(nS),{active:a,dispatch:c,over:h,measureDroppableContainers:p}=O.useContext(Mu),d=O.useRef({disabled:t}),m=O.useRef(!1),v=O.useRef(null),x=O.useRef(null),{disabled:k,updateMeasurementsFor:S,timeout:C}={...rS,...s},E=Fo(S??r),A=O.useCallback(()=>{if(!m.current){m.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{p(Array.isArray(E.current)?E.current:[E.current]),x.current=null},C)},[C]),N=Eu({callback:A,disabled:k||!a}),_=O.useCallback((Q,q)=>{N&&(q&&(N.unobserve(q),m.current=!1),Q&&N.observe(Q))},[N]),[I,F]=iu(_),B=Fo(e);return O.useEffect(()=>{!N||!I.current||(N.disconnect(),m.current=!1,N.observe(I.current))},[I,N]),O.useEffect(()=>(c({type:dt.RegisterDroppable,element:{id:r,key:l,disabled:t,node:I,rect:v,data:B}}),()=>c({type:dt.UnregisterDroppable,key:l,id:r})),[r]),O.useEffect(()=>{t!==d.current.disabled&&(c({type:dt.SetDroppableDisabled,id:r,key:l,disabled:t}),d.current.disabled=t)},[r,l,t,c]),{active:a,rect:v,isOver:(h==null?void 0:h.id)===r,node:I,over:h,setNodeRef:F}}function Ky(n,e,t){const r=n.slice();return r.splice(t<0?r.length+t:t,0,r.splice(e,1)[0]),r}function sS(n,e){return n.reduce((t,r,s)=>{const l=e.get(r);return l&&(t[s]=l),t},Array(n.length))}function ka(n){return n!==null&&n>=0}function oS(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function lS(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const ba={scaleX:1,scaleY:1},aS=n=>{var e;let{rects:t,activeNodeRect:r,activeIndex:s,overIndex:l,index:a}=n;const c=(e=t[s])!=null?e:r;if(!c)return null;const h=uS(t,a,s);if(a===s){const p=t[l];return p?{x:s<l?p.left+p.width-(c.left+c.width):p.left-c.left,y:0,...ba}:null}return a>s&&a<=l?{x:-c.width-h,y:0,...ba}:a<s&&a>=l?{x:c.width+h,y:0,...ba}:{x:0,y:0,...ba}};function uS(n,e,t){const r=n[e],s=n[e-1],l=n[e+1];return!r||!s&&!l?0:t<e?s?r.left-(s.left+s.width):l.left-(r.left+r.width):l?l.left-(r.left+r.width):r.left-(s.left+s.width)}const qy=n=>{let{rects:e,activeIndex:t,overIndex:r,index:s}=n;const l=Ky(e,r,t),a=e[s],c=l[s];return!c||!a?null:{x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height}},Yy="Sortable",Gy=st.createContext({activeIndex:-1,containerId:Yy,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:qy,disabled:{draggable:!1,droppable:!1}});function cS(n){let{children:e,id:t,items:r,strategy:s=qy,disabled:l=!1}=n;const{active:a,dragOverlay:c,droppableRects:h,over:p,measureDroppableContainers:d}=tS(),m=nl(Yy,t),v=c.rect!==null,x=O.useMemo(()=>r.map(F=>typeof F=="object"&&"id"in F?F.id:F),[r]),k=a!=null,S=a?x.indexOf(a.id):-1,C=p?x.indexOf(p.id):-1,E=O.useRef(x),A=!oS(x,E.current),N=C!==-1&&S===-1||A,_=lS(l);rr(()=>{A&&k&&d(x)},[A,x,k,d]),O.useEffect(()=>{E.current=x},[x]);const I=O.useMemo(()=>({activeIndex:S,containerId:m,disabled:_,disableTransforms:N,items:x,overIndex:C,useDragOverlay:v,sortedRects:sS(x,h),strategy:s}),[S,m,_.draggable,_.droppable,N,x,C,h,v,s]);return st.createElement(Gy.Provider,{value:I},e)}const hS=n=>{let{id:e,items:t,activeIndex:r,overIndex:s}=n;return Ky(t,r,s).indexOf(e)},fS=n=>{let{containerId:e,isSorting:t,wasDragging:r,index:s,items:l,newIndex:a,previousItems:c,previousContainerId:h,transition:p}=n;return!p||!r||c!==l&&s===a?!1:t?!0:a!==s&&e===h},dS={duration:200,easing:"ease"},Jy="transform",pS=_o.Transition.toString({property:Jy,duration:0,easing:"linear"}),gS={roleDescription:"sortable"};function mS(n){let{disabled:e,index:t,node:r,rect:s}=n;const[l,a]=O.useState(null),c=O.useRef(t);return rr(()=>{if(!e&&t!==c.current&&r.current){const h=s.current;if(h){const p=Ms(r.current,{ignoreTransform:!0}),d={x:h.left-p.left,y:h.top-p.top,scaleX:h.width/p.width,scaleY:h.height/p.height};(d.x||d.y)&&a(d)}}t!==c.current&&(c.current=t)},[e,t,r,s]),O.useEffect(()=>{l&&a(null)},[l]),l}function yS(n){let{animateLayoutChanges:e=fS,attributes:t,disabled:r,data:s,getNewIndex:l=hS,id:a,strategy:c,resizeObserverConfig:h,transition:p=dS}=n;const{items:d,containerId:m,activeIndex:v,disabled:x,disableTransforms:k,sortedRects:S,overIndex:C,useDragOverlay:E,strategy:A}=O.useContext(Gy),N=vS(r,x),_=d.indexOf(a),I=O.useMemo(()=>({sortable:{containerId:m,index:_,items:d},...s}),[m,s,_,d]),F=O.useMemo(()=>d.slice(d.indexOf(a)),[d,a]),{rect:B,node:Q,isOver:q,setNodeRef:V}=iS({id:a,data:I,disabled:N.droppable,resizeObserverConfig:{updateMeasurementsFor:F,...h}}),{active:G,activatorEvent:H,activeNodeRect:J,attributes:se,setNodeRef:U,listeners:ae,isDragging:ce,over:X,setActivatorNodeRef:ee,transform:Z}=eS({id:a,data:I,attributes:{...gS,...t},disabled:N.draggable}),M=Tk(V,U),L=!!G,ie=L&&!k&&ka(v)&&ka(C),pe=!E&&ce,ye=pe&&ie?Z:null,he=ie?ye??(c??A)({rects:S,activeNodeRect:J,activeIndex:v,overIndex:C,index:_}):null,Se=ka(v)&&ka(C)?l({id:a,items:d,activeIndex:v,overIndex:C}):_,Pe=G==null?void 0:G.id,ve=O.useRef({activeId:Pe,items:d,newIndex:Se,containerId:m}),Ae=d!==ve.current.items,We=e({active:G,containerId:m,isDragging:ce,isSorting:L,id:a,index:_,items:d,newIndex:ve.current.newIndex,previousItems:ve.current.items,previousContainerId:ve.current.containerId,transition:p,wasDragging:ve.current.activeId!=null}),ot=mS({disabled:!We,index:_,node:Q,rect:B});return O.useEffect(()=>{L&&ve.current.newIndex!==Se&&(ve.current.newIndex=Se),m!==ve.current.containerId&&(ve.current.containerId=m),d!==ve.current.items&&(ve.current.items=d)},[L,Se,m,d]),O.useEffect(()=>{if(Pe===ve.current.activeId)return;if(Pe!=null&&ve.current.activeId==null){ve.current.activeId=Pe;return}const ct=setTimeout(()=>{ve.current.activeId=Pe},50);return()=>clearTimeout(ct)},[Pe]),{active:G,activeIndex:v,attributes:se,data:I,rect:B,index:_,newIndex:Se,items:d,isOver:q,isSorting:L,isDragging:ce,listeners:ae,node:Q,overIndex:C,over:X,setNodeRef:M,setActivatorNodeRef:ee,setDroppableNodeRef:V,setDraggableNodeRef:U,transform:ot??he,transition:Je()};function Je(){if(ot||Ae&&ve.current.newIndex===_)return pS;if(!(pe&&!hd(H)||!p)&&(L||We))return _o.Transition.toString({...p,property:Jy})}}function vS(n,e){var t,r;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n==null?void 0:n.draggable)!=null?t:e.draggable,droppable:(r=n==null?void 0:n.droppable)!=null?r:e.droppable}}Le.Down,Le.Right,Le.Up,Le.Left;function _m(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function xS(n){if(Array.isArray(n))return n}function wS(n,e,t){return(e=ES(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function kS(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,l,a,c=[],h=!0,p=!1;try{if(l=(t=t.call(n)).next,e!==0)for(;!(h=(r=l.call(t)).done)&&(c.push(r.value),c.length!==e);h=!0);}catch(d){p=!0,s=d}finally{try{if(!h&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(p)throw s}}return c}}function bS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Hm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Vm(Object(t),!0).forEach(function(r){wS(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Vm(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function SS(n,e){if(n==null)return{};var t,r,s=OS(n,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(r=0;r<l.length;r++)t=l[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}function OS(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function CS(n,e){return xS(n)||kS(n,e)||MS(n,e)||bS()}function PS(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function ES(n){var e=PS(n,"string");return typeof e=="symbol"?e:e+""}function MS(n,e){if(n){if(typeof n=="string")return _m(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_m(n,e):void 0}}function RS(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Qm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wm(Object(t),!0).forEach(function(r){RS(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wm(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function AS(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){return e.reduceRight(function(s,l){return l(s)},r)}}function So(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return s.length>=n.length?n.apply(this,s):function(){for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];return e.apply(t,[].concat(s,c))}}}function au(n){return{}.toString.call(n).includes("Object")}function DS(n){return!Object.keys(n).length}function Ho(n){return typeof n=="function"}function NS(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function TS(n,e){return au(e)||ni("changeType"),Object.keys(e).some(function(t){return!NS(n,t)})&&ni("changeField"),e}function LS(n){Ho(n)||ni("selectorType")}function IS(n){Ho(n)||au(n)||ni("handlerType"),au(n)&&Object.values(n).some(function(e){return!Ho(e)})&&ni("handlersType")}function jS(n){n||ni("initialIsRequired"),au(n)||ni("initialType"),DS(n)&&ni("initialContent")}function BS(n,e){throw new Error(n[e]||n.default)}var zS={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},ni=So(BS)(zS),Sa={changes:TS,selector:LS,handler:IS,initial:jS};function FS(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Sa.initial(n),Sa.handler(e);var t={current:n},r=So(HS)(t,e),s=So(VS)(t),l=So(Sa.changes)(n),a=So(_S)(t);function c(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(d){return d};return Sa.selector(p),p(t.current)}function h(p){AS(r,s,l,a)(p)}return[c,h]}function _S(n,e){return Ho(e)?e(n.current):e}function VS(n,e){return n.current=Qm(Qm({},n.current),e),e}function HS(n,e,t){return Ho(e)?e(n.current):Object.keys(t).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,n.current[r])}),t}var WS={create:FS},QS={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function $S(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return s.length>=n.length?n.apply(this,s):function(){for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];return e.apply(t,[].concat(s,c))}}}function US(n){return{}.toString.call(n).includes("Object")}function XS(n){return n||$m("configIsRequired"),US(n)||$m("configType"),n.urls?(KS(),{paths:{vs:n.urls.monacoBase}}):n}function KS(){console.warn(Zy.deprecation)}function qS(n,e){throw new Error(n[e]||n.default)}var Zy={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},$m=$S(qS)(Zy),YS={config:XS},GS=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return t.reduceRight(function(l,a){return a(l)},s)}};function ev(n,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&n[t]&&Object.assign(e[t],ev(n[t],e[t]))}),Hm(Hm({},n),e)}var JS={type:"cancelation",msg:"operation is manually canceled"};function Ah(n){var e=!1,t=new Promise(function(r,s){n.then(function(l){return e?s(JS):r(l)}),n.catch(s)});return t.cancel=function(){return e=!0},t}var ZS=["monaco"],eO=WS.create({config:QS,isInitialized:!1,resolve:null,reject:null,monaco:null}),tv=CS(eO,2),rl=tv[0],Ru=tv[1];function tO(n){var e=YS.config(n),t=e.monaco,r=SS(e,ZS);Ru(function(s){return{config:ev(s.config,r),monaco:t}})}function nO(){var n=rl(function(e){var t=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:t,isInitialized:r,resolve:s}});if(!n.isInitialized){if(Ru({isInitialized:!0}),n.monaco)return n.resolve(n.monaco),Ah(Dh);if(window.monaco&&window.monaco.editor)return nv(window.monaco),n.resolve(window.monaco),Ah(Dh);GS(rO,sO)(oO)}return Ah(Dh)}function rO(n){return document.body.appendChild(n)}function iO(n){var e=document.createElement("script");return n&&(e.src=n),e}function sO(n){var e=rl(function(r){var s=r.config,l=r.reject;return{config:s,reject:l}}),t=iO("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return n()},t.onerror=e.reject,t}function oO(){var n=rl(function(t){var r=t.config,s=t.resolve,l=t.reject;return{config:r,resolve:s,reject:l}}),e=window.require;e.config(n.config),e(["vs/editor/editor.main"],function(t){var r=t.m||t;nv(r),n.resolve(r)},function(t){n.reject(t)})}function nv(n){rl().monaco||Ru({monaco:n})}function lO(){return rl(function(n){var e=n.monaco;return e})}var Dh=new Promise(function(n,e){return Ru({resolve:n,reject:e})}),rv={config:tO,init:nO,__getMonacoInstance:lO},aO={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Nh=aO,uO={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},cO=uO;function hO({children:n}){return st.createElement("div",{style:cO.container},n)}var fO=hO,dO=fO;function pO({width:n,height:e,isEditorReady:t,loading:r,_ref:s,className:l,wrapperProps:a}){return st.createElement("section",{style:{...Nh.wrapper,width:n,height:e},...a},!t&&st.createElement(dO,null,r),st.createElement("div",{ref:s,style:{...Nh.fullWidth,...!t&&Nh.hide},className:l}))}var gO=pO,iv=O.memo(gO);function mO(n){O.useEffect(n,[])}var sv=mO;function yO(n,e,t=!0){let r=O.useRef(!0);O.useEffect(r.current||!t?()=>{r.current=!1}:n,e)}var cn=yO;function Do(){}function ls(n,e,t,r){return vO(n,r)||xO(n,e,t,r)}function vO(n,e){return n.editor.getModel(ov(n,e))}function xO(n,e,t,r){return n.editor.createModel(e,t,r?ov(n,r):void 0)}function ov(n,e){return n.Uri.parse(e)}function wO({original:n,modified:e,language:t,originalLanguage:r,modifiedLanguage:s,originalModelPath:l,modifiedModelPath:a,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:h=!1,theme:p="light",loading:d="Loading...",options:m={},height:v="100%",width:x="100%",className:k,wrapperProps:S={},beforeMount:C=Do,onMount:E=Do}){let[A,N]=O.useState(!1),[_,I]=O.useState(!0),F=O.useRef(null),B=O.useRef(null),Q=O.useRef(null),q=O.useRef(E),V=O.useRef(C),G=O.useRef(!1);sv(()=>{let U=rv.init();return U.then(ae=>(B.current=ae)&&I(!1)).catch(ae=>(ae==null?void 0:ae.type)!=="cancelation"&&console.error("Monaco initialization: error:",ae)),()=>F.current?se():U.cancel()}),cn(()=>{if(F.current&&B.current){let U=F.current.getOriginalEditor(),ae=ls(B.current,n||"",r||t||"text",l||"");ae!==U.getModel()&&U.setModel(ae)}},[l],A),cn(()=>{if(F.current&&B.current){let U=F.current.getModifiedEditor(),ae=ls(B.current,e||"",s||t||"text",a||"");ae!==U.getModel()&&U.setModel(ae)}},[a],A),cn(()=>{let U=F.current.getModifiedEditor();U.getOption(B.current.editor.EditorOption.readOnly)?U.setValue(e||""):e!==U.getValue()&&(U.executeEdits("",[{range:U.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),U.pushUndoStop())},[e],A),cn(()=>{var U,ae;(ae=(U=F.current)==null?void 0:U.getModel())==null||ae.original.setValue(n||"")},[n],A),cn(()=>{let{original:U,modified:ae}=F.current.getModel();B.current.editor.setModelLanguage(U,r||t||"text"),B.current.editor.setModelLanguage(ae,s||t||"text")},[t,r,s],A),cn(()=>{var U;(U=B.current)==null||U.editor.setTheme(p)},[p],A),cn(()=>{var U;(U=F.current)==null||U.updateOptions(m)},[m],A);let H=O.useCallback(()=>{var ce;if(!B.current)return;V.current(B.current);let U=ls(B.current,n||"",r||t||"text",l||""),ae=ls(B.current,e||"",s||t||"text",a||"");(ce=F.current)==null||ce.setModel({original:U,modified:ae})},[t,e,s,n,r,l,a]),J=O.useCallback(()=>{var U;!G.current&&Q.current&&(F.current=B.current.editor.createDiffEditor(Q.current,{automaticLayout:!0,...m}),H(),(U=B.current)==null||U.editor.setTheme(p),N(!0),G.current=!0)},[m,p,H]);O.useEffect(()=>{A&&q.current(F.current,B.current)},[A]),O.useEffect(()=>{!_&&!A&&J()},[_,A,J]);function se(){var ae,ce,X,ee;let U=(ae=F.current)==null?void 0:ae.getModel();c||((ce=U==null?void 0:U.original)==null||ce.dispose()),h||((X=U==null?void 0:U.modified)==null||X.dispose()),(ee=F.current)==null||ee.dispose()}return st.createElement(iv,{width:x,height:v,isEditorReady:A,loading:d,_ref:Q,className:k,wrapperProps:S})}var kO=wO;O.memo(kO);function bO(n){let e=O.useRef();return O.useEffect(()=>{e.current=n},[n]),e.current}var SO=bO,Oa=new Map;function OO({defaultValue:n,defaultLanguage:e,defaultPath:t,value:r,language:s,path:l,theme:a="light",line:c,loading:h="Loading...",options:p={},overrideServices:d={},saveViewState:m=!0,keepCurrentModel:v=!1,width:x="100%",height:k="100%",className:S,wrapperProps:C={},beforeMount:E=Do,onMount:A=Do,onChange:N,onValidate:_=Do}){let[I,F]=O.useState(!1),[B,Q]=O.useState(!0),q=O.useRef(null),V=O.useRef(null),G=O.useRef(null),H=O.useRef(A),J=O.useRef(E),se=O.useRef(),U=O.useRef(r),ae=SO(l),ce=O.useRef(!1),X=O.useRef(!1);sv(()=>{let M=rv.init();return M.then(L=>(q.current=L)&&Q(!1)).catch(L=>(L==null?void 0:L.type)!=="cancelation"&&console.error("Monaco initialization: error:",L)),()=>V.current?Z():M.cancel()}),cn(()=>{var L,ie,pe,ye;let M=ls(q.current,n||r||"",e||s||"",l||t||"");M!==((L=V.current)==null?void 0:L.getModel())&&(m&&Oa.set(ae,(ie=V.current)==null?void 0:ie.saveViewState()),(pe=V.current)==null||pe.setModel(M),m&&((ye=V.current)==null||ye.restoreViewState(Oa.get(l))))},[l],I),cn(()=>{var M;(M=V.current)==null||M.updateOptions(p)},[p],I),cn(()=>{!V.current||r===void 0||(V.current.getOption(q.current.editor.EditorOption.readOnly)?V.current.setValue(r):r!==V.current.getValue()&&(X.current=!0,V.current.executeEdits("",[{range:V.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),V.current.pushUndoStop(),X.current=!1))},[r],I),cn(()=>{var L,ie;let M=(L=V.current)==null?void 0:L.getModel();M&&s&&((ie=q.current)==null||ie.editor.setModelLanguage(M,s))},[s],I),cn(()=>{var M;c!==void 0&&((M=V.current)==null||M.revealLine(c))},[c],I),cn(()=>{var M;(M=q.current)==null||M.editor.setTheme(a)},[a],I);let ee=O.useCallback(()=>{var M;if(!(!G.current||!q.current)&&!ce.current){J.current(q.current);let L=l||t,ie=ls(q.current,r||n||"",e||s||"",L||"");V.current=(M=q.current)==null?void 0:M.editor.create(G.current,{model:ie,automaticLayout:!0,...p},d),m&&V.current.restoreViewState(Oa.get(L)),q.current.editor.setTheme(a),c!==void 0&&V.current.revealLine(c),F(!0),ce.current=!0}},[n,e,t,r,s,l,p,d,m,a,c]);O.useEffect(()=>{I&&H.current(V.current,q.current)},[I]),O.useEffect(()=>{!B&&!I&&ee()},[B,I,ee]),U.current=r,O.useEffect(()=>{var M,L;I&&N&&((M=se.current)==null||M.dispose(),se.current=(L=V.current)==null?void 0:L.onDidChangeModelContent(ie=>{X.current||N(V.current.getValue(),ie)}))},[I,N]),O.useEffect(()=>{if(I){let M=q.current.editor.onDidChangeMarkers(L=>{var pe;let ie=(pe=V.current.getModel())==null?void 0:pe.uri;if(ie&&L.find(ye=>ye.path===ie.path)){let ye=q.current.editor.getModelMarkers({resource:ie});_==null||_(ye)}});return()=>{M==null||M.dispose()}}return()=>{}},[I,_]);function Z(){var M,L;(M=se.current)==null||M.dispose(),v?m&&Oa.set(l,V.current.saveViewState()):(L=V.current.getModel())==null||L.dispose(),V.current.dispose()}return st.createElement(iv,{width:x,height:k,isEditorReady:I,loading:h,_ref:G,className:S,wrapperProps:C})}var CO=OO,PO=O.memo(CO),EO=PO;let cf=[],lv=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?lv:cf).push(t=t+n[e])})();function MO(n){if(n<768)return!1;for(let e=0,t=cf.length;;){let r=e+t>>1;if(n<cf[r])t=r;else if(n>=lv[r])e=r+1;else return!0;if(e==t)return!1}}function Um(n){return n>=127462&&n<=127487}const Xm=8205;function RO(n,e,t=!0,r=!0){return(t?av:AO)(n,e,r)}function av(n,e,t){if(e==n.length)return e;e&&uv(n.charCodeAt(e))&&cv(n.charCodeAt(e-1))&&e--;let r=Th(n,e);for(e+=Km(r);e<n.length;){let s=Th(n,e);if(r==Xm||s==Xm||t&&MO(s))e+=Km(s),r=s;else if(Um(s)){let l=0,a=e-2;for(;a>=0&&Um(Th(n,a));)l++,a-=2;if(l%2==0)break;e+=2}else break}return e}function AO(n,e,t){for(;e>0;){let r=av(n,e-2,t);if(r<e)return r;e--}return 0}function Th(n,e){let t=n.charCodeAt(e);if(!cv(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return uv(r)?(t-55296<<10)+(r-56320)+65536:t}function uv(n){return n>=56320&&n<57344}function cv(n){return n>=55296&&n<56320}function Km(n){return n<65536?1:2}class Ne{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=ys(this,e,t);let s=[];return this.decompose(0,e,s,2),r.length&&r.decompose(0,r.length,s,3),this.decompose(t,this.length,s,1),er.from(s,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=ys(this,e,t);let r=[];return this.decompose(e,t,r,0),er.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),s=new No(this),l=new No(e);for(let a=t,c=t;;){if(s.next(a),l.next(a),a=0,s.lineBreak!=l.lineBreak||s.done!=l.done||s.value!=l.value)return!1;if(c+=s.value.length,s.done||c>=r)return!0}}iter(e=1){return new No(this,e)}iterRange(e,t=this.length){return new hv(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;r=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new fv(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ne.empty:e.length<=32?new it(e):er.from(it.split(e,[]))}}class it extends Ne{constructor(e,t=DO(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,s){for(let l=0;;l++){let a=this.text[l],c=s+a.length;if((t?r:c)>=e)return new NO(s,c,r,a);s=c+1,r++}}decompose(e,t,r,s){let l=e<=0&&t>=this.length?this:new it(qm(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let a=r.pop(),c=Ua(l.text,a.text.slice(),0,l.length);if(c.length<=32)r.push(new it(c,a.length+l.length));else{let h=c.length>>1;r.push(new it(c.slice(0,h)),new it(c.slice(h)))}}else r.push(l)}replace(e,t,r){if(!(r instanceof it))return super.replace(e,t,r);[e,t]=ys(this,e,t);let s=Ua(this.text,Ua(r.text,qm(this.text,0,e)),t),l=this.length+r.length-(t-e);return s.length<=32?new it(s,l):er.from(it.split(s,[]),l)}sliceString(e,t=this.length,r=`
`){[e,t]=ys(this,e,t);let s="";for(let l=0,a=0;l<=t&&a<this.text.length;a++){let c=this.text[a],h=l+c.length;l>e&&a&&(s+=r),e<h&&t>l&&(s+=c.slice(Math.max(0,e-l),t-l)),l=h+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],s=-1;for(let l of e)r.push(l),s+=l.length+1,r.length==32&&(t.push(new it(r,s)),r=[],s=-1);return s>-1&&t.push(new it(r,s)),t}}class er extends Ne{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,s){for(let l=0;;l++){let a=this.children[l],c=s+a.length,h=r+a.lines-1;if((t?h:c)>=e)return a.lineInner(e,t,r,s);s=c+1,r=h+1}}decompose(e,t,r,s){for(let l=0,a=0;a<=t&&l<this.children.length;l++){let c=this.children[l],h=a+c.length;if(e<=h&&t>=a){let p=s&((a<=e?1:0)|(h>=t?2:0));a>=e&&h<=t&&!p?r.push(c):c.decompose(e-a,t-a,r,p)}a=h+1}}replace(e,t,r){if([e,t]=ys(this,e,t),r.lines<this.lines)for(let s=0,l=0;s<this.children.length;s++){let a=this.children[s],c=l+a.length;if(e>=l&&t<=c){let h=a.replace(e-l,t-l,r),p=this.lines-a.lines+h.lines;if(h.lines<p>>4&&h.lines>p>>6){let d=this.children.slice();return d[s]=h,new er(d,this.length-(t-e)+r.length)}return super.replace(l,c,h)}l=c+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=ys(this,e,t);let s="";for(let l=0,a=0;l<this.children.length&&a<=t;l++){let c=this.children[l],h=a+c.length;a>e&&l&&(s+=r),e<h&&t>a&&(s+=c.sliceString(e-a,t-a,r)),a=h+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof er))return 0;let r=0,[s,l,a,c]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,l+=t){if(s==a||l==c)return r;let h=this.children[s],p=e.children[l];if(h!=p)return r+h.scanIdentical(p,t);r+=h.length+1}}static from(e,t=e.reduce((r,s)=>r+s.length+1,-1)){let r=0;for(let x of e)r+=x.lines;if(r<32){let x=[];for(let k of e)k.flatten(x);return new it(x,t)}let s=Math.max(32,r>>5),l=s<<1,a=s>>1,c=[],h=0,p=-1,d=[];function m(x){let k;if(x.lines>l&&x instanceof er)for(let S of x.children)m(S);else x.lines>a&&(h>a||!h)?(v(),c.push(x)):x instanceof it&&h&&(k=d[d.length-1])instanceof it&&x.lines+k.lines<=32?(h+=x.lines,p+=x.length+1,d[d.length-1]=new it(k.text.concat(x.text),k.length+1+x.length)):(h+x.lines>s&&v(),h+=x.lines,p+=x.length+1,d.push(x))}function v(){h!=0&&(c.push(d.length==1?d[0]:er.from(d,p)),p=-1,h=d.length=0)}for(let x of e)m(x);return v(),c.length==1?c[0]:new er(c,t)}}Ne.empty=new it([""],0);function DO(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Ua(n,e,t=0,r=1e9){for(let s=0,l=0,a=!0;l<n.length&&s<=r;l++){let c=n[l],h=s+c.length;h>=t&&(h>r&&(c=c.slice(0,r-s)),s<t&&(c=c.slice(t-s)),a?(e[e.length-1]+=c,a=!1):e.push(c)),s=h+1}return e}function qm(n,e,t){return Ua(n,[""],e,t)}class No{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof it?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,s=this.nodes[r],l=this.offsets[r],a=l>>1,c=s instanceof it?s.text.length:s.children.length;if(a==(t>0?c:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof it){let h=s.text[a+(t<0?-1:0)];if(this.offsets[r]+=t,h.length>Math.max(0,e))return this.value=e==0?h:t>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=s.children[a+(t<0?-1:0)];e>h.length?(e-=h.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(h),this.offsets.push(t>0?1:(h instanceof it?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class hv{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new No(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=r?s:t<0?s.slice(s.length-r):s.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class fv{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ne.prototype[Symbol.iterator]=function(){return this.iter()},No.prototype[Symbol.iterator]=hv.prototype[Symbol.iterator]=fv.prototype[Symbol.iterator]=function(){return this});class NO{constructor(e,t,r,s){this.from=e,this.to=t,this.number=r,this.text=s}get length(){return this.to-this.from}}function ys(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function Vt(n,e,t=!0,r=!0){return RO(n,e,t,r)}function TO(n){return n>=56320&&n<57344}function LO(n){return n>=55296&&n<56320}function IO(n,e){let t=n.charCodeAt(e);if(!LO(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return TO(r)?(t-55296<<10)+(r-56320)+65536:t}function jO(n){return n<65536?1:2}const hf=/\r\n?|\n/;var hn=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(hn||(hn={}));class kr{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,s=0;t<this.sections.length;){let l=this.sections[t++],a=this.sections[t++];a<0?(e(r,s,l),s+=l):s+=a,r+=l}}iterChangedRanges(e,t=!1){ff(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];s<0?e.push(r,s):e.push(s,r)}return new kr(e)}composeDesc(e){return this.empty?e:e.empty?this:dv(this,e)}mapDesc(e,t=!1){return e.empty?this:df(this,e,t)}mapPos(e,t=-1,r=hn.Simple){let s=0,l=0;for(let a=0;a<this.sections.length;){let c=this.sections[a++],h=this.sections[a++],p=s+c;if(h<0){if(p>e)return l+(e-s);l+=c}else{if(r!=hn.Simple&&p>=e&&(r==hn.TrackDel&&s<e&&p>e||r==hn.TrackBefore&&s<e||r==hn.TrackAfter&&p>e))return null;if(p>e||p==e&&t<0&&!c)return e==s||t<0?l:l+h;l+=h}s=p}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return l}touchesRange(e,t=e){for(let r=0,s=0;r<this.sections.length&&s<=t;){let l=this.sections[r++],a=this.sections[r++],c=s+l;if(a>=0&&s<=t&&c>=e)return s<e&&c>t?"cover":!0;s=c}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+r+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new kr(e)}static create(e){return new kr(e)}}class xt extends kr{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return ff(this,(t,r,s,l,a)=>e=e.replace(s,s+(r-t),a),!1),e}mapDesc(e,t=!1){return df(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let s=0,l=0;s<t.length;s+=2){let a=t[s],c=t[s+1];if(c>=0){t[s]=c,t[s+1]=a;let h=s>>1;for(;r.length<h;)r.push(Ne.empty);r.push(a?e.slice(l,l+a):Ne.empty)}l+=a}return new xt(t,r)}compose(e){return this.empty?e:e.empty?this:dv(this,e,!0)}map(e,t=!1){return e.empty?this:df(this,e,t,!0)}iterChanges(e,t=!1){ff(this,e,t)}get desc(){return kr.create(this.sections)}filter(e){let t=[],r=[],s=[],l=new Wo(this);e:for(let a=0,c=0;;){let h=a==e.length?1e9:e[a++];for(;c<h||c==h&&l.len==0;){if(l.done)break e;let d=Math.min(l.len,h-c);Tt(s,d,-1);let m=l.ins==-1?-1:l.off==0?l.ins:0;Tt(t,d,m),m>0&&Gr(r,t,l.text),l.forward(d),c+=d}let p=e[a++];for(;c<p;){if(l.done)break e;let d=Math.min(l.len,p-c);Tt(t,d,-1),Tt(s,d,l.ins==-1?-1:l.off==0?l.ins:0),l.forward(d),c+=d}}return{changes:new xt(t,r),filtered:kr.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],s=this.sections[t+1];s<0?e.push(r):s==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let s=[],l=[],a=0,c=null;function h(d=!1){if(!d&&!s.length)return;a<t&&Tt(s,t-a,-1);let m=new xt(s,l);c=c?c.compose(m.map(c)):m,s=[],l=[],a=0}function p(d){if(Array.isArray(d))for(let m of d)p(m);else if(d instanceof xt){if(d.length!=t)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${t})`);h(),c=c?c.compose(d.map(c)):d}else{let{from:m,to:v=m,insert:x}=d;if(m>v||m<0||v>t)throw new RangeError(`Invalid change range ${m} to ${v} (in doc of length ${t})`);let k=x?typeof x=="string"?Ne.of(x.split(r||hf)):x:Ne.empty,S=k.length;if(m==v&&S==0)return;m<a&&h(),m>a&&Tt(s,m-a,-1),Tt(s,v-m,S),Gr(l,s,k),a=v}}return p(e),h(!c),c}static empty(e){return new xt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")t.push(l,-1);else{if(!Array.isArray(l)||typeof l[0]!="number"||l.some((a,c)=>c&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(l.length==1)t.push(l[0],0);else{for(;r.length<s;)r.push(Ne.empty);r[s]=Ne.of(l.slice(1)),t.push(l[0],r[s].length)}}}return new xt(t,r)}static createSet(e,t){return new xt(e,t)}}function Tt(n,e,t,r=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:s>=0&&e==0&&n[s]==0?n[s+1]+=t:r?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function Gr(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Ne.empty);n.push(t)}}function ff(n,e,t){let r=n.inserted;for(let s=0,l=0,a=0;a<n.sections.length;){let c=n.sections[a++],h=n.sections[a++];if(h<0)s+=c,l+=c;else{let p=s,d=l,m=Ne.empty;for(;p+=c,d+=h,h&&r&&(m=m.append(r[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)c=n.sections[a++],h=n.sections[a++];e(s,p,l,d,m),s=p,l=d}}}function df(n,e,t,r=!1){let s=[],l=r?[]:null,a=new Wo(n),c=new Wo(e);for(let h=-1;;){if(a.done&&c.len||c.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&c.ins==-1){let p=Math.min(a.len,c.len);Tt(s,p,-1),a.forward(p),c.forward(p)}else if(c.ins>=0&&(a.ins<0||h==a.i||a.off==0&&(c.len<a.len||c.len==a.len&&!t))){let p=c.len;for(Tt(s,c.ins,-1);p;){let d=Math.min(a.len,p);a.ins>=0&&h<a.i&&a.len<=d&&(Tt(s,0,a.ins),l&&Gr(l,s,a.text),h=a.i),a.forward(d),p-=d}c.next()}else if(a.ins>=0){let p=0,d=a.len;for(;d;)if(c.ins==-1){let m=Math.min(d,c.len);p+=m,d-=m,c.forward(m)}else if(c.ins==0&&c.len<d)d-=c.len,c.next();else break;Tt(s,p,h<a.i?a.ins:0),l&&h<a.i&&Gr(l,s,a.text),h=a.i,a.forward(a.len-d)}else{if(a.done&&c.done)return l?xt.createSet(s,l):kr.create(s);throw new Error("Mismatched change set lengths")}}}function dv(n,e,t=!1){let r=[],s=t?[]:null,l=new Wo(n),a=new Wo(e);for(let c=!1;;){if(l.done&&a.done)return s?xt.createSet(r,s):kr.create(r);if(l.ins==0)Tt(r,l.len,0,c),l.next();else if(a.len==0&&!a.done)Tt(r,0,a.ins,c),s&&Gr(s,r,a.text),a.next();else{if(l.done||a.done)throw new Error("Mismatched change set lengths");{let h=Math.min(l.len2,a.len),p=r.length;if(l.ins==-1){let d=a.ins==-1?-1:a.off?0:a.ins;Tt(r,h,d,c),s&&d&&Gr(s,r,a.text)}else a.ins==-1?(Tt(r,l.off?0:l.len,h,c),s&&Gr(s,r,l.textBit(h))):(Tt(r,l.off?0:l.len,a.off?0:a.ins,c),s&&!a.off&&Gr(s,r,a.text));c=(l.ins>h||a.ins>=0&&a.len>h)&&(c||r.length>p),l.forward2(h),a.forward(h)}}}}class Wo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ne.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Ne.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Mi{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,s;return this.empty?r=s=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),r==this.from&&s==this.to?this:new Mi(r,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ne.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ne.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ne.range(e.anchor,e.head)}static create(e,t,r){return new Mi(e,t,r)}}class ne{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ne.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ne([this.main],0)}addRange(e,t=!0){return ne.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,ne.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ne(e.ranges.map(t=>Mi.fromJSON(t)),e.main)}static single(e,t=e){return new ne([ne.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,s=0;s<e.length;s++){let l=e[s];if(l.empty?l.from<=r:l.from<r)return ne.normalized(e.slice(),t);r=l.to}return new ne(e,t)}static cursor(e,t=0,r,s){return Mi.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(s??16777215)<<6)}static range(e,t,r,s){let l=(r??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?Mi.create(t,e,48|l):Mi.create(e,t,(t>e?8:0)|l)}static normalized(e,t=0){let r=e[t];e.sort((s,l)=>s.from-l.from),t=e.indexOf(r);for(let s=1;s<e.length;s++){let l=e[s],a=e[s-1];if(l.empty?l.from<=a.to:l.from<a.to){let c=a.from,h=Math.max(l.to,a.to);s<=t&&t--,e.splice(--s,2,l.anchor>l.head?ne.range(h,c):ne.range(c,h))}}return new ne(e,t)}}function pv(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let yd=0;class we{constructor(e,t,r,s,l){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=s,this.id=yd++,this.default=e([]),this.extensions=typeof l=="function"?l(this):l}get reader(){return this}static define(e={}){return new we(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:vd),!!e.static,e.enables)}of(e){return new Xa([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Xa(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Xa(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function vd(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class Xa{constructor(e,t,r,s){this.dependencies=e,this.facet=t,this.type=r,this.value=s,this.id=yd++}dynamicSlot(e){var t;let r=this.value,s=this.facet.compareInput,l=this.id,a=e[l]>>1,c=this.type==2,h=!1,p=!1,d=[];for(let m of this.dependencies)m=="doc"?h=!0:m=="selection"?p=!0:(((t=e[m.id])!==null&&t!==void 0?t:1)&1)==0&&d.push(e[m.id]);return{create(m){return m.values[a]=r(m),1},update(m,v){if(h&&v.docChanged||p&&(v.docChanged||v.selection)||pf(m,d)){let x=r(m);if(c?!Ym(x,m.values[a],s):!s(x,m.values[a]))return m.values[a]=x,1}return 0},reconfigure:(m,v)=>{let x,k=v.config.address[l];if(k!=null){let S=cu(v,k);if(this.dependencies.every(C=>C instanceof we?v.facet(C)===m.facet(C):C instanceof Ii?v.field(C,!1)==m.field(C,!1):!0)||(c?Ym(x=r(m),S,s):s(x=r(m),S)))return m.values[a]=S,0}else x=r(m);return m.values[a]=x,1}}}}function Ym(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function pf(n,e){let t=!1;for(let r of e)To(n,r)&1&&(t=!0);return t}function BO(n,e,t){let r=t.map(h=>n[h.id]),s=t.map(h=>h.type),l=r.filter(h=>!(h&1)),a=n[e.id]>>1;function c(h){let p=[];for(let d=0;d<r.length;d++){let m=cu(h,r[d]);if(s[d]==2)for(let v of m)p.push(v);else p.push(m)}return e.combine(p)}return{create(h){for(let p of r)To(h,p);return h.values[a]=c(h),1},update(h,p){if(!pf(h,l))return 0;let d=c(h);return e.compare(d,h.values[a])?0:(h.values[a]=d,1)},reconfigure(h,p){let d=pf(h,r),m=p.config.facets[e.id],v=p.facet(e);if(m&&!d&&vd(t,m))return h.values[a]=v,0;let x=c(h);return e.compare(x,v)?(h.values[a]=v,0):(h.values[a]=x,1)}}}const Ca=we.define({static:!0});class Ii{constructor(e,t,r,s,l){this.id=e,this.createF=t,this.updateF=r,this.compareF=s,this.spec=l,this.provides=void 0}static define(e){let t=new Ii(yd++,e.create,e.update,e.compare||((r,s)=>r===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Ca).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,s)=>{let l=r.values[t],a=this.updateF(l,s);return this.compareF(l,a)?0:(r.values[t]=a,1)},reconfigure:(r,s)=>{let l=r.facet(Ca),a=s.facet(Ca),c;return(c=l.find(h=>h.field==this))&&c!=a.find(h=>h.field==this)?(r.values[t]=c.create(r),1):s.config.address[this.id]!=null?(r.values[t]=s.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,Ca.of({field:this,create:e})]}get extension(){return this}}const Pi={lowest:4,low:3,default:2,high:1,highest:0};function yo(n){return e=>new gv(e,n)}const Au={highest:yo(Pi.highest),high:yo(Pi.high),default:yo(Pi.default),low:yo(Pi.low),lowest:yo(Pi.lowest)};class gv{constructor(e,t){this.inner=e,this.prec=t}}class il{of(e){return new gf(this,e)}reconfigure(e){return il.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class gf{constructor(e,t){this.compartment=e,this.inner=t}}class uu{constructor(e,t,r,s,l,a){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=s,this.staticValues=l,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let s=[],l=Object.create(null),a=new Map;for(let v of zO(e,t,a))v instanceof Ii?s.push(v):(l[v.facet.id]||(l[v.facet.id]=[])).push(v);let c=Object.create(null),h=[],p=[];for(let v of s)c[v.id]=p.length<<1,p.push(x=>v.slot(x));let d=r==null?void 0:r.config.facets;for(let v in l){let x=l[v],k=x[0].facet,S=d&&d[v]||[];if(x.every(C=>C.type==0))if(c[k.id]=h.length<<1|1,vd(S,x))h.push(r.facet(k));else{let C=k.combine(x.map(E=>E.value));h.push(r&&k.compare(C,r.facet(k))?r.facet(k):C)}else{for(let C of x)C.type==0?(c[C.id]=h.length<<1|1,h.push(C.value)):(c[C.id]=p.length<<1,p.push(E=>C.dynamicSlot(E)));c[k.id]=p.length<<1,p.push(C=>BO(C,k,x))}}let m=p.map(v=>v(c));return new uu(e,a,m,c,h,l)}}function zO(n,e,t){let r=[[],[],[],[],[]],s=new Map;function l(a,c){let h=s.get(a);if(h!=null){if(h<=c)return;let p=r[h].indexOf(a);p>-1&&r[h].splice(p,1),a instanceof gf&&t.delete(a.compartment)}if(s.set(a,c),Array.isArray(a))for(let p of a)l(p,c);else if(a instanceof gf){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let p=e.get(a.compartment)||a.inner;t.set(a.compartment,p),l(p,c)}else if(a instanceof gv)l(a.inner,a.prec);else if(a instanceof Ii)r[c].push(a),a.provides&&l(a.provides,c);else if(a instanceof Xa)r[c].push(a),a.facet.extensions&&l(a.facet.extensions,Pi.default);else{let p=a.extension;if(!p)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(p,c)}}return l(n,Pi.default),r.reduce((a,c)=>a.concat(c))}function To(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function cu(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const mv=we.define(),mf=we.define({combine:n=>n.some(e=>e),static:!0}),yv=we.define({combine:n=>n.length?n[0]:void 0,static:!0}),vv=we.define(),xv=we.define(),wv=we.define(),kv=we.define({combine:n=>n.length?n[0]:!1});class Rs{constructor(e,t){this.type=e,this.value=t}static define(){return new FO}}class FO{of(e){return new Rs(this,e)}}class _O{constructor(e){this.map=e}of(e){return new pt(this,e)}}class pt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new pt(this.type,t)}is(e){return this.type==e}static define(e={}){return new _O(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let s of e){let l=s.map(t);l&&r.push(l)}return r}}pt.reconfigure=pt.define();pt.appendConfig=pt.define();class It{constructor(e,t,r,s,l,a){this.startState=e,this.changes=t,this.selection=r,this.effects=s,this.annotations=l,this.scrollIntoView=a,this._doc=null,this._state=null,r&&pv(r,t.newLength),l.some(c=>c.type==It.time)||(this.annotations=l.concat(It.time.of(Date.now())))}static create(e,t,r,s,l,a){return new It(e,t,r,s,l,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(It.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}It.time=Rs.define();It.userEvent=Rs.define();It.addToHistory=Rs.define();It.remote=Rs.define();function VO(n,e){let t=[];for(let r=0,s=0;;){let l,a;if(r<n.length&&(s==e.length||e[s]>=n[r]))l=n[r++],a=n[r++];else if(s<e.length)l=e[s++],a=e[s++];else return t;!t.length||t[t.length-1]<l?t.push(l,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function bv(n,e,t){var r;let s,l,a;return t?(s=e.changes,l=xt.empty(e.changes.length),a=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),l=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(s)),{changes:a,selection:e.selection?e.selection.map(l):(r=n.selection)===null||r===void 0?void 0:r.map(s),effects:pt.mapEffects(n.effects,s).concat(pt.mapEffects(e.effects,l)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function yf(n,e,t){let r=e.selection,s=ds(e.annotations);return e.userEvent&&(s=s.concat(It.userEvent.of(e.userEvent))),{changes:e.changes instanceof xt?e.changes:xt.of(e.changes||[],t,n.facet(yv)),selection:r&&(r instanceof ne?r:ne.single(r.anchor,r.head)),effects:ds(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function Sv(n,e,t){let r=yf(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let l=1;l<e.length;l++){e[l].filter===!1&&(t=!1);let a=!!e[l].sequential;r=bv(r,yf(n,e[l],a?r.changes.newLength:n.doc.length),a)}let s=It.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return WO(t?HO(s):s)}function HO(n){let e=n.startState,t=!0;for(let s of e.facet(vv)){let l=s(n);if(l===!1){t=!1;break}Array.isArray(l)&&(t=t===!0?l:VO(t,l))}if(t!==!0){let s,l;if(t===!1)l=n.changes.invertedDesc,s=xt.empty(e.doc.length);else{let a=n.changes.filter(t);s=a.changes,l=a.filtered.mapDesc(a.changes).invertedDesc}n=It.create(e,s,n.selection&&n.selection.map(l),pt.mapEffects(n.effects,l),n.annotations,n.scrollIntoView)}let r=e.facet(xv);for(let s=r.length-1;s>=0;s--){let l=r[s](n);l instanceof It?n=l:Array.isArray(l)&&l.length==1&&l[0]instanceof It?n=l[0]:n=Sv(e,ds(l),!1)}return n}function WO(n){let e=n.startState,t=e.facet(wv),r=n;for(let s=t.length-1;s>=0;s--){let l=t[s](n);l&&Object.keys(l).length&&(r=bv(r,yf(e,l,n.changes.newLength),!0))}return r==n?n:It.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const QO=[];function ds(n){return n==null?QO:Array.isArray(n)?n:[n]}var wr=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(wr||(wr={}));const $O=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let vf;try{vf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function UO(n){if(vf)return vf.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||$O.test(t)))return!0}return!1}function XO(n){return e=>{if(!/\S/.test(e))return wr.Space;if(UO(e))return wr.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return wr.Word;return wr.Other}}class Ie{constructor(e,t,r,s,l,a){this.config=e,this.doc=t,this.selection=r,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=l,a&&(a._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)To(this,c<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return To(this,r),cu(this,r)}update(...e){return Sv(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:s}=t;for(let c of e.effects)c.is(il.reconfigure)?(t&&(s=new Map,t.compartments.forEach((h,p)=>s.set(p,h)),t=null),s.set(c.value.compartment,c.value.extension)):c.is(pt.reconfigure)?(t=null,r=c.value):c.is(pt.appendConfig)&&(t=null,r=ds(r).concat(c.value));let l;t?l=e.startState.values.slice():(t=uu.resolve(r,s,this),l=new Ie(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(h,p)=>p.reconfigure(h,this),null).values);let a=e.startState.facet(mf)?e.newSelection:e.newSelection.asSingle();new Ie(t,e.newDoc,a,l,(c,h)=>h.update(c,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ne.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),s=this.changes(r.changes),l=[r.range],a=ds(r.effects);for(let c=1;c<t.ranges.length;c++){let h=e(t.ranges[c]),p=this.changes(h.changes),d=p.map(s);for(let v=0;v<c;v++)l[v]=l[v].map(d);let m=s.mapDesc(p,!0);l.push(h.range.map(m)),s=s.compose(d),a=pt.mapEffects(a,d).concat(pt.mapEffects(ds(h.effects),m))}return{changes:s,selection:ne.create(l,t.mainIndex),effects:a}}changes(e=[]){return e instanceof xt?e:xt.of(e,this.doc.length,this.facet(Ie.lineSeparator))}toText(e){return Ne.of(e.split(this.facet(Ie.lineSeparator)||hf))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(To(this,t),cu(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let s=e[r];s instanceof Ii&&this.config.address[s.id]!=null&&(t[r]=s.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(r){for(let l in r)if(Object.prototype.hasOwnProperty.call(e,l)){let a=r[l],c=e[l];s.push(a.init(h=>a.spec.fromJSON(c,h)))}}return Ie.create({doc:e.doc,selection:ne.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=uu.resolve(e.extensions||[],new Map),r=e.doc instanceof Ne?e.doc:Ne.of((e.doc||"").split(t.staticFacet(Ie.lineSeparator)||hf)),s=e.selection?e.selection instanceof ne?e.selection:ne.single(e.selection.anchor,e.selection.head):ne.single(0);return pv(s,r.length),t.staticFacet(mf)||(s=s.asSingle()),new Ie(t,r,s,t.dynamicSlots.map(()=>null),(l,a)=>a.create(l),null)}get tabSize(){return this.facet(Ie.tabSize)}get lineBreak(){return this.facet(Ie.lineSeparator)||`
`}get readOnly(){return this.facet(kv)}phrase(e,...t){for(let r of this.facet(Ie.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,s)=>{if(s=="$")return"$";let l=+(s||1);return!l||l>t.length?r:t[l-1]})),e}languageDataAt(e,t,r=-1){let s=[];for(let l of this.facet(mv))for(let a of l(this,t,r))Object.prototype.hasOwnProperty.call(a,e)&&s.push(a[e]);return s}charCategorizer(e){return XO(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:s}=this.doc.lineAt(e),l=this.charCategorizer(e),a=e-r,c=e-r;for(;a>0;){let h=Vt(t,a,!1);if(l(t.slice(h,a))!=wr.Word)break;a=h}for(;c<s;){let h=Vt(t,c);if(l(t.slice(c,h))!=wr.Word)break;c=h}return a==c?null:ne.range(a+r,c+r)}}Ie.allowMultipleSelections=mf;Ie.tabSize=we.define({combine:n=>n.length?n[0]:4});Ie.lineSeparator=yv;Ie.readOnly=kv;Ie.phrases=we.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(s=>n[s]==e[s])}});Ie.languageData=mv;Ie.changeFilter=vv;Ie.transactionFilter=xv;Ie.transactionExtender=wv;il.reconfigure=pt.define();function Ov(n,e,t={}){let r={};for(let s of n)for(let l of Object.keys(s)){let a=s[l],c=r[l];if(c===void 0)r[l]=a;else if(!(c===a||a===void 0))if(Object.hasOwnProperty.call(t,l))r[l]=t[l](c,a);else throw new Error("Config merge conflict for field "+l)}for(let s in e)r[s]===void 0&&(r[s]=e[s]);return r}class vs{eq(e){return this==e}range(e,t=e){return xf.create(e,t,this)}}vs.prototype.startSide=vs.prototype.endSide=0;vs.prototype.point=!1;vs.prototype.mapMode=hn.TrackDel;let xf=class Cv{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new Cv(e,t,r)}};function wf(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class xd{constructor(e,t,r,s){this.from=e,this.to=t,this.value=r,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,s=0){let l=r?this.to:this.from;for(let a=s,c=l.length;;){if(a==c)return a;let h=a+c>>1,p=l[h]-e||(r?this.value[h].endSide:this.value[h].startSide)-t;if(h==a)return p>=0?a:c;p>=0?c=h:a=h+1}}between(e,t,r,s){for(let l=this.findIndex(t,-1e9,!0),a=this.findIndex(r,1e9,!1,l);l<a;l++)if(s(this.from[l]+e,this.to[l]+e,this.value[l])===!1)return!1}map(e,t){let r=[],s=[],l=[],a=-1,c=-1;for(let h=0;h<this.value.length;h++){let p=this.value[h],d=this.from[h]+e,m=this.to[h]+e,v,x;if(d==m){let k=t.mapPos(d,p.startSide,p.mapMode);if(k==null||(v=x=k,p.startSide!=p.endSide&&(x=t.mapPos(d,p.endSide),x<v)))continue}else if(v=t.mapPos(d,p.startSide),x=t.mapPos(m,p.endSide),v>x||v==x&&p.startSide>0&&p.endSide<=0)continue;(x-v||p.endSide-p.startSide)<0||(a<0&&(a=v),p.point&&(c=Math.max(c,x-v)),r.push(p),s.push(v-a),l.push(x-a))}return{mapped:r.length?new xd(s,l,r,c):null,pos:a}}}class je{constructor(e,t,r,s){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=s}static create(e,t,r,s){return new je(e,t,r,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:s=0,filterTo:l=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(r&&(t=t.slice().sort(wf)),this.isEmpty)return t.length?je.of(t):this;let c=new Pv(this,null,-1).goto(0),h=0,p=[],d=new Qo;for(;c.value||h<t.length;)if(h<t.length&&(c.from-t[h].from||c.startSide-t[h].value.startSide)>=0){let m=t[h++];d.addInner(m.from,m.to,m.value)||p.push(m)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(h==t.length||this.chunkEnd(c.chunkIndex)<t[h].from)&&(!a||s>this.chunkEnd(c.chunkIndex)||l<this.chunkPos[c.chunkIndex])&&d.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!a||s>c.to||l<c.from||a(c.from,c.to,c.value))&&(d.addInner(c.from,c.to,c.value)||p.push(xf.create(c.from,c.to,c.value))),c.next());return d.finishInner(this.nextLayer.isEmpty&&!p.length?je.empty:this.nextLayer.update({add:p,filter:a,filterFrom:s,filterTo:l}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],s=-1;for(let a=0;a<this.chunk.length;a++){let c=this.chunkPos[a],h=this.chunk[a],p=e.touchesRange(c,c+h.length);if(p===!1)s=Math.max(s,h.maxPoint),t.push(h),r.push(e.mapPos(c));else if(p===!0){let{mapped:d,pos:m}=h.map(c,e);d&&(s=Math.max(s,d.maxPoint),t.push(d),r.push(m))}}let l=this.nextLayer.map(e);return t.length==0?l:new je(r,t,l||je.empty,s)}between(e,t,r){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],a=this.chunk[s];if(t>=l&&e<=l+a.length&&a.between(l,e-l,t-l,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return $o.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return $o.from(e).goto(t)}static compare(e,t,r,s,l=-1){let a=e.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=l),c=t.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=l),h=Gm(a,c,r),p=new vo(a,h,l),d=new vo(c,h,l);r.iterGaps((m,v,x)=>Jm(p,m,d,v,x,s)),r.empty&&r.length==0&&Jm(p,0,d,0,0,s)}static eq(e,t,r=0,s){s==null&&(s=999999999);let l=e.filter(d=>!d.isEmpty&&t.indexOf(d)<0),a=t.filter(d=>!d.isEmpty&&e.indexOf(d)<0);if(l.length!=a.length)return!1;if(!l.length)return!0;let c=Gm(l,a),h=new vo(l,c,0).goto(r),p=new vo(a,c,0).goto(r);for(;;){if(h.to!=p.to||!kf(h.active,p.active)||h.point&&(!p.point||!h.point.eq(p.point)))return!1;if(h.to>s)return!0;h.next(),p.next()}}static spans(e,t,r,s,l=-1){let a=new vo(e,null,l).goto(t),c=t,h=a.openStart;for(;;){let p=Math.min(a.to,r);if(a.point){let d=a.activeForPoint(a.to),m=a.pointFrom<t?d.length+1:a.point.startSide<0?d.length:Math.min(d.length,h);s.point(c,p,a.point,d,m,a.pointRank),h=Math.min(a.openEnd(p),d.length)}else p>c&&(s.span(c,p,a.active,h),h=a.openEnd(p));if(a.to>r)return h+(a.point&&a.to>r?1:0);c=a.to,a.next()}}static of(e,t=!1){let r=new Qo;for(let s of e instanceof xf?[e]:t?KO(e):e)r.add(s.from,s.to,s.value);return r.finish()}static join(e){if(!e.length)return je.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let s=e[r];s!=je.empty;s=s.nextLayer)t=new je(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}je.empty=new je([],[],null,-1);function KO(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(wf(e,r)>0)return n.slice().sort(wf);e=r}return n}je.empty.nextLayer=je.empty;class Qo{finishChunk(e){this.chunks.push(new xd(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Qo)).add(e,t,r)}addInner(e,t,r){let s=e-this.lastTo||r.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(je.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=je.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Gm(n,e,t){let r=new Map;for(let l of n)for(let a=0;a<l.chunk.length;a++)l.chunk[a].maxPoint<=0&&r.set(l.chunk[a],l.chunkPos[a]);let s=new Set;for(let l of e)for(let a=0;a<l.chunk.length;a++){let c=r.get(l.chunk[a]);c!=null&&(t?t.mapPos(c):c)==l.chunkPos[a]&&!(t!=null&&t.touchesRange(c,c+l.chunk[a].length))&&s.add(l.chunk[a])}return s}class Pv{constructor(e,t,r,s=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class $o{constructor(e){this.heap=e}static from(e,t=null,r=-1){let s=[];for(let l=0;l<e.length;l++)for(let a=e[l];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&s.push(new Pv(a,t,r,l));return s.length==1?s[0]:new $o(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)Lh(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)Lh(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Lh(this.heap,0)}}}function Lh(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let s=n[r];if(r+1<n.length&&s.compare(n[r+1])>=0&&(s=n[r+1],r++),t.compare(s)<0)break;n[r]=t,n[e]=s,e=r}}class vo{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=$o.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Pa(this.active,e),Pa(this.activeTo,e),Pa(this.activeRank,e),this.minActive=Zm(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:s,rank:l}=this.cursor;for(;t<this.activeRank.length&&(l-this.activeRank[t]||s-this.activeTo[t])>0;)t++;Ea(this.active,t,r),Ea(this.activeTo,t,s),Ea(this.activeRank,t,l),e&&Ea(e,t,this.cursor.from),this.minActive=Zm(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),r&&Pa(r,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let s=r.length-1;s>=0&&r[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function Jm(n,e,t,r,s,l){n.goto(e),t.goto(r);let a=r+s,c=r,h=r-e;for(;;){let p=n.to+h-t.to,d=p||n.endSide-t.endSide,m=d<0?n.to+h:t.to,v=Math.min(m,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&kf(n.activeForPoint(n.to),t.activeForPoint(t.to))||l.comparePoint(c,v,n.point,t.point):v>c&&!kf(n.active,t.active)&&l.compareRange(c,v,n.active,t.active),m>a)break;(p||n.openEnd!=t.openEnd)&&l.boundChange&&l.boundChange(m),c=m,d<=0&&n.next(),d>=0&&t.next()}}function kf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Pa(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function Ea(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function Zm(n,e){let t=-1,r=1e9;for(let s=0;s<e.length;s++)(e[s]-r||n[s].endSide-n[t].endSide)<0&&(t=s,r=e[s]);return t}function Du(n,e,t=n.length){let r=0;for(let s=0;s<t&&s<n.length;)n.charCodeAt(s)==9?(r+=e-r%e,s++):(r++,s=Vt(n,s));return r}function qO(n,e,t,r){for(let s=0,l=0;;){if(l>=e)return s;if(s==n.length)break;l+=n.charCodeAt(s)==9?t-l%t:1,s=Vt(n,s)}return n.length}const bf="",e0=typeof Symbol>"u"?"__"+bf:Symbol.for(bf),Sf=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),t0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ri{constructor(e,t){this.rules=[];let{finish:r}=t||{};function s(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function l(a,c,h,p){let d=[],m=/^@(\w+)\b/.exec(a[0]),v=m&&m[1]=="keyframes";if(m&&c==null)return h.push(a[0]+";");for(let x in c){let k=c[x];if(/&/.test(x))l(x.split(/,\s*/).map(S=>a.map(C=>S.replace(/&/,C))).reduce((S,C)=>S.concat(C)),k,h);else if(k&&typeof k=="object"){if(!m)throw new RangeError("The value of a property ("+x+") should be a primitive value.");l(s(x),k,d,v)}else k!=null&&d.push(x.replace(/_.*/,"").replace(/[A-Z]/g,S=>"-"+S.toLowerCase())+": "+k+";")}(d.length||v)&&h.push((r&&!m&&!p?a.map(r):a).join(", ")+" {"+d.join(" ")+"}")}for(let a in e)l(s(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=t0[e0]||1;return t0[e0]=e+1,bf+e.toString(36)}static mount(e,t,r){let s=e[Sf],l=r&&r.nonce;s?l&&s.setNonce(l):s=new YO(e,l),s.mount(Array.isArray(t)?t:[t],e)}}let n0=new Map;class YO{constructor(e,t){let r=e.ownerDocument||e,s=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let l=n0.get(r);if(l)return e[Sf]=l;this.sheet=new s.CSSStyleSheet,n0.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Sf]=this}mount(e,t){let r=this.sheet,s=0,l=0;for(let a=0;a<e.length;a++){let c=e[a],h=this.modules.indexOf(c);if(h<l&&h>-1&&(this.modules.splice(h,1),l--,h=-1),h==-1){if(this.modules.splice(l++,0,c),r)for(let p=0;p<c.rules.length;p++)r.insertRule(c.rules[p],s++)}else{for(;l<h;)s+=this.modules[l++].rules.length;s+=c.rules.length,l++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let h=0;h<this.modules.length;h++)a+=this.modules[h].getRules()+`
`;this.styleTag.textContent=a;let c=t.head||t;this.styleTag.parentNode!=c&&c.insertBefore(this.styleTag,c.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ii={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Uo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},GO=typeof navigator<"u"&&/Mac/.test(navigator.platform),JO=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ot=0;Ot<10;Ot++)ii[48+Ot]=ii[96+Ot]=String(Ot);for(var Ot=1;Ot<=24;Ot++)ii[Ot+111]="F"+Ot;for(var Ot=65;Ot<=90;Ot++)ii[Ot]=String.fromCharCode(Ot+32),Uo[Ot]=String.fromCharCode(Ot);for(var Ih in ii)Uo.hasOwnProperty(Ih)||(Uo[Ih]=ii[Ih]);function ZO(n){var e=GO&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||JO&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Uo:ii)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}let _t=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Of=typeof document<"u"?document:{documentElement:{style:{}}};const Cf=/Edge\/(\d+)/.exec(_t.userAgent),Ev=/MSIE \d/.test(_t.userAgent),Pf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(_t.userAgent),Nu=!!(Ev||Pf||Cf),r0=!Nu&&/gecko\/(\d+)/i.test(_t.userAgent),jh=!Nu&&/Chrome\/(\d+)/.exec(_t.userAgent),eC="webkitFontSmoothing"in Of.documentElement.style,Ef=!Nu&&/Apple Computer/.test(_t.vendor),i0=Ef&&(/Mobile\/\w+/.test(_t.userAgent)||_t.maxTouchPoints>2);var le={mac:i0||/Mac/.test(_t.platform),windows:/Win/.test(_t.platform),linux:/Linux|X11/.test(_t.platform),ie:Nu,ie_version:Ev?Of.documentMode||6:Pf?+Pf[1]:Cf?+Cf[1]:0,gecko:r0,gecko_version:r0?+(/Firefox\/(\d+)/.exec(_t.userAgent)||[0,0])[1]:0,chrome:!!jh,chrome_version:jh?+jh[1]:0,ios:i0,android:/Android\b/.test(_t.userAgent),webkit_version:eC?+(/\bAppleWebKit\/(\d+)/.exec(_t.userAgent)||[0,0])[1]:0,safari:Ef,safari_version:Ef?+(/\bVersion\/(\d+(\.\d+)?)/.exec(_t.userAgent)||[0,0])[1]:0,tabSize:Of.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Xo(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Mf(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Ka(n,e){if(!e.anchorNode)return!1;try{return Mf(n,e.anchorNode)}catch{return!1}}function Ko(n){return n.nodeType==3?Ni(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Lo(n,e,t,r){return t?s0(n,e,t,r,-1)||s0(n,e,t,r,1):!1}function Di(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function hu(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function s0(n,e,t,r,s){for(;;){if(n==t&&e==r)return!0;if(e==(s<0?0:ir(n))){if(n.nodeName=="DIV")return!1;let l=n.parentNode;if(!l||l.nodeType!=1)return!1;e=Di(n)+(s<0?0:1),n=l}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?ir(n):0}else return!1}}function ir(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Tu(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function tC(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Mv(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function nC(n,e,t,r,s,l,a,c){let h=n.ownerDocument,p=h.defaultView||window;for(let d=n,m=!1;d&&!m;)if(d.nodeType==1){let v,x=d==h.body,k=1,S=1;if(x)v=tC(p);else{if(/^(fixed|sticky)$/.test(getComputedStyle(d).position)&&(m=!0),d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let A=d.getBoundingClientRect();({scaleX:k,scaleY:S}=Mv(d,A)),v={left:A.left,right:A.left+d.clientWidth*k,top:A.top,bottom:A.top+d.clientHeight*S}}let C=0,E=0;if(s=="nearest")e.top<v.top?(E=e.top-(v.top+a),t>0&&e.bottom>v.bottom+E&&(E=e.bottom-v.bottom+a)):e.bottom>v.bottom&&(E=e.bottom-v.bottom+a,t<0&&e.top-E<v.top&&(E=e.top-(v.top+a)));else{let A=e.bottom-e.top,N=v.bottom-v.top;E=(s=="center"&&A<=N?e.top+A/2-N/2:s=="start"||s=="center"&&t<0?e.top-a:e.bottom-N+a)-v.top}if(r=="nearest"?e.left<v.left?(C=e.left-(v.left+l),t>0&&e.right>v.right+C&&(C=e.right-v.right+l)):e.right>v.right&&(C=e.right-v.right+l,t<0&&e.left<v.left+C&&(C=e.left-(v.left+l))):C=(r=="center"?e.left+(e.right-e.left)/2-(v.right-v.left)/2:r=="start"==c?e.left-l:e.right-(v.right-v.left)+l)-v.left,C||E)if(x)p.scrollBy(C,E);else{let A=0,N=0;if(E){let _=d.scrollTop;d.scrollTop+=E/S,N=(d.scrollTop-_)*S}if(C){let _=d.scrollLeft;d.scrollLeft+=C/k,A=(d.scrollLeft-_)*k}e={left:e.left-A,top:e.top-N,right:e.right-A,bottom:e.bottom-N},A&&Math.abs(A-C)<1&&(r="nearest"),N&&Math.abs(N-E)<1&&(s="nearest")}if(x)break;(e.top<v.top||e.bottom>v.bottom||e.left<v.left||e.right>v.right)&&(e={left:Math.max(e.left,v.left),right:Math.min(e.right,v.right),top:Math.max(e.top,v.top),bottom:Math.min(e.bottom,v.bottom)}),d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}function rC(n){let e=n.ownerDocument,t,r;for(let s=n.parentNode;s&&!(s==e.body||t&&r);)if(s.nodeType==1)!r&&s.scrollHeight>s.clientHeight&&(r=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:r}}class iC{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?ir(t):0),r,Math.min(e.focusOffset,r?ir(r):0))}set(e,t,r,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=s}}let Ci=null;le.safari&&le.safari_version>=26&&(Ci=!1);function Rv(n){if(n.setActive)return n.setActive();if(Ci)return n.focus(Ci);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Ci==null?{get preventScroll(){return Ci={preventScroll:!0},!0}}:void 0),!Ci){Ci=!1;for(let t=0;t<e.length;){let r=e[t++],s=e[t++],l=e[t++];r.scrollTop!=s&&(r.scrollTop=s),r.scrollLeft!=l&&(r.scrollLeft=l)}}}let o0;function Ni(n,e,t=e){let r=o0||(o0=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function ps(n,e,t,r){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=r);let l=new KeyboardEvent("keydown",s);l.synthetic=!0,n.dispatchEvent(l);let a=new KeyboardEvent("keyup",s);return a.synthetic=!0,n.dispatchEvent(a),l.defaultPrevented||a.defaultPrevented}function sC(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Av(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function oC(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,ir(t));;)if(r){if(t.nodeType!=1)return!1;let s=t.childNodes[r-1];s.contentEditable=="false"?r--:(t=s,r=ir(t))}else{if(t==n)return!0;r=Di(t),t=t.parentNode}}function Dv(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Nv(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=ir(t)}else if(t.parentNode&&!hu(t))r=Di(t),t=t.parentNode;else return null}}function Tv(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!hu(t))r=Di(t)+1,t=t.parentNode;else return null}}class Lt{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new Lt(e.parentNode,Di(e),t)}static after(e,t){return new Lt(e.parentNode,Di(e)+1,t)}}const wd=[];class Fe{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,s=null,l;for(let a of this.children){if(a.flags&7){if(!a.dom&&(l=s?s.nextSibling:r.firstChild)){let c=Fe.get(l);(!c||!c.parent&&c.canReuseDOM(a))&&a.reuseDOM(l)}a.sync(e,t),a.flags&=-8}if(l=s?s.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&l!=a.dom&&(t.written=!0),a.dom.parentNode==r)for(;l&&l!=a.dom;)l=l0(l);else r.insertBefore(a.dom,l);s=a.dom}for(l=s?s.nextSibling:r.firstChild,l&&t&&t.node==r&&(t.written=!0);l;)l=l0(l)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let s=ir(e)==0?0:t==0?-1:1;for(;;){let l=e.parentNode;if(l==this.dom)break;s==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?s=-1:s=1),e=l}s<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Fe.get(r);)r=r.nextSibling;if(!r)return this.length;for(let s=0,l=0;;s++){let a=this.children[s];if(a.dom==r)return l;l+=a.length+a.breakAfter}}domBoundsAround(e,t,r=0){let s=-1,l=-1,a=-1,c=-1;for(let h=0,p=r,d=r;h<this.children.length;h++){let m=this.children[h],v=p+m.length;if(p<e&&v>t)return m.domBoundsAround(e,t,p);if(v>=e&&s==-1&&(s=h,l=p),p>t&&m.dom.parentNode==this.dom){a=h,c=d;break}d=v,p=v+m.breakAfter}return{from:l,to:c<0?r+this.length:c,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=wd){this.markDirty();for(let s=e;s<t;s++){let l=this.children[s];l.parent==this&&r.indexOf(l)<0&&l.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let s=0;s<r.length;s++)r[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Lv(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,s,l,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Fe.prototype.breakAfter=0;function l0(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Lv{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function Iv(n,e,t,r,s,l,a,c,h){let{children:p}=n,d=p.length?p[e]:null,m=l.length?l[l.length-1]:null,v=m?m.breakAfter:a;if(!(e==r&&d&&!a&&!v&&l.length<2&&d.merge(t,s,l.length?m:null,t==0,c,h))){if(r<p.length){let x=p[r];x&&(s<x.length||x.breakAfter&&(m!=null&&m.breakAfter))?(e==r&&(x=x.split(s),s=0),!v&&m&&x.merge(0,s,m,!0,0,h)?l[l.length-1]=x:((s||x.children.length&&!x.children[0].length)&&x.merge(0,s,null,!1,0,h),l.push(x))):x!=null&&x.breakAfter&&(m?m.breakAfter=1:a=1),r++}for(d&&(d.breakAfter=a,t>0&&(!a&&l.length&&d.merge(t,d.length,l[0],!1,c,0)?d.breakAfter=l.shift().breakAfter:(t<d.length||d.children.length&&d.children[d.children.length-1].length==0)&&d.merge(t,d.length,null,!1,c,0),e++));e<r&&l.length;)if(p[r-1].become(l[l.length-1]))r--,l.pop(),h=l.length?0:c;else if(p[e].become(l[0]))e++,l.shift(),c=l.length?0:h;else break;!l.length&&e&&r<p.length&&!p[e-1].breakAfter&&p[r].merge(0,0,p[e-1],!1,c,h)&&e--,(e<r||l.length)&&n.replaceChildren(e,r,l)}}function jv(n,e,t,r,s,l){let a=n.childCursor(),{i:c,off:h}=a.findPos(t,1),{i:p,off:d}=a.findPos(e,-1),m=e-t;for(let v of r)m+=v.length;n.length+=m,Iv(n,p,d,c,h,r,0,s,l)}const lC=256;class zn extends Fe{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof zn)||this.length-(t-e)+r.length>lC||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new zn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Lt(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return aC(this.dom,e,t)}}class Sr extends Fe{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let s of t)s.setParent(this)}setAttrs(e){if(Av(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,s,l,a){return r&&(!(r instanceof Sr&&r.mark.eq(this.mark))||e&&l<=0||t<this.length&&a<=0)?!1:(jv(this,e,t,r?r.children.slice():[],l-1,a-1),this.markDirty(),!0)}split(e){let t=[],r=0,s=-1,l=0;for(let c of this.children){let h=r+c.length;h>e&&t.push(r<e?c.split(e-r):c),s<0&&r>=e&&(s=l),r=h,l++}let a=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new Sr(this.mark,t,a)}domAtPos(e){return Bv(this,e)}coordsAt(e,t){return Fv(this,e,t)}}function aC(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let s=e,l=e,a=0;e==0&&t<0||e==r&&t>=0?le.chrome||le.gecko||(e?(s--,a=1):l<r&&(l++,a=-1)):t<0?s--:l<r&&l++;let c=Ni(n,s,l).getClientRects();if(!c.length)return null;let h=c[(a?a<0:t>=0)?0:c.length-1];return le.safari&&!a&&h.width==0&&(h=Array.prototype.find.call(c,p=>p.width)||h),a?Tu(h,a<0):h||null}class Jr extends Fe{static create(e,t,r){return new Jr(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=Jr.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,s,l,a){return r&&(!(r instanceof Jr)||!this.widget.compare(r.widget)||e>0&&l<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof Jr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ne.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,s=this.posAtStart;return r?r.slice(s,s+this.length):Ne.empty}domAtPos(e){return(this.length?e==0:this.side>0)?Lt.before(this.dom):Lt.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let s=this.dom.getClientRects(),l=null;if(!s.length)return null;let a=this.side?this.side<0:e>0;for(let c=a?s.length-1:0;l=s[c],!(e>0?c==0:c==s.length-1||l.top<l.bottom);c+=a?-1:1);return Tu(l,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class xs extends Fe{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof xs&&e.side==this.side}split(){return new xs(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Lt.before(this.dom):Lt.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ne.empty}get isHidden(){return!0}}zn.prototype.children=Jr.prototype.children=xs.prototype.children=wd;function Bv(n,e){let t=n.dom,{children:r}=n,s=0;for(let l=0;s<r.length;s++){let a=r[s],c=l+a.length;if(!(c==l&&a.getSide()<=0)){if(e>l&&e<c&&a.dom.parentNode==t)return a.domAtPos(e-l);if(e<=l)break;l=c}}for(let l=s;l>0;l--){let a=r[l-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let l=s;l<r.length;l++){let a=r[l];if(a.dom.parentNode==t)return a.domAtPos(0)}return new Lt(t,0)}function zv(n,e,t){let r,{children:s}=n;t>0&&e instanceof Sr&&s.length&&(r=s[s.length-1])instanceof Sr&&r.mark.eq(e.mark)?zv(r,e.children[0],t-1):(s.push(e),e.setParent(n)),n.length+=e.length}function Fv(n,e,t){let r=null,s=-1,l=null,a=-1;function c(p,d){for(let m=0,v=0;m<p.children.length&&v<=d;m++){let x=p.children[m],k=v+x.length;k>=d&&(x.children.length?c(x,d-v):(!l||l.isHidden&&(t>0||cC(l,x)))&&(k>d||v==k&&x.getSide()>0)?(l=x,a=d-v):(v<d||v==k&&x.getSide()<0&&!x.isHidden)&&(r=x,s=d-v)),v=k}}c(n,e);let h=(t<0?r:l)||r||l;return h?h.coordsAt(Math.max(0,h==r?s:a),t):uC(n)}function uC(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Ko(e);return t[t.length-1]||null}function cC(n,e){let t=n.coordsAt(0,1),r=e.coordsAt(0,1);return t&&r&&r.top<t.bottom}function Rf(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const a0=Object.create(null);function fu(n,e,t){if(n==e)return!0;n||(n=a0),e||(e=a0);let r=Object.keys(n),s=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let l of r)if(l!=t&&(s.indexOf(l)==-1||n[l]!==e[l]))return!1;return!0}function Af(n,e,t){let r=!1;if(e)for(let s in e)t&&s in t||(r=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(r=!0,s=="style"?n.style.cssText=t[s]:n.setAttribute(s,t[s]));return r}function hC(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class sl{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Ht=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Ht||(Ht={}));class tt extends vs{constructor(e,t,r,s){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=s}get heightRelevant(){return!1}static mark(e){return new ol(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new si(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,s;if(e.isBlockGap)r=-5e8,s=4e8;else{let{start:l,end:a}=_v(e,t);r=(l?t?-3e8:-1:5e8)-1,s=(a?t?2e8:1:-6e8)+1}return new si(e,r,s,t,e.widget||null,!0)}static line(e){return new ll(e)}static set(e,t=!1){return je.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}tt.none=je.empty;class ol extends tt{constructor(e){let{start:t,end:r}=_v(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof ol&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&fu(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ol.prototype.point=!1;class ll extends tt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof ll&&this.spec.class==e.spec.class&&fu(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}ll.prototype.mapMode=hn.TrackBefore;ll.prototype.point=!0;class si extends tt{constructor(e,t,r,s,l,a){super(t,r,l,e),this.block=s,this.isReplace=a,this.mapMode=s?t<=0?hn.TrackBefore:hn.TrackAfter:hn.TrackDel}get type(){return this.startSide!=this.endSide?Ht.WidgetRange:this.startSide<=0?Ht.WidgetBefore:Ht.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof si&&fC(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}si.prototype.point=!0;function _v(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function fC(n,e){return n==e||!!(n&&e&&n.compare(e))}function qa(n,e,t,r=0){let s=t.length-1;s>=0&&t[s]+r>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class at extends Fe{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,s,l,a){if(r){if(!(r instanceof at))return!1;this.dom||r.transferDOM(this)}return s&&this.setDeco(r?r.attrs:null),jv(this,e,t,r?r.children.slice():[],l,a),!0}split(e){let t=new at;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:s}=this.childPos(e);s&&(t.append(this.children[r].split(s),0),this.children[r].merge(s,this.children[r].length,null,!1,0,0),r++);for(let l=r;l<this.children.length;l++)t.append(this.children[l],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){fu(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){zv(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=Rf(t,this.attrs||{})),r&&(this.attrs=Rf({class:r},this.attrs||{}))}domAtPos(e){return Bv(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(Av(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Af(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&Fe.get(s)instanceof Sr;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((r=Fe.get(s))===null||r===void 0?void 0:r.isEditable)==!1&&(!le.ios||!this.children.some(l=>l instanceof zn))){let l=document.createElement("BR");l.cmIgnore=!0,this.dom.appendChild(l)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof zn)||/[^ -~]/.test(r.text))return null;let s=Ko(r.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=Fv(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:s}=this.parent.view.viewState,l=r.bottom-r.top;if(Math.abs(l-s.lineHeight)<2&&s.textHeight<l){let a=(l-s.textHeight)/2;return{top:r.top+a,bottom:r.bottom-a,left:r.left,right:r.left}}}return r}become(e){return e instanceof at&&this.children.length==0&&e.children.length==0&&fu(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,s=0;r<e.children.length;r++){let l=e.children[r],a=s+l.length;if(a>=t){if(l instanceof at)return l;if(a>t)break}s=a+l.breakAfter}return null}}class br extends Fe{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,s,l,a){return r&&(!(r instanceof br)||!this.widget.compare(r.widget)||e>0&&l<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?Lt.before(this.dom):Lt.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new br(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return wd}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ne.empty}domBoundsAround(){return null}become(e){return e instanceof br&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof Df?null:Tu(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class Df extends sl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Io{constructor(e,t,r,s){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof br&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new at),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Ma(new xs(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof br)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:c,done:h}=this.cursor.next(this.skip);if(this.skip=0,h)throw new Error("Ran out of text content when drawing inline views");if(c){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e),l=Math.min(s,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(Ma(new zn(this.text.slice(this.textOff,this.textOff+l)),t),r),this.atCursorPos=!0,this.textOff+=l,e-=l,r=s<=l?0:t.length}}span(e,t,r,s){this.buildText(t-e,r,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,r,s,l,a){if(this.disallowBlockEffectsFor[a]&&r instanceof si){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let c=t-e;if(r instanceof si)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new br(r.widget||ws.block,c,r));else{let h=Jr.create(r.widget||ws.inline,c,c?0:r.startSide),p=this.atCursorPos&&!h.isEditable&&l<=s.length&&(e<t||r.startSide>0),d=!h.isEditable&&(e<t||l>s.length||r.startSide<=0),m=this.getLine();this.pendingBuffer==2&&!p&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),p&&(m.append(Ma(new xs(1),s),l),l=s.length+Math.max(0,l-s.length)),m.append(Ma(h,s),l),this.atCursorPos=d,this.pendingBuffer=d?e<t||l>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);c&&(this.textOff+c<=this.text.length?this.textOff+=c:(this.skip+=c-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=l)}static build(e,t,r,s,l){let a=new Io(e,t,r,l);return a.openEnd=je.spans(s,t,r,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function Ma(n,e){for(let t of e)n=new Sr(t,[n],n.length);return n}class ws extends sl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}ws.inline=new ws("span");ws.block=new ws("div");var et=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(et||(et={}));const Ti=et.LTR,kd=et.RTL;function Vv(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const dC=Vv("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),pC=Vv("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Nf=Object.create(null),Yn=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Nf[e]=t,Nf[t]=-e}function Hv(n){return n<=247?dC[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?pC[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const gC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class Zr{get dir(){return this.level%2?kd:Ti}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,s){let l=-1;for(let a=0;a<e.length;a++){let c=e[a];if(c.from<=t&&c.to>=t){if(c.level==r)return a;(l<0||(s!=0?s<0?c.from<t:c.to>t:e[l].level>c.level))&&(l=a)}}if(l<0)throw new RangeError("Index out of range");return l}}function Wv(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],s=e[t];if(r.from!=s.from||r.to!=s.to||r.direction!=s.direction||!Wv(r.inner,s.inner))return!1}return!0}const _e=[];function mC(n,e,t,r,s){for(let l=0;l<=r.length;l++){let a=l?r[l-1].to:e,c=l<r.length?r[l].from:t,h=l?256:s;for(let p=a,d=h,m=h;p<c;p++){let v=Hv(n.charCodeAt(p));v==512?v=d:v==8&&m==4&&(v=16),_e[p]=v==4?2:v,v&7&&(m=v),d=v}for(let p=a,d=h,m=h;p<c;p++){let v=_e[p];if(v==128)p<c-1&&d==_e[p+1]&&d&24?v=_e[p]=d:_e[p]=256;else if(v==64){let x=p+1;for(;x<c&&_e[x]==64;)x++;let k=p&&d==8||x<t&&_e[x]==8?m==1?1:8:256;for(let S=p;S<x;S++)_e[S]=k;p=x-1}else v==8&&m==1&&(_e[p]=1);d=v,v&7&&(m=v)}}}function yC(n,e,t,r,s){let l=s==1?2:1;for(let a=0,c=0,h=0;a<=r.length;a++){let p=a?r[a-1].to:e,d=a<r.length?r[a].from:t;for(let m=p,v,x,k;m<d;m++)if(x=Nf[v=n.charCodeAt(m)])if(x<0){for(let S=c-3;S>=0;S-=3)if(Yn[S+1]==-x){let C=Yn[S+2],E=C&2?s:C&4?C&1?l:s:0;E&&(_e[m]=_e[Yn[S]]=E),c=S;break}}else{if(Yn.length==189)break;Yn[c++]=m,Yn[c++]=v,Yn[c++]=h}else if((k=_e[m])==2||k==1){let S=k==s;h=S?0:1;for(let C=c-3;C>=0;C-=3){let E=Yn[C+2];if(E&2)break;if(S)Yn[C+2]|=2;else{if(E&4)break;Yn[C+2]|=4}}}}}function vC(n,e,t,r){for(let s=0,l=r;s<=t.length;s++){let a=s?t[s-1].to:n,c=s<t.length?t[s].from:e;for(let h=a;h<c;){let p=_e[h];if(p==256){let d=h+1;for(;;)if(d==c){if(s==t.length)break;d=t[s++].to,c=s<t.length?t[s].from:e}else if(_e[d]==256)d++;else break;let m=l==1,v=(d<e?_e[d]:r)==1,x=m==v?m?1:2:r;for(let k=d,S=s,C=S?t[S-1].to:n;k>h;)k==C&&(k=t[--S].from,C=S?t[S-1].to:n),_e[--k]=x;h=d}else l=p,h++}}}function Tf(n,e,t,r,s,l,a){let c=r%2?2:1;if(r%2==s%2)for(let h=e,p=0;h<t;){let d=!0,m=!1;if(p==l.length||h<l[p].from){let S=_e[h];S!=c&&(d=!1,m=S==16)}let v=!d&&c==1?[]:null,x=d?r:r+1,k=h;e:for(;;)if(p<l.length&&k==l[p].from){if(m)break e;let S=l[p];if(!d)for(let C=S.to,E=p+1;;){if(C==t)break e;if(E<l.length&&l[E].from==C)C=l[E++].to;else{if(_e[C]==c)break e;break}}if(p++,v)v.push(S);else{S.from>h&&a.push(new Zr(h,S.from,x));let C=S.direction==Ti!=!(x%2);Lf(n,C?r+1:r,s,S.inner,S.from,S.to,a),h=S.to}k=S.to}else{if(k==t||(d?_e[k]!=c:_e[k]==c))break;k++}v?Tf(n,h,k,r+1,s,v,a):h<k&&a.push(new Zr(h,k,x)),h=k}else for(let h=t,p=l.length;h>e;){let d=!0,m=!1;if(!p||h>l[p-1].to){let S=_e[h-1];S!=c&&(d=!1,m=S==16)}let v=!d&&c==1?[]:null,x=d?r:r+1,k=h;e:for(;;)if(p&&k==l[p-1].to){if(m)break e;let S=l[--p];if(!d)for(let C=S.from,E=p;;){if(C==e)break e;if(E&&l[E-1].to==C)C=l[--E].from;else{if(_e[C-1]==c)break e;break}}if(v)v.push(S);else{S.to<h&&a.push(new Zr(S.to,h,x));let C=S.direction==Ti!=!(x%2);Lf(n,C?r+1:r,s,S.inner,S.from,S.to,a),h=S.from}k=S.from}else{if(k==e||(d?_e[k-1]!=c:_e[k-1]==c))break;k--}v?Tf(n,k,h,r+1,s,v,a):k<h&&a.push(new Zr(k,h,x)),h=k}}function Lf(n,e,t,r,s,l,a){let c=e%2?2:1;mC(n,s,l,r,c),yC(n,s,l,r,c),vC(s,l,r,c),Tf(n,s,l,e,t,r,a)}function xC(n,e,t){if(!n)return[new Zr(0,0,e==kd?1:0)];if(e==Ti&&!t.length&&!gC.test(n))return Qv(n.length);if(t.length)for(;n.length>_e.length;)_e[_e.length]=256;let r=[],s=e==Ti?0:1;return Lf(n,s,s,t,0,n.length,r),r}function Qv(n){return[new Zr(0,n,0)]}let $v="";function wC(n,e,t,r,s){var l;let a=r.head-n.from,c=Zr.find(e,a,(l=r.bidiLevel)!==null&&l!==void 0?l:-1,r.assoc),h=e[c],p=h.side(s,t);if(a==p){let v=c+=s?1:-1;if(v<0||v>=e.length)return null;h=e[c=v],a=h.side(!s,t),p=h.side(s,t)}let d=Vt(n.text,a,h.forward(s,t));(d<h.from||d>h.to)&&(d=p),$v=n.text.slice(Math.min(a,d),Math.max(a,d));let m=c==(s?e.length-1:0)?null:e[c+(s?1:-1)];return m&&d==p&&m.level+(s?0:1)<h.level?ne.cursor(m.side(!s,t)+n.from,m.forward(s,t)?1:-1,m.level):ne.cursor(d+n.from,h.forward(s,t)?-1:1,h.level)}function kC(n,e,t){for(let r=e;r<t;r++){let s=Hv(n.charCodeAt(r));if(s==1)return Ti;if(s==2||s==4)return kd}return Ti}const Uv=we.define(),Xv=we.define(),Kv=we.define(),qv=we.define(),If=we.define(),Yv=we.define(),Gv=we.define(),bd=we.define(),Sd=we.define(),Jv=we.define({combine:n=>n.some(e=>e)}),Zv=we.define({combine:n=>n.some(e=>e)}),ex=we.define();class gs{constructor(e,t="nearest",r="nearest",s=5,l=5,a=!1){this.range=e,this.y=t,this.x=r,this.yMargin=s,this.xMargin=l,this.isSnapshot=a}map(e){return e.empty?this:new gs(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new gs(ne.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ra=pt.define({map:(n,e)=>n.map(e)}),tx=pt.define();function nr(n,e,t){let r=n.facet(qv);r.length?r[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const xr=we.define({combine:n=>n.length?n[0]:!0});let bC=0;const as=we.define({combine(n){return n.filter((e,t)=>{for(let r=0;r<t;r++)if(n[r].plugin==e.plugin)return!1;return!0})}});class Fn{constructor(e,t,r,s,l){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=s,this.baseExtensions=l(this),this.extension=this.baseExtensions.concat(as.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(as.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:r,eventObservers:s,provide:l,decorations:a}=t||{};return new Fn(bC++,e,r,s,c=>{let h=[];return a&&h.push(qo.of(p=>{let d=p.plugin(c);return d?a(d):tt.none})),l&&h.push(l(c)),h})}static fromClass(e,t){return Fn.define((r,s)=>new e(r,s),t)}}class Bh{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(nr(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){nr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){nr(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const nx=we.define(),Od=we.define(),qo=we.define(),rx=we.define(),al=we.define(),ix=we.define();function u0(n,e){let t=n.state.facet(ix);if(!t.length)return t;let r=t.map(l=>l instanceof Function?l(n):l),s=[];return je.spans(r,e.from,e.to,{point(){},span(l,a,c,h){let p=l-e.from,d=a-e.from,m=s;for(let v=c.length-1;v>=0;v--,h--){let x=c[v].spec.bidiIsolate,k;if(x==null&&(x=kC(e.text,p,d)),h>0&&m.length&&(k=m[m.length-1]).to==p&&k.direction==x)k.to=d,m=k.inner;else{let S={from:p,to:d,direction:x,inner:[]};m.push(S),m=S.inner}}}}),s}const sx=we.define();function ox(n){let e=0,t=0,r=0,s=0;for(let l of n.state.facet(sx)){let a=l(n);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(r=Math.max(r,a.top)),a.bottom!=null&&(s=Math.max(s,a.bottom)))}return{left:e,right:t,top:r,bottom:s}}const Oo=we.define();class wn{constructor(e,t,r,s){this.fromA=e,this.toA=t,this.fromB=r,this.toB=s}join(e){return new wn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>r.toA)){if(s.toA<r.fromA)break;r=r.join(s),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let s=0,l=0,a=0,c=0;;s++){let h=s==e.length?null:e[s],p=a-c,d=h?h.fromB:1e9;for(;l<t.length&&t[l]<d;){let m=t[l],v=t[l+1],x=Math.max(c,m),k=Math.min(d,v);if(x<=k&&new wn(x+p,k+p,x,k).addToSet(r),v>d)break;l+=2}if(!h)return r;new wn(h.fromA,h.toA,h.fromB,h.toB).addToSet(r),a=h.toA,c=h.toB}}}class du{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=xt.empty(this.startState.doc.length);for(let l of r)this.changes=this.changes.compose(l.changes);let s=[];this.changes.iterChangedRanges((l,a,c,h)=>s.push(new wn(l,a,c,h))),this.changedRanges=s}static create(e,t,r){return new du(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class c0 extends Fe{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=tt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new at],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new wn(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:p,toA:d})=>d<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!RC(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let l=s>-1?OC(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:p,to:d}=this.hasComposition;r=new wn(p,d,e.changes.mapPos(p,-1),e.changes.mapPos(d,1)).addToSet(r.slice())}this.hasComposition=l?{from:l.range.fromB,to:l.range.toB}:null,(le.ie||le.chrome)&&!l&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,c=this.updateDeco(),h=EC(a,c,e.changes);return r=wn.extendWithRanges(r,h),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,l),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=le.chrome||le.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||s.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let l=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof br&&a.widget instanceof Df&&l.push(a.dom);s.updateGaps(l)}updateChildren(e,t,r){let s=r?r.range.addToSet(e.slice()):e,l=this.childCursor(t);for(let a=s.length-1;;a--){let c=a>=0?s[a]:null;if(!c)break;let{fromA:h,toA:p,fromB:d,toB:m}=c,v,x,k,S;if(r&&r.range.fromB<m&&r.range.toB>d){let _=Io.build(this.view.state.doc,d,r.range.fromB,this.decorations,this.dynamicDecorationMap),I=Io.build(this.view.state.doc,r.range.toB,m,this.decorations,this.dynamicDecorationMap);x=_.breakAtStart,k=_.openStart,S=I.openEnd;let F=this.compositionView(r);I.breakAtStart?F.breakAfter=1:I.content.length&&F.merge(F.length,F.length,I.content[0],!1,I.openStart,0)&&(F.breakAfter=I.content[0].breakAfter,I.content.shift()),_.content.length&&F.merge(0,0,_.content[_.content.length-1],!0,0,_.openEnd)&&_.content.pop(),v=_.content.concat(F).concat(I.content)}else({content:v,breakAtStart:x,openStart:k,openEnd:S}=Io.build(this.view.state.doc,d,m,this.decorations,this.dynamicDecorationMap));let{i:C,off:E}=l.findPos(p,1),{i:A,off:N}=l.findPos(h,-1);Iv(this,A,N,C,E,v,x,k,S)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(tx)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new zn(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new Sr(s,[t],t.length);let r=new at;return r.append(t,0),r}fixCompositionDOM(e){let t=(l,a)=>{a.flags|=8|(a.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(a);let c=Fe.get(l);c&&c!=a&&(c.dom=null),a.setDOM(l)},r=this.childPos(e.range.fromB,1),s=this.children[r.i];t(e.line,s);for(let l=e.marks.length-1;l>=-1;l--)r=s.childPos(r.off,1),s=s.children[r.i],t(l>=0?e.marks[l].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,s=r==this.dom,l=!s&&!(this.view.state.facet(xr)||this.dom.tabIndex>-1)&&Ka(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(s||t||l))return;let a=this.forceSelection;this.forceSelection=!1;let c=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(c.anchor)),p=c.empty?h:this.moveToLine(this.domAtPos(c.head));if(le.gecko&&c.empty&&!this.hasComposition&&SC(h)){let m=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(m,h.node.childNodes[h.offset]||null)),h=p=new Lt(m,0),a=!0}let d=this.view.observer.selectionRange;(a||!d.focusNode||(!Lo(h.node,h.offset,d.anchorNode,d.anchorOffset)||!Lo(p.node,p.offset,d.focusNode,d.focusOffset))&&!this.suppressWidgetCursorChange(d,c))&&(this.view.observer.ignore(()=>{le.android&&le.chrome&&this.dom.contains(d.focusNode)&&MC(d.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let m=Xo(this.view.root);if(m)if(c.empty){if(le.gecko){let v=CC(h.node,h.offset);if(v&&v!=3){let x=(v==1?Nv:Tv)(h.node,h.offset);x&&(h=new Lt(x.node,x.offset))}}m.collapse(h.node,h.offset),c.bidiLevel!=null&&m.caretBidiLevel!==void 0&&(m.caretBidiLevel=c.bidiLevel)}else if(m.extend){m.collapse(h.node,h.offset);try{m.extend(p.node,p.offset)}catch{}}else{let v=document.createRange();c.anchor>c.head&&([h,p]=[p,h]),v.setEnd(p.node,p.offset),v.setStart(h.node,h.offset),m.removeAllRanges(),m.addRange(v)}l&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(h,p)),this.impreciseAnchor=h.precise?null:new Lt(d.anchorNode,d.anchorOffset),this.impreciseHead=p.precise?null:new Lt(d.focusNode,d.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Lo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=Xo(e.root),{anchorNode:s,anchorOffset:l}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let a=at.find(this,t.head);if(!a)return;let c=a.posAtStart;if(t.head==c||t.head==c+a.length)return;let h=this.coordsAt(t.head,-1),p=this.coordsAt(t.head,1);if(!h||!p||h.bottom>p.top)return;let d=this.domAtPos(t.head+t.assoc);r.collapse(d.node,d.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let m=e.observer.selectionRange;e.docView.posFromDOM(m.anchorNode,m.anchorOffset)!=t.from&&r.collapse(s,l)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let s=e.offset;!r&&s<t.childNodes.length;s++){let l=Fe.get(t.childNodes[s]);l instanceof at&&(r=l.domAtPos(0))}for(let s=e.offset-1;!r&&s>=0;s--){let l=Fe.get(t.childNodes[s]);l instanceof at&&(r=l.domAtPos(l.length))}return r?new Lt(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=Fe.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(r<s.length||s instanceof at)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,s=0;for(let l=this.length,a=this.children.length-1;a>=0;a--){let c=this.children[a],h=l-c.breakAfter,p=h-c.length;if(h<e)break;if(p<=e&&(p<e||c.covers(-1))&&(h>e||c.covers(1))&&(!r||c instanceof at&&!(r instanceof at&&t>=0)))r=c,s=p;else if(r&&p==e&&h==e&&c instanceof br&&Math.abs(t)<2){if(c.deco.startSide<0)break;a&&(r=null)}l=p}return r?r.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),s=this.children[t];if(!(s instanceof at))return null;for(;s.children.length;){let{i:c,off:h}=s.childPos(r,1);for(;;c++){if(c==s.children.length)return null;if((s=s.children[c]).length)break}r=h}if(!(s instanceof zn))return null;let l=Vt(s.text,r);if(l==r)return null;let a=Ni(s.dom,r,l).getClientRects();for(let c=0;c<a.length;c++){let h=a[c];if(c==a.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:s}=e,l=this.view.contentDOM.clientWidth,a=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,h=this.view.textDirection==et.LTR;for(let p=0,d=0;d<this.children.length;d++){let m=this.children[d],v=p+m.length;if(v>s)break;if(p>=r){let x=m.dom.getBoundingClientRect();if(t.push(x.height),a){let k=m.dom.lastChild,S=k?Ko(k):[];if(S.length){let C=S[S.length-1],E=h?C.right-x.left:x.right-C.left;E>c&&(c=E,this.minWidth=l,this.minWidthFrom=p,this.minWidthTo=v)}}}p=v+m.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?et.RTL:et.LTR}measureTextSize(){for(let l of this.children)if(l instanceof at){let a=l.measureTextSize();if(a)return a}let e=document.createElement("div"),t,r,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let l=Ko(e.firstChild)[0];t=e.getBoundingClientRect().height,r=l?l.width/27:7,s=l?l.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Lv(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,s=0;;s++){let l=s==t.viewports.length?null:t.viewports[s],a=l?l.from-1:this.length;if(a>r){let c=(t.lineBlockAt(a).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(tt.replace({widget:new Df(c),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!l)break;r=l.to+1}return tt.set(e)}updateDeco(){let e=1,t=this.view.state.facet(qo).map(l=>(this.dynamicDecorationMap[e++]=typeof l=="function")?l(this.view):l),r=!1,s=this.view.state.facet(rx).map((l,a)=>{let c=typeof l=="function";return c&&(r=!0),c?l(this.view):l});for(s.length&&(this.dynamicDecorationMap[e++]=r,t.push(je.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let p=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=p.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let p of this.view.state.facet(ex))try{if(p(this.view,e.range,e))return!0}catch(d){nr(this.view.state,d,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!r)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,s.left),top:Math.min(r.top,s.top),right:Math.max(r.right,s.right),bottom:Math.max(r.bottom,s.bottom)});let l=ox(this.view),a={left:r.left-l.left,top:r.top-l.top,right:r.right+l.right,bottom:r.bottom+l.bottom},{offsetWidth:c,offsetHeight:h}=this.view.scrollDOM;nC(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,c),-c),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==et.LTR)}lineHasWidget(e){let{i:t}=this.childCursor().findPos(e);if(t==this.children.length)return!1;let r=s=>s instanceof Jr||s.children.some(r);return r(this.children[t])}}function SC(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function lx(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=Nv(t.focusNode,t.focusOffset),s=Tv(t.focusNode,t.focusOffset),l=r||s;if(s&&r&&s.node!=r.node){let c=Fe.get(s.node);if(!c||c instanceof zn&&c.text!=s.node.nodeValue)l=s;else if(n.docView.lastCompositionAfterCursor){let h=Fe.get(r.node);!h||h instanceof zn&&h.text!=r.node.nodeValue||(l=s)}}if(n.docView.lastCompositionAfterCursor=l!=r,!l)return null;let a=e-l.offset;return{from:a,to:a+l.node.nodeValue.length,node:l.node}}function OC(n,e,t){let r=lx(n,t);if(!r)return null;let{node:s,from:l,to:a}=r,c=s.nodeValue;if(/[\n\r]/.test(c)||n.state.doc.sliceString(r.from,r.to)!=c)return null;let h=e.invertedDesc,p=new wn(h.mapPos(l),h.mapPos(a),l,a),d=[];for(let m=s.parentNode;;m=m.parentNode){let v=Fe.get(m);if(v instanceof Sr)d.push({node:m,deco:v.mark});else{if(v instanceof at||m.nodeName=="DIV"&&m.parentNode==n.contentDOM)return{range:p,text:s,marks:d,line:m};if(m!=n.contentDOM)d.push({node:m,deco:new ol({inclusive:!0,attributes:hC(m),tagName:m.tagName.toLowerCase()})});else return null}}}function CC(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let PC=class{constructor(){this.changes=[]}compareRange(e,t){qa(e,t,this.changes)}comparePoint(e,t){qa(e,t,this.changes)}boundChange(e){qa(e,e,this.changes)}};function EC(n,e,t){let r=new PC;return je.compare(n,e,t,r),r.changes}function MC(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function RC(n,e){let t=!1;return e&&n.iterChangedRanges((r,s)=>{r<e.to&&s>e.from&&(t=!0)}),t}function AC(n,e,t=1){let r=n.charCategorizer(e),s=n.doc.lineAt(e),l=e-s.from;if(s.length==0)return ne.cursor(e);l==0?t=1:l==s.length&&(t=-1);let a=l,c=l;t<0?a=Vt(s.text,l,!1):c=Vt(s.text,l);let h=r(s.text.slice(a,c));for(;a>0;){let p=Vt(s.text,a,!1);if(r(s.text.slice(p,a))!=h)break;a=p}for(;c<s.length;){let p=Vt(s.text,c);if(r(s.text.slice(c,p))!=h)break;c=p}return ne.range(a+s.from,c+s.from)}function DC(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function NC(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function zh(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function h0(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function f0(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function jf(n,e,t){let r,s,l,a,c=!1,h,p,d,m;for(let k=n.firstChild;k;k=k.nextSibling){let S=Ko(k);for(let C=0;C<S.length;C++){let E=S[C];s&&zh(s,E)&&(E=h0(f0(E,s.bottom),s.top));let A=DC(e,E),N=NC(t,E);if(A==0&&N==0)return k.nodeType==3?d0(k,e,t):jf(k,e,t);(!r||a>N||a==N&&l>A)&&(r=k,s=E,l=A,a=N,c=A?e<E.left?C>0:C<S.length-1:!0),A==0?t>E.bottom&&(!d||d.bottom<E.bottom)?(h=k,d=E):t<E.top&&(!m||m.top>E.top)&&(p=k,m=E):d&&zh(d,E)?d=f0(d,E.bottom):m&&zh(m,E)&&(m=h0(m,E.top))}}if(d&&d.bottom>=t?(r=h,s=d):m&&m.top<=t&&(r=p,s=m),!r)return{node:n,offset:0};let v=Math.max(s.left,Math.min(s.right,e));if(r.nodeType==3)return d0(r,v,t);if(c&&r.contentEditable!="false")return jf(r,v,t);let x=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:x}}function d0(n,e,t){let r=n.nodeValue.length,s=-1,l=1e9,a=0;for(let c=0;c<r;c++){let h=Ni(n,c,c+1).getClientRects();for(let p=0;p<h.length;p++){let d=h[p];if(d.top==d.bottom)continue;a||(a=e-d.left);let m=(d.top>t?d.top-t:t-d.bottom)-1;if(d.left-1<=e&&d.right+1>=e&&m<l){let v=e>=(d.left+d.right)/2,x=v;if(le.chrome||le.gecko){let k=Ni(n,c).getBoundingClientRect();Math.abs(k.left-d.right)<.1&&(x=!v)}if(m<=0)return{node:n,offset:c+(x?1:0)};s=c+(x?1:0),l=m}}}return{node:n,offset:s>-1?s:a>0?n.nodeValue.length:0}}function ax(n,e,t,r=-1){var s,l;let a=n.contentDOM.getBoundingClientRect(),c=a.top+n.viewState.paddingTop,h,{docHeight:p}=n.viewState,{x:d,y:m}=e,v=m-c;if(v<0)return 0;if(v>p)return n.state.doc.length;for(let _=n.viewState.heightOracle.textHeight/2,I=!1;h=n.elementAtHeight(v),h.type!=Ht.Text;)for(;v=r>0?h.bottom+_:h.top-_,!(v>=0&&v<=p);){if(I)return t?null:0;I=!0,r=-r}m=c+v;let x=h.from;if(x<n.viewport.from)return n.viewport.from==0?0:t?null:p0(n,a,h,d,m);if(x>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:p0(n,a,h,d,m);let k=n.dom.ownerDocument,S=n.root.elementFromPoint?n.root:k,C=S.elementFromPoint(d,m);C&&!n.contentDOM.contains(C)&&(C=null),C||(d=Math.max(a.left+1,Math.min(a.right-1,d)),C=S.elementFromPoint(d,m),C&&!n.contentDOM.contains(C)&&(C=null));let E,A=-1;if(C&&((s=n.docView.nearest(C))===null||s===void 0?void 0:s.isEditable)!=!1){if(k.caretPositionFromPoint){let _=k.caretPositionFromPoint(d,m);_&&({offsetNode:E,offset:A}=_)}else if(k.caretRangeFromPoint){let _=k.caretRangeFromPoint(d,m);_&&({startContainer:E,startOffset:A}=_)}E&&(!n.contentDOM.contains(E)||le.safari&&TC(E,A,d)||le.chrome&&LC(E,A,d))&&(E=void 0),E&&(A=Math.min(ir(E),A))}if(!E||!n.docView.dom.contains(E)){let _=at.find(n.docView,x);if(!_)return v>h.top+h.height/2?h.to:h.from;({node:E,offset:A}=jf(_.dom,d,m))}let N=n.docView.nearest(E);if(!N)return null;if(N.isWidget&&((l=N.dom)===null||l===void 0?void 0:l.nodeType)==1){let _=N.dom.getBoundingClientRect();return e.y<_.top||e.y<=_.bottom&&e.x<=(_.left+_.right)/2?N.posAtStart:N.posAtEnd}else return N.localPosFromDOM(E,A)+N.posAtStart}function p0(n,e,t,r,s){let l=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let c=n.viewState.heightOracle.textHeight,h=Math.floor((s-t.top-(n.defaultLineHeight-c)*.5)/c);l+=h*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(t.from,t.to);return t.from+qO(a,l,n.state.tabSize)}function ux(n,e,t){let r,s=n;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(;;){let l=s.nextSibling;if(l){if(l.nodeName=="BR")break;return!1}else{let a=s.parentNode;if(!a||a.nodeName=="DIV")break;s=a}}return Ni(n,r-1,r).getBoundingClientRect().right>t}function TC(n,e,t){return ux(n,e,t)}function LC(n,e,t){if(e!=0)return ux(n,e,t);for(let s=n;;){let l=s.parentNode;if(!l||l.nodeType!=1||l.firstChild!=s)return!1;if(l.classList.contains("cm-line"))break;s=l}let r=n.nodeType==1?n.getBoundingClientRect():Ni(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function Bf(n,e,t){let r=n.lineBlockAt(e);if(Array.isArray(r.type)){let s;for(let l of r.type){if(l.from>e)break;if(!(l.to<e)){if(l.from<e&&l.to>e)return l;(!s||l.type==Ht.Text&&(s.type!=l.type||(t<0?l.from<e:l.to>e)))&&(s=l)}}return s||r}return r}function IC(n,e,t,r){let s=Bf(n,e.head,e.assoc||-1),l=!r||s.type!=Ht.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(l){let a=n.dom.getBoundingClientRect(),c=n.textDirectionAt(s.from),h=n.posAtCoords({x:t==(c==et.LTR)?a.right-1:a.left+1,y:(l.top+l.bottom)/2});if(h!=null)return ne.cursor(h,t?-1:1)}return ne.cursor(t?s.to:s.from,t?-1:1)}function g0(n,e,t,r){let s=n.state.doc.lineAt(e.head),l=n.bidiSpans(s),a=n.textDirectionAt(s.from);for(let c=e,h=null;;){let p=wC(s,l,a,c,t),d=$v;if(!p){if(s.number==(t?n.state.doc.lines:1))return c;d=`
`,s=n.state.doc.line(s.number+(t?1:-1)),l=n.bidiSpans(s),p=n.visualLineSide(s,!t)}if(h){if(!h(d))return c}else{if(!r)return p;h=r(d)}c=p}}function jC(n,e,t){let r=n.state.charCategorizer(e),s=r(t);return l=>{let a=r(l);return s==wr.Space&&(s=a),s==a}}function BC(n,e,t,r){let s=e.head,l=t?1:-1;if(s==(t?n.state.doc.length:0))return ne.cursor(s,e.assoc);let a=e.goalColumn,c,h=n.contentDOM.getBoundingClientRect(),p=n.coordsAtPos(s,e.assoc||-1),d=n.documentTop;if(p)a==null&&(a=p.left-h.left),c=l<0?p.top:p.bottom;else{let x=n.viewState.lineBlockAt(s);a==null&&(a=Math.min(h.right-h.left,n.defaultCharacterWidth*(s-x.from))),c=(l<0?x.top:x.bottom)+d}let m=h.left+a,v=r??n.viewState.heightOracle.textHeight>>1;for(let x=0;;x+=10){let k=c+(v+x)*l,S=ax(n,{x:m,y:k},!1,l);if(k<h.top||k>h.bottom||(l<0?S<s:S>s)){let C=n.docView.coordsForChar(S),E=!C||k<C.top?-1:1;return ne.cursor(S,E,void 0,a)}}}function jo(n,e,t){for(;;){let r=0;for(let s of n)s.between(e-1,e+1,(l,a,c)=>{if(e>l&&e<a){let h=r||t||(e-l<a-e?-1:1);e=h<0?l:a,r=h}});if(!r)return e}}function cx(n,e){let t=null;for(let r=0;r<e.ranges.length;r++){let s=e.ranges[r],l=null;if(s.empty){let a=jo(n,s.from,0);a!=s.from&&(l=ne.cursor(a,-1))}else{let a=jo(n,s.from,-1),c=jo(n,s.to,1);(a!=s.from||c!=s.to)&&(l=ne.range(s.from==s.anchor?a:c,s.from==s.head?a:c))}l&&(t||(t=e.ranges.slice()),t[r]=l)}return t?ne.create(t,e.mainIndex):e}function Fh(n,e,t){let r=jo(n.state.facet(al).map(s=>s(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:ne.cursor(r,r<t.from?1:-1)}const Co="";class zC{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ie.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Co}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let s=e;;){this.findPointBefore(r,s);let l=this.text.length;this.readNode(s);let a=s.nextSibling;if(a==t)break;let c=Fe.get(s),h=Fe.get(a);(c&&h?c.breakAfter:(c?c.breakAfter:hu(s))||hu(a)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>l)&&!_C(a,t)&&this.lineBreak(),s=a}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,a=1,c;if(this.lineSeparator?(l=t.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(c=s.exec(t))&&(l=c.index,a=c[0].length),this.append(t.slice(r,l<0?t.length:l)),l<0)break;if(this.lineBreak(),a>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=a-1);r=l+a}}readNode(e){if(e.cmIgnore)return;let t=Fe.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let s=r.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(FC(e,r.node,r.offset)?t:0))}}function FC(n,e,t){for(;;){if(!e||t<ir(e))return!1;if(e==n)return!0;t=Di(e)+1,e=e.parentNode}}function _C(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let r=Fe.get(n);if(!(r!=null&&r.isWidget||n.cmIgnore))return!1;r&&(t||(t=[])).push(r)}if(t)for(let r of t){let s=r.overrideDOMText;if(s!=null&&s.length)return!1}return!0}class m0{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class VC{constructor(e,t,r,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:l,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let c=l||a?[]:WC(e),h=new zC(c,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=QC(c,this.bounds.from)}else{let c=e.observer.selectionRange,h=l&&l.node==c.focusNode&&l.offset==c.focusOffset||!Mf(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),p=a&&a.node==c.anchorNode&&a.offset==c.anchorOffset||!Mf(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset),d=e.viewport;if((le.ios||le.chrome)&&e.state.selection.main.empty&&h!=p&&(d.from>0||d.to<e.state.doc.length)){let m=Math.min(h,p),v=Math.max(h,p),x=d.from-m,k=d.to-v;(x==0||x==1||m==0)&&(k==0||k==-1||v==e.state.doc.length)&&(h=0,p=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(ne.range(p,h)):this.newSel=ne.single(p,h)}}}function hx(n,e){let t,{newSel:r}=e,s=n.state.selection.main,l=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:c}=e.bounds,h=s.from,p=null;(l===8||le.android&&e.text.length<c-a)&&(h=s.to,p="end");let d=fx(n.state.doc.sliceString(a,c,Co),e.text,h-a,p);d&&(le.chrome&&l==13&&d.toB==d.from+2&&e.text.slice(d.from,d.toB)==Co+Co&&d.toB--,t={from:a+d.from,to:a+d.toA,insert:Ne.of(e.text.slice(d.from,d.toB).split(Co))})}else r&&(!n.hasFocus&&n.state.facet(xr)||r.main.eq(s))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!s.empty&&r&&r.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:(le.mac||le.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=ne.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:Ne.of([t.insert.toString().replace("."," ")])}):t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:n.state.doc.lineAt(s.from).to<s.to&&n.docView.lineHasWidget(s.to)&&n.inputState.insertingTextAt>Date.now()-50?t={from:s.from,to:s.to,insert:n.state.toText(n.inputState.insertingText)}:le.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=ne.single(r.main.anchor-1,r.main.head-1)),t={from:s.from,to:s.to,insert:Ne.of([" "])}),t)return Cd(n,t,r,l);if(r&&!r.main.eq(s)){let a=!1,c="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),c=n.inputState.lastSelectionOrigin,c=="select.pointer"&&(r=cx(n.state.facet(al).map(h=>h(n)),r))),n.dispatch({selection:r,scrollIntoView:a,userEvent:c}),!0}else return!1}function Cd(n,e,t,r=-1){if(le.ios&&n.inputState.flushIOSKey(e))return!0;let s=n.state.selection.main;if(le.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&n.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ps(n.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&ps(n.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&ps(n.contentDOM,"Delete",46)))return!0;let l=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let a,c=()=>a||(a=HC(n,e,t));return n.state.facet(Yv).some(h=>h(n,e.from,e.to,l,c))||n.dispatch(c()),!0}function HC(n,e,t){let r,s=n.state,l=s.selection.main,a=-1;if(e.from==e.to&&e.from<l.from||e.from>l.to){let h=e.from<l.from?-1:1,p=h<0?l.from:l.to,d=jo(s.facet(al).map(m=>m(n)),p,h);e.from==d&&(a=d)}if(a>-1)r={changes:e,selection:ne.cursor(e.from+e.insert.length,-1)};else if(e.from>=l.from&&e.to<=l.to&&e.to-e.from>=(l.to-l.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let h=l.from<e.from?s.sliceDoc(l.from,e.from):"",p=l.to>e.to?s.sliceDoc(e.to,l.to):"";r=s.replaceSelection(n.state.toText(h+e.insert.sliceString(0,void 0,n.state.lineBreak)+p))}else{let h=s.changes(e),p=t&&t.main.to<=h.newLength?t.main:void 0;if(s.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&e.to<=l.to+10&&e.to>=l.to-10){let d=n.state.sliceDoc(e.from,e.to),m,v=t&&lx(n,t.main.head);if(v){let k=e.insert.length-(e.to-e.from);m={from:v.from,to:v.to-k}}else m=n.state.doc.lineAt(l.head);let x=l.to-e.to;r=s.changeByRange(k=>{if(k.from==l.from&&k.to==l.to)return{changes:h,range:p||k.map(h)};let S=k.to-x,C=S-d.length;if(n.state.sliceDoc(C,S)!=d||S>=m.from&&C<=m.to)return{range:k};let E=s.changes({from:C,to:S,insert:e.insert}),A=k.to-l.to;return{changes:E,range:p?ne.range(Math.max(0,p.anchor+A),Math.max(0,p.head+A)):k.map(E)}})}else r={changes:h,selection:p&&s.selection.replaceRange(p)}}let c="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,c+=".compose",n.inputState.compositionFirstChange&&(c+=".start",n.inputState.compositionFirstChange=!1)),s.update(r,{userEvent:c,scrollIntoView:!0})}function fx(n,e,t,r){let s=Math.min(n.length,e.length),l=0;for(;l<s&&n.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==s&&n.length==e.length)return null;let a=n.length,c=e.length;for(;a>0&&c>0&&n.charCodeAt(a-1)==e.charCodeAt(c-1);)a--,c--;if(r=="end"){let h=Math.max(0,l-Math.min(a,c));t-=a+h-l}if(a<l&&n.length<e.length){let h=t<=l&&t>=a?l-t:0;l-=h,c=l+(c-a),a=l}else if(c<l){let h=t<=l&&t>=c?l-t:0;l-=h,a=l+(a-c),c=l}return{from:l,toA:a,toB:c}}function WC(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:l}=n.observer.selectionRange;return t&&(e.push(new m0(t,r)),(s!=t||l!=r)&&e.push(new m0(s,l))),e}function QC(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?ne.single(t+e,r+e):null}class $C{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,le.safari&&e.contentDOM.addEventListener("input",()=>null),le.gecko&&l2(e.contentDOM.ownerDocument)}handleEvent(e){!ZC(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let s of r.observers)s(this.view,t);for(let s of r.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=UC(e),r=this.handlers,s=this.view.contentDOM;for(let l in t)if(l!="scroll"){let a=!t[l].handlers.length,c=r[l];c&&a!=!c.handlers.length&&(s.removeEventListener(l,this.handleEvent),c=null),c||s.addEventListener(l,this.handleEvent,{passive:a})}for(let l in r)l!="scroll"&&!t[l]&&s.removeEventListener(l,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&px.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),le.android&&le.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return le.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=dx.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||XC.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ps(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:le.safari&&!le.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function y0(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(s){nr(t.state,s)}}}function UC(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let s=r.spec,l=s&&s.plugin.domEventHandlers,a=s&&s.plugin.domEventObservers;if(l)for(let c in l){let h=l[c];h&&t(c).handlers.push(y0(r.value,h))}if(a)for(let c in a){let h=a[c];h&&t(c).observers.push(y0(r.value,h))}}for(let r in _n)t(r).handlers.push(_n[r]);for(let r in bn)t(r).observers.push(bn[r]);return e}const dx=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],XC="dthko",px=[16,17,18,20,91,92,224,225],Aa=6;function Da(n){return Math.max(0,n)*.7+8}function KC(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class qC{constructor(e,t,r,s){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=rC(e.contentDOM),this.atoms=e.state.facet(al).map(a=>a(e));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ie.allowMultipleSelections)&&YC(e,t),this.dragging=JC(e,t)&&yx(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&KC(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,s=0,l=0,a=this.view.win.innerWidth,c=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:l,bottom:c}=this.scrollParents.y.getBoundingClientRect());let h=ox(this.view);e.clientX-h.left<=s+Aa?t=-Da(s-e.clientX):e.clientX+h.right>=a-Aa&&(t=Da(e.clientX-a)),e.clientY-h.top<=l+Aa?r=-Da(l-e.clientY):e.clientY+h.bottom>=c-Aa&&(r=Da(e.clientY-c)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,r=cx(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function YC(n,e){let t=n.state.facet(Uv);return t.length?t[0](e):le.mac?e.metaKey:e.ctrlKey}function GC(n,e){let t=n.state.facet(Xv);return t.length?t[0](e):le.mac?!e.altKey:!e.ctrlKey}function JC(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=Xo(n.root);if(!r||r.rangeCount==0)return!0;let s=r.getRangeAt(0).getClientRects();for(let l=0;l<s.length;l++){let a=s[l];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function ZC(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Fe.get(t))&&r.ignoreEvent(e))return!1;return!0}const _n=Object.create(null),bn=Object.create(null),gx=le.ie&&le.ie_version<15||le.ios&&le.webkit_version<604;function e2(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),mx(n,t.value)},50)}function Lu(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function mx(n,e){e=Lu(n.state,bd,e);let{state:t}=n,r,s=1,l=t.toText(e),a=l.lines==t.selection.ranges.length;if(zf!=null&&t.selection.ranges.every(h=>h.empty)&&zf==l.toString()){let h=-1;r=t.changeByRange(p=>{let d=t.doc.lineAt(p.from);if(d.from==h)return{range:p};h=d.from;let m=t.toText((a?l.line(s++).text:e)+t.lineBreak);return{changes:{from:d.from,insert:m},range:ne.cursor(p.from+m.length)}})}else a?r=t.changeByRange(h=>{let p=l.line(s++);return{changes:{from:h.from,to:h.to,insert:p.text},range:ne.cursor(h.from+p.length)}}):r=t.replaceSelection(l);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}bn.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};_n.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);bn.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};bn.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};_n.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(Kv))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=r2(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new qC(n,e,t,r)),r&&n.observer.ignore(()=>{Rv(n.contentDOM);let l=n.root.activeElement;l&&!l.contains(n.contentDOM)&&l.blur()});let s=n.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function v0(n,e,t,r){if(r==1)return ne.cursor(e,t);if(r==2)return AC(n.state,e,t);{let s=at.find(n.docView,e),l=n.state.doc.lineAt(s?s.posAtEnd:e),a=s?s.posAtStart:l.from,c=s?s.posAtEnd:l.to;return c<n.state.doc.length&&c==l.to&&c++,ne.range(a,c)}}let x0=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function t2(n,e,t,r){let s=at.find(n.docView,e);if(!s)return 1;let l=e-s.posAtStart;if(l==0)return 1;if(l==s.length)return-1;let a=s.coordsAt(l,-1);if(a&&x0(t,r,a))return-1;let c=s.coordsAt(l,1);return c&&x0(t,r,c)?1:a&&a.bottom>=r?-1:1}function w0(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:t2(n,t,e.clientX,e.clientY)}}const n2=le.ie&&le.ie_version<=11;let k0=null,b0=0,S0=0;function yx(n){if(!n2)return n.detail;let e=k0,t=S0;return k0=n,S0=Date.now(),b0=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(b0+1)%3:1}function r2(n,e){let t=w0(n,e),r=yx(e),s=n.state.selection;return{update(l){l.docChanged&&(t.pos=l.changes.mapPos(t.pos),s=s.map(l.changes))},get(l,a,c){let h=w0(n,l),p,d=v0(n,h.pos,h.bias,r);if(t.pos!=h.pos&&!a){let m=v0(n,t.pos,t.bias,r),v=Math.min(m.from,d.from),x=Math.max(m.to,d.to);d=v<d.from?ne.range(v,x):ne.range(x,v)}return a?s.replaceRange(s.main.extend(d.from,d.to)):c&&r==1&&s.ranges.length>1&&(p=i2(s,h.pos))?p:c?s.addRange(d):ne.create([d])}}}function i2(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:s}=n.ranges[t];if(r<=e&&s>=e)return ne.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}_n.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let s=n.docView.nearest(e.target);if(s&&s.isWidget){let l=s.posAtStart,a=l+s.length;(l>=t.to||a<=t.from)&&(t=ne.range(l,a))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Lu(n.state,Sd,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};_n.dragend=n=>(n.inputState.draggedContent=null,!1);function O0(n,e,t,r){if(t=Lu(n.state,bd,t),!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:l}=n.inputState,a=r&&l&&GC(n,e)?{from:l.from,to:l.to}:null,c={from:s,insert:t},h=n.state.changes(a?[a,c]:c);n.focus(),n.dispatch({changes:h,selection:{anchor:h.mapPos(s,-1),head:h.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"}),n.inputState.draggedContent=null}_n.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),s=0,l=()=>{++s==t.length&&O0(n,e,r.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let c=new FileReader;c.onerror=l,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(r[a]=c.result),l()},c.readAsText(t[a])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return O0(n,e,r,!0),!0}return!1};_n.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=gx?null:e.clipboardData;return t?(mx(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(e2(n),!1)};function s2(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function o2(n){let e=[],t=[],r=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:l}of n.selection.ranges){let a=n.doc.lineAt(l);a.number>s&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),s=a.number}r=!0}return{text:Lu(n,Sd,e.join(n.lineBreak)),ranges:t,linewise:r}}let zf=null;_n.copy=_n.cut=(n,e)=>{let{text:t,ranges:r,linewise:s}=o2(n.state);if(!t&&!s)return!1;zf=s?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let l=gx?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",t),!0):(s2(n,t),!1)};const vx=Rs.define();function xx(n,e){let t=[];for(let r of n.facet(Gv)){let s=r(n,e);s&&t.push(s)}return t.length?n.update({effects:t,annotations:vx.of(!0)}):null}function wx(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=xx(n.state,e);t?n.dispatch(t):n.update([])}},10)}bn.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),wx(n)};bn.blur=n=>{n.observer.clearSelectionRange(),wx(n)};bn.compositionstart=bn.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};bn.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,le.chrome&&le.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};bn.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};_n.beforeinput=(n,e)=>{var t,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let l=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),a=e.getTargetRanges();if(l&&a.length){let c=a[0],h=n.posAtDOM(c.startContainer,c.startOffset),p=n.posAtDOM(c.endContainer,c.endOffset);return Cd(n,{from:h,to:p,insert:n.state.toText(l)},null),!0}}let s;if(le.chrome&&le.android&&(s=dx.find(l=>l.inputType==e.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let l=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>l+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return le.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),le.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>bn.compositionend(n,e),20),!1};const C0=new Set;function l2(n){C0.has(n)||(C0.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const P0=["pre-wrap","normal","pre-line","break-spaces"];let ks=!1;function E0(){ks=!1}class a2{constructor(e){this.lineWrapping=e,this.doc=Ne.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return P0.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let s=e[r];s<0?r++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,r,s,l,a){let c=P0.indexOf(e)>-1,h=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=c;if(this.lineWrapping=c,this.lineHeight=t,this.charWidth=r,this.textHeight=s,this.lineLength=l,h){this.heightSamples={};for(let p=0;p<a.length;p++){let d=a[p];d<0?p++:this.heightSamples[Math.floor(d*10)]=!0}}return h}}class u2{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class tr{constructor(e,t,r,s,l){this.from=e,this.length=t,this.top=r,this.height=s,this._content=l}get type(){return typeof this._content=="number"?Ht.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof si?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new tr(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Ue=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(Ue||(Ue={}));const Ya=.001;class Wt{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ya&&(ks=!0),this.height=e)}replace(e,t,r){return Wt.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,s){let l=this,a=r.doc;for(let c=s.length-1;c>=0;c--){let{fromA:h,toA:p,fromB:d,toB:m}=s[c],v=l.lineAt(h,Ue.ByPosNoHeight,r.setDoc(t),0,0),x=v.to>=p?v:l.lineAt(p,Ue.ByPosNoHeight,r,0,0);for(m+=x.to-p,p=x.to;c>0&&v.from<=s[c-1].toA;)h=s[c-1].fromA,d=s[c-1].fromB,c--,h<v.from&&(v=l.lineAt(h,Ue.ByPosNoHeight,r,0,0));d+=v.from-h,h=v.from;let k=Pd.build(r.setDoc(a),e,d,m);l=pu(l,l.replace(h,p,k))}return l.updateHeight(r,0)}static empty(){return new un(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,s=0,l=0;for(;;)if(t==r)if(s>l*2){let c=e[t-1];c.break?e.splice(--t,1,c.left,null,c.right):e.splice(--t,1,c.left,c.right),r+=1+c.break,s-=c.size}else if(l>s*2){let c=e[r];c.break?e.splice(r,1,c.left,null,c.right):e.splice(r,1,c.left,c.right),r+=2+c.break,l-=c.size}else break;else if(s<l){let c=e[t++];c&&(s+=c.size)}else{let c=e[--r];c&&(l+=c.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,r++),new c2(Wt.of(e.slice(0,t)),a,Wt.of(e.slice(r)))}}function pu(n,e){return n==e?n:(n.constructor!=e.constructor&&(ks=!0),e)}Wt.prototype.size=1;class kx extends Wt{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,s){return new tr(s,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,s,l){return this.blockAt(0,r,s,l)}forEachLine(e,t,r,s,l,a){e<=l+this.length&&t>=l&&a(this.blockAt(0,r,s,l))}updateHeight(e,t=0,r=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class un extends kx{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,s){return new tr(s,this.length,r,this.height,this.breaks)}replace(e,t,r){let s=r[0];return r.length==1&&(s instanceof un||s instanceof St&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof St?s=new un(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):Wt.of(r)}updateHeight(e,t=0,r=!1,s){return s&&s.from<=t&&s.more?this.setHeight(s.heights[s.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class St extends Wt{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,l=s-r+1,a,c=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*l);a=h/l,this.length>l+1&&(c=(this.height-h)/(this.length-l-1))}else a=this.height/l;return{firstLine:r,lastLine:s,perLine:a,perChar:c}}blockAt(e,t,r,s){let{firstLine:l,lastLine:a,perLine:c,perChar:h}=this.heightMetrics(t,s);if(t.lineWrapping){let p=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),d=t.doc.lineAt(p),m=c+d.length*h,v=Math.max(r,e-m/2);return new tr(d.from,d.length,v,m,0)}else{let p=Math.max(0,Math.min(a-l,Math.floor((e-r)/c))),{from:d,length:m}=t.doc.line(l+p);return new tr(d,m,r+c*p,c,0)}}lineAt(e,t,r,s,l){if(t==Ue.ByHeight)return this.blockAt(e,r,s,l);if(t==Ue.ByPosNoHeight){let{from:x,to:k}=r.doc.lineAt(e);return new tr(x,k-x,0,0,0)}let{firstLine:a,perLine:c,perChar:h}=this.heightMetrics(r,l),p=r.doc.lineAt(e),d=c+p.length*h,m=p.number-a,v=s+c*m+h*(p.from-l-m);return new tr(p.from,p.length,Math.max(s,Math.min(v,s+this.height-d)),d,0)}forEachLine(e,t,r,s,l,a){e=Math.max(e,l),t=Math.min(t,l+this.length);let{firstLine:c,perLine:h,perChar:p}=this.heightMetrics(r,l);for(let d=e,m=s;d<=t;){let v=r.doc.lineAt(d);if(d==e){let k=v.number-c;m+=h*k+p*(e-l-k)}let x=h+p*v.length;a(new tr(v.from,v.length,m,x,0)),m+=x,d=v.to+1}}replace(e,t,r){let s=this.length-t;if(s>0){let l=r[r.length-1];l instanceof St?r[r.length-1]=new St(l.length+s):r.push(null,new St(s-1))}if(e>0){let l=r[0];l instanceof St?r[0]=new St(e+l.length):r.unshift(new St(e-1),null)}return Wt.of(r)}decomposeLeft(e,t){t.push(new St(e-1),null)}decomposeRight(e,t){t.push(null,new St(this.length-e-1))}updateHeight(e,t=0,r=!1,s){let l=t+this.length;if(s&&s.from<=t+this.length&&s.more){let a=[],c=Math.max(t,s.from),h=-1;for(s.from>t&&a.push(new St(s.from-t-1).updateHeight(e,t));c<=l&&s.more;){let d=e.doc.lineAt(c).length;a.length&&a.push(null);let m=s.heights[s.index++];h==-1?h=m:Math.abs(m-h)>=Ya&&(h=-2);let v=new un(d,m);v.outdated=!1,a.push(v),c+=d+1}c<=l&&a.push(null,new St(l-c).updateHeight(e,c));let p=Wt.of(a);return(h<0||Math.abs(p.height-this.height)>=Ya||Math.abs(h-this.heightMetrics(e,t).perLine)>=Ya)&&(ks=!0),pu(this,p)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class c2 extends Wt{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,s){let l=r+this.left.height;return e<l?this.left.blockAt(e,t,r,s):this.right.blockAt(e,t,l,s+this.left.length+this.break)}lineAt(e,t,r,s,l){let a=s+this.left.height,c=l+this.left.length+this.break,h=t==Ue.ByHeight?e<a:e<c,p=h?this.left.lineAt(e,t,r,s,l):this.right.lineAt(e,t,r,a,c);if(this.break||(h?p.to<c:p.from>c))return p;let d=t==Ue.ByPosNoHeight?Ue.ByPosNoHeight:Ue.ByPos;return h?p.join(this.right.lineAt(c,d,r,a,c)):this.left.lineAt(c,d,r,s,l).join(p)}forEachLine(e,t,r,s,l,a){let c=s+this.left.height,h=l+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,t,r,s,l,a),t>=h&&this.right.forEachLine(e,t,r,c,h,a);else{let p=this.lineAt(h,Ue.ByPos,r,s,l);e<p.from&&this.left.forEachLine(e,p.from-1,r,s,l,a),p.to>=e&&p.from<=t&&a(p),t>p.to&&this.right.forEachLine(p.to+1,t,r,c,h,a)}}replace(e,t,r){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,r));let l=[];e>0&&this.decomposeLeft(e,l);let a=l.length;for(let c of r)l.push(c);if(e>0&&M0(l,a-1),t<this.length){let c=l.length;this.decomposeRight(t,l),M0(l,c)}return Wt.of(l)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,s=r+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Wt.of(this.break?[e,null,t]:[e,t]):(this.left=pu(this.left,e),this.right=pu(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,s){let{left:l,right:a}=this,c=t+l.length+this.break,h=null;return s&&s.from<=t+l.length&&s.more?h=l=l.updateHeight(e,t,r,s):l.updateHeight(e,t,r),s&&s.from<=c+a.length&&s.more?h=a=a.updateHeight(e,c,r,s):a.updateHeight(e,c,r),h?this.balanced(l,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function M0(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof St&&(r=n[e+1])instanceof St&&n.splice(e-1,3,new St(t.length+1+r.length))}const h2=5;class Pd{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof un?s.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new un(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let s=r.widget?r.widget.estimatedHeight:0,l=r.widget?r.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let a=t-e;r.block?this.addBlock(new kx(a,s,r)):(a||l||s>=h2)&&this.addLineDeco(s,l,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new un(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new St(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof un)return e;let t=new un(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let s=this.ensureLine();s.length+=r,s.collapsed+=r,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof un)&&!this.isCovered?this.nodes.push(new un(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let s of this.nodes)s instanceof un&&s.updateHeight(this.oracle,r),r+=s?s.length:1;return this.nodes}static build(e,t,r,s){let l=new Pd(r,e);return je.spans(t,r,s,l,0),l.finish(r)}}function f2(n,e,t){let r=new d2;return je.compare(n,e,t,r,0),r.changes}class d2{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,s){(e<t||r&&r.heightRelevant||s&&s.heightRelevant)&&qa(e,t,this.changes,5)}}function p2(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,s=r.defaultView||window,l=Math.max(0,t.left),a=Math.min(s.innerWidth,t.right),c=Math.max(0,t.top),h=Math.min(s.innerHeight,t.bottom);for(let p=n.parentNode;p&&p!=r.body;)if(p.nodeType==1){let d=p,m=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&m.overflow!="visible"){let v=d.getBoundingClientRect();l=Math.max(l,v.left),a=Math.min(a,v.right),c=Math.max(c,v.top),h=Math.min(p==n.parentNode?s.innerHeight:h,v.bottom)}p=m.position=="absolute"||m.position=="fixed"?d.offsetParent:d.parentNode}else if(p.nodeType==11)p=p.host;else break;return{left:l-t.left,right:Math.max(l,a)-t.left,top:c-(t.top+e),bottom:Math.max(c,h)-(t.top+e)}}function g2(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function m2(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class _h{constructor(e,t,r,s){this.from=e,this.to=t,this.size=r,this.displaySize=s}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let s=e[r],l=t[r];if(s.from!=l.from||s.to!=l.to||s.size!=l.size)return!1}return!0}draw(e,t){return tt.replace({widget:new y2(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class y2 extends sl{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class R0{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=A0,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=et.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Od).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new a2(t),this.stateDeco=e.facet(qo).filter(r=>typeof r!="function"),this.heightMap=Wt.empty().applyChanges(this.stateDeco,Ne.empty,this.heightOracle.setDoc(e.doc),[new wn(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=tt.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let s=r?t.head:t.anchor;if(!e.some(({from:l,to:a})=>s>=l&&s<=a)){let{from:l,to:a}=this.lineBlockAt(s);e.push(new Na(l,a))}}return this.viewports=e.sort((r,s)=>r.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?A0:new Ed(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Po(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(qo).filter(d=>typeof d!="function");let s=e.changedRanges,l=wn.extendWithRanges(s,f2(r,this.stateDeco,e?e.changes:xt.empty(this.state.doc.length))),a=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);E0(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),(this.heightMap.height!=a||ks)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let h=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<h.from||t.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t));let p=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(p||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Zv)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),s=this.heightOracle,l=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?et.RTL:et.LTR;let a=this.heightOracle.mustRefreshForWrapping(l),c=t.getBoundingClientRect(),h=a||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let p=0,d=0;if(c.width&&c.height){let{scaleX:_,scaleY:I}=Mv(t,c);(_>.005&&Math.abs(this.scaleX-_)>.005||I>.005&&Math.abs(this.scaleY-I)>.005)&&(this.scaleX=_,this.scaleY=I,p|=16,a=h=!0)}let m=(parseInt(r.paddingTop)||0)*this.scaleY,v=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=m||this.paddingBottom!=v)&&(this.paddingTop=m,this.paddingBottom=v,p|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,p|=16);let x=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=x&&(this.scrollAnchorHeight=-1,this.scrollTop=x),this.scrolledToBottom=Dv(e.scrollDOM);let k=(this.printing?m2:p2)(t,this.paddingTop),S=k.top-this.pixelViewport.top,C=k.bottom-this.pixelViewport.bottom;this.pixelViewport=k;let E=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(E!=this.inView&&(this.inView=E,E&&(h=!0)),!this.inView&&!this.scrollTarget&&!g2(e.dom))return 0;let A=c.width;if((this.contentDOMWidth!=A||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,p|=16),h){let _=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(_)&&(a=!0),a||s.lineWrapping&&Math.abs(A-this.contentDOMWidth)>s.charWidth){let{lineHeight:I,charWidth:F,textHeight:B}=e.docView.measureTextSize();a=I>0&&s.refresh(l,I,F,B,Math.max(5,A/F),_),a&&(e.docView.minWidth=0,p|=16)}S>0&&C>0?d=Math.max(S,C):S<0&&C<0&&(d=Math.min(S,C)),E0();for(let I of this.viewports){let F=I.from==this.viewport.from?_:e.docView.measureVisibleLineHeights(I);this.heightMap=(a?Wt.empty().applyChanges(this.stateDeco,Ne.empty,this.heightOracle,[new wn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,a,new u2(I.from,F))}ks&&(p|=2)}let N=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return N&&(p&2&&(p|=this.updateScaler()),this.viewport=this.getViewport(d,this.scrollTarget),p|=this.updateForViewport()),(p&2||N)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),p|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),p}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,l=this.heightOracle,{visibleTop:a,visibleBottom:c}=this,h=new Na(s.lineAt(a-r*1e3,Ue.ByHeight,l,0,0).from,s.lineAt(c+(1-r)*1e3,Ue.ByHeight,l,0,0).to);if(t){let{head:p}=t.range;if(p<h.from||p>h.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),m=s.lineAt(p,Ue.ByPos,l,0,0),v;t.y=="center"?v=(m.top+m.bottom)/2-d/2:t.y=="start"||t.y=="nearest"&&p<h.from?v=m.top:v=m.bottom-d,h=new Na(s.lineAt(v-1e3/2,Ue.ByHeight,l,0,0).from,s.lineAt(v+d+1e3/2,Ue.ByHeight,l,0,0).to)}}return h}mapViewport(e,t){let r=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new Na(this.heightMap.lineAt(r,Ue.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,Ue.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,Ue.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(t,Ue.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:c}=this;return(e==0||s<=a-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||l>=c+Math.max(10,Math.min(r,250)))&&s>a-2*1e3&&l<c+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let s of e)t.touchesRange(s.from,s.to)||r.push(new _h(t.mapPos(s.from),t.mapPos(s.to),s.size,s.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,s=r?1e4:2e3,l=s>>1,a=s<<1;if(this.defaultTextDirection!=et.LTR&&!r)return[];let c=[],h=(d,m,v,x)=>{if(m-d<l)return;let k=this.state.selection.main,S=[k.from];k.empty||S.push(k.to);for(let E of S)if(E>d&&E<m){h(d,E-10,v,x),h(E+10,m,v,x);return}let C=x2(e,E=>E.from>=v.from&&E.to<=v.to&&Math.abs(E.from-d)<l&&Math.abs(E.to-m)<l&&!S.some(A=>E.from<A&&E.to>A));if(!C){if(m<v.to&&t&&r&&t.visibleRanges.some(N=>N.from<=m&&N.to>=m)){let N=t.moveToLineBoundary(ne.cursor(m),!1,!0).head;N>d&&(m=N)}let E=this.gapSize(v,d,m,x),A=r||E<2e6?E:2e6;C=new _h(d,m,E,A)}c.push(C)},p=d=>{if(d.length<a||d.type!=Ht.Text)return;let m=v2(d.from,d.to,this.stateDeco);if(m.total<a)return;let v=this.scrollTarget?this.scrollTarget.range.head:null,x,k;if(r){let S=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,C,E;if(v!=null){let A=La(m,v),N=((this.visibleBottom-this.visibleTop)/2+S)/d.height;C=A-N,E=A+N}else C=(this.visibleTop-d.top-S)/d.height,E=(this.visibleBottom-d.top+S)/d.height;x=Ta(m,C),k=Ta(m,E)}else{let S=m.total*this.heightOracle.charWidth,C=s*this.heightOracle.charWidth,E=0;if(S>2e6)for(let F of e)F.from>=d.from&&F.from<d.to&&F.size!=F.displaySize&&F.from*this.heightOracle.charWidth+E<this.pixelViewport.left&&(E=F.size-F.displaySize);let A=this.pixelViewport.left+E,N=this.pixelViewport.right+E,_,I;if(v!=null){let F=La(m,v),B=((N-A)/2+C)/S;_=F-B,I=F+B}else _=(A-C)/S,I=(N+C)/S;x=Ta(m,_),k=Ta(m,I)}x>d.from&&h(d.from,x,d,m),k<d.to&&h(k,d.to,d,m)};for(let d of this.viewportLines)Array.isArray(d.type)?d.type.forEach(p):p(d);return c}gapSize(e,t,r,s){let l=La(s,r)-La(s,t);return this.heightOracle.lineWrapping?e.height*l:s.total*this.heightOracle.charWidth*l}updateLineGaps(e){_h.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=tt.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];je.spans(t,this.viewport.from,this.viewport.to,{span(l,a){r.push({from:l,to:a})},point(){}},20);let s=0;if(r.length!=this.visibleRanges.length)s=12;else for(let l=0;l<r.length&&!(s&8);l++){let a=this.visibleRanges[l],c=r[l];(a.from!=c.from||a.to!=c.to)&&(s|=4,e&&e.mapPos(a.from,-1)==c.from&&e.mapPos(a.to,1)==c.to||(s|=8))}return this.visibleRanges=r,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Po(this.heightMap.lineAt(e,Ue.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Po(this.heightMap.lineAt(this.scaler.fromDOM(e),Ue.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Po(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Na{constructor(e,t){this.from=e,this.to=t}}function v2(n,e,t){let r=[],s=n,l=0;return je.spans(t,n,e,{span(){},point(a,c){a>s&&(r.push({from:s,to:a}),l+=a-s),s=c}},20),s<e&&(r.push({from:s,to:e}),l+=e-s),{total:l,ranges:r}}function Ta({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let s=0;;s++){let{from:l,to:a}=e[s],c=a-l;if(r<=c)return l+r;r-=c}}function La(n,e){let t=0;for(let{from:r,to:s}of n.ranges){if(e<=s){t+=e-r;break}t+=s-r}return t/n.total}function x2(n,e){for(let t of n)if(e(t))return t}const A0={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class Ed{constructor(e,t,r){let s=0,l=0,a=0;this.viewports=r.map(({from:c,to:h})=>{let p=t.lineAt(c,Ue.ByPos,e,0,0).top,d=t.lineAt(h,Ue.ByPos,e,0,0).bottom;return s+=d-p,{from:c,to:h,top:p,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let c of this.viewports)c.domTop=a+(c.top-l)*this.scale,a=c.domBottom=c.domTop+(c.bottom-c.top),l=c.bottom}toDOM(e){for(let t=0,r=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.top)return s+(e-r)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);r=l.bottom,s=l.domBottom}}fromDOM(e){for(let t=0,r=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.domTop)return r+(e-s)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);r=l.bottom,s=l.domBottom}}eq(e){return e instanceof Ed?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function Po(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new tr(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(s=>Po(s,e)):n._content)}const Ia=we.define({combine:n=>n.join(" ")}),Ff=we.define({combine:n=>n.indexOf(!0)>-1}),_f=ri.newName(),bx=ri.newName(),Sx=ri.newName(),Ox={"&light":"."+bx,"&dark":"."+Sx};function Vf(n,e,t){return new ri(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+r}})}const w2=Vf("."+_f,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Ox),k2={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Vh=le.ie&&le.ie_version<=11;class b2{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new iC,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(le.ie&&le.ie_version<=11||le.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&le.android&&e.constructor.EDIT_CONTEXT!==!1&&!(le.chrome&&le.chrome_version<126)&&(this.editContext=new O2(e),e.state.facet(xr)&&(e.contentDOM.editContext=this.editContext.editContext)),Vh&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,s=this.selectionRange;if(r.state.facet(xr)?r.root.activeElement!=this.dom:!Ka(this.dom,s))return;let l=s.anchorNode&&r.docView.nearest(s.anchorNode);if(l&&l.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(le.ie&&le.ie_version<=11||le.android&&le.chrome)&&!r.state.selection.main.empty&&s.focusNode&&Lo(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Xo(e.root);if(!t)return!1;let r=le.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&S2(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let s=Ka(this.dom,r);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&oC(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,k2),Vh&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Vh&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let s=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=l.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&l.force&&ps(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,s=!1;for(let l of e){let a=this.readMutation(l);a&&(a.typeOver&&(s=!0),t==-1?{from:t,to:r}=a:(t=Math.min(a.from,t),r=Math.max(a.to,r)))}return{from:t,to:r,typeOver:s}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),s=this.selectionChanged&&Ka(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let l=new VC(this.view,e,t,r);return this.view.docView.domChanged={newSel:l.newSel?l.newSel.main:null},l}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,s=hx(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=D0(t,e.previousSibling||e.target.previousSibling,-1),s=D0(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(xr)!=e.state.facet(xr)&&(e.view.contentDOM.editContext=e.state.facet(xr)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function D0(n,e,t){for(;e;){let r=Fe.get(e);if(r&&r.parent==n)return r;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function N0(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,l=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return Lo(a.node,a.offset,s,l)&&([t,r,s,l]=[s,l,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:l}}function S2(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return N0(n,s)}let t=null;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?N0(n,t):null}class O2{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let s=e.state.selection.main,{anchor:l,head:a}=s,c=this.toEditorPos(r.updateRangeStart),h=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:c,drifted:!1});let p=h-c>r.text.length;c==this.from&&l<this.from?c=l:h==this.to&&l>this.to&&(h=l);let d=fx(e.state.sliceDoc(c,h),r.text,(p?s.from:s.to)-c,p?"end":null);if(!d){let v=ne.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));v.main.eq(s)||e.dispatch({selection:v,userEvent:"select"});return}let m={from:d.from+c,to:d.toA+c,insert:Ne.of(r.text.slice(d.from,d.toB).split(`
`))};if((le.mac||le.android)&&m.from==a-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(m={from:c,to:h,insert:Ne.of([r.text.replace("."," ")])}),this.pendingContextChange=m,!e.state.readOnly){let v=this.to-this.from+(m.to-m.from+m.insert.length);Cd(e,m,ne.single(this.toEditorPos(r.selectionStart,v),this.toEditorPos(r.selectionEnd,v)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),m.from<m.to&&!m.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(t.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let s=[],l=null;for(let a=this.toEditorPos(r.rangeStart),c=this.toEditorPos(r.rangeEnd);a<c;a++){let h=e.coordsForChar(a);l=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||l||new DOMRect,s.push(l)}t.updateCharacterBounds(r.rangeStart,s)},this.handlers.textformatupdate=r=>{let s=[];for(let l of r.getTextFormats()){let a=l.underlineStyle,c=l.underlineThickness;if(!/none/i.test(a)&&!/none/i.test(c)){let h=this.toEditorPos(l.rangeStart),p=this.toEditorPos(l.rangeEnd);if(h<p){let d=`text-decoration: underline ${/^[a-z]/.test(a)?a+" ":a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${/thin/i.test(c)?1:2}px`;s.push(tt.mark({attributes:{style:d}}).range(h,p))}}}e.dispatch({effects:tx.of(tt.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let s=Xo(r.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,s=this.pendingContextChange;return e.changes.iterChanges((l,a,c,h,p)=>{if(r)return;let d=p.length-(a-l);if(s&&a>=s.to)if(s.from==l&&s.to==a&&s.insert.eq(p)){s=this.pendingContextChange=null,t+=d,this.to+=d;return}else s=null,this.revertPending(e.state);if(l+=t,a+=t,a<=this.from)this.from+=d,this.to+=d;else if(l<this.to){if(l<this.from||a>this.to||this.to-this.from+p.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(l),this.toContextPos(a),p.toString()),this.to+=d}t+=d}),s&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(r,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Ce{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(s=>s.forEach(l=>r(l,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||sC(e.parent)||document,this.viewState=new R0(e.state||Ie.create(e)),e.scrollTo&&e.scrollTo.is(Ra)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(as).map(s=>new Bh(s));for(let s of this.plugins)s.update(this);this.observer=new b2(this),this.inputState=new $C(this),this.inputState.ensureHandlers(this.plugins),this.docView=new c0(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof It?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,s,l=this.state;for(let v of e){if(v.startState!=l)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");l=v.state}if(this.destroyed){this.viewState.state=l;return}let a=this.hasFocus,c=0,h=null;e.some(v=>v.annotation(vx))?(this.inputState.notifiedFocused=a,c=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,h=xx(l,a),h||(c=1));let p=this.observer.delayedAndroidKey,d=null;if(p?(this.observer.clearDelayedAndroidKey(),d=this.observer.readChange(),(d&&!this.state.doc.eq(l.doc)||!this.state.selection.eq(l.selection))&&(d=null)):this.observer.clear(),l.facet(Ie.phrases)!=this.state.facet(Ie.phrases))return this.setState(l);s=du.create(this,l,e),s.flags|=c;let m=this.viewState.scrollTarget;try{this.updateState=2;for(let v of e){if(m&&(m=m.map(v.changes)),v.scrollIntoView){let{main:x}=v.state.selection;m=new gs(x.empty?x:ne.cursor(x.head,x.head>x.anchor?-1:1))}for(let x of v.effects)x.is(Ra)&&(m=x.value.clip(this.state))}this.viewState.update(s,m),this.bidiCache=gu.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(Oo)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(v=>v.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Ia)!=s.state.facet(Ia)&&(this.viewState.mustMeasureContent=!0),(t||r||m||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let v of this.state.facet(If))try{v(s)}catch(x){nr(this.state,x,"update listener")}(h||d)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),d&&!hx(this,d)&&p.force&&ps(this.contentDOM,p.key,p.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new R0(e),this.plugins=e.facet(as).map(r=>new Bh(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new c0(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(as),r=e.state.facet(as);if(t!=r){let s=[];for(let l of r){let a=t.indexOf(l);if(a<0)s.push(new Bh(l));else{let c=this.plugins[a];c.mustUpdate=e,s.push(c)}}for(let l of this.plugins)l.mustUpdate!=e&&l.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){nr(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,s=r.scrollTop*this.scaleY,{scrollAnchorPos:l,scrollAnchorHeight:a}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(a<0)if(Dv(r))l=-1,a=this.viewState.heightMap.height;else{let x=this.viewState.scrollAnchorAt(s);l=x.from,a=x.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let p=[];h&4||([this.measureRequests,p]=[p,this.measureRequests]);let d=p.map(x=>{try{return x.read(this)}catch(k){return nr(this.state,k),T0}}),m=du.create(this,this.state,[]),v=!1;m.flags|=h,t?t.flags|=h:t=m,this.updateState=2,m.empty||(this.updatePlugins(m),this.inputState.update(m),this.updateAttrs(),v=this.docView.update(m),v&&this.docViewUpdate());for(let x=0;x<p.length;x++)if(d[x]!=T0)try{let k=p[x];k.write&&k.write(d[x],this)}catch(k){nr(this.state,k)}if(v&&this.docView.updateSelection(!0),!m.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let k=(l<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(l).top)-a;if(k>1||k<-1){s=s+k,r.scrollTop=s/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let c of this.state.facet(If))c(t)}get themeClasses(){return _f+" "+(this.state.facet(Ff)?Sx:bx)+" "+this.state.facet(Ia)}updateAttrs(){let e=L0(this,nx,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(xr)?"true":"false",class:"cm-content",style:`${le.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),L0(this,Od,t);let r=this.observer.ignore(()=>{let s=Af(this.contentDOM,this.contentAttrs,t),l=Af(this.dom,this.editorAttrs,e);return s||l});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let s of r.effects)if(s.is(Ce.announce)){t&&(this.announceDOM.textContent=""),t=!1;let l=this.announceDOM.appendChild(document.createElement("div"));l.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Oo);let e=this.state.facet(Ce.cspNonce);ri.mount(this.root,this.styleModules.concat(w2).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return Fh(this,e,g0(this,e,t,r))}moveByGroup(e,t){return Fh(this,e,g0(this,e,t,r=>jC(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),s=this.textDirectionAt(e.from),l=r[t?r.length-1:0];return ne.cursor(l.side(t,s)+e.from,l.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,r=!0){return IC(this,e,t,r)}moveVertically(e,t,r){return Fh(this,e,BC(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),ax(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let s=this.state.doc.lineAt(e),l=this.bidiSpans(s),a=l[Zr.find(l,e-s.from,-1,t)];return Tu(r,a.dir==et.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Jv)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>C2)return Qv(e.length);let t=this.textDirectionAt(e.from),r;for(let l of this.bidiCache)if(l.from==e.from&&l.dir==t&&(l.fresh||Wv(l.isolates,r=u0(this,e))))return l.order;r||(r=u0(this,e));let s=xC(e.text,t,r);return this.bidiCache.push(new gu(e.from,e.to,t,r,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||le.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Rv(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Ra.of(new gs(typeof e=="number"?ne.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Ra.of(new gs(ne.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Fn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Fn.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=ri.newName(),s=[Ia.of(r),Oo.of(Vf(`.${r}`,e))];return t&&t.dark&&s.push(Ff.of(!0)),s}static baseTheme(e){return Au.lowest(Oo.of(Vf("."+_f,e,Ox)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),s=r&&Fe.get(r)||Fe.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}Ce.styleModule=Oo;Ce.inputHandler=Yv;Ce.clipboardInputFilter=bd;Ce.clipboardOutputFilter=Sd;Ce.scrollHandler=ex;Ce.focusChangeEffect=Gv;Ce.perLineTextDirection=Jv;Ce.exceptionSink=qv;Ce.updateListener=If;Ce.editable=xr;Ce.mouseSelectionStyle=Kv;Ce.dragMovesSelection=Xv;Ce.clickAddsSelectionRange=Uv;Ce.decorations=qo;Ce.outerDecorations=rx;Ce.atomicRanges=al;Ce.bidiIsolatedRanges=ix;Ce.scrollMargins=sx;Ce.darkTheme=Ff;Ce.cspNonce=we.define({combine:n=>n.length?n[0]:""});Ce.contentAttributes=Od;Ce.editorAttributes=nx;Ce.lineWrapping=Ce.contentAttributes.of({class:"cm-lineWrapping"});Ce.announce=pt.define();const C2=4096,T0={};class gu{constructor(e,t,r,s,l,a){this.from=e,this.to=t,this.dir=r,this.isolates=s,this.fresh=l,this.order=a}static update(e,t){if(t.empty&&!e.some(l=>l.fresh))return e;let r=[],s=e.length?e[e.length-1].dir:et.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let a=e[l];a.dir==s&&!t.touchesRange(a.from,a.to)&&r.push(new gu(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return r}}function L0(n,e,t){for(let r=n.state.facet(e),s=r.length-1;s>=0;s--){let l=r[s],a=typeof l=="function"?l(n):l;a&&Rf(a,t)}return t}const P2=le.mac?"mac":le.windows?"win":le.linux?"linux":"key";function E2(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let s,l,a,c;for(let h=0;h<t.length-1;++h){const p=t[h];if(/^(cmd|meta|m)$/i.test(p))c=!0;else if(/^a(lt)?$/i.test(p))s=!0;else if(/^(c|ctrl|control)$/i.test(p))l=!0;else if(/^s(hift)?$/i.test(p))a=!0;else if(/^mod$/i.test(p))e=="mac"?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+p)}return s&&(r="Alt-"+r),l&&(r="Ctrl-"+r),c&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function ja(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const M2=Au.default(Ce.domEventHandlers({keydown(n,e){return N2(R2(e.state),n,e,"editor")}})),Md=we.define({enables:M2}),I0=new WeakMap;function R2(n){let e=n.facet(Md),t=I0.get(e);return t||I0.set(e,t=D2(e.reduce((r,s)=>r.concat(s),[]))),t}let Yr=null;const A2=4e3;function D2(n,e=P2){let t=Object.create(null),r=Object.create(null),s=(a,c)=>{let h=r[a];if(h==null)r[a]=c;else if(h!=c)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},l=(a,c,h,p,d)=>{var m,v;let x=t[a]||(t[a]=Object.create(null)),k=c.split(/ (?!$)/).map(E=>E2(E,e));for(let E=1;E<k.length;E++){let A=k.slice(0,E).join(" ");s(A,!0),x[A]||(x[A]={preventDefault:!0,stopPropagation:!1,run:[N=>{let _=Yr={view:N,prefix:A,scope:a};return setTimeout(()=>{Yr==_&&(Yr=null)},A2),!0}]})}let S=k.join(" ");s(S,!1);let C=x[S]||(x[S]={preventDefault:!1,stopPropagation:!1,run:((v=(m=x._any)===null||m===void 0?void 0:m.run)===null||v===void 0?void 0:v.slice())||[]});h&&C.run.push(h),p&&(C.preventDefault=!0),d&&(C.stopPropagation=!0)};for(let a of n){let c=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let p of c){let d=t[p]||(t[p]=Object.create(null));d._any||(d._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:m}=a;for(let v in d)d[v].run.push(x=>m(x,Hf))}let h=a[e]||a.key;if(h)for(let p of c)l(p,h,a.run,a.preventDefault,a.stopPropagation),a.shift&&l(p,"Shift-"+h,a.shift,a.preventDefault,a.stopPropagation)}return t}let Hf=null;function N2(n,e,t,r){Hf=e;let s=ZO(e),l=IO(s,0),a=jO(l)==s.length&&s!=" ",c="",h=!1,p=!1,d=!1;Yr&&Yr.view==t&&Yr.scope==r&&(c=Yr.prefix+" ",px.indexOf(e.keyCode)<0&&(p=!0,Yr=null));let m=new Set,v=C=>{if(C){for(let E of C.run)if(!m.has(E)&&(m.add(E),E(t)))return C.stopPropagation&&(d=!0),!0;C.preventDefault&&(C.stopPropagation&&(d=!0),p=!0)}return!1},x=n[r],k,S;return x&&(v(x[c+ja(s,e,!a)])?h=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(le.windows&&e.ctrlKey&&e.altKey)&&!(le.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(k=ii[e.keyCode])&&k!=s?(v(x[c+ja(k,e,!0)])||e.shiftKey&&(S=Uo[e.keyCode])!=s&&S!=k&&v(x[c+ja(S,e,!1)]))&&(h=!0):a&&e.shiftKey&&v(x[c+ja(s,e,!0)])&&(h=!0),!h&&v(x._any)&&(h=!0)),p&&(h=!0),h&&d&&e.stopPropagation(),Hf=null,h}class ul{constructor(e,t,r,s,l){this.className=e,this.left=t,this.top=r,this.width=s,this.height=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let s=e.coordsAtPos(r.head,r.assoc||1);if(!s)return[];let l=Cx(e);return[new ul(t,s.left-l.left,s.top-l.top,null,s.bottom-s.top)]}else return T2(e,t,r)}}function Cx(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==et.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function j0(n,e,t,r){let s=n.coordsAtPos(e,t*2);if(!s)return r;let l=n.dom.getBoundingClientRect(),a=(s.top+s.bottom)/2,c=n.posAtCoords({x:l.left+1,y:a}),h=n.posAtCoords({x:l.right-1,y:a});return c==null||h==null?r:{from:Math.max(r.from,Math.min(c,h)),to:Math.min(r.to,Math.max(c,h))}}function T2(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),l=n.textDirection==et.LTR,a=n.contentDOM,c=a.getBoundingClientRect(),h=Cx(n),p=a.querySelector(".cm-line"),d=p&&window.getComputedStyle(p),m=c.left+(d?parseInt(d.paddingLeft)+Math.min(0,parseInt(d.textIndent)):0),v=c.right-(d?parseInt(d.paddingRight):0),x=Bf(n,r,1),k=Bf(n,s,-1),S=x.type==Ht.Text?x:null,C=k.type==Ht.Text?k:null;if(S&&(n.lineWrapping||x.widgetLineBreaks)&&(S=j0(n,r,1,S)),C&&(n.lineWrapping||k.widgetLineBreaks)&&(C=j0(n,s,-1,C)),S&&C&&S.from==C.from&&S.to==C.to)return A(N(t.from,t.to,S));{let I=S?N(t.from,null,S):_(x,!1),F=C?N(null,t.to,C):_(k,!0),B=[];return(S||x).to<(C||k).from-(S&&C?1:0)||x.widgetLineBreaks>1&&I.bottom+n.defaultLineHeight/2<F.top?B.push(E(m,I.bottom,v,F.top)):I.bottom<F.top&&n.elementAtHeight((I.bottom+F.top)/2).type==Ht.Text&&(I.bottom=F.top=(I.bottom+F.top)/2),A(I).concat(B).concat(A(F))}function E(I,F,B,Q){return new ul(e,I-h.left,F-h.top,B-I,Q-F)}function A({top:I,bottom:F,horizontal:B}){let Q=[];for(let q=0;q<B.length;q+=2)Q.push(E(B[q],I,B[q+1],F));return Q}function N(I,F,B){let Q=1e9,q=-1e9,V=[];function G(se,U,ae,ce,X){let ee=n.coordsAtPos(se,se==B.to?-2:2),Z=n.coordsAtPos(ae,ae==B.from?2:-2);!ee||!Z||(Q=Math.min(ee.top,Z.top,Q),q=Math.max(ee.bottom,Z.bottom,q),X==et.LTR?V.push(l&&U?m:ee.left,l&&ce?v:Z.right):V.push(!l&&ce?m:Z.left,!l&&U?v:ee.right))}let H=I??B.from,J=F??B.to;for(let se of n.visibleRanges)if(se.to>H&&se.from<J)for(let U=Math.max(se.from,H),ae=Math.min(se.to,J);;){let ce=n.state.doc.lineAt(U);for(let X of n.bidiSpans(ce)){let ee=X.from+ce.from,Z=X.to+ce.from;if(ee>=ae)break;Z>U&&G(Math.max(ee,U),I==null&&ee<=H,Math.min(Z,ae),F==null&&Z>=J,X.dir)}if(U=ce.to+1,U>=ae)break}return V.length==0&&G(H,I==null,J,F==null,n.textDirection),{top:Q,bottom:q,horizontal:V}}function _(I,F){let B=c.top+(F?I.top:I.bottom);return{top:B,bottom:B,horizontal:[]}}}function L2(n,e){return n.constructor==e.constructor&&n.eq(e)}class I2{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Ga)!=e.state.facet(Ga)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(Ga);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!L2(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[r].constructor&&s.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e,le.safari&&le.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Ga=we.define();function Px(n){return[Fn.define(e=>new I2(e,n)),Ga.of(n)]}const Yo=we.define({combine(n){return Ov(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function j2(n={}){return[Yo.of(n),B2,z2,F2,Zv.of(!0)]}function Ex(n){return n.startState.facet(Yo)!=n.state.facet(Yo)}const B2=Px({above:!0,markers(n){let{state:e}=n,t=e.facet(Yo),r=[];for(let s of e.selection.ranges){let l=s==e.selection.main;if(s.empty||t.drawRangeCursor){let a=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=s.empty?s:ne.cursor(s.head,s.head>s.anchor?-1:1);for(let h of ul.forRange(n,a,c))r.push(h)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Ex(n);return t&&B0(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){B0(e.state,n)},class:"cm-cursorLayer"});function B0(n,e){e.style.animationDuration=n.facet(Yo).cursorBlinkRate+"ms"}const z2=Px({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:ul.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Ex(n)},class:"cm-selectionLayer"}),F2=Au.highest(Ce.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function _2(){return H2}const V2=tt.line({class:"cm-activeLine"}),H2=Fn.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let s=n.lineBlockAt(r.head);s.from>e&&(t.push(V2.range(s.from)),e=s.from)}return tt.set(t)}},{decorations:n=>n.decorations});class oi extends vs{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}oi.prototype.elementClass="";oi.prototype.toDOM=void 0;oi.prototype.mapMode=hn.TrackBefore;oi.prototype.startSide=oi.prototype.endSide=-1;oi.prototype.point=!0;const Ja=we.define(),W2=we.define(),Za=we.define(),z0=we.define({combine:n=>n.some(e=>e)});function Q2(n){return[$2]}const $2=Fn.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(Za).map(e=>new _0(n,e)),this.fixed=!n.state.facet(z0);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(z0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=je.iter(this.view.state.facet(Ja),this.view.viewport.from),r=[],s=this.gutters.map(l=>new U2(l,this.view.viewport,-this.view.documentPadding.top));for(let l of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(l.type)){let a=!0;for(let c of l.type)if(c.type==Ht.Text&&a){Wf(t,r,c.from);for(let h of s)h.line(this.view,c,r);a=!1}else if(c.widget)for(let h of s)h.widget(this.view,c)}else if(l.type==Ht.Text){Wf(t,r,l.from);for(let a of s)a.line(this.view,l,r)}else if(l.widget)for(let a of s)a.widget(this.view,l);for(let l of s)l.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(Za),t=n.state.facet(Za),r=n.docChanged||n.heightChanged||n.viewportChanged||!je.eq(n.startState.facet(Ja),n.state.facet(Ja),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(r=!0);else{r=!0;let s=[];for(let l of t){let a=e.indexOf(l);a<0?s.push(new _0(this.view,l)):(this.gutters[a].update(n),s.push(this.gutters[a]))}for(let l of this.gutters)l.dom.remove(),s.indexOf(l)<0&&l.destroy();for(let l of s)l.config.side=="after"?this.getDOMAfter().appendChild(l.dom):this.dom.appendChild(l.dom);this.gutters=s}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Ce.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let r=t.dom.offsetWidth*e.scaleX,s=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==et.LTR?{left:r,right:s}:{right:r,left:s}})});function F0(n){return Array.isArray(n)?n:[n]}function Wf(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class U2{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=je.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:s}=this,l=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==s.elements.length){let c=new Mx(e,a,l,r);s.elements.push(c),s.dom.appendChild(c.dom)}else s.elements[this.i].update(e,a,l,r);this.height=t.bottom,this.i++}line(e,t,r){let s=[];Wf(this.cursor,s,t.from),r.length&&(s=s.concat(r));let l=this.gutter.config.lineMarker(e,t,s);l&&s.unshift(l);let a=this.gutter;s.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),s=r?[r]:null;for(let l of e.state.facet(W2)){let a=l(e,t.widget,t);a&&(s||(s=[])).push(a)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class _0{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,s=>{let l=s.target,a;if(l!=this.dom&&this.dom.contains(l)){for(;l.parentNode!=this.dom;)l=l.parentNode;let h=l.getBoundingClientRect();a=(h.top+h.bottom)/2}else a=s.clientY;let c=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[r](e,c,s)&&s.preventDefault()});this.markers=F0(t.markers(e)),t.initialSpacer&&(this.spacer=new Mx(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=F0(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let r=e.view.viewport;return!je.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Mx{constructor(e,t,r,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,s)}update(e,t,r,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),X2(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let r="cm-gutterElement",s=this.dom.firstChild;for(let l=0,a=0;;){let c=a,h=l<t.length?t[l++]:null,p=!1;if(h){let d=h.elementClass;d&&(r+=" "+d);for(let m=a;m<this.markers.length;m++)if(this.markers[m].compare(h)){c=m,p=!0;break}}else c=this.markers.length;for(;a<c;){let d=this.markers[a++];if(d.toDOM){d.destroy(s);let m=s.nextSibling;s.remove(),s=m}}if(!h)break;h.toDOM&&(p?s=s.nextSibling:this.dom.insertBefore(h.toDOM(e),s)),p&&a++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function X2(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const K2=we.define(),q2=we.define(),us=we.define({combine(n){return Ov(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let s in t){let l=r[s],a=t[s];r[s]=l?(c,h,p)=>l(c,h,p)||a(c,h,p):a}return r}})}});class Hh extends oi{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Wh(n,e){return n.state.facet(us).formatNumber(e,n.state)}const Y2=Za.compute([us],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(K2)},lineMarker(e,t,r){return r.some(s=>s.toDOM)?null:new Hh(Wh(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let s of e.state.facet(q2)){let l=s(e,t,r);if(l)return l}return null},lineMarkerChange:e=>e.startState.facet(us)!=e.state.facet(us),initialSpacer(e){return new Hh(Wh(e,V0(e.state.doc.lines)))},updateSpacer(e,t){let r=Wh(t.view,V0(t.view.state.doc.lines));return r==e.number?e:new Hh(r)},domEventHandlers:n.facet(us).domEventHandlers,side:"before"}));function G2(n={}){return[us.of(n),Q2(),Y2]}function V0(n){let e=9;for(;e<n;)e=e*10+9;return e}const J2=new class extends oi{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},Z2=Ja.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let s=n.doc.lineAt(r.head).from;s>t&&(t=s,e.push(J2.range(s)))}return je.of(e)});function eP(){return Z2}const Rx=1024;let tP=0;class Qh{constructor(e,t){this.from=e,this.to=t}}class Re{constructor(e={}){this.id=tP++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Zt.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Re.closedBy=new Re({deserialize:n=>n.split(" ")});Re.openedBy=new Re({deserialize:n=>n.split(" ")});Re.group=new Re({deserialize:n=>n.split(" ")});Re.isolate=new Re({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Re.contextHash=new Re({perNode:!0});Re.lookAhead=new Re({perNode:!0});Re.mounted=new Re({perNode:!0});class mu{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Re.mounted.id]}}const nP=Object.create(null);class Zt{constructor(e,t,r,s=0){this.name=e,this.props=t,this.id=r,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):nP,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new Zt(e.name||"",t,e.id,r);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(s)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[l[0].id]=l[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Re.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let s of r.split(" "))t[s]=e[r];return r=>{for(let s=r.prop(Re.group),l=-1;l<(s?s.length:0);l++){let a=t[l<0?r.name:s[l]];if(a)return a}}}}Zt.none=new Zt("",Object.create(null),0,8);class Rd{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let s=null;for(let l of e){let a=l(r);if(a){s||(s=Object.assign({},r.props));let c=a[1],h=a[0];h.combine&&h.id in s&&(c=h.combine(s[h.id],c)),s[h.id]=c}}t.push(s?new Zt(r.name,s,r.id,r.flags):r)}return new Rd(t)}}const Ba=new WeakMap,H0=new WeakMap;var wt;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(wt||(wt={}));class ut{constructor(e,t,r,s,l){if(this.type=e,this.children=t,this.positions=r,this.length=s,this.props=null,l&&l.length){this.props=Object.create(null);for(let[a,c]of l)this.props[typeof a=="number"?a:a.id]=c}}toString(){let e=mu.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let s=r.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new $f(this.topNode,e)}cursorAt(e,t=0,r=0){let s=Ba.get(this)||this.topNode,l=new $f(s);return l.moveTo(e,t),Ba.set(this,l._tree),l}get topNode(){return new kn(this,0,0,null)}resolve(e,t=0){let r=Go(Ba.get(this)||this.topNode,e,t,!1);return Ba.set(this,r),r}resolveInner(e,t=0){let r=Go(H0.get(this)||this.topNode,e,t,!0);return H0.set(this,r),r}resolveStack(e,t=0){return sP(this,e,t)}iterate(e){let{enter:t,leave:r,from:s=0,to:l=this.length}=e,a=e.mode||0,c=(a&wt.IncludeAnonymous)>0;for(let h=this.cursor(a|wt.IncludeAnonymous);;){let p=!1;if(h.from<=l&&h.to>=s&&(!c&&h.type.isAnonymous||t(h)!==!1)){if(h.firstChild())continue;p=!0}for(;p&&r&&(c||!h.type.isAnonymous)&&r(h),!h.nextSibling();){if(!h.parent())return;p=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Nd(Zt.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,s)=>new ut(this.type,t,r,s,this.propValues),e.makeTree||((t,r,s)=>new ut(Zt.none,t,r,s)))}static build(e){return oP(e)}}ut.empty=new ut(Zt.none,[],[],0);class Ad{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Ad(this.buffer,this.index)}}class li{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return Zt.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],s=this.set.types[t],l=s.name;if(/\W/.test(l)&&!s.isError&&(l=JSON.stringify(l)),e+=4,r==e)return l;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return l+"("+a.join(",")+")"}findChild(e,t,r,s,l){let{buffer:a}=this,c=-1;for(let h=e;h!=t&&!(Ax(l,s,a[h+1],a[h+2])&&(c=h,r>0));h=a[h+3]);return c}slice(e,t,r){let s=this.buffer,l=new Uint16Array(t-e),a=0;for(let c=e,h=0;c<t;){l[h++]=s[c++],l[h++]=s[c++]-r;let p=l[h++]=s[c++]-r;l[h++]=s[c++]-e,a=Math.max(a,p)}return new li(l,a,this.set)}}function Ax(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function Go(n,e,t,r){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!r&&n instanceof kn&&n.index<0?null:n.parent;if(!a)return n;n=a}let l=r?0:wt.IgnoreOverlays;if(r)for(let a=n,c=a.parent;c;a=c,c=a.parent)a instanceof kn&&a.index<0&&((s=c.enter(e,t,l))===null||s===void 0?void 0:s.from)!=a.from&&(n=c);for(;;){let a=n.enter(e,t,l);if(!a)return n;n=a}}class Dx{cursor(e=0){return new $f(this,e)}getChild(e,t=null,r=null){let s=W0(this,e,t,r);return s.length?s[0]:null}getChildren(e,t=null,r=null){return W0(this,e,t,r)}resolve(e,t=0){return Go(this,e,t,!1)}resolveInner(e,t=0){return Go(this,e,t,!0)}matchContext(e){return Qf(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(r=t,t=s.prevSibling):t=s}return r}get node(){return this}get next(){return this.parent}}class kn extends Dx{constructor(e,t,r,s){super(),this._tree=e,this.from=t,this.index=r,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,s,l=0){for(let a=this;;){for(let{children:c,positions:h}=a._tree,p=t>0?c.length:-1;e!=p;e+=t){let d=c[e],m=h[e]+a.from;if(Ax(s,r,m,m+d.length)){if(d instanceof li){if(l&wt.ExcludeBuffers)continue;let v=d.findChild(0,d.buffer.length,t,r-m,s);if(v>-1)return new ei(new rP(a,d,e,m),null,v)}else if(l&wt.IncludeAnonymous||!d.type.isAnonymous||Dd(d)){let v;if(!(l&wt.IgnoreMounts)&&(v=mu.get(d))&&!v.overlay)return new kn(v.tree,m,e,a);let x=new kn(d,m,e,a);return l&wt.IncludeAnonymous||!x.type.isAnonymous?x:x.nextChild(t<0?d.children.length-1:0,t,r,s)}}}if(l&wt.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let s;if(!(r&wt.IgnoreOverlays)&&(s=mu.get(this._tree))&&s.overlay){let l=e-this.from;for(let{from:a,to:c}of s.overlay)if((t>0?a<=l:a<l)&&(t<0?c>=l:c>l))return new kn(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function W0(n,e,t,r){let s=n.cursor(),l=[];if(!s.firstChild())return l;if(t!=null){for(let a=!1;!a;)if(a=s.type.is(t),!s.nextSibling())return l}for(;;){if(r!=null&&s.type.is(r))return l;if(s.type.is(e)&&l.push(s.node),!s.nextSibling())return r==null?l:[]}}function Qf(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class rP{constructor(e,t,r,s){this.parent=e,this.buffer=t,this.index=r,this.start=s}}class ei extends Dx{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,r);return l<0?null:new ei(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&wt.ExcludeBuffers)return null;let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return l<0?null:new ei(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ei(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ei(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,s=this.index+4,l=r.buffer[this.index+3];if(l>s){let a=r.buffer[this.index+1];e.push(r.slice(s,l,a)),t.push(0)}return new ut(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Nx(n){if(!n.length)return null;let e=0,t=n[0];for(let l=1;l<n.length;l++){let a=n[l];(a.from>t.from||a.to<t.to)&&(t=a,e=l)}let r=t instanceof kn&&t.index<0?null:t.parent,s=n.slice();return r?s[e]=r:s.splice(e,1),new iP(s,t)}class iP{constructor(e,t){this.heads=e,this.node=t}get next(){return Nx(this.heads)}}function sP(n,e,t){let r=n.resolveInner(e,t),s=null;for(let l=r instanceof kn?r:r.context.parent;l;l=l.parent)if(l.index<0){let a=l.parent;(s||(s=[r])).push(a.resolve(e,t)),l=a}else{let a=mu.get(l.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let c=new kn(a.tree,a.overlay[0].from+l.from,-1,l);(s||(s=[r])).push(Go(c,e,t,!1))}}return s?Nx(s):r}class $f{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof kn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=r+s.buffer[e+1],this.to=r+s.buffer[e+2],!0}yield(e){return e?e instanceof kn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:s}=this.buffer,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,r);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&wt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&wt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&wt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let s=r<0?0:this.stack[r]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(s)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(s.buffer.buffer[l+3]<this.index)return!1;({index:t,parent:r}=s)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let l=t+e,a=e<0?-1:r._tree.children.length;l!=a;l+=e){let c=r._tree.children[l];if(this.mode&wt.IncludeAnonymous||c instanceof li||!c.type.isAnonymous||Dd(c))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let s=this.index,l=this.stack.length;l>=0;){for(let a=e;a;a=a._parent)if(a.index==s){if(s==this.index)return a;t=a,r=l+1;break e}s=this.stack[--l]}for(let s=r;s<this.stack.length;s++)t=new ei(this.buffer,t,this.stack[s]);return this.bufferNode=new ei(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&t&&t(this),s=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,s=!0}}}matchContext(e){if(!this.buffer)return Qf(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let s=e.length-1,l=this.stack.length-1;s>=0;l--){if(l<0)return Qf(this._tree,e,s);let a=r[t.buffer[this.stack[l]]];if(!a.isAnonymous){if(e[s]&&e[s]!=a.name)return!1;s--}}return!0}}function Dd(n){return n.children.some(e=>e instanceof li||!e.type.isAnonymous||Dd(e))}function oP(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:s=Rx,reused:l=[],minRepeatType:a=r.types.length}=n,c=Array.isArray(t)?new Ad(t,t.length):t,h=r.types,p=0,d=0;function m(I,F,B,Q,q,V){let{id:G,start:H,end:J,size:se}=c,U=d,ae=p;if(se<0)if(c.next(),se==-1){let M=l[G];B.push(M),Q.push(H-I);return}else if(se==-3){p=G;return}else if(se==-4){d=G;return}else throw new RangeError(`Unrecognized record size: ${se}`);let ce=h[G],X,ee,Z=H-I;if(J-H<=s&&(ee=C(c.pos-F,q))){let M=new Uint16Array(ee.size-ee.skip),L=c.pos-ee.size,ie=M.length;for(;c.pos>L;)ie=E(ee.start,M,ie);X=new li(M,J-ee.start,r),Z=ee.start-I}else{let M=c.pos-se;c.next();let L=[],ie=[],pe=G>=a?G:-1,ye=0,re=J;for(;c.pos>M;)pe>=0&&c.id==pe&&c.size>=0?(c.end<=re-s&&(k(L,ie,H,ye,c.end,re,pe,U,ae),ye=L.length,re=c.end),c.next()):V>2500?v(H,M,L,ie):m(H,M,L,ie,pe,V+1);if(pe>=0&&ye>0&&ye<L.length&&k(L,ie,H,ye,H,re,pe,U,ae),L.reverse(),ie.reverse(),pe>-1&&ye>0){let he=x(ce,ae);X=Nd(ce,L,ie,0,L.length,0,J-H,he,he)}else X=S(ce,L,ie,J-H,U-J,ae)}B.push(X),Q.push(Z)}function v(I,F,B,Q){let q=[],V=0,G=-1;for(;c.pos>F;){let{id:H,start:J,end:se,size:U}=c;if(U>4)c.next();else{if(G>-1&&J<G)break;G<0&&(G=se-s),q.push(H,J,se),V++,c.next()}}if(V){let H=new Uint16Array(V*4),J=q[q.length-2];for(let se=q.length-3,U=0;se>=0;se-=3)H[U++]=q[se],H[U++]=q[se+1]-J,H[U++]=q[se+2]-J,H[U++]=U;B.push(new li(H,q[2]-J,r)),Q.push(J-I)}}function x(I,F){return(B,Q,q)=>{let V=0,G=B.length-1,H,J;if(G>=0&&(H=B[G])instanceof ut){if(!G&&H.type==I&&H.length==q)return H;(J=H.prop(Re.lookAhead))&&(V=Q[G]+H.length+J)}return S(I,B,Q,q,V,F)}}function k(I,F,B,Q,q,V,G,H,J){let se=[],U=[];for(;I.length>Q;)se.push(I.pop()),U.push(F.pop()+B-q);I.push(S(r.types[G],se,U,V-q,H-V,J)),F.push(q-B)}function S(I,F,B,Q,q,V,G){if(V){let H=[Re.contextHash,V];G=G?[H].concat(G):[H]}if(q>25){let H=[Re.lookAhead,q];G=G?[H].concat(G):[H]}return new ut(I,F,B,Q,G)}function C(I,F){let B=c.fork(),Q=0,q=0,V=0,G=B.end-s,H={size:0,start:0,skip:0};e:for(let J=B.pos-I;B.pos>J;){let se=B.size;if(B.id==F&&se>=0){H.size=Q,H.start=q,H.skip=V,V+=4,Q+=4,B.next();continue}let U=B.pos-se;if(se<0||U<J||B.start<G)break;let ae=B.id>=a?4:0,ce=B.start;for(B.next();B.pos>U;){if(B.size<0)if(B.size==-3)ae+=4;else break e;else B.id>=a&&(ae+=4);B.next()}q=ce,Q+=se,V+=ae}return(F<0||Q==I)&&(H.size=Q,H.start=q,H.skip=V),H.size>4?H:void 0}function E(I,F,B){let{id:Q,start:q,end:V,size:G}=c;if(c.next(),G>=0&&Q<a){let H=B;if(G>4){let J=c.pos-(G-4);for(;c.pos>J;)B=E(I,F,B)}F[--B]=H,F[--B]=V-I,F[--B]=q-I,F[--B]=Q}else G==-3?p=Q:G==-4&&(d=Q);return B}let A=[],N=[];for(;c.pos>0;)m(n.start||0,n.bufferStart||0,A,N,-1,0);let _=(e=n.length)!==null&&e!==void 0?e:A.length?N[0]+A[0].length:0;return new ut(h[n.topID],A.reverse(),N.reverse(),_)}const Q0=new WeakMap;function eu(n,e){if(!n.isAnonymous||e instanceof li||e.type!=n)return 1;let t=Q0.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof ut)){t=1;break}t+=eu(n,r)}Q0.set(e,t)}return t}function Nd(n,e,t,r,s,l,a,c,h){let p=0;for(let k=r;k<s;k++)p+=eu(n,e[k]);let d=Math.ceil(p*1.5/8),m=[],v=[];function x(k,S,C,E,A){for(let N=C;N<E;){let _=N,I=S[N],F=eu(n,k[N]);for(N++;N<E;N++){let B=eu(n,k[N]);if(F+B>=d)break;F+=B}if(N==_+1){if(F>d){let B=k[_];x(B.children,B.positions,0,B.children.length,S[_]+A);continue}m.push(k[_])}else{let B=S[N-1]+k[N-1].length-I;m.push(Nd(n,k,S,_,N,I,B,null,h))}v.push(I+A-l)}}return x(e,t,r,s,0),(c||h)(m,v,a)}class Ai{constructor(e,t,r,s,l=!1,a=!1){this.from=e,this.to=t,this.tree=r,this.offset=s,this.open=(l?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let s=[new Ai(0,e.length,e,0,!1,r)];for(let l of t)l.to>e.length&&s.push(l);return s}static applyChanges(e,t,r=128){if(!t.length)return e;let s=[],l=1,a=e.length?e[0]:null;for(let c=0,h=0,p=0;;c++){let d=c<t.length?t[c]:null,m=d?d.fromA:1e9;if(m-h>=r)for(;a&&a.from<m;){let v=a;if(h>=v.from||m<=v.to||p){let x=Math.max(v.from,h)-p,k=Math.min(v.to,m)-p;v=x>=k?null:new Ai(x,k,v.tree,v.offset+p,c>0,!!d)}if(v&&s.push(v),a.to>m)break;a=l<e.length?e[l++]:null}if(!d)break;h=d.toA,p=d.toA-d.toB}return s}}let Tx=class{startParse(e,t,r){return typeof e=="string"&&(e=new lP(e)),r=r?r.length?r.map(s=>new Qh(s.from,s.to)):[new Qh(0,0)]:[new Qh(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let s=this.startParse(e,t,r);for(;;){let l=s.advance();if(l)return l}}};class lP{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Re({perNode:!0});var $0={};class yu{constructor(e,t,r,s,l,a,c,h,p,d=0,m){this.p=e,this.stack=t,this.state=r,this.reducePos=s,this.pos=l,this.score=a,this.buffer=c,this.bufferBase=h,this.curContext=p,this.lookAhead=d,this.parent=m}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let s=e.parser.context;return new yu(e,[],t,r,r,0,[],0,s?new U0(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,s=e&65535,{parser:l}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let c=l.dynamicPrecedence(s);if(c&&(this.score+=c),r==0){this.pushState(l.getGoto(this.state,s,!0),this.reducePos),s<l.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(s,this.reducePos);return}let h=this.stack.length-(r-1)*3-(e&262144?6:0),p=h?this.stack[h-2]:this.p.ranges[0].from,d=this.reducePos-p;d>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(p==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=d):this.p.lastBigReductionSize<d&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=p,this.p.lastBigReductionSize=d));let m=h?this.stack[h-1]:0,v=this.bufferBase+this.buffer.length-m;if(s<l.minRepeatTerm||e&131072){let x=l.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,p,x,v+4,!0)}if(e&262144)this.state=this.stack[h];else{let x=this.stack[h-3];this.state=l.getGoto(x,s,!0)}for(;this.stack.length>h;)this.stack.pop();this.reduceContext(s,p)}storeNode(e,t,r,s=4,l=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,c=this.buffer.length;if(c==0&&a.parent&&(c=a.bufferBase-a.parent.bufferBase,a=a.parent),c>0&&a.buffer[c-4]==0&&a.buffer[c-1]>-1){if(t==r)return;if(a.buffer[c-2]>=t){a.buffer[c-2]=r;return}}}if(!l||this.pos==r)this.buffer.push(e,t,r,s);else{let a=this.buffer.length;if(a>0&&(this.buffer[a-4]!=0||this.buffer[a-1]<0)){let c=!1;for(let h=a;h>0&&this.buffer[h-2]>r;h-=4)if(this.buffer[h-1]>=0){c=!0;break}if(c)for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4)}this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=r,this.buffer[a+3]=s}}shift(e,t,r,s){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let l=e,{parser:a}=this.p;(s>this.pos||t<=a.maxNode)&&(this.pos=s,a.stateFlag(l,1)||(this.reducePos=s)),this.pushState(l,r),this.shiftContext(t,r),t<=a.maxNode&&this.buffer.push(t,r,s,4)}else this.pos=s,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,s,4)}apply(e,t,r,s){e&65536?this.reduce(e):this.shift(e,t,r,s)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(r,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new yu(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new aP(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if((r&65536)==0)return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let l=0,a;l<t.length;l+=2)(a=t[l+1])!=this.state&&this.p.parser.hasAction(a,e)&&s.push(t[l],a);if(this.stack.length<120)for(let l=0;s.length<8&&l<t.length;l+=2){let a=t[l+1];s.some((c,h)=>h&1&&c==a)||s.push(t[l],a)}t=s}let r=[];for(let s=0;s<t.length&&r.length<4;s+=2){let l=t[s+1];if(l==this.state)continue;let a=this.split();a.pushState(l,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[s],this.pos),a.reducePos=this.pos,a.score-=200,r.push(a)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let r=t>>19,s=t&65535,l=this.stack.length-r*3;if(l<0||e.getGoto(this.stack[l],s,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;t=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(s,l)=>{if(!t.includes(s))return t.push(s),e.allActions(s,a=>{if(!(a&393216))if(a&65536){let c=(a>>19)-l;if(c>1){let h=a&65535,p=this.stack.length-c*3;if(p>=0&&e.getGoto(this.stack[p],h,!1)>=0)return c<<19|65536|h}}else{let c=r(a,l+1);if(c!=null)return c}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new U0(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class U0{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class aP{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class vu{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new vu(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new vu(this.stack,this.pos,this.index)}}function za(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,s=0;r<n.length;){let l=0;for(;;){let a=n.charCodeAt(r++),c=!1;if(a==126){l=65535;break}a>=92&&a--,a>=34&&a--;let h=a-32;if(h>=46&&(h-=46,c=!0),l+=h,c)break;l*=46}t?t[s++]=l:t=new e(l)}return t}class tu{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const X0=new tu;class uP{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=X0,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,s=this.rangeIndex,l=this.pos+e;for(;l<r.from;){if(!s)return null;let a=this.ranges[--s];l-=r.from-a.to,r=a}for(;t<0?l>r.to:l>=r.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];l+=a.from-r.to,r=a}return l}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,s;if(t>=0&&t<this.chunk.length)r=this.pos+e,s=this.chunk.charCodeAt(t);else{let l=this.resolveOffset(e,1);if(l==null)return-1;if(r=l,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let a=this.rangeIndex,c=this.range;for(;c.to<=r;)c=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>c.to&&(this.chunk2=this.chunk2.slice(0,c.to-r)),s=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),s}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=X0,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(r+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return r}}class ms{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;cP(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}ms.prototype.contextual=ms.prototype.fallback=ms.prototype.extend=!1;ms.prototype.fallback=ms.prototype.extend=!1;class Iu{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function cP(n,e,t,r,s,l){let a=0,c=1<<r,{dialect:h}=t.p.parser;e:for(;(c&n[a])!=0;){let p=n[a+1];for(let x=a+3;x<p;x+=2)if((n[x+1]&c)>0){let k=n[x];if(h.allows(k)&&(e.token.value==-1||e.token.value==k||hP(k,e.token.value,s,l))){e.acceptToken(k);break}}let d=e.next,m=0,v=n[a+2];if(e.next<0&&v>m&&n[p+v*3-3]==65535){a=n[p+v*3-1];continue e}for(;m<v;){let x=m+v>>1,k=p+x+(x<<1),S=n[k],C=n[k+1]||65536;if(d<S)v=x;else if(d>=C)m=x+1;else{a=n[k+2],e.advance();continue e}}break}}function K0(n,e,t){for(let r=e,s;(s=n[r])!=65535;r++)if(s==t)return r-e;return-1}function hP(n,e,t,r){let s=K0(t,r,e);return s<0||K0(t,r,n)<s}const an=typeof process<"u"&&$0&&/\bparse\b/.test($0.LOG);let $h=null;function q0(n,e,t){let r=n.cursor(wt.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class fP{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?q0(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?q0(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],s=this.index[t];if(s==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let l=r.children[s],a=this.start[t]+r.positions[s];if(a>e)return this.nextStart=a,null;if(l instanceof ut){if(a==e){if(a<this.safeFrom)return null;let c=a+l.length;if(c<=this.safeTo){let h=l.prop(Re.lookAhead);if(!h||c+h<this.fragment.to)return l}}this.index[t]++,a+l.length>=Math.max(this.safeFrom,e)&&(this.trees.push(l),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+l.length}}}class dP{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new tu)}getActions(e){let t=0,r=null,{parser:s}=e.p,{tokenizers:l}=s,a=s.stateSlot(e.state,3),c=e.curContext?e.curContext.hash:0,h=0;for(let p=0;p<l.length;p++){if((1<<p&a)==0)continue;let d=l[p],m=this.tokens[p];if(!(r&&!d.fallback)&&((d.contextual||m.start!=e.pos||m.mask!=a||m.context!=c)&&(this.updateCachedToken(m,d,e),m.mask=a,m.context=c),m.lookAhead>m.end+25&&(h=Math.max(m.lookAhead,h)),m.value!=0)){let v=t;if(m.extended>-1&&(t=this.addActions(e,m.extended,m.end,t)),t=this.addActions(e,m.value,m.end,t),!d.extend&&(r=m,t>v))break}}for(;this.actions.length>t;)this.actions.pop();return h&&e.setLookAhead(h),!r&&e.pos==this.stream.end&&(r=new tu,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new tu,{pos:r,p:s}=e;return t.start=r,t.end=Math.min(r+1,s.stream.end),t.value=r==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,r){let s=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(s,e),r),e.value>-1){let{parser:l}=r.p;for(let a=0;a<l.specialized.length;a++)if(l.specialized[a]==e.value){let c=l.specializers[a](this.stream.read(e.start,e.end),r);if(c>=0&&r.p.parser.dialect.allows(c>>1)){(c&1)==0?e.value=c>>1:e.extended=c>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,r,s){for(let l=0;l<s;l+=3)if(this.actions[l]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=r,s}addActions(e,t,r,s){let{state:l}=e,{parser:a}=e.p,{data:c}=a;for(let h=0;h<2;h++)for(let p=a.stateSlot(l,h?2:1);;p+=3){if(c[p]==65535)if(c[p+1]==1)p=yr(c,p+2);else{s==0&&c[p+1]==2&&(s=this.putAction(yr(c,p+2),t,r,s));break}c[p]==t&&(s=this.putAction(yr(c,p+1),t,r,s))}return s}}class pP{constructor(e,t,r,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new uP(t,s),this.tokens=new dP(e,this.stream),this.topTerm=e.top[1];let{from:l}=s[0];this.stacks=[yu.start(this,e.top[0],l)],this.fragments=r.length&&this.stream.end-l>e.bufferLength*4?new fP(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],s,l;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let c=e[a];for(;;){if(this.tokens.mainToken=null,c.pos>t)r.push(c);else{if(this.advanceStack(c,r,e))continue;{s||(s=[],l=[]),s.push(c);let h=this.tokens.getMainToken(c);l.push(h.value,h.end)}}break}}if(!r.length){let a=s&&yP(s);if(a)return an&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw an&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let a=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,l,r);if(a)return an&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(r.length>a)for(r.sort((c,h)=>h.score-c.score);r.length>a;)r.pop();r.some(c=>c.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let a=0;a<r.length-1;a++){let c=r[a];for(let h=a+1;h<r.length;h++){let p=r[h];if(c.sameState(p)||c.buffer.length>500&&p.buffer.length>500)if((c.score-p.score||c.buffer.length-p.buffer.length)>0)r.splice(h--,1);else{r.splice(a--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let s=e.pos,{parser:l}=this,a=an?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let p=e.curContext&&e.curContext.tracker.strict,d=p?e.curContext.hash:0;for(let m=this.fragments.nodeAt(s);m;){let v=this.parser.nodeSet.types[m.type.id]==m.type?l.getGoto(e.state,m.type.id):-1;if(v>-1&&m.length&&(!p||(m.prop(Re.contextHash)||0)==d))return e.useNode(m,v),an&&console.log(a+this.stackID(e)+` (via reuse of ${l.getName(m.type.id)})`),!0;if(!(m instanceof ut)||m.children.length==0||m.positions[0]>0)break;let x=m.children[0];if(x instanceof ut&&m.positions[0]==0)m=x;else break}}let c=l.stateSlot(e.state,4);if(c>0)return e.reduce(c),an&&console.log(a+this.stackID(e)+` (via always-reduce ${l.getName(c&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let p=0;p<h.length;){let d=h[p++],m=h[p++],v=h[p++],x=p==h.length||!r,k=x?e:e.split(),S=this.tokens.mainToken;if(k.apply(d,m,S?S.start:k.pos,v),an&&console.log(a+this.stackID(k)+` (via ${(d&65536)==0?"shift":`reduce of ${l.getName(d&65535)}`} for ${l.getName(m)} @ ${s}${k==e?"":", split"})`),x)return!0;k.pos>s?t.push(k):r.push(k)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return Y0(e,t),!0}}runRecovery(e,t,r){let s=null,l=!1;for(let a=0;a<e.length;a++){let c=e[a],h=t[a<<1],p=t[(a<<1)+1],d=an?this.stackID(c)+" -> ":"";if(c.deadEnd&&(l||(l=!0,c.restart(),an&&console.log(d+this.stackID(c)+" (restarted)"),this.advanceFully(c,r))))continue;let m=c.split(),v=d;for(let x=0;x<10&&m.forceReduce()&&(an&&console.log(v+this.stackID(m)+" (via force-reduce)"),!this.advanceFully(m,r));x++)an&&(v=this.stackID(m)+" -> ");for(let x of c.recoverByInsert(h))an&&console.log(d+this.stackID(x)+" (via recover-insert)"),this.advanceFully(x,r);this.stream.end>c.pos?(p==c.pos&&(p++,h=0),c.recoverByDelete(h,p),an&&console.log(d+this.stackID(c)+` (via recover-delete ${this.parser.getName(h)})`),Y0(c,r)):(!s||s.score<c.score)&&(s=c)}return s}stackToTree(e){return e.close(),ut.build({buffer:vu.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=($h||($h=new WeakMap)).get(e);return t||$h.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Y0(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class gP{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const Uh=n=>n;class mP{constructor(e){this.start=e.start,this.shift=e.shift||Uh,this.reduce=e.reduce||Uh,this.reuse=e.reuse||Uh,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class xu extends Tx{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let c=0;c<e.repeatNodeCount;c++)t.push("");let r=Object.keys(e.topRules).map(c=>e.topRules[c][1]),s=[];for(let c=0;c<t.length;c++)s.push([]);function l(c,h,p){s[c].push([h,h.deserialize(String(p))])}if(e.nodeProps)for(let c of e.nodeProps){let h=c[0];typeof h=="string"&&(h=Re[h]);for(let p=1;p<c.length;){let d=c[p++];if(d>=0)l(d,h,c[p++]);else{let m=c[p+-d];for(let v=-d;v>0;v--)l(c[p++],h,m);p++}}}this.nodeSet=new Rd(t.map((c,h)=>Zt.define({name:h>=this.minRepeatTerm?void 0:c,id:h,props:s[h],top:r.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Rx;let a=za(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let c=0;c<this.specializerSpecs.length;c++)this.specialized[c]=this.specializerSpecs[c].term;this.specializers=this.specializerSpecs.map(G0),this.states=za(e.states,Uint32Array),this.data=za(e.stateData),this.goto=za(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(c=>typeof c=="number"?new ms(a,c):c),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let s=new pP(this,e,t,r);for(let l of this.wrappers)s=l(s,e,t,r);return s}getGoto(e,t,r=!1){let s=this.goto;if(t>=s[0])return-1;for(let l=s[t+1];;){let a=s[l++],c=a&1,h=s[l++];if(c&&r)return h;for(let p=l+(a>>1);l<p;l++)if(s[l]==e)return h;if(c)return-1}}hasAction(e,t){let r=this.data;for(let s=0;s<2;s++)for(let l=this.stateSlot(e,s?2:1),a;;l+=3){if((a=r[l])==65535)if(r[l+1]==1)a=r[l=yr(r,l+2)];else{if(r[l+1]==2)return yr(r,l+2);break}if(a==t||a==0)return yr(r,l+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t?!0:null)}allActions(e,t){let r=this.stateSlot(e,4),s=r?t(r):void 0;for(let l=this.stateSlot(e,1);s==null;l+=3){if(this.data[l]==65535)if(this.data[l+1]==1)l=yr(this.data,l+2);else break;s=t(yr(this.data,l+1))}return s}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=yr(this.data,r+2);else break;if((this.data[r+2]&1)==0){let s=this.data[r+1];t.some((l,a)=>a&1&&l==s)||t.push(this.data[r],s)}}return t}configure(e){let t=Object.assign(Object.create(xu.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let s=e.tokenizers.find(l=>l.from==r);return s?s.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,s)=>{let l=e.specializers.find(c=>c.from==r.external);if(!l)return r;let a=Object.assign(Object.assign({},r),{external:l.to});return t.specializers[s]=G0(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let l of e.split(" ")){let a=t.indexOf(l);a>=0&&(r[a]=!0)}let s=null;for(let l=0;l<t.length;l++)if(!r[l])for(let a=this.dialects[t[l]],c;(c=this.data[a++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[c]=1;return new gP(e,r,s)}static deserialize(e){return new xu(e)}}function yr(n,e){return n[e]|n[e+1]<<16}function yP(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function G0(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}let vP=0,vr=class Uf{constructor(e,t,r,s){this.name=e,this.set=t,this.base=r,this.modified=s,this.id=vP++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof Uf&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let s=new Uf(r,[],null,[]);if(s.set.push(s),t)for(let l of t.set)s.set.push(l);return s}static defineModifier(e){let t=new wu(e);return r=>r.modified.indexOf(t)>-1?r:wu.get(r.base||r,r.modified.concat(t).sort((s,l)=>s.id-l.id))}},xP=0;class wu{constructor(e){this.name=e,this.instances=[],this.id=xP++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(c=>c.base==e&&wP(t,c.modified));if(r)return r;let s=[],l=new vr(e.name,s,e,t);for(let c of t)c.instances.push(l);let a=kP(t);for(let c of e.set)if(!c.modified.length)for(let h of a)s.push(wu.get(c,h));return l}}function wP(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function kP(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,s=e.length;r<s;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function Lx(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let s of t.split(" "))if(s){let l=[],a=2,c=s;for(let m=0;;){if(c=="..."&&m>0&&m+3==s.length){a=1;break}let v=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!v)throw new RangeError("Invalid path: "+s);if(l.push(v[0]=="*"?"":v[0][0]=='"'?JSON.parse(v[0]):v[0]),m+=v[0].length,m==s.length)break;let x=s[m++];if(m==s.length&&x=="!"){a=0;break}if(x!="/")throw new RangeError("Invalid path: "+s);c=s.slice(m)}let h=l.length-1,p=l[h];if(!p)throw new RangeError("Invalid path: "+s);let d=new Jo(r,a,h>0?l.slice(0,h):null);e[p]=d.sort(e[p])}}return Ix.add(e)}const Ix=new Re({combine(n,e){let t,r,s;for(;n||e;){if(!n||e&&n.depth>=e.depth?(s=e,e=e.next):(s=n,n=n.next),t&&t.mode==s.mode&&!s.context&&!t.context)continue;let l=new Jo(s.tags,s.mode,s.context);t?t.next=l:r=l,t=l}return r}});class Jo{constructor(e,t,r,s){this.tags=e,this.mode=t,this.context=r,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Jo.empty=new Jo([],2,null);function jx(n,e){let t=Object.create(null);for(let l of n)if(!Array.isArray(l.tag))t[l.tag.id]=l.class;else for(let a of l.tag)t[a.id]=l.class;let{scope:r,all:s=null}=e||{};return{style:l=>{let a=s;for(let c of l)for(let h of c.set){let p=t[h.id];if(p){a=a?a+" "+p:p;break}}return a},scope:r}}function bP(n,e){let t=null;for(let r of n){let s=r.style(e);s&&(t=t?t+" "+s:s)}return t}function SP(n,e,t,r=0,s=n.length){let l=new OP(r,Array.isArray(e)?e:[e],t);l.highlightRange(n.cursor(),r,s,"",l.highlighters),l.flush(s)}class OP{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,s,l){let{type:a,from:c,to:h}=e;if(c>=r||h<=t)return;a.isTop&&(l=this.highlighters.filter(x=>!x.scope||x.scope(a)));let p=s,d=CP(e)||Jo.empty,m=bP(l,d.tags);if(m&&(p&&(p+=" "),p+=m,d.mode==1&&(s+=(s?" ":"")+m)),this.startSpan(Math.max(t,c),p),d.opaque)return;let v=e.tree&&e.tree.prop(Re.mounted);if(v&&v.overlay){let x=e.node.enter(v.overlay[0].from+c,1),k=this.highlighters.filter(C=>!C.scope||C.scope(v.tree.type)),S=e.firstChild();for(let C=0,E=c;;C++){let A=C<v.overlay.length?v.overlay[C]:null,N=A?A.from+c:h,_=Math.max(t,E),I=Math.min(r,N);if(_<I&&S)for(;e.from<I&&(this.highlightRange(e,_,I,s,l),this.startSpan(Math.min(I,e.to),p),!(e.to>=N||!e.nextSibling())););if(!A||N>r)break;E=A.to+c,E>t&&(this.highlightRange(x.cursor(),Math.max(t,A.from+c),Math.min(r,E),"",k),this.startSpan(Math.min(r,E),p))}S&&e.parent()}else if(e.firstChild()){v&&(s="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,s,l),this.startSpan(Math.min(r,e.to),p)}while(e.nextSibling());e.parent()}}}function CP(n){let e=n.type.prop(Ix);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const oe=vr.define,Fa=oe(),Kr=oe(),J0=oe(Kr),Z0=oe(Kr),qr=oe(),_a=oe(qr),Xh=oe(qr),Zn=oe(),Oi=oe(Zn),Gn=oe(),Jn=oe(),Xf=oe(),xo=oe(Xf),Va=oe(),W={comment:Fa,lineComment:oe(Fa),blockComment:oe(Fa),docComment:oe(Fa),name:Kr,variableName:oe(Kr),typeName:J0,tagName:oe(J0),propertyName:Z0,attributeName:oe(Z0),className:oe(Kr),labelName:oe(Kr),namespace:oe(Kr),macroName:oe(Kr),literal:qr,string:_a,docString:oe(_a),character:oe(_a),attributeValue:oe(_a),number:Xh,integer:oe(Xh),float:oe(Xh),bool:oe(qr),regexp:oe(qr),escape:oe(qr),color:oe(qr),url:oe(qr),keyword:Gn,self:oe(Gn),null:oe(Gn),atom:oe(Gn),unit:oe(Gn),modifier:oe(Gn),operatorKeyword:oe(Gn),controlKeyword:oe(Gn),definitionKeyword:oe(Gn),moduleKeyword:oe(Gn),operator:Jn,derefOperator:oe(Jn),arithmeticOperator:oe(Jn),logicOperator:oe(Jn),bitwiseOperator:oe(Jn),compareOperator:oe(Jn),updateOperator:oe(Jn),definitionOperator:oe(Jn),typeOperator:oe(Jn),controlOperator:oe(Jn),punctuation:Xf,separator:oe(Xf),bracket:xo,angleBracket:oe(xo),squareBracket:oe(xo),paren:oe(xo),brace:oe(xo),content:Zn,heading:Oi,heading1:oe(Oi),heading2:oe(Oi),heading3:oe(Oi),heading4:oe(Oi),heading5:oe(Oi),heading6:oe(Oi),contentSeparator:oe(Zn),list:oe(Zn),quote:oe(Zn),emphasis:oe(Zn),strong:oe(Zn),link:oe(Zn),monospace:oe(Zn),strikethrough:oe(Zn),inserted:oe(),deleted:oe(),changed:oe(),invalid:oe(),meta:Va,documentMeta:oe(Va),annotation:oe(Va),processingInstruction:oe(Va),definition:vr.defineModifier("definition"),constant:vr.defineModifier("constant"),function:vr.defineModifier("function"),standard:vr.defineModifier("standard"),local:vr.defineModifier("local"),special:vr.defineModifier("special")};for(let n in W){let e=W[n];e instanceof vr&&(e.name=n)}jx([{tag:W.link,class:"tok-link"},{tag:W.heading,class:"tok-heading"},{tag:W.emphasis,class:"tok-emphasis"},{tag:W.strong,class:"tok-strong"},{tag:W.keyword,class:"tok-keyword"},{tag:W.atom,class:"tok-atom"},{tag:W.bool,class:"tok-bool"},{tag:W.url,class:"tok-url"},{tag:W.labelName,class:"tok-labelName"},{tag:W.inserted,class:"tok-inserted"},{tag:W.deleted,class:"tok-deleted"},{tag:W.literal,class:"tok-literal"},{tag:W.string,class:"tok-string"},{tag:W.number,class:"tok-number"},{tag:[W.regexp,W.escape,W.special(W.string)],class:"tok-string2"},{tag:W.variableName,class:"tok-variableName"},{tag:W.local(W.variableName),class:"tok-variableName tok-local"},{tag:W.definition(W.variableName),class:"tok-variableName tok-definition"},{tag:W.special(W.variableName),class:"tok-variableName2"},{tag:W.definition(W.propertyName),class:"tok-propertyName tok-definition"},{tag:W.typeName,class:"tok-typeName"},{tag:W.namespace,class:"tok-namespace"},{tag:W.className,class:"tok-className"},{tag:W.macroName,class:"tok-macroName"},{tag:W.propertyName,class:"tok-propertyName"},{tag:W.operator,class:"tok-operator"},{tag:W.comment,class:"tok-comment"},{tag:W.meta,class:"tok-meta"},{tag:W.invalid,class:"tok-invalid"},{tag:W.punctuation,class:"tok-punctuation"}]);const os=63,ey=64,PP=1,EP=2,Bx=3,MP=4,zx=5,RP=6,AP=7,Fx=65,DP=66,NP=8,TP=9,LP=10,IP=11,jP=12,_x=13,BP=19,zP=20,FP=29,_P=33,VP=34,HP=47,WP=0,Td=1,Kf=2,Zo=3,qf=4;class Ei{constructor(e,t,r){this.parent=e,this.depth=t,this.type=r,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+r}}Ei.top=new Ei(null,-1,WP);function Bo(n,e){for(let t=0,r=e-n.pos-1;;r--,t++){let s=n.peek(r);if(Or(s)||s==-1)return t}}function Yf(n){return n==32||n==9}function Or(n){return n==10||n==13}function Vx(n){return Yf(n)||Or(n)}function Ri(n){return n<0||Vx(n)}const QP=new mP({start:Ei.top,reduce(n,e){return n.type==Zo&&(e==zP||e==VP)?n.parent:n},shift(n,e,t,r){if(e==Bx)return new Ei(n,Bo(r,r.pos),Td);if(e==Fx||e==zx)return new Ei(n,Bo(r,r.pos),Kf);if(e==os)return n.parent;if(e==BP||e==_P)return new Ei(n,0,Zo);if(e==_x&&n.type==qf)return n.parent;if(e==HP){let s=/[1-9]/.exec(r.read(r.pos,t.pos));if(s)return new Ei(n,n.depth+ +s[0],qf)}return n},hash(n){return n.hash}});function bs(n,e,t=0){return n.peek(t)==e&&n.peek(t+1)==e&&n.peek(t+2)==e&&Ri(n.peek(t+3))}const $P=new Iu((n,e)=>{if(n.next==-1&&e.canShift(ey))return n.acceptToken(ey);let t=n.peek(-1);if((Or(t)||t<0)&&e.context.type!=Zo){if(bs(n,45))if(e.canShift(os))n.acceptToken(os);else return n.acceptToken(PP,3);if(bs(n,46))if(e.canShift(os))n.acceptToken(os);else return n.acceptToken(EP,3);let r=0;for(;n.next==32;)r++,n.advance();(r<e.context.depth||r==e.context.depth&&e.context.type==Td&&(n.next!=45||!Ri(n.peek(1))))&&n.next!=-1&&!Or(n.next)&&n.next!=35&&n.acceptToken(os,-r)}},{contextual:!0}),UP=new Iu((n,e)=>{if(e.context.type==Zo){n.next==63&&(n.advance(),Ri(n.next)&&n.acceptToken(AP));return}if(n.next==45)n.advance(),Ri(n.next)&&n.acceptToken(e.context.type==Td&&e.context.depth==Bo(n,n.pos-1)?MP:Bx);else if(n.next==63)n.advance(),Ri(n.next)&&n.acceptToken(e.context.type==Kf&&e.context.depth==Bo(n,n.pos-1)?RP:zx);else{let t=n.pos;for(;;)if(Yf(n.next)){if(n.pos==t)return;n.advance()}else if(n.next==33)Hx(n);else if(n.next==38)Gf(n);else if(n.next==42){Gf(n);break}else if(n.next==39||n.next==34){if(Ld(n,!0))break;return}else if(n.next==91||n.next==123){if(!KP(n))return;break}else{Wx(n,!0,!1,0);break}for(;Yf(n.next);)n.advance();if(n.next==58){if(n.pos==t&&e.canShift(FP))return;let r=n.peek(1);Ri(r)&&n.acceptTokenTo(e.context.type==Kf&&e.context.depth==Bo(n,t)?DP:Fx,t)}}},{contextual:!0});function XP(n){return n>32&&n<127&&n!=34&&n!=37&&n!=44&&n!=60&&n!=62&&n!=92&&n!=94&&n!=96&&n!=123&&n!=124&&n!=125}function ty(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function ny(n,e){return n.next==37?(n.advance(),ty(n.next)&&n.advance(),ty(n.next)&&n.advance(),!0):XP(n.next)||e&&n.next==44?(n.advance(),!0):!1}function Hx(n){if(n.advance(),n.next==60){for(n.advance();;)if(!ny(n,!0)){n.next==62&&n.advance();break}}else for(;ny(n,!1););}function Gf(n){for(n.advance();!Ri(n.next)&&ku(n.tag)!="f";)n.advance()}function Ld(n,e){let t=n.next,r=!1,s=n.pos;for(n.advance();;){let l=n.next;if(l<0)break;if(n.advance(),l==t)if(l==39)if(n.next==39)n.advance();else break;else break;else if(l==92&&t==34)n.next>=0&&n.advance();else if(Or(l)){if(e)return!1;r=!0}else if(e&&n.pos>=s+1024)return!1}return!r}function KP(n){for(let e=[],t=n.pos+1024;;)if(n.next==91||n.next==123)e.push(n.next),n.advance();else if(n.next==39||n.next==34){if(!Ld(n,!0))return!1}else if(n.next==93||n.next==125){if(e[e.length-1]!=n.next-2)return!1;if(e.pop(),n.advance(),!e.length)return!0}else{if(n.next<0||n.pos>t||Or(n.next))return!1;n.advance()}}const qP="iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif";function ku(n){return n<33?"u":n>125?"s":qP[n-33]}function Kh(n,e){let t=ku(n);return t!="u"&&!(e&&t=="f")}function Wx(n,e,t,r){if(ku(n.next)=="s"||(n.next==63||n.next==58||n.next==45)&&Kh(n.peek(1),t))n.advance();else return!1;let s=n.pos;for(;;){let l=n.next,a=0,c=r+1;for(;Vx(l);){if(Or(l)){if(e)return!1;c=0}else c++;l=n.peek(++a)}if(!(l>=0&&(l==58?Kh(n.peek(a+1),t):l==35?n.peek(a-1)!=32:Kh(l,t)))||!t&&c<=r||c==0&&!t&&(bs(n,45,a)||bs(n,46,a)))break;if(e&&ku(l)=="f")return!1;for(let p=a;p>=0;p--)n.advance();if(e&&n.pos>s+1024)return!1}return!0}const YP=new Iu((n,e)=>{if(n.next==33)Hx(n),n.acceptToken(jP);else if(n.next==38||n.next==42){let t=n.next==38?LP:IP;Gf(n),n.acceptToken(t)}else n.next==39||n.next==34?(Ld(n,!1),n.acceptToken(TP)):Wx(n,!1,e.context.type==Zo,e.context.depth)&&n.acceptToken(NP)}),GP=new Iu((n,e)=>{let t=e.context.type==qf?e.context.depth:-1,r=n.pos;e:for(;;){let s=0,l=n.next;for(;l==32;)l=n.peek(++s);if(!s&&(bs(n,45,s)||bs(n,46,s))||!Or(l)&&(t<0&&(t=Math.max(e.context.depth+1,s)),s<t))break;for(;;){if(n.next<0)break e;let a=Or(n.next);if(n.advance(),a)continue e;r=n.pos}}n.acceptTokenTo(_x,r)}),JP=Lx({DirectiveName:W.keyword,DirectiveContent:W.attributeValue,"DirectiveEnd DocEnd":W.meta,QuotedLiteral:W.string,BlockLiteralHeader:W.special(W.string),BlockLiteralContent:W.content,Literal:W.content,"Key/Literal Key/QuotedLiteral":W.definition(W.propertyName),"Anchor Alias":W.labelName,Tag:W.typeName,Comment:W.lineComment,": , -":W.separator,"?":W.punctuation,"[ ]":W.squareBracket,"{ }":W.brace}),ZP=xu.deserialize({version:14,states:"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y",stateData:";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O",goto:",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv",nodeNames:" DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document",maxTerm:74,context:QP,nodeProps:[["isolate",-3,8,9,14,""],["openedBy",18,"[",32,"{"],["closedBy",19,"]",33,"}"]],propSources:[JP],skippedNodes:[0],repeatNodeCount:6,tokenData:"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P",tokenizers:[$P,UP,YP,GP,0,1],topRules:{Stream:[0,15]},tokenPrec:0});var qh;const cs=new Re;function eE(n){return we.define({combine:n?e=>e.concat(n):void 0})}const tE=new Re;class jn{constructor(e,t,r=[],s=""){this.data=e,this.name=s,Ie.prototype.hasOwnProperty("tree")||Object.defineProperty(Ie.prototype,"tree",{get(){return sr(this)}}),this.parser=t,this.extension=[Os.of(this),Ie.languageData.of((l,a,c)=>{let h=ry(l,a,c),p=h.type.prop(cs);if(!p)return[];let d=l.facet(p),m=h.type.prop(tE);if(m){let v=h.resolve(a-h.from,c);for(let x of m)if(x.test(v,l)){let k=l.facet(x.facet);return x.type=="replace"?k:k.concat(d)}}return d})].concat(r)}isActiveAt(e,t,r=-1){return ry(e,t,r).type.prop(cs)==this.data}findRegions(e){let t=e.facet(Os);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],s=(l,a)=>{if(l.prop(cs)==this.data){r.push({from:a,to:a+l.length});return}let c=l.prop(Re.mounted);if(c){if(c.tree.prop(cs)==this.data){if(c.overlay)for(let h of c.overlay)r.push({from:h.from+a,to:h.to+a});else r.push({from:a,to:a+l.length});return}else if(c.overlay){let h=r.length;if(s(c.tree,c.overlay[0].from+a),r.length>h)return}}for(let h=0;h<l.children.length;h++){let p=l.children[h];p instanceof ut&&s(p,l.positions[h]+a)}};return s(sr(e),0),r}get allowsNesting(){return!0}}jn.setState=pt.define();function ry(n,e,t){let r=n.facet(Os),s=sr(n).topNode;if(!r||r.allowsNesting)for(let l=s;l;l=l.enter(e,t,wt.ExcludeBuffers))l.type.isTop&&(s=l);return s}class bu extends jn{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=eE(e.languageData);return new bu(t,e.parser.configure({props:[cs.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new bu(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function sr(n){let e=n.field(jn.state,!1);return e?e.tree:ut.empty}class nE{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let wo=null;class Su{constructor(e,t,r=[],s,l,a,c,h){this.parser=e,this.state=t,this.fragments=r,this.tree=s,this.treeLen=l,this.viewport=a,this.skipped=c,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Su(e,t,[],ut.empty,0,r,[],null)}startParse(){return this.parser.startParse(new nE(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=ut.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Ai.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Ai.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=wo;wo=this;try{return e()}finally{wo=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=iy(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:s,treeLen:l,viewport:a,skipped:c}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((p,d,m,v)=>h.push({fromA:p,toA:d,fromB:m,toB:v})),r=Ai.applyChanges(r,h),s=ut.empty,l=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){c=[];for(let p of this.skipped){let d=e.mapPos(p.from,1),m=e.mapPos(p.to,-1);d<m&&c.push({from:d,to:m})}}}return new Su(this.parser,t,r,s,l,a,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:s,to:l}=this.skipped[r];s<e.to&&l>e.from&&(this.fragments=iy(this.fragments,s,l),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Tx{createParse(t,r,s){let l=s[0].from,a=s[s.length-1].to;return{parsedPos:l,advance(){let h=wo;if(h){for(let p of s)h.tempSkipped.push(p);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=a,new ut(Zt.none,[],[],a-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return wo}}function iy(n,e,t){return Ai.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Ss{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Ss(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Su.create(e.facet(Os).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Ss(r)}}jn.state=Ii.define({create:Ss.init,update(n,e){for(let t of e.effects)if(t.is(jn.setState))return t.value;return e.startState.facet(Os)!=e.state.facet(Os)?Ss.init(e.state):n.apply(e)}});let Qx=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Qx=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Yh=typeof navigator<"u"&&(!((qh=navigator.scheduling)===null||qh===void 0)&&qh.isInputPending)?()=>navigator.scheduling.isInputPending():null,rE=Fn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(jn.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(jn.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Qx(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:s}}=this.view,l=r.field(jn.state);if(l.tree==l.context.tree&&l.context.isDone(s+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!Yh?Math.max(25,e.timeRemaining()-5):1e9),c=l.context.treeLen<s&&r.doc.length>s+1e3,h=l.context.work(()=>Yh&&Yh()||Date.now()>a,s+(c?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:jn.setState.of(new Ss(l.context))})),this.chunkBudget>0&&!(h&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>nr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Os=we.define({combine(n){return n.length?n[0]:null},enables:n=>[jn.state,rE,Ce.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class iE{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const sE=we.define(),Id=we.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Ou(n){let e=n.facet(Id);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Cu(n,e){let t="",r=n.tabSize,s=n.facet(Id)[0];if(s=="	"){for(;e>=r;)t+="	",e-=r;s=" "}for(let l=0;l<e;l++)t+=s;return t}function $x(n,e){n instanceof Ie&&(n=new ju(n));for(let r of n.state.facet(sE)){let s=r(n,e);if(s!==void 0)return s}let t=sr(n.state);return t.length>=e?oE(n,t,e):null}class ju{constructor(e,t={}){this.state=e,this.options=t,this.unit=Ou(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:l}=this.options;return s!=null&&s>=r.from&&s<=r.to?l&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:r.text.slice(s-r.from),from:s}:{text:r.text.slice(0,s-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:s}=this.lineAt(e,t);return r.slice(e-s,Math.min(r.length,e+100-s))}column(e,t=1){let{text:r,from:s}=this.lineAt(e,t),l=this.countColumn(r,e-s),a=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return a>-1&&(l+=a-this.countColumn(r,r.search(/\S|$/))),l}countColumn(e,t=e.length){return Du(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:s}=this.lineAt(e,t),l=this.options.overrideIndentation;if(l){let a=l(s);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Ux=new Re;function oE(n,e,t){let r=e.resolveStack(t),s=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(s!=r.node){let l=[];for(let a=s;a&&!(a.from<r.node.from||a.to>r.node.to||a.from==r.node.from&&a.type==r.node.type);a=a.parent)l.push(a);for(let a=l.length-1;a>=0;a--)r={node:l[a],next:r}}return Xx(r,n,t)}function Xx(n,e,t){for(let r=n;r;r=r.next){let s=aE(r.node);if(s)return s(jd.create(e,t,r))}return 0}function lE(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function aE(n){let e=n.type.prop(Ux);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Re.closedBy))){let s=n.lastChild,l=s&&r.indexOf(s.name)>-1;return a=>Kx(a,!0,1,void 0,l&&!lE(a)?s.from:void 0)}return n.parent==null?uE:null}function uE(){return 0}class jd extends ju{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new jd(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(cE(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return Xx(this.context.next,this.base,this.pos)}}function cE(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function hE(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,l=n.state.doc.lineAt(t.from),a=s==null||s<=l.from?l.to:Math.min(l.to,s);for(let c=t.to;;){let h=e.childAfter(c);if(!h||h==r)return null;if(!h.type.isSkipped){if(h.from>=a)return null;let p=/^ */.exec(l.text.slice(t.to-l.from))[0].length;return{from:t.from,to:t.to+p}}c=h.to}}function sy({closing:n,align:e=!0,units:t=1}){return r=>Kx(r,e,t,n)}function Kx(n,e,t,r,s){let l=n.textAfter,a=l.match(/^\s*/)[0].length,c=r&&l.slice(a,a+r.length)==r||s==n.pos+a,h=e?hE(n):null;return h?c?n.column(h.from):n.column(h.to):n.baseIndent+(c?0:n.unit*t)}const fE=new Re;function dE(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}class Bu{constructor(e,t){this.specs=e;let r;function s(c){let h=ri.newName();return(r||(r=Object.create(null)))["."+h]=c,h}const l=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,a=t.scope;this.scope=a instanceof jn?c=>c.prop(cs)==a.data:a?c=>c==a:void 0,this.style=jx(e.map(c=>({tag:c.tag,class:c.class||s(Object.assign({},c,{tag:null}))})),{all:l}).style,this.module=r?new ri(r):null,this.themeType=t.themeType}static define(e,t){return new Bu(e,t||{})}}const Jf=we.define(),pE=we.define({combine(n){return n.length?[n[0]]:null}});function Gh(n){let e=n.facet(Jf);return e.length?e:n.facet(pE)}function gE(n,e){let t=[yE],r;return n instanceof Bu&&(n.module&&t.push(Ce.styleModule.of(n.module)),r=n.themeType),r?t.push(Jf.computeN([Ce.darkTheme],s=>s.facet(Ce.darkTheme)==(r=="dark")?[n]:[])):t.push(Jf.of(n)),t}class mE{constructor(e){this.markCache=Object.create(null),this.tree=sr(e.state),this.decorations=this.buildDeco(e,Gh(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=sr(e.state),r=Gh(e.state),s=r!=Gh(e.startState),{viewport:l}=e.view,a=e.changes.mapPos(this.decoratedTo,1);t.length<l.to&&!s&&t.type==this.tree.type&&a>=l.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=l.to)}buildDeco(e,t){if(!t||!this.tree.length)return tt.none;let r=new Qo;for(let{from:s,to:l}of e.visibleRanges)SP(this.tree,t,(a,c,h)=>{r.add(a,c,this.markCache[h]||(this.markCache[h]=tt.mark({class:h})))},s,l);return r.finish()}}const yE=Au.high(Fn.fromClass(mE,{decorations:n=>n.decorations})),vE=1e4,xE="()[]{}",wE=new Re;function Zf(n,e,t){let r=n.prop(e<0?Re.openedBy:Re.closedBy);if(r)return r;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function ed(n){let e=n.type.prop(wE);return e?e(n.node):n}function hs(n,e,t,r={}){let s=r.maxScanDistance||vE,l=r.brackets||xE,a=sr(n),c=a.resolveInner(e,t);for(let h=c;h;h=h.parent){let p=Zf(h.type,t,l);if(p&&h.from<h.to){let d=ed(h);if(d&&(t>0?e>=d.from&&e<d.to:e>d.from&&e<=d.to))return kE(n,e,t,h,d,p,l)}}return bE(n,e,t,a,c.type,s,l)}function kE(n,e,t,r,s,l,a){let c=r.parent,h={from:s.from,to:s.to},p=0,d=c==null?void 0:c.cursor();if(d&&(t<0?d.childBefore(r.from):d.childAfter(r.to)))do if(t<0?d.to<=r.from:d.from>=r.to){if(p==0&&l.indexOf(d.type.name)>-1&&d.from<d.to){let m=ed(d);return{start:h,end:m?{from:m.from,to:m.to}:void 0,matched:!0}}else if(Zf(d.type,t,a))p++;else if(Zf(d.type,-t,a)){if(p==0){let m=ed(d);return{start:h,end:m&&m.from<m.to?{from:m.from,to:m.to}:void 0,matched:!1}}p--}}while(t<0?d.prevSibling():d.nextSibling());return{start:h,matched:!1}}function bE(n,e,t,r,s,l,a){let c=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),h=a.indexOf(c);if(h<0||h%2==0!=t>0)return null;let p={from:t<0?e-1:e,to:t>0?e+1:e},d=n.doc.iterRange(e,t>0?n.doc.length:0),m=0;for(let v=0;!d.next().done&&v<=l;){let x=d.value;t<0&&(v+=x.length);let k=e+v*t;for(let S=t>0?0:x.length-1,C=t>0?x.length:-1;S!=C;S+=t){let E=a.indexOf(x[S]);if(!(E<0||r.resolveInner(k+S,1).type!=s))if(E%2==0==t>0)m++;else{if(m==1)return{start:p,end:{from:k+S,to:k+S+1},matched:E>>1==h>>1};m--}}t>0&&(v+=x.length)}return d.done?{start:p,matched:!1}:null}const SE=Object.create(null),oy=[Zt.none],ly=[],ay=Object.create(null),OE=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])OE[n]=CE(SE,e);function Jh(n,e){ly.indexOf(n)>-1||(ly.push(n),console.warn(e))}function CE(n,e){let t=[];for(let c of e.split(" ")){let h=[];for(let p of c.split(".")){let d=n[p]||W[p];d?typeof d=="function"?h.length?h=h.map(d):Jh(p,`Modifier ${p} used at start of tag`):h.length?Jh(p,`Tag ${p} used as modifier`):h=Array.isArray(d)?d:[d]:Jh(p,`Unknown highlighting tag ${p}`)}for(let p of h)t.push(p)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),s=r+" "+t.map(c=>c.id),l=ay[s];if(l)return l.id;let a=ay[s]=Zt.define({id:oy.length,name:r,props:[Lx({[r]:t})]});return oy.push(a),a.id}et.RTL,et.LTR;const PE=bu.define({name:"yaml",parser:ZP.configure({props:[Ux.add({Stream:n=>{for(let e=n.node.resolve(n.pos,-1);e&&e.to>=n.pos;e=e.parent){if(e.name=="BlockLiteralContent"&&e.from<e.to)return n.baseIndentFor(e);if(e.name=="BlockLiteral")return n.baseIndentFor(e)+n.unit;if(e.name=="BlockSequence"||e.name=="BlockMapping")return n.column(e.from,1);if(e.name=="QuotedLiteral")return null;if(e.name=="Literal"){let t=n.column(e.from,1);if(t==n.lineIndent(e.from,1))return t;if(e.to>n.pos)return null}}return null},FlowMapping:sy({closing:"}"}),FlowSequence:sy({closing:"]"})}),fE.add({"FlowMapping FlowSequence":dE,"Item Pair BlockLiteral":(n,e)=>({from:e.doc.lineAt(n.from).to,to:n.to})})]}),languageData:{commentTokens:{line:"#"},indentOnInput:/^\s*[\]\}]$/}});function EE(){return new iE(PE)}const ME="#e5c07b",uy="#e06c75",RE="#56b6c2",AE="#ffffff",nu="#abb2bf",td="#7d8799",DE="#61afef",NE="#98c379",cy="#d19a66",TE="#c678dd",LE="#21252b",hy="#2c313a",fy="#282c34",Zh="#353a42",IE="#3E4451",dy="#528bff",jE=Ce.theme({"&":{color:nu,backgroundColor:fy},".cm-content":{caretColor:dy},".cm-cursor, .cm-dropCursor":{borderLeftColor:dy},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:IE},".cm-panels":{backgroundColor:LE,color:nu},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:fy,color:td,border:"none"},".cm-activeLineGutter":{backgroundColor:hy},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Zh},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Zh,borderBottomColor:Zh},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:hy,color:nu}}},{dark:!0}),BE=Bu.define([{tag:W.keyword,color:TE},{tag:[W.name,W.deleted,W.character,W.propertyName,W.macroName],color:uy},{tag:[W.function(W.variableName),W.labelName],color:DE},{tag:[W.color,W.constant(W.name),W.standard(W.name)],color:cy},{tag:[W.definition(W.name),W.separator],color:nu},{tag:[W.typeName,W.className,W.number,W.changed,W.annotation,W.modifier,W.self,W.namespace],color:ME},{tag:[W.operator,W.operatorKeyword,W.url,W.escape,W.regexp,W.link,W.special(W.string)],color:RE},{tag:[W.meta,W.comment],color:td},{tag:W.strong,fontWeight:"bold"},{tag:W.emphasis,fontStyle:"italic"},{tag:W.strikethrough,textDecoration:"line-through"},{tag:W.link,color:td,textDecoration:"underline"},{tag:W.heading,fontWeight:"bold",color:uy},{tag:[W.atom,W.bool,W.special(W.variableName)],color:cy},{tag:[W.processingInstruction,W.string,W.inserted],color:NE},{tag:W.invalid,color:AE}]),zE=[jE,gE(BE)],FE=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=zd(n.state,t.from);return r.line?_E(n):r.block?HE(n):!1};function Bd(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(r(t.update(s)),!0):!1}}const _E=Bd($E,0),VE=Bd(qx,0),HE=Bd((n,e)=>qx(n,e,QE(e)),0);function zd(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const ko=50;function WE(n,{open:e,close:t},r,s){let l=n.sliceDoc(r-ko,r),a=n.sliceDoc(s,s+ko),c=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(a)[0].length,p=l.length-c;if(l.slice(p-e.length,p)==e&&a.slice(h,h+t.length)==t)return{open:{pos:r-c,margin:c&&1},close:{pos:s+h,margin:h&&1}};let d,m;s-r<=2*ko?d=m=n.sliceDoc(r,s):(d=n.sliceDoc(r,r+ko),m=n.sliceDoc(s-ko,s));let v=/^\s*/.exec(d)[0].length,x=/\s*$/.exec(m)[0].length,k=m.length-x-t.length;return d.slice(v,v+e.length)==e&&m.slice(k,k+t.length)==t?{open:{pos:r+v+e.length,margin:/\s/.test(d.charAt(v+e.length))?1:0},close:{pos:s-x-t.length,margin:/\s/.test(m.charAt(k-1))?1:0}}:null}function QE(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),s=t.to<=r.to?r:n.doc.lineAt(t.to);s.from>r.from&&s.from==t.to&&(s=t.to==r.to+1?r:n.doc.lineAt(t.to-1));let l=e.length-1;l>=0&&e[l].to>r.from?e[l].to=s.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:s.to})}return e}function qx(n,e,t=e.selection.ranges){let r=t.map(l=>zd(e,l.from).block);if(!r.every(l=>l))return null;let s=t.map((l,a)=>WE(e,r[a],l.from,l.to));if(n!=2&&!s.every(l=>l))return{changes:e.changes(t.map((l,a)=>s[a]?[]:[{from:l.from,insert:r[a].open+" "},{from:l.to,insert:" "+r[a].close}]))};if(n!=1&&s.some(l=>l)){let l=[];for(let a=0,c;a<s.length;a++)if(c=s[a]){let h=r[a],{open:p,close:d}=c;l.push({from:p.pos-h.open.length,to:p.pos+p.margin},{from:d.pos-d.margin,to:d.pos+h.close.length})}return{changes:l}}return null}function $E(n,e,t=e.selection.ranges){let r=[],s=-1;for(let{from:l,to:a}of t){let c=r.length,h=1e9,p=zd(e,l).line;if(p){for(let d=l;d<=a;){let m=e.doc.lineAt(d);if(m.from>s&&(l==a||a>m.from)){s=m.from;let v=/^\s*/.exec(m.text)[0].length,x=v==m.length,k=m.text.slice(v,v+p.length)==p?v:-1;v<m.text.length&&v<h&&(h=v),r.push({line:m,comment:k,token:p,indent:v,empty:x,single:!1})}d=m.to+1}if(h<1e9)for(let d=c;d<r.length;d++)r[d].indent<r[d].line.text.length&&(r[d].indent=h);r.length==c+1&&(r[c].single=!0)}}if(n!=2&&r.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:c,token:h,indent:p,empty:d,single:m}of r)(m||!d)&&l.push({from:c.from+p,insert:h+" "});let a=e.changes(l);return{changes:a,selection:e.selection.map(a,1)}}else if(n!=1&&r.some(l=>l.comment>=0)){let l=[];for(let{line:a,comment:c,token:h}of r)if(c>=0){let p=a.from+c,d=p+h.length;a.text[d-a.from]==" "&&d++,l.push({from:p,to:d})}return{changes:l}}return null}function As(n,e){return ne.create(n.ranges.map(e),n.mainIndex)}function Vn(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Hn({state:n,dispatch:e},t){let r=As(n.selection,t);return r.eq(n.selection,!0)?!1:(e(Vn(n,r)),!0)}function zu(n,e){return ne.cursor(e?n.to:n.from)}function Yx(n,e){return Hn(n,t=>t.empty?n.moveByChar(t,e):zu(t,e))}function jt(n){return n.textDirectionAt(n.state.selection.main.head)==et.LTR}const Gx=n=>Yx(n,!jt(n)),Jx=n=>Yx(n,jt(n));function Zx(n,e){return Hn(n,t=>t.empty?n.moveByGroup(t,e):zu(t,e))}const UE=n=>Zx(n,!jt(n)),XE=n=>Zx(n,jt(n));function KE(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Fu(n,e,t){let r=sr(n).resolveInner(e.head),s=t?Re.closedBy:Re.openedBy;for(let h=e.head;;){let p=t?r.childAfter(h):r.childBefore(h);if(!p)break;KE(n,p,s)?r=p:h=t?p.to:p.from}let l=r.type.prop(s),a,c;return l&&(a=t?hs(n,r.from,1):hs(n,r.to,-1))&&a.matched?c=t?a.end.to:a.end.from:c=t?r.to:r.from,ne.cursor(c,t?-1:1)}const qE=n=>Hn(n,e=>Fu(n.state,e,!jt(n))),YE=n=>Hn(n,e=>Fu(n.state,e,jt(n)));function e1(n,e){return Hn(n,t=>{if(!t.empty)return zu(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const t1=n=>e1(n,!1),n1=n=>e1(n,!0);function r1(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,s;if(e){for(let l of n.state.facet(Ce.scrollMargins)){let a=l(n);a!=null&&a.top&&(t=Math.max(a==null?void 0:a.top,t)),a!=null&&a.bottom&&(r=Math.max(a==null?void 0:a.bottom,r))}s=n.scrollDOM.clientHeight-t-r}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function i1(n,e){let t=r1(n),{state:r}=n,s=As(r.selection,a=>a.empty?n.moveVertically(a,e,t.height):zu(a,e));if(s.eq(r.selection))return!1;let l;if(t.selfScroll){let a=n.coordsAtPos(r.selection.main.head),c=n.scrollDOM.getBoundingClientRect(),h=c.top+t.marginTop,p=c.bottom-t.marginBottom;a&&a.top>h&&a.bottom<p&&(l=Ce.scrollIntoView(s.main.head,{y:"start",yMargin:a.top-h}))}return n.dispatch(Vn(r,s),{effects:l}),!0}const py=n=>i1(n,!1),nd=n=>i1(n,!0);function ai(n,e,t){let r=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?r.to:r.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==r.from&&r.length){let l=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;l&&e.head!=r.from+l&&(s=ne.cursor(r.from+l))}return s}const GE=n=>Hn(n,e=>ai(n,e,!0)),JE=n=>Hn(n,e=>ai(n,e,!1)),ZE=n=>Hn(n,e=>ai(n,e,!jt(n))),eM=n=>Hn(n,e=>ai(n,e,jt(n))),tM=n=>Hn(n,e=>ne.cursor(n.lineBlockAt(e.head).from,1)),nM=n=>Hn(n,e=>ne.cursor(n.lineBlockAt(e.head).to,-1));function rM(n,e,t){let r=!1,s=As(n.selection,l=>{let a=hs(n,l.head,-1)||hs(n,l.head,1)||l.head>0&&hs(n,l.head-1,1)||l.head<n.doc.length&&hs(n,l.head+1,-1);if(!a||!a.end)return l;r=!0;let c=a.start.from==l.head?a.end.to:a.end.from;return ne.cursor(c)});return r?(e(Vn(n,s)),!0):!1}const iM=({state:n,dispatch:e})=>rM(n,e);function Sn(n,e){let t=As(n.state.selection,r=>{let s=e(r);return ne.range(r.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Vn(n.state,t)),!0)}function s1(n,e){return Sn(n,t=>n.moveByChar(t,e))}const o1=n=>s1(n,!jt(n)),l1=n=>s1(n,jt(n));function a1(n,e){return Sn(n,t=>n.moveByGroup(t,e))}const sM=n=>a1(n,!jt(n)),oM=n=>a1(n,jt(n)),lM=n=>Sn(n,e=>Fu(n.state,e,!jt(n))),aM=n=>Sn(n,e=>Fu(n.state,e,jt(n)));function u1(n,e){return Sn(n,t=>n.moveVertically(t,e))}const c1=n=>u1(n,!1),h1=n=>u1(n,!0);function f1(n,e){return Sn(n,t=>n.moveVertically(t,e,r1(n).height))}const gy=n=>f1(n,!1),my=n=>f1(n,!0),uM=n=>Sn(n,e=>ai(n,e,!0)),cM=n=>Sn(n,e=>ai(n,e,!1)),hM=n=>Sn(n,e=>ai(n,e,!jt(n))),fM=n=>Sn(n,e=>ai(n,e,jt(n))),dM=n=>Sn(n,e=>ne.cursor(n.lineBlockAt(e.head).from)),pM=n=>Sn(n,e=>ne.cursor(n.lineBlockAt(e.head).to)),yy=({state:n,dispatch:e})=>(e(Vn(n,{anchor:0})),!0),vy=({state:n,dispatch:e})=>(e(Vn(n,{anchor:n.doc.length})),!0),xy=({state:n,dispatch:e})=>(e(Vn(n,{anchor:n.selection.main.anchor,head:0})),!0),wy=({state:n,dispatch:e})=>(e(Vn(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),gM=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),mM=({state:n,dispatch:e})=>{let t=_u(n).map(({from:r,to:s})=>ne.range(r,Math.min(s+1,n.doc.length)));return e(n.update({selection:ne.create(t),userEvent:"select"})),!0},yM=({state:n,dispatch:e})=>{let t=As(n.selection,r=>{let s=sr(n),l=s.resolveStack(r.from,1);if(r.empty){let a=s.resolveStack(r.from,-1);a.node.from>=l.node.from&&a.node.to<=l.node.to&&(l=a)}for(let a=l;a;a=a.next){let{node:c}=a;if((c.from<r.from&&c.to>=r.to||c.to>r.to&&c.from<=r.from)&&a.next)return ne.range(c.to,c.from)}return r});return t.eq(n.selection)?!1:(e(Vn(n,t)),!0)};function d1(n,e){let{state:t}=n,r=t.selection,s=t.selection.ranges.slice();for(let l of t.selection.ranges){let a=t.doc.lineAt(l.head);if(e?a.to<n.state.doc.length:a.from>0)for(let c=l;;){let h=n.moveVertically(c,e);if(h.head<a.from||h.head>a.to){s.some(p=>p.head==h.head)||s.push(h);break}else{if(h.head==c.head)break;c=h}}}return s.length==r.ranges.length?!1:(n.dispatch(Vn(t,ne.create(s,s.length-1))),!0)}const vM=n=>d1(n,!1),xM=n=>d1(n,!0),wM=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=ne.create([t.main]):t.main.empty||(r=ne.create([ne.cursor(t.main.head)])),r?(e(Vn(n,r)),!0):!1};function cl(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,s=r.changeByRange(l=>{let{from:a,to:c}=l;if(a==c){let h=e(l);h<a?(t="delete.backward",h=Ha(n,h,!1)):h>a&&(t="delete.forward",h=Ha(n,h,!0)),a=Math.min(a,h),c=Math.max(c,h)}else a=Ha(n,a,!1),c=Ha(n,c,!0);return a==c?{range:l}:{changes:{from:a,to:c},range:ne.cursor(a,a<l.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(r.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Ce.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Ha(n,e,t){if(n instanceof Ce)for(let r of n.state.facet(Ce.atomicRanges).map(s=>s(n)))r.between(e,e,(s,l)=>{s<e&&l>e&&(e=t?l:s)});return e}const p1=(n,e,t)=>cl(n,r=>{let s=r.from,{state:l}=n,a=l.doc.lineAt(s),c,h;if(t&&!e&&s>a.from&&s<a.from+200&&!/[^ \t]/.test(c=a.text.slice(0,s-a.from))){if(c[c.length-1]=="	")return s-1;let p=Du(c,l.tabSize),d=p%Ou(l)||Ou(l);for(let m=0;m<d&&c[c.length-1-m]==" ";m++)s--;h=s}else h=Vt(a.text,s-a.from,e,e)+a.from,h==s&&a.number!=(e?l.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(h-a.from,s-a.from))&&(h=Vt(a.text,h-a.from,!1,!1)+a.from);return h}),rd=n=>p1(n,!1,!0),g1=n=>p1(n,!0,!1),m1=(n,e)=>cl(n,t=>{let r=t.head,{state:s}=n,l=s.doc.lineAt(r),a=s.charCategorizer(r);for(let c=null;;){if(r==(e?l.to:l.from)){r==t.head&&l.number!=(e?s.doc.lines:1)&&(r+=e?1:-1);break}let h=Vt(l.text,r-l.from,e)+l.from,p=l.text.slice(Math.min(r,h)-l.from,Math.max(r,h)-l.from),d=a(p);if(c!=null&&d!=c)break;(p!=" "||r!=t.head)&&(c=d),r=h}return r}),y1=n=>m1(n,!1),kM=n=>m1(n,!0),bM=n=>cl(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),SM=n=>cl(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),OM=n=>cl(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),CM=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Ne.of(["",""])},range:ne.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},PM=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let s=r.from,l=n.doc.lineAt(s),a=s==l.from?s-1:Vt(l.text,s-l.from,!1)+l.from,c=s==l.to?s+1:Vt(l.text,s-l.from,!0)+l.from;return{changes:{from:a,to:c,insert:n.doc.slice(s,c).append(n.doc.slice(a,s))},range:ne.cursor(c)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function _u(n){let e=[],t=-1;for(let r of n.selection.ranges){let s=n.doc.lineAt(r.from),l=n.doc.lineAt(r.to);if(!r.empty&&r.to==l.from&&(l=n.doc.lineAt(r.to-1)),t>=s.number){let a=e[e.length-1];a.to=l.to,a.ranges.push(r)}else e.push({from:s.from,to:l.to,ranges:[r]});t=l.number+1}return e}function v1(n,e,t){if(n.readOnly)return!1;let r=[],s=[];for(let l of _u(n)){if(t?l.to==n.doc.length:l.from==0)continue;let a=n.doc.lineAt(t?l.to+1:l.from-1),c=a.length+1;if(t){r.push({from:l.to,to:a.to},{from:l.from,insert:a.text+n.lineBreak});for(let h of l.ranges)s.push(ne.range(Math.min(n.doc.length,h.anchor+c),Math.min(n.doc.length,h.head+c)))}else{r.push({from:a.from,to:l.from},{from:l.to,insert:n.lineBreak+a.text});for(let h of l.ranges)s.push(ne.range(h.anchor-c,h.head-c))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:ne.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const EM=({state:n,dispatch:e})=>v1(n,e,!1),MM=({state:n,dispatch:e})=>v1(n,e,!0);function x1(n,e,t){if(n.readOnly)return!1;let r=[];for(let s of _u(n))t?r.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):r.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const RM=({state:n,dispatch:e})=>x1(n,e,!1),AM=({state:n,dispatch:e})=>x1(n,e,!0),DM=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(_u(e).map(({from:s,to:l})=>(s>0?s--:l<e.doc.length&&l++,{from:s,to:l}))),r=As(e.selection,s=>{let l;if(n.lineWrapping){let a=n.lineBlockAt(s.head),c=n.coordsAtPos(s.head,s.assoc||1);c&&(l=a.bottom+n.documentTop-c.bottom+n.defaultLineHeight/2)}return n.moveVertically(s,!0,l)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function NM(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=sr(n).resolveInner(e),r=t.childBefore(e),s=t.childAfter(e),l;return r&&s&&r.to<=e&&s.from>=e&&(l=r.type.prop(Re.closedBy))&&l.indexOf(s.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(r.to,s.from))?{from:r.to,to:s.from}:null}const ky=w1(!1),TM=w1(!0);function w1(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(s=>{let{from:l,to:a}=s,c=e.doc.lineAt(l),h=!n&&l==a&&NM(e,l);n&&(l=a=(a<=c.to?c:e.doc.lineAt(a)).to);let p=new ju(e,{simulateBreak:l,simulateDoubleBreak:!!h}),d=$x(p,l);for(d==null&&(d=Du(/^\s*/.exec(e.doc.lineAt(l).text)[0],e.tabSize));a<c.to&&/\s/.test(c.text[a-c.from]);)a++;h?{from:l,to:a}=h:l>c.from&&l<c.from+100&&!/\S/.test(c.text.slice(0,l))&&(l=c.from);let m=["",Cu(e,d)];return h&&m.push(Cu(e,p.lineIndent(c.from,-1))),{changes:{from:l,to:a,insert:Ne.of(m)},range:ne.cursor(l+1+m[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Fd(n,e){let t=-1;return n.changeByRange(r=>{let s=[];for(let a=r.from;a<=r.to;){let c=n.doc.lineAt(a);c.number>t&&(r.empty||r.to>c.from)&&(e(c,s,r),t=c.number),a=c.to+1}let l=n.changes(s);return{changes:s,range:ne.range(l.mapPos(r.anchor,1),l.mapPos(r.head,1))}})}const LM=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new ju(n,{overrideIndentation:l=>{let a=t[l];return a??-1}}),s=Fd(n,(l,a,c)=>{let h=$x(r,l.from);if(h==null)return;/\S/.test(l.text)||(h=0);let p=/^\s*/.exec(l.text)[0],d=Cu(n,h);(p!=d||c.from<l.from+p.length)&&(t[l.from]=h,a.push({from:l.from,to:l.from+p.length,insert:d}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},IM=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Fd(n,(t,r)=>{r.push({from:t.from,insert:n.facet(Id)})}),{userEvent:"input.indent"})),!0),jM=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Fd(n,(t,r)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let l=Du(s,n.tabSize),a=0,c=Cu(n,Math.max(0,l-Ou(n)));for(;a<s.length&&a<c.length&&s.charCodeAt(a)==c.charCodeAt(a);)a++;r.push({from:t.from+a,to:t.from+s.length,insert:c.slice(a)})}),{userEvent:"delete.dedent"})),!0),BM=n=>(n.setTabFocusMode(),!0),zM=[{key:"Ctrl-b",run:Gx,shift:o1,preventDefault:!0},{key:"Ctrl-f",run:Jx,shift:l1},{key:"Ctrl-p",run:t1,shift:c1},{key:"Ctrl-n",run:n1,shift:h1},{key:"Ctrl-a",run:tM,shift:dM},{key:"Ctrl-e",run:nM,shift:pM},{key:"Ctrl-d",run:g1},{key:"Ctrl-h",run:rd},{key:"Ctrl-k",run:bM},{key:"Ctrl-Alt-h",run:y1},{key:"Ctrl-o",run:CM},{key:"Ctrl-t",run:PM},{key:"Ctrl-v",run:nd}],FM=[{key:"ArrowLeft",run:Gx,shift:o1,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:UE,shift:sM,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:ZE,shift:hM,preventDefault:!0},{key:"ArrowRight",run:Jx,shift:l1,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:XE,shift:oM,preventDefault:!0},{mac:"Cmd-ArrowRight",run:eM,shift:fM,preventDefault:!0},{key:"ArrowUp",run:t1,shift:c1,preventDefault:!0},{mac:"Cmd-ArrowUp",run:yy,shift:xy},{mac:"Ctrl-ArrowUp",run:py,shift:gy},{key:"ArrowDown",run:n1,shift:h1,preventDefault:!0},{mac:"Cmd-ArrowDown",run:vy,shift:wy},{mac:"Ctrl-ArrowDown",run:nd,shift:my},{key:"PageUp",run:py,shift:gy},{key:"PageDown",run:nd,shift:my},{key:"Home",run:JE,shift:cM,preventDefault:!0},{key:"Mod-Home",run:yy,shift:xy},{key:"End",run:GE,shift:uM,preventDefault:!0},{key:"Mod-End",run:vy,shift:wy},{key:"Enter",run:ky,shift:ky},{key:"Mod-a",run:gM},{key:"Backspace",run:rd,shift:rd,preventDefault:!0},{key:"Delete",run:g1,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:y1,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:kM,preventDefault:!0},{mac:"Mod-Backspace",run:SM,preventDefault:!0},{mac:"Mod-Delete",run:OM,preventDefault:!0}].concat(zM.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),_M=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:qE,shift:lM},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:YE,shift:aM},{key:"Alt-ArrowUp",run:EM},{key:"Shift-Alt-ArrowUp",run:RM},{key:"Alt-ArrowDown",run:MM},{key:"Shift-Alt-ArrowDown",run:AM},{key:"Mod-Alt-ArrowUp",run:vM},{key:"Mod-Alt-ArrowDown",run:xM},{key:"Escape",run:wM},{key:"Mod-Enter",run:TM},{key:"Alt-l",mac:"Ctrl-l",run:mM},{key:"Mod-i",run:yM,preventDefault:!0},{key:"Mod-[",run:jM},{key:"Mod-]",run:IM},{key:"Mod-Alt-\\",run:LM},{key:"Shift-Mod-k",run:DM},{key:"Shift-Mod-\\",run:iM},{key:"Mod-/",run:FE},{key:"Alt-A",run:VE},{key:"Ctrl-m",mac:"Shift-Alt-m",run:BM}].concat(FM),VM=n=>{const{state:e}=n,t=e.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:"	"},range:ne.cursor(r.from+1)}));return n.dispatch(t),!0},HM=Md.of([{key:"Tab",run:VM}]);class WM extends sl{toDOM(){const e=document.createElement("span");return e.className="cm-space-dot",e.textContent="",e}}class QM extends sl{toDOM(){const e=document.createElement("span");return e.className="cm-tab-arrow",e.textContent="",e}}const $M=Fn.fromClass(class{constructor(n){ym(this,"decorations");this.decorations=this.buildDecorations(n)}update(n){(n.docChanged||n.viewportChanged)&&(this.decorations=this.buildDecorations(n.view))}buildDecorations(n){const e=[];for(const{from:t,to:r}of n.visibleRanges){const s=n.state.doc.sliceString(t,r);for(let l=0;l<s.length;l++){const a=s[l],c=t+l;a===" "?e.push({from:c,to:c+1,decoration:tt.replace({widget:new WM})}):a==="	"&&e.push({from:c,to:c+1,decoration:tt.replace({widget:new QM})})}}return tt.set(e.map(t=>t.decoration.range(t.from,t.to)))}},{decorations:n=>n.decorations}),UM=Ce.theme({"&":{backgroundColor:"#ffffff",color:"#000000"},".cm-content":{caretColor:"#000000"},".cm-gutters":{backgroundColor:"#f5f5f5",color:"#999999",border:"none"},".cm-activeLineGutter":{backgroundColor:"#e8e8e8"},".cm-activeLine":{backgroundColor:"#f0f0f0"},".cm-space-dot":{color:"#999999"},".cm-tab-arrow":{color:"#999999",display:"inline-block",width:"calc(4ch)",textAlign:"left"}}),XM=Ce.theme({".cm-space-dot":{color:"#666666"},".cm-tab-arrow":{color:"#666666",display:"inline-block",width:"calc(4ch)",textAlign:"left"}});function by(n){switch(n){case"light":return[UM];case"dark":default:return[zE,XM]}}const KM=O.forwardRef(function({value:e,onChange:t,colorScheme:r,onFocusChange:s},l){const a=O.useRef(null),c=O.useRef(null),h=O.useRef(new il),p=O.useRef(s);p.current=s,O.useImperativeHandle(l,()=>({focus:()=>{var m;(m=c.current)==null||m.focus()},blur:()=>{var m;(m=c.current)==null||m.contentDOM.blur()}}),[]),O.useEffect(()=>{if(!a.current||c.current)return;const m=Ie.create({doc:e,extensions:[G2(),eP(),_2(),j2(),EE(),HM,Md.of(_M),Ie.tabSize.of(4),$M,Ce.updateListener.of(v=>{var x;v.docChanged&&t(v.state.doc.toString()),v.focusChanged&&((x=p.current)==null||x.call(p,v.view.hasFocus))}),h.current.of(by(r)),Ce.lineWrapping]});return c.current=new Ce({state:m,parent:a.current}),()=>{var v;(v=c.current)==null||v.destroy(),c.current=null}},[]);const d=O.useCallback(m=>{const v=c.current;if(!v)return;const x=v.state.doc.toString();x!==m&&v.dispatch({changes:{from:0,to:x.length,insert:m}})},[]);return O.useEffect(()=>{d(e)},[e,d]),O.useEffect(()=>{const m=c.current;m&&m.dispatch({effects:h.current.reconfigure(by(r))})},[r]),b.jsx("div",{ref:a,className:"h-full w-full overflow-auto [&_.cm-editor]:h-full [&_.cm-scroller]:overflow-auto",style:{fontSize:"14px"}})});let Wa=null,ef=null;async function k1(){return Wa||(ef||(ef=(async()=>{const n=await fetch("/testsuite/tests.json");if(!n.ok)throw new Error(`Failed to load test suite: ${n.status}`);return Wa=await n.json(),Wa})()),ef)}function qM({isOpen:n,onClose:e,onSelect:t}){const[r,s]=O.useState([]),[l,a]=O.useState([]),[c,h]=O.useState(""),[p,d]=O.useState(!1),[m,v]=O.useState(null),[x,k]=O.useState(null),S=O.useRef(null);O.useEffect(()=>{n&&r.length===0&&!p&&(d(!0),k1().then(E=>{s(E.tests),a(E.tests),d(!1)}).catch(E=>{v(E.message),d(!1)}))},[n,r.length,p]),O.useEffect(()=>{n&&setTimeout(()=>{var E;return(E=S.current)==null?void 0:E.focus()},100)},[n]),O.useEffect(()=>{if(!c){a(r),k(null);return}try{const E=new RegExp(c,"i");k(null),a(r.filter(A=>E.test(A.id)||E.test(A.name)))}catch{k("Invalid regex"),a([])}},[c,r]),O.useEffect(()=>{const E=A=>{A.key==="Escape"&&n&&e()};return document.addEventListener("keydown",E),()=>document.removeEventListener("keydown",E)},[n,e]);const C=E=>{t(E.yaml),e(),h("")};return n?b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-[600px] max-h-[80vh] flex flex-col",children:[b.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[b.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Search"," ",b.jsx("a",{href:"https://github.com/yaml/yaml-test-suite/tree/data",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 underline",children:"YAML Test Suite"})]}),b.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white transition-colors",children:"X"})]}),b.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[b.jsx("input",{ref:S,type:"text",placeholder:"Search by regex (e.g., 'block.*map' or 'spec example')",value:c,onChange:E=>h(E.target.value),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white rounded border border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:outline-none"}),x&&b.jsx("div",{className:"mt-1 text-red-600 dark:text-red-400 text-sm",children:x})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto",children:[p&&b.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Loading tests..."}),m&&b.jsx("div",{className:"p-8 text-center text-red-600 dark:text-red-400",children:m}),!p&&!m&&l.map(E=>b.jsxs("button",{onClick:()=>C(E),className:"w-full px-4 py-3 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[b.jsx("span",{className:`font-mono ${E.error?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:E.id}),b.jsx("span",{className:"text-gray-500 dark:text-gray-400 mx-2",children:"-"}),b.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:E.name})]},E.id)),!p&&!m&&l.length===0&&c&&!x&&b.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No tests match your search"})]}),b.jsxs("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700 text-sm text-gray-500 flex justify-between",children:[b.jsxs("span",{children:[l.length," of ",r.length," tests"]}),b.jsx("span",{children:"(E) = expected parse error"})]})]})}):null}const YM={dark:"vs-dark",light:"light"},zo=`# Edit this YAML and see how
# different parsers handle it.

# Green = matches reference parser
# Red = differs or errored

name: YAML Parser Playground

url: https://play.yaml.com/
repo:
  https://github.com/yaml/yaml-play

current parsers: 17
actively maintained: true

features:
- Compare outputs from multiple
  YAML parsers
- Search and load tests from the
  YAML Test Suite
- Select and drag output panes
- Click Help for shortcut keys
`,Sy=200,Oy=800,Cy=O.forwardRef(function({value:e,onChange:t,width:r,onWidthChange:s,colorScheme:l,editorType:a,showBorder:c=!0,heightMode:h="full",isMobile:p=!1},d){const m=O.useRef(!1),v=O.useRef(0),x=O.useRef(0),k=O.useRef(null),S=O.useRef(null),[C,E]=O.useState(!1),[A,N]=O.useState(!1),[_,I]=O.useState(!1),F=O.useRef(null);O.useEffect(()=>{if(!A)return;const J=U=>{F.current&&!F.current.contains(U.target)&&N(!1)},se=U=>{U.key==="Escape"&&N(!1)};return document.addEventListener("mousedown",J),document.addEventListener("keydown",se),()=>{document.removeEventListener("mousedown",J),document.removeEventListener("keydown",se)}},[A]),O.useImperativeHandle(d,()=>({focus:()=>{var J,se;a==="codemirror"?(J=S.current)==null||J.focus():(se=k.current)==null||se.focus()},blur:()=>{var J,se,U;a==="codemirror"?(J=S.current)==null||J.blur():(se=k.current)!=null&&se.getDomNode()&&((U=document.activeElement)==null||U.blur())}}),[a]);const B=O.useCallback(J=>{k.current=J;const se=J.getModel();se&&se.updateOptions({tabSize:4,insertSpaces:!1}),J.onDidFocusEditorText(()=>I(!0)),J.onDidBlurEditorText(()=>I(!1))},[]),Q=O.useCallback(J=>{m.current=!0,v.current=J.clientX,x.current=r,document.body.style.cursor="col-resize",document.body.style.userSelect="none";const se=ae=>{if(!m.current)return;const ce=ae.clientX-v.current,X=Math.min(Oy,Math.max(Sy,x.current+ce));s(X)},U=()=>{m.current=!1,document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",se),document.removeEventListener("mouseup",U)};document.addEventListener("mousemove",se),document.addEventListener("mouseup",U)},[r,s]),q=h==="full"?"h-full":"h-full overflow-hidden",V=c?"border-r border-gray-300 dark:border-gray-700":"",G=_?"ring-2 ring-blue-500 ring-inset":"",H=p?{}:{width:`${r}px`,minWidth:`${Sy}px`,maxWidth:`${Oy}px`};return b.jsxs("div",{className:`flex flex-col ${q} ${p?"w-full border-b border-gray-300 dark:border-gray-700":V} ${G} relative transition-shadow`,style:H,children:[b.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 py-2 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between",children:[b.jsx("h2",{className:`font-semibold transition-colors ${_?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-500"}`,children:_?"YAML Input Editor (editing)":"YAML Input Editor"}),b.jsxs("div",{className:"flex items-center gap-1",children:[b.jsx("button",{onClick:()=>navigator.clipboard.writeText(e),className:"text-gray-400 hover:text-gray-700 dark:hover:text-white p-1",title:"Copy YAML",children:b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),b.jsxs("div",{className:"relative",ref:F,children:[b.jsx("button",{onClick:()=>N(!A),className:"text-gray-400 hover:text-gray-700 dark:hover:text-white p-1",title:"Menu",children:b.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:b.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),A&&b.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[b.jsx("button",{onClick:()=>{N(!1),E(!0)},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Search Test Suite"}),b.jsx("button",{onClick:()=>{N(!1),t("")},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Clear"}),b.jsx("button",{onClick:()=>{N(!1),t(zo)},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Default YAML"})]})]})]})]}),b.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:a==="codemirror"?b.jsx(KM,{ref:S,value:e,onChange:t,colorScheme:l,onFocusChange:I}):b.jsx(EO,{height:"100%",defaultLanguage:"yaml",defaultValue:zo,value:e,onChange:J=>t(J||""),theme:YM[l],onMount:B,options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",renderWhitespace:"all",tabSize:4,insertSpaces:!1,detectIndentation:!1,useTabStops:!1,scrollBeyondLastLine:!1,wordWrap:"on",automaticLayout:!0}})}),!p&&b.jsx("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-blue-500 transition-colors",onMouseDown:Q}),b.jsx(qM,{isOpen:C,onClose:()=>E(!1),onSelect:t})]})});function GM({parser:n,agrees:e,loading:t,onClose:r,isDraggable:s=!0,onInfoClick:l,onRunTestSuite:a,showTestSuite:c=!0,output:h,parseSuccess:p}){const[d,m]=O.useState(!1),v=O.useRef(null);O.useEffect(()=>{if(!d)return;const V=H=>{v.current&&!v.current.contains(H.target)&&m(!1)},G=H=>{H.key==="Escape"&&m(!1)};return document.addEventListener("mousedown",V),document.addEventListener("keydown",G),()=>{document.removeEventListener("mousedown",V),document.removeEventListener("keydown",G)}},[d]);const{attributes:x,listeners:k,setNodeRef:S,transform:C,transition:E,isDragging:A}=yS({id:n.id,disabled:!s}),N={transform:_o.Transform.toString(C),transition:E,opacity:A?.5:1},_=t||p===void 0?"bg-gray-300":p?"bg-green-300":"bg-red-300",B=!(n.id==="refparse")&&!t&&e===!1?"border-red-600":t||p===void 0?"border-gray-300":p?"border-green-300":"border-red-300",Q=`${n.name} v${n.version} (${n.language})`,q=V=>{V.stopPropagation(),m(!d)};return b.jsxs("div",{ref:S,style:N,className:`${_} ${B} border-4 px-3 py-2 flex items-center justify-between cursor-grab active:cursor-grabbing select-none`,...x,...k,children:[b.jsxs("div",{className:"flex items-center gap-2 cursor-pointer flex-1 relative",onClick:q,ref:v,children:[b.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:b.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),b.jsx("span",{className:"text-gray-900 font-semibold",title:Q,children:n.name}),d&&b.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[140px]",children:[c&&b.jsx("button",{onClick:V=>{V.stopPropagation(),m(!1),a==null||a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Test Suite"}),b.jsx("button",{onClick:V=>{V.stopPropagation(),m(!1),l==null||l()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Parser Info"})]})]}),b.jsxs("div",{className:"flex items-center gap-2",children:[t&&b.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-gray-700 border-t-transparent rounded-full"}),h&&b.jsx("button",{onClick:V=>{V.stopPropagation(),navigator.clipboard.writeText(h)},className:"text-gray-700 hover:text-gray-500 p-1",title:"Copy output",children:b.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),r&&b.jsx("button",{onClick:V=>{V.stopPropagation(),r()},className:"text-gray-700 hover:text-gray-500 text-lg leading-none px-1",title:"Close pane",children:""})]})]})}function JM({isOpen:n,onClose:e,parser:t}){return O.useEffect(()=>{if(!n)return;const r=s=>{s.key==="Escape"&&e()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n,e]),n?b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",onClick:r=>r.stopPropagation(),children:[b.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),b.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),b.jsx("div",{className:"p-4 space-y-3",children:b.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-sm",children:[t.repo&&b.jsxs(b.Fragment,{children:[b.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Repository"}),b.jsx("a",{href:t.repo,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline truncate",children:t.repo})]}),b.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Language"}),b.jsx("span",{className:"text-gray-900 dark:text-white",children:t.language}),b.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Version"}),b.jsx("span",{className:"text-gray-900 dark:text-white",children:t.version})]})})]})}):null}const b1="https://localhost:7481",ru="0.1.34";function ZM(){return ru}async function eR(){try{return(await fetch(`${b1}/`,{method:"HEAD"})).ok}catch{return!1}}async function S1(n,e,t){const r=`${b1}/?version=${encodeURIComponent(ru)}&parser=yaml-test-parse-${n}`;try{const s=new URLSearchParams;s.append("text",e);const l=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!l.ok){const h=(await l.text()).match(/Requires sandbox version (\S+)/);if(h)return{status:-1,output:`Version mismatch: sandbox is ${h[1]}, but frontend requires ${ru}`,versionMismatch:{required:ru,found:h[1]}};throw new Error(`HTTP ${l.status}: ${l.statusText}`)}const a=await l.json();return{status:a.status,output:a.output}}catch(s){return s&&typeof s=="object"&&"versionMismatch"in s?s:{status:-1,output:s instanceof Error?s.message:"Unknown error"}}}let id=null,sd=null,Py=!1;async function tR(){if(Py)return;const[n,e,t,r,s]=await Promise.all([fetch("/refparse/prelude.js").then(a=>a.text()),fetch("/refparse/grammar.js").then(a=>a.text()),fetch("/refparse/parser.js").then(a=>a.text()),fetch("/refparse/receiver.js").then(a=>a.text()),fetch("/refparse/test-receiver.js").then(a=>a.text())]),l=eval;window.global=window,l(n),l(e),l(t),l(r),l(s),id=window.Parser,sd=window.TestReceiver,Py=!0}async function O1(n){try{if(await tR(),!sd)return{status:1,output:"TestReceiverClass not loaded"};if(!id)return{status:1,output:"Parser not loaded"};const e=new sd,t=new id(e);return t.parse(n),{status:0,output:t.receiver.output().replace(/\n$/,"")||"(empty output)"}}catch(e){return{status:1,output:e instanceof Error?e.message:String(e)}}}function Ey(n){return n.replace(/\s+(\{\}|\[\])$/mg,"").replace(/^=COMMENT .*\n?/mg,"").replace(/^[^+\-=].*\n?/gm,"").trim()}function C1(n,e,t){let r=Ey(n),s=Ey(e);if(t==="rustyaml"&&(s=s.replace(/<Tag\("!!", "(.*?)"\)>/g,"<tag:yaml.org,2002:$1>").replace(/<Tag\("!", "(.*?)"\)>/g,"<!$1>").replace(/<Tag\("", "!"\)>/g,"<!>").replace(/<Tag\("", "(tag:.*?)"\)>/g,"<$1>").replace(/<Tag\("", "(!.*?)"\)>/g,"<$1>"),r=r.replace(/^\+DOC ---/gm,"+DOC").replace(/^-DOC \.\.\./gm,"-DOC").replace(/^=VAL :$/gm,"=VAL :~").replace(/^\+MAP \{\}( ?)/gm,"+MAP$1").replace(/^\+SEQ \[\]( ?)/gm,"+SEQ$1"),s.match(/&1/))){let l=1,a;for(;a=r.match(/&([a-zA-Z]\S*)/);){const c=a[1];r=r.replace(new RegExp(`([&*])${c}`,"g"),`$1${l}`),l++}}if(t==="goyaml"){const l=r.split(`
`),a=s.split(`
`);l.length===a.length&&(s=a.map((h,p)=>l[p]==="+DOC"&&h==="+DOC ---"?"+DOC":h).join(`
`))}return r===s}const Cs="yaml-play-test-results-";function nR(n){try{const e=Cs+n,t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}}function rR(n,e){try{const t=Cs+n;localStorage.setItem(t,JSON.stringify(e))}catch{}}function Eo(n){try{const e=Cs+n;localStorage.removeItem(e)}catch{}}function iR(n,e,t){return n?n.parserVersion===e&&n.testSuiteVersion===t:!1}function sR(){try{const n=[];for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&t.startsWith(Cs)&&n.push(t)}n.forEach(e=>localStorage.removeItem(e))}catch{}}function oR(){const n=[];try{for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);if(t&&t.startsWith(Cs)){const r=t.substring(Cs.length),s=localStorage.getItem(t);if(s){const l=JSON.parse(s);n.push({parserId:r,cache:l})}}}}catch{}return n}const P1="yaml-play-test-sort";function My(){try{const n=localStorage.getItem(P1);if(n)return JSON.parse(n)}catch{}return{column:"id",direction:"asc"}}function lR(n){try{localStorage.setItem(P1,JSON.stringify(n))}catch{}}function od({isOpen:n,onClose:e,parser:t,onSelectTest:r,forceRerun:s=!1,onCompare:l,onRunAgain:a,onClearCache:c}){const[h,p]=O.useState([]),[d,m]=O.useState([]),[v,x]=O.useState(!1),[k,S]=O.useState(null),[C,E]=O.useState(0),[A,N]=O.useState(My),[_,I]=O.useState(!1),[F,B]=O.useState(!1),Q=O.useRef(!1),q=O.useRef(!1),V=O.useRef(0),G=O.useRef(null),H=O.useRef(null),J=O.useRef(null);O.useEffect(()=>{n&&(N(My()),I(!1))},[n]),O.useEffect(()=>{if(!_)return;const re=he=>{J.current&&!J.current.contains(he.target)&&I(!1)};return document.addEventListener("mousedown",re),()=>document.removeEventListener("mousedown",re)},[_]);const se=O.useCallback((re,he)=>{const Se=[...re];return Se.sort((Pe,ve)=>{let Ae=0;switch(he.column){case"ok":Ae=(Pe.passed?1:0)-(ve.passed?1:0);break;case"id":Ae=Pe.testId.localeCompare(ve.testId);break;case"description":Ae=Pe.testName.localeCompare(ve.testName);break}return he.direction==="asc"?Ae:-Ae}),Se},[]),U=re=>{const he={column:re,direction:A.column===re&&A.direction==="asc"?"desc":"asc"};N(he),lR(he)},ae=re=>A.column!==re?null:A.direction==="asc"?" ":" ",ce=v?d:se(d,A);O.useEffect(()=>{if(!n){q.current=!1,B(!1),H.current&&(clearInterval(H.current),H.current=null);return}if(Q.current=!1,S(null),m([]),E(0),p([]),!q.current)return q.current=!0,x(!0),B(!0),V.current=Date.now(),H.current=window.setInterval(()=>{E(Date.now()-V.current)},10),()=>{Q.current=!0,H.current&&(clearInterval(H.current),H.current=null)}},[n,t.id,t.version,s]),O.useEffect(()=>{if(!F||!n)return;B(!1),(async()=>{try{const he=await k1();if(Q.current){x(!1),q.current=!1,H.current&&(clearInterval(H.current),H.current=null);return}p(he.tests);const Se=nR(t.id);if(!s&&iR(Se,t.version,he.version)){const ve=Se.results.map(Ae=>{const We=he.tests.find(ot=>ot.id===Ae.testId);return{testId:Ae.testId,testName:(We==null?void 0:We.name)||Ae.testId,passed:Ae.passed}});m(ve),x(!1),q.current=!1,H.current&&(clearInterval(H.current),H.current=null);return}s&&Eo(t.id);const Pe=[];for(let ve=0;ve<he.tests.length&&!Q.current;ve++){const Ae=he.tests[ve];m(Je=>[...Je,{testId:Ae.id,testName:Ae.name,passed:!1,running:!0}]);let We;if(t.id==="refparse"){const Je=await O1(Ae.yaml);We={status:Je.status,output:Je.output}}else We=await S1(t.id,Ae.yaml,t.version);if(Q.current)break;let ot;Ae.error?ot=We.status!==0:ot=We.status===0&&C1(Ae.expected,We.output,t.id),m(Je=>{const ct=[...Je];return ct.length>0&&(ct[ct.length-1]={testId:Ae.id,testName:Ae.name,passed:ot,running:!1}),ct}),Pe.push({testId:Ae.id,passed:ot}),setTimeout(()=>{G.current&&(G.current.scrollTop=G.current.scrollHeight)},0)}if(!Q.current&&Pe.length===he.tests.length){const ve=Date.now()-V.current,Ae={parserVersion:t.version,testSuiteVersion:he.version,results:Pe,elapsedTime:ve};rR(t.id,Ae)}}catch(he){S(he instanceof Error?he.message:"Unknown error")}finally{H.current&&(clearInterval(H.current),H.current=null),x(!1),q.current=!1,setTimeout(()=>{G.current&&(G.current.scrollTop=0)},0)}})()},[F,n,t.id,t.version,s]),O.useEffect(()=>{if(!n)return;const re=he=>{he.key==="Escape"&&(_?I(!1):(Q.current=!0,e())),he.key.toUpperCase()==="C"&&!he.ctrlKey&&!he.metaKey&&!he.altKey&&!v&&l&&(e(),l())};return document.addEventListener("keydown",re),()=>document.removeEventListener("keydown",re)},[n,e,v,l,_]);const X=re=>{Q.current=!0,r(re.yaml),e()},ee=()=>{Q.current=!0,e()};if(!n)return null;const Z=d.filter(re=>re.passed&&!re.running).length,M=d.filter(re=>!re.passed&&!re.running).length,L=h.length,ie=L>0?Math.round(d.length/L*100):0,pe=L>0?(Z/L*100).toFixed(1):"0.0",ye=re=>{const he=Math.floor(re/1e3),Se=Math.floor(re%1e3/10);return`${he}.${Se.toString().padStart(2,"0")}s`};return b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:ee,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] flex flex-col",onClick:re=>re.stopPropagation(),children:[b.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[b.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.name," - Test Suite"]}),b.jsx("button",{onClick:ee,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),b.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center gap-4",children:[b.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["Pass: ",Z]}),b.jsxs("span",{className:"text-red-600 dark:text-red-400",children:["Fail: ",M]}),b.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Total: ",L]}),v?b.jsxs("span",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-2",children:[b.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 dark:border-blue-400 border-t-transparent rounded-full"}),ye(C)," (",ie,"%)"]}):C>0?b.jsxs("span",{className:"text-gray-500",children:[pe,"% passing (",ye(C),")"]}):b.jsxs("span",{className:"text-gray-500",children:[pe,"% passing (cached)"]}),!v&&(a||c||l)&&b.jsxs("div",{className:"ml-auto relative",ref:J,children:[b.jsx("button",{onClick:()=>I(!_),className:"text-gray-700 dark:text-white hover:text-gray-900 dark:hover:text-gray-300 p-1",title:"Menu",children:b.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:b.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),_&&b.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[l&&b.jsxs("button",{onClick:()=>{I(!1),e(),l()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[b.jsx("span",{className:"underline",children:"C"}),"ompare Test Runs"]}),a&&b.jsx("button",{onClick:()=>{I(!1),a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Run Again"}),c&&b.jsx("button",{onClick:()=>{I(!1),c()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Clear Cache"})]})]})]}),k&&b.jsxs("div",{className:"px-4 py-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 text-sm",children:["Error: ",k]}),d.length>0&&b.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[b.jsxs("span",{className:"w-10 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>U("ok"),children:["OK",ae("ok")]}),b.jsxs("span",{className:"w-20 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none font-mono",onClick:()=>U("id"),children:["ID",ae("id")]}),b.jsxs("span",{className:"flex-1 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>U("description"),children:["Description",ae("description")]})]}),b.jsxs("div",{ref:G,className:"flex-1 overflow-y-auto p-2 space-y-1",children:[ce.map(re=>{const he=h.find(Se=>Se.id===re.testId);return b.jsxs("button",{onClick:()=>he&&X(he),className:`w-full text-left px-3 py-2 rounded text-sm flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${re.running?"bg-gray-100 dark:bg-gray-700":""}`,children:[b.jsx("span",{className:"w-10 flex-shrink-0 text-center",children:re.running?b.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 dark:border-blue-400 border-t-transparent rounded-full"}):re.passed?b.jsx("span",{className:"text-green-600 dark:text-green-400",children:""}):b.jsx("span",{className:"text-red-600 dark:text-red-400",children:""})}),b.jsx("span",{className:"w-20 text-gray-500 dark:text-gray-400 font-mono flex-shrink-0",children:re.testId}),b.jsx("span",{className:"flex-1 text-gray-700 dark:text-gray-300 truncate",children:re.testName})]},re.testId)}),d.length===0&&!v&&!k&&b.jsx("div",{className:"text-gray-500 text-center py-4",children:"No test results available"}),d.length===0&&v&&b.jsx("div",{className:"text-gray-500 text-center py-4",children:"Loading test suite..."})]})]})})}const Li=[{id:"refparse",name:"Reference Parser",version:"f003194",repo:"https://github.com/yaml/yaml-reference-parser",language:"JavaScript",isJavaScript:!0},{id:"npmyaml",name:"eemeli/yaml",version:"2.8.1",repo:"https://github.com/eemeli/yaml",language:"JavaScript",isJavaScript:!0},{id:"libyaml",name:"libyaml",version:"0.2.5",repo:"https://github.com/yaml/libyaml",language:"C"},{id:"pyyaml",name:"PyYAML",version:"6.0.3",language:"Python"},{id:"ruamel",name:"ruamel.yaml",version:"0.18.16",language:"Python"},{id:"goyaml",name:"go-yaml",version:"94c6e9d",repo:"https://github.com/pantoniou/yaml",language:"Go"},{id:"libfyaml",name:"libfyaml",version:"0.9",repo:"https://github.com/pantoniou/libfyaml",language:"C"},{id:"rapid",name:"rapidyaml",version:"0.10.0",repo:"https://github.com/biojppm/rapidyaml",language:"C++"},{id:"rustyaml",name:"serde-yaml",version:"0.9.34",repo:"https://github.com/dtolnay/serde-yaml",language:"Rust"},{id:"snake",name:"SnakeYAML",version:"2.5",repo:"https://bitbucket.org/snakeyaml/snakeyaml",language:"Java"},{id:"snakeeng",name:"SnakeYAML Engine",version:"3.0.1",repo:"https://bitbucket.org/snakeyaml/snakeyaml-engine",language:"Java"},{id:"dotnet",name:"YamlDotNet",version:"11.2.1",repo:"https://github.com/aaubry/YamlDotNet",language:"C#"},{id:"luayaml",name:"lyaml",version:"6.2.8",repo:"https://github.com/gvvaughan/lyaml",language:"Lua"},{id:"nimyaml",name:"NimYAML",version:"1.0.0",repo:"https://github.com/flyx/NimYAML",language:"Nim"},{id:"ppyaml",name:"YAML::PP",version:"0.039",language:"Perl"},{id:"hsyaml",name:"HsYAML",version:"0.2.1.1",repo:"https://github.com/haskell-hvr/HsYAML",language:"Haskell"},{id:"refhs",name:"yamlreference",version:"bf471f8",repo:"https://github.com/orenbenkiki/yamlreference",language:"Haskell"}],ti=n=>Li.find(e=>e.id===n),aR=()=>["refparse","pyyaml","libyaml","goyaml"],E1="yaml-play-compare-sort";function uR(n){const e=Math.floor(n/1e3),t=Math.floor(n%1e3/10);return`${e}.${t.toString().padStart(2,"0")}s`}function Ry(){try{const n=localStorage.getItem(E1);if(n)return JSON.parse(n)}catch{}return{column:"percent",direction:"desc"}}function cR(n){try{localStorage.setItem(E1,JSON.stringify(n))}catch{}}function M1({isOpen:n,onClose:e,onSelectParser:t}){const[r,s]=O.useState([]),[l,a]=O.useState(Ry);O.useEffect(()=>{n&&a(Ry())},[n]);const c=O.useCallback((d,m)=>{const v=[...d];return v.sort((x,k)=>{let S=0;switch(m.column){case"parserName":S=x.parserName.localeCompare(k.parserName);break;case"version":S=x.version.localeCompare(k.version);break;case"passed":S=x.passed-k.passed;break;case"failed":S=x.failed-k.failed;break;case"total":S=x.total-k.total;break;case"percent":S=x.percentNum-k.percentNum;break;case"time":S=(x.elapsedTime??0)-(k.elapsedTime??0);break}return m.direction==="asc"?S:-S}),v},[]);O.useEffect(()=>{if(!n)return;const m=oR().map(v=>{const x=ti(v.parserId),k=v.cache.results.filter(N=>N.passed).length,S=v.cache.results.length,C=S-k,E=S>0?k/S*100:0,A=E.toFixed(1);return{parserId:v.parserId,parserName:(x==null?void 0:x.name)||v.parserId,passed:k,failed:C,total:S,percent:A,percentNum:E,version:v.cache.parserVersion,elapsedTime:v.cache.elapsedTime}});s(c(m,l))},[n,l,c]);const h=d=>{const m={column:d,direction:l.column===d&&l.direction==="asc"?"desc":"asc"};a(m),cR(m)},p=d=>l.column!==d?null:l.direction==="asc"?" ":" ";return O.useEffect(()=>{if(!n)return;const d=m=>{m.key==="Escape"&&e()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[n,e]),n?b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] flex flex-col",onClick:d=>d.stopPropagation(),children:[b.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Compare Test Runs"}),b.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),b.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[b.jsxs("table",{className:"w-full text-sm",children:[b.jsx("thead",{children:b.jsxs("tr",{className:"text-left text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:[b.jsxs("th",{className:"pb-2 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("parserName"),children:["Parser",p("parserName")]}),b.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("version"),children:["Version",p("version")]}),b.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("passed"),children:["Pass",p("passed")]}),b.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("failed"),children:["Fail",p("failed")]}),b.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("total"),children:["Total",p("total")]}),b.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("percent"),children:["%",p("percent")]}),b.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("time"),children:["Time",p("time")]})]})}),b.jsx("tbody",{children:r.map(d=>b.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>{t(d.parserId),e()},children:[b.jsx("td",{className:"py-2 text-gray-900 dark:text-white",children:d.parserName}),b.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400 font-mono text-xs",children:d.version}),b.jsx("td",{className:"py-2 text-right text-green-600 dark:text-green-400",children:d.passed}),b.jsx("td",{className:"py-2 text-right text-red-600 dark:text-red-400",children:d.failed}),b.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400",children:d.total}),b.jsxs("td",{className:"py-2 text-right text-gray-900 dark:text-white font-semibold",children:[d.percent,"%"]}),b.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400 font-mono text-xs",children:d.elapsedTime!=null?uR(d.elapsedTime):"-"})]},d.parserId))})]}),r.length===0&&b.jsx("div",{className:"text-gray-500 text-center py-8",children:"No cached test results available"})]})]})}):null}function hR(n){return["Failed to fetch","NetworkError","network error","ERR_CONNECTION_REFUSED","ECONNREFUSED","fetch failed","Load failed","HTTP 500","HTTP 502","HTTP 503","HTTP 504","Internal Server Error"].some(t=>n.toLowerCase().includes(t.toLowerCase()))}function tf({parser:n,result:e,onClose:t,isDraggable:r=!0,onSetYamlInput:s,showTestSuite:l=!0}){const[a,c]=O.useState(!1),[h,p]=O.useState(!1),[d,m]=O.useState(!1),[v,x]=O.useState(0),[k,S]=O.useState(!1),[C,E]=O.useState(null),[A,N]=O.useState(!1),[_,I]=O.useState(0),F=O.useCallback(()=>{Eo(n.id),m(!0),x(J=>J+1)},[n.id]),B=O.useCallback(()=>{Eo(n.id),p(!1)},[n.id]),Q=O.useCallback(()=>{C&&(Eo(C),N(!0),I(J=>J+1))},[C]),q=O.useCallback(()=>{C&&(Eo(C),E(null))},[C]),V=n.id!=="refparse",G=V&&(e==null?void 0:e.versionMismatch),H=V&&!G&&(e==null?void 0:e.status)===-1&&(e==null?void 0:e.output)&&hR(e.output);return b.jsxs("div",{className:"flex flex-col h-full min-h-[200px] bg-gray-100 dark:bg-gray-900",children:[b.jsx(GM,{parser:n,agrees:e==null?void 0:e.agrees,loading:e==null?void 0:e.loading,onClose:t,isDraggable:r,onInfoClick:()=>c(!0),onRunTestSuite:()=>{m(!1),p(!0)},showTestSuite:l,output:e==null?void 0:e.output,parseSuccess:e?e.status===0:void 0}),b.jsx(JM,{isOpen:a,onClose:()=>c(!1),parser:n}),b.jsx(od,{isOpen:h,onClose:()=>p(!1),parser:n,onSelectTest:J=>s==null?void 0:s(J),forceRerun:d,onCompare:()=>S(!0),onRunAgain:F,onClearCache:B},v),b.jsx(M1,{isOpen:k,onClose:()=>S(!1),onSelectParser:J=>E(J)}),C&&ti(C)&&b.jsx(od,{isOpen:!0,onClose:()=>{E(null),N(!1)},parser:ti(C),onSelectTest:J=>s==null?void 0:s(J),forceRerun:A,onCompare:()=>{E(null),S(!0)},onRunAgain:Q,onClearCache:q},`view-${C}-${_}`),b.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-900 overflow-auto",children:e!=null&&e.error?b.jsxs("pre",{className:"p-3 text-red-600 dark:text-red-400 text-sm font-mono whitespace-pre-wrap",children:["Error: ",e.error]}):G?b.jsxs("div",{className:"p-3 text-sm",children:[b.jsxs("p",{className:"text-yellow-600 dark:text-yellow-400 mb-2",children:["Wrong sandbox version (",e.versionMismatch.found,") found. Requires ",e.versionMismatch.required,"."]}),b.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Click the "',b.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Setup"}),'" button for instructions.']})]}):H?b.jsxs("div",{className:"p-3 text-sm",children:[b.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:"Can't connect to a local YAML parser sandbox server."}),b.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Click the "',b.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Setup"}),'" button for instructions.']})]}):e!=null&&e.loading?b.jsx("div",{className:"p-3 text-gray-500 text-sm",children:"Running parser..."}):b.jsx("pre",{className:"p-3 text-gray-800 dark:text-gray-200 text-sm font-mono whitespace-pre-wrap",children:(e==null?void 0:e.output)||"No output yet"})})]})}function fR({total:n,disagreeing:e,disagreeingNames:t,loading:r,sandboxAvailable:s=!0}){if(!s)return null;if(r)return b.jsx("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2",children:b.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-semibold",children:"Running parsers..."})});const l=e===0;return b.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2 flex items-center justify-between",children:[l?b.jsxs("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:["All ",n," parsers agree with the Reference Parser"]}):b.jsxs("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:[e,"/",n," parsers disagree with the Reference Parser: ",t.join(", ")]}),b.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",title:"View on GitHub",children:b.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.115 2.504.337 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})})})]})}const dR=[{id:"light",label:"Light"},{id:"dark",label:"Dark"}],pR=[{id:"monaco",label:"Monaco"},{id:"codemirror",label:"CodeMirror"}];function gR({isOpen:n,onClose:e,paneStates:t,onToggleVisibility:r,colorScheme:s,onColorSchemeChange:l,editorType:a,onEditorTypeChange:c}){if(O.useEffect(()=>{if(!n)return;const d=m=>{m.key==="Escape"&&e()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[n,e]),!n)return null;const h=new Map(t.map(d=>[d.id,d])),p=[...Li].filter(d=>d.id!=="refparse").sort((d,m)=>d.id.localeCompare(m.id));return b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full mx-4 max-h-[80vh] overflow-hidden",onClick:d=>d.stopPropagation(),children:[b.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Preferences"}),b.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),b.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:[b.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Editor"}),b.jsx("div",{className:"flex gap-2 mb-4",children:pR.map(d=>b.jsx("button",{onClick:()=>c(d.id),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${a===d.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:d.label},d.id))}),b.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Mode"}),b.jsx("div",{className:"flex gap-2 mb-4",children:dR.map(d=>b.jsx("button",{onClick:()=>l(d.id),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${s===d.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:d.label},d.id))}),b.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Parser Panes"}),p.map(d=>{const m=h.get(d.id),v=(m==null?void 0:m.visible)??!1,x=/^\d+(\.\d+)+$/.test(d.version);return b.jsxs("label",{className:"flex items-center gap-3 py-2 px-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[b.jsx("input",{type:"checkbox",checked:v,onChange:k=>r(d.id,k.target.checked),className:"w-4 h-4 rounded border-gray-400 dark:border-gray-600 bg-white dark:bg-gray-700 text-blue-600 focus:ring-blue-500"}),b.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:d.name}),b.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:d.language}),x&&b.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:d.version})]},d.id)})]})]})})}const R1=ZM(),nf=`docker run --rm -d -p 7481:7481 yamlio/yaml-play-sandbox:${R1} 7481`;function mR({isOpen:n,onClose:e}){const[t,r]=O.useState(!1),s=async()=>{try{await navigator.clipboard.writeText(nf),r(!0),setTimeout(()=>r(!1),2e3)}catch{const l=document.createElement("textarea");l.value=nf,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l),r(!0),setTimeout(()=>r(!1),2e3)}};return O.useEffect(()=>{if(!n)return;const l=a=>{a.key==="Escape"&&e()};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[n,e]),n?b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-hidden",onClick:l=>l.stopPropagation(),children:[b.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Sandbox Setup"}),b.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),b.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh] space-y-6",children:[b.jsxs("section",{children:[b.jsxs("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:["Start the Sandbox Server (version ",R1,")"]}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"Most of these parsers run in a Docker container that you need to start on your machine. If you see connection errors, start the sandbox by running this command in a terminal:"}),b.jsxs("div",{className:"relative",children:[b.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 p-3 pr-16 rounded text-sm text-green-700 dark:text-green-400 font-mono overflow-x-auto",children:nf}),b.jsx("button",{onClick:s,className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors",children:t?"Copied!":"Copy"})]}),b.jsx("br",{}),b.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-2",children:"Note: If a different version of the sandbox server Docker container is already running, you'll need to kill that first."})]}),b.jsxs("section",{children:[b.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"HTTPS Certificate (if needed)"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"If you are still getting connection errors, you may need to accept the unsigned HTTPS certificate:"}),b.jsxs("ol",{className:"text-gray-600 dark:text-gray-300 text-sm list-decimal list-inside space-y-1",children:[b.jsxs("li",{children:["Click here:"," ",b.jsx("a",{href:"https://localhost:7481",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 underline",children:"https://localhost:7481"})," ","(opens in a new tab)"]}),b.jsx("li",{children:"Accept the security warning / proceed anyway"}),b.jsx("li",{children:"Return to this page and refresh"})]})]})]})]})}):null}function yR({onHelp:n,onPreferences:e,onKeyboardShortcuts:t,onFactoryReset:r}){const[s,l]=O.useState(!1),a=O.useRef(null);return O.useEffect(()=>{if(!s)return;const c=p=>{a.current&&!a.current.contains(p.target)&&l(!1)},h=p=>{p.key==="Escape"&&l(!1)};return document.addEventListener("mousedown",c),document.addEventListener("keydown",h),()=>{document.removeEventListener("mousedown",c),document.removeEventListener("keydown",h)}},[s]),b.jsxs("div",{className:"relative",ref:a,children:[b.jsx("button",{onClick:()=>l(!s),className:"text-gray-700 dark:text-white hover:text-gray-900 dark:hover:text-gray-300 p-2",title:"Menu",children:b.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:b.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),s&&b.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[b.jsxs("button",{onClick:()=>{l(!1),n()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[b.jsx("span",{className:"underline",children:"H"}),"elp"]}),b.jsxs("button",{onClick:()=>{l(!1),e()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[b.jsx("span",{className:"underline",children:"P"}),"references"]}),b.jsxs("button",{onClick:()=>{l(!1),t()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[b.jsx("span",{className:"underline",children:"K"}),"eyboard Shortcuts"]}),b.jsx("button",{onClick:()=>{l(!1),r()},className:"w-full text-left px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Factory Reset"})]})]})}function vR({isOpen:n,onClose:e}){return O.useEffect(()=>{if(!n)return;const t=r=>{r.key==="Escape"&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[n,e]),n?b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[85vh] overflow-hidden flex flex-col",onClick:t=>t.stopPropagation(),children:[b.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Help"}),b.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),b.jsxs("div",{className:"p-4 space-y-5 overflow-y-auto",children:[b.jsxs("section",{children:[b.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Overview"}),b.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["The ",b.jsx("strong",{className:"text-gray-900 dark:text-white",children:"YAML Parser Playground"})," lets you compare how 17+ different YAML parser implementations handle the same input. Enter YAML in the input editor on the left, and see the parsed output from each parser in the panes on the right."]})]}),b.jsxs("section",{children:[b.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Understanding the Colors"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"Each output pane has a colored header showing the parse status:"}),b.jsxs("div",{className:"space-y-2 text-sm",children:[b.jsxs("div",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"inline-block w-4 h-4 bg-green-300 border-4 border-green-300 rounded flex-shrink-0 mt-0.5"}),b.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[b.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Green:"})," The YAML parsed successfully (no errors)"]})]}),b.jsxs("div",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"inline-block w-4 h-4 bg-red-300 border-4 border-red-300 rounded flex-shrink-0 mt-0.5"}),b.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[b.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Red:"})," The parser returned an error"]})]}),b.jsxs("div",{className:"flex items-start gap-2",children:[b.jsx("span",{className:"inline-block w-4 h-4 bg-green-300 border-4 border-red-600 rounded flex-shrink-0 mt-0.5"}),b.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[b.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Red border:"})," Output differs from the Reference Parser"]})]})]}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mt-2",children:"A red border indicates disagreement  either the output differs from RefParse, or one parser succeeded while the other failed."})]}),b.jsxs("section",{children:[b.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"The Reference Parser"}),b.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["The ",b.jsx("strong",{className:"text-gray-900 dark:text-white",children:"RefParse"})," pane shows output from the official YAML Reference Parser, which aims to implement the YAML 1.2 specification exactly. All other parsers are compared against it. RefParse runs directly in your browser and doesn't require the sandbox."]})]}),b.jsxs("section",{children:[b.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Output Format"}),b.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:['The output is a DSL (domain-specific language) representing YAML parser "events"  the internal data structures parsers create when processing YAML. This is the same format used by the'," ",b.jsx("a",{href:"https://github.com/yaml/yaml-test-suite",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"YAML Test Suite"}),'. A "parser" is just one stage in a YAML "loader"  it converts text to events, while later stages convert events to native data structures.']})]}),b.jsxs("section",{children:[b.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Running Other Parsers"}),b.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Most parsers (Python, Go, Ruby, Java, etc.) require a local Docker sandbox to run. Click the ",b.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Setup"})," button in the header for instructions on starting the sandbox container. Without it, only the JavaScript-based Reference Parser will work."]})]}),b.jsxs("section",{children:[b.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"YAML Test Suite"}),b.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Use the ",b.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Search Test Suite"})," feature (in the input pane menu) to load test cases from the official YAML Test Suite. You can also run the entire test suite against any parser by clicking its hamburger menu and selecting ",b.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Test Suite"}),"."]})]}),b.jsxs("section",{children:[b.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Sharing URLs"}),b.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Your YAML input is automatically encoded in the URL. Copy and share the URL to let others see exactly what you're working on  great for bug reports and discussions about YAML edge cases."})]}),b.jsxs("section",{children:[b.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Keyboard Shortcuts"}),b.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Press ",b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"K"})," to see all keyboard shortcuts. Highlights include:"]}),b.jsxs("ul",{className:"text-gray-600 dark:text-gray-300 text-sm mt-2 space-y-1 list-disc list-inside",children:[b.jsxs("li",{children:[b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"I"}),"  Focus the input editor"]}),b.jsxs("li",{children:[b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"A"})," / ",b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"N"}),"  Show all / no panes"]}),b.jsxs("li",{children:[b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"D"}),"  Show only differing panes"]}),b.jsxs("li",{children:[b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"P"}),"  Open Preferences"]})]})]}),b.jsxs("section",{children:[b.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Organizing Panes"}),b.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Drag parser panes by their headers to reorder them. Use"," ",b.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Preferences"})," (press P) to show/hide specific parsers and change the color scheme."]})]})]})]})}):null}function xR({isOpen:n,onClose:e}){return O.useEffect(()=>{if(!n)return;const t=r=>{r.key==="Escape"&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[n,e]),n?b.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:b.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4",onClick:t=>t.stopPropagation(),children:[b.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[b.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Keyboard Shortcuts"}),b.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),b.jsx("div",{className:"p-4",children:b.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-sm",children:[b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"Esc"}),b.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Unfocus input pane / Close modal"}),b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"I"}),b.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Focus input pane"}),b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"A"}),b.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show all panes"}),b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"N"}),b.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Hide all panes"}),b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"D"}),b.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show differing panes"}),b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"S"}),b.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show your selected panes"}),b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"C"}),b.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Compare Test Runs"}),b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"P"}),b.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Open Preferences"}),b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"H"}),b.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show help"}),b.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"K"}),b.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show keyboard shortcuts"})]})})]})}):null}const rf="yaml-play-layout";function Ay(){const n=aR();return{panes:Li.map(t=>{const r=n.indexOf(t.id);return{id:t.id,visible:r>=0,order:r>=0?r:1e3+Li.findIndex(s=>s.id===t.id)}}),selectedPaneIds:n}}function wR(){const[n,e]=O.useState(()=>{try{const x=localStorage.getItem(rf);if(x){const k=JSON.parse(x),S=new Set(k.panes.map(E=>E.id)),C=Li.filter(E=>!S.has(E.id)).map((E,A)=>({id:E.id,visible:!1,order:k.panes.length+A}));return{...k,panes:[...k.panes,...C]}}}catch{}return Ay()});O.useEffect(()=>{localStorage.setItem(rf,JSON.stringify(n))},[n]);const t=O.useCallback((x,k)=>{e(S=>{let C;if(k){const A=Math.max(...S.panes.map(N=>N.order));C=S.panes.map(N=>N.id===x?{...N,visible:k,order:A+1}:N)}else C=S.panes.map(A=>A.id===x?{...A,visible:k}:A);const E=C.filter(A=>A.visible).map(A=>A.id);return{...S,panes:C,selectedPaneIds:E}})},[]),r=O.useCallback((x,k)=>{e(S=>{const C=[...S.panes],E=C.findIndex(_=>_.id===x),A=C.findIndex(_=>_.id===k);if(E===-1||A===-1)return S;const[N]=C.splice(E,1);return C.splice(A,0,N),{panes:C.map((_,I)=>({..._,order:I}))}})},[]),s=O.useCallback(()=>{localStorage.removeItem(rf),sR(),e(Ay())},[]),l=O.useCallback(()=>{e(x=>{const k=x.panes.filter(A=>A.visible),S=k.length>0?Math.max(...k.map(A=>A.order)):-1,C=x.panes.filter(A=>!A.visible&&A.id!=="refparse").sort((A,N)=>A.id.localeCompare(N.id)),E=new Map;return C.forEach((A,N)=>{E.set(A.id,S+1+N)}),{...x,panes:x.panes.map(A=>({...A,visible:!0,order:E.has(A.id)?E.get(A.id):A.order}))}})},[]),a=O.useCallback(()=>{e(x=>({...x,panes:x.panes.map(k=>k.id==="refparse"?k:{...k,visible:!1})}))},[]),c=O.useCallback(()=>{e(x=>{const k=new Set(x.selectedPaneIds??[]);return k.size===0?x:{...x,panes:x.panes.map(S=>({...S,visible:k.has(S.id)}))}})},[]),h=O.useCallback(x=>{e(k=>{const S=new Set(x);if(k.panes.filter(N=>!N.visible&&S.has(N.id)).length===0)return k;let A=Math.max(...k.panes.filter(N=>N.visible).map(N=>N.order),-1)+1;return{...k,panes:k.panes.map(N=>!N.visible&&S.has(N.id)?{...N,visible:!0,order:A++}:N)}})},[]),p=O.useCallback(x=>{e(k=>({...k,inputPaneWidth:x}))},[]),d=O.useCallback(x=>{e(k=>({...k,colorScheme:x}))},[]),m=O.useCallback(x=>{e(k=>({...k,editorType:x}))},[]),v=O.useCallback(()=>n.panes.filter(x=>x.visible).sort((x,k)=>x.order-k.order),[n.panes]);return{layout:n,updatePaneVisibility:t,reorderPanes:r,resetLayout:s,showAllPanes:l,hideAllPanes:a,showSelectedPanes:c,showErrorPanes:h,getVisiblePanes:v,inputPaneWidth:n.inputPaneWidth??400,setInputPaneWidth:p,colorScheme:n.colorScheme==="dark"?"dark":"light",setColorScheme:d,editorType:n.editorType??"monaco",setEditorType:m}}const Qa=Li.filter(n=>n.id!=="refparse").map(n=>n.id);function kR(){const[n,e]=O.useState(new Map),[t,r]=O.useState(""),s=O.useRef(null),l=O.useCallback(async(h,p)=>{s.current&&s.current.abort(),s.current=new AbortController,e(x=>{const k=new Map(x);return k.set("refparse",{parserId:"refparse",output:"",status:0,loading:!0}),Qa.forEach(S=>{k.set(S,{parserId:S,output:"",status:0,loading:!0})}),k});const d=await O1(h),m=d.output,v=d.status;r(m),e(x=>{const k=new Map(x);return k.set("refparse",{parserId:"refparse",output:d.output,status:d.status,loading:!1,matches:d.status===0,agrees:!0}),k}),await Promise.all(Qa.map(async x=>{const k=Li.find(A=>A.id===x);if(!k)return;const S=await S1(x,h,k.version);let C,E;if(S.status===-1)C=!1,E=!1;else if(x==="refhs"){const A=v===0,N=S.status===0;C=A===N,E=v===0&&C}else v!==0?(C=S.status!==0,E=!1):(C=S.status===0&&C1(m,S.output,x),E=C);e(A=>{const N=new Map(A);return N.set(x,{parserId:x,output:S.output,status:S.status,loading:!1,matches:E,agrees:C,versionMismatch:S.versionMismatch}),N})}))},[]),a=O.useCallback(h=>n.get(h),[n]),c=O.useCallback(()=>{const h=[];let p=0;return Qa.forEach(d=>{const m=n.get(d);if(!m||m.loading)p++;else if(!m.agrees){const v=ti(d);h.push((v==null?void 0:v.name)||d)}}),{total:Qa.length,disagreeing:h.length,disagreeingNames:h,loading:p>0}},[n]);return{results:n,refOutput:t,runAllParsers:l,getResult:a,getAgreementCount:c}}function bR(n=640){const[e,t]=O.useState(typeof window<"u"?window.innerWidth<n:!1);return O.useEffect(()=>{const r=()=>t(window.innerWidth<n);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[n]),e}function SR(){const[n,e]=O.useState(typeof window<"u"?window.innerWidth>window.innerHeight:!1);return O.useEffect(()=>{const t=()=>e(window.innerWidth>window.innerHeight);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n}function OR(){const n=window.location.hash.slice(1);if(!n)return null;try{return atob(n)}catch{return null}}function CR(n){const e=btoa(n);window.history.replaceState(null,"",`#${e}`)}function PR(){const[n,e]=O.useState(()=>OR()||zo),[t,r]=O.useState(!1),[s,l]=O.useState(!1),[a,c]=O.useState(!1),[h,p]=O.useState(!1),[d,m]=O.useState(!1),[v,x]=O.useState(null),[k,S]=O.useState(!0),[C,E]=O.useState(!1),A=O.useRef(null),N=O.useRef(""),_=bR(640),I=SR(),{layout:F,updatePaneVisibility:B,reorderPanes:Q,resetLayout:q,showAllPanes:V,hideAllPanes:G,showSelectedPanes:H,showErrorPanes:J,getVisiblePanes:se,inputPaneWidth:U,setInputPaneWidth:ae,colorScheme:ce,setColorScheme:X,editorType:ee,setEditorType:Z}=wR(),{results:M,runAllParsers:L,getResult:ie,getAgreementCount:pe}=kR(),ye=se(),{total:re,disagreeing:he,disagreeingNames:Se,loading:Pe}=pe(),ve=ye.map(Ee=>Ee.id).join(","),Ae=O.useRef({input:"",panes:""}),We=Array.from(M.values()).some(Ee=>Ee.versionMismatch);O.useEffect(()=>{const Ee=async()=>{const Ve=await eR();S(Ve)};Ee();const de=setInterval(Ee,1e4);return()=>clearInterval(de)},[]),O.useEffect(()=>{const Ee=F.panes.find(de=>de.id==="refparse");Ee&&!Ee.visible&&B("refparse",!0)},[F.panes,B]),O.useEffect(()=>{const Ee=setTimeout(()=>{CR(n)},1e3);return()=>clearTimeout(Ee)},[n]),O.useEffect(()=>{if(Ae.current.input===n&&Ae.current.panes===ve)return;const Ee=setTimeout(()=>{const de=ve.split(",").filter(Boolean);de.length>0&&(Ae.current={input:n,panes:ve},L(n,de))},500);return()=>clearTimeout(Ee)},[n,ve,L]),O.useEffect(()=>{const Ee=de=>{var Qt,On;const Ve=de.target,tn=Ve.tagName==="INPUT"||Ve.tagName==="TEXTAREA"||Ve.closest(".monaco-editor")||Ve.closest(".cm-editor");if(de.key==="Escape"&&tn){de.preventDefault(),(Qt=A.current)==null||Qt.blur();return}if(tn)return;const ze=de.key.toUpperCase();if(ze==="I"&&!de.ctrlKey&&!de.metaKey&&!de.altKey&&(de.preventDefault(),(On=A.current)==null||On.focus()),ze==="H"&&!de.ctrlKey&&!de.metaKey&&!de.altKey&&(de.preventDefault(),c(!0)),ze==="P"&&!de.ctrlKey&&!de.metaKey&&!de.altKey&&(de.preventDefault(),r(!0)),ze==="A"&&!de.ctrlKey&&!de.metaKey&&!de.altKey&&(de.preventDefault(),V()),ze==="N"&&!de.ctrlKey&&!de.metaKey&&!de.altKey&&(de.preventDefault(),G()),ze==="S"&&!de.ctrlKey&&!de.metaKey&&!de.altKey&&(de.preventDefault(),H()),ze==="C"&&!de.ctrlKey&&!de.metaKey&&!de.altKey&&(de.preventDefault(),m(!0)),ze==="K"&&!de.ctrlKey&&!de.metaKey&&!de.altKey&&(de.preventDefault(),p(!0)),ze==="D"&&!de.ctrlKey&&!de.metaKey&&!de.altKey){de.preventDefault();const or=[];M.forEach((ui,ci)=>{ci!=="refparse"&&ui.agrees===!1&&or.push(ci)}),or.length>0&&J(or)}ze==="X"&&!de.ctrlKey&&!de.metaKey&&!de.altKey?(N.current+="X",N.current==="XXX"&&(de.preventDefault(),q(),e(zo),N.current="")):N.current=""};return document.addEventListener("keydown",Ee),()=>document.removeEventListener("keydown",Ee)},[V,G,H,J,M,q]);const ot=Xk(Mm(md,{activationConstraint:{distance:8}}),Mm(pd)),Je=O.useCallback(Ee=>{const{active:de,over:Ve}=Ee;if(Ve&&de.id!==Ve.id){if(de.id==="refparse")return;Q(de.id,Ve.id)}},[Q]),ct=ti("refparse");return _?b.jsxs("div",{className:`h-screen flex flex-col bg-gray-100 dark:bg-gray-900 ${ce==="dark"?"dark":""}`,children:[b.jsxs("header",{className:"bg-white dark:bg-gray-800 px-3 py-2 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[b.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"YAML Playground"}),b.jsxs("div",{className:"relative",children:[b.jsx("button",{onClick:()=>E(!C),className:"p-2 text-gray-700 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors","aria-label":"Menu",children:b.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:b.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),C&&b.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-lg z-50",children:[b.jsx("button",{onClick:()=>{c(!0),E(!1)},className:"w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"About"}),b.jsx("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),E(!1)},className:"w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Share"}),b.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",onClick:()=>E(!1),className:"block w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"GitHub"})]})]})]}),b.jsxs("div",{className:`flex-1 flex ${I?"flex-row":"flex-col"} overflow-hidden min-h-0`,children:[b.jsx("div",{className:`${I?"w-1/2 h-full":"h-1/2 w-full"} flex flex-col overflow-hidden ${I?"border-r border-gray-300 dark:border-gray-700":"border-b border-gray-300 dark:border-gray-700"}`,children:b.jsx(Cy,{ref:A,value:n,onChange:e,width:U,onWidthChange:ae,colorScheme:ce,editorType:ee,showBorder:!1,isMobile:!0})}),ct&&b.jsx("div",{className:`${I?"w-1/2 h-full":"h-1/2 w-full"} flex flex-col overflow-hidden`,children:b.jsx(tf,{parser:ct,result:ie("refparse"),isDraggable:!1,onSetYamlInput:e,showTestSuite:!1})})]})]}):b.jsxs("div",{className:`h-screen flex flex-col bg-gray-100 dark:bg-gray-900 ${ce==="dark"?"dark":""}`,children:[b.jsxs("header",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between",children:[b.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"YAML Parser Playground"}),b.jsxs("div",{className:"flex items-center gap-2",children:[(!k||We)&&b.jsx("button",{onClick:()=>l(!0),className:"px-3 py-1.5 bg-yellow-500 text-black font-semibold rounded hover:bg-yellow-400 transition-colors text-sm",children:"Setup"}),b.jsx(yR,{onHelp:()=>c(!0),onPreferences:()=>r(!0),onKeyboardShortcuts:()=>p(!0),onFactoryReset:()=>{q(),e(zo)}})]})]}),b.jsx("div",{className:"flex-1 flex overflow-hidden",children:(()=>{const Ee=ye.length>8,de=Ee?ye.filter(Ve=>Ve.id!=="refparse"):ye;return b.jsxs(b.Fragment,{children:[b.jsxs("div",{className:`${Ee?"grid grid-rows-2":"flex flex-col"} h-full border-r border-gray-300 dark:border-gray-700`,style:{width:`${U}px`,minWidth:"200px",maxWidth:"800px"},children:[b.jsx(Cy,{ref:A,value:n,onChange:e,width:U,onWidthChange:ae,colorScheme:ce,editorType:ee,showBorder:!1,heightMode:Ee?"half":"full"}),Ee&&ct&&b.jsx("div",{className:"h-full overflow-hidden border-t border-gray-300 dark:border-gray-700",children:b.jsx(tf,{parser:ct,result:ie("refparse"),isDraggable:!1,onSetYamlInput:e},"refparse-sidebar")})]},Ee?"left-col-split":"left-col-full"),b.jsx("div",{className:"flex-1 grid grid-cols-4 overflow-y-auto pane-container gap-px bg-gray-300 dark:bg-gray-700 auto-rows-fr",children:b.jsx(Gb,{sensors:ot,collisionDetection:Jk,onDragEnd:Je,children:b.jsx(cS,{items:de.map(Ve=>Ve.id),strategy:aS,children:de.map(Ve=>{const tn=ti(Ve.id);if(!tn)return null;const ze=Ve.id==="refparse";return b.jsx(tf,{parser:tn,result:ie(Ve.id),onClose:ze?void 0:()=>B(Ve.id,!1),isDraggable:!ze,onSetYamlInput:e},Ve.id)})})})})]})})()}),b.jsx(fR,{total:re,disagreeing:he,disagreeingNames:Se,loading:Pe,sandboxAvailable:k}),b.jsx(gR,{isOpen:t,onClose:()=>r(!1),paneStates:F.panes,onToggleVisibility:B,colorScheme:ce,onColorSchemeChange:X,editorType:ee,onEditorTypeChange:Z}),b.jsx(mR,{isOpen:s,onClose:()=>{l(!1);const Ee=ve.split(",").filter(Boolean);Ee.length>0&&L(n,Ee)}}),b.jsx(vR,{isOpen:a,onClose:()=>c(!1)}),b.jsx(xR,{isOpen:h,onClose:()=>p(!1)}),b.jsx(M1,{isOpen:d,onClose:()=>m(!1),onSelectParser:Ee=>x(Ee)}),v&&ti(v)&&b.jsx(od,{isOpen:!0,onClose:()=>x(null),parser:ti(v),onSelectTest:Ee=>e(Ee),forceRerun:!1,onCompare:()=>{x(null),m(!0)}})]})}Nk.createRoot(document.getElementById("root")).render(b.jsx(st.StrictMode,{children:b.jsx(PR,{})}));
//# sourceMappingURL=index-CPkp4Oe0.js.map

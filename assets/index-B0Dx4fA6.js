var Lk=Object.defineProperty;var Ik=(n,e,t)=>e in n?Lk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Sm=(n,e,t)=>Ik(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function Qy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sh={exports:{}},bo={},Ch={exports:{}},Re={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Cm;function Bk(){if(Cm)return Re;Cm=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function v(A){return A===null||typeof A!="object"?null:(A=m&&A[m]||A["@@iterator"],typeof A=="function"?A:null)}var w={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},S=Object.assign,C={};function O(A,B,le){this.props=A,this.context=B,this.refs=C,this.updater=le||w}O.prototype.isReactComponent={},O.prototype.setState=function(A,B){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,B,"setState")},O.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function N(){}N.prototype=O.prototype;function E(A,B,le){this.props=A,this.context=B,this.refs=C,this.updater=le||w}var T=E.prototype=new N;T.constructor=E,S(T,O.prototype),T.isPureReactComponent=!0;var I=Array.isArray,R=Object.prototype.hasOwnProperty,L={current:null},j={key:!0,ref:!0,__self:!0,__source:!0};function H(A,B,le){var pe,me={},ne=null,ce=null;if(B!=null)for(pe in B.ref!==void 0&&(ce=B.ref),B.key!==void 0&&(ne=""+B.key),B)R.call(B,pe)&&!j.hasOwnProperty(pe)&&(me[pe]=B[pe]);var ke=arguments.length-2;if(ke===1)me.children=le;else if(1<ke){for(var Pe=Array(ke),we=0;we<ke;we++)Pe[we]=arguments[we+2];me.children=Pe}if(A&&A.defaultProps)for(pe in ke=A.defaultProps,ke)me[pe]===void 0&&(me[pe]=ke[pe]);return{$$typeof:n,type:A,key:ne,ref:ce,props:me,_owner:L.current}}function W(A,B){return{$$typeof:n,type:A.type,key:B,ref:A.ref,props:A.props,_owner:A._owner}}function V(A){return typeof A=="object"&&A!==null&&A.$$typeof===n}function q(A){var B={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(le){return B[le]})}var $=/\/+/g;function Z(A,B){return typeof A=="object"&&A!==null&&A.key!=null?q(""+A.key):B.toString(36)}function ue(A,B,le,pe,me){var ne=typeof A;(ne==="undefined"||ne==="boolean")&&(A=null);var ce=!1;if(A===null)ce=!0;else switch(ne){case"string":case"number":ce=!0;break;case"object":switch(A.$$typeof){case n:case e:ce=!0}}if(ce)return ce=A,me=me(ce),A=pe===""?"."+Z(ce,0):pe,I(me)?(le="",A!=null&&(le=A.replace($,"$&/")+"/"),ue(me,B,le,"",function(we){return we})):me!=null&&(V(me)&&(me=W(me,le+(!me.key||ce&&ce.key===me.key?"":(""+me.key).replace($,"$&/")+"/")+A)),B.push(me)),1;if(ce=0,pe=pe===""?".":pe+":",I(A))for(var ke=0;ke<A.length;ke++){ne=A[ke];var Pe=pe+Z(ne,ke);ce+=ue(ne,B,le,Pe,me)}else if(Pe=v(A),typeof Pe=="function")for(A=Pe.call(A),ke=0;!(ne=A.next()).done;)ne=ne.value,Pe=pe+Z(ne,ke++),ce+=ue(ne,B,le,Pe,me);else if(ne==="object")throw B=String(A),Error("Objects are not valid as a React child (found: "+(B==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":B)+"). If you meant to render a collection of children, use an array instead.");return ce}function X(A,B,le){if(A==null)return A;var pe=[],me=0;return ue(A,pe,"","",function(ne){return B.call(le,ne,me++)}),pe}function G(A){if(A._status===-1){var B=A._result;B=B(),B.then(function(le){(A._status===0||A._status===-1)&&(A._status=1,A._result=le)},function(le){(A._status===0||A._status===-1)&&(A._status=2,A._result=le)}),A._status===-1&&(A._status=0,A._result=B)}if(A._status===1)return A._result.default;throw A._result}var se={current:null},Q={transition:null},ee={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:Q,ReactCurrentOwner:L};function J(){throw Error("act(...) is not supported in production builds of React.")}return Re.Children={map:X,forEach:function(A,B,le){X(A,function(){B.apply(this,arguments)},le)},count:function(A){var B=0;return X(A,function(){B++}),B},toArray:function(A){return X(A,function(B){return B})||[]},only:function(A){if(!V(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Re.Component=O,Re.Fragment=t,Re.Profiler=s,Re.PureComponent=E,Re.StrictMode=r,Re.Suspense=h,Re.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Re.act=J,Re.cloneElement=function(A,B,le){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var pe=S({},A.props),me=A.key,ne=A.ref,ce=A._owner;if(B!=null){if(B.ref!==void 0&&(ne=B.ref,ce=L.current),B.key!==void 0&&(me=""+B.key),A.type&&A.type.defaultProps)var ke=A.type.defaultProps;for(Pe in B)R.call(B,Pe)&&!j.hasOwnProperty(Pe)&&(pe[Pe]=B[Pe]===void 0&&ke!==void 0?ke[Pe]:B[Pe])}var Pe=arguments.length-2;if(Pe===1)pe.children=le;else if(1<Pe){ke=Array(Pe);for(var we=0;we<Pe;we++)ke[we]=arguments[we+2];pe.children=ke}return{$$typeof:n,type:A.type,key:me,ref:ne,props:pe,_owner:ce}},Re.createContext=function(A){return A={$$typeof:a,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:l,_context:A},A.Consumer=A},Re.createElement=H,Re.createFactory=function(A){var B=H.bind(null,A);return B.type=A,B},Re.createRef=function(){return{current:null}},Re.forwardRef=function(A){return{$$typeof:c,render:A}},Re.isValidElement=V,Re.lazy=function(A){return{$$typeof:p,_payload:{_status:-1,_result:A},_init:G}},Re.memo=function(A,B){return{$$typeof:d,type:A,compare:B===void 0?null:B}},Re.startTransition=function(A){var B=Q.transition;Q.transition={};try{A()}finally{Q.transition=B}},Re.unstable_act=J,Re.useCallback=function(A,B){return se.current.useCallback(A,B)},Re.useContext=function(A){return se.current.useContext(A)},Re.useDebugValue=function(){},Re.useDeferredValue=function(A){return se.current.useDeferredValue(A)},Re.useEffect=function(A,B){return se.current.useEffect(A,B)},Re.useId=function(){return se.current.useId()},Re.useImperativeHandle=function(A,B,le){return se.current.useImperativeHandle(A,B,le)},Re.useInsertionEffect=function(A,B){return se.current.useInsertionEffect(A,B)},Re.useLayoutEffect=function(A,B){return se.current.useLayoutEffect(A,B)},Re.useMemo=function(A,B){return se.current.useMemo(A,B)},Re.useReducer=function(A,B,le){return se.current.useReducer(A,B,le)},Re.useRef=function(A){return se.current.useRef(A)},Re.useState=function(A){return se.current.useState(A)},Re.useSyncExternalStore=function(A,B,le){return se.current.useSyncExternalStore(A,B,le)},Re.useTransition=function(){return se.current.useTransition()},Re.version="18.3.1",Re}var Om;function ud(){return Om||(Om=1,Ch.exports=Bk()),Ch.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm;function zk(){if(Pm)return bo;Pm=1;var n=ud(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function a(c,h,d){var p,m={},v=null,w=null;d!==void 0&&(v=""+d),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(w=h.ref);for(p in h)r.call(h,p)&&!l.hasOwnProperty(p)&&(m[p]=h[p]);if(c&&c.defaultProps)for(p in h=c.defaultProps,h)m[p]===void 0&&(m[p]=h[p]);return{$$typeof:e,type:c,key:v,ref:w,props:m,_owner:s.current}}return bo.Fragment=t,bo.jsx=a,bo.jsxs=a,bo}var Nm;function Fk(){return Nm||(Nm=1,Sh.exports=zk()),Sh.exports}var x=Fk(),b=ud();const ct=Qy(b);var ba={},Oh={exports:{}},rn={},Ph={exports:{}},Nh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am;function _k(){return Am||(Am=1,(function(n){function e(Q,ee){var J=Q.length;Q.push(ee);e:for(;0<J;){var A=J-1>>>1,B=Q[A];if(0<s(B,ee))Q[A]=ee,Q[J]=B,J=A;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ee=Q[0],J=Q.pop();if(J!==ee){Q[0]=J;e:for(var A=0,B=Q.length,le=B>>>1;A<le;){var pe=2*(A+1)-1,me=Q[pe],ne=pe+1,ce=Q[ne];if(0>s(me,J))ne<B&&0>s(ce,me)?(Q[A]=ce,Q[ne]=J,A=ne):(Q[A]=me,Q[pe]=J,A=pe);else if(ne<B&&0>s(ce,J))Q[A]=ce,Q[ne]=J,A=ne;else break e}}return ee}function s(Q,ee){var J=Q.sortIndex-ee.sortIndex;return J!==0?J:Q.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var h=[],d=[],p=1,m=null,v=3,w=!1,S=!1,C=!1,O=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(Q){for(var ee=t(d);ee!==null;){if(ee.callback===null)r(d);else if(ee.startTime<=Q)r(d),ee.sortIndex=ee.expirationTime,e(h,ee);else break;ee=t(d)}}function I(Q){if(C=!1,T(Q),!S)if(t(h)!==null)S=!0,G(R);else{var ee=t(d);ee!==null&&se(I,ee.startTime-Q)}}function R(Q,ee){S=!1,C&&(C=!1,N(H),H=-1),w=!0;var J=v;try{for(T(ee),m=t(h);m!==null&&(!(m.expirationTime>ee)||Q&&!q());){var A=m.callback;if(typeof A=="function"){m.callback=null,v=m.priorityLevel;var B=A(m.expirationTime<=ee);ee=n.unstable_now(),typeof B=="function"?m.callback=B:m===t(h)&&r(h),T(ee)}else r(h);m=t(h)}if(m!==null)var le=!0;else{var pe=t(d);pe!==null&&se(I,pe.startTime-ee),le=!1}return le}finally{m=null,v=J,w=!1}}var L=!1,j=null,H=-1,W=5,V=-1;function q(){return!(n.unstable_now()-V<W)}function $(){if(j!==null){var Q=n.unstable_now();V=Q;var ee=!0;try{ee=j(!0,Q)}finally{ee?Z():(L=!1,j=null)}}else L=!1}var Z;if(typeof E=="function")Z=function(){E($)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,X=ue.port2;ue.port1.onmessage=$,Z=function(){X.postMessage(null)}}else Z=function(){O($,0)};function G(Q){j=Q,L||(L=!0,Z())}function se(Q,ee){H=O(function(){Q(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){S||w||(S=!0,G(R))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):W=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(Q){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var J=v;v=ee;try{return Q()}finally{v=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,ee){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var J=v;v=Q;try{return ee()}finally{v=J}},n.unstable_scheduleCallback=function(Q,ee,J){var A=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?A+J:A):J=A,Q){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=J+B,Q={id:p++,callback:ee,priorityLevel:Q,startTime:J,expirationTime:B,sortIndex:-1},J>A?(Q.sortIndex=J,e(d,Q),t(h)===null&&Q===t(d)&&(C?(N(H),H=-1):C=!0,se(I,J-A))):(Q.sortIndex=B,e(h,Q),S||w||(S=!0,G(R))),Q},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(Q){var ee=v;return function(){var J=v;v=ee;try{return Q.apply(this,arguments)}finally{v=J}}}})(Nh)),Nh}var Em;function Hk(){return Em||(Em=1,Ph.exports=_k()),Ph.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm;function Vk(){if(Mm)return rn;Mm=1;var n=ud(),e=Hk();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function l(i,o){a(i,o),a(i+"Capture",o)}function a(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function v(i){return h.call(m,i)?!0:h.call(p,i)?!1:d.test(i)?m[i]=!0:(p[i]=!0,!1)}function w(i,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function S(i,o,u,f){if(o===null||typeof o>"u"||w(i,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function C(i,o,u,f,g,y,k){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=k}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){O[i]=new C(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];O[o]=new C(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){O[i]=new C(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){O[i]=new C(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){O[i]=new C(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){O[i]=new C(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){O[i]=new C(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){O[i]=new C(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){O[i]=new C(i,5,!1,i.toLowerCase(),null,!1,!1)});var N=/[\-:]([a-z])/g;function E(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(N,E);O[o]=new C(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(N,E);O[o]=new C(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(N,E);O[o]=new C(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){O[i]=new C(i,1,!1,i.toLowerCase(),null,!1,!1)}),O.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){O[i]=new C(i,1,!1,i.toLowerCase(),null,!0,!0)});function T(i,o,u,f){var g=O.hasOwnProperty(o)?O[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(S(o,u,g,f)&&(u=null),f||g===null?v(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):g.mustUseProperty?i[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,f=g.attributeNamespace,u===null?i.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?i.setAttributeNS(f,o,u):i.setAttribute(o,u))))}var I=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),L=Symbol.for("react.portal"),j=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),W=Symbol.for("react.profiler"),V=Symbol.for("react.provider"),q=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),Q=Symbol.iterator;function ee(i){return i===null||typeof i!="object"?null:(i=Q&&i[Q]||i["@@iterator"],typeof i=="function"?i:null)}var J=Object.assign,A;function B(i){if(A===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);A=o&&o[1]||""}return`
`+A+i}var le=!1;function pe(i,o){if(!i||le)return"";le=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(_){var f=_}Reflect.construct(i,[],o)}else{try{o.call()}catch(_){f=_}i.call(o.prototype)}else{try{throw Error()}catch(_){f=_}i()}}catch(_){if(_&&f&&typeof _.stack=="string"){for(var g=_.stack.split(`
`),y=f.stack.split(`
`),k=g.length-1,P=y.length-1;1<=k&&0<=P&&g[k]!==y[P];)P--;for(;1<=k&&0<=P;k--,P--)if(g[k]!==y[P]){if(k!==1||P!==1)do if(k--,P--,0>P||g[k]!==y[P]){var M=`
`+g[k].replace(" at new "," at ");return i.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",i.displayName)),M}while(1<=k&&0<=P);break}}}finally{le=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?B(i):""}function me(i){switch(i.tag){case 5:return B(i.type);case 16:return B("Lazy");case 13:return B("Suspense");case 19:return B("SuspenseList");case 0:case 2:case 15:return i=pe(i.type,!1),i;case 11:return i=pe(i.type.render,!1),i;case 1:return i=pe(i.type,!0),i;default:return""}}function ne(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case j:return"Fragment";case L:return"Portal";case W:return"Profiler";case H:return"StrictMode";case Z:return"Suspense";case ue:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case q:return(i.displayName||"Context")+".Consumer";case V:return(i._context.displayName||"Context")+".Provider";case $:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case X:return o=i.displayName||null,o!==null?o:ne(i.type)||"Memo";case G:o=i._payload,i=i._init;try{return ne(i(o))}catch{}}return null}function ce(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(o);case 8:return o===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function ke(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Pe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function we(i){var o=Pe(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(k){f=""+k,y.call(this,k)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ee(i){i._valueTracker||(i._valueTracker=we(i))}function _e(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return i&&(f=Pe(i)?i.checked?"true":"false":i.value),i=f,i!==u?(o.setValue(i),!0):!1}function We(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function qe(i,o){var u=o.checked;return J({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function fe(i,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=ke(o.value!=null?o.value:u),i._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Me(i,o){o=o.checked,o!=null&&T(i,"checked",o,!1)}function Je(i,o){Me(i,o);var u=ke(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?ht(i,o.type,u):o.hasOwnProperty("defaultValue")&&ht(i,o.type,ke(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function En(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function ht(i,o,u){(o!=="number"||We(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Ge=Array.isArray;function wt(i,o,u,f){if(i=i.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=o.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&f&&(i[u].defaultSelected=!0)}else{for(u=""+ke(u),o=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function Gt(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function cr(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Ge(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:ke(u)}}function mi(i,o){var u=ke(o.value),f=ke(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),f!=null&&(i.defaultValue=""+f)}function hr(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function yi(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ln(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?yi(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Oe,oe=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,g){MSApp.execUnsafeLocalFunction(function(){return i(o,u,f,g)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Oe=Oe||document.createElement("div"),Oe.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Oe.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function De(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var ft={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ze=["Webkit","ms","Moz","O"];Object.keys(ft).forEach(function(i){Ze.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),ft[o]=ft[i]})});function Xn(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||ft.hasOwnProperty(i)&&ft[i]?(""+o).trim():o+"px"}function xi(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=Xn(u,o[u],f);u==="float"&&(u="cssFloat"),f?i.setProperty(u,g):i[u]=g}}var jr=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fr(i,o){if(o){if(jr[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function dr(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pr=null;function Fs(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var _s=null,Lr=null,et=null;function Rt(i){if(i=oo(i)){if(typeof _s!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Bl(o),_s(i.stateNode,i.type,o))}}function Tt(i){Lr?et?et.push(i):et=[i]:Lr=i}function Mn(){if(Lr){var i=Lr,o=et;if(et=Lr=null,Rt(i),o)for(i=0;i<o.length;i++)Rt(o[i])}}function Wt(i,o){return i(o)}function Dt(){}var Yt=!1;function gr(i,o,u){if(Yt)return i(o,u);Yt=!0;try{return Wt(i,o,u)}finally{Yt=!1,(Lr!==null||et!==null)&&(Dt(),Mn())}}function tt(i,o){var u=i.stateNode;if(u===null)return null;var f=Bl(u);if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var yn=!1;if(c)try{var jt={};Object.defineProperty(jt,"passive",{get:function(){yn=!0}}),window.addEventListener("test",jt,jt),window.removeEventListener("test",jt,jt)}catch{yn=!1}function Rn(i,o,u,f,g,y,k,P,M){var _=Array.prototype.slice.call(arguments,3);try{o.apply(u,_)}catch(Y){this.onError(Y)}}var Tn=!1,Kn=null,an=!1,mr=null,Hs={onError:function(i){Tn=!0,Kn=i}};function W1(i,o,u,f,g,y,k,P,M){Tn=!1,Kn=null,Rn.apply(Hs,arguments)}function Q1(i,o,u,f,g,y,k,P,M){if(W1.apply(this,arguments),Tn){if(Tn){var _=Kn;Tn=!1,Kn=null}else throw Error(t(198));an||(an=!0,mr=_)}}function vi(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Ud(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Xd(i){if(vi(i)!==i)throw Error(t(188))}function $1(i){var o=i.alternate;if(!o){if(o=vi(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,f=o;;){var g=u.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===u)return Xd(g),i;if(y===f)return Xd(g),o;y=y.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=y;else{for(var k=!1,P=g.child;P;){if(P===u){k=!0,u=g,f=y;break}if(P===f){k=!0,f=g,u=y;break}P=P.sibling}if(!k){for(P=y.child;P;){if(P===u){k=!0,u=y,f=g;break}if(P===f){k=!0,f=y,u=g;break}P=P.sibling}if(!k)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Kd(i){return i=$1(i),i!==null?qd(i):null}function qd(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=qd(i);if(o!==null)return o;i=i.sibling}return null}var Gd=e.unstable_scheduleCallback,Yd=e.unstable_cancelCallback,U1=e.unstable_shouldYield,X1=e.unstable_requestPaint,lt=e.unstable_now,K1=e.unstable_getCurrentPriorityLevel,Wu=e.unstable_ImmediatePriority,Jd=e.unstable_UserBlockingPriority,yl=e.unstable_NormalPriority,q1=e.unstable_LowPriority,Zd=e.unstable_IdlePriority,xl=null,qn=null;function G1(i){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(xl,i,void 0,(i.current.flags&128)===128)}catch{}}var Dn=Math.clz32?Math.clz32:Z1,Y1=Math.log,J1=Math.LN2;function Z1(i){return i>>>=0,i===0?32:31-(Y1(i)/J1|0)|0}var vl=64,wl=4194304;function Vs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function kl(i,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,g=i.suspendedLanes,y=i.pingedLanes,k=u&268435455;if(k!==0){var P=k&~g;P!==0?f=Vs(P):(y&=k,y!==0&&(f=Vs(y)))}else k=u&~g,k!==0?f=Vs(k):y!==0&&(f=Vs(y));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,y=o&-o,g>=y||g===16&&(y&4194240)!==0))return o;if((f&4)!==0&&(f|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=f;0<o;)u=31-Dn(o),g=1<<u,f|=i[u],o&=~g;return f}function ew(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tw(i,o){for(var u=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes;0<y;){var k=31-Dn(y),P=1<<k,M=g[k];M===-1?((P&u)===0||(P&f)!==0)&&(g[k]=ew(P,o)):M<=o&&(i.expiredLanes|=P),y&=~P}}function Qu(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function ep(){var i=vl;return vl<<=1,(vl&4194240)===0&&(vl=64),i}function $u(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Ws(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Dn(o),i[o]=u}function nw(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<u;){var g=31-Dn(u),y=1<<g;o[g]=0,f[g]=-1,i[g]=-1,u&=~y}}function Uu(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var f=31-Dn(u),g=1<<f;g&o|i[f]&o&&(i[f]|=o),u&=~g}}var He=0;function tp(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var np,Xu,rp,ip,sp,Ku=!1,bl=[],Ir=null,Br=null,zr=null,Qs=new Map,$s=new Map,Fr=[],rw="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function op(i,o){switch(i){case"focusin":case"focusout":Ir=null;break;case"dragenter":case"dragleave":Br=null;break;case"mouseover":case"mouseout":zr=null;break;case"pointerover":case"pointerout":Qs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":$s.delete(o.pointerId)}}function Us(i,o,u,f,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},o!==null&&(o=oo(o),o!==null&&Xu(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function iw(i,o,u,f,g){switch(o){case"focusin":return Ir=Us(Ir,i,o,u,f,g),!0;case"dragenter":return Br=Us(Br,i,o,u,f,g),!0;case"mouseover":return zr=Us(zr,i,o,u,f,g),!0;case"pointerover":var y=g.pointerId;return Qs.set(y,Us(Qs.get(y)||null,i,o,u,f,g)),!0;case"gotpointercapture":return y=g.pointerId,$s.set(y,Us($s.get(y)||null,i,o,u,f,g)),!0}return!1}function lp(i){var o=wi(i.target);if(o!==null){var u=vi(o);if(u!==null){if(o=u.tag,o===13){if(o=Ud(u),o!==null){i.blockedOn=o,sp(i.priority,function(){rp(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Sl(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Gu(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);pr=f,u.target.dispatchEvent(f),pr=null}else return o=oo(u),o!==null&&Xu(o),i.blockedOn=u,!1;o.shift()}return!0}function ap(i,o,u){Sl(i)&&u.delete(o)}function sw(){Ku=!1,Ir!==null&&Sl(Ir)&&(Ir=null),Br!==null&&Sl(Br)&&(Br=null),zr!==null&&Sl(zr)&&(zr=null),Qs.forEach(ap),$s.forEach(ap)}function Xs(i,o){i.blockedOn===o&&(i.blockedOn=null,Ku||(Ku=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,sw)))}function Ks(i){function o(g){return Xs(g,i)}if(0<bl.length){Xs(bl[0],i);for(var u=1;u<bl.length;u++){var f=bl[u];f.blockedOn===i&&(f.blockedOn=null)}}for(Ir!==null&&Xs(Ir,i),Br!==null&&Xs(Br,i),zr!==null&&Xs(zr,i),Qs.forEach(o),$s.forEach(o),u=0;u<Fr.length;u++)f=Fr[u],f.blockedOn===i&&(f.blockedOn=null);for(;0<Fr.length&&(u=Fr[0],u.blockedOn===null);)lp(u),u.blockedOn===null&&Fr.shift()}var Wi=I.ReactCurrentBatchConfig,Cl=!0;function ow(i,o,u,f){var g=He,y=Wi.transition;Wi.transition=null;try{He=1,qu(i,o,u,f)}finally{He=g,Wi.transition=y}}function lw(i,o,u,f){var g=He,y=Wi.transition;Wi.transition=null;try{He=4,qu(i,o,u,f)}finally{He=g,Wi.transition=y}}function qu(i,o,u,f){if(Cl){var g=Gu(i,o,u,f);if(g===null)dc(i,o,f,Ol,u),op(i,f);else if(iw(g,i,o,u,f))f.stopPropagation();else if(op(i,f),o&4&&-1<rw.indexOf(i)){for(;g!==null;){var y=oo(g);if(y!==null&&np(y),y=Gu(i,o,u,f),y===null&&dc(i,o,f,Ol,u),y===g)break;g=y}g!==null&&f.stopPropagation()}else dc(i,o,f,null,u)}}var Ol=null;function Gu(i,o,u,f){if(Ol=null,i=Fs(f),i=wi(i),i!==null)if(o=vi(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Ud(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Ol=i,null}function up(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(K1()){case Wu:return 1;case Jd:return 4;case yl:case q1:return 16;case Zd:return 536870912;default:return 16}default:return 16}}var _r=null,Yu=null,Pl=null;function cp(){if(Pl)return Pl;var i,o=Yu,u=o.length,f,g="value"in _r?_r.value:_r.textContent,y=g.length;for(i=0;i<u&&o[i]===g[i];i++);var k=u-i;for(f=1;f<=k&&o[u-f]===g[y-f];f++);return Pl=g.slice(i,1<f?1-f:void 0)}function Nl(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Al(){return!0}function hp(){return!1}function un(i){function o(u,f,g,y,k){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=k,this.currentTarget=null;for(var P in i)i.hasOwnProperty(P)&&(u=i[P],this[P]=u?u(y):y[P]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Al:hp,this.isPropagationStopped=hp,this}return J(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Al)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Al)},persist:function(){},isPersistent:Al}),o}var Qi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ju=un(Qi),qs=J({},Qi,{view:0,detail:0}),aw=un(qs),Zu,ec,Gs,El=J({},qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Gs&&(Gs&&i.type==="mousemove"?(Zu=i.screenX-Gs.screenX,ec=i.screenY-Gs.screenY):ec=Zu=0,Gs=i),Zu)},movementY:function(i){return"movementY"in i?i.movementY:ec}}),fp=un(El),uw=J({},El,{dataTransfer:0}),cw=un(uw),hw=J({},qs,{relatedTarget:0}),tc=un(hw),fw=J({},Qi,{animationName:0,elapsedTime:0,pseudoElement:0}),dw=un(fw),pw=J({},Qi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),gw=un(pw),mw=J({},Qi,{data:0}),dp=un(mw),yw={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},xw={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},vw={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ww(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=vw[i])?!!o[i]:!1}function nc(){return ww}var kw=J({},qs,{key:function(i){if(i.key){var o=yw[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Nl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?xw[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nc,charCode:function(i){return i.type==="keypress"?Nl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Nl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),bw=un(kw),Sw=J({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pp=un(Sw),Cw=J({},qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nc}),Ow=un(Cw),Pw=J({},Qi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Nw=un(Pw),Aw=J({},El,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Ew=un(Aw),Mw=[9,13,27,32],rc=c&&"CompositionEvent"in window,Ys=null;c&&"documentMode"in document&&(Ys=document.documentMode);var Rw=c&&"TextEvent"in window&&!Ys,gp=c&&(!rc||Ys&&8<Ys&&11>=Ys),mp=" ",yp=!1;function xp(i,o){switch(i){case"keyup":return Mw.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vp(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var $i=!1;function Tw(i,o){switch(i){case"compositionend":return vp(o);case"keypress":return o.which!==32?null:(yp=!0,mp);case"textInput":return i=o.data,i===mp&&yp?null:i;default:return null}}function Dw(i,o){if($i)return i==="compositionend"||!rc&&xp(i,o)?(i=cp(),Pl=Yu=_r=null,$i=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return gp&&o.locale!=="ko"?null:o.data;default:return null}}var jw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!jw[i.type]:o==="textarea"}function kp(i,o,u,f){Tt(f),o=jl(o,"onChange"),0<o.length&&(u=new Ju("onChange","change",null,u,f),i.push({event:u,listeners:o}))}var Js=null,Zs=null;function Lw(i){Fp(i,0)}function Ml(i){var o=Gi(i);if(_e(o))return i}function Iw(i,o){if(i==="change")return o}var bp=!1;if(c){var ic;if(c){var sc="oninput"in document;if(!sc){var Sp=document.createElement("div");Sp.setAttribute("oninput","return;"),sc=typeof Sp.oninput=="function"}ic=sc}else ic=!1;bp=ic&&(!document.documentMode||9<document.documentMode)}function Cp(){Js&&(Js.detachEvent("onpropertychange",Op),Zs=Js=null)}function Op(i){if(i.propertyName==="value"&&Ml(Zs)){var o=[];kp(o,Zs,i,Fs(i)),gr(Lw,o)}}function Bw(i,o,u){i==="focusin"?(Cp(),Js=o,Zs=u,Js.attachEvent("onpropertychange",Op)):i==="focusout"&&Cp()}function zw(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ml(Zs)}function Fw(i,o){if(i==="click")return Ml(o)}function _w(i,o){if(i==="input"||i==="change")return Ml(o)}function Hw(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var jn=typeof Object.is=="function"?Object.is:Hw;function eo(i,o){if(jn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!h.call(o,g)||!jn(i[g],o[g]))return!1}return!0}function Pp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Np(i,o){var u=Pp(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=o&&f>=o)return{node:u,offset:o-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Pp(u)}}function Ap(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Ap(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Ep(){for(var i=window,o=We();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=We(i.document)}return o}function oc(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Vw(i){var o=Ep(),u=i.focusedElem,f=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&Ap(u.ownerDocument.documentElement,u)){if(f!==null&&oc(u)){if(o=f.start,i=f.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=u.textContent.length,y=Math.min(f.start,g);f=f.end===void 0?y:Math.min(f.end,g),!i.extend&&y>f&&(g=f,f=y,y=g),g=Np(u,y);var k=Np(u,f);g&&k&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==k.node||i.focusOffset!==k.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),y>f?(i.addRange(o),i.extend(k.node,k.offset)):(o.setEnd(k.node,k.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Ww=c&&"documentMode"in document&&11>=document.documentMode,Ui=null,lc=null,to=null,ac=!1;function Mp(i,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ac||Ui==null||Ui!==We(f)||(f=Ui,"selectionStart"in f&&oc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),to&&eo(to,f)||(to=f,f=jl(lc,"onSelect"),0<f.length&&(o=new Ju("onSelect","select",null,o,u),i.push({event:o,listeners:f}),o.target=Ui)))}function Rl(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Xi={animationend:Rl("Animation","AnimationEnd"),animationiteration:Rl("Animation","AnimationIteration"),animationstart:Rl("Animation","AnimationStart"),transitionend:Rl("Transition","TransitionEnd")},uc={},Rp={};c&&(Rp=document.createElement("div").style,"AnimationEvent"in window||(delete Xi.animationend.animation,delete Xi.animationiteration.animation,delete Xi.animationstart.animation),"TransitionEvent"in window||delete Xi.transitionend.transition);function Tl(i){if(uc[i])return uc[i];if(!Xi[i])return i;var o=Xi[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Rp)return uc[i]=o[u];return i}var Tp=Tl("animationend"),Dp=Tl("animationiteration"),jp=Tl("animationstart"),Lp=Tl("transitionend"),Ip=new Map,Bp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hr(i,o){Ip.set(i,o),l(o,[i])}for(var cc=0;cc<Bp.length;cc++){var hc=Bp[cc],Qw=hc.toLowerCase(),$w=hc[0].toUpperCase()+hc.slice(1);Hr(Qw,"on"+$w)}Hr(Tp,"onAnimationEnd"),Hr(Dp,"onAnimationIteration"),Hr(jp,"onAnimationStart"),Hr("dblclick","onDoubleClick"),Hr("focusin","onFocus"),Hr("focusout","onBlur"),Hr(Lp,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Uw=new Set("cancel close invalid load scroll toggle".split(" ").concat(no));function zp(i,o,u){var f=i.type||"unknown-event";i.currentTarget=u,Q1(f,o,void 0,i),i.currentTarget=null}function Fp(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],g=f.event;f=f.listeners;e:{var y=void 0;if(o)for(var k=f.length-1;0<=k;k--){var P=f[k],M=P.instance,_=P.currentTarget;if(P=P.listener,M!==y&&g.isPropagationStopped())break e;zp(g,P,_),y=M}else for(k=0;k<f.length;k++){if(P=f[k],M=P.instance,_=P.currentTarget,P=P.listener,M!==y&&g.isPropagationStopped())break e;zp(g,P,_),y=M}}}if(an)throw i=mr,an=!1,mr=null,i}function Ue(i,o){var u=o[vc];u===void 0&&(u=o[vc]=new Set);var f=i+"__bubble";u.has(f)||(_p(o,i,2,!1),u.add(f))}function fc(i,o,u){var f=0;o&&(f|=4),_p(u,i,f,o)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function ro(i){if(!i[Dl]){i[Dl]=!0,r.forEach(function(u){u!=="selectionchange"&&(Uw.has(u)||fc(u,!1,i),fc(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Dl]||(o[Dl]=!0,fc("selectionchange",!1,o))}}function _p(i,o,u,f){switch(up(o)){case 1:var g=ow;break;case 4:g=lw;break;default:g=qu}u=g.bind(null,o,u,i),g=void 0,!yn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(o,u,{capture:!0,passive:g}):i.addEventListener(o,u,!0):g!==void 0?i.addEventListener(o,u,{passive:g}):i.addEventListener(o,u,!1)}function dc(i,o,u,f,g){var y=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var P=f.stateNode.containerInfo;if(P===g||P.nodeType===8&&P.parentNode===g)break;if(k===4)for(k=f.return;k!==null;){var M=k.tag;if((M===3||M===4)&&(M=k.stateNode.containerInfo,M===g||M.nodeType===8&&M.parentNode===g))return;k=k.return}for(;P!==null;){if(k=wi(P),k===null)return;if(M=k.tag,M===5||M===6){f=y=k;continue e}P=P.parentNode}}f=f.return}gr(function(){var _=y,Y=Fs(u),te=[];e:{var K=Ip.get(i);if(K!==void 0){var de=Ju,ye=i;switch(i){case"keypress":if(Nl(u)===0)break e;case"keydown":case"keyup":de=bw;break;case"focusin":ye="focus",de=tc;break;case"focusout":ye="blur",de=tc;break;case"beforeblur":case"afterblur":de=tc;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=fp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=cw;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Ow;break;case Tp:case Dp:case jp:de=dw;break;case Lp:de=Nw;break;case"scroll":de=aw;break;case"wheel":de=Ew;break;case"copy":case"cut":case"paste":de=gw;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=pp}var xe=(o&4)!==0,at=!xe&&i==="scroll",z=xe?K!==null?K+"Capture":null:K;xe=[];for(var D=_,F;D!==null;){F=D;var re=F.stateNode;if(F.tag===5&&re!==null&&(F=re,z!==null&&(re=tt(D,z),re!=null&&xe.push(io(D,re,F)))),at)break;D=D.return}0<xe.length&&(K=new de(K,ye,null,u,Y),te.push({event:K,listeners:xe}))}}if((o&7)===0){e:{if(K=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",K&&u!==pr&&(ye=u.relatedTarget||u.fromElement)&&(wi(ye)||ye[yr]))break e;if((de||K)&&(K=Y.window===Y?Y:(K=Y.ownerDocument)?K.defaultView||K.parentWindow:window,de?(ye=u.relatedTarget||u.toElement,de=_,ye=ye?wi(ye):null,ye!==null&&(at=vi(ye),ye!==at||ye.tag!==5&&ye.tag!==6)&&(ye=null)):(de=null,ye=_),de!==ye)){if(xe=fp,re="onMouseLeave",z="onMouseEnter",D="mouse",(i==="pointerout"||i==="pointerover")&&(xe=pp,re="onPointerLeave",z="onPointerEnter",D="pointer"),at=de==null?K:Gi(de),F=ye==null?K:Gi(ye),K=new xe(re,D+"leave",de,u,Y),K.target=at,K.relatedTarget=F,re=null,wi(Y)===_&&(xe=new xe(z,D+"enter",ye,u,Y),xe.target=F,xe.relatedTarget=at,re=xe),at=re,de&&ye)t:{for(xe=de,z=ye,D=0,F=xe;F;F=Ki(F))D++;for(F=0,re=z;re;re=Ki(re))F++;for(;0<D-F;)xe=Ki(xe),D--;for(;0<F-D;)z=Ki(z),F--;for(;D--;){if(xe===z||z!==null&&xe===z.alternate)break t;xe=Ki(xe),z=Ki(z)}xe=null}else xe=null;de!==null&&Hp(te,K,de,xe,!1),ye!==null&&at!==null&&Hp(te,at,ye,xe,!0)}}e:{if(K=_?Gi(_):window,de=K.nodeName&&K.nodeName.toLowerCase(),de==="select"||de==="input"&&K.type==="file")var ve=Iw;else if(wp(K))if(bp)ve=_w;else{ve=zw;var Se=Bw}else(de=K.nodeName)&&de.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(ve=Fw);if(ve&&(ve=ve(i,_))){kp(te,ve,u,Y);break e}Se&&Se(i,K,_),i==="focusout"&&(Se=K._wrapperState)&&Se.controlled&&K.type==="number"&&ht(K,"number",K.value)}switch(Se=_?Gi(_):window,i){case"focusin":(wp(Se)||Se.contentEditable==="true")&&(Ui=Se,lc=_,to=null);break;case"focusout":to=lc=Ui=null;break;case"mousedown":ac=!0;break;case"contextmenu":case"mouseup":case"dragend":ac=!1,Mp(te,u,Y);break;case"selectionchange":if(Ww)break;case"keydown":case"keyup":Mp(te,u,Y)}var Ce;if(rc)e:{switch(i){case"compositionstart":var Ne="onCompositionStart";break e;case"compositionend":Ne="onCompositionEnd";break e;case"compositionupdate":Ne="onCompositionUpdate";break e}Ne=void 0}else $i?xp(i,u)&&(Ne="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ne="onCompositionStart");Ne&&(gp&&u.locale!=="ko"&&($i||Ne!=="onCompositionStart"?Ne==="onCompositionEnd"&&$i&&(Ce=cp()):(_r=Y,Yu="value"in _r?_r.value:_r.textContent,$i=!0)),Se=jl(_,Ne),0<Se.length&&(Ne=new dp(Ne,i,null,u,Y),te.push({event:Ne,listeners:Se}),Ce?Ne.data=Ce:(Ce=vp(u),Ce!==null&&(Ne.data=Ce)))),(Ce=Rw?Tw(i,u):Dw(i,u))&&(_=jl(_,"onBeforeInput"),0<_.length&&(Y=new dp("onBeforeInput","beforeinput",null,u,Y),te.push({event:Y,listeners:_}),Y.data=Ce))}Fp(te,o)})}function io(i,o,u){return{instance:i,listener:o,currentTarget:u}}function jl(i,o){for(var u=o+"Capture",f=[];i!==null;){var g=i,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=tt(i,u),y!=null&&f.unshift(io(i,y,g)),y=tt(i,o),y!=null&&f.push(io(i,y,g))),i=i.return}return f}function Ki(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Hp(i,o,u,f,g){for(var y=o._reactName,k=[];u!==null&&u!==f;){var P=u,M=P.alternate,_=P.stateNode;if(M!==null&&M===f)break;P.tag===5&&_!==null&&(P=_,g?(M=tt(u,y),M!=null&&k.unshift(io(u,M,P))):g||(M=tt(u,y),M!=null&&k.push(io(u,M,P)))),u=u.return}k.length!==0&&i.push({event:o,listeners:k})}var Xw=/\r\n?/g,Kw=/\u0000|\uFFFD/g;function Vp(i){return(typeof i=="string"?i:""+i).replace(Xw,`
`).replace(Kw,"")}function Ll(i,o,u){if(o=Vp(o),Vp(i)!==o&&u)throw Error(t(425))}function Il(){}var pc=null,gc=null;function mc(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var yc=typeof setTimeout=="function"?setTimeout:void 0,qw=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,Gw=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(i){return Wp.resolve(null).then(i).catch(Yw)}:yc;function Yw(i){setTimeout(function(){throw i})}function xc(i,o){var u=o,f=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){i.removeChild(g),Ks(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);Ks(o)}function Vr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Qp(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var qi=Math.random().toString(36).slice(2),Gn="__reactFiber$"+qi,so="__reactProps$"+qi,yr="__reactContainer$"+qi,vc="__reactEvents$"+qi,Jw="__reactListeners$"+qi,Zw="__reactHandles$"+qi;function wi(i){var o=i[Gn];if(o)return o;for(var u=i.parentNode;u;){if(o=u[yr]||u[Gn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=Qp(i);i!==null;){if(u=i[Gn])return u;i=Qp(i)}return o}i=u,u=i.parentNode}return null}function oo(i){return i=i[Gn]||i[yr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Gi(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Bl(i){return i[so]||null}var wc=[],Yi=-1;function Wr(i){return{current:i}}function Xe(i){0>Yi||(i.current=wc[Yi],wc[Yi]=null,Yi--)}function $e(i,o){Yi++,wc[Yi]=i.current,i.current=o}var Qr={},Lt=Wr(Qr),Jt=Wr(!1),ki=Qr;function Ji(i,o){var u=i.type.contextTypes;if(!u)return Qr;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in u)g[y]=o[y];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function Zt(i){return i=i.childContextTypes,i!=null}function zl(){Xe(Jt),Xe(Lt)}function $p(i,o,u){if(Lt.current!==Qr)throw Error(t(168));$e(Lt,o),$e(Jt,u)}function Up(i,o,u){var f=i.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(t(108,ce(i)||"Unknown",g));return J({},u,f)}function Fl(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Qr,ki=Lt.current,$e(Lt,i),$e(Jt,Jt.current),!0}function Xp(i,o,u){var f=i.stateNode;if(!f)throw Error(t(169));u?(i=Up(i,o,ki),f.__reactInternalMemoizedMergedChildContext=i,Xe(Jt),Xe(Lt),$e(Lt,i)):Xe(Jt),$e(Jt,u)}var xr=null,_l=!1,kc=!1;function Kp(i){xr===null?xr=[i]:xr.push(i)}function ek(i){_l=!0,Kp(i)}function $r(){if(!kc&&xr!==null){kc=!0;var i=0,o=He;try{var u=xr;for(He=1;i<u.length;i++){var f=u[i];do f=f(!0);while(f!==null)}xr=null,_l=!1}catch(g){throw xr!==null&&(xr=xr.slice(i+1)),Gd(Wu,$r),g}finally{He=o,kc=!1}}return null}var Zi=[],es=0,Hl=null,Vl=0,xn=[],vn=0,bi=null,vr=1,wr="";function Si(i,o){Zi[es++]=Vl,Zi[es++]=Hl,Hl=i,Vl=o}function qp(i,o,u){xn[vn++]=vr,xn[vn++]=wr,xn[vn++]=bi,bi=i;var f=vr;i=wr;var g=32-Dn(f)-1;f&=~(1<<g),u+=1;var y=32-Dn(o)+g;if(30<y){var k=g-g%5;y=(f&(1<<k)-1).toString(32),f>>=k,g-=k,vr=1<<32-Dn(o)+g|u<<g|f,wr=y+i}else vr=1<<y|u<<g|f,wr=i}function bc(i){i.return!==null&&(Si(i,1),qp(i,1,0))}function Sc(i){for(;i===Hl;)Hl=Zi[--es],Zi[es]=null,Vl=Zi[--es],Zi[es]=null;for(;i===bi;)bi=xn[--vn],xn[vn]=null,wr=xn[--vn],xn[vn]=null,vr=xn[--vn],xn[vn]=null}var cn=null,hn=null,Ye=!1,Ln=null;function Gp(i,o){var u=Sn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function Yp(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,cn=i,hn=Vr(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,cn=i,hn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=bi!==null?{id:vr,overflow:wr}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=Sn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,cn=i,hn=null,!0):!1;default:return!1}}function Cc(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Oc(i){if(Ye){var o=hn;if(o){var u=o;if(!Yp(i,o)){if(Cc(i))throw Error(t(418));o=Vr(u.nextSibling);var f=cn;o&&Yp(i,o)?Gp(f,u):(i.flags=i.flags&-4097|2,Ye=!1,cn=i)}}else{if(Cc(i))throw Error(t(418));i.flags=i.flags&-4097|2,Ye=!1,cn=i}}}function Jp(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;cn=i}function Wl(i){if(i!==cn)return!1;if(!Ye)return Jp(i),Ye=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!mc(i.type,i.memoizedProps)),o&&(o=hn)){if(Cc(i))throw Zp(),Error(t(418));for(;o;)Gp(i,o),o=Vr(o.nextSibling)}if(Jp(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){hn=Vr(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}hn=null}}else hn=cn?Vr(i.stateNode.nextSibling):null;return!0}function Zp(){for(var i=hn;i;)i=Vr(i.nextSibling)}function ts(){hn=cn=null,Ye=!1}function Pc(i){Ln===null?Ln=[i]:Ln.push(i)}var tk=I.ReactCurrentBatchConfig;function lo(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,i));var g=f,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(k){var P=g.refs;k===null?delete P[y]:P[y]=k},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Ql(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function eg(i){var o=i._init;return o(i._payload)}function tg(i){function o(z,D){if(i){var F=z.deletions;F===null?(z.deletions=[D],z.flags|=16):F.push(D)}}function u(z,D){if(!i)return null;for(;D!==null;)o(z,D),D=D.sibling;return null}function f(z,D){for(z=new Map;D!==null;)D.key!==null?z.set(D.key,D):z.set(D.index,D),D=D.sibling;return z}function g(z,D){return z=Zr(z,D),z.index=0,z.sibling=null,z}function y(z,D,F){return z.index=F,i?(F=z.alternate,F!==null?(F=F.index,F<D?(z.flags|=2,D):F):(z.flags|=2,D)):(z.flags|=1048576,D)}function k(z){return i&&z.alternate===null&&(z.flags|=2),z}function P(z,D,F,re){return D===null||D.tag!==6?(D=yh(F,z.mode,re),D.return=z,D):(D=g(D,F),D.return=z,D)}function M(z,D,F,re){var ve=F.type;return ve===j?Y(z,D,F.props.children,re,F.key):D!==null&&(D.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===G&&eg(ve)===D.type)?(re=g(D,F.props),re.ref=lo(z,D,F),re.return=z,re):(re=pa(F.type,F.key,F.props,null,z.mode,re),re.ref=lo(z,D,F),re.return=z,re)}function _(z,D,F,re){return D===null||D.tag!==4||D.stateNode.containerInfo!==F.containerInfo||D.stateNode.implementation!==F.implementation?(D=xh(F,z.mode,re),D.return=z,D):(D=g(D,F.children||[]),D.return=z,D)}function Y(z,D,F,re,ve){return D===null||D.tag!==7?(D=Ri(F,z.mode,re,ve),D.return=z,D):(D=g(D,F),D.return=z,D)}function te(z,D,F){if(typeof D=="string"&&D!==""||typeof D=="number")return D=yh(""+D,z.mode,F),D.return=z,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case R:return F=pa(D.type,D.key,D.props,null,z.mode,F),F.ref=lo(z,null,D),F.return=z,F;case L:return D=xh(D,z.mode,F),D.return=z,D;case G:var re=D._init;return te(z,re(D._payload),F)}if(Ge(D)||ee(D))return D=Ri(D,z.mode,F,null),D.return=z,D;Ql(z,D)}return null}function K(z,D,F,re){var ve=D!==null?D.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return ve!==null?null:P(z,D,""+F,re);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case R:return F.key===ve?M(z,D,F,re):null;case L:return F.key===ve?_(z,D,F,re):null;case G:return ve=F._init,K(z,D,ve(F._payload),re)}if(Ge(F)||ee(F))return ve!==null?null:Y(z,D,F,re,null);Ql(z,F)}return null}function de(z,D,F,re,ve){if(typeof re=="string"&&re!==""||typeof re=="number")return z=z.get(F)||null,P(D,z,""+re,ve);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case R:return z=z.get(re.key===null?F:re.key)||null,M(D,z,re,ve);case L:return z=z.get(re.key===null?F:re.key)||null,_(D,z,re,ve);case G:var Se=re._init;return de(z,D,F,Se(re._payload),ve)}if(Ge(re)||ee(re))return z=z.get(F)||null,Y(D,z,re,ve,null);Ql(D,re)}return null}function ye(z,D,F,re){for(var ve=null,Se=null,Ce=D,Ne=D=0,St=null;Ce!==null&&Ne<F.length;Ne++){Ce.index>Ne?(St=Ce,Ce=null):St=Ce.sibling;var Ie=K(z,Ce,F[Ne],re);if(Ie===null){Ce===null&&(Ce=St);break}i&&Ce&&Ie.alternate===null&&o(z,Ce),D=y(Ie,D,Ne),Se===null?ve=Ie:Se.sibling=Ie,Se=Ie,Ce=St}if(Ne===F.length)return u(z,Ce),Ye&&Si(z,Ne),ve;if(Ce===null){for(;Ne<F.length;Ne++)Ce=te(z,F[Ne],re),Ce!==null&&(D=y(Ce,D,Ne),Se===null?ve=Ce:Se.sibling=Ce,Se=Ce);return Ye&&Si(z,Ne),ve}for(Ce=f(z,Ce);Ne<F.length;Ne++)St=de(Ce,z,Ne,F[Ne],re),St!==null&&(i&&St.alternate!==null&&Ce.delete(St.key===null?Ne:St.key),D=y(St,D,Ne),Se===null?ve=St:Se.sibling=St,Se=St);return i&&Ce.forEach(function(ei){return o(z,ei)}),Ye&&Si(z,Ne),ve}function xe(z,D,F,re){var ve=ee(F);if(typeof ve!="function")throw Error(t(150));if(F=ve.call(F),F==null)throw Error(t(151));for(var Se=ve=null,Ce=D,Ne=D=0,St=null,Ie=F.next();Ce!==null&&!Ie.done;Ne++,Ie=F.next()){Ce.index>Ne?(St=Ce,Ce=null):St=Ce.sibling;var ei=K(z,Ce,Ie.value,re);if(ei===null){Ce===null&&(Ce=St);break}i&&Ce&&ei.alternate===null&&o(z,Ce),D=y(ei,D,Ne),Se===null?ve=ei:Se.sibling=ei,Se=ei,Ce=St}if(Ie.done)return u(z,Ce),Ye&&Si(z,Ne),ve;if(Ce===null){for(;!Ie.done;Ne++,Ie=F.next())Ie=te(z,Ie.value,re),Ie!==null&&(D=y(Ie,D,Ne),Se===null?ve=Ie:Se.sibling=Ie,Se=Ie);return Ye&&Si(z,Ne),ve}for(Ce=f(z,Ce);!Ie.done;Ne++,Ie=F.next())Ie=de(Ce,z,Ne,Ie.value,re),Ie!==null&&(i&&Ie.alternate!==null&&Ce.delete(Ie.key===null?Ne:Ie.key),D=y(Ie,D,Ne),Se===null?ve=Ie:Se.sibling=Ie,Se=Ie);return i&&Ce.forEach(function(jk){return o(z,jk)}),Ye&&Si(z,Ne),ve}function at(z,D,F,re){if(typeof F=="object"&&F!==null&&F.type===j&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case R:e:{for(var ve=F.key,Se=D;Se!==null;){if(Se.key===ve){if(ve=F.type,ve===j){if(Se.tag===7){u(z,Se.sibling),D=g(Se,F.props.children),D.return=z,z=D;break e}}else if(Se.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===G&&eg(ve)===Se.type){u(z,Se.sibling),D=g(Se,F.props),D.ref=lo(z,Se,F),D.return=z,z=D;break e}u(z,Se);break}else o(z,Se);Se=Se.sibling}F.type===j?(D=Ri(F.props.children,z.mode,re,F.key),D.return=z,z=D):(re=pa(F.type,F.key,F.props,null,z.mode,re),re.ref=lo(z,D,F),re.return=z,z=re)}return k(z);case L:e:{for(Se=F.key;D!==null;){if(D.key===Se)if(D.tag===4&&D.stateNode.containerInfo===F.containerInfo&&D.stateNode.implementation===F.implementation){u(z,D.sibling),D=g(D,F.children||[]),D.return=z,z=D;break e}else{u(z,D);break}else o(z,D);D=D.sibling}D=xh(F,z.mode,re),D.return=z,z=D}return k(z);case G:return Se=F._init,at(z,D,Se(F._payload),re)}if(Ge(F))return ye(z,D,F,re);if(ee(F))return xe(z,D,F,re);Ql(z,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,D!==null&&D.tag===6?(u(z,D.sibling),D=g(D,F),D.return=z,z=D):(u(z,D),D=yh(F,z.mode,re),D.return=z,z=D),k(z)):u(z,D)}return at}var ns=tg(!0),ng=tg(!1),$l=Wr(null),Ul=null,rs=null,Nc=null;function Ac(){Nc=rs=Ul=null}function Ec(i){var o=$l.current;Xe($l),i._currentValue=o}function Mc(i,o,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===u)break;i=i.return}}function is(i,o){Ul=i,Nc=rs=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(en=!0),i.firstContext=null)}function wn(i){var o=i._currentValue;if(Nc!==i)if(i={context:i,memoizedValue:o,next:null},rs===null){if(Ul===null)throw Error(t(308));rs=i,Ul.dependencies={lanes:0,firstContext:i}}else rs=rs.next=i;return o}var Ci=null;function Rc(i){Ci===null?Ci=[i]:Ci.push(i)}function rg(i,o,u,f){var g=o.interleaved;return g===null?(u.next=u,Rc(o)):(u.next=g.next,g.next=u),o.interleaved=u,kr(i,f)}function kr(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Ur=!1;function Tc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ig(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function br(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Xr(i,o,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(je&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,kr(i,u)}return g=f.interleaved,g===null?(o.next=o,Rc(f)):(o.next=g.next,g.next=o),f.interleaved=o,kr(i,u)}function Xl(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,Uu(i,u)}}function sg(i,o){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var k={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?g=y=k:y=y.next=k,u=u.next}while(u!==null);y===null?g=y=o:y=y.next=o}else g=y=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,effects:f.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function Kl(i,o,u,f){var g=i.updateQueue;Ur=!1;var y=g.firstBaseUpdate,k=g.lastBaseUpdate,P=g.shared.pending;if(P!==null){g.shared.pending=null;var M=P,_=M.next;M.next=null,k===null?y=_:k.next=_,k=M;var Y=i.alternate;Y!==null&&(Y=Y.updateQueue,P=Y.lastBaseUpdate,P!==k&&(P===null?Y.firstBaseUpdate=_:P.next=_,Y.lastBaseUpdate=M))}if(y!==null){var te=g.baseState;k=0,Y=_=M=null,P=y;do{var K=P.lane,de=P.eventTime;if((f&K)===K){Y!==null&&(Y=Y.next={eventTime:de,lane:0,tag:P.tag,payload:P.payload,callback:P.callback,next:null});e:{var ye=i,xe=P;switch(K=o,de=u,xe.tag){case 1:if(ye=xe.payload,typeof ye=="function"){te=ye.call(de,te,K);break e}te=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=xe.payload,K=typeof ye=="function"?ye.call(de,te,K):ye,K==null)break e;te=J({},te,K);break e;case 2:Ur=!0}}P.callback!==null&&P.lane!==0&&(i.flags|=64,K=g.effects,K===null?g.effects=[P]:K.push(P))}else de={eventTime:de,lane:K,tag:P.tag,payload:P.payload,callback:P.callback,next:null},Y===null?(_=Y=de,M=te):Y=Y.next=de,k|=K;if(P=P.next,P===null){if(P=g.shared.pending,P===null)break;K=P,P=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);if(Y===null&&(M=te),g.baseState=M,g.firstBaseUpdate=_,g.lastBaseUpdate=Y,o=g.shared.interleaved,o!==null){g=o;do k|=g.lane,g=g.next;while(g!==o)}else y===null&&(g.shared.lanes=0);Ni|=k,i.lanes=k,i.memoizedState=te}}function og(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var f=i[o],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var ao={},Yn=Wr(ao),uo=Wr(ao),co=Wr(ao);function Oi(i){if(i===ao)throw Error(t(174));return i}function Dc(i,o){switch($e(co,o),$e(uo,i),$e(Yn,ao),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:ln(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=ln(o,i)}Xe(Yn),$e(Yn,o)}function ss(){Xe(Yn),Xe(uo),Xe(co)}function lg(i){Oi(co.current);var o=Oi(Yn.current),u=ln(o,i.type);o!==u&&($e(uo,i),$e(Yn,u))}function jc(i){uo.current===i&&(Xe(Yn),Xe(uo))}var nt=Wr(0);function ql(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Lc=[];function Ic(){for(var i=0;i<Lc.length;i++)Lc[i]._workInProgressVersionPrimary=null;Lc.length=0}var Gl=I.ReactCurrentDispatcher,Bc=I.ReactCurrentBatchConfig,Pi=0,rt=null,mt=null,kt=null,Yl=!1,ho=!1,fo=0,nk=0;function It(){throw Error(t(321))}function zc(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!jn(i[u],o[u]))return!1;return!0}function Fc(i,o,u,f,g,y){if(Pi=y,rt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Gl.current=i===null||i.memoizedState===null?ok:lk,i=u(f,g),ho){y=0;do{if(ho=!1,fo=0,25<=y)throw Error(t(301));y+=1,kt=mt=null,o.updateQueue=null,Gl.current=ak,i=u(f,g)}while(ho)}if(Gl.current=ea,o=mt!==null&&mt.next!==null,Pi=0,kt=mt=rt=null,Yl=!1,o)throw Error(t(300));return i}function _c(){var i=fo!==0;return fo=0,i}function Jn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return kt===null?rt.memoizedState=kt=i:kt=kt.next=i,kt}function kn(){if(mt===null){var i=rt.alternate;i=i!==null?i.memoizedState:null}else i=mt.next;var o=kt===null?rt.memoizedState:kt.next;if(o!==null)kt=o,mt=i;else{if(i===null)throw Error(t(310));mt=i,i={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},kt===null?rt.memoizedState=kt=i:kt=kt.next=i}return kt}function po(i,o){return typeof o=="function"?o(i):o}function Hc(i){var o=kn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=mt,g=f.baseQueue,y=u.pending;if(y!==null){if(g!==null){var k=g.next;g.next=y.next,y.next=k}f.baseQueue=g=y,u.pending=null}if(g!==null){y=g.next,f=f.baseState;var P=k=null,M=null,_=y;do{var Y=_.lane;if((Pi&Y)===Y)M!==null&&(M=M.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),f=_.hasEagerState?_.eagerState:i(f,_.action);else{var te={lane:Y,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};M===null?(P=M=te,k=f):M=M.next=te,rt.lanes|=Y,Ni|=Y}_=_.next}while(_!==null&&_!==y);M===null?k=f:M.next=P,jn(f,o.memoizedState)||(en=!0),o.memoizedState=f,o.baseState=k,o.baseQueue=M,u.lastRenderedState=f}if(i=u.interleaved,i!==null){g=i;do y=g.lane,rt.lanes|=y,Ni|=y,g=g.next;while(g!==i)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Vc(i){var o=kn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=u.dispatch,g=u.pending,y=o.memoizedState;if(g!==null){u.pending=null;var k=g=g.next;do y=i(y,k.action),k=k.next;while(k!==g);jn(y,o.memoizedState)||(en=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,f]}function ag(){}function ug(i,o){var u=rt,f=kn(),g=o(),y=!jn(f.memoizedState,g);if(y&&(f.memoizedState=g,en=!0),f=f.queue,Wc(fg.bind(null,u,f,i),[i]),f.getSnapshot!==o||y||kt!==null&&kt.memoizedState.tag&1){if(u.flags|=2048,go(9,hg.bind(null,u,f,g,o),void 0,null),bt===null)throw Error(t(349));(Pi&30)!==0||cg(u,o,g)}return g}function cg(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=rt.updateQueue,o===null?(o={lastEffect:null,stores:null},rt.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function hg(i,o,u,f){o.value=u,o.getSnapshot=f,dg(o)&&pg(i)}function fg(i,o,u){return u(function(){dg(o)&&pg(i)})}function dg(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!jn(i,u)}catch{return!0}}function pg(i){var o=kr(i,1);o!==null&&Fn(o,i,1,-1)}function gg(i){var o=Jn();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:po,lastRenderedState:i},o.queue=i,i=i.dispatch=sk.bind(null,rt,i),[o.memoizedState,i]}function go(i,o,u,f){return i={tag:i,create:o,destroy:u,deps:f,next:null},o=rt.updateQueue,o===null?(o={lastEffect:null,stores:null},rt.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,o.lastEffect=i)),i}function mg(){return kn().memoizedState}function Jl(i,o,u,f){var g=Jn();rt.flags|=i,g.memoizedState=go(1|o,u,void 0,f===void 0?null:f)}function Zl(i,o,u,f){var g=kn();f=f===void 0?null:f;var y=void 0;if(mt!==null){var k=mt.memoizedState;if(y=k.destroy,f!==null&&zc(f,k.deps)){g.memoizedState=go(o,u,y,f);return}}rt.flags|=i,g.memoizedState=go(1|o,u,y,f)}function yg(i,o){return Jl(8390656,8,i,o)}function Wc(i,o){return Zl(2048,8,i,o)}function xg(i,o){return Zl(4,2,i,o)}function vg(i,o){return Zl(4,4,i,o)}function wg(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function kg(i,o,u){return u=u!=null?u.concat([i]):null,Zl(4,4,wg.bind(null,o,i),u)}function Qc(){}function bg(i,o){var u=kn();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&zc(o,f[1])?f[0]:(u.memoizedState=[i,o],i)}function Sg(i,o){var u=kn();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&zc(o,f[1])?f[0]:(i=i(),u.memoizedState=[i,o],i)}function Cg(i,o,u){return(Pi&21)===0?(i.baseState&&(i.baseState=!1,en=!0),i.memoizedState=u):(jn(u,o)||(u=ep(),rt.lanes|=u,Ni|=u,i.baseState=!0),o)}function rk(i,o){var u=He;He=u!==0&&4>u?u:4,i(!0);var f=Bc.transition;Bc.transition={};try{i(!1),o()}finally{He=u,Bc.transition=f}}function Og(){return kn().memoizedState}function ik(i,o,u){var f=Yr(i);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Pg(i))Ng(o,u);else if(u=rg(i,o,u,f),u!==null){var g=$t();Fn(u,i,f,g),Ag(u,o,f)}}function sk(i,o,u){var f=Yr(i),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Pg(i))Ng(o,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var k=o.lastRenderedState,P=y(k,u);if(g.hasEagerState=!0,g.eagerState=P,jn(P,k)){var M=o.interleaved;M===null?(g.next=g,Rc(o)):(g.next=M.next,M.next=g),o.interleaved=g;return}}catch{}finally{}u=rg(i,o,g,f),u!==null&&(g=$t(),Fn(u,i,f,g),Ag(u,o,f))}}function Pg(i){var o=i.alternate;return i===rt||o!==null&&o===rt}function Ng(i,o){ho=Yl=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Ag(i,o,u){if((u&4194240)!==0){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,Uu(i,u)}}var ea={readContext:wn,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},ok={readContext:wn,useCallback:function(i,o){return Jn().memoizedState=[i,o===void 0?null:o],i},useContext:wn,useEffect:yg,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Jl(4194308,4,wg.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Jl(4194308,4,i,o)},useInsertionEffect:function(i,o){return Jl(4,2,i,o)},useMemo:function(i,o){var u=Jn();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var f=Jn();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},f.queue=i,i=i.dispatch=ik.bind(null,rt,i),[f.memoizedState,i]},useRef:function(i){var o=Jn();return i={current:i},o.memoizedState=i},useState:gg,useDebugValue:Qc,useDeferredValue:function(i){return Jn().memoizedState=i},useTransition:function(){var i=gg(!1),o=i[0];return i=rk.bind(null,i[1]),Jn().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var f=rt,g=Jn();if(Ye){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),bt===null)throw Error(t(349));(Pi&30)!==0||cg(f,o,u)}g.memoizedState=u;var y={value:u,getSnapshot:o};return g.queue=y,yg(fg.bind(null,f,y,i),[i]),f.flags|=2048,go(9,hg.bind(null,f,y,u,o),void 0,null),u},useId:function(){var i=Jn(),o=bt.identifierPrefix;if(Ye){var u=wr,f=vr;u=(f&~(1<<32-Dn(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=fo++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=nk++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},lk={readContext:wn,useCallback:bg,useContext:wn,useEffect:Wc,useImperativeHandle:kg,useInsertionEffect:xg,useLayoutEffect:vg,useMemo:Sg,useReducer:Hc,useRef:mg,useState:function(){return Hc(po)},useDebugValue:Qc,useDeferredValue:function(i){var o=kn();return Cg(o,mt.memoizedState,i)},useTransition:function(){var i=Hc(po)[0],o=kn().memoizedState;return[i,o]},useMutableSource:ag,useSyncExternalStore:ug,useId:Og,unstable_isNewReconciler:!1},ak={readContext:wn,useCallback:bg,useContext:wn,useEffect:Wc,useImperativeHandle:kg,useInsertionEffect:xg,useLayoutEffect:vg,useMemo:Sg,useReducer:Vc,useRef:mg,useState:function(){return Vc(po)},useDebugValue:Qc,useDeferredValue:function(i){var o=kn();return mt===null?o.memoizedState=i:Cg(o,mt.memoizedState,i)},useTransition:function(){var i=Vc(po)[0],o=kn().memoizedState;return[i,o]},useMutableSource:ag,useSyncExternalStore:ug,useId:Og,unstable_isNewReconciler:!1};function In(i,o){if(i&&i.defaultProps){o=J({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function $c(i,o,u,f){o=i.memoizedState,u=u(f,o),u=u==null?o:J({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var ta={isMounted:function(i){return(i=i._reactInternals)?vi(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var f=$t(),g=Yr(i),y=br(f,g);y.payload=o,u!=null&&(y.callback=u),o=Xr(i,y,g),o!==null&&(Fn(o,i,g,f),Xl(o,i,g))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var f=$t(),g=Yr(i),y=br(f,g);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=Xr(i,y,g),o!==null&&(Fn(o,i,g,f),Xl(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=$t(),f=Yr(i),g=br(u,f);g.tag=2,o!=null&&(g.callback=o),o=Xr(i,g,f),o!==null&&(Fn(o,i,f,u),Xl(o,i,f))}};function Eg(i,o,u,f,g,y,k){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,y,k):o.prototype&&o.prototype.isPureReactComponent?!eo(u,f)||!eo(g,y):!0}function Mg(i,o,u){var f=!1,g=Qr,y=o.contextType;return typeof y=="object"&&y!==null?y=wn(y):(g=Zt(o)?ki:Lt.current,f=o.contextTypes,y=(f=f!=null)?Ji(i,g):Qr),o=new o(u,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=ta,i.stateNode=o,o._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=y),o}function Rg(i,o,u,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==i&&ta.enqueueReplaceState(o,o.state,null)}function Uc(i,o,u,f){var g=i.stateNode;g.props=u,g.state=i.memoizedState,g.refs={},Tc(i);var y=o.contextType;typeof y=="object"&&y!==null?g.context=wn(y):(y=Zt(o)?ki:Lt.current,g.context=Ji(i,y)),g.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&($c(i,o,y,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&ta.enqueueReplaceState(g,g.state,null),Kl(i,u,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function os(i,o){try{var u="",f=o;do u+=me(f),f=f.return;while(f);var g=u}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:g,digest:null}}function Xc(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Kc(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var uk=typeof WeakMap=="function"?WeakMap:Map;function Tg(i,o,u){u=br(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){aa||(aa=!0,uh=f),Kc(i,o)},u}function Dg(i,o,u){u=br(-1,u),u.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;u.payload=function(){return f(g)},u.callback=function(){Kc(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){Kc(i,o),typeof f!="function"&&(qr===null?qr=new Set([this]):qr.add(this));var k=o.stack;this.componentDidCatch(o.value,{componentStack:k!==null?k:""})}),u}function jg(i,o,u){var f=i.pingCache;if(f===null){f=i.pingCache=new uk;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(g.add(u),i=Sk.bind(null,i,o,u),o.then(i,i))}function Lg(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Ig(i,o,u,f,g){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=br(-1,1),o.tag=2,Xr(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var ck=I.ReactCurrentOwner,en=!1;function Qt(i,o,u,f){o.child=i===null?ng(o,null,u,f):ns(o,i.child,u,f)}function Bg(i,o,u,f,g){u=u.render;var y=o.ref;return is(o,g),f=Fc(i,o,u,f,y,g),u=_c(),i!==null&&!en?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Sr(i,o,g)):(Ye&&u&&bc(o),o.flags|=1,Qt(i,o,f,g),o.child)}function zg(i,o,u,f,g){if(i===null){var y=u.type;return typeof y=="function"&&!mh(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=y,Fg(i,o,y,f,g)):(i=pa(u.type,null,f,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&g)===0){var k=y.memoizedProps;if(u=u.compare,u=u!==null?u:eo,u(k,f)&&i.ref===o.ref)return Sr(i,o,g)}return o.flags|=1,i=Zr(y,f),i.ref=o.ref,i.return=o,o.child=i}function Fg(i,o,u,f,g){if(i!==null){var y=i.memoizedProps;if(eo(y,f)&&i.ref===o.ref)if(en=!1,o.pendingProps=f=y,(i.lanes&g)!==0)(i.flags&131072)!==0&&(en=!0);else return o.lanes=i.lanes,Sr(i,o,g)}return qc(i,o,u,f,g)}function _g(i,o,u){var f=o.pendingProps,g=f.children,y=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},$e(as,fn),fn|=u;else{if((u&1073741824)===0)return i=y!==null?y.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,$e(as,fn),fn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=y!==null?y.baseLanes:u,$e(as,fn),fn|=f}else y!==null?(f=y.baseLanes|u,o.memoizedState=null):f=u,$e(as,fn),fn|=f;return Qt(i,o,g,u),o.child}function Hg(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function qc(i,o,u,f,g){var y=Zt(u)?ki:Lt.current;return y=Ji(o,y),is(o,g),u=Fc(i,o,u,f,y,g),f=_c(),i!==null&&!en?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Sr(i,o,g)):(Ye&&f&&bc(o),o.flags|=1,Qt(i,o,u,g),o.child)}function Vg(i,o,u,f,g){if(Zt(u)){var y=!0;Fl(o)}else y=!1;if(is(o,g),o.stateNode===null)ra(i,o),Mg(o,u,f),Uc(o,u,f,g),f=!0;else if(i===null){var k=o.stateNode,P=o.memoizedProps;k.props=P;var M=k.context,_=u.contextType;typeof _=="object"&&_!==null?_=wn(_):(_=Zt(u)?ki:Lt.current,_=Ji(o,_));var Y=u.getDerivedStateFromProps,te=typeof Y=="function"||typeof k.getSnapshotBeforeUpdate=="function";te||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(P!==f||M!==_)&&Rg(o,k,f,_),Ur=!1;var K=o.memoizedState;k.state=K,Kl(o,f,k,g),M=o.memoizedState,P!==f||K!==M||Jt.current||Ur?(typeof Y=="function"&&($c(o,u,Y,f),M=o.memoizedState),(P=Ur||Eg(o,u,P,f,K,M,_))?(te||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(o.flags|=4194308)):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=M),k.props=f,k.state=M,k.context=_,f=P):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{k=o.stateNode,ig(i,o),P=o.memoizedProps,_=o.type===o.elementType?P:In(o.type,P),k.props=_,te=o.pendingProps,K=k.context,M=u.contextType,typeof M=="object"&&M!==null?M=wn(M):(M=Zt(u)?ki:Lt.current,M=Ji(o,M));var de=u.getDerivedStateFromProps;(Y=typeof de=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(P!==te||K!==M)&&Rg(o,k,f,M),Ur=!1,K=o.memoizedState,k.state=K,Kl(o,f,k,g);var ye=o.memoizedState;P!==te||K!==ye||Jt.current||Ur?(typeof de=="function"&&($c(o,u,de,f),ye=o.memoizedState),(_=Ur||Eg(o,u,_,f,K,ye,M)||!1)?(Y||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,ye,M),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,ye,M)),typeof k.componentDidUpdate=="function"&&(o.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof k.componentDidUpdate!="function"||P===i.memoizedProps&&K===i.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&K===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ye),k.props=f,k.state=ye,k.context=M,f=_):(typeof k.componentDidUpdate!="function"||P===i.memoizedProps&&K===i.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||P===i.memoizedProps&&K===i.memoizedState||(o.flags|=1024),f=!1)}return Gc(i,o,u,f,y,g)}function Gc(i,o,u,f,g,y){Hg(i,o);var k=(o.flags&128)!==0;if(!f&&!k)return g&&Xp(o,u,!1),Sr(i,o,y);f=o.stateNode,ck.current=o;var P=k&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,i!==null&&k?(o.child=ns(o,i.child,null,y),o.child=ns(o,null,P,y)):Qt(i,o,P,y),o.memoizedState=f.state,g&&Xp(o,u,!0),o.child}function Wg(i){var o=i.stateNode;o.pendingContext?$p(i,o.pendingContext,o.pendingContext!==o.context):o.context&&$p(i,o.context,!1),Dc(i,o.containerInfo)}function Qg(i,o,u,f,g){return ts(),Pc(g),o.flags|=256,Qt(i,o,u,f),o.child}var Yc={dehydrated:null,treeContext:null,retryLane:0};function Jc(i){return{baseLanes:i,cachePool:null,transitions:null}}function $g(i,o,u){var f=o.pendingProps,g=nt.current,y=!1,k=(o.flags&128)!==0,P;if((P=k)||(P=i!==null&&i.memoizedState===null?!1:(g&2)!==0),P?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),$e(nt,g&1),i===null)return Oc(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(k=f.children,i=f.fallback,y?(f=o.mode,y=o.child,k={mode:"hidden",children:k},(f&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=k):y=ga(k,f,0,null),i=Ri(i,f,u,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Jc(u),o.memoizedState=Yc,i):Zc(o,k));if(g=i.memoizedState,g!==null&&(P=g.dehydrated,P!==null))return hk(i,o,k,f,P,g,u);if(y){y=f.fallback,k=o.mode,g=i.child,P=g.sibling;var M={mode:"hidden",children:f.children};return(k&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=M,o.deletions=null):(f=Zr(g,M),f.subtreeFlags=g.subtreeFlags&14680064),P!==null?y=Zr(P,y):(y=Ri(y,k,u,null),y.flags|=2),y.return=o,f.return=o,f.sibling=y,o.child=f,f=y,y=o.child,k=i.child.memoizedState,k=k===null?Jc(u):{baseLanes:k.baseLanes|u,cachePool:null,transitions:k.transitions},y.memoizedState=k,y.childLanes=i.childLanes&~u,o.memoizedState=Yc,f}return y=i.child,i=y.sibling,f=Zr(y,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=u),f.return=o,f.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=f,o.memoizedState=null,f}function Zc(i,o){return o=ga({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function na(i,o,u,f){return f!==null&&Pc(f),ns(o,i.child,null,u),i=Zc(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function hk(i,o,u,f,g,y,k){if(u)return o.flags&256?(o.flags&=-257,f=Xc(Error(t(422))),na(i,o,k,f)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=f.fallback,g=o.mode,f=ga({mode:"visible",children:f.children},g,0,null),y=Ri(y,g,k,null),y.flags|=2,f.return=o,y.return=o,f.sibling=y,o.child=f,(o.mode&1)!==0&&ns(o,i.child,null,k),o.child.memoizedState=Jc(k),o.memoizedState=Yc,y);if((o.mode&1)===0)return na(i,o,k,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var P=f.dgst;return f=P,y=Error(t(419)),f=Xc(y,f,void 0),na(i,o,k,f)}if(P=(k&i.childLanes)!==0,en||P){if(f=bt,f!==null){switch(k&-k){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|k))!==0?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,kr(i,g),Fn(f,i,g,-1))}return gh(),f=Xc(Error(t(421))),na(i,o,k,f)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=Ck.bind(null,i),g._reactRetry=o,null):(i=y.treeContext,hn=Vr(g.nextSibling),cn=o,Ye=!0,Ln=null,i!==null&&(xn[vn++]=vr,xn[vn++]=wr,xn[vn++]=bi,vr=i.id,wr=i.overflow,bi=o),o=Zc(o,f.children),o.flags|=4096,o)}function Ug(i,o,u){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),Mc(i.return,o,u)}function eh(i,o,u,f,g){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=u,y.tailMode=g)}function Xg(i,o,u){var f=o.pendingProps,g=f.revealOrder,y=f.tail;if(Qt(i,o,f.children,u),f=nt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ug(i,u,o);else if(i.tag===19)Ug(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if($e(nt,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)i=u.alternate,i!==null&&ql(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),eh(o,!1,g,u,y);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&ql(i)===null){o.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}eh(o,!0,u,null,y);break;case"together":eh(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ra(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Sr(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Ni|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=Zr(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Zr(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function fk(i,o,u){switch(o.tag){case 3:Wg(o),ts();break;case 5:lg(o);break;case 1:Zt(o.type)&&Fl(o);break;case 4:Dc(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;$e($l,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?($e(nt,nt.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?$g(i,o,u):($e(nt,nt.current&1),i=Sr(i,o,u),i!==null?i.sibling:null);$e(nt,nt.current&1);break;case 19:if(f=(u&o.childLanes)!==0,(i.flags&128)!==0){if(f)return Xg(i,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),$e(nt,nt.current),f)break;return null;case 22:case 23:return o.lanes=0,_g(i,o,u)}return Sr(i,o,u)}var Kg,th,qg,Gg;Kg=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},th=function(){},qg=function(i,o,u,f){var g=i.memoizedProps;if(g!==f){i=o.stateNode,Oi(Yn.current);var y=null;switch(u){case"input":g=qe(i,g),f=qe(i,f),y=[];break;case"select":g=J({},g,{value:void 0}),f=J({},f,{value:void 0}),y=[];break;case"textarea":g=Gt(i,g),f=Gt(i,f),y=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Il)}fr(u,f);var k;u=null;for(_ in g)if(!f.hasOwnProperty(_)&&g.hasOwnProperty(_)&&g[_]!=null)if(_==="style"){var P=g[_];for(k in P)P.hasOwnProperty(k)&&(u||(u={}),u[k]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?y||(y=[]):(y=y||[]).push(_,null));for(_ in f){var M=f[_];if(P=g!=null?g[_]:void 0,f.hasOwnProperty(_)&&M!==P&&(M!=null||P!=null))if(_==="style")if(P){for(k in P)!P.hasOwnProperty(k)||M&&M.hasOwnProperty(k)||(u||(u={}),u[k]="");for(k in M)M.hasOwnProperty(k)&&P[k]!==M[k]&&(u||(u={}),u[k]=M[k])}else u||(y||(y=[]),y.push(_,u)),u=M;else _==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,P=P?P.__html:void 0,M!=null&&P!==M&&(y=y||[]).push(_,M)):_==="children"?typeof M!="string"&&typeof M!="number"||(y=y||[]).push(_,""+M):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(s.hasOwnProperty(_)?(M!=null&&_==="onScroll"&&Ue("scroll",i),y||P===M||(y=[])):(y=y||[]).push(_,M))}u&&(y=y||[]).push("style",u);var _=y;(o.updateQueue=_)&&(o.flags|=4)}},Gg=function(i,o,u,f){u!==f&&(o.flags|=4)};function mo(i,o){if(!Ye)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Bt(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(o)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=u,o}function dk(i,o,u){var f=o.pendingProps;switch(Sc(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(o),null;case 1:return Zt(o.type)&&zl(),Bt(o),null;case 3:return f=o.stateNode,ss(),Xe(Jt),Xe(Lt),Ic(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Wl(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Ln!==null&&(fh(Ln),Ln=null))),th(i,o),Bt(o),null;case 5:jc(o);var g=Oi(co.current);if(u=o.type,i!==null&&o.stateNode!=null)qg(i,o,u,f,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return Bt(o),null}if(i=Oi(Yn.current),Wl(o)){f=o.stateNode,u=o.type;var y=o.memoizedProps;switch(f[Gn]=o,f[so]=y,i=(o.mode&1)!==0,u){case"dialog":Ue("cancel",f),Ue("close",f);break;case"iframe":case"object":case"embed":Ue("load",f);break;case"video":case"audio":for(g=0;g<no.length;g++)Ue(no[g],f);break;case"source":Ue("error",f);break;case"img":case"image":case"link":Ue("error",f),Ue("load",f);break;case"details":Ue("toggle",f);break;case"input":fe(f,y),Ue("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!y.multiple},Ue("invalid",f);break;case"textarea":cr(f,y),Ue("invalid",f)}fr(u,y),g=null;for(var k in y)if(y.hasOwnProperty(k)){var P=y[k];k==="children"?typeof P=="string"?f.textContent!==P&&(y.suppressHydrationWarning!==!0&&Ll(f.textContent,P,i),g=["children",P]):typeof P=="number"&&f.textContent!==""+P&&(y.suppressHydrationWarning!==!0&&Ll(f.textContent,P,i),g=["children",""+P]):s.hasOwnProperty(k)&&P!=null&&k==="onScroll"&&Ue("scroll",f)}switch(u){case"input":Ee(f),En(f,y,!0);break;case"textarea":Ee(f),hr(f);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(f.onclick=Il)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{k=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=yi(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=k.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=k.createElement(u,{is:f.is}):(i=k.createElement(u),u==="select"&&(k=i,f.multiple?k.multiple=!0:f.size&&(k.size=f.size))):i=k.createElementNS(i,u),i[Gn]=o,i[so]=f,Kg(i,o,!1,!1),o.stateNode=i;e:{switch(k=dr(u,f),u){case"dialog":Ue("cancel",i),Ue("close",i),g=f;break;case"iframe":case"object":case"embed":Ue("load",i),g=f;break;case"video":case"audio":for(g=0;g<no.length;g++)Ue(no[g],i);g=f;break;case"source":Ue("error",i),g=f;break;case"img":case"image":case"link":Ue("error",i),Ue("load",i),g=f;break;case"details":Ue("toggle",i),g=f;break;case"input":fe(i,f),g=qe(i,f),Ue("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=J({},f,{value:void 0}),Ue("invalid",i);break;case"textarea":cr(i,f),g=Gt(i,f),Ue("invalid",i);break;default:g=f}fr(u,g),P=g;for(y in P)if(P.hasOwnProperty(y)){var M=P[y];y==="style"?xi(i,M):y==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&oe(i,M)):y==="children"?typeof M=="string"?(u!=="textarea"||M!=="")&&De(i,M):typeof M=="number"&&De(i,""+M):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?M!=null&&y==="onScroll"&&Ue("scroll",i):M!=null&&T(i,y,M,k))}switch(u){case"input":Ee(i),En(i,f,!1);break;case"textarea":Ee(i),hr(i);break;case"option":f.value!=null&&i.setAttribute("value",""+ke(f.value));break;case"select":i.multiple=!!f.multiple,y=f.value,y!=null?wt(i,!!f.multiple,y,!1):f.defaultValue!=null&&wt(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Il)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Bt(o),null;case 6:if(i&&o.stateNode!=null)Gg(i,o,i.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(u=Oi(co.current),Oi(Yn.current),Wl(o)){if(f=o.stateNode,u=o.memoizedProps,f[Gn]=o,(y=f.nodeValue!==u)&&(i=cn,i!==null))switch(i.tag){case 3:Ll(f.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Ll(f.nodeValue,u,(i.mode&1)!==0)}y&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Gn]=o,o.stateNode=f}return Bt(o),null;case 13:if(Xe(nt),f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ye&&hn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Zp(),ts(),o.flags|=98560,y=!1;else if(y=Wl(o),f!==null&&f.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Gn]=o}else ts(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Bt(o),y=!1}else Ln!==null&&(fh(Ln),Ln=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(nt.current&1)!==0?yt===0&&(yt=3):gh())),o.updateQueue!==null&&(o.flags|=4),Bt(o),null);case 4:return ss(),th(i,o),i===null&&ro(o.stateNode.containerInfo),Bt(o),null;case 10:return Ec(o.type._context),Bt(o),null;case 17:return Zt(o.type)&&zl(),Bt(o),null;case 19:if(Xe(nt),y=o.memoizedState,y===null)return Bt(o),null;if(f=(o.flags&128)!==0,k=y.rendering,k===null)if(f)mo(y,!1);else{if(yt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(k=ql(i),k!==null){for(o.flags|=128,mo(y,!1),f=k.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)y=u,i=f,y.flags&=14680066,k=y.alternate,k===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=k.childLanes,y.lanes=k.lanes,y.child=k.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=k.memoizedProps,y.memoizedState=k.memoizedState,y.updateQueue=k.updateQueue,y.type=k.type,i=k.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return $e(nt,nt.current&1|2),o.child}i=i.sibling}y.tail!==null&&lt()>us&&(o.flags|=128,f=!0,mo(y,!1),o.lanes=4194304)}else{if(!f)if(i=ql(k),i!==null){if(o.flags|=128,f=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),mo(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!Ye)return Bt(o),null}else 2*lt()-y.renderingStartTime>us&&u!==1073741824&&(o.flags|=128,f=!0,mo(y,!1),o.lanes=4194304);y.isBackwards?(k.sibling=o.child,o.child=k):(u=y.last,u!==null?u.sibling=k:o.child=k,y.last=k)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=lt(),o.sibling=null,u=nt.current,$e(nt,f?u&1|2:u&1),o):(Bt(o),null);case 22:case 23:return ph(),f=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(fn&1073741824)!==0&&(Bt(o),o.subtreeFlags&6&&(o.flags|=8192)):Bt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function pk(i,o){switch(Sc(o),o.tag){case 1:return Zt(o.type)&&zl(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ss(),Xe(Jt),Xe(Lt),Ic(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return jc(o),null;case 13:if(Xe(nt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ts()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Xe(nt),null;case 4:return ss(),null;case 10:return Ec(o.type._context),null;case 22:case 23:return ph(),null;case 24:return null;default:return null}}var ia=!1,zt=!1,gk=typeof WeakSet=="function"?WeakSet:Set,ge=null;function ls(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){it(i,o,f)}else u.current=null}function nh(i,o,u){try{u()}catch(f){it(i,o,f)}}var Yg=!1;function mk(i,o){if(pc=Cl,i=Ep(),oc(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var k=0,P=-1,M=-1,_=0,Y=0,te=i,K=null;t:for(;;){for(var de;te!==u||g!==0&&te.nodeType!==3||(P=k+g),te!==y||f!==0&&te.nodeType!==3||(M=k+f),te.nodeType===3&&(k+=te.nodeValue.length),(de=te.firstChild)!==null;)K=te,te=de;for(;;){if(te===i)break t;if(K===u&&++_===g&&(P=k),K===y&&++Y===f&&(M=k),(de=te.nextSibling)!==null)break;te=K,K=te.parentNode}te=de}u=P===-1||M===-1?null:{start:P,end:M}}else u=null}u=u||{start:0,end:0}}else u=null;for(gc={focusedElem:i,selectionRange:u},Cl=!1,ge=o;ge!==null;)if(o=ge,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ge=i;else for(;ge!==null;){o=ge;try{var ye=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ye!==null){var xe=ye.memoizedProps,at=ye.memoizedState,z=o.stateNode,D=z.getSnapshotBeforeUpdate(o.elementType===o.type?xe:In(o.type,xe),at);z.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var F=o.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){it(o,o.return,re)}if(i=o.sibling,i!==null){i.return=o.return,ge=i;break}ge=o.return}return ye=Yg,Yg=!1,ye}function yo(i,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var y=g.destroy;g.destroy=void 0,y!==void 0&&nh(o,u,y)}g=g.next}while(g!==f)}}function sa(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function rh(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function Jg(i){var o=i.alternate;o!==null&&(i.alternate=null,Jg(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Gn],delete o[so],delete o[vc],delete o[Jw],delete o[Zw])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Zg(i){return i.tag===5||i.tag===3||i.tag===4}function em(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Zg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ih(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Il));else if(f!==4&&(i=i.child,i!==null))for(ih(i,o,u),i=i.sibling;i!==null;)ih(i,o,u),i=i.sibling}function sh(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(sh(i,o,u),i=i.sibling;i!==null;)sh(i,o,u),i=i.sibling}var Nt=null,Bn=!1;function Kr(i,o,u){for(u=u.child;u!==null;)tm(i,o,u),u=u.sibling}function tm(i,o,u){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(xl,u)}catch{}switch(u.tag){case 5:zt||ls(u,o);case 6:var f=Nt,g=Bn;Nt=null,Kr(i,o,u),Nt=f,Bn=g,Nt!==null&&(Bn?(i=Nt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):Nt.removeChild(u.stateNode));break;case 18:Nt!==null&&(Bn?(i=Nt,u=u.stateNode,i.nodeType===8?xc(i.parentNode,u):i.nodeType===1&&xc(i,u),Ks(i)):xc(Nt,u.stateNode));break;case 4:f=Nt,g=Bn,Nt=u.stateNode.containerInfo,Bn=!0,Kr(i,o,u),Nt=f,Bn=g;break;case 0:case 11:case 14:case 15:if(!zt&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var y=g,k=y.destroy;y=y.tag,k!==void 0&&((y&2)!==0||(y&4)!==0)&&nh(u,o,k),g=g.next}while(g!==f)}Kr(i,o,u);break;case 1:if(!zt&&(ls(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(P){it(u,o,P)}Kr(i,o,u);break;case 21:Kr(i,o,u);break;case 22:u.mode&1?(zt=(f=zt)||u.memoizedState!==null,Kr(i,o,u),zt=f):Kr(i,o,u);break;default:Kr(i,o,u)}}function nm(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new gk),o.forEach(function(f){var g=Ok.bind(null,i,f);u.has(f)||(u.add(f),f.then(g,g))})}}function zn(i,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var y=i,k=o,P=k;e:for(;P!==null;){switch(P.tag){case 5:Nt=P.stateNode,Bn=!1;break e;case 3:Nt=P.stateNode.containerInfo,Bn=!0;break e;case 4:Nt=P.stateNode.containerInfo,Bn=!0;break e}P=P.return}if(Nt===null)throw Error(t(160));tm(y,k,g),Nt=null,Bn=!1;var M=g.alternate;M!==null&&(M.return=null),g.return=null}catch(_){it(g,o,_)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)rm(o,i),o=o.sibling}function rm(i,o){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(zn(o,i),Zn(i),f&4){try{yo(3,i,i.return),sa(3,i)}catch(xe){it(i,i.return,xe)}try{yo(5,i,i.return)}catch(xe){it(i,i.return,xe)}}break;case 1:zn(o,i),Zn(i),f&512&&u!==null&&ls(u,u.return);break;case 5:if(zn(o,i),Zn(i),f&512&&u!==null&&ls(u,u.return),i.flags&32){var g=i.stateNode;try{De(g,"")}catch(xe){it(i,i.return,xe)}}if(f&4&&(g=i.stateNode,g!=null)){var y=i.memoizedProps,k=u!==null?u.memoizedProps:y,P=i.type,M=i.updateQueue;if(i.updateQueue=null,M!==null)try{P==="input"&&y.type==="radio"&&y.name!=null&&Me(g,y),dr(P,k);var _=dr(P,y);for(k=0;k<M.length;k+=2){var Y=M[k],te=M[k+1];Y==="style"?xi(g,te):Y==="dangerouslySetInnerHTML"?oe(g,te):Y==="children"?De(g,te):T(g,Y,te,_)}switch(P){case"input":Je(g,y);break;case"textarea":mi(g,y);break;case"select":var K=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var de=y.value;de!=null?wt(g,!!y.multiple,de,!1):K!==!!y.multiple&&(y.defaultValue!=null?wt(g,!!y.multiple,y.defaultValue,!0):wt(g,!!y.multiple,y.multiple?[]:"",!1))}g[so]=y}catch(xe){it(i,i.return,xe)}}break;case 6:if(zn(o,i),Zn(i),f&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,y=i.memoizedProps;try{g.nodeValue=y}catch(xe){it(i,i.return,xe)}}break;case 3:if(zn(o,i),Zn(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Ks(o.containerInfo)}catch(xe){it(i,i.return,xe)}break;case 4:zn(o,i),Zn(i);break;case 13:zn(o,i),Zn(i),g=i.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(ah=lt())),f&4&&nm(i);break;case 22:if(Y=u!==null&&u.memoizedState!==null,i.mode&1?(zt=(_=zt)||Y,zn(o,i),zt=_):zn(o,i),Zn(i),f&8192){if(_=i.memoizedState!==null,(i.stateNode.isHidden=_)&&!Y&&(i.mode&1)!==0)for(ge=i,Y=i.child;Y!==null;){for(te=ge=Y;ge!==null;){switch(K=ge,de=K.child,K.tag){case 0:case 11:case 14:case 15:yo(4,K,K.return);break;case 1:ls(K,K.return);var ye=K.stateNode;if(typeof ye.componentWillUnmount=="function"){f=K,u=K.return;try{o=f,ye.props=o.memoizedProps,ye.state=o.memoizedState,ye.componentWillUnmount()}catch(xe){it(f,u,xe)}}break;case 5:ls(K,K.return);break;case 22:if(K.memoizedState!==null){om(te);continue}}de!==null?(de.return=K,ge=de):om(te)}Y=Y.sibling}e:for(Y=null,te=i;;){if(te.tag===5){if(Y===null){Y=te;try{g=te.stateNode,_?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(P=te.stateNode,M=te.memoizedProps.style,k=M!=null&&M.hasOwnProperty("display")?M.display:null,P.style.display=Xn("display",k))}catch(xe){it(i,i.return,xe)}}}else if(te.tag===6){if(Y===null)try{te.stateNode.nodeValue=_?"":te.memoizedProps}catch(xe){it(i,i.return,xe)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===i)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===i)break e;for(;te.sibling===null;){if(te.return===null||te.return===i)break e;Y===te&&(Y=null),te=te.return}Y===te&&(Y=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:zn(o,i),Zn(i),f&4&&nm(i);break;case 21:break;default:zn(o,i),Zn(i)}}function Zn(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(Zg(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(De(g,""),f.flags&=-33);var y=em(i);sh(i,y,g);break;case 3:case 4:var k=f.stateNode.containerInfo,P=em(i);ih(i,P,k);break;default:throw Error(t(161))}}catch(M){it(i,i.return,M)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function yk(i,o,u){ge=i,im(i)}function im(i,o,u){for(var f=(i.mode&1)!==0;ge!==null;){var g=ge,y=g.child;if(g.tag===22&&f){var k=g.memoizedState!==null||ia;if(!k){var P=g.alternate,M=P!==null&&P.memoizedState!==null||zt;P=ia;var _=zt;if(ia=k,(zt=M)&&!_)for(ge=g;ge!==null;)k=ge,M=k.child,k.tag===22&&k.memoizedState!==null?lm(g):M!==null?(M.return=k,ge=M):lm(g);for(;y!==null;)ge=y,im(y),y=y.sibling;ge=g,ia=P,zt=_}sm(i)}else(g.subtreeFlags&8772)!==0&&y!==null?(y.return=g,ge=y):sm(i)}}function sm(i){for(;ge!==null;){var o=ge;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:zt||sa(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!zt)if(u===null)f.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:In(o.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&og(o,y,f);break;case 3:var k=o.updateQueue;if(k!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}og(o,k,u)}break;case 5:var P=o.stateNode;if(u===null&&o.flags&4){u=P;var M=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&u.focus();break;case"img":M.src&&(u.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var _=o.alternate;if(_!==null){var Y=_.memoizedState;if(Y!==null){var te=Y.dehydrated;te!==null&&Ks(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||o.flags&512&&rh(o)}catch(K){it(o,o.return,K)}}if(o===i){ge=null;break}if(u=o.sibling,u!==null){u.return=o.return,ge=u;break}ge=o.return}}function om(i){for(;ge!==null;){var o=ge;if(o===i){ge=null;break}var u=o.sibling;if(u!==null){u.return=o.return,ge=u;break}ge=o.return}}function lm(i){for(;ge!==null;){var o=ge;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{sa(4,o)}catch(M){it(o,u,M)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(M){it(o,g,M)}}var y=o.return;try{rh(o)}catch(M){it(o,y,M)}break;case 5:var k=o.return;try{rh(o)}catch(M){it(o,k,M)}}}catch(M){it(o,o.return,M)}if(o===i){ge=null;break}var P=o.sibling;if(P!==null){P.return=o.return,ge=P;break}ge=o.return}}var xk=Math.ceil,oa=I.ReactCurrentDispatcher,oh=I.ReactCurrentOwner,bn=I.ReactCurrentBatchConfig,je=0,bt=null,dt=null,At=0,fn=0,as=Wr(0),yt=0,xo=null,Ni=0,la=0,lh=0,vo=null,tn=null,ah=0,us=1/0,Cr=null,aa=!1,uh=null,qr=null,ua=!1,Gr=null,ca=0,wo=0,ch=null,ha=-1,fa=0;function $t(){return(je&6)!==0?lt():ha!==-1?ha:ha=lt()}function Yr(i){return(i.mode&1)===0?1:(je&2)!==0&&At!==0?At&-At:tk.transition!==null?(fa===0&&(fa=ep()),fa):(i=He,i!==0||(i=window.event,i=i===void 0?16:up(i.type)),i)}function Fn(i,o,u,f){if(50<wo)throw wo=0,ch=null,Error(t(185));Ws(i,u,f),((je&2)===0||i!==bt)&&(i===bt&&((je&2)===0&&(la|=u),yt===4&&Jr(i,At)),nn(i,f),u===1&&je===0&&(o.mode&1)===0&&(us=lt()+500,_l&&$r()))}function nn(i,o){var u=i.callbackNode;tw(i,o);var f=kl(i,i===bt?At:0);if(f===0)u!==null&&Yd(u),i.callbackNode=null,i.callbackPriority=0;else if(o=f&-f,i.callbackPriority!==o){if(u!=null&&Yd(u),o===1)i.tag===0?ek(um.bind(null,i)):Kp(um.bind(null,i)),Gw(function(){(je&6)===0&&$r()}),u=null;else{switch(tp(f)){case 1:u=Wu;break;case 4:u=Jd;break;case 16:u=yl;break;case 536870912:u=Zd;break;default:u=yl}u=ym(u,am.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function am(i,o){if(ha=-1,fa=0,(je&6)!==0)throw Error(t(327));var u=i.callbackNode;if(cs()&&i.callbackNode!==u)return null;var f=kl(i,i===bt?At:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||o)o=da(i,f);else{o=f;var g=je;je|=2;var y=hm();(bt!==i||At!==o)&&(Cr=null,us=lt()+500,Ei(i,o));do try{kk();break}catch(P){cm(i,P)}while(!0);Ac(),oa.current=y,je=g,dt!==null?o=0:(bt=null,At=0,o=yt)}if(o!==0){if(o===2&&(g=Qu(i),g!==0&&(f=g,o=hh(i,g))),o===1)throw u=xo,Ei(i,0),Jr(i,f),nn(i,lt()),u;if(o===6)Jr(i,f);else{if(g=i.current.alternate,(f&30)===0&&!vk(g)&&(o=da(i,f),o===2&&(y=Qu(i),y!==0&&(f=y,o=hh(i,y))),o===1))throw u=xo,Ei(i,0),Jr(i,f),nn(i,lt()),u;switch(i.finishedWork=g,i.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:Mi(i,tn,Cr);break;case 3:if(Jr(i,f),(f&130023424)===f&&(o=ah+500-lt(),10<o)){if(kl(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){$t(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=yc(Mi.bind(null,i,tn,Cr),o);break}Mi(i,tn,Cr);break;case 4:if(Jr(i,f),(f&4194240)===f)break;for(o=i.eventTimes,g=-1;0<f;){var k=31-Dn(f);y=1<<k,k=o[k],k>g&&(g=k),f&=~y}if(f=g,f=lt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*xk(f/1960))-f,10<f){i.timeoutHandle=yc(Mi.bind(null,i,tn,Cr),f);break}Mi(i,tn,Cr);break;case 5:Mi(i,tn,Cr);break;default:throw Error(t(329))}}}return nn(i,lt()),i.callbackNode===u?am.bind(null,i):null}function hh(i,o){var u=vo;return i.current.memoizedState.isDehydrated&&(Ei(i,o).flags|=256),i=da(i,o),i!==2&&(o=tn,tn=u,o!==null&&fh(o)),i}function fh(i){tn===null?tn=i:tn.push.apply(tn,i)}function vk(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],y=g.getSnapshot;g=g.value;try{if(!jn(y(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Jr(i,o){for(o&=~lh,o&=~la,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-Dn(o),f=1<<u;i[u]=-1,o&=~f}}function um(i){if((je&6)!==0)throw Error(t(327));cs();var o=kl(i,0);if((o&1)===0)return nn(i,lt()),null;var u=da(i,o);if(i.tag!==0&&u===2){var f=Qu(i);f!==0&&(o=f,u=hh(i,f))}if(u===1)throw u=xo,Ei(i,0),Jr(i,o),nn(i,lt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Mi(i,tn,Cr),nn(i,lt()),null}function dh(i,o){var u=je;je|=1;try{return i(o)}finally{je=u,je===0&&(us=lt()+500,_l&&$r())}}function Ai(i){Gr!==null&&Gr.tag===0&&(je&6)===0&&cs();var o=je;je|=1;var u=bn.transition,f=He;try{if(bn.transition=null,He=1,i)return i()}finally{He=f,bn.transition=u,je=o,(je&6)===0&&$r()}}function ph(){fn=as.current,Xe(as)}function Ei(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,qw(u)),dt!==null)for(u=dt.return;u!==null;){var f=u;switch(Sc(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&zl();break;case 3:ss(),Xe(Jt),Xe(Lt),Ic();break;case 5:jc(f);break;case 4:ss();break;case 13:Xe(nt);break;case 19:Xe(nt);break;case 10:Ec(f.type._context);break;case 22:case 23:ph()}u=u.return}if(bt=i,dt=i=Zr(i.current,null),At=fn=o,yt=0,xo=null,lh=la=Ni=0,tn=vo=null,Ci!==null){for(o=0;o<Ci.length;o++)if(u=Ci[o],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,y=u.pending;if(y!==null){var k=y.next;y.next=g,f.next=k}u.pending=f}Ci=null}return i}function cm(i,o){do{var u=dt;try{if(Ac(),Gl.current=ea,Yl){for(var f=rt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Yl=!1}if(Pi=0,kt=mt=rt=null,ho=!1,fo=0,oh.current=null,u===null||u.return===null){yt=1,xo=o,dt=null;break}e:{var y=i,k=u.return,P=u,M=o;if(o=At,P.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var _=M,Y=P,te=Y.tag;if((Y.mode&1)===0&&(te===0||te===11||te===15)){var K=Y.alternate;K?(Y.updateQueue=K.updateQueue,Y.memoizedState=K.memoizedState,Y.lanes=K.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var de=Lg(k);if(de!==null){de.flags&=-257,Ig(de,k,P,y,o),de.mode&1&&jg(y,_,o),o=de,M=_;var ye=o.updateQueue;if(ye===null){var xe=new Set;xe.add(M),o.updateQueue=xe}else ye.add(M);break e}else{if((o&1)===0){jg(y,_,o),gh();break e}M=Error(t(426))}}else if(Ye&&P.mode&1){var at=Lg(k);if(at!==null){(at.flags&65536)===0&&(at.flags|=256),Ig(at,k,P,y,o),Pc(os(M,P));break e}}y=M=os(M,P),yt!==4&&(yt=2),vo===null?vo=[y]:vo.push(y),y=k;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var z=Tg(y,M,o);sg(y,z);break e;case 1:P=M;var D=y.type,F=y.stateNode;if((y.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&(qr===null||!qr.has(F)))){y.flags|=65536,o&=-o,y.lanes|=o;var re=Dg(y,P,o);sg(y,re);break e}}y=y.return}while(y!==null)}dm(u)}catch(ve){o=ve,dt===u&&u!==null&&(dt=u=u.return);continue}break}while(!0)}function hm(){var i=oa.current;return oa.current=ea,i===null?ea:i}function gh(){(yt===0||yt===3||yt===2)&&(yt=4),bt===null||(Ni&268435455)===0&&(la&268435455)===0||Jr(bt,At)}function da(i,o){var u=je;je|=2;var f=hm();(bt!==i||At!==o)&&(Cr=null,Ei(i,o));do try{wk();break}catch(g){cm(i,g)}while(!0);if(Ac(),je=u,oa.current=f,dt!==null)throw Error(t(261));return bt=null,At=0,yt}function wk(){for(;dt!==null;)fm(dt)}function kk(){for(;dt!==null&&!U1();)fm(dt)}function fm(i){var o=mm(i.alternate,i,fn);i.memoizedProps=i.pendingProps,o===null?dm(i):dt=o,oh.current=null}function dm(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=dk(u,o,fn),u!==null){dt=u;return}}else{if(u=pk(u,o),u!==null){u.flags&=32767,dt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{yt=6,dt=null;return}}if(o=o.sibling,o!==null){dt=o;return}dt=o=i}while(o!==null);yt===0&&(yt=5)}function Mi(i,o,u){var f=He,g=bn.transition;try{bn.transition=null,He=1,bk(i,o,u,f)}finally{bn.transition=g,He=f}return null}function bk(i,o,u,f){do cs();while(Gr!==null);if((je&6)!==0)throw Error(t(327));u=i.finishedWork;var g=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=u.lanes|u.childLanes;if(nw(i,y),i===bt&&(dt=bt=null,At=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||ua||(ua=!0,ym(yl,function(){return cs(),null})),y=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||y){y=bn.transition,bn.transition=null;var k=He;He=1;var P=je;je|=4,oh.current=null,mk(i,u),rm(u,i),Vw(gc),Cl=!!pc,gc=pc=null,i.current=u,yk(u),X1(),je=P,He=k,bn.transition=y}else i.current=u;if(ua&&(ua=!1,Gr=i,ca=g),y=i.pendingLanes,y===0&&(qr=null),G1(u.stateNode),nn(i,lt()),o!==null)for(f=i.onRecoverableError,u=0;u<o.length;u++)g=o[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(aa)throw aa=!1,i=uh,uh=null,i;return(ca&1)!==0&&i.tag!==0&&cs(),y=i.pendingLanes,(y&1)!==0?i===ch?wo++:(wo=0,ch=i):wo=0,$r(),null}function cs(){if(Gr!==null){var i=tp(ca),o=bn.transition,u=He;try{if(bn.transition=null,He=16>i?16:i,Gr===null)var f=!1;else{if(i=Gr,Gr=null,ca=0,(je&6)!==0)throw Error(t(331));var g=je;for(je|=4,ge=i.current;ge!==null;){var y=ge,k=y.child;if((ge.flags&16)!==0){var P=y.deletions;if(P!==null){for(var M=0;M<P.length;M++){var _=P[M];for(ge=_;ge!==null;){var Y=ge;switch(Y.tag){case 0:case 11:case 15:yo(8,Y,y)}var te=Y.child;if(te!==null)te.return=Y,ge=te;else for(;ge!==null;){Y=ge;var K=Y.sibling,de=Y.return;if(Jg(Y),Y===_){ge=null;break}if(K!==null){K.return=de,ge=K;break}ge=de}}}var ye=y.alternate;if(ye!==null){var xe=ye.child;if(xe!==null){ye.child=null;do{var at=xe.sibling;xe.sibling=null,xe=at}while(xe!==null)}}ge=y}}if((y.subtreeFlags&2064)!==0&&k!==null)k.return=y,ge=k;else e:for(;ge!==null;){if(y=ge,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:yo(9,y,y.return)}var z=y.sibling;if(z!==null){z.return=y.return,ge=z;break e}ge=y.return}}var D=i.current;for(ge=D;ge!==null;){k=ge;var F=k.child;if((k.subtreeFlags&2064)!==0&&F!==null)F.return=k,ge=F;else e:for(k=D;ge!==null;){if(P=ge,(P.flags&2048)!==0)try{switch(P.tag){case 0:case 11:case 15:sa(9,P)}}catch(ve){it(P,P.return,ve)}if(P===k){ge=null;break e}var re=P.sibling;if(re!==null){re.return=P.return,ge=re;break e}ge=P.return}}if(je=g,$r(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(xl,i)}catch{}f=!0}return f}finally{He=u,bn.transition=o}}return!1}function pm(i,o,u){o=os(u,o),o=Tg(i,o,1),i=Xr(i,o,1),o=$t(),i!==null&&(Ws(i,1,o),nn(i,o))}function it(i,o,u){if(i.tag===3)pm(i,i,u);else for(;o!==null;){if(o.tag===3){pm(o,i,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(qr===null||!qr.has(f))){i=os(u,i),i=Dg(o,i,1),o=Xr(o,i,1),i=$t(),o!==null&&(Ws(o,1,i),nn(o,i));break}}o=o.return}}function Sk(i,o,u){var f=i.pingCache;f!==null&&f.delete(o),o=$t(),i.pingedLanes|=i.suspendedLanes&u,bt===i&&(At&u)===u&&(yt===4||yt===3&&(At&130023424)===At&&500>lt()-ah?Ei(i,0):lh|=u),nn(i,o)}function gm(i,o){o===0&&((i.mode&1)===0?o=1:(o=wl,wl<<=1,(wl&130023424)===0&&(wl=4194304)));var u=$t();i=kr(i,o),i!==null&&(Ws(i,o,u),nn(i,u))}function Ck(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),gm(i,u)}function Ok(i,o){var u=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),gm(i,u)}var mm;mm=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||Jt.current)en=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return en=!1,fk(i,o,u);en=(i.flags&131072)!==0}else en=!1,Ye&&(o.flags&1048576)!==0&&qp(o,Vl,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;ra(i,o),i=o.pendingProps;var g=Ji(o,Lt.current);is(o,u),g=Fc(null,o,f,i,g,u);var y=_c();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Zt(f)?(y=!0,Fl(o)):y=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Tc(o),g.updater=ta,o.stateNode=g,g._reactInternals=o,Uc(o,f,i,u),o=Gc(null,o,f,!0,y,u)):(o.tag=0,Ye&&y&&bc(o),Qt(null,o,g,u),o=o.child),o;case 16:f=o.elementType;e:{switch(ra(i,o),i=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=Nk(f),i=In(f,i),g){case 0:o=qc(null,o,f,i,u);break e;case 1:o=Vg(null,o,f,i,u);break e;case 11:o=Bg(null,o,f,i,u);break e;case 14:o=zg(null,o,f,In(f.type,i),u);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:In(f,g),qc(i,o,f,g,u);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:In(f,g),Vg(i,o,f,g,u);case 3:e:{if(Wg(o),i===null)throw Error(t(387));f=o.pendingProps,y=o.memoizedState,g=y.element,ig(i,o),Kl(o,f,null,u);var k=o.memoizedState;if(f=k.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){g=os(Error(t(423)),o),o=Qg(i,o,f,u,g);break e}else if(f!==g){g=os(Error(t(424)),o),o=Qg(i,o,f,u,g);break e}else for(hn=Vr(o.stateNode.containerInfo.firstChild),cn=o,Ye=!0,Ln=null,u=ng(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(ts(),f===g){o=Sr(i,o,u);break e}Qt(i,o,f,u)}o=o.child}return o;case 5:return lg(o),i===null&&Oc(o),f=o.type,g=o.pendingProps,y=i!==null?i.memoizedProps:null,k=g.children,mc(f,g)?k=null:y!==null&&mc(f,y)&&(o.flags|=32),Hg(i,o),Qt(i,o,k,u),o.child;case 6:return i===null&&Oc(o),null;case 13:return $g(i,o,u);case 4:return Dc(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=ns(o,null,f,u):Qt(i,o,f,u),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:In(f,g),Bg(i,o,f,g,u);case 7:return Qt(i,o,o.pendingProps,u),o.child;case 8:return Qt(i,o,o.pendingProps.children,u),o.child;case 12:return Qt(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,y=o.memoizedProps,k=g.value,$e($l,f._currentValue),f._currentValue=k,y!==null)if(jn(y.value,k)){if(y.children===g.children&&!Jt.current){o=Sr(i,o,u);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var P=y.dependencies;if(P!==null){k=y.child;for(var M=P.firstContext;M!==null;){if(M.context===f){if(y.tag===1){M=br(-1,u&-u),M.tag=2;var _=y.updateQueue;if(_!==null){_=_.shared;var Y=_.pending;Y===null?M.next=M:(M.next=Y.next,Y.next=M),_.pending=M}}y.lanes|=u,M=y.alternate,M!==null&&(M.lanes|=u),Mc(y.return,u,o),P.lanes|=u;break}M=M.next}}else if(y.tag===10)k=y.type===o.type?null:y.child;else if(y.tag===18){if(k=y.return,k===null)throw Error(t(341));k.lanes|=u,P=k.alternate,P!==null&&(P.lanes|=u),Mc(k,u,o),k=y.sibling}else k=y.child;if(k!==null)k.return=y;else for(k=y;k!==null;){if(k===o){k=null;break}if(y=k.sibling,y!==null){y.return=k.return,k=y;break}k=k.return}y=k}Qt(i,o,g.children,u),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,is(o,u),g=wn(g),f=f(g),o.flags|=1,Qt(i,o,f,u),o.child;case 14:return f=o.type,g=In(f,o.pendingProps),g=In(f.type,g),zg(i,o,f,g,u);case 15:return Fg(i,o,o.type,o.pendingProps,u);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:In(f,g),ra(i,o),o.tag=1,Zt(f)?(i=!0,Fl(o)):i=!1,is(o,u),Mg(o,f,g),Uc(o,f,g,u),Gc(null,o,f,!0,i,u);case 19:return Xg(i,o,u);case 22:return _g(i,o,u)}throw Error(t(156,o.tag))};function ym(i,o){return Gd(i,o)}function Pk(i,o,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Sn(i,o,u,f){return new Pk(i,o,u,f)}function mh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Nk(i){if(typeof i=="function")return mh(i)?1:0;if(i!=null){if(i=i.$$typeof,i===$)return 11;if(i===X)return 14}return 2}function Zr(i,o){var u=i.alternate;return u===null?(u=Sn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function pa(i,o,u,f,g,y){var k=2;if(f=i,typeof i=="function")mh(i)&&(k=1);else if(typeof i=="string")k=5;else e:switch(i){case j:return Ri(u.children,g,y,o);case H:k=8,g|=8;break;case W:return i=Sn(12,u,o,g|2),i.elementType=W,i.lanes=y,i;case Z:return i=Sn(13,u,o,g),i.elementType=Z,i.lanes=y,i;case ue:return i=Sn(19,u,o,g),i.elementType=ue,i.lanes=y,i;case se:return ga(u,g,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case V:k=10;break e;case q:k=9;break e;case $:k=11;break e;case X:k=14;break e;case G:k=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=Sn(k,u,o,g),o.elementType=i,o.type=f,o.lanes=y,o}function Ri(i,o,u,f){return i=Sn(7,i,f,o),i.lanes=u,i}function ga(i,o,u,f){return i=Sn(22,i,f,o),i.elementType=se,i.lanes=u,i.stateNode={isHidden:!1},i}function yh(i,o,u){return i=Sn(6,i,null,o),i.lanes=u,i}function xh(i,o,u){return o=Sn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function Ak(i,o,u,f,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$u(0),this.expirationTimes=$u(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$u(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function vh(i,o,u,f,g,y,k,P,M){return i=new Ak(i,o,u,P,M),o===1?(o=1,y===!0&&(o|=8)):o=0,y=Sn(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tc(y),i}function Ek(i,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:f==null?null:""+f,children:i,containerInfo:o,implementation:u}}function xm(i){if(!i)return Qr;i=i._reactInternals;e:{if(vi(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Zt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Zt(u))return Up(i,u,o)}return o}function vm(i,o,u,f,g,y,k,P,M){return i=vh(u,f,!0,i,g,y,k,P,M),i.context=xm(null),u=i.current,f=$t(),g=Yr(u),y=br(f,g),y.callback=o??null,Xr(u,y,g),i.current.lanes=g,Ws(i,g,f),nn(i,f),i}function ma(i,o,u,f){var g=o.current,y=$t(),k=Yr(g);return u=xm(u),o.context===null?o.context=u:o.pendingContext=u,o=br(y,k),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=Xr(g,o,k),i!==null&&(Fn(i,g,k,y),Xl(i,g,k)),k}function ya(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function wm(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function wh(i,o){wm(i,o),(i=i.alternate)&&wm(i,o)}function Mk(){return null}var km=typeof reportError=="function"?reportError:function(i){console.error(i)};function kh(i){this._internalRoot=i}xa.prototype.render=kh.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));ma(i,o,null,null)},xa.prototype.unmount=kh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Ai(function(){ma(null,i,null,null)}),o[yr]=null}};function xa(i){this._internalRoot=i}xa.prototype.unstable_scheduleHydration=function(i){if(i){var o=ip();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Fr.length&&o!==0&&o<Fr[u].priority;u++);Fr.splice(u,0,i),u===0&&lp(i)}};function bh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function va(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function bm(){}function Rk(i,o,u,f,g){if(g){if(typeof f=="function"){var y=f;f=function(){var _=ya(k);y.call(_)}}var k=vm(o,f,i,0,null,!1,!1,"",bm);return i._reactRootContainer=k,i[yr]=k.current,ro(i.nodeType===8?i.parentNode:i),Ai(),k}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var P=f;f=function(){var _=ya(M);P.call(_)}}var M=vh(i,0,!1,null,null,!1,!1,"",bm);return i._reactRootContainer=M,i[yr]=M.current,ro(i.nodeType===8?i.parentNode:i),Ai(function(){ma(o,M,u,f)}),M}function wa(i,o,u,f,g){var y=u._reactRootContainer;if(y){var k=y;if(typeof g=="function"){var P=g;g=function(){var M=ya(k);P.call(M)}}ma(o,k,i,g)}else k=Rk(u,o,i,g,f);return ya(k)}np=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Vs(o.pendingLanes);u!==0&&(Uu(o,u|1),nn(o,lt()),(je&6)===0&&(us=lt()+500,$r()))}break;case 13:Ai(function(){var f=kr(i,1);if(f!==null){var g=$t();Fn(f,i,1,g)}}),wh(i,1)}},Xu=function(i){if(i.tag===13){var o=kr(i,134217728);if(o!==null){var u=$t();Fn(o,i,134217728,u)}wh(i,134217728)}},rp=function(i){if(i.tag===13){var o=Yr(i),u=kr(i,o);if(u!==null){var f=$t();Fn(u,i,o,f)}wh(i,o)}},ip=function(){return He},sp=function(i,o){var u=He;try{return He=i,o()}finally{He=u}},_s=function(i,o,u){switch(o){case"input":if(Je(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==i&&f.form===i.form){var g=Bl(f);if(!g)throw Error(t(90));_e(f),Je(f,g)}}}break;case"textarea":mi(i,u);break;case"select":o=u.value,o!=null&&wt(i,!!u.multiple,o,!1)}},Wt=dh,Dt=Ai;var Tk={usingClientEntryPoint:!1,Events:[oo,Gi,Bl,Tt,Mn,dh]},ko={findFiberByHostInstance:wi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dk={bundleType:ko.bundleType,version:ko.version,rendererPackageName:ko.rendererPackageName,rendererConfig:ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:I.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Kd(i),i===null?null:i.stateNode},findFiberByHostInstance:ko.findFiberByHostInstance||Mk,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ka=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ka.isDisabled&&ka.supportsFiber)try{xl=ka.inject(Dk),qn=ka}catch{}}return rn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Tk,rn.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bh(o))throw Error(t(200));return Ek(i,o,null,u)},rn.createRoot=function(i,o){if(!bh(i))throw Error(t(299));var u=!1,f="",g=km;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=vh(i,1,!1,null,null,u,!1,f,g),i[yr]=o.current,ro(i.nodeType===8?i.parentNode:i),new kh(o)},rn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Kd(o),i=i===null?null:i.stateNode,i},rn.flushSync=function(i){return Ai(i)},rn.hydrate=function(i,o,u){if(!va(o))throw Error(t(200));return wa(null,i,o,!0,u)},rn.hydrateRoot=function(i,o,u){if(!bh(i))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,y="",k=km;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(k=u.onRecoverableError)),o=vm(o,null,i,1,u??null,g,!1,y,k),i[yr]=o.current,ro(i),f)for(i=0;i<f.length;i++)u=f[i],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new xa(o)},rn.render=function(i,o,u){if(!va(o))throw Error(t(200));return wa(null,i,o,!1,u)},rn.unmountComponentAtNode=function(i){if(!va(i))throw Error(t(40));return i._reactRootContainer?(Ai(function(){wa(null,null,i,!1,function(){i._reactRootContainer=null,i[yr]=null})}),!0):!1},rn.unstable_batchedUpdates=dh,rn.unstable_renderSubtreeIntoContainer=function(i,o,u,f){if(!va(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return wa(i,o,u,!1,f)},rn.version="18.3.1-next-f1338f8080-20240426",rn}var Rm;function $y(){if(Rm)return Oh.exports;Rm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Oh.exports=Vk(),Oh.exports}var Tm;function Wk(){if(Tm)return ba;Tm=1;var n=$y();return ba.createRoot=n.createRoot,ba.hydrateRoot=n.hydrateRoot,ba}var Qk=Wk();const $k=Qy(Qk);var Ao=$y();function Uk(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return b.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Au=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ds(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function cd(n){return"nodeType"in n}function on(n){var e,t;return n?Ds(n)?n:cd(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function hd(n){const{Document:e}=on(n);return n instanceof e}function ol(n){return Ds(n)?!1:n instanceof on(n).HTMLElement}function Uy(n){return n instanceof on(n).SVGElement}function js(n){return n?Ds(n)?n.document:cd(n)?hd(n)?n:ol(n)||Uy(n)?n.ownerDocument:document:document:document}const lr=Au?b.useLayoutEffect:b.useEffect;function fd(n){const e=b.useRef(n);return lr(()=>{e.current=n}),b.useCallback(function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function Xk(){const n=b.useRef(null),e=b.useCallback((r,s)=>{n.current=setInterval(r,s)},[]),t=b.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function $o(n,e){e===void 0&&(e=[n]);const t=b.useRef(n);return lr(()=>{t.current!==n&&(t.current=n)},e),t}function ll(n,e){const t=b.useRef();return b.useMemo(()=>{const r=n(t.current);return t.current=r,r},[...e])}function ou(n){const e=fd(n),t=b.useRef(null),r=b.useCallback(s=>{s!==t.current&&(e==null||e(s,t.current)),t.current=s},[]);return[t,r]}function lf(n){const e=b.useRef();return b.useEffect(()=>{e.current=n},[n]),e.current}let Ah={};function al(n,e){return b.useMemo(()=>{if(e)return e;const t=Ah[n]==null?0:Ah[n]+1;return Ah[n]=t,n+"-"+t},[n,e])}function Xy(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const c=Object.entries(a);for(const[h,d]of c){const p=l[h];p!=null&&(l[h]=p+n*d)}return l},{...e})}}const xs=Xy(1),lu=Xy(-1);function Kk(n){return"clientX"in n&&"clientY"in n}function dd(n){if(!n)return!1;const{KeyboardEvent:e}=on(n.target);return e&&n instanceof e}function qk(n){if(!n)return!1;const{TouchEvent:e}=on(n.target);return e&&n instanceof e}function af(n){if(qk(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return Kk(n)?{x:n.clientX,y:n.clientY}:null}const Uo=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[Uo.Translate.toString(n),Uo.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:r}=n;return e+" "+t+"ms "+r}}}),Dm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Gk(n){return n.matches(Dm)?n:n.querySelector(Dm)}const Yk={display:"none"};function Jk(n){let{id:e,value:t}=n;return ct.createElement("div",{id:e,style:Yk},t)}function Zk(n){let{id:e,announcement:t,ariaLiveType:r="assertive"}=n;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ct.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},t)}function eb(){const[n,e]=b.useState("");return{announce:b.useCallback(r=>{r!=null&&e(r)},[]),announcement:n}}const Ky=b.createContext(null);function tb(n){const e=b.useContext(Ky);b.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function nb(){const[n]=b.useState(()=>new Set),e=b.useCallback(r=>(n.add(r),()=>n.delete(r)),[n]);return[b.useCallback(r=>{let{type:s,event:l}=r;n.forEach(a=>{var c;return(c=a[s])==null?void 0:c.call(a,l)})},[n]),e]}const rb={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},ib={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function sb(n){let{announcements:e=ib,container:t,hiddenTextDescribedById:r,screenReaderInstructions:s=rb}=n;const{announce:l,announcement:a}=eb(),c=al("DndLiveRegion"),[h,d]=b.useState(!1);if(b.useEffect(()=>{d(!0)},[]),tb(b.useMemo(()=>({onDragStart(m){let{active:v}=m;l(e.onDragStart({active:v}))},onDragMove(m){let{active:v,over:w}=m;e.onDragMove&&l(e.onDragMove({active:v,over:w}))},onDragOver(m){let{active:v,over:w}=m;l(e.onDragOver({active:v,over:w}))},onDragEnd(m){let{active:v,over:w}=m;l(e.onDragEnd({active:v,over:w}))},onDragCancel(m){let{active:v,over:w}=m;l(e.onDragCancel({active:v,over:w}))}}),[l,e])),!h)return null;const p=ct.createElement(ct.Fragment,null,ct.createElement(Jk,{id:r,value:s.draggable}),ct.createElement(Zk,{id:c,announcement:a}));return t?Ao.createPortal(p,t):p}var xt;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(xt||(xt={}));function au(){}function jm(n,e){return b.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function ob(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return b.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Hn=Object.freeze({x:0,y:0});function lb(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function ab(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return t-r}function ub(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return r-t}function cb(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function Lm(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const hb=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=Lm(e,e.left,e.top),l=[];for(const a of r){const{id:c}=a,h=t.get(c);if(h){const d=lb(Lm(h),s);l.push({id:c,data:{droppableContainer:a,value:d}})}}return l.sort(ab)};function fb(n,e){const t=Math.max(e.top,n.top),r=Math.max(e.left,n.left),s=Math.min(e.left+e.width,n.left+n.width),l=Math.min(e.top+e.height,n.top+n.height),a=s-r,c=l-t;if(r<s&&t<l){const h=e.width*e.height,d=n.width*n.height,p=a*c,m=p/(h+d-p);return Number(m.toFixed(4))}return 0}const db=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=[];for(const l of r){const{id:a}=l,c=t.get(a);if(c){const h=fb(c,e);h>0&&s.push({id:a,data:{droppableContainer:l,value:h}})}}return s.sort(ub)};function pb(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function qy(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Hn}function gb(n){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,c)=>({...a,top:a.top+n*c.y,bottom:a.bottom+n*c.y,left:a.left+n*c.x,right:a.right+n*c.x}),{...t})}}const mb=gb(1);function yb(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function xb(n,e,t){const r=yb(e);if(!r)return n;const{scaleX:s,scaleY:l,x:a,y:c}=r,h=n.left-a-(1-s)*parseFloat(t),d=n.top-c-(1-l)*parseFloat(t.slice(t.indexOf(" ")+1)),p=s?n.width/s:n.width,m=l?n.height/l:n.height;return{width:p,height:m,top:d,right:h+p,bottom:d+m,left:h}}const vb={ignoreTransform:!1};function Ls(n,e){e===void 0&&(e=vb);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:p}=on(n).getComputedStyle(n);d&&(t=xb(t,d,p))}const{top:r,left:s,width:l,height:a,bottom:c,right:h}=t;return{top:r,left:s,width:l,height:a,bottom:c,right:h}}function Im(n){return Ls(n,{ignoreTransform:!0})}function wb(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function kb(n,e){return e===void 0&&(e=on(n).getComputedStyle(n)),e.position==="fixed"}function bb(n,e){e===void 0&&(e=on(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=e[s];return typeof l=="string"?t.test(l):!1})}function pd(n,e){const t=[];function r(s){if(e!=null&&t.length>=e||!s)return t;if(hd(s)&&s.scrollingElement!=null&&!t.includes(s.scrollingElement))return t.push(s.scrollingElement),t;if(!ol(s)||Uy(s)||t.includes(s))return t;const l=on(n).getComputedStyle(s);return s!==n&&bb(s,l)&&t.push(s),kb(s,l)?t:r(s.parentNode)}return n?r(n):t}function Gy(n){const[e]=pd(n,1);return e??null}function Eh(n){return!Au||!n?null:Ds(n)?n:cd(n)?hd(n)||n===js(n).scrollingElement?window:ol(n)?n:null:null}function Yy(n){return Ds(n)?n.scrollX:n.scrollLeft}function Jy(n){return Ds(n)?n.scrollY:n.scrollTop}function uf(n){return{x:Yy(n),y:Jy(n)}}var Ct;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Ct||(Ct={}));function Zy(n){return!Au||!n?!1:n===document.scrollingElement}function ex(n){const e={x:0,y:0},t=Zy(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},r={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},s=n.scrollTop<=e.y,l=n.scrollLeft<=e.x,a=n.scrollTop>=r.y,c=n.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:c,maxScroll:r,minScroll:e}}const Sb={x:.2,y:.2};function Cb(n,e,t,r,s){let{top:l,left:a,right:c,bottom:h}=t;r===void 0&&(r=10),s===void 0&&(s=Sb);const{isTop:d,isBottom:p,isLeft:m,isRight:v}=ex(n),w={x:0,y:0},S={x:0,y:0},C={height:e.height*s.y,width:e.width*s.x};return!d&&l<=e.top+C.height?(w.y=Ct.Backward,S.y=r*Math.abs((e.top+C.height-l)/C.height)):!p&&h>=e.bottom-C.height&&(w.y=Ct.Forward,S.y=r*Math.abs((e.bottom-C.height-h)/C.height)),!v&&c>=e.right-C.width?(w.x=Ct.Forward,S.x=r*Math.abs((e.right-C.width-c)/C.width)):!m&&a<=e.left+C.width&&(w.x=Ct.Backward,S.x=r*Math.abs((e.left+C.width-a)/C.width)),{direction:w,speed:S}}function Ob(n){if(n===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:e,left:t,right:r,bottom:s}=n.getBoundingClientRect();return{top:e,left:t,right:r,bottom:s,width:n.clientWidth,height:n.clientHeight}}function tx(n){return n.reduce((e,t)=>xs(e,uf(t)),Hn)}function Pb(n){return n.reduce((e,t)=>e+Yy(t),0)}function Nb(n){return n.reduce((e,t)=>e+Jy(t),0)}function Ab(n,e){if(e===void 0&&(e=Ls),!n)return;const{top:t,left:r,bottom:s,right:l}=e(n);Gy(n)&&(s<=0||l<=0||t>=window.innerHeight||r>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const Eb=[["x",["left","right"],Pb],["y",["top","bottom"],Nb]];class gd{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=pd(t),s=tx(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,a,c]of Eb)for(const h of a)Object.defineProperty(this,h,{get:()=>{const d=c(r),p=s[l]-d;return this.rect[h]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class jo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var s;(s=this.target)==null||s.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function Mb(n){const{EventTarget:e}=on(n);return n instanceof e?n:js(n)}function Mh(n,e){const t=Math.abs(n.x),r=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var Cn;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(Cn||(Cn={}));function Bm(n){n.preventDefault()}function Rb(n){n.stopPropagation()}var Be;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Be||(Be={}));const nx={start:[Be.Space,Be.Enter],cancel:[Be.Esc],end:[Be.Space,Be.Enter,Be.Tab]},Tb=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Be.Right:return{...t,x:t.x+25};case Be.Left:return{...t,x:t.x-25};case Be.Down:return{...t,y:t.y+25};case Be.Up:return{...t,y:t.y-25}}};class md{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new jo(js(t)),this.windowListeners=new jo(on(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Cn.Resize,this.handleCancel),this.windowListeners.add(Cn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Cn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&Ab(r),t(Hn)}handleKeyDown(e){if(dd(e)){const{active:t,context:r,options:s}=this.props,{keyboardCodes:l=nx,coordinateGetter:a=Tb,scrollBehavior:c="smooth"}=s,{code:h}=e;if(l.end.includes(h)){this.handleEnd(e);return}if(l.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:Hn;this.referenceCoordinates||(this.referenceCoordinates=p);const m=a(e,{active:t,context:r.current,currentCoordinates:p});if(m){const v=lu(m,p),w={x:0,y:0},{scrollableAncestors:S}=r.current;for(const C of S){const O=e.code,{isTop:N,isRight:E,isLeft:T,isBottom:I,maxScroll:R,minScroll:L}=ex(C),j=Ob(C),H={x:Math.min(O===Be.Right?j.right-j.width/2:j.right,Math.max(O===Be.Right?j.left:j.left+j.width/2,m.x)),y:Math.min(O===Be.Down?j.bottom-j.height/2:j.bottom,Math.max(O===Be.Down?j.top:j.top+j.height/2,m.y))},W=O===Be.Right&&!E||O===Be.Left&&!T,V=O===Be.Down&&!I||O===Be.Up&&!N;if(W&&H.x!==m.x){const q=C.scrollLeft+v.x,$=O===Be.Right&&q<=R.x||O===Be.Left&&q>=L.x;if($&&!v.y){C.scrollTo({left:q,behavior:c});return}$?w.x=C.scrollLeft-q:w.x=O===Be.Right?C.scrollLeft-R.x:C.scrollLeft-L.x,w.x&&C.scrollBy({left:-w.x,behavior:c});break}else if(V&&H.y!==m.y){const q=C.scrollTop+v.y,$=O===Be.Down&&q<=R.y||O===Be.Up&&q>=L.y;if($&&!v.x){C.scrollTo({top:q,behavior:c});return}$?w.y=C.scrollTop-q:w.y=O===Be.Down?C.scrollTop-R.y:C.scrollTop-L.y,w.y&&C.scrollBy({top:-w.y,behavior:c});break}}this.handleMove(e,xs(lu(m,this.referenceCoordinates),w))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}md.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:r=nx,onActivation:s}=e,{active:l}=t;const{code:a}=n.nativeEvent;if(r.start.includes(a)){const c=l.activatorNode.current;return c&&n.target!==c?!1:(n.preventDefault(),s==null||s({event:n.nativeEvent}),!0)}return!1}}];function zm(n){return!!(n&&"distance"in n)}function Fm(n){return!!(n&&"delay"in n)}class yd{constructor(e,t,r){var s;r===void 0&&(r=Mb(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:a}=l;this.props=e,this.events=t,this.document=js(a),this.documentListeners=new jo(this.document),this.listeners=new jo(r),this.windowListeners=new jo(on(a)),this.initialCoordinates=(s=af(l))!=null?s:Hn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Cn.Resize,this.handleCancel),this.windowListeners.add(Cn.DragStart,Bm),this.windowListeners.add(Cn.VisibilityChange,this.handleCancel),this.windowListeners.add(Cn.ContextMenu,Bm),this.documentListeners.add(Cn.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Fm(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(zm(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Cn.Click,Rb,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Cn.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:c}}=l;if(!s)return;const h=(t=af(e))!=null?t:Hn,d=lu(s,h);if(!r&&c){if(zm(c)){if(c.tolerance!=null&&Mh(d,c.tolerance))return this.handleCancel();if(Mh(d,c.distance))return this.handleStart()}if(Fm(c)&&Mh(d,c.tolerance))return this.handleCancel();this.handlePending(c,d);return}e.cancelable&&e.preventDefault(),a(h)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Be.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Db={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class xd extends yd{constructor(e){const{event:t}=e,r=js(t.target);super(e,Db,r)}}xd.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r==null||r({event:t}),!0)}}];const jb={move:{name:"mousemove"},end:{name:"mouseup"}};var cf;(function(n){n[n.RightClick=2]="RightClick"})(cf||(cf={}));class Lb extends yd{constructor(e){super(e,jb,js(e.event.target))}}Lb.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return t.button===cf.RightClick?!1:(r==null||r({event:t}),!0)}}];const Rh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ib extends yd{constructor(e){super(e,Rh)}static setup(){return window.addEventListener(Rh.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Rh.move.name,e)};function e(){}}}Ib.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;const{touches:s}=t;return s.length>1?!1:(r==null||r({event:t}),!0)}}];var Lo;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(Lo||(Lo={}));var uu;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(uu||(uu={}));function Bb(n){let{acceleration:e,activator:t=Lo.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:c=uu.TreeOrder,pointerCoordinates:h,scrollableAncestors:d,scrollableAncestorRects:p,delta:m,threshold:v}=n;const w=Fb({delta:m,disabled:!l}),[S,C]=Xk(),O=b.useRef({x:0,y:0}),N=b.useRef({x:0,y:0}),E=b.useMemo(()=>{switch(t){case Lo.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Lo.DraggableRect:return s}},[t,s,h]),T=b.useRef(null),I=b.useCallback(()=>{const L=T.current;if(!L)return;const j=O.current.x*N.current.x,H=O.current.y*N.current.y;L.scrollBy(j,H)},[]),R=b.useMemo(()=>c===uu.TreeOrder?[...d].reverse():d,[c,d]);b.useEffect(()=>{if(!l||!d.length||!E){C();return}for(const L of R){if((r==null?void 0:r(L))===!1)continue;const j=d.indexOf(L),H=p[j];if(!H)continue;const{direction:W,speed:V}=Cb(L,H,E,e,v);for(const q of["x","y"])w[q][W[q]]||(V[q]=0,W[q]=0);if(V.x>0||V.y>0){C(),T.current=L,S(I,a),O.current=V,N.current=W;return}}O.current={x:0,y:0},N.current={x:0,y:0},C()},[e,I,r,C,l,a,JSON.stringify(E),JSON.stringify(w),S,d,R,p,JSON.stringify(v)])}const zb={x:{[Ct.Backward]:!1,[Ct.Forward]:!1},y:{[Ct.Backward]:!1,[Ct.Forward]:!1}};function Fb(n){let{delta:e,disabled:t}=n;const r=lf(e);return ll(s=>{if(t||!r||!s)return zb;const l={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Ct.Backward]:s.x[Ct.Backward]||l.x===-1,[Ct.Forward]:s.x[Ct.Forward]||l.x===1},y:{[Ct.Backward]:s.y[Ct.Backward]||l.y===-1,[Ct.Forward]:s.y[Ct.Forward]||l.y===1}}},[t,e,r])}function _b(n,e){const t=e!=null?n.get(e):void 0,r=t?t.node.current:null;return ll(s=>{var l;return e==null?null:(l=r??s)!=null?l:null},[r,e])}function Hb(n,e){return b.useMemo(()=>n.reduce((t,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...t,...l]},[]),[n,e])}var Xo;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(Xo||(Xo={}));var hf;(function(n){n.Optimized="optimized"})(hf||(hf={}));const _m=new Map;function Vb(n,e){let{dragging:t,dependencies:r,config:s}=e;const[l,a]=b.useState(null),{frequency:c,measure:h,strategy:d}=s,p=b.useRef(n),m=O(),v=$o(m),w=b.useCallback(function(N){N===void 0&&(N=[]),!v.current&&a(E=>E===null?N:E.concat(N.filter(T=>!E.includes(T))))},[v]),S=b.useRef(null),C=ll(N=>{if(m&&!t)return _m;if(!N||N===_m||p.current!==n||l!=null){const E=new Map;for(let T of n){if(!T)continue;if(l&&l.length>0&&!l.includes(T.id)&&T.rect.current){E.set(T.id,T.rect.current);continue}const I=T.node.current,R=I?new gd(h(I),I):null;T.rect.current=R,R&&E.set(T.id,R)}return E}return N},[n,l,t,m,h]);return b.useEffect(()=>{p.current=n},[n]),b.useEffect(()=>{m||w()},[t,m]),b.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),b.useEffect(()=>{m||typeof c!="number"||S.current!==null||(S.current=setTimeout(()=>{w(),S.current=null},c))},[c,m,w,...r]),{droppableRects:C,measureDroppableContainers:w,measuringScheduled:l!=null};function O(){switch(d){case Xo.Always:return!1;case Xo.BeforeDragging:return t;default:return!t}}}function rx(n,e){return ll(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function Wb(n,e){return rx(n,e)}function Qb(n){let{callback:e,disabled:t}=n;const r=fd(e),s=b.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(r)},[r,t]);return b.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Eu(n){let{callback:e,disabled:t}=n;const r=fd(e),s=b.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(r)},[t]);return b.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function $b(n){return new gd(Ls(n),n)}function Hm(n,e,t){e===void 0&&(e=$b);const[r,s]=b.useState(null);function l(){s(h=>{if(!n)return null;if(n.isConnected===!1){var d;return(d=h??t)!=null?d:null}const p=e(n);return JSON.stringify(h)===JSON.stringify(p)?h:p})}const a=Qb({callback(h){if(n)for(const d of h){const{type:p,target:m}=d;if(p==="childList"&&m instanceof HTMLElement&&m.contains(n)){l();break}}}}),c=Eu({callback:l});return lr(()=>{l(),n?(c==null||c.observe(n),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),a==null||a.disconnect())},[n]),r}function Ub(n){const e=rx(n);return qy(n,e)}const Vm=[];function Xb(n){const e=b.useRef(n),t=ll(r=>n?r&&r!==Vm&&n&&e.current&&n.parentNode===e.current.parentNode?r:pd(n):Vm,[n]);return b.useEffect(()=>{e.current=n},[n]),t}function Kb(n){const[e,t]=b.useState(null),r=b.useRef(n),s=b.useCallback(l=>{const a=Eh(l.target);a&&t(c=>c?(c.set(a,uf(a)),new Map(c)):null)},[]);return b.useEffect(()=>{const l=r.current;if(n!==l){a(l);const c=n.map(h=>{const d=Eh(h);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,uf(d)]):null}).filter(h=>h!=null);t(c.length?new Map(c):null),r.current=n}return()=>{a(n),a(l)};function a(c){c.forEach(h=>{const d=Eh(h);d==null||d.removeEventListener("scroll",s)})}},[s,n]),b.useMemo(()=>n.length?e?Array.from(e.values()).reduce((l,a)=>xs(l,a),Hn):tx(n):Hn,[n,e])}function Wm(n,e){e===void 0&&(e=[]);const t=b.useRef(null);return b.useEffect(()=>{t.current=null},e),b.useEffect(()=>{const r=n!==Hn;r&&!t.current&&(t.current=n),!r&&t.current&&(t.current=null)},[n]),t.current?lu(n,t.current):Hn}function qb(n){b.useEffect(()=>{if(!Au)return;const e=n.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t==null||t()}},n.map(e=>{let{sensor:t}=e;return t}))}function Gb(n,e){return b.useMemo(()=>n.reduce((t,r)=>{let{eventName:s,handler:l}=r;return t[s]=a=>{l(a,e)},t},{}),[n,e])}function ix(n){return b.useMemo(()=>n?wb(n):null,[n])}const Qm=[];function Yb(n,e){e===void 0&&(e=Ls);const[t]=n,r=ix(t?on(t):null),[s,l]=b.useState(Qm);function a(){l(()=>n.length?n.map(h=>Zy(h)?r:new gd(e(h),h)):Qm)}const c=Eu({callback:a});return lr(()=>{c==null||c.disconnect(),a(),n.forEach(h=>c==null?void 0:c.observe(h))},[n]),s}function Jb(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return ol(e)?e:n}function Zb(n){let{measure:e}=n;const[t,r]=b.useState(null),s=b.useCallback(d=>{for(const{target:p}of d)if(ol(p)){r(m=>{const v=e(p);return m?{...m,width:v.width,height:v.height}:v});break}},[e]),l=Eu({callback:s}),a=b.useCallback(d=>{const p=Jb(d);l==null||l.disconnect(),p&&(l==null||l.observe(p)),r(p?e(p):null)},[e,l]),[c,h]=ou(a);return b.useMemo(()=>({nodeRef:c,rect:t,setRef:h}),[t,c,h])}const eS=[{sensor:xd,options:{}},{sensor:md,options:{}}],tS={current:{}},Xa={draggable:{measure:Im},droppable:{measure:Im,strategy:Xo.WhileDragging,frequency:hf.Optimized},dragOverlay:{measure:Ls}};class Io extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const nS={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Io,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:au},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Xa,measureDroppableContainers:au,windowRect:null,measuringScheduled:!1},rS={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:au,draggableNodes:new Map,over:null,measureDroppableContainers:au},Mu=b.createContext(rS),sx=b.createContext(nS);function iS(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Io}}}function sS(n,e){switch(e.type){case xt.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case xt.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case xt.DragEnd:case xt.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case xt.RegisterDroppable:{const{element:t}=e,{id:r}=t,s=new Io(n.droppable.containers);return s.set(r,t),{...n,droppable:{...n.droppable,containers:s}}}case xt.SetDroppableDisabled:{const{id:t,key:r,disabled:s}=e,l=n.droppable.containers.get(t);if(!l||r!==l.key)return n;const a=new Io(n.droppable.containers);return a.set(t,{...l,disabled:s}),{...n,droppable:{...n.droppable,containers:a}}}case xt.UnregisterDroppable:{const{id:t,key:r}=e,s=n.droppable.containers.get(t);if(!s||r!==s.key)return n;const l=new Io(n.droppable.containers);return l.delete(t),{...n,droppable:{...n.droppable,containers:l}}}default:return n}}function oS(n){let{disabled:e}=n;const{active:t,activatorEvent:r,draggableNodes:s}=b.useContext(Mu),l=lf(r),a=lf(t==null?void 0:t.id);return b.useEffect(()=>{if(!e&&!r&&l&&a!=null){if(!dd(l)||document.activeElement===l.target)return;const c=s.get(a);if(!c)return;const{activatorNode:h,node:d}=c;if(!h.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[h.current,d.current]){if(!p)continue;const m=Gk(p);if(m){m.focus();break}}})}},[r,e,s,a,l]),null}function lS(n,e){let{transform:t,...r}=e;return n!=null&&n.length?n.reduce((s,l)=>l({transform:s,...r}),t):t}function aS(n){return b.useMemo(()=>({draggable:{...Xa.draggable,...n==null?void 0:n.draggable},droppable:{...Xa.droppable,...n==null?void 0:n.droppable},dragOverlay:{...Xa.dragOverlay,...n==null?void 0:n.dragOverlay}}),[n==null?void 0:n.draggable,n==null?void 0:n.droppable,n==null?void 0:n.dragOverlay])}function uS(n){let{activeNode:e,measure:t,initialRect:r,config:s=!0}=n;const l=b.useRef(!1),{x:a,y:c}=typeof s=="boolean"?{x:s,y:s}:s;lr(()=>{if(!a&&!c||!e){l.current=!1;return}if(l.current||!r)return;const d=e==null?void 0:e.node.current;if(!d||d.isConnected===!1)return;const p=t(d),m=qy(p,r);if(a||(m.x=0),c||(m.y=0),l.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const v=Gy(d);v&&v.scrollBy({top:m.y,left:m.x})}},[e,a,c,r,t])}const ox=b.createContext({...Hn,scaleX:1,scaleY:1});var ti;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(ti||(ti={}));const cS=b.memo(function(e){var t,r,s,l;let{id:a,accessibility:c,autoScroll:h=!0,children:d,sensors:p=eS,collisionDetection:m=db,measuring:v,modifiers:w,...S}=e;const C=b.useReducer(sS,void 0,iS),[O,N]=C,[E,T]=nb(),[I,R]=b.useState(ti.Uninitialized),L=I===ti.Initialized,{draggable:{active:j,nodes:H,translate:W},droppable:{containers:V}}=O,q=j!=null?H.get(j):null,$=b.useRef({initial:null,translated:null}),Z=b.useMemo(()=>{var et;return j!=null?{id:j,data:(et=q==null?void 0:q.data)!=null?et:tS,rect:$}:null},[j,q]),ue=b.useRef(null),[X,G]=b.useState(null),[se,Q]=b.useState(null),ee=$o(S,Object.values(S)),J=al("DndDescribedBy",a),A=b.useMemo(()=>V.getEnabled(),[V]),B=aS(v),{droppableRects:le,measureDroppableContainers:pe,measuringScheduled:me}=Vb(A,{dragging:L,dependencies:[W.x,W.y],config:B.droppable}),ne=_b(H,j),ce=b.useMemo(()=>se?af(se):null,[se]),ke=Lr(),Pe=Wb(ne,B.draggable.measure);uS({activeNode:j!=null?H.get(j):null,config:ke.layoutShiftCompensation,initialRect:Pe,measure:B.draggable.measure});const we=Hm(ne,B.draggable.measure,Pe),Ee=Hm(ne?ne.parentElement:null),_e=b.useRef({activatorEvent:null,active:null,activeNode:ne,collisionRect:null,collisions:null,droppableRects:le,draggableNodes:H,draggingNode:null,draggingNodeRect:null,droppableContainers:V,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),We=V.getNodeFor((t=_e.current.over)==null?void 0:t.id),qe=Zb({measure:B.dragOverlay.measure}),fe=(r=qe.nodeRef.current)!=null?r:ne,Me=L?(s=qe.rect)!=null?s:we:null,Je=!!(qe.nodeRef.current&&qe.rect),En=Ub(Je?null:we),ht=ix(fe?on(fe):null),Ge=Xb(L?We??ne:null),wt=Yb(Ge),Gt=lS(w,{transform:{x:W.x-En.x,y:W.y-En.y,scaleX:1,scaleY:1},activatorEvent:se,active:Z,activeNodeRect:we,containerNodeRect:Ee,draggingNodeRect:Me,over:_e.current.over,overlayNodeRect:qe.rect,scrollableAncestors:Ge,scrollableAncestorRects:wt,windowRect:ht}),cr=ce?xs(ce,W):null,mi=Kb(Ge),hr=Wm(mi),yi=Wm(mi,[we]),ln=xs(Gt,hr),Oe=Me?mb(Me,Gt):null,oe=Z&&Oe?m({active:Z,collisionRect:Oe,droppableRects:le,droppableContainers:A,pointerCoordinates:cr}):null,De=cb(oe,"id"),[ft,Ze]=b.useState(null),Xn=Je?Gt:xs(Gt,yi),xi=pb(Xn,(l=ft==null?void 0:ft.rect)!=null?l:null,we),jr=b.useRef(null),fr=b.useCallback((et,Rt)=>{let{sensor:Tt,options:Mn}=Rt;if(ue.current==null)return;const Wt=H.get(ue.current);if(!Wt)return;const Dt=et.nativeEvent,Yt=new Tt({active:ue.current,activeNode:Wt,event:Dt,options:Mn,context:_e,onAbort(tt){if(!H.get(tt))return;const{onDragAbort:jt}=ee.current,Rn={id:tt};jt==null||jt(Rn),E({type:"onDragAbort",event:Rn})},onPending(tt,yn,jt,Rn){if(!H.get(tt))return;const{onDragPending:Kn}=ee.current,an={id:tt,constraint:yn,initialCoordinates:jt,offset:Rn};Kn==null||Kn(an),E({type:"onDragPending",event:an})},onStart(tt){const yn=ue.current;if(yn==null)return;const jt=H.get(yn);if(!jt)return;const{onDragStart:Rn}=ee.current,Tn={activatorEvent:Dt,active:{id:yn,data:jt.data,rect:$}};Ao.unstable_batchedUpdates(()=>{Rn==null||Rn(Tn),R(ti.Initializing),N({type:xt.DragStart,initialCoordinates:tt,active:yn}),E({type:"onDragStart",event:Tn}),G(jr.current),Q(Dt)})},onMove(tt){N({type:xt.DragMove,coordinates:tt})},onEnd:gr(xt.DragEnd),onCancel:gr(xt.DragCancel)});jr.current=Yt;function gr(tt){return async function(){const{active:jt,collisions:Rn,over:Tn,scrollAdjustedTranslate:Kn}=_e.current;let an=null;if(jt&&Kn){const{cancelDrop:mr}=ee.current;an={activatorEvent:Dt,active:jt,collisions:Rn,delta:Kn,over:Tn},tt===xt.DragEnd&&typeof mr=="function"&&await Promise.resolve(mr(an))&&(tt=xt.DragCancel)}ue.current=null,Ao.unstable_batchedUpdates(()=>{N({type:tt}),R(ti.Uninitialized),Ze(null),G(null),Q(null),jr.current=null;const mr=tt===xt.DragEnd?"onDragEnd":"onDragCancel";if(an){const Hs=ee.current[mr];Hs==null||Hs(an),E({type:mr,event:an})}})}}},[H]),dr=b.useCallback((et,Rt)=>(Tt,Mn)=>{const Wt=Tt.nativeEvent,Dt=H.get(Mn);if(ue.current!==null||!Dt||Wt.dndKit||Wt.defaultPrevented)return;const Yt={active:Dt};et(Tt,Rt.options,Yt)===!0&&(Wt.dndKit={capturedBy:Rt.sensor},ue.current=Mn,fr(Tt,Rt))},[H,fr]),pr=Hb(p,dr);qb(p),lr(()=>{we&&I===ti.Initializing&&R(ti.Initialized)},[we,I]),b.useEffect(()=>{const{onDragMove:et}=ee.current,{active:Rt,activatorEvent:Tt,collisions:Mn,over:Wt}=_e.current;if(!Rt||!Tt)return;const Dt={active:Rt,activatorEvent:Tt,collisions:Mn,delta:{x:ln.x,y:ln.y},over:Wt};Ao.unstable_batchedUpdates(()=>{et==null||et(Dt),E({type:"onDragMove",event:Dt})})},[ln.x,ln.y]),b.useEffect(()=>{const{active:et,activatorEvent:Rt,collisions:Tt,droppableContainers:Mn,scrollAdjustedTranslate:Wt}=_e.current;if(!et||ue.current==null||!Rt||!Wt)return;const{onDragOver:Dt}=ee.current,Yt=Mn.get(De),gr=Yt&&Yt.rect.current?{id:Yt.id,rect:Yt.rect.current,data:Yt.data,disabled:Yt.disabled}:null,tt={active:et,activatorEvent:Rt,collisions:Tt,delta:{x:Wt.x,y:Wt.y},over:gr};Ao.unstable_batchedUpdates(()=>{Ze(gr),Dt==null||Dt(tt),E({type:"onDragOver",event:tt})})},[De]),lr(()=>{_e.current={activatorEvent:se,active:Z,activeNode:ne,collisionRect:Oe,collisions:oe,droppableRects:le,draggableNodes:H,draggingNode:fe,draggingNodeRect:Me,droppableContainers:V,over:ft,scrollableAncestors:Ge,scrollAdjustedTranslate:ln},$.current={initial:Me,translated:Oe}},[Z,ne,oe,Oe,H,fe,Me,le,V,ft,Ge,ln]),Bb({...ke,delta:W,draggingRect:Oe,pointerCoordinates:cr,scrollableAncestors:Ge,scrollableAncestorRects:wt});const Fs=b.useMemo(()=>({active:Z,activeNode:ne,activeNodeRect:we,activatorEvent:se,collisions:oe,containerNodeRect:Ee,dragOverlay:qe,draggableNodes:H,droppableContainers:V,droppableRects:le,over:ft,measureDroppableContainers:pe,scrollableAncestors:Ge,scrollableAncestorRects:wt,measuringConfiguration:B,measuringScheduled:me,windowRect:ht}),[Z,ne,we,se,oe,Ee,qe,H,V,le,ft,pe,Ge,wt,B,me,ht]),_s=b.useMemo(()=>({activatorEvent:se,activators:pr,active:Z,activeNodeRect:we,ariaDescribedById:{draggable:J},dispatch:N,draggableNodes:H,over:ft,measureDroppableContainers:pe}),[se,pr,Z,we,N,J,H,ft,pe]);return ct.createElement(Ky.Provider,{value:T},ct.createElement(Mu.Provider,{value:_s},ct.createElement(sx.Provider,{value:Fs},ct.createElement(ox.Provider,{value:xi},d)),ct.createElement(oS,{disabled:(c==null?void 0:c.restoreFocus)===!1})),ct.createElement(sb,{...c,hiddenTextDescribedById:J}));function Lr(){const et=(X==null?void 0:X.autoScrollEnabled)===!1,Rt=typeof h=="object"?h.enabled===!1:h===!1,Tt=L&&!et&&!Rt;return typeof h=="object"?{...h,enabled:Tt}:{enabled:Tt}}}),hS=b.createContext(null),$m="button",fS="Draggable";function dS(n){let{id:e,data:t,disabled:r=!1,attributes:s}=n;const l=al(fS),{activators:a,activatorEvent:c,active:h,activeNodeRect:d,ariaDescribedById:p,draggableNodes:m,over:v}=b.useContext(Mu),{role:w=$m,roleDescription:S="draggable",tabIndex:C=0}=s??{},O=(h==null?void 0:h.id)===e,N=b.useContext(O?ox:hS),[E,T]=ou(),[I,R]=ou(),L=Gb(a,e),j=$o(t);lr(()=>(m.set(e,{id:e,key:l,node:E,activatorNode:I,data:j}),()=>{const W=m.get(e);W&&W.key===l&&m.delete(e)}),[m,e]);const H=b.useMemo(()=>({role:w,tabIndex:C,"aria-disabled":r,"aria-pressed":O&&w===$m?!0:void 0,"aria-roledescription":S,"aria-describedby":p.draggable}),[r,w,C,O,S,p.draggable]);return{active:h,activatorEvent:c,activeNodeRect:d,attributes:H,isDragging:O,listeners:r?void 0:L,node:E,over:v,setNodeRef:T,setActivatorNodeRef:R,transform:N}}function pS(){return b.useContext(sx)}const gS="Droppable",mS={timeout:25};function yS(n){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:s}=n;const l=al(gS),{active:a,dispatch:c,over:h,measureDroppableContainers:d}=b.useContext(Mu),p=b.useRef({disabled:t}),m=b.useRef(!1),v=b.useRef(null),w=b.useRef(null),{disabled:S,updateMeasurementsFor:C,timeout:O}={...mS,...s},N=$o(C??r),E=b.useCallback(()=>{if(!m.current){m.current=!0;return}w.current!=null&&clearTimeout(w.current),w.current=setTimeout(()=>{d(Array.isArray(N.current)?N.current:[N.current]),w.current=null},O)},[O]),T=Eu({callback:E,disabled:S||!a}),I=b.useCallback((H,W)=>{T&&(W&&(T.unobserve(W),m.current=!1),H&&T.observe(H))},[T]),[R,L]=ou(I),j=$o(e);return b.useEffect(()=>{!T||!R.current||(T.disconnect(),m.current=!1,T.observe(R.current))},[R,T]),b.useEffect(()=>(c({type:xt.RegisterDroppable,element:{id:r,key:l,disabled:t,node:R,rect:v,data:j}}),()=>c({type:xt.UnregisterDroppable,key:l,id:r})),[r]),b.useEffect(()=>{t!==p.current.disabled&&(c({type:xt.SetDroppableDisabled,id:r,key:l,disabled:t}),p.current.disabled=t)},[r,l,t,c]),{active:a,rect:v,isOver:(h==null?void 0:h.id)===r,node:R,over:h,setNodeRef:L}}function lx(n,e,t){const r=n.slice();return r.splice(t<0?r.length+t:t,0,r.splice(e,1)[0]),r}function xS(n,e){return n.reduce((t,r,s)=>{const l=e.get(r);return l&&(t[s]=l),t},Array(n.length))}function Sa(n){return n!==null&&n>=0}function vS(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function wS(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const Ca={scaleX:1,scaleY:1},kS=n=>{var e;let{rects:t,activeNodeRect:r,activeIndex:s,overIndex:l,index:a}=n;const c=(e=t[s])!=null?e:r;if(!c)return null;const h=bS(t,a,s);if(a===s){const d=t[l];return d?{x:s<l?d.left+d.width-(c.left+c.width):d.left-c.left,y:0,...Ca}:null}return a>s&&a<=l?{x:-c.width-h,y:0,...Ca}:a<s&&a>=l?{x:c.width+h,y:0,...Ca}:{x:0,y:0,...Ca}};function bS(n,e,t){const r=n[e],s=n[e-1],l=n[e+1];return!r||!s&&!l?0:t<e?s?r.left-(s.left+s.width):l.left-(r.left+r.width):l?l.left-(r.left+r.width):r.left-(s.left+s.width)}const ax=n=>{let{rects:e,activeIndex:t,overIndex:r,index:s}=n;const l=lx(e,r,t),a=e[s],c=l[s];return!c||!a?null:{x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height}},ux="Sortable",cx=ct.createContext({activeIndex:-1,containerId:ux,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ax,disabled:{draggable:!1,droppable:!1}});function SS(n){let{children:e,id:t,items:r,strategy:s=ax,disabled:l=!1}=n;const{active:a,dragOverlay:c,droppableRects:h,over:d,measureDroppableContainers:p}=pS(),m=al(ux,t),v=c.rect!==null,w=b.useMemo(()=>r.map(L=>typeof L=="object"&&"id"in L?L.id:L),[r]),S=a!=null,C=a?w.indexOf(a.id):-1,O=d?w.indexOf(d.id):-1,N=b.useRef(w),E=!vS(w,N.current),T=O!==-1&&C===-1||E,I=wS(l);lr(()=>{E&&S&&p(w)},[E,w,S,p]),b.useEffect(()=>{N.current=w},[w]);const R=b.useMemo(()=>({activeIndex:C,containerId:m,disabled:I,disableTransforms:T,items:w,overIndex:O,useDragOverlay:v,sortedRects:xS(w,h),strategy:s}),[C,m,I.draggable,I.droppable,T,w,O,h,v,s]);return ct.createElement(cx.Provider,{value:R},e)}const CS=n=>{let{id:e,items:t,activeIndex:r,overIndex:s}=n;return lx(t,r,s).indexOf(e)},OS=n=>{let{containerId:e,isSorting:t,wasDragging:r,index:s,items:l,newIndex:a,previousItems:c,previousContainerId:h,transition:d}=n;return!d||!r||c!==l&&s===a?!1:t?!0:a!==s&&e===h},PS={duration:200,easing:"ease"},hx="transform",NS=Uo.Transition.toString({property:hx,duration:0,easing:"linear"}),AS={roleDescription:"sortable"};function ES(n){let{disabled:e,index:t,node:r,rect:s}=n;const[l,a]=b.useState(null),c=b.useRef(t);return lr(()=>{if(!e&&t!==c.current&&r.current){const h=s.current;if(h){const d=Ls(r.current,{ignoreTransform:!0}),p={x:h.left-d.left,y:h.top-d.top,scaleX:h.width/d.width,scaleY:h.height/d.height};(p.x||p.y)&&a(p)}}t!==c.current&&(c.current=t)},[e,t,r,s]),b.useEffect(()=>{l&&a(null)},[l]),l}function MS(n){let{animateLayoutChanges:e=OS,attributes:t,disabled:r,data:s,getNewIndex:l=CS,id:a,strategy:c,resizeObserverConfig:h,transition:d=PS}=n;const{items:p,containerId:m,activeIndex:v,disabled:w,disableTransforms:S,sortedRects:C,overIndex:O,useDragOverlay:N,strategy:E}=b.useContext(cx),T=RS(r,w),I=p.indexOf(a),R=b.useMemo(()=>({sortable:{containerId:m,index:I,items:p},...s}),[m,s,I,p]),L=b.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:j,node:H,isOver:W,setNodeRef:V}=yS({id:a,data:R,disabled:T.droppable,resizeObserverConfig:{updateMeasurementsFor:L,...h}}),{active:q,activatorEvent:$,activeNodeRect:Z,attributes:ue,setNodeRef:X,listeners:G,isDragging:se,over:Q,setActivatorNodeRef:ee,transform:J}=dS({id:a,data:R,attributes:{...AS,...t},disabled:T.draggable}),A=Uk(V,X),B=!!q,le=B&&!S&&Sa(v)&&Sa(O),pe=!N&&se,me=pe&&le?J:null,ce=le?me??(c??E)({rects:C,activeNodeRect:Z,activeIndex:v,overIndex:O,index:I}):null,ke=Sa(v)&&Sa(O)?l({id:a,items:p,activeIndex:v,overIndex:O}):I,Pe=q==null?void 0:q.id,we=b.useRef({activeId:Pe,items:p,newIndex:ke,containerId:m}),Ee=p!==we.current.items,_e=e({active:q,containerId:m,isDragging:se,isSorting:B,id:a,index:I,items:p,newIndex:we.current.newIndex,previousItems:we.current.items,previousContainerId:we.current.containerId,transition:d,wasDragging:we.current.activeId!=null}),We=ES({disabled:!_e,index:I,node:H,rect:j});return b.useEffect(()=>{B&&we.current.newIndex!==ke&&(we.current.newIndex=ke),m!==we.current.containerId&&(we.current.containerId=m),p!==we.current.items&&(we.current.items=p)},[B,ke,m,p]),b.useEffect(()=>{if(Pe===we.current.activeId)return;if(Pe!=null&&we.current.activeId==null){we.current.activeId=Pe;return}const fe=setTimeout(()=>{we.current.activeId=Pe},50);return()=>clearTimeout(fe)},[Pe]),{active:q,activeIndex:v,attributes:ue,data:R,rect:j,index:I,newIndex:ke,items:p,isOver:W,isSorting:B,isDragging:se,listeners:G,node:H,overIndex:O,over:Q,setNodeRef:A,setActivatorNodeRef:ee,setDroppableNodeRef:V,setDraggableNodeRef:X,transform:We??ce,transition:qe()};function qe(){if(We||Ee&&we.current.newIndex===I)return NS;if(!(pe&&!dd($)||!d)&&(B||_e))return Uo.Transition.toString({...d,property:hx})}}function RS(n,e){var t,r;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n==null?void 0:n.draggable)!=null?t:e.draggable,droppable:(r=n==null?void 0:n.droppable)!=null?r:e.droppable}}Be.Down,Be.Right,Be.Up,Be.Left;function Um(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function TS(n){if(Array.isArray(n))return n}function DS(n,e,t){return(e=_S(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function jS(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,l,a,c=[],h=!0,d=!1;try{if(l=(t=t.call(n)).next,e!==0)for(;!(h=(r=l.call(t)).done)&&(c.push(r.value),c.length!==e);h=!0);}catch(p){d=!0,s=p}finally{try{if(!h&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(d)throw s}}return c}}function LS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Km(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xm(Object(t),!0).forEach(function(r){DS(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Xm(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function IS(n,e){if(n==null)return{};var t,r,s=BS(n,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(r=0;r<l.length;r++)t=l[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}function BS(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function zS(n,e){return TS(n)||jS(n,e)||HS(n,e)||LS()}function FS(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function _S(n){var e=FS(n,"string");return typeof e=="symbol"?e:e+""}function HS(n,e){if(n){if(typeof n=="string")return Um(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Um(n,e):void 0}}function VS(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Gm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qm(Object(t),!0).forEach(function(r){VS(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qm(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function WS(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){return e.reduceRight(function(s,l){return l(s)},r)}}function Eo(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return s.length>=n.length?n.apply(this,s):function(){for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];return e.apply(t,[].concat(s,c))}}}function cu(n){return{}.toString.call(n).includes("Object")}function QS(n){return!Object.keys(n).length}function Ko(n){return typeof n=="function"}function $S(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function US(n,e){return cu(e)||ui("changeType"),Object.keys(e).some(function(t){return!$S(n,t)})&&ui("changeField"),e}function XS(n){Ko(n)||ui("selectorType")}function KS(n){Ko(n)||cu(n)||ui("handlerType"),cu(n)&&Object.values(n).some(function(e){return!Ko(e)})&&ui("handlersType")}function qS(n){n||ui("initialIsRequired"),cu(n)||ui("initialType"),QS(n)&&ui("initialContent")}function GS(n,e){throw new Error(n[e]||n.default)}var YS={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},ui=Eo(GS)(YS),Oa={changes:US,selector:XS,handler:KS,initial:qS};function JS(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Oa.initial(n),Oa.handler(e);var t={current:n},r=Eo(t2)(t,e),s=Eo(e2)(t),l=Eo(Oa.changes)(n),a=Eo(ZS)(t);function c(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(p){return p};return Oa.selector(d),d(t.current)}function h(d){WS(r,s,l,a)(d)}return[c,h]}function ZS(n,e){return Ko(e)?e(n.current):e}function e2(n,e){return n.current=Gm(Gm({},n.current),e),e}function t2(n,e,t){return Ko(e)?e(n.current):Object.keys(t).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,n.current[r])}),t}var n2={create:JS},r2={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function i2(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return s.length>=n.length?n.apply(this,s):function(){for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];return e.apply(t,[].concat(s,c))}}}function s2(n){return{}.toString.call(n).includes("Object")}function o2(n){return n||Ym("configIsRequired"),s2(n)||Ym("configType"),n.urls?(l2(),{paths:{vs:n.urls.monacoBase}}):n}function l2(){console.warn(fx.deprecation)}function a2(n,e){throw new Error(n[e]||n.default)}var fx={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Ym=i2(a2)(fx),u2={config:o2},c2=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return t.reduceRight(function(l,a){return a(l)},s)}};function dx(n,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&n[t]&&Object.assign(e[t],dx(n[t],e[t]))}),Km(Km({},n),e)}var h2={type:"cancelation",msg:"operation is manually canceled"};function Th(n){var e=!1,t=new Promise(function(r,s){n.then(function(l){return e?s(h2):r(l)}),n.catch(s)});return t.cancel=function(){return e=!0},t}var f2=["monaco"],d2=n2.create({config:r2,isInitialized:!1,resolve:null,reject:null,monaco:null}),px=zS(d2,2),ul=px[0],Ru=px[1];function p2(n){var e=u2.config(n),t=e.monaco,r=IS(e,f2);Ru(function(s){return{config:dx(s.config,r),monaco:t}})}function g2(){var n=ul(function(e){var t=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:t,isInitialized:r,resolve:s}});if(!n.isInitialized){if(Ru({isInitialized:!0}),n.monaco)return n.resolve(n.monaco),Th(Dh);if(window.monaco&&window.monaco.editor)return gx(window.monaco),n.resolve(window.monaco),Th(Dh);c2(m2,x2)(v2)}return Th(Dh)}function m2(n){return document.body.appendChild(n)}function y2(n){var e=document.createElement("script");return n&&(e.src=n),e}function x2(n){var e=ul(function(r){var s=r.config,l=r.reject;return{config:s,reject:l}}),t=y2("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return n()},t.onerror=e.reject,t}function v2(){var n=ul(function(t){var r=t.config,s=t.resolve,l=t.reject;return{config:r,resolve:s,reject:l}}),e=window.require;e.config(n.config),e(["vs/editor/editor.main"],function(t){var r=t.m||t;gx(r),n.resolve(r)},function(t){n.reject(t)})}function gx(n){ul().monaco||Ru({monaco:n})}function w2(){return ul(function(n){var e=n.monaco;return e})}var Dh=new Promise(function(n,e){return Ru({resolve:n,reject:e})}),mx={config:p2,init:g2,__getMonacoInstance:w2},k2={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},jh=k2,b2={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},S2=b2;function C2({children:n}){return ct.createElement("div",{style:S2.container},n)}var O2=C2,P2=O2;function N2({width:n,height:e,isEditorReady:t,loading:r,_ref:s,className:l,wrapperProps:a}){return ct.createElement("section",{style:{...jh.wrapper,width:n,height:e},...a},!t&&ct.createElement(P2,null,r),ct.createElement("div",{ref:s,style:{...jh.fullWidth,...!t&&jh.hide},className:l}))}var A2=N2,yx=b.memo(A2);function E2(n){b.useEffect(n,[])}var xx=E2;function M2(n,e,t=!0){let r=b.useRef(!0);b.useEffect(r.current||!t?()=>{r.current=!1}:n,e)}var gn=M2;function Bo(){}function fs(n,e,t,r){return R2(n,r)||T2(n,e,t,r)}function R2(n,e){return n.editor.getModel(vx(n,e))}function T2(n,e,t,r){return n.editor.createModel(e,t,r?vx(n,r):void 0)}function vx(n,e){return n.Uri.parse(e)}function D2({original:n,modified:e,language:t,originalLanguage:r,modifiedLanguage:s,originalModelPath:l,modifiedModelPath:a,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:h=!1,theme:d="light",loading:p="Loading...",options:m={},height:v="100%",width:w="100%",className:S,wrapperProps:C={},beforeMount:O=Bo,onMount:N=Bo}){let[E,T]=b.useState(!1),[I,R]=b.useState(!0),L=b.useRef(null),j=b.useRef(null),H=b.useRef(null),W=b.useRef(N),V=b.useRef(O),q=b.useRef(!1);xx(()=>{let X=mx.init();return X.then(G=>(j.current=G)&&R(!1)).catch(G=>(G==null?void 0:G.type)!=="cancelation"&&console.error("Monaco initialization: error:",G)),()=>L.current?ue():X.cancel()}),gn(()=>{if(L.current&&j.current){let X=L.current.getOriginalEditor(),G=fs(j.current,n||"",r||t||"text",l||"");G!==X.getModel()&&X.setModel(G)}},[l],E),gn(()=>{if(L.current&&j.current){let X=L.current.getModifiedEditor(),G=fs(j.current,e||"",s||t||"text",a||"");G!==X.getModel()&&X.setModel(G)}},[a],E),gn(()=>{let X=L.current.getModifiedEditor();X.getOption(j.current.editor.EditorOption.readOnly)?X.setValue(e||""):e!==X.getValue()&&(X.executeEdits("",[{range:X.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),X.pushUndoStop())},[e],E),gn(()=>{var X,G;(G=(X=L.current)==null?void 0:X.getModel())==null||G.original.setValue(n||"")},[n],E),gn(()=>{let{original:X,modified:G}=L.current.getModel();j.current.editor.setModelLanguage(X,r||t||"text"),j.current.editor.setModelLanguage(G,s||t||"text")},[t,r,s],E),gn(()=>{var X;(X=j.current)==null||X.editor.setTheme(d)},[d],E),gn(()=>{var X;(X=L.current)==null||X.updateOptions(m)},[m],E);let $=b.useCallback(()=>{var se;if(!j.current)return;V.current(j.current);let X=fs(j.current,n||"",r||t||"text",l||""),G=fs(j.current,e||"",s||t||"text",a||"");(se=L.current)==null||se.setModel({original:X,modified:G})},[t,e,s,n,r,l,a]),Z=b.useCallback(()=>{var X;!q.current&&H.current&&(L.current=j.current.editor.createDiffEditor(H.current,{automaticLayout:!0,...m}),$(),(X=j.current)==null||X.editor.setTheme(d),T(!0),q.current=!0)},[m,d,$]);b.useEffect(()=>{E&&W.current(L.current,j.current)},[E]),b.useEffect(()=>{!I&&!E&&Z()},[I,E,Z]);function ue(){var G,se,Q,ee;let X=(G=L.current)==null?void 0:G.getModel();c||((se=X==null?void 0:X.original)==null||se.dispose()),h||((Q=X==null?void 0:X.modified)==null||Q.dispose()),(ee=L.current)==null||ee.dispose()}return ct.createElement(yx,{width:w,height:v,isEditorReady:E,loading:p,_ref:H,className:S,wrapperProps:C})}var j2=D2;b.memo(j2);function L2(n){let e=b.useRef();return b.useEffect(()=>{e.current=n},[n]),e.current}var I2=L2,Pa=new Map;function B2({defaultValue:n,defaultLanguage:e,defaultPath:t,value:r,language:s,path:l,theme:a="light",line:c,loading:h="Loading...",options:d={},overrideServices:p={},saveViewState:m=!0,keepCurrentModel:v=!1,width:w="100%",height:S="100%",className:C,wrapperProps:O={},beforeMount:N=Bo,onMount:E=Bo,onChange:T,onValidate:I=Bo}){let[R,L]=b.useState(!1),[j,H]=b.useState(!0),W=b.useRef(null),V=b.useRef(null),q=b.useRef(null),$=b.useRef(E),Z=b.useRef(N),ue=b.useRef(),X=b.useRef(r),G=I2(l),se=b.useRef(!1),Q=b.useRef(!1);xx(()=>{let A=mx.init();return A.then(B=>(W.current=B)&&H(!1)).catch(B=>(B==null?void 0:B.type)!=="cancelation"&&console.error("Monaco initialization: error:",B)),()=>V.current?J():A.cancel()}),gn(()=>{var B,le,pe,me;let A=fs(W.current,n||r||"",e||s||"",l||t||"");A!==((B=V.current)==null?void 0:B.getModel())&&(m&&Pa.set(G,(le=V.current)==null?void 0:le.saveViewState()),(pe=V.current)==null||pe.setModel(A),m&&((me=V.current)==null||me.restoreViewState(Pa.get(l))))},[l],R),gn(()=>{var A;(A=V.current)==null||A.updateOptions(d)},[d],R),gn(()=>{!V.current||r===void 0||(V.current.getOption(W.current.editor.EditorOption.readOnly)?V.current.setValue(r):r!==V.current.getValue()&&(Q.current=!0,V.current.executeEdits("",[{range:V.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),V.current.pushUndoStop(),Q.current=!1))},[r],R),gn(()=>{var B,le;let A=(B=V.current)==null?void 0:B.getModel();A&&s&&((le=W.current)==null||le.editor.setModelLanguage(A,s))},[s],R),gn(()=>{var A;c!==void 0&&((A=V.current)==null||A.revealLine(c))},[c],R),gn(()=>{var A;(A=W.current)==null||A.editor.setTheme(a)},[a],R);let ee=b.useCallback(()=>{var A;if(!(!q.current||!W.current)&&!se.current){Z.current(W.current);let B=l||t,le=fs(W.current,r||n||"",e||s||"",B||"");V.current=(A=W.current)==null?void 0:A.editor.create(q.current,{model:le,automaticLayout:!0,...d},p),m&&V.current.restoreViewState(Pa.get(B)),W.current.editor.setTheme(a),c!==void 0&&V.current.revealLine(c),L(!0),se.current=!0}},[n,e,t,r,s,l,d,p,m,a,c]);b.useEffect(()=>{R&&$.current(V.current,W.current)},[R]),b.useEffect(()=>{!j&&!R&&ee()},[j,R,ee]),X.current=r,b.useEffect(()=>{var A,B;R&&T&&((A=ue.current)==null||A.dispose(),ue.current=(B=V.current)==null?void 0:B.onDidChangeModelContent(le=>{Q.current||T(V.current.getValue(),le)}))},[R,T]),b.useEffect(()=>{if(R){let A=W.current.editor.onDidChangeMarkers(B=>{var pe;let le=(pe=V.current.getModel())==null?void 0:pe.uri;if(le&&B.find(me=>me.path===le.path)){let me=W.current.editor.getModelMarkers({resource:le});I==null||I(me)}});return()=>{A==null||A.dispose()}}return()=>{}},[R,I]);function J(){var A,B;(A=ue.current)==null||A.dispose(),v?m&&Pa.set(l,V.current.saveViewState()):(B=V.current.getModel())==null||B.dispose(),V.current.dispose()}return ct.createElement(yx,{width:w,height:S,isEditorReady:R,loading:h,_ref:q,className:C,wrapperProps:O})}var z2=B2,F2=b.memo(z2),_2=F2;let ff=[],wx=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?wx:ff).push(t=t+n[e])})();function H2(n){if(n<768)return!1;for(let e=0,t=ff.length;;){let r=e+t>>1;if(n<ff[r])t=r;else if(n>=wx[r])e=r+1;else return!0;if(e==t)return!1}}function Jm(n){return n>=127462&&n<=127487}const Zm=8205;function V2(n,e,t=!0,r=!0){return(t?kx:W2)(n,e,r)}function kx(n,e,t){if(e==n.length)return e;e&&bx(n.charCodeAt(e))&&Sx(n.charCodeAt(e-1))&&e--;let r=Lh(n,e);for(e+=e0(r);e<n.length;){let s=Lh(n,e);if(r==Zm||s==Zm||t&&H2(s))e+=e0(s),r=s;else if(Jm(s)){let l=0,a=e-2;for(;a>=0&&Jm(Lh(n,a));)l++,a-=2;if(l%2==0)break;e+=2}else break}return e}function W2(n,e,t){for(;e>0;){let r=kx(n,e-2,t);if(r<e)return r;e--}return 0}function Lh(n,e){let t=n.charCodeAt(e);if(!Sx(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return bx(r)?(t-55296<<10)+(r-56320)+65536:t}function bx(n){return n>=56320&&n<57344}function Sx(n){return n>=55296&&n<56320}function e0(n){return n<65536?1:2}class Le{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=Ss(this,e,t);let s=[];return this.decompose(0,e,s,2),r.length&&r.decompose(0,r.length,s,3),this.decompose(t,this.length,s,1),ir.from(s,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Ss(this,e,t);let r=[];return this.decompose(e,t,r,0),ir.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),s=new zo(this),l=new zo(e);for(let a=t,c=t;;){if(s.next(a),l.next(a),a=0,s.lineBreak!=l.lineBreak||s.done!=l.done||s.value!=l.value)return!1;if(c+=s.value.length,s.done||c>=r)return!0}}iter(e=1){return new zo(this,e)}iterRange(e,t=this.length){return new Cx(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;r=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Ox(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Le.empty:e.length<=32?new ut(e):ir.from(ut.split(e,[]))}}class ut extends Le{constructor(e,t=Q2(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,s){for(let l=0;;l++){let a=this.text[l],c=s+a.length;if((t?r:c)>=e)return new $2(s,c,r,a);s=c+1,r++}}decompose(e,t,r,s){let l=e<=0&&t>=this.length?this:new ut(t0(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let a=r.pop(),c=Ka(l.text,a.text.slice(),0,l.length);if(c.length<=32)r.push(new ut(c,a.length+l.length));else{let h=c.length>>1;r.push(new ut(c.slice(0,h)),new ut(c.slice(h)))}}else r.push(l)}replace(e,t,r){if(!(r instanceof ut))return super.replace(e,t,r);[e,t]=Ss(this,e,t);let s=Ka(this.text,Ka(r.text,t0(this.text,0,e)),t),l=this.length+r.length-(t-e);return s.length<=32?new ut(s,l):ir.from(ut.split(s,[]),l)}sliceString(e,t=this.length,r=`
`){[e,t]=Ss(this,e,t);let s="";for(let l=0,a=0;l<=t&&a<this.text.length;a++){let c=this.text[a],h=l+c.length;l>e&&a&&(s+=r),e<h&&t>l&&(s+=c.slice(Math.max(0,e-l),t-l)),l=h+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],s=-1;for(let l of e)r.push(l),s+=l.length+1,r.length==32&&(t.push(new ut(r,s)),r=[],s=-1);return s>-1&&t.push(new ut(r,s)),t}}class ir extends Le{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,s){for(let l=0;;l++){let a=this.children[l],c=s+a.length,h=r+a.lines-1;if((t?h:c)>=e)return a.lineInner(e,t,r,s);s=c+1,r=h+1}}decompose(e,t,r,s){for(let l=0,a=0;a<=t&&l<this.children.length;l++){let c=this.children[l],h=a+c.length;if(e<=h&&t>=a){let d=s&((a<=e?1:0)|(h>=t?2:0));a>=e&&h<=t&&!d?r.push(c):c.decompose(e-a,t-a,r,d)}a=h+1}}replace(e,t,r){if([e,t]=Ss(this,e,t),r.lines<this.lines)for(let s=0,l=0;s<this.children.length;s++){let a=this.children[s],c=l+a.length;if(e>=l&&t<=c){let h=a.replace(e-l,t-l,r),d=this.lines-a.lines+h.lines;if(h.lines<d>>4&&h.lines>d>>6){let p=this.children.slice();return p[s]=h,new ir(p,this.length-(t-e)+r.length)}return super.replace(l,c,h)}l=c+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=Ss(this,e,t);let s="";for(let l=0,a=0;l<this.children.length&&a<=t;l++){let c=this.children[l],h=a+c.length;a>e&&l&&(s+=r),e<h&&t>a&&(s+=c.sliceString(e-a,t-a,r)),a=h+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof ir))return 0;let r=0,[s,l,a,c]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,l+=t){if(s==a||l==c)return r;let h=this.children[s],d=e.children[l];if(h!=d)return r+h.scanIdentical(d,t);r+=h.length+1}}static from(e,t=e.reduce((r,s)=>r+s.length+1,-1)){let r=0;for(let w of e)r+=w.lines;if(r<32){let w=[];for(let S of e)S.flatten(w);return new ut(w,t)}let s=Math.max(32,r>>5),l=s<<1,a=s>>1,c=[],h=0,d=-1,p=[];function m(w){let S;if(w.lines>l&&w instanceof ir)for(let C of w.children)m(C);else w.lines>a&&(h>a||!h)?(v(),c.push(w)):w instanceof ut&&h&&(S=p[p.length-1])instanceof ut&&w.lines+S.lines<=32?(h+=w.lines,d+=w.length+1,p[p.length-1]=new ut(S.text.concat(w.text),S.length+1+w.length)):(h+w.lines>s&&v(),h+=w.lines,d+=w.length+1,p.push(w))}function v(){h!=0&&(c.push(p.length==1?p[0]:ir.from(p,d)),d=-1,h=p.length=0)}for(let w of e)m(w);return v(),c.length==1?c[0]:new ir(c,t)}}Le.empty=new ut([""],0);function Q2(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Ka(n,e,t=0,r=1e9){for(let s=0,l=0,a=!0;l<n.length&&s<=r;l++){let c=n[l],h=s+c.length;h>=t&&(h>r&&(c=c.slice(0,r-s)),s<t&&(c=c.slice(t-s)),a?(e[e.length-1]+=c,a=!1):e.push(c)),s=h+1}return e}function t0(n,e,t){return Ka(n,[""],e,t)}class zo{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof ut?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,s=this.nodes[r],l=this.offsets[r],a=l>>1,c=s instanceof ut?s.text.length:s.children.length;if(a==(t>0?c:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof ut){let h=s.text[a+(t<0?-1:0)];if(this.offsets[r]+=t,h.length>Math.max(0,e))return this.value=e==0?h:t>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=s.children[a+(t<0?-1:0)];e>h.length?(e-=h.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(h),this.offsets.push(t>0?1:(h instanceof ut?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Cx{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new zo(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=r?s:t<0?s.slice(s.length-r):s.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Ox{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Le.prototype[Symbol.iterator]=function(){return this.iter()},zo.prototype[Symbol.iterator]=Cx.prototype[Symbol.iterator]=Ox.prototype[Symbol.iterator]=function(){return this});class $2{constructor(e,t,r,s){this.from=e,this.to=t,this.number=r,this.text=s}get length(){return this.to-this.from}}function Ss(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function Xt(n,e,t=!0,r=!0){return V2(n,e,t,r)}function U2(n){return n>=56320&&n<57344}function X2(n){return n>=55296&&n<56320}function K2(n,e){let t=n.charCodeAt(e);if(!X2(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return U2(r)?(t-55296<<10)+(r-56320)+65536:t}function q2(n){return n<65536?1:2}const df=/\r\n?|\n/;var mn=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(mn||(mn={}));class Mr{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,s=0;t<this.sections.length;){let l=this.sections[t++],a=this.sections[t++];a<0?(e(r,s,l),s+=l):s+=a,r+=l}}iterChangedRanges(e,t=!1){pf(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];s<0?e.push(r,s):e.push(s,r)}return new Mr(e)}composeDesc(e){return this.empty?e:e.empty?this:Px(this,e)}mapDesc(e,t=!1){return e.empty?this:gf(this,e,t)}mapPos(e,t=-1,r=mn.Simple){let s=0,l=0;for(let a=0;a<this.sections.length;){let c=this.sections[a++],h=this.sections[a++],d=s+c;if(h<0){if(d>e)return l+(e-s);l+=c}else{if(r!=mn.Simple&&d>=e&&(r==mn.TrackDel&&s<e&&d>e||r==mn.TrackBefore&&s<e||r==mn.TrackAfter&&d>e))return null;if(d>e||d==e&&t<0&&!c)return e==s||t<0?l:l+h;l+=h}s=d}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return l}touchesRange(e,t=e){for(let r=0,s=0;r<this.sections.length&&s<=t;){let l=this.sections[r++],a=this.sections[r++],c=s+l;if(a>=0&&s<=t&&c>=e)return s<e&&c>t?"cover":!0;s=c}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+r+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Mr(e)}static create(e){return new Mr(e)}}class Ot extends Mr{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return pf(this,(t,r,s,l,a)=>e=e.replace(s,s+(r-t),a),!1),e}mapDesc(e,t=!1){return gf(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let s=0,l=0;s<t.length;s+=2){let a=t[s],c=t[s+1];if(c>=0){t[s]=c,t[s+1]=a;let h=s>>1;for(;r.length<h;)r.push(Le.empty);r.push(a?e.slice(l,l+a):Le.empty)}l+=a}return new Ot(t,r)}compose(e){return this.empty?e:e.empty?this:Px(this,e,!0)}map(e,t=!1){return e.empty?this:gf(this,e,t,!0)}iterChanges(e,t=!1){pf(this,e,t)}get desc(){return Mr.create(this.sections)}filter(e){let t=[],r=[],s=[],l=new qo(this);e:for(let a=0,c=0;;){let h=a==e.length?1e9:e[a++];for(;c<h||c==h&&l.len==0;){if(l.done)break e;let p=Math.min(l.len,h-c);Ft(s,p,-1);let m=l.ins==-1?-1:l.off==0?l.ins:0;Ft(t,p,m),m>0&&si(r,t,l.text),l.forward(p),c+=p}let d=e[a++];for(;c<d;){if(l.done)break e;let p=Math.min(l.len,d-c);Ft(t,p,-1),Ft(s,p,l.ins==-1?-1:l.off==0?l.ins:0),l.forward(p),c+=p}}return{changes:new Ot(t,r),filtered:Mr.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],s=this.sections[t+1];s<0?e.push(r):s==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let s=[],l=[],a=0,c=null;function h(p=!1){if(!p&&!s.length)return;a<t&&Ft(s,t-a,-1);let m=new Ot(s,l);c=c?c.compose(m.map(c)):m,s=[],l=[],a=0}function d(p){if(Array.isArray(p))for(let m of p)d(m);else if(p instanceof Ot){if(p.length!=t)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${t})`);h(),c=c?c.compose(p.map(c)):p}else{let{from:m,to:v=m,insert:w}=p;if(m>v||m<0||v>t)throw new RangeError(`Invalid change range ${m} to ${v} (in doc of length ${t})`);let S=w?typeof w=="string"?Le.of(w.split(r||df)):w:Le.empty,C=S.length;if(m==v&&C==0)return;m<a&&h(),m>a&&Ft(s,m-a,-1),Ft(s,v-m,C),si(l,s,S),a=v}}return d(e),h(!c),c}static empty(e){return new Ot(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")t.push(l,-1);else{if(!Array.isArray(l)||typeof l[0]!="number"||l.some((a,c)=>c&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(l.length==1)t.push(l[0],0);else{for(;r.length<s;)r.push(Le.empty);r[s]=Le.of(l.slice(1)),t.push(l[0],r[s].length)}}}return new Ot(t,r)}static createSet(e,t){return new Ot(e,t)}}function Ft(n,e,t,r=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:s>=0&&e==0&&n[s]==0?n[s+1]+=t:r?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function si(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Le.empty);n.push(t)}}function pf(n,e,t){let r=n.inserted;for(let s=0,l=0,a=0;a<n.sections.length;){let c=n.sections[a++],h=n.sections[a++];if(h<0)s+=c,l+=c;else{let d=s,p=l,m=Le.empty;for(;d+=c,p+=h,h&&r&&(m=m.append(r[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)c=n.sections[a++],h=n.sections[a++];e(s,d,l,p,m),s=d,l=p}}}function gf(n,e,t,r=!1){let s=[],l=r?[]:null,a=new qo(n),c=new qo(e);for(let h=-1;;){if(a.done&&c.len||c.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&c.ins==-1){let d=Math.min(a.len,c.len);Ft(s,d,-1),a.forward(d),c.forward(d)}else if(c.ins>=0&&(a.ins<0||h==a.i||a.off==0&&(c.len<a.len||c.len==a.len&&!t))){let d=c.len;for(Ft(s,c.ins,-1);d;){let p=Math.min(a.len,d);a.ins>=0&&h<a.i&&a.len<=p&&(Ft(s,0,a.ins),l&&si(l,s,a.text),h=a.i),a.forward(p),d-=p}c.next()}else if(a.ins>=0){let d=0,p=a.len;for(;p;)if(c.ins==-1){let m=Math.min(p,c.len);d+=m,p-=m,c.forward(m)}else if(c.ins==0&&c.len<p)p-=c.len,c.next();else break;Ft(s,d,h<a.i?a.ins:0),l&&h<a.i&&si(l,s,a.text),h=a.i,a.forward(a.len-p)}else{if(a.done&&c.done)return l?Ot.createSet(s,l):Mr.create(s);throw new Error("Mismatched change set lengths")}}}function Px(n,e,t=!1){let r=[],s=t?[]:null,l=new qo(n),a=new qo(e);for(let c=!1;;){if(l.done&&a.done)return s?Ot.createSet(r,s):Mr.create(r);if(l.ins==0)Ft(r,l.len,0,c),l.next();else if(a.len==0&&!a.done)Ft(r,0,a.ins,c),s&&si(s,r,a.text),a.next();else{if(l.done||a.done)throw new Error("Mismatched change set lengths");{let h=Math.min(l.len2,a.len),d=r.length;if(l.ins==-1){let p=a.ins==-1?-1:a.off?0:a.ins;Ft(r,h,p,c),s&&p&&si(s,r,a.text)}else a.ins==-1?(Ft(r,l.off?0:l.len,h,c),s&&si(s,r,l.textBit(h))):(Ft(r,l.off?0:l.len,a.off?0:a.ins,c),s&&!a.off&&si(s,r,a.text));c=(l.ins>h||a.ins>=0&&a.len>h)&&(c||r.length>d),l.forward2(h),a.forward(h)}}}}class qo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Le.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Le.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Ii{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,s;return this.empty?r=s=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),r==this.from&&s==this.to?this:new Ii(r,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ie.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ie.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ie.range(e.anchor,e.head)}static create(e,t,r){return new Ii(e,t,r)}}class ie{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ie.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ie([this.main],0)}addRange(e,t=!0){return ie.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,ie.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ie(e.ranges.map(t=>Ii.fromJSON(t)),e.main)}static single(e,t=e){return new ie([ie.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,s=0;s<e.length;s++){let l=e[s];if(l.empty?l.from<=r:l.from<r)return ie.normalized(e.slice(),t);r=l.to}return new ie(e,t)}static cursor(e,t=0,r,s){return Ii.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(s??16777215)<<6)}static range(e,t,r,s){let l=(r??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?Ii.create(t,e,48|l):Ii.create(e,t,(t>e?8:0)|l)}static normalized(e,t=0){let r=e[t];e.sort((s,l)=>s.from-l.from),t=e.indexOf(r);for(let s=1;s<e.length;s++){let l=e[s],a=e[s-1];if(l.empty?l.from<=a.to:l.from<a.to){let c=a.from,h=Math.max(l.to,a.to);s<=t&&t--,e.splice(--s,2,l.anchor>l.head?ie.range(h,c):ie.range(c,h))}}return new ie(e,t)}}function Nx(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let vd=0;class be{constructor(e,t,r,s,l){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=s,this.id=vd++,this.default=e([]),this.extensions=typeof l=="function"?l(this):l}get reader(){return this}static define(e={}){return new be(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:wd),!!e.static,e.enables)}of(e){return new qa([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new qa(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new qa(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function wd(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class qa{constructor(e,t,r,s){this.dependencies=e,this.facet=t,this.type=r,this.value=s,this.id=vd++}dynamicSlot(e){var t;let r=this.value,s=this.facet.compareInput,l=this.id,a=e[l]>>1,c=this.type==2,h=!1,d=!1,p=[];for(let m of this.dependencies)m=="doc"?h=!0:m=="selection"?d=!0:(((t=e[m.id])!==null&&t!==void 0?t:1)&1)==0&&p.push(e[m.id]);return{create(m){return m.values[a]=r(m),1},update(m,v){if(h&&v.docChanged||d&&(v.docChanged||v.selection)||mf(m,p)){let w=r(m);if(c?!n0(w,m.values[a],s):!s(w,m.values[a]))return m.values[a]=w,1}return 0},reconfigure:(m,v)=>{let w,S=v.config.address[l];if(S!=null){let C=fu(v,S);if(this.dependencies.every(O=>O instanceof be?v.facet(O)===m.facet(O):O instanceof Vi?v.field(O,!1)==m.field(O,!1):!0)||(c?n0(w=r(m),C,s):s(w=r(m),C)))return m.values[a]=C,0}else w=r(m);return m.values[a]=w,1}}}}function n0(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function mf(n,e){let t=!1;for(let r of e)Fo(n,r)&1&&(t=!0);return t}function G2(n,e,t){let r=t.map(h=>n[h.id]),s=t.map(h=>h.type),l=r.filter(h=>!(h&1)),a=n[e.id]>>1;function c(h){let d=[];for(let p=0;p<r.length;p++){let m=fu(h,r[p]);if(s[p]==2)for(let v of m)d.push(v);else d.push(m)}return e.combine(d)}return{create(h){for(let d of r)Fo(h,d);return h.values[a]=c(h),1},update(h,d){if(!mf(h,l))return 0;let p=c(h);return e.compare(p,h.values[a])?0:(h.values[a]=p,1)},reconfigure(h,d){let p=mf(h,r),m=d.config.facets[e.id],v=d.facet(e);if(m&&!p&&wd(t,m))return h.values[a]=v,0;let w=c(h);return e.compare(w,v)?(h.values[a]=v,0):(h.values[a]=w,1)}}}const Na=be.define({static:!0});class Vi{constructor(e,t,r,s,l){this.id=e,this.createF=t,this.updateF=r,this.compareF=s,this.spec=l,this.provides=void 0}static define(e){let t=new Vi(vd++,e.create,e.update,e.compare||((r,s)=>r===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Na).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,s)=>{let l=r.values[t],a=this.updateF(l,s);return this.compareF(l,a)?0:(r.values[t]=a,1)},reconfigure:(r,s)=>{let l=r.facet(Na),a=s.facet(Na),c;return(c=l.find(h=>h.field==this))&&c!=a.find(h=>h.field==this)?(r.values[t]=c.create(r),1):s.config.address[this.id]!=null?(r.values[t]=s.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,Na.of({field:this,create:e})]}get extension(){return this}}const ji={lowest:4,low:3,default:2,high:1,highest:0};function So(n){return e=>new Ax(e,n)}const Tu={highest:So(ji.highest),high:So(ji.high),default:So(ji.default),low:So(ji.low),lowest:So(ji.lowest)};class Ax{constructor(e,t){this.inner=e,this.prec=t}}class cl{of(e){return new yf(this,e)}reconfigure(e){return cl.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class yf{constructor(e,t){this.compartment=e,this.inner=t}}class hu{constructor(e,t,r,s,l,a){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=s,this.staticValues=l,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let s=[],l=Object.create(null),a=new Map;for(let v of Y2(e,t,a))v instanceof Vi?s.push(v):(l[v.facet.id]||(l[v.facet.id]=[])).push(v);let c=Object.create(null),h=[],d=[];for(let v of s)c[v.id]=d.length<<1,d.push(w=>v.slot(w));let p=r==null?void 0:r.config.facets;for(let v in l){let w=l[v],S=w[0].facet,C=p&&p[v]||[];if(w.every(O=>O.type==0))if(c[S.id]=h.length<<1|1,wd(C,w))h.push(r.facet(S));else{let O=S.combine(w.map(N=>N.value));h.push(r&&S.compare(O,r.facet(S))?r.facet(S):O)}else{for(let O of w)O.type==0?(c[O.id]=h.length<<1|1,h.push(O.value)):(c[O.id]=d.length<<1,d.push(N=>O.dynamicSlot(N)));c[S.id]=d.length<<1,d.push(O=>G2(O,S,w))}}let m=d.map(v=>v(c));return new hu(e,a,m,c,h,l)}}function Y2(n,e,t){let r=[[],[],[],[],[]],s=new Map;function l(a,c){let h=s.get(a);if(h!=null){if(h<=c)return;let d=r[h].indexOf(a);d>-1&&r[h].splice(d,1),a instanceof yf&&t.delete(a.compartment)}if(s.set(a,c),Array.isArray(a))for(let d of a)l(d,c);else if(a instanceof yf){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(a.compartment)||a.inner;t.set(a.compartment,d),l(d,c)}else if(a instanceof Ax)l(a.inner,a.prec);else if(a instanceof Vi)r[c].push(a),a.provides&&l(a.provides,c);else if(a instanceof qa)r[c].push(a),a.facet.extensions&&l(a.facet.extensions,ji.default);else{let d=a.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(d,c)}}return l(n,ji.default),r.reduce((a,c)=>a.concat(c))}function Fo(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function fu(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Ex=be.define(),xf=be.define({combine:n=>n.some(e=>e),static:!0}),Mx=be.define({combine:n=>n.length?n[0]:void 0,static:!0}),Rx=be.define(),Tx=be.define(),Dx=be.define(),jx=be.define({combine:n=>n.length?n[0]:!1});class Is{constructor(e,t){this.type=e,this.value=t}static define(){return new J2}}class J2{of(e){return new Is(this,e)}}class Z2{constructor(e){this.map=e}of(e){return new vt(this,e)}}class vt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new vt(this.type,t)}is(e){return this.type==e}static define(e={}){return new Z2(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let s of e){let l=s.map(t);l&&r.push(l)}return r}}vt.reconfigure=vt.define();vt.appendConfig=vt.define();class Ht{constructor(e,t,r,s,l,a){this.startState=e,this.changes=t,this.selection=r,this.effects=s,this.annotations=l,this.scrollIntoView=a,this._doc=null,this._state=null,r&&Nx(r,t.newLength),l.some(c=>c.type==Ht.time)||(this.annotations=l.concat(Ht.time.of(Date.now())))}static create(e,t,r,s,l,a){return new Ht(e,t,r,s,l,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ht.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Ht.time=Is.define();Ht.userEvent=Is.define();Ht.addToHistory=Is.define();Ht.remote=Is.define();function eC(n,e){let t=[];for(let r=0,s=0;;){let l,a;if(r<n.length&&(s==e.length||e[s]>=n[r]))l=n[r++],a=n[r++];else if(s<e.length)l=e[s++],a=e[s++];else return t;!t.length||t[t.length-1]<l?t.push(l,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function Lx(n,e,t){var r;let s,l,a;return t?(s=e.changes,l=Ot.empty(e.changes.length),a=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),l=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(s)),{changes:a,selection:e.selection?e.selection.map(l):(r=n.selection)===null||r===void 0?void 0:r.map(s),effects:vt.mapEffects(n.effects,s).concat(vt.mapEffects(e.effects,l)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function vf(n,e,t){let r=e.selection,s=vs(e.annotations);return e.userEvent&&(s=s.concat(Ht.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ot?e.changes:Ot.of(e.changes||[],t,n.facet(Mx)),selection:r&&(r instanceof ie?r:ie.single(r.anchor,r.head)),effects:vs(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function Ix(n,e,t){let r=vf(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let l=1;l<e.length;l++){e[l].filter===!1&&(t=!1);let a=!!e[l].sequential;r=Lx(r,vf(n,e[l],a?r.changes.newLength:n.doc.length),a)}let s=Ht.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return nC(t?tC(s):s)}function tC(n){let e=n.startState,t=!0;for(let s of e.facet(Rx)){let l=s(n);if(l===!1){t=!1;break}Array.isArray(l)&&(t=t===!0?l:eC(t,l))}if(t!==!0){let s,l;if(t===!1)l=n.changes.invertedDesc,s=Ot.empty(e.doc.length);else{let a=n.changes.filter(t);s=a.changes,l=a.filtered.mapDesc(a.changes).invertedDesc}n=Ht.create(e,s,n.selection&&n.selection.map(l),vt.mapEffects(n.effects,l),n.annotations,n.scrollIntoView)}let r=e.facet(Tx);for(let s=r.length-1;s>=0;s--){let l=r[s](n);l instanceof Ht?n=l:Array.isArray(l)&&l.length==1&&l[0]instanceof Ht?n=l[0]:n=Ix(e,vs(l),!1)}return n}function nC(n){let e=n.startState,t=e.facet(Dx),r=n;for(let s=t.length-1;s>=0;s--){let l=t[s](n);l&&Object.keys(l).length&&(r=Lx(r,vf(e,l,n.changes.newLength),!0))}return r==n?n:Ht.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const rC=[];function vs(n){return n==null?rC:Array.isArray(n)?n:[n]}var Ar=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(Ar||(Ar={}));const iC=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let wf;try{wf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function sC(n){if(wf)return wf.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||iC.test(t)))return!0}return!1}function oC(n){return e=>{if(!/\S/.test(e))return Ar.Space;if(sC(e))return Ar.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Ar.Word;return Ar.Other}}class ze{constructor(e,t,r,s,l,a){this.config=e,this.doc=t,this.selection=r,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=l,a&&(a._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)Fo(this,c<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return Fo(this,r),fu(this,r)}update(...e){return Ix(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:s}=t;for(let c of e.effects)c.is(cl.reconfigure)?(t&&(s=new Map,t.compartments.forEach((h,d)=>s.set(d,h)),t=null),s.set(c.value.compartment,c.value.extension)):c.is(vt.reconfigure)?(t=null,r=c.value):c.is(vt.appendConfig)&&(t=null,r=vs(r).concat(c.value));let l;t?l=e.startState.values.slice():(t=hu.resolve(r,s,this),l=new ze(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(h,d)=>d.reconfigure(h,this),null).values);let a=e.startState.facet(xf)?e.newSelection:e.newSelection.asSingle();new ze(t,e.newDoc,a,l,(c,h)=>h.update(c,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ie.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),s=this.changes(r.changes),l=[r.range],a=vs(r.effects);for(let c=1;c<t.ranges.length;c++){let h=e(t.ranges[c]),d=this.changes(h.changes),p=d.map(s);for(let v=0;v<c;v++)l[v]=l[v].map(p);let m=s.mapDesc(d,!0);l.push(h.range.map(m)),s=s.compose(p),a=vt.mapEffects(a,p).concat(vt.mapEffects(vs(h.effects),m))}return{changes:s,selection:ie.create(l,t.mainIndex),effects:a}}changes(e=[]){return e instanceof Ot?e:Ot.of(e,this.doc.length,this.facet(ze.lineSeparator))}toText(e){return Le.of(e.split(this.facet(ze.lineSeparator)||df))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Fo(this,t),fu(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let s=e[r];s instanceof Vi&&this.config.address[s.id]!=null&&(t[r]=s.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(r){for(let l in r)if(Object.prototype.hasOwnProperty.call(e,l)){let a=r[l],c=e[l];s.push(a.init(h=>a.spec.fromJSON(c,h)))}}return ze.create({doc:e.doc,selection:ie.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=hu.resolve(e.extensions||[],new Map),r=e.doc instanceof Le?e.doc:Le.of((e.doc||"").split(t.staticFacet(ze.lineSeparator)||df)),s=e.selection?e.selection instanceof ie?e.selection:ie.single(e.selection.anchor,e.selection.head):ie.single(0);return Nx(s,r.length),t.staticFacet(xf)||(s=s.asSingle()),new ze(t,r,s,t.dynamicSlots.map(()=>null),(l,a)=>a.create(l),null)}get tabSize(){return this.facet(ze.tabSize)}get lineBreak(){return this.facet(ze.lineSeparator)||`
`}get readOnly(){return this.facet(jx)}phrase(e,...t){for(let r of this.facet(ze.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,s)=>{if(s=="$")return"$";let l=+(s||1);return!l||l>t.length?r:t[l-1]})),e}languageDataAt(e,t,r=-1){let s=[];for(let l of this.facet(Ex))for(let a of l(this,t,r))Object.prototype.hasOwnProperty.call(a,e)&&s.push(a[e]);return s}charCategorizer(e){return oC(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:s}=this.doc.lineAt(e),l=this.charCategorizer(e),a=e-r,c=e-r;for(;a>0;){let h=Xt(t,a,!1);if(l(t.slice(h,a))!=Ar.Word)break;a=h}for(;c<s;){let h=Xt(t,c);if(l(t.slice(c,h))!=Ar.Word)break;c=h}return a==c?null:ie.range(a+r,c+r)}}ze.allowMultipleSelections=xf;ze.tabSize=be.define({combine:n=>n.length?n[0]:4});ze.lineSeparator=Mx;ze.readOnly=jx;ze.phrases=be.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(s=>n[s]==e[s])}});ze.languageData=Ex;ze.changeFilter=Rx;ze.transactionFilter=Tx;ze.transactionExtender=Dx;cl.reconfigure=vt.define();function Bx(n,e,t={}){let r={};for(let s of n)for(let l of Object.keys(s)){let a=s[l],c=r[l];if(c===void 0)r[l]=a;else if(!(c===a||a===void 0))if(Object.hasOwnProperty.call(t,l))r[l]=t[l](c,a);else throw new Error("Config merge conflict for field "+l)}for(let s in e)r[s]===void 0&&(r[s]=e[s]);return r}class Cs{eq(e){return this==e}range(e,t=e){return kf.create(e,t,this)}}Cs.prototype.startSide=Cs.prototype.endSide=0;Cs.prototype.point=!1;Cs.prototype.mapMode=mn.TrackDel;let kf=class zx{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new zx(e,t,r)}};function bf(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class kd{constructor(e,t,r,s){this.from=e,this.to=t,this.value=r,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,s=0){let l=r?this.to:this.from;for(let a=s,c=l.length;;){if(a==c)return a;let h=a+c>>1,d=l[h]-e||(r?this.value[h].endSide:this.value[h].startSide)-t;if(h==a)return d>=0?a:c;d>=0?c=h:a=h+1}}between(e,t,r,s){for(let l=this.findIndex(t,-1e9,!0),a=this.findIndex(r,1e9,!1,l);l<a;l++)if(s(this.from[l]+e,this.to[l]+e,this.value[l])===!1)return!1}map(e,t){let r=[],s=[],l=[],a=-1,c=-1;for(let h=0;h<this.value.length;h++){let d=this.value[h],p=this.from[h]+e,m=this.to[h]+e,v,w;if(p==m){let S=t.mapPos(p,d.startSide,d.mapMode);if(S==null||(v=w=S,d.startSide!=d.endSide&&(w=t.mapPos(p,d.endSide),w<v)))continue}else if(v=t.mapPos(p,d.startSide),w=t.mapPos(m,d.endSide),v>w||v==w&&d.startSide>0&&d.endSide<=0)continue;(w-v||d.endSide-d.startSide)<0||(a<0&&(a=v),d.point&&(c=Math.max(c,w-v)),r.push(d),s.push(v-a),l.push(w-a))}return{mapped:r.length?new kd(s,l,r,c):null,pos:a}}}class Fe{constructor(e,t,r,s){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=s}static create(e,t,r,s){return new Fe(e,t,r,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:s=0,filterTo:l=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(r&&(t=t.slice().sort(bf)),this.isEmpty)return t.length?Fe.of(t):this;let c=new Fx(this,null,-1).goto(0),h=0,d=[],p=new Go;for(;c.value||h<t.length;)if(h<t.length&&(c.from-t[h].from||c.startSide-t[h].value.startSide)>=0){let m=t[h++];p.addInner(m.from,m.to,m.value)||d.push(m)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(h==t.length||this.chunkEnd(c.chunkIndex)<t[h].from)&&(!a||s>this.chunkEnd(c.chunkIndex)||l<this.chunkPos[c.chunkIndex])&&p.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!a||s>c.to||l<c.from||a(c.from,c.to,c.value))&&(p.addInner(c.from,c.to,c.value)||d.push(kf.create(c.from,c.to,c.value))),c.next());return p.finishInner(this.nextLayer.isEmpty&&!d.length?Fe.empty:this.nextLayer.update({add:d,filter:a,filterFrom:s,filterTo:l}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],s=-1;for(let a=0;a<this.chunk.length;a++){let c=this.chunkPos[a],h=this.chunk[a],d=e.touchesRange(c,c+h.length);if(d===!1)s=Math.max(s,h.maxPoint),t.push(h),r.push(e.mapPos(c));else if(d===!0){let{mapped:p,pos:m}=h.map(c,e);p&&(s=Math.max(s,p.maxPoint),t.push(p),r.push(m))}}let l=this.nextLayer.map(e);return t.length==0?l:new Fe(r,t,l||Fe.empty,s)}between(e,t,r){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],a=this.chunk[s];if(t>=l&&e<=l+a.length&&a.between(l,e-l,t-l,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Yo.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Yo.from(e).goto(t)}static compare(e,t,r,s,l=-1){let a=e.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=l),c=t.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=l),h=r0(a,c,r),d=new Co(a,h,l),p=new Co(c,h,l);r.iterGaps((m,v,w)=>i0(d,m,p,v,w,s)),r.empty&&r.length==0&&i0(d,0,p,0,0,s)}static eq(e,t,r=0,s){s==null&&(s=999999999);let l=e.filter(p=>!p.isEmpty&&t.indexOf(p)<0),a=t.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(l.length!=a.length)return!1;if(!l.length)return!0;let c=r0(l,a),h=new Co(l,c,0).goto(r),d=new Co(a,c,0).goto(r);for(;;){if(h.to!=d.to||!Sf(h.active,d.active)||h.point&&(!d.point||!h.point.eq(d.point)))return!1;if(h.to>s)return!0;h.next(),d.next()}}static spans(e,t,r,s,l=-1){let a=new Co(e,null,l).goto(t),c=t,h=a.openStart;for(;;){let d=Math.min(a.to,r);if(a.point){let p=a.activeForPoint(a.to),m=a.pointFrom<t?p.length+1:a.point.startSide<0?p.length:Math.min(p.length,h);s.point(c,d,a.point,p,m,a.pointRank),h=Math.min(a.openEnd(d),p.length)}else d>c&&(s.span(c,d,a.active,h),h=a.openEnd(d));if(a.to>r)return h+(a.point&&a.to>r?1:0);c=a.to,a.next()}}static of(e,t=!1){let r=new Go;for(let s of e instanceof kf?[e]:t?lC(e):e)r.add(s.from,s.to,s.value);return r.finish()}static join(e){if(!e.length)return Fe.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let s=e[r];s!=Fe.empty;s=s.nextLayer)t=new Fe(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}Fe.empty=new Fe([],[],null,-1);function lC(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(bf(e,r)>0)return n.slice().sort(bf);e=r}return n}Fe.empty.nextLayer=Fe.empty;class Go{finishChunk(e){this.chunks.push(new kd(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Go)).add(e,t,r)}addInner(e,t,r){let s=e-this.lastTo||r.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Fe.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Fe.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function r0(n,e,t){let r=new Map;for(let l of n)for(let a=0;a<l.chunk.length;a++)l.chunk[a].maxPoint<=0&&r.set(l.chunk[a],l.chunkPos[a]);let s=new Set;for(let l of e)for(let a=0;a<l.chunk.length;a++){let c=r.get(l.chunk[a]);c!=null&&(t?t.mapPos(c):c)==l.chunkPos[a]&&!(t!=null&&t.touchesRange(c,c+l.chunk[a].length))&&s.add(l.chunk[a])}return s}class Fx{constructor(e,t,r,s=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Yo{constructor(e){this.heap=e}static from(e,t=null,r=-1){let s=[];for(let l=0;l<e.length;l++)for(let a=e[l];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&s.push(new Fx(a,t,r,l));return s.length==1?s[0]:new Yo(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)Ih(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)Ih(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Ih(this.heap,0)}}}function Ih(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let s=n[r];if(r+1<n.length&&s.compare(n[r+1])>=0&&(s=n[r+1],r++),t.compare(s)<0)break;n[r]=t,n[e]=s,e=r}}class Co{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Yo.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Aa(this.active,e),Aa(this.activeTo,e),Aa(this.activeRank,e),this.minActive=s0(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:s,rank:l}=this.cursor;for(;t<this.activeRank.length&&(l-this.activeRank[t]||s-this.activeTo[t])>0;)t++;Ea(this.active,t,r),Ea(this.activeTo,t,s),Ea(this.activeRank,t,l),e&&Ea(e,t,this.cursor.from),this.minActive=s0(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),r&&Aa(r,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let s=r.length-1;s>=0&&r[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function i0(n,e,t,r,s,l){n.goto(e),t.goto(r);let a=r+s,c=r,h=r-e;for(;;){let d=n.to+h-t.to,p=d||n.endSide-t.endSide,m=p<0?n.to+h:t.to,v=Math.min(m,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Sf(n.activeForPoint(n.to),t.activeForPoint(t.to))||l.comparePoint(c,v,n.point,t.point):v>c&&!Sf(n.active,t.active)&&l.compareRange(c,v,n.active,t.active),m>a)break;(d||n.openEnd!=t.openEnd)&&l.boundChange&&l.boundChange(m),c=m,p<=0&&n.next(),p>=0&&t.next()}}function Sf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Aa(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function Ea(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function s0(n,e){let t=-1,r=1e9;for(let s=0;s<e.length;s++)(e[s]-r||n[s].endSide-n[t].endSide)<0&&(t=s,r=e[s]);return t}function Du(n,e,t=n.length){let r=0;for(let s=0;s<t&&s<n.length;)n.charCodeAt(s)==9?(r+=e-r%e,s++):(r++,s=Xt(n,s));return r}function aC(n,e,t,r){for(let s=0,l=0;;){if(l>=e)return s;if(s==n.length)break;l+=n.charCodeAt(s)==9?t-l%t:1,s=Xt(n,s)}return n.length}const Cf="",o0=typeof Symbol>"u"?"__"+Cf:Symbol.for(Cf),Of=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),l0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ci{constructor(e,t){this.rules=[];let{finish:r}=t||{};function s(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function l(a,c,h,d){let p=[],m=/^@(\w+)\b/.exec(a[0]),v=m&&m[1]=="keyframes";if(m&&c==null)return h.push(a[0]+";");for(let w in c){let S=c[w];if(/&/.test(w))l(w.split(/,\s*/).map(C=>a.map(O=>C.replace(/&/,O))).reduce((C,O)=>C.concat(O)),S,h);else if(S&&typeof S=="object"){if(!m)throw new RangeError("The value of a property ("+w+") should be a primitive value.");l(s(w),S,p,v)}else S!=null&&p.push(w.replace(/_.*/,"").replace(/[A-Z]/g,C=>"-"+C.toLowerCase())+": "+S+";")}(p.length||v)&&h.push((r&&!m&&!d?a.map(r):a).join(", ")+" {"+p.join(" ")+"}")}for(let a in e)l(s(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=l0[o0]||1;return l0[o0]=e+1,Cf+e.toString(36)}static mount(e,t,r){let s=e[Of],l=r&&r.nonce;s?l&&s.setNonce(l):s=new uC(e,l),s.mount(Array.isArray(t)?t:[t],e)}}let a0=new Map;class uC{constructor(e,t){let r=e.ownerDocument||e,s=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let l=a0.get(r);if(l)return e[Of]=l;this.sheet=new s.CSSStyleSheet,a0.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Of]=this}mount(e,t){let r=this.sheet,s=0,l=0;for(let a=0;a<e.length;a++){let c=e[a],h=this.modules.indexOf(c);if(h<l&&h>-1&&(this.modules.splice(h,1),l--,h=-1),h==-1){if(this.modules.splice(l++,0,c),r)for(let d=0;d<c.rules.length;d++)r.insertRule(c.rules[d],s++)}else{for(;l<h;)s+=this.modules[l++].rules.length;s+=c.rules.length,l++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let h=0;h<this.modules.length;h++)a+=this.modules[h].getRules()+`
`;this.styleTag.textContent=a;let c=t.head||t;this.styleTag.parentNode!=c&&c.insertBefore(this.styleTag,c.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var hi={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Jo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},cC=typeof navigator<"u"&&/Mac/.test(navigator.platform),hC=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Mt=0;Mt<10;Mt++)hi[48+Mt]=hi[96+Mt]=String(Mt);for(var Mt=1;Mt<=24;Mt++)hi[Mt+111]="F"+Mt;for(var Mt=65;Mt<=90;Mt++)hi[Mt]=String.fromCharCode(Mt+32),Jo[Mt]=String.fromCharCode(Mt);for(var Bh in hi)Jo.hasOwnProperty(Bh)||(Jo[Bh]=hi[Bh]);function fC(n){var e=cC&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||hC&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Jo:hi)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}let Ut=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Pf=typeof document<"u"?document:{documentElement:{style:{}}};const Nf=/Edge\/(\d+)/.exec(Ut.userAgent),_x=/MSIE \d/.test(Ut.userAgent),Af=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ut.userAgent),ju=!!(_x||Af||Nf),u0=!ju&&/gecko\/(\d+)/i.test(Ut.userAgent),zh=!ju&&/Chrome\/(\d+)/.exec(Ut.userAgent),dC="webkitFontSmoothing"in Pf.documentElement.style,Ef=!ju&&/Apple Computer/.test(Ut.vendor),c0=Ef&&(/Mobile\/\w+/.test(Ut.userAgent)||Ut.maxTouchPoints>2);var he={mac:c0||/Mac/.test(Ut.platform),windows:/Win/.test(Ut.platform),linux:/Linux|X11/.test(Ut.platform),ie:ju,ie_version:_x?Pf.documentMode||6:Af?+Af[1]:Nf?+Nf[1]:0,gecko:u0,gecko_version:u0?+(/Firefox\/(\d+)/.exec(Ut.userAgent)||[0,0])[1]:0,chrome:!!zh,chrome_version:zh?+zh[1]:0,ios:c0,android:/Android\b/.test(Ut.userAgent),webkit_version:dC?+(/\bAppleWebKit\/(\d+)/.exec(Ut.userAgent)||[0,0])[1]:0,safari:Ef,safari_version:Ef?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Ut.userAgent)||[0,0])[1]:0,tabSize:Pf.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Zo(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Mf(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Ga(n,e){if(!e.anchorNode)return!1;try{return Mf(n,e.anchorNode)}catch{return!1}}function el(n){return n.nodeType==3?_i(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function _o(n,e,t,r){return t?h0(n,e,t,r,-1)||h0(n,e,t,r,1):!1}function Fi(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function du(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function h0(n,e,t,r,s){for(;;){if(n==t&&e==r)return!0;if(e==(s<0?0:ar(n))){if(n.nodeName=="DIV")return!1;let l=n.parentNode;if(!l||l.nodeType!=1)return!1;e=Fi(n)+(s<0?0:1),n=l}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?ar(n):0}else return!1}}function ar(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Lu(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function pC(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Hx(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function gC(n,e,t,r,s,l,a,c){let h=n.ownerDocument,d=h.defaultView||window;for(let p=n,m=!1;p&&!m;)if(p.nodeType==1){let v,w=p==h.body,S=1,C=1;if(w)v=pC(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(m=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let E=p.getBoundingClientRect();({scaleX:S,scaleY:C}=Hx(p,E)),v={left:E.left,right:E.left+p.clientWidth*S,top:E.top,bottom:E.top+p.clientHeight*C}}let O=0,N=0;if(s=="nearest")e.top<v.top?(N=e.top-(v.top+a),t>0&&e.bottom>v.bottom+N&&(N=e.bottom-v.bottom+a)):e.bottom>v.bottom&&(N=e.bottom-v.bottom+a,t<0&&e.top-N<v.top&&(N=e.top-(v.top+a)));else{let E=e.bottom-e.top,T=v.bottom-v.top;N=(s=="center"&&E<=T?e.top+E/2-T/2:s=="start"||s=="center"&&t<0?e.top-a:e.bottom-T+a)-v.top}if(r=="nearest"?e.left<v.left?(O=e.left-(v.left+l),t>0&&e.right>v.right+O&&(O=e.right-v.right+l)):e.right>v.right&&(O=e.right-v.right+l,t<0&&e.left<v.left+O&&(O=e.left-(v.left+l))):O=(r=="center"?e.left+(e.right-e.left)/2-(v.right-v.left)/2:r=="start"==c?e.left-l:e.right-(v.right-v.left)+l)-v.left,O||N)if(w)d.scrollBy(O,N);else{let E=0,T=0;if(N){let I=p.scrollTop;p.scrollTop+=N/C,T=(p.scrollTop-I)*C}if(O){let I=p.scrollLeft;p.scrollLeft+=O/S,E=(p.scrollLeft-I)*S}e={left:e.left-E,top:e.top-T,right:e.right-E,bottom:e.bottom-T},E&&Math.abs(E-O)<1&&(r="nearest"),T&&Math.abs(T-N)<1&&(s="nearest")}if(w)break;(e.top<v.top||e.bottom>v.bottom||e.left<v.left||e.right>v.right)&&(e={left:Math.max(e.left,v.left),right:Math.min(e.right,v.right),top:Math.max(e.top,v.top),bottom:Math.min(e.bottom,v.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function mC(n){let e=n.ownerDocument,t,r;for(let s=n.parentNode;s&&!(s==e.body||t&&r);)if(s.nodeType==1)!r&&s.scrollHeight>s.clientHeight&&(r=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:r}}class yC{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?ar(t):0),r,Math.min(e.focusOffset,r?ar(r):0))}set(e,t,r,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=s}}let Di=null;he.safari&&he.safari_version>=26&&(Di=!1);function Vx(n){if(n.setActive)return n.setActive();if(Di)return n.focus(Di);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Di==null?{get preventScroll(){return Di={preventScroll:!0},!0}}:void 0),!Di){Di=!1;for(let t=0;t<e.length;){let r=e[t++],s=e[t++],l=e[t++];r.scrollTop!=s&&(r.scrollTop=s),r.scrollLeft!=l&&(r.scrollLeft=l)}}}let f0;function _i(n,e,t=e){let r=f0||(f0=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function ws(n,e,t,r){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=r);let l=new KeyboardEvent("keydown",s);l.synthetic=!0,n.dispatchEvent(l);let a=new KeyboardEvent("keyup",s);return a.synthetic=!0,n.dispatchEvent(a),l.defaultPrevented||a.defaultPrevented}function xC(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Wx(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function vC(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,ar(t));;)if(r){if(t.nodeType!=1)return!1;let s=t.childNodes[r-1];s.contentEditable=="false"?r--:(t=s,r=ar(t))}else{if(t==n)return!0;r=Fi(t),t=t.parentNode}}function Qx(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function $x(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=ar(t)}else if(t.parentNode&&!du(t))r=Fi(t),t=t.parentNode;else return null}}function Ux(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!du(t))r=Fi(t)+1,t=t.parentNode;else return null}}class _t{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new _t(e.parentNode,Fi(e),t)}static after(e,t){return new _t(e.parentNode,Fi(e)+1,t)}}const bd=[];class Ve{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,s=null,l;for(let a of this.children){if(a.flags&7){if(!a.dom&&(l=s?s.nextSibling:r.firstChild)){let c=Ve.get(l);(!c||!c.parent&&c.canReuseDOM(a))&&a.reuseDOM(l)}a.sync(e,t),a.flags&=-8}if(l=s?s.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&l!=a.dom&&(t.written=!0),a.dom.parentNode==r)for(;l&&l!=a.dom;)l=d0(l);else r.insertBefore(a.dom,l);s=a.dom}for(l=s?s.nextSibling:r.firstChild,l&&t&&t.node==r&&(t.written=!0);l;)l=d0(l)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let s=ar(e)==0?0:t==0?-1:1;for(;;){let l=e.parentNode;if(l==this.dom)break;s==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?s=-1:s=1),e=l}s<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Ve.get(r);)r=r.nextSibling;if(!r)return this.length;for(let s=0,l=0;;s++){let a=this.children[s];if(a.dom==r)return l;l+=a.length+a.breakAfter}}domBoundsAround(e,t,r=0){let s=-1,l=-1,a=-1,c=-1;for(let h=0,d=r,p=r;h<this.children.length;h++){let m=this.children[h],v=d+m.length;if(d<e&&v>t)return m.domBoundsAround(e,t,d);if(v>=e&&s==-1&&(s=h,l=d),d>t&&m.dom.parentNode==this.dom){a=h,c=p;break}p=v,d=v+m.breakAfter}return{from:l,to:c<0?r+this.length:c,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=bd){this.markDirty();for(let s=e;s<t;s++){let l=this.children[s];l.parent==this&&r.indexOf(l)<0&&l.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let s=0;s<r.length;s++)r[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Xx(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,s,l,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Ve.prototype.breakAfter=0;function d0(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Xx{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function Kx(n,e,t,r,s,l,a,c,h){let{children:d}=n,p=d.length?d[e]:null,m=l.length?l[l.length-1]:null,v=m?m.breakAfter:a;if(!(e==r&&p&&!a&&!v&&l.length<2&&p.merge(t,s,l.length?m:null,t==0,c,h))){if(r<d.length){let w=d[r];w&&(s<w.length||w.breakAfter&&(m!=null&&m.breakAfter))?(e==r&&(w=w.split(s),s=0),!v&&m&&w.merge(0,s,m,!0,0,h)?l[l.length-1]=w:((s||w.children.length&&!w.children[0].length)&&w.merge(0,s,null,!1,0,h),l.push(w))):w!=null&&w.breakAfter&&(m?m.breakAfter=1:a=1),r++}for(p&&(p.breakAfter=a,t>0&&(!a&&l.length&&p.merge(t,p.length,l[0],!1,c,0)?p.breakAfter=l.shift().breakAfter:(t<p.length||p.children.length&&p.children[p.children.length-1].length==0)&&p.merge(t,p.length,null,!1,c,0),e++));e<r&&l.length;)if(d[r-1].become(l[l.length-1]))r--,l.pop(),h=l.length?0:c;else if(d[e].become(l[0]))e++,l.shift(),c=l.length?0:h;else break;!l.length&&e&&r<d.length&&!d[e-1].breakAfter&&d[r].merge(0,0,d[e-1],!1,c,h)&&e--,(e<r||l.length)&&n.replaceChildren(e,r,l)}}function qx(n,e,t,r,s,l){let a=n.childCursor(),{i:c,off:h}=a.findPos(t,1),{i:d,off:p}=a.findPos(e,-1),m=e-t;for(let v of r)m+=v.length;n.length+=m,Kx(n,d,p,c,h,r,0,s,l)}const wC=256;class Vn extends Ve{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof Vn)||this.length-(t-e)+r.length>wC||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Vn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new _t(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return kC(this.dom,e,t)}}class Tr extends Ve{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let s of t)s.setParent(this)}setAttrs(e){if(Wx(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,s,l,a){return r&&(!(r instanceof Tr&&r.mark.eq(this.mark))||e&&l<=0||t<this.length&&a<=0)?!1:(qx(this,e,t,r?r.children.slice():[],l-1,a-1),this.markDirty(),!0)}split(e){let t=[],r=0,s=-1,l=0;for(let c of this.children){let h=r+c.length;h>e&&t.push(r<e?c.split(e-r):c),s<0&&r>=e&&(s=l),r=h,l++}let a=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new Tr(this.mark,t,a)}domAtPos(e){return Gx(this,e)}coordsAt(e,t){return Jx(this,e,t)}}function kC(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let s=e,l=e,a=0;e==0&&t<0||e==r&&t>=0?he.chrome||he.gecko||(e?(s--,a=1):l<r&&(l++,a=-1)):t<0?s--:l<r&&l++;let c=_i(n,s,l).getClientRects();if(!c.length)return null;let h=c[(a?a<0:t>=0)?0:c.length-1];return he.safari&&!a&&h.width==0&&(h=Array.prototype.find.call(c,d=>d.width)||h),a?Lu(h,a<0):h||null}class oi extends Ve{static create(e,t,r){return new oi(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=oi.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,s,l,a){return r&&(!(r instanceof oi)||!this.widget.compare(r.widget)||e>0&&l<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof oi&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Le.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,s=this.posAtStart;return r?r.slice(s,s+this.length):Le.empty}domAtPos(e){return(this.length?e==0:this.side>0)?_t.before(this.dom):_t.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let s=this.dom.getClientRects(),l=null;if(!s.length)return null;let a=this.side?this.side<0:e>0;for(let c=a?s.length-1:0;l=s[c],!(e>0?c==0:c==s.length-1||l.top<l.bottom);c+=a?-1:1);return Lu(l,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Os extends Ve{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Os&&e.side==this.side}split(){return new Os(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?_t.before(this.dom):_t.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Le.empty}get isHidden(){return!0}}Vn.prototype.children=oi.prototype.children=Os.prototype.children=bd;function Gx(n,e){let t=n.dom,{children:r}=n,s=0;for(let l=0;s<r.length;s++){let a=r[s],c=l+a.length;if(!(c==l&&a.getSide()<=0)){if(e>l&&e<c&&a.dom.parentNode==t)return a.domAtPos(e-l);if(e<=l)break;l=c}}for(let l=s;l>0;l--){let a=r[l-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let l=s;l<r.length;l++){let a=r[l];if(a.dom.parentNode==t)return a.domAtPos(0)}return new _t(t,0)}function Yx(n,e,t){let r,{children:s}=n;t>0&&e instanceof Tr&&s.length&&(r=s[s.length-1])instanceof Tr&&r.mark.eq(e.mark)?Yx(r,e.children[0],t-1):(s.push(e),e.setParent(n)),n.length+=e.length}function Jx(n,e,t){let r=null,s=-1,l=null,a=-1;function c(d,p){for(let m=0,v=0;m<d.children.length&&v<=p;m++){let w=d.children[m],S=v+w.length;S>=p&&(w.children.length?c(w,p-v):(!l||l.isHidden&&(t>0||SC(l,w)))&&(S>p||v==S&&w.getSide()>0)?(l=w,a=p-v):(v<p||v==S&&w.getSide()<0&&!w.isHidden)&&(r=w,s=p-v)),v=S}}c(n,e);let h=(t<0?r:l)||r||l;return h?h.coordsAt(Math.max(0,h==r?s:a),t):bC(n)}function bC(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=el(e);return t[t.length-1]||null}function SC(n,e){let t=n.coordsAt(0,1),r=e.coordsAt(0,1);return t&&r&&r.top<t.bottom}function Rf(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const p0=Object.create(null);function pu(n,e,t){if(n==e)return!0;n||(n=p0),e||(e=p0);let r=Object.keys(n),s=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let l of r)if(l!=t&&(s.indexOf(l)==-1||n[l]!==e[l]))return!1;return!0}function Tf(n,e,t){let r=!1;if(e)for(let s in e)t&&s in t||(r=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(r=!0,s=="style"?n.style.cssText=t[s]:n.setAttribute(s,t[s]));return r}function CC(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class hl{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Kt=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Kt||(Kt={}));class ot extends Cs{constructor(e,t,r,s){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=s}get heightRelevant(){return!1}static mark(e){return new fl(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new fi(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,s;if(e.isBlockGap)r=-5e8,s=4e8;else{let{start:l,end:a}=Zx(e,t);r=(l?t?-3e8:-1:5e8)-1,s=(a?t?2e8:1:-6e8)+1}return new fi(e,r,s,t,e.widget||null,!0)}static line(e){return new dl(e)}static set(e,t=!1){return Fe.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}ot.none=Fe.empty;class fl extends ot{constructor(e){let{start:t,end:r}=Zx(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof fl&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&pu(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}fl.prototype.point=!1;class dl extends ot{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof dl&&this.spec.class==e.spec.class&&pu(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}dl.prototype.mapMode=mn.TrackBefore;dl.prototype.point=!0;class fi extends ot{constructor(e,t,r,s,l,a){super(t,r,l,e),this.block=s,this.isReplace=a,this.mapMode=s?t<=0?mn.TrackBefore:mn.TrackAfter:mn.TrackDel}get type(){return this.startSide!=this.endSide?Kt.WidgetRange:this.startSide<=0?Kt.WidgetBefore:Kt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof fi&&OC(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}fi.prototype.point=!0;function Zx(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function OC(n,e){return n==e||!!(n&&e&&n.compare(e))}function Ya(n,e,t,r=0){let s=t.length-1;s>=0&&t[s]+r>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class pt extends Ve{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,s,l,a){if(r){if(!(r instanceof pt))return!1;this.dom||r.transferDOM(this)}return s&&this.setDeco(r?r.attrs:null),qx(this,e,t,r?r.children.slice():[],l,a),!0}split(e){let t=new pt;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:s}=this.childPos(e);s&&(t.append(this.children[r].split(s),0),this.children[r].merge(s,this.children[r].length,null,!1,0,0),r++);for(let l=r;l<this.children.length;l++)t.append(this.children[l],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){pu(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Yx(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=Rf(t,this.attrs||{})),r&&(this.attrs=Rf({class:r},this.attrs||{}))}domAtPos(e){return Gx(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(Wx(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Tf(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&Ve.get(s)instanceof Tr;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((r=Ve.get(s))===null||r===void 0?void 0:r.isEditable)==!1&&(!he.ios||!this.children.some(l=>l instanceof Vn))){let l=document.createElement("BR");l.cmIgnore=!0,this.dom.appendChild(l)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof Vn)||/[^ -~]/.test(r.text))return null;let s=el(r.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=Jx(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:s}=this.parent.view.viewState,l=r.bottom-r.top;if(Math.abs(l-s.lineHeight)<2&&s.textHeight<l){let a=(l-s.textHeight)/2;return{top:r.top+a,bottom:r.bottom-a,left:r.left,right:r.left}}}return r}become(e){return e instanceof pt&&this.children.length==0&&e.children.length==0&&pu(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,s=0;r<e.children.length;r++){let l=e.children[r],a=s+l.length;if(a>=t){if(l instanceof pt)return l;if(a>t)break}s=a+l.breakAfter}return null}}class Rr extends Ve{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,s,l,a){return r&&(!(r instanceof Rr)||!this.widget.compare(r.widget)||e>0&&l<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?_t.before(this.dom):_t.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new Rr(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return bd}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Le.empty}domBoundsAround(){return null}become(e){return e instanceof Rr&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof Df?null:Lu(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class Df extends hl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Ho{constructor(e,t,r,s){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Rr&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new pt),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Ma(new Os(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Rr)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:c,done:h}=this.cursor.next(this.skip);if(this.skip=0,h)throw new Error("Ran out of text content when drawing inline views");if(c){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e),l=Math.min(s,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(Ma(new Vn(this.text.slice(this.textOff,this.textOff+l)),t),r),this.atCursorPos=!0,this.textOff+=l,e-=l,r=s<=l?0:t.length}}span(e,t,r,s){this.buildText(t-e,r,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,r,s,l,a){if(this.disallowBlockEffectsFor[a]&&r instanceof fi){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let c=t-e;if(r instanceof fi)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Rr(r.widget||Ps.block,c,r));else{let h=oi.create(r.widget||Ps.inline,c,c?0:r.startSide),d=this.atCursorPos&&!h.isEditable&&l<=s.length&&(e<t||r.startSide>0),p=!h.isEditable&&(e<t||l>s.length||r.startSide<=0),m=this.getLine();this.pendingBuffer==2&&!d&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),d&&(m.append(Ma(new Os(1),s),l),l=s.length+Math.max(0,l-s.length)),m.append(Ma(h,s),l),this.atCursorPos=p,this.pendingBuffer=p?e<t||l>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);c&&(this.textOff+c<=this.text.length?this.textOff+=c:(this.skip+=c-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=l)}static build(e,t,r,s,l){let a=new Ho(e,t,r,l);return a.openEnd=Fe.spans(s,t,r,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function Ma(n,e){for(let t of e)n=new Tr(t,[n],n.length);return n}class Ps extends hl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ps.inline=new Ps("span");Ps.block=new Ps("div");var st=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(st||(st={}));const Hi=st.LTR,Sd=st.RTL;function ev(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const PC=ev("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),NC=ev("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),jf=Object.create(null),er=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);jf[e]=t,jf[t]=-e}function tv(n){return n<=247?PC[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?NC[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const AC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class li{get dir(){return this.level%2?Sd:Hi}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,s){let l=-1;for(let a=0;a<e.length;a++){let c=e[a];if(c.from<=t&&c.to>=t){if(c.level==r)return a;(l<0||(s!=0?s<0?c.from<t:c.to>t:e[l].level>c.level))&&(l=a)}}if(l<0)throw new RangeError("Index out of range");return l}}function nv(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],s=e[t];if(r.from!=s.from||r.to!=s.to||r.direction!=s.direction||!nv(r.inner,s.inner))return!1}return!0}const Qe=[];function EC(n,e,t,r,s){for(let l=0;l<=r.length;l++){let a=l?r[l-1].to:e,c=l<r.length?r[l].from:t,h=l?256:s;for(let d=a,p=h,m=h;d<c;d++){let v=tv(n.charCodeAt(d));v==512?v=p:v==8&&m==4&&(v=16),Qe[d]=v==4?2:v,v&7&&(m=v),p=v}for(let d=a,p=h,m=h;d<c;d++){let v=Qe[d];if(v==128)d<c-1&&p==Qe[d+1]&&p&24?v=Qe[d]=p:Qe[d]=256;else if(v==64){let w=d+1;for(;w<c&&Qe[w]==64;)w++;let S=d&&p==8||w<t&&Qe[w]==8?m==1?1:8:256;for(let C=d;C<w;C++)Qe[C]=S;d=w-1}else v==8&&m==1&&(Qe[d]=1);p=v,v&7&&(m=v)}}}function MC(n,e,t,r,s){let l=s==1?2:1;for(let a=0,c=0,h=0;a<=r.length;a++){let d=a?r[a-1].to:e,p=a<r.length?r[a].from:t;for(let m=d,v,w,S;m<p;m++)if(w=jf[v=n.charCodeAt(m)])if(w<0){for(let C=c-3;C>=0;C-=3)if(er[C+1]==-w){let O=er[C+2],N=O&2?s:O&4?O&1?l:s:0;N&&(Qe[m]=Qe[er[C]]=N),c=C;break}}else{if(er.length==189)break;er[c++]=m,er[c++]=v,er[c++]=h}else if((S=Qe[m])==2||S==1){let C=S==s;h=C?0:1;for(let O=c-3;O>=0;O-=3){let N=er[O+2];if(N&2)break;if(C)er[O+2]|=2;else{if(N&4)break;er[O+2]|=4}}}}}function RC(n,e,t,r){for(let s=0,l=r;s<=t.length;s++){let a=s?t[s-1].to:n,c=s<t.length?t[s].from:e;for(let h=a;h<c;){let d=Qe[h];if(d==256){let p=h+1;for(;;)if(p==c){if(s==t.length)break;p=t[s++].to,c=s<t.length?t[s].from:e}else if(Qe[p]==256)p++;else break;let m=l==1,v=(p<e?Qe[p]:r)==1,w=m==v?m?1:2:r;for(let S=p,C=s,O=C?t[C-1].to:n;S>h;)S==O&&(S=t[--C].from,O=C?t[C-1].to:n),Qe[--S]=w;h=p}else l=d,h++}}}function Lf(n,e,t,r,s,l,a){let c=r%2?2:1;if(r%2==s%2)for(let h=e,d=0;h<t;){let p=!0,m=!1;if(d==l.length||h<l[d].from){let C=Qe[h];C!=c&&(p=!1,m=C==16)}let v=!p&&c==1?[]:null,w=p?r:r+1,S=h;e:for(;;)if(d<l.length&&S==l[d].from){if(m)break e;let C=l[d];if(!p)for(let O=C.to,N=d+1;;){if(O==t)break e;if(N<l.length&&l[N].from==O)O=l[N++].to;else{if(Qe[O]==c)break e;break}}if(d++,v)v.push(C);else{C.from>h&&a.push(new li(h,C.from,w));let O=C.direction==Hi!=!(w%2);If(n,O?r+1:r,s,C.inner,C.from,C.to,a),h=C.to}S=C.to}else{if(S==t||(p?Qe[S]!=c:Qe[S]==c))break;S++}v?Lf(n,h,S,r+1,s,v,a):h<S&&a.push(new li(h,S,w)),h=S}else for(let h=t,d=l.length;h>e;){let p=!0,m=!1;if(!d||h>l[d-1].to){let C=Qe[h-1];C!=c&&(p=!1,m=C==16)}let v=!p&&c==1?[]:null,w=p?r:r+1,S=h;e:for(;;)if(d&&S==l[d-1].to){if(m)break e;let C=l[--d];if(!p)for(let O=C.from,N=d;;){if(O==e)break e;if(N&&l[N-1].to==O)O=l[--N].from;else{if(Qe[O-1]==c)break e;break}}if(v)v.push(C);else{C.to<h&&a.push(new li(C.to,h,w));let O=C.direction==Hi!=!(w%2);If(n,O?r+1:r,s,C.inner,C.from,C.to,a),h=C.from}S=C.from}else{if(S==e||(p?Qe[S-1]!=c:Qe[S-1]==c))break;S--}v?Lf(n,S,h,r+1,s,v,a):S<h&&a.push(new li(S,h,w)),h=S}}function If(n,e,t,r,s,l,a){let c=e%2?2:1;EC(n,s,l,r,c),MC(n,s,l,r,c),RC(s,l,r,c),Lf(n,s,l,e,t,r,a)}function TC(n,e,t){if(!n)return[new li(0,0,e==Sd?1:0)];if(e==Hi&&!t.length&&!AC.test(n))return rv(n.length);if(t.length)for(;n.length>Qe.length;)Qe[Qe.length]=256;let r=[],s=e==Hi?0:1;return If(n,s,s,t,0,n.length,r),r}function rv(n){return[new li(0,n,0)]}let iv="";function DC(n,e,t,r,s){var l;let a=r.head-n.from,c=li.find(e,a,(l=r.bidiLevel)!==null&&l!==void 0?l:-1,r.assoc),h=e[c],d=h.side(s,t);if(a==d){let v=c+=s?1:-1;if(v<0||v>=e.length)return null;h=e[c=v],a=h.side(!s,t),d=h.side(s,t)}let p=Xt(n.text,a,h.forward(s,t));(p<h.from||p>h.to)&&(p=d),iv=n.text.slice(Math.min(a,p),Math.max(a,p));let m=c==(s?e.length-1:0)?null:e[c+(s?1:-1)];return m&&p==d&&m.level+(s?0:1)<h.level?ie.cursor(m.side(!s,t)+n.from,m.forward(s,t)?1:-1,m.level):ie.cursor(p+n.from,h.forward(s,t)?-1:1,h.level)}function jC(n,e,t){for(let r=e;r<t;r++){let s=tv(n.charCodeAt(r));if(s==1)return Hi;if(s==2||s==4)return Sd}return Hi}const sv=be.define(),ov=be.define(),lv=be.define(),av=be.define(),Bf=be.define(),uv=be.define(),cv=be.define(),Cd=be.define(),Od=be.define(),hv=be.define({combine:n=>n.some(e=>e)}),fv=be.define({combine:n=>n.some(e=>e)}),dv=be.define();class ks{constructor(e,t="nearest",r="nearest",s=5,l=5,a=!1){this.range=e,this.y=t,this.x=r,this.yMargin=s,this.xMargin=l,this.isSnapshot=a}map(e){return e.empty?this:new ks(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ks(ie.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ra=vt.define({map:(n,e)=>n.map(e)}),pv=vt.define();function or(n,e,t){let r=n.facet(av);r.length?r[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const Nr=be.define({combine:n=>n.length?n[0]:!0});let LC=0;const ds=be.define({combine(n){return n.filter((e,t)=>{for(let r=0;r<t;r++)if(n[r].plugin==e.plugin)return!1;return!0})}});class Wn{constructor(e,t,r,s,l){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=s,this.baseExtensions=l(this),this.extension=this.baseExtensions.concat(ds.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(ds.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:r,eventObservers:s,provide:l,decorations:a}=t||{};return new Wn(LC++,e,r,s,c=>{let h=[];return a&&h.push(tl.of(d=>{let p=d.plugin(c);return p?a(p):ot.none})),l&&h.push(l(c)),h})}static fromClass(e,t){return Wn.define((r,s)=>new e(r,s),t)}}class Fh{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(or(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){or(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){or(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const gv=be.define(),Pd=be.define(),tl=be.define(),mv=be.define(),pl=be.define(),yv=be.define();function g0(n,e){let t=n.state.facet(yv);if(!t.length)return t;let r=t.map(l=>l instanceof Function?l(n):l),s=[];return Fe.spans(r,e.from,e.to,{point(){},span(l,a,c,h){let d=l-e.from,p=a-e.from,m=s;for(let v=c.length-1;v>=0;v--,h--){let w=c[v].spec.bidiIsolate,S;if(w==null&&(w=jC(e.text,d,p)),h>0&&m.length&&(S=m[m.length-1]).to==d&&S.direction==w)S.to=p,m=S.inner;else{let C={from:d,to:p,direction:w,inner:[]};m.push(C),m=C.inner}}}}),s}const xv=be.define();function vv(n){let e=0,t=0,r=0,s=0;for(let l of n.state.facet(xv)){let a=l(n);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(r=Math.max(r,a.top)),a.bottom!=null&&(s=Math.max(s,a.bottom)))}return{left:e,right:t,top:r,bottom:s}}const Mo=be.define();class On{constructor(e,t,r,s){this.fromA=e,this.toA=t,this.fromB=r,this.toB=s}join(e){return new On(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>r.toA)){if(s.toA<r.fromA)break;r=r.join(s),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let s=0,l=0,a=0,c=0;;s++){let h=s==e.length?null:e[s],d=a-c,p=h?h.fromB:1e9;for(;l<t.length&&t[l]<p;){let m=t[l],v=t[l+1],w=Math.max(c,m),S=Math.min(p,v);if(w<=S&&new On(w+d,S+d,w,S).addToSet(r),v>p)break;l+=2}if(!h)return r;new On(h.fromA,h.toA,h.fromB,h.toB).addToSet(r),a=h.toA,c=h.toB}}}class gu{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Ot.empty(this.startState.doc.length);for(let l of r)this.changes=this.changes.compose(l.changes);let s=[];this.changes.iterChangedRanges((l,a,c,h)=>s.push(new On(l,a,c,h))),this.changedRanges=s}static create(e,t,r){return new gu(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class m0 extends Ve{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=ot.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new pt],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new On(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:d,toA:p})=>p<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!VC(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let l=s>-1?BC(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:p}=this.hasComposition;r=new On(d,p,e.changes.mapPos(d,-1),e.changes.mapPos(p,1)).addToSet(r.slice())}this.hasComposition=l?{from:l.range.fromB,to:l.range.toB}:null,(he.ie||he.chrome)&&!l&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,c=this.updateDeco(),h=_C(a,c,e.changes);return r=On.extendWithRanges(r,h),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,l),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=he.chrome||he.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||s.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let l=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof Rr&&a.widget instanceof Df&&l.push(a.dom);s.updateGaps(l)}updateChildren(e,t,r){let s=r?r.range.addToSet(e.slice()):e,l=this.childCursor(t);for(let a=s.length-1;;a--){let c=a>=0?s[a]:null;if(!c)break;let{fromA:h,toA:d,fromB:p,toB:m}=c,v,w,S,C;if(r&&r.range.fromB<m&&r.range.toB>p){let I=Ho.build(this.view.state.doc,p,r.range.fromB,this.decorations,this.dynamicDecorationMap),R=Ho.build(this.view.state.doc,r.range.toB,m,this.decorations,this.dynamicDecorationMap);w=I.breakAtStart,S=I.openStart,C=R.openEnd;let L=this.compositionView(r);R.breakAtStart?L.breakAfter=1:R.content.length&&L.merge(L.length,L.length,R.content[0],!1,R.openStart,0)&&(L.breakAfter=R.content[0].breakAfter,R.content.shift()),I.content.length&&L.merge(0,0,I.content[I.content.length-1],!0,0,I.openEnd)&&I.content.pop(),v=I.content.concat(L).concat(R.content)}else({content:v,breakAtStart:w,openStart:S,openEnd:C}=Ho.build(this.view.state.doc,p,m,this.decorations,this.dynamicDecorationMap));let{i:O,off:N}=l.findPos(d,1),{i:E,off:T}=l.findPos(h,-1);Kx(this,E,T,O,N,v,w,S,C)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(pv)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new Vn(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new Tr(s,[t],t.length);let r=new pt;return r.append(t,0),r}fixCompositionDOM(e){let t=(l,a)=>{a.flags|=8|(a.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(a);let c=Ve.get(l);c&&c!=a&&(c.dom=null),a.setDOM(l)},r=this.childPos(e.range.fromB,1),s=this.children[r.i];t(e.line,s);for(let l=e.marks.length-1;l>=-1;l--)r=s.childPos(r.off,1),s=s.children[r.i],t(l>=0?e.marks[l].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,s=r==this.dom,l=!s&&!(this.view.state.facet(Nr)||this.dom.tabIndex>-1)&&Ga(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(s||t||l))return;let a=this.forceSelection;this.forceSelection=!1;let c=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(c.anchor)),d=c.empty?h:this.moveToLine(this.domAtPos(c.head));if(he.gecko&&c.empty&&!this.hasComposition&&IC(h)){let m=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(m,h.node.childNodes[h.offset]||null)),h=d=new _t(m,0),a=!0}let p=this.view.observer.selectionRange;(a||!p.focusNode||(!_o(h.node,h.offset,p.anchorNode,p.anchorOffset)||!_o(d.node,d.offset,p.focusNode,p.focusOffset))&&!this.suppressWidgetCursorChange(p,c))&&(this.view.observer.ignore(()=>{he.android&&he.chrome&&this.dom.contains(p.focusNode)&&HC(p.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let m=Zo(this.view.root);if(m)if(c.empty){if(he.gecko){let v=zC(h.node,h.offset);if(v&&v!=3){let w=(v==1?$x:Ux)(h.node,h.offset);w&&(h=new _t(w.node,w.offset))}}m.collapse(h.node,h.offset),c.bidiLevel!=null&&m.caretBidiLevel!==void 0&&(m.caretBidiLevel=c.bidiLevel)}else if(m.extend){m.collapse(h.node,h.offset);try{m.extend(d.node,d.offset)}catch{}}else{let v=document.createRange();c.anchor>c.head&&([h,d]=[d,h]),v.setEnd(d.node,d.offset),v.setStart(h.node,h.offset),m.removeAllRanges(),m.addRange(v)}l&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(h,d)),this.impreciseAnchor=h.precise?null:new _t(p.anchorNode,p.anchorOffset),this.impreciseHead=d.precise?null:new _t(p.focusNode,p.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&_o(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=Zo(e.root),{anchorNode:s,anchorOffset:l}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let a=pt.find(this,t.head);if(!a)return;let c=a.posAtStart;if(t.head==c||t.head==c+a.length)return;let h=this.coordsAt(t.head,-1),d=this.coordsAt(t.head,1);if(!h||!d||h.bottom>d.top)return;let p=this.domAtPos(t.head+t.assoc);r.collapse(p.node,p.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let m=e.observer.selectionRange;e.docView.posFromDOM(m.anchorNode,m.anchorOffset)!=t.from&&r.collapse(s,l)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let s=e.offset;!r&&s<t.childNodes.length;s++){let l=Ve.get(t.childNodes[s]);l instanceof pt&&(r=l.domAtPos(0))}for(let s=e.offset-1;!r&&s>=0;s--){let l=Ve.get(t.childNodes[s]);l instanceof pt&&(r=l.domAtPos(l.length))}return r?new _t(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=Ve.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(r<s.length||s instanceof pt)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,s=0;for(let l=this.length,a=this.children.length-1;a>=0;a--){let c=this.children[a],h=l-c.breakAfter,d=h-c.length;if(h<e)break;if(d<=e&&(d<e||c.covers(-1))&&(h>e||c.covers(1))&&(!r||c instanceof pt&&!(r instanceof pt&&t>=0)))r=c,s=d;else if(r&&d==e&&h==e&&c instanceof Rr&&Math.abs(t)<2){if(c.deco.startSide<0)break;a&&(r=null)}l=d}return r?r.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),s=this.children[t];if(!(s instanceof pt))return null;for(;s.children.length;){let{i:c,off:h}=s.childPos(r,1);for(;;c++){if(c==s.children.length)return null;if((s=s.children[c]).length)break}r=h}if(!(s instanceof Vn))return null;let l=Xt(s.text,r);if(l==r)return null;let a=_i(s.dom,r,l).getClientRects();for(let c=0;c<a.length;c++){let h=a[c];if(c==a.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:s}=e,l=this.view.contentDOM.clientWidth,a=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,h=this.view.textDirection==st.LTR;for(let d=0,p=0;p<this.children.length;p++){let m=this.children[p],v=d+m.length;if(v>s)break;if(d>=r){let w=m.dom.getBoundingClientRect();if(t.push(w.height),a){let S=m.dom.lastChild,C=S?el(S):[];if(C.length){let O=C[C.length-1],N=h?O.right-w.left:w.right-O.left;N>c&&(c=N,this.minWidth=l,this.minWidthFrom=d,this.minWidthTo=v)}}}d=v+m.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?st.RTL:st.LTR}measureTextSize(){for(let l of this.children)if(l instanceof pt){let a=l.measureTextSize();if(a)return a}let e=document.createElement("div"),t,r,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let l=el(e.firstChild)[0];t=e.getBoundingClientRect().height,r=l?l.width/27:7,s=l?l.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Xx(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,s=0;;s++){let l=s==t.viewports.length?null:t.viewports[s],a=l?l.from-1:this.length;if(a>r){let c=(t.lineBlockAt(a).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(ot.replace({widget:new Df(c),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!l)break;r=l.to+1}return ot.set(e)}updateDeco(){let e=1,t=this.view.state.facet(tl).map(l=>(this.dynamicDecorationMap[e++]=typeof l=="function")?l(this.view):l),r=!1,s=this.view.state.facet(mv).map((l,a)=>{let c=typeof l=="function";return c&&(r=!0),c?l(this.view):l});for(s.length&&(this.dynamicDecorationMap[e++]=r,t.push(Fe.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(dv))try{if(d(this.view,e.range,e))return!0}catch(p){or(this.view.state,p,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!r)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,s.left),top:Math.min(r.top,s.top),right:Math.max(r.right,s.right),bottom:Math.max(r.bottom,s.bottom)});let l=vv(this.view),a={left:r.left-l.left,top:r.top-l.top,right:r.right+l.right,bottom:r.bottom+l.bottom},{offsetWidth:c,offsetHeight:h}=this.view.scrollDOM;gC(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,c),-c),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==st.LTR)}lineHasWidget(e){let{i:t}=this.childCursor().findPos(e);if(t==this.children.length)return!1;let r=s=>s instanceof oi||s.children.some(r);return r(this.children[t])}}function IC(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function wv(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=$x(t.focusNode,t.focusOffset),s=Ux(t.focusNode,t.focusOffset),l=r||s;if(s&&r&&s.node!=r.node){let c=Ve.get(s.node);if(!c||c instanceof Vn&&c.text!=s.node.nodeValue)l=s;else if(n.docView.lastCompositionAfterCursor){let h=Ve.get(r.node);!h||h instanceof Vn&&h.text!=r.node.nodeValue||(l=s)}}if(n.docView.lastCompositionAfterCursor=l!=r,!l)return null;let a=e-l.offset;return{from:a,to:a+l.node.nodeValue.length,node:l.node}}function BC(n,e,t){let r=wv(n,t);if(!r)return null;let{node:s,from:l,to:a}=r,c=s.nodeValue;if(/[\n\r]/.test(c)||n.state.doc.sliceString(r.from,r.to)!=c)return null;let h=e.invertedDesc,d=new On(h.mapPos(l),h.mapPos(a),l,a),p=[];for(let m=s.parentNode;;m=m.parentNode){let v=Ve.get(m);if(v instanceof Tr)p.push({node:m,deco:v.mark});else{if(v instanceof pt||m.nodeName=="DIV"&&m.parentNode==n.contentDOM)return{range:d,text:s,marks:p,line:m};if(m!=n.contentDOM)p.push({node:m,deco:new fl({inclusive:!0,attributes:CC(m),tagName:m.tagName.toLowerCase()})});else return null}}}function zC(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let FC=class{constructor(){this.changes=[]}compareRange(e,t){Ya(e,t,this.changes)}comparePoint(e,t){Ya(e,t,this.changes)}boundChange(e){Ya(e,e,this.changes)}};function _C(n,e,t){let r=new FC;return Fe.compare(n,e,t,r),r.changes}function HC(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function VC(n,e){let t=!1;return e&&n.iterChangedRanges((r,s)=>{r<e.to&&s>e.from&&(t=!0)}),t}function WC(n,e,t=1){let r=n.charCategorizer(e),s=n.doc.lineAt(e),l=e-s.from;if(s.length==0)return ie.cursor(e);l==0?t=1:l==s.length&&(t=-1);let a=l,c=l;t<0?a=Xt(s.text,l,!1):c=Xt(s.text,l);let h=r(s.text.slice(a,c));for(;a>0;){let d=Xt(s.text,a,!1);if(r(s.text.slice(d,a))!=h)break;a=d}for(;c<s.length;){let d=Xt(s.text,c);if(r(s.text.slice(c,d))!=h)break;c=d}return ie.range(a+s.from,c+s.from)}function QC(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function $C(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function _h(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function y0(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function x0(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function zf(n,e,t){let r,s,l,a,c=!1,h,d,p,m;for(let S=n.firstChild;S;S=S.nextSibling){let C=el(S);for(let O=0;O<C.length;O++){let N=C[O];s&&_h(s,N)&&(N=y0(x0(N,s.bottom),s.top));let E=QC(e,N),T=$C(t,N);if(E==0&&T==0)return S.nodeType==3?v0(S,e,t):zf(S,e,t);(!r||a>T||a==T&&l>E)&&(r=S,s=N,l=E,a=T,c=E?e<N.left?O>0:O<C.length-1:!0),E==0?t>N.bottom&&(!p||p.bottom<N.bottom)?(h=S,p=N):t<N.top&&(!m||m.top>N.top)&&(d=S,m=N):p&&_h(p,N)?p=x0(p,N.bottom):m&&_h(m,N)&&(m=y0(m,N.top))}}if(p&&p.bottom>=t?(r=h,s=p):m&&m.top<=t&&(r=d,s=m),!r)return{node:n,offset:0};let v=Math.max(s.left,Math.min(s.right,e));if(r.nodeType==3)return v0(r,v,t);if(c&&r.contentEditable!="false")return zf(r,v,t);let w=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:w}}function v0(n,e,t){let r=n.nodeValue.length,s=-1,l=1e9,a=0;for(let c=0;c<r;c++){let h=_i(n,c,c+1).getClientRects();for(let d=0;d<h.length;d++){let p=h[d];if(p.top==p.bottom)continue;a||(a=e-p.left);let m=(p.top>t?p.top-t:t-p.bottom)-1;if(p.left-1<=e&&p.right+1>=e&&m<l){let v=e>=(p.left+p.right)/2,w=v;if(he.chrome||he.gecko){let S=_i(n,c).getBoundingClientRect();Math.abs(S.left-p.right)<.1&&(w=!v)}if(m<=0)return{node:n,offset:c+(w?1:0)};s=c+(w?1:0),l=m}}}return{node:n,offset:s>-1?s:a>0?n.nodeValue.length:0}}function kv(n,e,t,r=-1){var s,l;let a=n.contentDOM.getBoundingClientRect(),c=a.top+n.viewState.paddingTop,h,{docHeight:d}=n.viewState,{x:p,y:m}=e,v=m-c;if(v<0)return 0;if(v>d)return n.state.doc.length;for(let I=n.viewState.heightOracle.textHeight/2,R=!1;h=n.elementAtHeight(v),h.type!=Kt.Text;)for(;v=r>0?h.bottom+I:h.top-I,!(v>=0&&v<=d);){if(R)return t?null:0;R=!0,r=-r}m=c+v;let w=h.from;if(w<n.viewport.from)return n.viewport.from==0?0:t?null:w0(n,a,h,p,m);if(w>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:w0(n,a,h,p,m);let S=n.dom.ownerDocument,C=n.root.elementFromPoint?n.root:S,O=C.elementFromPoint(p,m);O&&!n.contentDOM.contains(O)&&(O=null),O||(p=Math.max(a.left+1,Math.min(a.right-1,p)),O=C.elementFromPoint(p,m),O&&!n.contentDOM.contains(O)&&(O=null));let N,E=-1;if(O&&((s=n.docView.nearest(O))===null||s===void 0?void 0:s.isEditable)!=!1){if(S.caretPositionFromPoint){let I=S.caretPositionFromPoint(p,m);I&&({offsetNode:N,offset:E}=I)}else if(S.caretRangeFromPoint){let I=S.caretRangeFromPoint(p,m);I&&({startContainer:N,startOffset:E}=I)}N&&(!n.contentDOM.contains(N)||he.safari&&UC(N,E,p)||he.chrome&&XC(N,E,p))&&(N=void 0),N&&(E=Math.min(ar(N),E))}if(!N||!n.docView.dom.contains(N)){let I=pt.find(n.docView,w);if(!I)return v>h.top+h.height/2?h.to:h.from;({node:N,offset:E}=zf(I.dom,p,m))}let T=n.docView.nearest(N);if(!T)return null;if(T.isWidget&&((l=T.dom)===null||l===void 0?void 0:l.nodeType)==1){let I=T.dom.getBoundingClientRect();return e.y<I.top||e.y<=I.bottom&&e.x<=(I.left+I.right)/2?T.posAtStart:T.posAtEnd}else return T.localPosFromDOM(N,E)+T.posAtStart}function w0(n,e,t,r,s){let l=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let c=n.viewState.heightOracle.textHeight,h=Math.floor((s-t.top-(n.defaultLineHeight-c)*.5)/c);l+=h*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(t.from,t.to);return t.from+aC(a,l,n.state.tabSize)}function bv(n,e,t){let r,s=n;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(;;){let l=s.nextSibling;if(l){if(l.nodeName=="BR")break;return!1}else{let a=s.parentNode;if(!a||a.nodeName=="DIV")break;s=a}}return _i(n,r-1,r).getBoundingClientRect().right>t}function UC(n,e,t){return bv(n,e,t)}function XC(n,e,t){if(e!=0)return bv(n,e,t);for(let s=n;;){let l=s.parentNode;if(!l||l.nodeType!=1||l.firstChild!=s)return!1;if(l.classList.contains("cm-line"))break;s=l}let r=n.nodeType==1?n.getBoundingClientRect():_i(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function Ff(n,e,t){let r=n.lineBlockAt(e);if(Array.isArray(r.type)){let s;for(let l of r.type){if(l.from>e)break;if(!(l.to<e)){if(l.from<e&&l.to>e)return l;(!s||l.type==Kt.Text&&(s.type!=l.type||(t<0?l.from<e:l.to>e)))&&(s=l)}}return s||r}return r}function KC(n,e,t,r){let s=Ff(n,e.head,e.assoc||-1),l=!r||s.type!=Kt.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(l){let a=n.dom.getBoundingClientRect(),c=n.textDirectionAt(s.from),h=n.posAtCoords({x:t==(c==st.LTR)?a.right-1:a.left+1,y:(l.top+l.bottom)/2});if(h!=null)return ie.cursor(h,t?-1:1)}return ie.cursor(t?s.to:s.from,t?-1:1)}function k0(n,e,t,r){let s=n.state.doc.lineAt(e.head),l=n.bidiSpans(s),a=n.textDirectionAt(s.from);for(let c=e,h=null;;){let d=DC(s,l,a,c,t),p=iv;if(!d){if(s.number==(t?n.state.doc.lines:1))return c;p=`
`,s=n.state.doc.line(s.number+(t?1:-1)),l=n.bidiSpans(s),d=n.visualLineSide(s,!t)}if(h){if(!h(p))return c}else{if(!r)return d;h=r(p)}c=d}}function qC(n,e,t){let r=n.state.charCategorizer(e),s=r(t);return l=>{let a=r(l);return s==Ar.Space&&(s=a),s==a}}function GC(n,e,t,r){let s=e.head,l=t?1:-1;if(s==(t?n.state.doc.length:0))return ie.cursor(s,e.assoc);let a=e.goalColumn,c,h=n.contentDOM.getBoundingClientRect(),d=n.coordsAtPos(s,e.assoc||-1),p=n.documentTop;if(d)a==null&&(a=d.left-h.left),c=l<0?d.top:d.bottom;else{let w=n.viewState.lineBlockAt(s);a==null&&(a=Math.min(h.right-h.left,n.defaultCharacterWidth*(s-w.from))),c=(l<0?w.top:w.bottom)+p}let m=h.left+a,v=r??n.viewState.heightOracle.textHeight>>1;for(let w=0;;w+=10){let S=c+(v+w)*l,C=kv(n,{x:m,y:S},!1,l);if(S<h.top||S>h.bottom||(l<0?C<s:C>s)){let O=n.docView.coordsForChar(C),N=!O||S<O.top?-1:1;return ie.cursor(C,N,void 0,a)}}}function Vo(n,e,t){for(;;){let r=0;for(let s of n)s.between(e-1,e+1,(l,a,c)=>{if(e>l&&e<a){let h=r||t||(e-l<a-e?-1:1);e=h<0?l:a,r=h}});if(!r)return e}}function Sv(n,e){let t=null;for(let r=0;r<e.ranges.length;r++){let s=e.ranges[r],l=null;if(s.empty){let a=Vo(n,s.from,0);a!=s.from&&(l=ie.cursor(a,-1))}else{let a=Vo(n,s.from,-1),c=Vo(n,s.to,1);(a!=s.from||c!=s.to)&&(l=ie.range(s.from==s.anchor?a:c,s.from==s.head?a:c))}l&&(t||(t=e.ranges.slice()),t[r]=l)}return t?ie.create(t,e.mainIndex):e}function Hh(n,e,t){let r=Vo(n.state.facet(pl).map(s=>s(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:ie.cursor(r,r<t.from?1:-1)}const Ro="";class YC{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(ze.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ro}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let s=e;;){this.findPointBefore(r,s);let l=this.text.length;this.readNode(s);let a=s.nextSibling;if(a==t)break;let c=Ve.get(s),h=Ve.get(a);(c&&h?c.breakAfter:(c?c.breakAfter:du(s))||du(a)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>l)&&!ZC(a,t)&&this.lineBreak(),s=a}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,a=1,c;if(this.lineSeparator?(l=t.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(c=s.exec(t))&&(l=c.index,a=c[0].length),this.append(t.slice(r,l<0?t.length:l)),l<0)break;if(this.lineBreak(),a>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=a-1);r=l+a}}readNode(e){if(e.cmIgnore)return;let t=Ve.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let s=r.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(JC(e,r.node,r.offset)?t:0))}}function JC(n,e,t){for(;;){if(!e||t<ar(e))return!1;if(e==n)return!0;t=Fi(e)+1,e=e.parentNode}}function ZC(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let r=Ve.get(n);if(!(r!=null&&r.isWidget||n.cmIgnore))return!1;r&&(t||(t=[])).push(r)}if(t)for(let r of t){let s=r.overrideDOMText;if(s!=null&&s.length)return!1}return!0}class b0{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class eO{constructor(e,t,r,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:l,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let c=l||a?[]:nO(e),h=new YC(c,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=rO(c,this.bounds.from)}else{let c=e.observer.selectionRange,h=l&&l.node==c.focusNode&&l.offset==c.focusOffset||!Mf(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),d=a&&a.node==c.anchorNode&&a.offset==c.anchorOffset||!Mf(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset),p=e.viewport;if((he.ios||he.chrome)&&e.state.selection.main.empty&&h!=d&&(p.from>0||p.to<e.state.doc.length)){let m=Math.min(h,d),v=Math.max(h,d),w=p.from-m,S=p.to-v;(w==0||w==1||m==0)&&(S==0||S==-1||v==e.state.doc.length)&&(h=0,d=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(ie.range(d,h)):this.newSel=ie.single(d,h)}}}function Cv(n,e){let t,{newSel:r}=e,s=n.state.selection.main,l=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:c}=e.bounds,h=s.from,d=null;(l===8||he.android&&e.text.length<c-a)&&(h=s.to,d="end");let p=Ov(n.state.doc.sliceString(a,c,Ro),e.text,h-a,d);p&&(he.chrome&&l==13&&p.toB==p.from+2&&e.text.slice(p.from,p.toB)==Ro+Ro&&p.toB--,t={from:a+p.from,to:a+p.toA,insert:Le.of(e.text.slice(p.from,p.toB).split(Ro))})}else r&&(!n.hasFocus&&n.state.facet(Nr)||r.main.eq(s))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!s.empty&&r&&r.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:(he.mac||he.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=ie.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:Le.of([t.insert.toString().replace("."," ")])}):t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:n.state.doc.lineAt(s.from).to<s.to&&n.docView.lineHasWidget(s.to)&&n.inputState.insertingTextAt>Date.now()-50?t={from:s.from,to:s.to,insert:n.state.toText(n.inputState.insertingText)}:he.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=ie.single(r.main.anchor-1,r.main.head-1)),t={from:s.from,to:s.to,insert:Le.of([" "])}),t)return Nd(n,t,r,l);if(r&&!r.main.eq(s)){let a=!1,c="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),c=n.inputState.lastSelectionOrigin,c=="select.pointer"&&(r=Sv(n.state.facet(pl).map(h=>h(n)),r))),n.dispatch({selection:r,scrollIntoView:a,userEvent:c}),!0}else return!1}function Nd(n,e,t,r=-1){if(he.ios&&n.inputState.flushIOSKey(e))return!0;let s=n.state.selection.main;if(he.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&n.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&ws(n.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&ws(n.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&ws(n.contentDOM,"Delete",46)))return!0;let l=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let a,c=()=>a||(a=tO(n,e,t));return n.state.facet(uv).some(h=>h(n,e.from,e.to,l,c))||n.dispatch(c()),!0}function tO(n,e,t){let r,s=n.state,l=s.selection.main,a=-1;if(e.from==e.to&&e.from<l.from||e.from>l.to){let h=e.from<l.from?-1:1,d=h<0?l.from:l.to,p=Vo(s.facet(pl).map(m=>m(n)),d,h);e.from==p&&(a=p)}if(a>-1)r={changes:e,selection:ie.cursor(e.from+e.insert.length,-1)};else if(e.from>=l.from&&e.to<=l.to&&e.to-e.from>=(l.to-l.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let h=l.from<e.from?s.sliceDoc(l.from,e.from):"",d=l.to>e.to?s.sliceDoc(e.to,l.to):"";r=s.replaceSelection(n.state.toText(h+e.insert.sliceString(0,void 0,n.state.lineBreak)+d))}else{let h=s.changes(e),d=t&&t.main.to<=h.newLength?t.main:void 0;if(s.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&e.to<=l.to+10&&e.to>=l.to-10){let p=n.state.sliceDoc(e.from,e.to),m,v=t&&wv(n,t.main.head);if(v){let S=e.insert.length-(e.to-e.from);m={from:v.from,to:v.to-S}}else m=n.state.doc.lineAt(l.head);let w=l.to-e.to;r=s.changeByRange(S=>{if(S.from==l.from&&S.to==l.to)return{changes:h,range:d||S.map(h)};let C=S.to-w,O=C-p.length;if(n.state.sliceDoc(O,C)!=p||C>=m.from&&O<=m.to)return{range:S};let N=s.changes({from:O,to:C,insert:e.insert}),E=S.to-l.to;return{changes:N,range:d?ie.range(Math.max(0,d.anchor+E),Math.max(0,d.head+E)):S.map(N)}})}else r={changes:h,selection:d&&s.selection.replaceRange(d)}}let c="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,c+=".compose",n.inputState.compositionFirstChange&&(c+=".start",n.inputState.compositionFirstChange=!1)),s.update(r,{userEvent:c,scrollIntoView:!0})}function Ov(n,e,t,r){let s=Math.min(n.length,e.length),l=0;for(;l<s&&n.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==s&&n.length==e.length)return null;let a=n.length,c=e.length;for(;a>0&&c>0&&n.charCodeAt(a-1)==e.charCodeAt(c-1);)a--,c--;if(r=="end"){let h=Math.max(0,l-Math.min(a,c));t-=a+h-l}if(a<l&&n.length<e.length){let h=t<=l&&t>=a?l-t:0;l-=h,c=l+(c-a),a=l}else if(c<l){let h=t<=l&&t>=c?l-t:0;l-=h,a=l+(a-c),c=l}return{from:l,toA:a,toB:c}}function nO(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:l}=n.observer.selectionRange;return t&&(e.push(new b0(t,r)),(s!=t||l!=r)&&e.push(new b0(s,l))),e}function rO(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?ie.single(t+e,r+e):null}class iO{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,he.safari&&e.contentDOM.addEventListener("input",()=>null),he.gecko&&wO(e.contentDOM.ownerDocument)}handleEvent(e){!fO(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let s of r.observers)s(this.view,t);for(let s of r.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=sO(e),r=this.handlers,s=this.view.contentDOM;for(let l in t)if(l!="scroll"){let a=!t[l].handlers.length,c=r[l];c&&a!=!c.handlers.length&&(s.removeEventListener(l,this.handleEvent),c=null),c||s.addEventListener(l,this.handleEvent,{passive:a})}for(let l in r)l!="scroll"&&!t[l]&&s.removeEventListener(l,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Nv.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),he.android&&he.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return he.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Pv.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||oO.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,ws(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:he.safari&&!he.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function S0(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(s){or(t.state,s)}}}function sO(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let s=r.spec,l=s&&s.plugin.domEventHandlers,a=s&&s.plugin.domEventObservers;if(l)for(let c in l){let h=l[c];h&&t(c).handlers.push(S0(r.value,h))}if(a)for(let c in a){let h=a[c];h&&t(c).observers.push(S0(r.value,h))}}for(let r in Qn)t(r).handlers.push(Qn[r]);for(let r in Nn)t(r).observers.push(Nn[r]);return e}const Pv=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],oO="dthko",Nv=[16,17,18,20,91,92,224,225],Ta=6;function Da(n){return Math.max(0,n)*.7+8}function lO(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class aO{constructor(e,t,r,s){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=mC(e.contentDOM),this.atoms=e.state.facet(pl).map(a=>a(e));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(ze.allowMultipleSelections)&&uO(e,t),this.dragging=hO(e,t)&&Mv(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&lO(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,s=0,l=0,a=this.view.win.innerWidth,c=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:l,bottom:c}=this.scrollParents.y.getBoundingClientRect());let h=vv(this.view);e.clientX-h.left<=s+Ta?t=-Da(s-e.clientX):e.clientX+h.right>=a-Ta&&(t=Da(e.clientX-a)),e.clientY-h.top<=l+Ta?r=-Da(l-e.clientY):e.clientY+h.bottom>=c-Ta&&(r=Da(e.clientY-c)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,r=Sv(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function uO(n,e){let t=n.state.facet(sv);return t.length?t[0](e):he.mac?e.metaKey:e.ctrlKey}function cO(n,e){let t=n.state.facet(ov);return t.length?t[0](e):he.mac?!e.altKey:!e.ctrlKey}function hO(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=Zo(n.root);if(!r||r.rangeCount==0)return!0;let s=r.getRangeAt(0).getClientRects();for(let l=0;l<s.length;l++){let a=s[l];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function fO(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Ve.get(t))&&r.ignoreEvent(e))return!1;return!0}const Qn=Object.create(null),Nn=Object.create(null),Av=he.ie&&he.ie_version<15||he.ios&&he.webkit_version<604;function dO(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Ev(n,t.value)},50)}function Iu(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function Ev(n,e){e=Iu(n.state,Cd,e);let{state:t}=n,r,s=1,l=t.toText(e),a=l.lines==t.selection.ranges.length;if(_f!=null&&t.selection.ranges.every(h=>h.empty)&&_f==l.toString()){let h=-1;r=t.changeByRange(d=>{let p=t.doc.lineAt(d.from);if(p.from==h)return{range:d};h=p.from;let m=t.toText((a?l.line(s++).text:e)+t.lineBreak);return{changes:{from:p.from,insert:m},range:ie.cursor(d.from+m.length)}})}else a?r=t.changeByRange(h=>{let d=l.line(s++);return{changes:{from:h.from,to:h.to,insert:d.text},range:ie.cursor(h.from+d.length)}}):r=t.replaceSelection(l);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Nn.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Qn.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Nn.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Nn.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Qn.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(lv))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=mO(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new aO(n,e,t,r)),r&&n.observer.ignore(()=>{Vx(n.contentDOM);let l=n.root.activeElement;l&&!l.contains(n.contentDOM)&&l.blur()});let s=n.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function C0(n,e,t,r){if(r==1)return ie.cursor(e,t);if(r==2)return WC(n.state,e,t);{let s=pt.find(n.docView,e),l=n.state.doc.lineAt(s?s.posAtEnd:e),a=s?s.posAtStart:l.from,c=s?s.posAtEnd:l.to;return c<n.state.doc.length&&c==l.to&&c++,ie.range(a,c)}}let O0=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function pO(n,e,t,r){let s=pt.find(n.docView,e);if(!s)return 1;let l=e-s.posAtStart;if(l==0)return 1;if(l==s.length)return-1;let a=s.coordsAt(l,-1);if(a&&O0(t,r,a))return-1;let c=s.coordsAt(l,1);return c&&O0(t,r,c)?1:a&&a.bottom>=r?-1:1}function P0(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:pO(n,t,e.clientX,e.clientY)}}const gO=he.ie&&he.ie_version<=11;let N0=null,A0=0,E0=0;function Mv(n){if(!gO)return n.detail;let e=N0,t=E0;return N0=n,E0=Date.now(),A0=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(A0+1)%3:1}function mO(n,e){let t=P0(n,e),r=Mv(e),s=n.state.selection;return{update(l){l.docChanged&&(t.pos=l.changes.mapPos(t.pos),s=s.map(l.changes))},get(l,a,c){let h=P0(n,l),d,p=C0(n,h.pos,h.bias,r);if(t.pos!=h.pos&&!a){let m=C0(n,t.pos,t.bias,r),v=Math.min(m.from,p.from),w=Math.max(m.to,p.to);p=v<p.from?ie.range(v,w):ie.range(w,v)}return a?s.replaceRange(s.main.extend(p.from,p.to)):c&&r==1&&s.ranges.length>1&&(d=yO(s,h.pos))?d:c?s.addRange(p):ie.create([p])}}}function yO(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:s}=n.ranges[t];if(r<=e&&s>=e)return ie.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Qn.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let s=n.docView.nearest(e.target);if(s&&s.isWidget){let l=s.posAtStart,a=l+s.length;(l>=t.to||a<=t.from)&&(t=ie.range(l,a))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Iu(n.state,Od,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Qn.dragend=n=>(n.inputState.draggedContent=null,!1);function M0(n,e,t,r){if(t=Iu(n.state,Cd,t),!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:l}=n.inputState,a=r&&l&&cO(n,e)?{from:l.from,to:l.to}:null,c={from:s,insert:t},h=n.state.changes(a?[a,c]:c);n.focus(),n.dispatch({changes:h,selection:{anchor:h.mapPos(s,-1),head:h.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Qn.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),s=0,l=()=>{++s==t.length&&M0(n,e,r.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let c=new FileReader;c.onerror=l,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(r[a]=c.result),l()},c.readAsText(t[a])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return M0(n,e,r,!0),!0}return!1};Qn.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=Av?null:e.clipboardData;return t?(Ev(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(dO(n),!1)};function xO(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function vO(n){let e=[],t=[],r=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:l}of n.selection.ranges){let a=n.doc.lineAt(l);a.number>s&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),s=a.number}r=!0}return{text:Iu(n,Od,e.join(n.lineBreak)),ranges:t,linewise:r}}let _f=null;Qn.copy=Qn.cut=(n,e)=>{let{text:t,ranges:r,linewise:s}=vO(n.state);if(!t&&!s)return!1;_f=s?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let l=Av?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",t),!0):(xO(n,t),!1)};const Rv=Is.define();function Tv(n,e){let t=[];for(let r of n.facet(cv)){let s=r(n,e);s&&t.push(s)}return t.length?n.update({effects:t,annotations:Rv.of(!0)}):null}function Dv(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=Tv(n.state,e);t?n.dispatch(t):n.update([])}},10)}Nn.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Dv(n)};Nn.blur=n=>{n.observer.clearSelectionRange(),Dv(n)};Nn.compositionstart=Nn.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Nn.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,he.chrome&&he.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Nn.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Qn.beforeinput=(n,e)=>{var t,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let l=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),a=e.getTargetRanges();if(l&&a.length){let c=a[0],h=n.posAtDOM(c.startContainer,c.startOffset),d=n.posAtDOM(c.endContainer,c.endOffset);return Nd(n,{from:h,to:d,insert:n.state.toText(l)},null),!0}}let s;if(he.chrome&&he.android&&(s=Pv.find(l=>l.inputType==e.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let l=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>l+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return he.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),he.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Nn.compositionend(n,e),20),!1};const R0=new Set;function wO(n){R0.has(n)||(R0.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const T0=["pre-wrap","normal","pre-line","break-spaces"];let Ns=!1;function D0(){Ns=!1}class kO{constructor(e){this.lineWrapping=e,this.doc=Le.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return T0.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let s=e[r];s<0?r++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,r,s,l,a){let c=T0.indexOf(e)>-1,h=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=c;if(this.lineWrapping=c,this.lineHeight=t,this.charWidth=r,this.textHeight=s,this.lineLength=l,h){this.heightSamples={};for(let d=0;d<a.length;d++){let p=a[d];p<0?d++:this.heightSamples[Math.floor(p*10)]=!0}}return h}}class bO{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class sr{constructor(e,t,r,s,l){this.from=e,this.length=t,this.top=r,this.height=s,this._content=l}get type(){return typeof this._content=="number"?Kt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof fi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new sr(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Ke=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(Ke||(Ke={}));const Ja=.001;class qt{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ja&&(Ns=!0),this.height=e)}replace(e,t,r){return qt.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,s){let l=this,a=r.doc;for(let c=s.length-1;c>=0;c--){let{fromA:h,toA:d,fromB:p,toB:m}=s[c],v=l.lineAt(h,Ke.ByPosNoHeight,r.setDoc(t),0,0),w=v.to>=d?v:l.lineAt(d,Ke.ByPosNoHeight,r,0,0);for(m+=w.to-d,d=w.to;c>0&&v.from<=s[c-1].toA;)h=s[c-1].fromA,p=s[c-1].fromB,c--,h<v.from&&(v=l.lineAt(h,Ke.ByPosNoHeight,r,0,0));p+=v.from-h,h=v.from;let S=Ad.build(r.setDoc(a),e,p,m);l=mu(l,l.replace(h,d,S))}return l.updateHeight(r,0)}static empty(){return new pn(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,s=0,l=0;for(;;)if(t==r)if(s>l*2){let c=e[t-1];c.break?e.splice(--t,1,c.left,null,c.right):e.splice(--t,1,c.left,c.right),r+=1+c.break,s-=c.size}else if(l>s*2){let c=e[r];c.break?e.splice(r,1,c.left,null,c.right):e.splice(r,1,c.left,c.right),r+=2+c.break,l-=c.size}else break;else if(s<l){let c=e[t++];c&&(s+=c.size)}else{let c=e[--r];c&&(l+=c.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,r++),new SO(qt.of(e.slice(0,t)),a,qt.of(e.slice(r)))}}function mu(n,e){return n==e?n:(n.constructor!=e.constructor&&(Ns=!0),e)}qt.prototype.size=1;class jv extends qt{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,s){return new sr(s,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,s,l){return this.blockAt(0,r,s,l)}forEachLine(e,t,r,s,l,a){e<=l+this.length&&t>=l&&a(this.blockAt(0,r,s,l))}updateHeight(e,t=0,r=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class pn extends jv{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,s){return new sr(s,this.length,r,this.height,this.breaks)}replace(e,t,r){let s=r[0];return r.length==1&&(s instanceof pn||s instanceof Et&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Et?s=new pn(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):qt.of(r)}updateHeight(e,t=0,r=!1,s){return s&&s.from<=t&&s.more?this.setHeight(s.heights[s.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Et extends qt{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,l=s-r+1,a,c=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*l);a=h/l,this.length>l+1&&(c=(this.height-h)/(this.length-l-1))}else a=this.height/l;return{firstLine:r,lastLine:s,perLine:a,perChar:c}}blockAt(e,t,r,s){let{firstLine:l,lastLine:a,perLine:c,perChar:h}=this.heightMetrics(t,s);if(t.lineWrapping){let d=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),p=t.doc.lineAt(d),m=c+p.length*h,v=Math.max(r,e-m/2);return new sr(p.from,p.length,v,m,0)}else{let d=Math.max(0,Math.min(a-l,Math.floor((e-r)/c))),{from:p,length:m}=t.doc.line(l+d);return new sr(p,m,r+c*d,c,0)}}lineAt(e,t,r,s,l){if(t==Ke.ByHeight)return this.blockAt(e,r,s,l);if(t==Ke.ByPosNoHeight){let{from:w,to:S}=r.doc.lineAt(e);return new sr(w,S-w,0,0,0)}let{firstLine:a,perLine:c,perChar:h}=this.heightMetrics(r,l),d=r.doc.lineAt(e),p=c+d.length*h,m=d.number-a,v=s+c*m+h*(d.from-l-m);return new sr(d.from,d.length,Math.max(s,Math.min(v,s+this.height-p)),p,0)}forEachLine(e,t,r,s,l,a){e=Math.max(e,l),t=Math.min(t,l+this.length);let{firstLine:c,perLine:h,perChar:d}=this.heightMetrics(r,l);for(let p=e,m=s;p<=t;){let v=r.doc.lineAt(p);if(p==e){let S=v.number-c;m+=h*S+d*(e-l-S)}let w=h+d*v.length;a(new sr(v.from,v.length,m,w,0)),m+=w,p=v.to+1}}replace(e,t,r){let s=this.length-t;if(s>0){let l=r[r.length-1];l instanceof Et?r[r.length-1]=new Et(l.length+s):r.push(null,new Et(s-1))}if(e>0){let l=r[0];l instanceof Et?r[0]=new Et(e+l.length):r.unshift(new Et(e-1),null)}return qt.of(r)}decomposeLeft(e,t){t.push(new Et(e-1),null)}decomposeRight(e,t){t.push(null,new Et(this.length-e-1))}updateHeight(e,t=0,r=!1,s){let l=t+this.length;if(s&&s.from<=t+this.length&&s.more){let a=[],c=Math.max(t,s.from),h=-1;for(s.from>t&&a.push(new Et(s.from-t-1).updateHeight(e,t));c<=l&&s.more;){let p=e.doc.lineAt(c).length;a.length&&a.push(null);let m=s.heights[s.index++];h==-1?h=m:Math.abs(m-h)>=Ja&&(h=-2);let v=new pn(p,m);v.outdated=!1,a.push(v),c+=p+1}c<=l&&a.push(null,new Et(l-c).updateHeight(e,c));let d=qt.of(a);return(h<0||Math.abs(d.height-this.height)>=Ja||Math.abs(h-this.heightMetrics(e,t).perLine)>=Ja)&&(Ns=!0),mu(this,d)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class SO extends qt{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,s){let l=r+this.left.height;return e<l?this.left.blockAt(e,t,r,s):this.right.blockAt(e,t,l,s+this.left.length+this.break)}lineAt(e,t,r,s,l){let a=s+this.left.height,c=l+this.left.length+this.break,h=t==Ke.ByHeight?e<a:e<c,d=h?this.left.lineAt(e,t,r,s,l):this.right.lineAt(e,t,r,a,c);if(this.break||(h?d.to<c:d.from>c))return d;let p=t==Ke.ByPosNoHeight?Ke.ByPosNoHeight:Ke.ByPos;return h?d.join(this.right.lineAt(c,p,r,a,c)):this.left.lineAt(c,p,r,s,l).join(d)}forEachLine(e,t,r,s,l,a){let c=s+this.left.height,h=l+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,t,r,s,l,a),t>=h&&this.right.forEachLine(e,t,r,c,h,a);else{let d=this.lineAt(h,Ke.ByPos,r,s,l);e<d.from&&this.left.forEachLine(e,d.from-1,r,s,l,a),d.to>=e&&d.from<=t&&a(d),t>d.to&&this.right.forEachLine(d.to+1,t,r,c,h,a)}}replace(e,t,r){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,r));let l=[];e>0&&this.decomposeLeft(e,l);let a=l.length;for(let c of r)l.push(c);if(e>0&&j0(l,a-1),t<this.length){let c=l.length;this.decomposeRight(t,l),j0(l,c)}return qt.of(l)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,s=r+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?qt.of(this.break?[e,null,t]:[e,t]):(this.left=mu(this.left,e),this.right=mu(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,s){let{left:l,right:a}=this,c=t+l.length+this.break,h=null;return s&&s.from<=t+l.length&&s.more?h=l=l.updateHeight(e,t,r,s):l.updateHeight(e,t,r),s&&s.from<=c+a.length&&s.more?h=a=a.updateHeight(e,c,r,s):a.updateHeight(e,c,r),h?this.balanced(l,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function j0(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof Et&&(r=n[e+1])instanceof Et&&n.splice(e-1,3,new Et(t.length+1+r.length))}const CO=5;class Ad{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof pn?s.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new pn(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let s=r.widget?r.widget.estimatedHeight:0,l=r.widget?r.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let a=t-e;r.block?this.addBlock(new jv(a,s,r)):(a||l||s>=CO)&&this.addLineDeco(s,l,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new pn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new Et(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof pn)return e;let t=new pn(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let s=this.ensureLine();s.length+=r,s.collapsed+=r,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof pn)&&!this.isCovered?this.nodes.push(new pn(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let s of this.nodes)s instanceof pn&&s.updateHeight(this.oracle,r),r+=s?s.length:1;return this.nodes}static build(e,t,r,s){let l=new Ad(r,e);return Fe.spans(t,r,s,l,0),l.finish(r)}}function OO(n,e,t){let r=new PO;return Fe.compare(n,e,t,r,0),r.changes}class PO{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,s){(e<t||r&&r.heightRelevant||s&&s.heightRelevant)&&Ya(e,t,this.changes,5)}}function NO(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,s=r.defaultView||window,l=Math.max(0,t.left),a=Math.min(s.innerWidth,t.right),c=Math.max(0,t.top),h=Math.min(s.innerHeight,t.bottom);for(let d=n.parentNode;d&&d!=r.body;)if(d.nodeType==1){let p=d,m=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&m.overflow!="visible"){let v=p.getBoundingClientRect();l=Math.max(l,v.left),a=Math.min(a,v.right),c=Math.max(c,v.top),h=Math.min(d==n.parentNode?s.innerHeight:h,v.bottom)}d=m.position=="absolute"||m.position=="fixed"?p.offsetParent:p.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:l-t.left,right:Math.max(l,a)-t.left,top:c-(t.top+e),bottom:Math.max(c,h)-(t.top+e)}}function AO(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function EO(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Vh{constructor(e,t,r,s){this.from=e,this.to=t,this.size=r,this.displaySize=s}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let s=e[r],l=t[r];if(s.from!=l.from||s.to!=l.to||s.size!=l.size)return!1}return!0}draw(e,t){return ot.replace({widget:new MO(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class MO extends hl{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class L0{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=I0,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=st.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Pd).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new kO(t),this.stateDeco=e.facet(tl).filter(r=>typeof r!="function"),this.heightMap=qt.empty().applyChanges(this.stateDeco,Le.empty,this.heightOracle.setDoc(e.doc),[new On(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=ot.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let s=r?t.head:t.anchor;if(!e.some(({from:l,to:a})=>s>=l&&s<=a)){let{from:l,to:a}=this.lineBlockAt(s);e.push(new ja(l,a))}}return this.viewports=e.sort((r,s)=>r.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?I0:new Ed(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(To(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(tl).filter(p=>typeof p!="function");let s=e.changedRanges,l=On.extendWithRanges(s,OO(r,this.stateDeco,e?e.changes:Ot.empty(this.state.doc.length))),a=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);D0(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),(this.heightMap.height!=a||Ns)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let h=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<h.from||t.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t));let d=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(fv)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),s=this.heightOracle,l=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?st.RTL:st.LTR;let a=this.heightOracle.mustRefreshForWrapping(l),c=t.getBoundingClientRect(),h=a||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let d=0,p=0;if(c.width&&c.height){let{scaleX:I,scaleY:R}=Hx(t,c);(I>.005&&Math.abs(this.scaleX-I)>.005||R>.005&&Math.abs(this.scaleY-R)>.005)&&(this.scaleX=I,this.scaleY=R,d|=16,a=h=!0)}let m=(parseInt(r.paddingTop)||0)*this.scaleY,v=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=m||this.paddingBottom!=v)&&(this.paddingTop=m,this.paddingBottom=v,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let w=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=w&&(this.scrollAnchorHeight=-1,this.scrollTop=w),this.scrolledToBottom=Qx(e.scrollDOM);let S=(this.printing?EO:NO)(t,this.paddingTop),C=S.top-this.pixelViewport.top,O=S.bottom-this.pixelViewport.bottom;this.pixelViewport=S;let N=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(N!=this.inView&&(this.inView=N,N&&(h=!0)),!this.inView&&!this.scrollTarget&&!AO(e.dom))return 0;let E=c.width;if((this.contentDOMWidth!=E||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),h){let I=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(I)&&(a=!0),a||s.lineWrapping&&Math.abs(E-this.contentDOMWidth)>s.charWidth){let{lineHeight:R,charWidth:L,textHeight:j}=e.docView.measureTextSize();a=R>0&&s.refresh(l,R,L,j,Math.max(5,E/L),I),a&&(e.docView.minWidth=0,d|=16)}C>0&&O>0?p=Math.max(C,O):C<0&&O<0&&(p=Math.min(C,O)),D0();for(let R of this.viewports){let L=R.from==this.viewport.from?I:e.docView.measureVisibleLineHeights(R);this.heightMap=(a?qt.empty().applyChanges(this.stateDeco,Le.empty,this.heightOracle,[new On(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,a,new bO(R.from,L))}Ns&&(d|=2)}let T=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return T&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),d|=this.updateForViewport()),(d&2||T)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,l=this.heightOracle,{visibleTop:a,visibleBottom:c}=this,h=new ja(s.lineAt(a-r*1e3,Ke.ByHeight,l,0,0).from,s.lineAt(c+(1-r)*1e3,Ke.ByHeight,l,0,0).to);if(t){let{head:d}=t.range;if(d<h.from||d>h.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),m=s.lineAt(d,Ke.ByPos,l,0,0),v;t.y=="center"?v=(m.top+m.bottom)/2-p/2:t.y=="start"||t.y=="nearest"&&d<h.from?v=m.top:v=m.bottom-p,h=new ja(s.lineAt(v-1e3/2,Ke.ByHeight,l,0,0).from,s.lineAt(v+p+1e3/2,Ke.ByHeight,l,0,0).to)}}return h}mapViewport(e,t){let r=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new ja(this.heightMap.lineAt(r,Ke.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,Ke.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,Ke.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(t,Ke.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:c}=this;return(e==0||s<=a-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||l>=c+Math.max(10,Math.min(r,250)))&&s>a-2*1e3&&l<c+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let s of e)t.touchesRange(s.from,s.to)||r.push(new Vh(t.mapPos(s.from),t.mapPos(s.to),s.size,s.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,s=r?1e4:2e3,l=s>>1,a=s<<1;if(this.defaultTextDirection!=st.LTR&&!r)return[];let c=[],h=(p,m,v,w)=>{if(m-p<l)return;let S=this.state.selection.main,C=[S.from];S.empty||C.push(S.to);for(let N of C)if(N>p&&N<m){h(p,N-10,v,w),h(N+10,m,v,w);return}let O=TO(e,N=>N.from>=v.from&&N.to<=v.to&&Math.abs(N.from-p)<l&&Math.abs(N.to-m)<l&&!C.some(E=>N.from<E&&N.to>E));if(!O){if(m<v.to&&t&&r&&t.visibleRanges.some(T=>T.from<=m&&T.to>=m)){let T=t.moveToLineBoundary(ie.cursor(m),!1,!0).head;T>p&&(m=T)}let N=this.gapSize(v,p,m,w),E=r||N<2e6?N:2e6;O=new Vh(p,m,N,E)}c.push(O)},d=p=>{if(p.length<a||p.type!=Kt.Text)return;let m=RO(p.from,p.to,this.stateDeco);if(m.total<a)return;let v=this.scrollTarget?this.scrollTarget.range.head:null,w,S;if(r){let C=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,O,N;if(v!=null){let E=Ia(m,v),T=((this.visibleBottom-this.visibleTop)/2+C)/p.height;O=E-T,N=E+T}else O=(this.visibleTop-p.top-C)/p.height,N=(this.visibleBottom-p.top+C)/p.height;w=La(m,O),S=La(m,N)}else{let C=m.total*this.heightOracle.charWidth,O=s*this.heightOracle.charWidth,N=0;if(C>2e6)for(let L of e)L.from>=p.from&&L.from<p.to&&L.size!=L.displaySize&&L.from*this.heightOracle.charWidth+N<this.pixelViewport.left&&(N=L.size-L.displaySize);let E=this.pixelViewport.left+N,T=this.pixelViewport.right+N,I,R;if(v!=null){let L=Ia(m,v),j=((T-E)/2+O)/C;I=L-j,R=L+j}else I=(E-O)/C,R=(T+O)/C;w=La(m,I),S=La(m,R)}w>p.from&&h(p.from,w,p,m),S<p.to&&h(S,p.to,p,m)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(d):d(p);return c}gapSize(e,t,r,s){let l=Ia(s,r)-Ia(s,t);return this.heightOracle.lineWrapping?e.height*l:s.total*this.heightOracle.charWidth*l}updateLineGaps(e){Vh.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=ot.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];Fe.spans(t,this.viewport.from,this.viewport.to,{span(l,a){r.push({from:l,to:a})},point(){}},20);let s=0;if(r.length!=this.visibleRanges.length)s=12;else for(let l=0;l<r.length&&!(s&8);l++){let a=this.visibleRanges[l],c=r[l];(a.from!=c.from||a.to!=c.to)&&(s|=4,e&&e.mapPos(a.from,-1)==c.from&&e.mapPos(a.to,1)==c.to||(s|=8))}return this.visibleRanges=r,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||To(this.heightMap.lineAt(e,Ke.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||To(this.heightMap.lineAt(this.scaler.fromDOM(e),Ke.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return To(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ja{constructor(e,t){this.from=e,this.to=t}}function RO(n,e,t){let r=[],s=n,l=0;return Fe.spans(t,n,e,{span(){},point(a,c){a>s&&(r.push({from:s,to:a}),l+=a-s),s=c}},20),s<e&&(r.push({from:s,to:e}),l+=e-s),{total:l,ranges:r}}function La({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let s=0;;s++){let{from:l,to:a}=e[s],c=a-l;if(r<=c)return l+r;r-=c}}function Ia(n,e){let t=0;for(let{from:r,to:s}of n.ranges){if(e<=s){t+=e-r;break}t+=s-r}return t/n.total}function TO(n,e){for(let t of n)if(e(t))return t}const I0={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class Ed{constructor(e,t,r){let s=0,l=0,a=0;this.viewports=r.map(({from:c,to:h})=>{let d=t.lineAt(c,Ke.ByPos,e,0,0).top,p=t.lineAt(h,Ke.ByPos,e,0,0).bottom;return s+=p-d,{from:c,to:h,top:d,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let c of this.viewports)c.domTop=a+(c.top-l)*this.scale,a=c.domBottom=c.domTop+(c.bottom-c.top),l=c.bottom}toDOM(e){for(let t=0,r=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.top)return s+(e-r)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);r=l.bottom,s=l.domBottom}}fromDOM(e){for(let t=0,r=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.domTop)return r+(e-s)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);r=l.bottom,s=l.domBottom}}eq(e){return e instanceof Ed?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function To(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new sr(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(s=>To(s,e)):n._content)}const Ba=be.define({combine:n=>n.join(" ")}),Hf=be.define({combine:n=>n.indexOf(!0)>-1}),Vf=ci.newName(),Lv=ci.newName(),Iv=ci.newName(),Bv={"&light":"."+Lv,"&dark":"."+Iv};function Wf(n,e,t){return new ci(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+r}})}const DO=Wf("."+Vf,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Bv),jO={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Wh=he.ie&&he.ie_version<=11;class LO{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new yC,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(he.ie&&he.ie_version<=11||he.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&he.android&&e.constructor.EDIT_CONTEXT!==!1&&!(he.chrome&&he.chrome_version<126)&&(this.editContext=new BO(e),e.state.facet(Nr)&&(e.contentDOM.editContext=this.editContext.editContext)),Wh&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,s=this.selectionRange;if(r.state.facet(Nr)?r.root.activeElement!=this.dom:!Ga(this.dom,s))return;let l=s.anchorNode&&r.docView.nearest(s.anchorNode);if(l&&l.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(he.ie&&he.ie_version<=11||he.android&&he.chrome)&&!r.state.selection.main.empty&&s.focusNode&&_o(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Zo(e.root);if(!t)return!1;let r=he.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&IO(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let s=Ga(this.dom,r);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&vC(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,jO),Wh&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Wh&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let s=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=l.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&l.force&&ws(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,s=!1;for(let l of e){let a=this.readMutation(l);a&&(a.typeOver&&(s=!0),t==-1?{from:t,to:r}=a:(t=Math.min(a.from,t),r=Math.max(a.to,r)))}return{from:t,to:r,typeOver:s}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),s=this.selectionChanged&&Ga(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let l=new eO(this.view,e,t,r);return this.view.docView.domChanged={newSel:l.newSel?l.newSel.main:null},l}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,s=Cv(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=B0(t,e.previousSibling||e.target.previousSibling,-1),s=B0(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Nr)!=e.state.facet(Nr)&&(e.view.contentDOM.editContext=e.state.facet(Nr)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function B0(n,e,t){for(;e;){let r=Ve.get(e);if(r&&r.parent==n)return r;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function z0(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,l=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return _o(a.node,a.offset,s,l)&&([t,r,s,l]=[s,l,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:l}}function IO(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return z0(n,s)}let t=null;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?z0(n,t):null}class BO{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let s=e.state.selection.main,{anchor:l,head:a}=s,c=this.toEditorPos(r.updateRangeStart),h=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:c,drifted:!1});let d=h-c>r.text.length;c==this.from&&l<this.from?c=l:h==this.to&&l>this.to&&(h=l);let p=Ov(e.state.sliceDoc(c,h),r.text,(d?s.from:s.to)-c,d?"end":null);if(!p){let v=ie.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));v.main.eq(s)||e.dispatch({selection:v,userEvent:"select"});return}let m={from:p.from+c,to:p.toA+c,insert:Le.of(r.text.slice(p.from,p.toB).split(`
`))};if((he.mac||he.android)&&m.from==a-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(m={from:c,to:h,insert:Le.of([r.text.replace("."," ")])}),this.pendingContextChange=m,!e.state.readOnly){let v=this.to-this.from+(m.to-m.from+m.insert.length);Nd(e,m,ie.single(this.toEditorPos(r.selectionStart,v),this.toEditorPos(r.selectionEnd,v)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),m.from<m.to&&!m.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(t.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let s=[],l=null;for(let a=this.toEditorPos(r.rangeStart),c=this.toEditorPos(r.rangeEnd);a<c;a++){let h=e.coordsForChar(a);l=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||l||new DOMRect,s.push(l)}t.updateCharacterBounds(r.rangeStart,s)},this.handlers.textformatupdate=r=>{let s=[];for(let l of r.getTextFormats()){let a=l.underlineStyle,c=l.underlineThickness;if(!/none/i.test(a)&&!/none/i.test(c)){let h=this.toEditorPos(l.rangeStart),d=this.toEditorPos(l.rangeEnd);if(h<d){let p=`text-decoration: underline ${/^[a-z]/.test(a)?a+" ":a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${/thin/i.test(c)?1:2}px`;s.push(ot.mark({attributes:{style:p}}).range(h,d))}}}e.dispatch({effects:pv.of(ot.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let s=Zo(r.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,s=this.pendingContextChange;return e.changes.iterChanges((l,a,c,h,d)=>{if(r)return;let p=d.length-(a-l);if(s&&a>=s.to)if(s.from==l&&s.to==a&&s.insert.eq(d)){s=this.pendingContextChange=null,t+=p,this.to+=p;return}else s=null,this.revertPending(e.state);if(l+=t,a+=t,a<=this.from)this.from+=p,this.to+=p;else if(l<this.to){if(l<this.from||a>this.to||this.to-this.from+d.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(l),this.toContextPos(a),d.toString()),this.to+=p}t+=p}),s&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(r,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Ae{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(s=>s.forEach(l=>r(l,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||xC(e.parent)||document,this.viewState=new L0(e.state||ze.create(e)),e.scrollTo&&e.scrollTo.is(Ra)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ds).map(s=>new Fh(s));for(let s of this.plugins)s.update(this);this.observer=new LO(this),this.inputState=new iO(this),this.inputState.ensureHandlers(this.plugins),this.docView=new m0(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Ht?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,s,l=this.state;for(let v of e){if(v.startState!=l)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");l=v.state}if(this.destroyed){this.viewState.state=l;return}let a=this.hasFocus,c=0,h=null;e.some(v=>v.annotation(Rv))?(this.inputState.notifiedFocused=a,c=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,h=Tv(l,a),h||(c=1));let d=this.observer.delayedAndroidKey,p=null;if(d?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(l.doc)||!this.state.selection.eq(l.selection))&&(p=null)):this.observer.clear(),l.facet(ze.phrases)!=this.state.facet(ze.phrases))return this.setState(l);s=gu.create(this,l,e),s.flags|=c;let m=this.viewState.scrollTarget;try{this.updateState=2;for(let v of e){if(m&&(m=m.map(v.changes)),v.scrollIntoView){let{main:w}=v.state.selection;m=new ks(w.empty?w:ie.cursor(w.head,w.head>w.anchor?-1:1))}for(let w of v.effects)w.is(Ra)&&(m=w.value.clip(this.state))}this.viewState.update(s,m),this.bidiCache=yu.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(Mo)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(v=>v.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Ba)!=s.state.facet(Ba)&&(this.viewState.mustMeasureContent=!0),(t||r||m||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let v of this.state.facet(Bf))try{v(s)}catch(w){or(this.state,w,"update listener")}(h||p)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),p&&!Cv(this,p)&&d.force&&ws(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new L0(e),this.plugins=e.facet(ds).map(r=>new Fh(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new m0(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ds),r=e.state.facet(ds);if(t!=r){let s=[];for(let l of r){let a=t.indexOf(l);if(a<0)s.push(new Fh(l));else{let c=this.plugins[a];c.mustUpdate=e,s.push(c)}}for(let l of this.plugins)l.mustUpdate!=e&&l.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){or(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,s=r.scrollTop*this.scaleY,{scrollAnchorPos:l,scrollAnchorHeight:a}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(a<0)if(Qx(r))l=-1,a=this.viewState.heightMap.height;else{let w=this.viewState.scrollAnchorAt(s);l=w.from,a=w.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];h&4||([this.measureRequests,d]=[d,this.measureRequests]);let p=d.map(w=>{try{return w.read(this)}catch(S){return or(this.state,S),F0}}),m=gu.create(this,this.state,[]),v=!1;m.flags|=h,t?t.flags|=h:t=m,this.updateState=2,m.empty||(this.updatePlugins(m),this.inputState.update(m),this.updateAttrs(),v=this.docView.update(m),v&&this.docViewUpdate());for(let w=0;w<d.length;w++)if(p[w]!=F0)try{let S=d[w];S.write&&S.write(p[w],this)}catch(S){or(this.state,S)}if(v&&this.docView.updateSelection(!0),!m.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let S=(l<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(l).top)-a;if(S>1||S<-1){s=s+S,r.scrollTop=s/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let c of this.state.facet(Bf))c(t)}get themeClasses(){return Vf+" "+(this.state.facet(Hf)?Iv:Lv)+" "+this.state.facet(Ba)}updateAttrs(){let e=_0(this,gv,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Nr)?"true":"false",class:"cm-content",style:`${he.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),_0(this,Pd,t);let r=this.observer.ignore(()=>{let s=Tf(this.contentDOM,this.contentAttrs,t),l=Tf(this.dom,this.editorAttrs,e);return s||l});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let s of r.effects)if(s.is(Ae.announce)){t&&(this.announceDOM.textContent=""),t=!1;let l=this.announceDOM.appendChild(document.createElement("div"));l.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Mo);let e=this.state.facet(Ae.cspNonce);ci.mount(this.root,this.styleModules.concat(DO).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return Hh(this,e,k0(this,e,t,r))}moveByGroup(e,t){return Hh(this,e,k0(this,e,t,r=>qC(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),s=this.textDirectionAt(e.from),l=r[t?r.length-1:0];return ie.cursor(l.side(t,s)+e.from,l.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,r=!0){return KC(this,e,t,r)}moveVertically(e,t,r){return Hh(this,e,GC(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),kv(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let s=this.state.doc.lineAt(e),l=this.bidiSpans(s),a=l[li.find(l,e-s.from,-1,t)];return Lu(r,a.dir==st.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(hv)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>zO)return rv(e.length);let t=this.textDirectionAt(e.from),r;for(let l of this.bidiCache)if(l.from==e.from&&l.dir==t&&(l.fresh||nv(l.isolates,r=g0(this,e))))return l.order;r||(r=g0(this,e));let s=TC(e.text,t,r);return this.bidiCache.push(new yu(e.from,e.to,t,r,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||he.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Vx(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Ra.of(new ks(typeof e=="number"?ie.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Ra.of(new ks(ie.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Wn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Wn.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=ci.newName(),s=[Ba.of(r),Mo.of(Wf(`.${r}`,e))];return t&&t.dark&&s.push(Hf.of(!0)),s}static baseTheme(e){return Tu.lowest(Mo.of(Wf("."+Vf,e,Bv)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),s=r&&Ve.get(r)||Ve.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}Ae.styleModule=Mo;Ae.inputHandler=uv;Ae.clipboardInputFilter=Cd;Ae.clipboardOutputFilter=Od;Ae.scrollHandler=dv;Ae.focusChangeEffect=cv;Ae.perLineTextDirection=hv;Ae.exceptionSink=av;Ae.updateListener=Bf;Ae.editable=Nr;Ae.mouseSelectionStyle=lv;Ae.dragMovesSelection=ov;Ae.clickAddsSelectionRange=sv;Ae.decorations=tl;Ae.outerDecorations=mv;Ae.atomicRanges=pl;Ae.bidiIsolatedRanges=yv;Ae.scrollMargins=xv;Ae.darkTheme=Hf;Ae.cspNonce=be.define({combine:n=>n.length?n[0]:""});Ae.contentAttributes=Pd;Ae.editorAttributes=gv;Ae.lineWrapping=Ae.contentAttributes.of({class:"cm-lineWrapping"});Ae.announce=vt.define();const zO=4096,F0={};class yu{constructor(e,t,r,s,l,a){this.from=e,this.to=t,this.dir=r,this.isolates=s,this.fresh=l,this.order=a}static update(e,t){if(t.empty&&!e.some(l=>l.fresh))return e;let r=[],s=e.length?e[e.length-1].dir:st.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let a=e[l];a.dir==s&&!t.touchesRange(a.from,a.to)&&r.push(new yu(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return r}}function _0(n,e,t){for(let r=n.state.facet(e),s=r.length-1;s>=0;s--){let l=r[s],a=typeof l=="function"?l(n):l;a&&Rf(a,t)}return t}const FO=he.mac?"mac":he.windows?"win":he.linux?"linux":"key";function _O(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let s,l,a,c;for(let h=0;h<t.length-1;++h){const d=t[h];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))a=!0;else if(/^mod$/i.test(d))e=="mac"?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(r="Alt-"+r),l&&(r="Ctrl-"+r),c&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function za(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const HO=Tu.default(Ae.domEventHandlers({keydown(n,e){return $O(VO(e.state),n,e,"editor")}})),Md=be.define({enables:HO}),H0=new WeakMap;function VO(n){let e=n.facet(Md),t=H0.get(e);return t||H0.set(e,t=QO(e.reduce((r,s)=>r.concat(s),[]))),t}let ii=null;const WO=4e3;function QO(n,e=FO){let t=Object.create(null),r=Object.create(null),s=(a,c)=>{let h=r[a];if(h==null)r[a]=c;else if(h!=c)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},l=(a,c,h,d,p)=>{var m,v;let w=t[a]||(t[a]=Object.create(null)),S=c.split(/ (?!$)/).map(N=>_O(N,e));for(let N=1;N<S.length;N++){let E=S.slice(0,N).join(" ");s(E,!0),w[E]||(w[E]={preventDefault:!0,stopPropagation:!1,run:[T=>{let I=ii={view:T,prefix:E,scope:a};return setTimeout(()=>{ii==I&&(ii=null)},WO),!0}]})}let C=S.join(" ");s(C,!1);let O=w[C]||(w[C]={preventDefault:!1,stopPropagation:!1,run:((v=(m=w._any)===null||m===void 0?void 0:m.run)===null||v===void 0?void 0:v.slice())||[]});h&&O.run.push(h),d&&(O.preventDefault=!0),p&&(O.stopPropagation=!0)};for(let a of n){let c=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let d of c){let p=t[d]||(t[d]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:m}=a;for(let v in p)p[v].run.push(w=>m(w,Qf))}let h=a[e]||a.key;if(h)for(let d of c)l(d,h,a.run,a.preventDefault,a.stopPropagation),a.shift&&l(d,"Shift-"+h,a.shift,a.preventDefault,a.stopPropagation)}return t}let Qf=null;function $O(n,e,t,r){Qf=e;let s=fC(e),l=K2(s,0),a=q2(l)==s.length&&s!=" ",c="",h=!1,d=!1,p=!1;ii&&ii.view==t&&ii.scope==r&&(c=ii.prefix+" ",Nv.indexOf(e.keyCode)<0&&(d=!0,ii=null));let m=new Set,v=O=>{if(O){for(let N of O.run)if(!m.has(N)&&(m.add(N),N(t)))return O.stopPropagation&&(p=!0),!0;O.preventDefault&&(O.stopPropagation&&(p=!0),d=!0)}return!1},w=n[r],S,C;return w&&(v(w[c+za(s,e,!a)])?h=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(he.windows&&e.ctrlKey&&e.altKey)&&!(he.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(S=hi[e.keyCode])&&S!=s?(v(w[c+za(S,e,!0)])||e.shiftKey&&(C=Jo[e.keyCode])!=s&&C!=S&&v(w[c+za(C,e,!1)]))&&(h=!0):a&&e.shiftKey&&v(w[c+za(s,e,!0)])&&(h=!0),!h&&v(w._any)&&(h=!0)),d&&(h=!0),h&&p&&e.stopPropagation(),Qf=null,h}class gl{constructor(e,t,r,s,l){this.className=e,this.left=t,this.top=r,this.width=s,this.height=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let s=e.coordsAtPos(r.head,r.assoc||1);if(!s)return[];let l=zv(e);return[new gl(t,s.left-l.left,s.top-l.top,null,s.bottom-s.top)]}else return UO(e,t,r)}}function zv(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==st.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function V0(n,e,t,r){let s=n.coordsAtPos(e,t*2);if(!s)return r;let l=n.dom.getBoundingClientRect(),a=(s.top+s.bottom)/2,c=n.posAtCoords({x:l.left+1,y:a}),h=n.posAtCoords({x:l.right-1,y:a});return c==null||h==null?r:{from:Math.max(r.from,Math.min(c,h)),to:Math.min(r.to,Math.max(c,h))}}function UO(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),l=n.textDirection==st.LTR,a=n.contentDOM,c=a.getBoundingClientRect(),h=zv(n),d=a.querySelector(".cm-line"),p=d&&window.getComputedStyle(d),m=c.left+(p?parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)):0),v=c.right-(p?parseInt(p.paddingRight):0),w=Ff(n,r,1),S=Ff(n,s,-1),C=w.type==Kt.Text?w:null,O=S.type==Kt.Text?S:null;if(C&&(n.lineWrapping||w.widgetLineBreaks)&&(C=V0(n,r,1,C)),O&&(n.lineWrapping||S.widgetLineBreaks)&&(O=V0(n,s,-1,O)),C&&O&&C.from==O.from&&C.to==O.to)return E(T(t.from,t.to,C));{let R=C?T(t.from,null,C):I(w,!1),L=O?T(null,t.to,O):I(S,!0),j=[];return(C||w).to<(O||S).from-(C&&O?1:0)||w.widgetLineBreaks>1&&R.bottom+n.defaultLineHeight/2<L.top?j.push(N(m,R.bottom,v,L.top)):R.bottom<L.top&&n.elementAtHeight((R.bottom+L.top)/2).type==Kt.Text&&(R.bottom=L.top=(R.bottom+L.top)/2),E(R).concat(j).concat(E(L))}function N(R,L,j,H){return new gl(e,R-h.left,L-h.top,j-R,H-L)}function E({top:R,bottom:L,horizontal:j}){let H=[];for(let W=0;W<j.length;W+=2)H.push(N(j[W],R,j[W+1],L));return H}function T(R,L,j){let H=1e9,W=-1e9,V=[];function q(ue,X,G,se,Q){let ee=n.coordsAtPos(ue,ue==j.to?-2:2),J=n.coordsAtPos(G,G==j.from?2:-2);!ee||!J||(H=Math.min(ee.top,J.top,H),W=Math.max(ee.bottom,J.bottom,W),Q==st.LTR?V.push(l&&X?m:ee.left,l&&se?v:J.right):V.push(!l&&se?m:J.left,!l&&X?v:ee.right))}let $=R??j.from,Z=L??j.to;for(let ue of n.visibleRanges)if(ue.to>$&&ue.from<Z)for(let X=Math.max(ue.from,$),G=Math.min(ue.to,Z);;){let se=n.state.doc.lineAt(X);for(let Q of n.bidiSpans(se)){let ee=Q.from+se.from,J=Q.to+se.from;if(ee>=G)break;J>X&&q(Math.max(ee,X),R==null&&ee<=$,Math.min(J,G),L==null&&J>=Z,Q.dir)}if(X=se.to+1,X>=G)break}return V.length==0&&q($,R==null,Z,L==null,n.textDirection),{top:H,bottom:W,horizontal:V}}function I(R,L){let j=c.top+(L?R.top:R.bottom);return{top:j,bottom:j,horizontal:[]}}}function XO(n,e){return n.constructor==e.constructor&&n.eq(e)}class KO{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Za)!=e.state.facet(Za)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(Za);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!XO(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[r].constructor&&s.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e,he.safari&&he.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Za=be.define();function Fv(n){return[Wn.define(e=>new KO(e,n)),Za.of(n)]}const nl=be.define({combine(n){return Bx(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function qO(n={}){return[nl.of(n),GO,YO,JO,fv.of(!0)]}function _v(n){return n.startState.facet(nl)!=n.state.facet(nl)}const GO=Fv({above:!0,markers(n){let{state:e}=n,t=e.facet(nl),r=[];for(let s of e.selection.ranges){let l=s==e.selection.main;if(s.empty||t.drawRangeCursor){let a=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=s.empty?s:ie.cursor(s.head,s.head>s.anchor?-1:1);for(let h of gl.forRange(n,a,c))r.push(h)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=_v(n);return t&&W0(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){W0(e.state,n)},class:"cm-cursorLayer"});function W0(n,e){e.style.animationDuration=n.facet(nl).cursorBlinkRate+"ms"}const YO=Fv({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:gl.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||_v(n)},class:"cm-selectionLayer"}),JO=Tu.highest(Ae.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function ZO(){return tP}const eP=ot.line({class:"cm-activeLine"}),tP=Wn.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let s=n.lineBlockAt(r.head);s.from>e&&(t.push(eP.range(s.from)),e=s.from)}return ot.set(t)}},{decorations:n=>n.decorations});class di extends Cs{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}di.prototype.elementClass="";di.prototype.toDOM=void 0;di.prototype.mapMode=mn.TrackBefore;di.prototype.startSide=di.prototype.endSide=-1;di.prototype.point=!0;const eu=be.define(),nP=be.define(),tu=be.define(),Q0=be.define({combine:n=>n.some(e=>e)});function rP(n){return[iP]}const iP=Wn.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(tu).map(e=>new U0(n,e)),this.fixed=!n.state.facet(Q0);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Q0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Fe.iter(this.view.state.facet(eu),this.view.viewport.from),r=[],s=this.gutters.map(l=>new sP(l,this.view.viewport,-this.view.documentPadding.top));for(let l of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(l.type)){let a=!0;for(let c of l.type)if(c.type==Kt.Text&&a){$f(t,r,c.from);for(let h of s)h.line(this.view,c,r);a=!1}else if(c.widget)for(let h of s)h.widget(this.view,c)}else if(l.type==Kt.Text){$f(t,r,l.from);for(let a of s)a.line(this.view,l,r)}else if(l.widget)for(let a of s)a.widget(this.view,l);for(let l of s)l.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(tu),t=n.state.facet(tu),r=n.docChanged||n.heightChanged||n.viewportChanged||!Fe.eq(n.startState.facet(eu),n.state.facet(eu),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(r=!0);else{r=!0;let s=[];for(let l of t){let a=e.indexOf(l);a<0?s.push(new U0(this.view,l)):(this.gutters[a].update(n),s.push(this.gutters[a]))}for(let l of this.gutters)l.dom.remove(),s.indexOf(l)<0&&l.destroy();for(let l of s)l.config.side=="after"?this.getDOMAfter().appendChild(l.dom):this.dom.appendChild(l.dom);this.gutters=s}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Ae.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let r=t.dom.offsetWidth*e.scaleX,s=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==st.LTR?{left:r,right:s}:{right:r,left:s}})});function $0(n){return Array.isArray(n)?n:[n]}function $f(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class sP{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Fe.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:s}=this,l=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==s.elements.length){let c=new Hv(e,a,l,r);s.elements.push(c),s.dom.appendChild(c.dom)}else s.elements[this.i].update(e,a,l,r);this.height=t.bottom,this.i++}line(e,t,r){let s=[];$f(this.cursor,s,t.from),r.length&&(s=s.concat(r));let l=this.gutter.config.lineMarker(e,t,s);l&&s.unshift(l);let a=this.gutter;s.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),s=r?[r]:null;for(let l of e.state.facet(nP)){let a=l(e,t.widget,t);a&&(s||(s=[])).push(a)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class U0{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,s=>{let l=s.target,a;if(l!=this.dom&&this.dom.contains(l)){for(;l.parentNode!=this.dom;)l=l.parentNode;let h=l.getBoundingClientRect();a=(h.top+h.bottom)/2}else a=s.clientY;let c=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[r](e,c,s)&&s.preventDefault()});this.markers=$0(t.markers(e)),t.initialSpacer&&(this.spacer=new Hv(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=$0(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let r=e.view.viewport;return!Fe.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Hv{constructor(e,t,r,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,s)}update(e,t,r,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),oP(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let r="cm-gutterElement",s=this.dom.firstChild;for(let l=0,a=0;;){let c=a,h=l<t.length?t[l++]:null,d=!1;if(h){let p=h.elementClass;p&&(r+=" "+p);for(let m=a;m<this.markers.length;m++)if(this.markers[m].compare(h)){c=m,d=!0;break}}else c=this.markers.length;for(;a<c;){let p=this.markers[a++];if(p.toDOM){p.destroy(s);let m=s.nextSibling;s.remove(),s=m}}if(!h)break;h.toDOM&&(d?s=s.nextSibling:this.dom.insertBefore(h.toDOM(e),s)),d&&a++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function oP(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const lP=be.define(),aP=be.define(),ps=be.define({combine(n){return Bx(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let s in t){let l=r[s],a=t[s];r[s]=l?(c,h,d)=>l(c,h,d)||a(c,h,d):a}return r}})}});class Qh extends di{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function $h(n,e){return n.state.facet(ps).formatNumber(e,n.state)}const uP=tu.compute([ps],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(lP)},lineMarker(e,t,r){return r.some(s=>s.toDOM)?null:new Qh($h(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let s of e.state.facet(aP)){let l=s(e,t,r);if(l)return l}return null},lineMarkerChange:e=>e.startState.facet(ps)!=e.state.facet(ps),initialSpacer(e){return new Qh($h(e,X0(e.state.doc.lines)))},updateSpacer(e,t){let r=$h(t.view,X0(t.view.state.doc.lines));return r==e.number?e:new Qh(r)},domEventHandlers:n.facet(ps).domEventHandlers,side:"before"}));function cP(n={}){return[ps.of(n),rP(),uP]}function X0(n){let e=9;for(;e<n;)e=e*10+9;return e}const hP=new class extends di{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},fP=eu.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let s=n.doc.lineAt(r.head).from;s>t&&(t=s,e.push(hP.range(s)))}return Fe.of(e)});function dP(){return fP}const Vv=1024;let pP=0;class Uh{constructor(e,t){this.from=e,this.to=t}}class Te{constructor(e={}){this.id=pP++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=sn.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Te.closedBy=new Te({deserialize:n=>n.split(" ")});Te.openedBy=new Te({deserialize:n=>n.split(" ")});Te.group=new Te({deserialize:n=>n.split(" ")});Te.isolate=new Te({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Te.contextHash=new Te({perNode:!0});Te.lookAhead=new Te({perNode:!0});Te.mounted=new Te({perNode:!0});class xu{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Te.mounted.id]}}const gP=Object.create(null);class sn{constructor(e,t,r,s=0){this.name=e,this.props=t,this.id=r,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):gP,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new sn(e.name||"",t,e.id,r);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(s)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[l[0].id]=l[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Te.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let s of r.split(" "))t[s]=e[r];return r=>{for(let s=r.prop(Te.group),l=-1;l<(s?s.length:0);l++){let a=t[l<0?r.name:s[l]];if(a)return a}}}}sn.none=new sn("",Object.create(null),0,8);class Rd{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let s=null;for(let l of e){let a=l(r);if(a){s||(s=Object.assign({},r.props));let c=a[1],h=a[0];h.combine&&h.id in s&&(c=h.combine(s[h.id],c)),s[h.id]=c}}t.push(s?new sn(r.name,s,r.id,r.flags):r)}return new Rd(t)}}const Fa=new WeakMap,K0=new WeakMap;var Pt;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(Pt||(Pt={}));class gt{constructor(e,t,r,s,l){if(this.type=e,this.children=t,this.positions=r,this.length=s,this.props=null,l&&l.length){this.props=Object.create(null);for(let[a,c]of l)this.props[typeof a=="number"?a:a.id]=c}}toString(){let e=xu.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let s=r.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Xf(this.topNode,e)}cursorAt(e,t=0,r=0){let s=Fa.get(this)||this.topNode,l=new Xf(s);return l.moveTo(e,t),Fa.set(this,l._tree),l}get topNode(){return new Pn(this,0,0,null)}resolve(e,t=0){let r=rl(Fa.get(this)||this.topNode,e,t,!1);return Fa.set(this,r),r}resolveInner(e,t=0){let r=rl(K0.get(this)||this.topNode,e,t,!0);return K0.set(this,r),r}resolveStack(e,t=0){return xP(this,e,t)}iterate(e){let{enter:t,leave:r,from:s=0,to:l=this.length}=e,a=e.mode||0,c=(a&Pt.IncludeAnonymous)>0;for(let h=this.cursor(a|Pt.IncludeAnonymous);;){let d=!1;if(h.from<=l&&h.to>=s&&(!c&&h.type.isAnonymous||t(h)!==!1)){if(h.firstChild())continue;d=!0}for(;d&&r&&(c||!h.type.isAnonymous)&&r(h),!h.nextSibling();){if(!h.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:jd(sn.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,s)=>new gt(this.type,t,r,s,this.propValues),e.makeTree||((t,r,s)=>new gt(sn.none,t,r,s)))}static build(e){return vP(e)}}gt.empty=new gt(sn.none,[],[],0);class Td{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Td(this.buffer,this.index)}}class pi{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return sn.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],s=this.set.types[t],l=s.name;if(/\W/.test(l)&&!s.isError&&(l=JSON.stringify(l)),e+=4,r==e)return l;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return l+"("+a.join(",")+")"}findChild(e,t,r,s,l){let{buffer:a}=this,c=-1;for(let h=e;h!=t&&!(Wv(l,s,a[h+1],a[h+2])&&(c=h,r>0));h=a[h+3]);return c}slice(e,t,r){let s=this.buffer,l=new Uint16Array(t-e),a=0;for(let c=e,h=0;c<t;){l[h++]=s[c++],l[h++]=s[c++]-r;let d=l[h++]=s[c++]-r;l[h++]=s[c++]-e,a=Math.max(a,d)}return new pi(l,a,this.set)}}function Wv(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function rl(n,e,t,r){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!r&&n instanceof Pn&&n.index<0?null:n.parent;if(!a)return n;n=a}let l=r?0:Pt.IgnoreOverlays;if(r)for(let a=n,c=a.parent;c;a=c,c=a.parent)a instanceof Pn&&a.index<0&&((s=c.enter(e,t,l))===null||s===void 0?void 0:s.from)!=a.from&&(n=c);for(;;){let a=n.enter(e,t,l);if(!a)return n;n=a}}class Qv{cursor(e=0){return new Xf(this,e)}getChild(e,t=null,r=null){let s=q0(this,e,t,r);return s.length?s[0]:null}getChildren(e,t=null,r=null){return q0(this,e,t,r)}resolve(e,t=0){return rl(this,e,t,!1)}resolveInner(e,t=0){return rl(this,e,t,!0)}matchContext(e){return Uf(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(r=t,t=s.prevSibling):t=s}return r}get node(){return this}get next(){return this.parent}}class Pn extends Qv{constructor(e,t,r,s){super(),this._tree=e,this.from=t,this.index=r,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,s,l=0){for(let a=this;;){for(let{children:c,positions:h}=a._tree,d=t>0?c.length:-1;e!=d;e+=t){let p=c[e],m=h[e]+a.from;if(Wv(s,r,m,m+p.length)){if(p instanceof pi){if(l&Pt.ExcludeBuffers)continue;let v=p.findChild(0,p.buffer.length,t,r-m,s);if(v>-1)return new ai(new mP(a,p,e,m),null,v)}else if(l&Pt.IncludeAnonymous||!p.type.isAnonymous||Dd(p)){let v;if(!(l&Pt.IgnoreMounts)&&(v=xu.get(p))&&!v.overlay)return new Pn(v.tree,m,e,a);let w=new Pn(p,m,e,a);return l&Pt.IncludeAnonymous||!w.type.isAnonymous?w:w.nextChild(t<0?p.children.length-1:0,t,r,s)}}}if(l&Pt.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let s;if(!(r&Pt.IgnoreOverlays)&&(s=xu.get(this._tree))&&s.overlay){let l=e-this.from;for(let{from:a,to:c}of s.overlay)if((t>0?a<=l:a<l)&&(t<0?c>=l:c>l))return new Pn(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function q0(n,e,t,r){let s=n.cursor(),l=[];if(!s.firstChild())return l;if(t!=null){for(let a=!1;!a;)if(a=s.type.is(t),!s.nextSibling())return l}for(;;){if(r!=null&&s.type.is(r))return l;if(s.type.is(e)&&l.push(s.node),!s.nextSibling())return r==null?l:[]}}function Uf(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class mP{constructor(e,t,r,s){this.parent=e,this.buffer=t,this.index=r,this.start=s}}class ai extends Qv{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,r);return l<0?null:new ai(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&Pt.ExcludeBuffers)return null;let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return l<0?null:new ai(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ai(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ai(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,s=this.index+4,l=r.buffer[this.index+3];if(l>s){let a=r.buffer[this.index+1];e.push(r.slice(s,l,a)),t.push(0)}return new gt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function $v(n){if(!n.length)return null;let e=0,t=n[0];for(let l=1;l<n.length;l++){let a=n[l];(a.from>t.from||a.to<t.to)&&(t=a,e=l)}let r=t instanceof Pn&&t.index<0?null:t.parent,s=n.slice();return r?s[e]=r:s.splice(e,1),new yP(s,t)}class yP{constructor(e,t){this.heads=e,this.node=t}get next(){return $v(this.heads)}}function xP(n,e,t){let r=n.resolveInner(e,t),s=null;for(let l=r instanceof Pn?r:r.context.parent;l;l=l.parent)if(l.index<0){let a=l.parent;(s||(s=[r])).push(a.resolve(e,t)),l=a}else{let a=xu.get(l.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let c=new Pn(a.tree,a.overlay[0].from+l.from,-1,l);(s||(s=[r])).push(rl(c,e,t,!1))}}return s?$v(s):r}class Xf{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof Pn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=r+s.buffer[e+1],this.to=r+s.buffer[e+2],!0}yield(e){return e?e instanceof Pn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:s}=this.buffer,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,r);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&Pt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Pt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Pt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let s=r<0?0:this.stack[r]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(s)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(s.buffer.buffer[l+3]<this.index)return!1;({index:t,parent:r}=s)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let l=t+e,a=e<0?-1:r._tree.children.length;l!=a;l+=e){let c=r._tree.children[l];if(this.mode&Pt.IncludeAnonymous||c instanceof pi||!c.type.isAnonymous||Dd(c))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let s=this.index,l=this.stack.length;l>=0;){for(let a=e;a;a=a._parent)if(a.index==s){if(s==this.index)return a;t=a,r=l+1;break e}s=this.stack[--l]}for(let s=r;s<this.stack.length;s++)t=new ai(this.buffer,t,this.stack[s]);return this.bufferNode=new ai(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&t&&t(this),s=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,s=!0}}}matchContext(e){if(!this.buffer)return Uf(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let s=e.length-1,l=this.stack.length-1;s>=0;l--){if(l<0)return Uf(this._tree,e,s);let a=r[t.buffer[this.stack[l]]];if(!a.isAnonymous){if(e[s]&&e[s]!=a.name)return!1;s--}}return!0}}function Dd(n){return n.children.some(e=>e instanceof pi||!e.type.isAnonymous||Dd(e))}function vP(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:s=Vv,reused:l=[],minRepeatType:a=r.types.length}=n,c=Array.isArray(t)?new Td(t,t.length):t,h=r.types,d=0,p=0;function m(R,L,j,H,W,V){let{id:q,start:$,end:Z,size:ue}=c,X=p,G=d;if(ue<0)if(c.next(),ue==-1){let A=l[q];j.push(A),H.push($-R);return}else if(ue==-3){d=q;return}else if(ue==-4){p=q;return}else throw new RangeError(`Unrecognized record size: ${ue}`);let se=h[q],Q,ee,J=$-R;if(Z-$<=s&&(ee=O(c.pos-L,W))){let A=new Uint16Array(ee.size-ee.skip),B=c.pos-ee.size,le=A.length;for(;c.pos>B;)le=N(ee.start,A,le);Q=new pi(A,Z-ee.start,r),J=ee.start-R}else{let A=c.pos-ue;c.next();let B=[],le=[],pe=q>=a?q:-1,me=0,ne=Z;for(;c.pos>A;)pe>=0&&c.id==pe&&c.size>=0?(c.end<=ne-s&&(S(B,le,$,me,c.end,ne,pe,X,G),me=B.length,ne=c.end),c.next()):V>2500?v($,A,B,le):m($,A,B,le,pe,V+1);if(pe>=0&&me>0&&me<B.length&&S(B,le,$,me,$,ne,pe,X,G),B.reverse(),le.reverse(),pe>-1&&me>0){let ce=w(se,G);Q=jd(se,B,le,0,B.length,0,Z-$,ce,ce)}else Q=C(se,B,le,Z-$,X-Z,G)}j.push(Q),H.push(J)}function v(R,L,j,H){let W=[],V=0,q=-1;for(;c.pos>L;){let{id:$,start:Z,end:ue,size:X}=c;if(X>4)c.next();else{if(q>-1&&Z<q)break;q<0&&(q=ue-s),W.push($,Z,ue),V++,c.next()}}if(V){let $=new Uint16Array(V*4),Z=W[W.length-2];for(let ue=W.length-3,X=0;ue>=0;ue-=3)$[X++]=W[ue],$[X++]=W[ue+1]-Z,$[X++]=W[ue+2]-Z,$[X++]=X;j.push(new pi($,W[2]-Z,r)),H.push(Z-R)}}function w(R,L){return(j,H,W)=>{let V=0,q=j.length-1,$,Z;if(q>=0&&($=j[q])instanceof gt){if(!q&&$.type==R&&$.length==W)return $;(Z=$.prop(Te.lookAhead))&&(V=H[q]+$.length+Z)}return C(R,j,H,W,V,L)}}function S(R,L,j,H,W,V,q,$,Z){let ue=[],X=[];for(;R.length>H;)ue.push(R.pop()),X.push(L.pop()+j-W);R.push(C(r.types[q],ue,X,V-W,$-V,Z)),L.push(W-j)}function C(R,L,j,H,W,V,q){if(V){let $=[Te.contextHash,V];q=q?[$].concat(q):[$]}if(W>25){let $=[Te.lookAhead,W];q=q?[$].concat(q):[$]}return new gt(R,L,j,H,q)}function O(R,L){let j=c.fork(),H=0,W=0,V=0,q=j.end-s,$={size:0,start:0,skip:0};e:for(let Z=j.pos-R;j.pos>Z;){let ue=j.size;if(j.id==L&&ue>=0){$.size=H,$.start=W,$.skip=V,V+=4,H+=4,j.next();continue}let X=j.pos-ue;if(ue<0||X<Z||j.start<q)break;let G=j.id>=a?4:0,se=j.start;for(j.next();j.pos>X;){if(j.size<0)if(j.size==-3)G+=4;else break e;else j.id>=a&&(G+=4);j.next()}W=se,H+=ue,V+=G}return(L<0||H==R)&&($.size=H,$.start=W,$.skip=V),$.size>4?$:void 0}function N(R,L,j){let{id:H,start:W,end:V,size:q}=c;if(c.next(),q>=0&&H<a){let $=j;if(q>4){let Z=c.pos-(q-4);for(;c.pos>Z;)j=N(R,L,j)}L[--j]=$,L[--j]=V-R,L[--j]=W-R,L[--j]=H}else q==-3?d=H:q==-4&&(p=H);return j}let E=[],T=[];for(;c.pos>0;)m(n.start||0,n.bufferStart||0,E,T,-1,0);let I=(e=n.length)!==null&&e!==void 0?e:E.length?T[0]+E[0].length:0;return new gt(h[n.topID],E.reverse(),T.reverse(),I)}const G0=new WeakMap;function nu(n,e){if(!n.isAnonymous||e instanceof pi||e.type!=n)return 1;let t=G0.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof gt)){t=1;break}t+=nu(n,r)}G0.set(e,t)}return t}function jd(n,e,t,r,s,l,a,c,h){let d=0;for(let S=r;S<s;S++)d+=nu(n,e[S]);let p=Math.ceil(d*1.5/8),m=[],v=[];function w(S,C,O,N,E){for(let T=O;T<N;){let I=T,R=C[T],L=nu(n,S[T]);for(T++;T<N;T++){let j=nu(n,S[T]);if(L+j>=p)break;L+=j}if(T==I+1){if(L>p){let j=S[I];w(j.children,j.positions,0,j.children.length,C[I]+E);continue}m.push(S[I])}else{let j=C[T-1]+S[T-1].length-R;m.push(jd(n,S,C,I,T,R,j,null,h))}v.push(R+E-l)}}return w(e,t,r,s,0),(c||h)(m,v,a)}class zi{constructor(e,t,r,s,l=!1,a=!1){this.from=e,this.to=t,this.tree=r,this.offset=s,this.open=(l?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let s=[new zi(0,e.length,e,0,!1,r)];for(let l of t)l.to>e.length&&s.push(l);return s}static applyChanges(e,t,r=128){if(!t.length)return e;let s=[],l=1,a=e.length?e[0]:null;for(let c=0,h=0,d=0;;c++){let p=c<t.length?t[c]:null,m=p?p.fromA:1e9;if(m-h>=r)for(;a&&a.from<m;){let v=a;if(h>=v.from||m<=v.to||d){let w=Math.max(v.from,h)-d,S=Math.min(v.to,m)-d;v=w>=S?null:new zi(w,S,v.tree,v.offset+d,c>0,!!p)}if(v&&s.push(v),a.to>m)break;a=l<e.length?e[l++]:null}if(!p)break;h=p.toA,d=p.toA-p.toB}return s}}let Uv=class{startParse(e,t,r){return typeof e=="string"&&(e=new wP(e)),r=r?r.length?r.map(s=>new Uh(s.from,s.to)):[new Uh(0,0)]:[new Uh(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let s=this.startParse(e,t,r);for(;;){let l=s.advance();if(l)return l}}};class wP{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Te({perNode:!0});var Y0={};class vu{constructor(e,t,r,s,l,a,c,h,d,p=0,m){this.p=e,this.stack=t,this.state=r,this.reducePos=s,this.pos=l,this.score=a,this.buffer=c,this.bufferBase=h,this.curContext=d,this.lookAhead=p,this.parent=m}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let s=e.parser.context;return new vu(e,[],t,r,r,0,[],0,s?new J0(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,s=e&65535,{parser:l}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let c=l.dynamicPrecedence(s);if(c&&(this.score+=c),r==0){this.pushState(l.getGoto(this.state,s,!0),this.reducePos),s<l.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(s,this.reducePos);return}let h=this.stack.length-(r-1)*3-(e&262144?6:0),d=h?this.stack[h-2]:this.p.ranges[0].from,p=this.reducePos-d;p>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(d==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=d,this.p.lastBigReductionSize=p));let m=h?this.stack[h-1]:0,v=this.bufferBase+this.buffer.length-m;if(s<l.minRepeatTerm||e&131072){let w=l.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,d,w,v+4,!0)}if(e&262144)this.state=this.stack[h];else{let w=this.stack[h-3];this.state=l.getGoto(w,s,!0)}for(;this.stack.length>h;)this.stack.pop();this.reduceContext(s,d)}storeNode(e,t,r,s=4,l=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,c=this.buffer.length;if(c==0&&a.parent&&(c=a.bufferBase-a.parent.bufferBase,a=a.parent),c>0&&a.buffer[c-4]==0&&a.buffer[c-1]>-1){if(t==r)return;if(a.buffer[c-2]>=t){a.buffer[c-2]=r;return}}}if(!l||this.pos==r)this.buffer.push(e,t,r,s);else{let a=this.buffer.length;if(a>0&&(this.buffer[a-4]!=0||this.buffer[a-1]<0)){let c=!1;for(let h=a;h>0&&this.buffer[h-2]>r;h-=4)if(this.buffer[h-1]>=0){c=!0;break}if(c)for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4)}this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=r,this.buffer[a+3]=s}}shift(e,t,r,s){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let l=e,{parser:a}=this.p;(s>this.pos||t<=a.maxNode)&&(this.pos=s,a.stateFlag(l,1)||(this.reducePos=s)),this.pushState(l,r),this.shiftContext(t,r),t<=a.maxNode&&this.buffer.push(t,r,s,4)}else this.pos=s,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,s,4)}apply(e,t,r,s){e&65536?this.reduce(e):this.shift(e,t,r,s)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(r,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new vu(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new kP(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if((r&65536)==0)return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let l=0,a;l<t.length;l+=2)(a=t[l+1])!=this.state&&this.p.parser.hasAction(a,e)&&s.push(t[l],a);if(this.stack.length<120)for(let l=0;s.length<8&&l<t.length;l+=2){let a=t[l+1];s.some((c,h)=>h&1&&c==a)||s.push(t[l],a)}t=s}let r=[];for(let s=0;s<t.length&&r.length<4;s+=2){let l=t[s+1];if(l==this.state)continue;let a=this.split();a.pushState(l,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[s],this.pos),a.reducePos=this.pos,a.score-=200,r.push(a)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let r=t>>19,s=t&65535,l=this.stack.length-r*3;if(l<0||e.getGoto(this.stack[l],s,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;t=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(s,l)=>{if(!t.includes(s))return t.push(s),e.allActions(s,a=>{if(!(a&393216))if(a&65536){let c=(a>>19)-l;if(c>1){let h=a&65535,d=this.stack.length-c*3;if(d>=0&&e.getGoto(this.stack[d],h,!1)>=0)return c<<19|65536|h}}else{let c=r(a,l+1);if(c!=null)return c}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new J0(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class J0{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class kP{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class wu{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new wu(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new wu(this.stack,this.pos,this.index)}}function _a(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,s=0;r<n.length;){let l=0;for(;;){let a=n.charCodeAt(r++),c=!1;if(a==126){l=65535;break}a>=92&&a--,a>=34&&a--;let h=a-32;if(h>=46&&(h-=46,c=!0),l+=h,c)break;l*=46}t?t[s++]=l:t=new e(l)}return t}class ru{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Z0=new ru;class bP{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Z0,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,s=this.rangeIndex,l=this.pos+e;for(;l<r.from;){if(!s)return null;let a=this.ranges[--s];l-=r.from-a.to,r=a}for(;t<0?l>r.to:l>=r.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];l+=a.from-r.to,r=a}return l}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,s;if(t>=0&&t<this.chunk.length)r=this.pos+e,s=this.chunk.charCodeAt(t);else{let l=this.resolveOffset(e,1);if(l==null)return-1;if(r=l,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let a=this.rangeIndex,c=this.range;for(;c.to<=r;)c=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>c.to&&(this.chunk2=this.chunk2.slice(0,c.to-r)),s=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),s}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Z0,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(r+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return r}}class bs{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;SP(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}bs.prototype.contextual=bs.prototype.fallback=bs.prototype.extend=!1;bs.prototype.fallback=bs.prototype.extend=!1;class Bu{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function SP(n,e,t,r,s,l){let a=0,c=1<<r,{dialect:h}=t.p.parser;e:for(;(c&n[a])!=0;){let d=n[a+1];for(let w=a+3;w<d;w+=2)if((n[w+1]&c)>0){let S=n[w];if(h.allows(S)&&(e.token.value==-1||e.token.value==S||CP(S,e.token.value,s,l))){e.acceptToken(S);break}}let p=e.next,m=0,v=n[a+2];if(e.next<0&&v>m&&n[d+v*3-3]==65535){a=n[d+v*3-1];continue e}for(;m<v;){let w=m+v>>1,S=d+w+(w<<1),C=n[S],O=n[S+1]||65536;if(p<C)v=w;else if(p>=O)m=w+1;else{a=n[S+2],e.advance();continue e}}break}}function ey(n,e,t){for(let r=e,s;(s=n[r])!=65535;r++)if(s==t)return r-e;return-1}function CP(n,e,t,r){let s=ey(t,r,e);return s<0||ey(t,r,n)<s}const dn=typeof process<"u"&&Y0&&/\bparse\b/.test(Y0.LOG);let Xh=null;function ty(n,e,t){let r=n.cursor(Pt.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class OP{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?ty(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?ty(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],s=this.index[t];if(s==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let l=r.children[s],a=this.start[t]+r.positions[s];if(a>e)return this.nextStart=a,null;if(l instanceof gt){if(a==e){if(a<this.safeFrom)return null;let c=a+l.length;if(c<=this.safeTo){let h=l.prop(Te.lookAhead);if(!h||c+h<this.fragment.to)return l}}this.index[t]++,a+l.length>=Math.max(this.safeFrom,e)&&(this.trees.push(l),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+l.length}}}class PP{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new ru)}getActions(e){let t=0,r=null,{parser:s}=e.p,{tokenizers:l}=s,a=s.stateSlot(e.state,3),c=e.curContext?e.curContext.hash:0,h=0;for(let d=0;d<l.length;d++){if((1<<d&a)==0)continue;let p=l[d],m=this.tokens[d];if(!(r&&!p.fallback)&&((p.contextual||m.start!=e.pos||m.mask!=a||m.context!=c)&&(this.updateCachedToken(m,p,e),m.mask=a,m.context=c),m.lookAhead>m.end+25&&(h=Math.max(m.lookAhead,h)),m.value!=0)){let v=t;if(m.extended>-1&&(t=this.addActions(e,m.extended,m.end,t)),t=this.addActions(e,m.value,m.end,t),!p.extend&&(r=m,t>v))break}}for(;this.actions.length>t;)this.actions.pop();return h&&e.setLookAhead(h),!r&&e.pos==this.stream.end&&(r=new ru,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new ru,{pos:r,p:s}=e;return t.start=r,t.end=Math.min(r+1,s.stream.end),t.value=r==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,r){let s=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(s,e),r),e.value>-1){let{parser:l}=r.p;for(let a=0;a<l.specialized.length;a++)if(l.specialized[a]==e.value){let c=l.specializers[a](this.stream.read(e.start,e.end),r);if(c>=0&&r.p.parser.dialect.allows(c>>1)){(c&1)==0?e.value=c>>1:e.extended=c>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,r,s){for(let l=0;l<s;l+=3)if(this.actions[l]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=r,s}addActions(e,t,r,s){let{state:l}=e,{parser:a}=e.p,{data:c}=a;for(let h=0;h<2;h++)for(let d=a.stateSlot(l,h?2:1);;d+=3){if(c[d]==65535)if(c[d+1]==1)d=Or(c,d+2);else{s==0&&c[d+1]==2&&(s=this.putAction(Or(c,d+2),t,r,s));break}c[d]==t&&(s=this.putAction(Or(c,d+1),t,r,s))}return s}}class NP{constructor(e,t,r,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new bP(t,s),this.tokens=new PP(e,this.stream),this.topTerm=e.top[1];let{from:l}=s[0];this.stacks=[vu.start(this,e.top[0],l)],this.fragments=r.length&&this.stream.end-l>e.bufferLength*4?new OP(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],s,l;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let c=e[a];for(;;){if(this.tokens.mainToken=null,c.pos>t)r.push(c);else{if(this.advanceStack(c,r,e))continue;{s||(s=[],l=[]),s.push(c);let h=this.tokens.getMainToken(c);l.push(h.value,h.end)}}break}}if(!r.length){let a=s&&MP(s);if(a)return dn&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw dn&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let a=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,l,r);if(a)return dn&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(r.length>a)for(r.sort((c,h)=>h.score-c.score);r.length>a;)r.pop();r.some(c=>c.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let a=0;a<r.length-1;a++){let c=r[a];for(let h=a+1;h<r.length;h++){let d=r[h];if(c.sameState(d)||c.buffer.length>500&&d.buffer.length>500)if((c.score-d.score||c.buffer.length-d.buffer.length)>0)r.splice(h--,1);else{r.splice(a--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let s=e.pos,{parser:l}=this,a=dn?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,p=d?e.curContext.hash:0;for(let m=this.fragments.nodeAt(s);m;){let v=this.parser.nodeSet.types[m.type.id]==m.type?l.getGoto(e.state,m.type.id):-1;if(v>-1&&m.length&&(!d||(m.prop(Te.contextHash)||0)==p))return e.useNode(m,v),dn&&console.log(a+this.stackID(e)+` (via reuse of ${l.getName(m.type.id)})`),!0;if(!(m instanceof gt)||m.children.length==0||m.positions[0]>0)break;let w=m.children[0];if(w instanceof gt&&m.positions[0]==0)m=w;else break}}let c=l.stateSlot(e.state,4);if(c>0)return e.reduce(c),dn&&console.log(a+this.stackID(e)+` (via always-reduce ${l.getName(c&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let d=0;d<h.length;){let p=h[d++],m=h[d++],v=h[d++],w=d==h.length||!r,S=w?e:e.split(),C=this.tokens.mainToken;if(S.apply(p,m,C?C.start:S.pos,v),dn&&console.log(a+this.stackID(S)+` (via ${(p&65536)==0?"shift":`reduce of ${l.getName(p&65535)}`} for ${l.getName(m)} @ ${s}${S==e?"":", split"})`),w)return!0;S.pos>s?t.push(S):r.push(S)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return ny(e,t),!0}}runRecovery(e,t,r){let s=null,l=!1;for(let a=0;a<e.length;a++){let c=e[a],h=t[a<<1],d=t[(a<<1)+1],p=dn?this.stackID(c)+" -> ":"";if(c.deadEnd&&(l||(l=!0,c.restart(),dn&&console.log(p+this.stackID(c)+" (restarted)"),this.advanceFully(c,r))))continue;let m=c.split(),v=p;for(let w=0;w<10&&m.forceReduce()&&(dn&&console.log(v+this.stackID(m)+" (via force-reduce)"),!this.advanceFully(m,r));w++)dn&&(v=this.stackID(m)+" -> ");for(let w of c.recoverByInsert(h))dn&&console.log(p+this.stackID(w)+" (via recover-insert)"),this.advanceFully(w,r);this.stream.end>c.pos?(d==c.pos&&(d++,h=0),c.recoverByDelete(h,d),dn&&console.log(p+this.stackID(c)+` (via recover-delete ${this.parser.getName(h)})`),ny(c,r)):(!s||s.score<c.score)&&(s=c)}return s}stackToTree(e){return e.close(),gt.build({buffer:wu.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Xh||(Xh=new WeakMap)).get(e);return t||Xh.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function ny(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class AP{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const Kh=n=>n;class EP{constructor(e){this.start=e.start,this.shift=e.shift||Kh,this.reduce=e.reduce||Kh,this.reuse=e.reuse||Kh,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class ku extends Uv{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let c=0;c<e.repeatNodeCount;c++)t.push("");let r=Object.keys(e.topRules).map(c=>e.topRules[c][1]),s=[];for(let c=0;c<t.length;c++)s.push([]);function l(c,h,d){s[c].push([h,h.deserialize(String(d))])}if(e.nodeProps)for(let c of e.nodeProps){let h=c[0];typeof h=="string"&&(h=Te[h]);for(let d=1;d<c.length;){let p=c[d++];if(p>=0)l(p,h,c[d++]);else{let m=c[d+-p];for(let v=-p;v>0;v--)l(c[d++],h,m);d++}}}this.nodeSet=new Rd(t.map((c,h)=>sn.define({name:h>=this.minRepeatTerm?void 0:c,id:h,props:s[h],top:r.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Vv;let a=_a(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let c=0;c<this.specializerSpecs.length;c++)this.specialized[c]=this.specializerSpecs[c].term;this.specializers=this.specializerSpecs.map(ry),this.states=_a(e.states,Uint32Array),this.data=_a(e.stateData),this.goto=_a(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(c=>typeof c=="number"?new bs(a,c):c),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let s=new NP(this,e,t,r);for(let l of this.wrappers)s=l(s,e,t,r);return s}getGoto(e,t,r=!1){let s=this.goto;if(t>=s[0])return-1;for(let l=s[t+1];;){let a=s[l++],c=a&1,h=s[l++];if(c&&r)return h;for(let d=l+(a>>1);l<d;l++)if(s[l]==e)return h;if(c)return-1}}hasAction(e,t){let r=this.data;for(let s=0;s<2;s++)for(let l=this.stateSlot(e,s?2:1),a;;l+=3){if((a=r[l])==65535)if(r[l+1]==1)a=r[l=Or(r,l+2)];else{if(r[l+1]==2)return Or(r,l+2);break}if(a==t||a==0)return Or(r,l+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t?!0:null)}allActions(e,t){let r=this.stateSlot(e,4),s=r?t(r):void 0;for(let l=this.stateSlot(e,1);s==null;l+=3){if(this.data[l]==65535)if(this.data[l+1]==1)l=Or(this.data,l+2);else break;s=t(Or(this.data,l+1))}return s}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Or(this.data,r+2);else break;if((this.data[r+2]&1)==0){let s=this.data[r+1];t.some((l,a)=>a&1&&l==s)||t.push(this.data[r],s)}}return t}configure(e){let t=Object.assign(Object.create(ku.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let s=e.tokenizers.find(l=>l.from==r);return s?s.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,s)=>{let l=e.specializers.find(c=>c.from==r.external);if(!l)return r;let a=Object.assign(Object.assign({},r),{external:l.to});return t.specializers[s]=ry(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let l of e.split(" ")){let a=t.indexOf(l);a>=0&&(r[a]=!0)}let s=null;for(let l=0;l<t.length;l++)if(!r[l])for(let a=this.dialects[t[l]],c;(c=this.data[a++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[c]=1;return new AP(e,r,s)}static deserialize(e){return new ku(e)}}function Or(n,e){return n[e]|n[e+1]<<16}function MP(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function ry(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}let RP=0,Pr=class Kf{constructor(e,t,r,s){this.name=e,this.set=t,this.base=r,this.modified=s,this.id=RP++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof Kf&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let s=new Kf(r,[],null,[]);if(s.set.push(s),t)for(let l of t.set)s.set.push(l);return s}static defineModifier(e){let t=new bu(e);return r=>r.modified.indexOf(t)>-1?r:bu.get(r.base||r,r.modified.concat(t).sort((s,l)=>s.id-l.id))}},TP=0;class bu{constructor(e){this.name=e,this.instances=[],this.id=TP++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(c=>c.base==e&&DP(t,c.modified));if(r)return r;let s=[],l=new Pr(e.name,s,e,t);for(let c of t)c.instances.push(l);let a=jP(t);for(let c of e.set)if(!c.modified.length)for(let h of a)s.push(bu.get(c,h));return l}}function DP(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function jP(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,s=e.length;r<s;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function Xv(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let s of t.split(" "))if(s){let l=[],a=2,c=s;for(let m=0;;){if(c=="..."&&m>0&&m+3==s.length){a=1;break}let v=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!v)throw new RangeError("Invalid path: "+s);if(l.push(v[0]=="*"?"":v[0][0]=='"'?JSON.parse(v[0]):v[0]),m+=v[0].length,m==s.length)break;let w=s[m++];if(m==s.length&&w=="!"){a=0;break}if(w!="/")throw new RangeError("Invalid path: "+s);c=s.slice(m)}let h=l.length-1,d=l[h];if(!d)throw new RangeError("Invalid path: "+s);let p=new il(r,a,h>0?l.slice(0,h):null);e[d]=p.sort(e[d])}}return Kv.add(e)}const Kv=new Te({combine(n,e){let t,r,s;for(;n||e;){if(!n||e&&n.depth>=e.depth?(s=e,e=e.next):(s=n,n=n.next),t&&t.mode==s.mode&&!s.context&&!t.context)continue;let l=new il(s.tags,s.mode,s.context);t?t.next=l:r=l,t=l}return r}});class il{constructor(e,t,r,s){this.tags=e,this.mode=t,this.context=r,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}il.empty=new il([],2,null);function qv(n,e){let t=Object.create(null);for(let l of n)if(!Array.isArray(l.tag))t[l.tag.id]=l.class;else for(let a of l.tag)t[a.id]=l.class;let{scope:r,all:s=null}=e||{};return{style:l=>{let a=s;for(let c of l)for(let h of c.set){let d=t[h.id];if(d){a=a?a+" "+d:d;break}}return a},scope:r}}function LP(n,e){let t=null;for(let r of n){let s=r.style(e);s&&(t=t?t+" "+s:s)}return t}function IP(n,e,t,r=0,s=n.length){let l=new BP(r,Array.isArray(e)?e:[e],t);l.highlightRange(n.cursor(),r,s,"",l.highlighters),l.flush(s)}class BP{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,s,l){let{type:a,from:c,to:h}=e;if(c>=r||h<=t)return;a.isTop&&(l=this.highlighters.filter(w=>!w.scope||w.scope(a)));let d=s,p=zP(e)||il.empty,m=LP(l,p.tags);if(m&&(d&&(d+=" "),d+=m,p.mode==1&&(s+=(s?" ":"")+m)),this.startSpan(Math.max(t,c),d),p.opaque)return;let v=e.tree&&e.tree.prop(Te.mounted);if(v&&v.overlay){let w=e.node.enter(v.overlay[0].from+c,1),S=this.highlighters.filter(O=>!O.scope||O.scope(v.tree.type)),C=e.firstChild();for(let O=0,N=c;;O++){let E=O<v.overlay.length?v.overlay[O]:null,T=E?E.from+c:h,I=Math.max(t,N),R=Math.min(r,T);if(I<R&&C)for(;e.from<R&&(this.highlightRange(e,I,R,s,l),this.startSpan(Math.min(R,e.to),d),!(e.to>=T||!e.nextSibling())););if(!E||T>r)break;N=E.to+c,N>t&&(this.highlightRange(w.cursor(),Math.max(t,E.from+c),Math.min(r,N),"",S),this.startSpan(Math.min(r,N),d))}C&&e.parent()}else if(e.firstChild()){v&&(s="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,s,l),this.startSpan(Math.min(r,e.to),d)}while(e.nextSibling());e.parent()}}}function zP(n){let e=n.type.prop(Kv);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const ae=Pr.define,Ha=ae(),ni=ae(),iy=ae(ni),sy=ae(ni),ri=ae(),Va=ae(ri),qh=ae(ri),rr=ae(),Ti=ae(rr),tr=ae(),nr=ae(),qf=ae(),Oo=ae(qf),Wa=ae(),U={comment:Ha,lineComment:ae(Ha),blockComment:ae(Ha),docComment:ae(Ha),name:ni,variableName:ae(ni),typeName:iy,tagName:ae(iy),propertyName:sy,attributeName:ae(sy),className:ae(ni),labelName:ae(ni),namespace:ae(ni),macroName:ae(ni),literal:ri,string:Va,docString:ae(Va),character:ae(Va),attributeValue:ae(Va),number:qh,integer:ae(qh),float:ae(qh),bool:ae(ri),regexp:ae(ri),escape:ae(ri),color:ae(ri),url:ae(ri),keyword:tr,self:ae(tr),null:ae(tr),atom:ae(tr),unit:ae(tr),modifier:ae(tr),operatorKeyword:ae(tr),controlKeyword:ae(tr),definitionKeyword:ae(tr),moduleKeyword:ae(tr),operator:nr,derefOperator:ae(nr),arithmeticOperator:ae(nr),logicOperator:ae(nr),bitwiseOperator:ae(nr),compareOperator:ae(nr),updateOperator:ae(nr),definitionOperator:ae(nr),typeOperator:ae(nr),controlOperator:ae(nr),punctuation:qf,separator:ae(qf),bracket:Oo,angleBracket:ae(Oo),squareBracket:ae(Oo),paren:ae(Oo),brace:ae(Oo),content:rr,heading:Ti,heading1:ae(Ti),heading2:ae(Ti),heading3:ae(Ti),heading4:ae(Ti),heading5:ae(Ti),heading6:ae(Ti),contentSeparator:ae(rr),list:ae(rr),quote:ae(rr),emphasis:ae(rr),strong:ae(rr),link:ae(rr),monospace:ae(rr),strikethrough:ae(rr),inserted:ae(),deleted:ae(),changed:ae(),invalid:ae(),meta:Wa,documentMeta:ae(Wa),annotation:ae(Wa),processingInstruction:ae(Wa),definition:Pr.defineModifier("definition"),constant:Pr.defineModifier("constant"),function:Pr.defineModifier("function"),standard:Pr.defineModifier("standard"),local:Pr.defineModifier("local"),special:Pr.defineModifier("special")};for(let n in U){let e=U[n];e instanceof Pr&&(e.name=n)}qv([{tag:U.link,class:"tok-link"},{tag:U.heading,class:"tok-heading"},{tag:U.emphasis,class:"tok-emphasis"},{tag:U.strong,class:"tok-strong"},{tag:U.keyword,class:"tok-keyword"},{tag:U.atom,class:"tok-atom"},{tag:U.bool,class:"tok-bool"},{tag:U.url,class:"tok-url"},{tag:U.labelName,class:"tok-labelName"},{tag:U.inserted,class:"tok-inserted"},{tag:U.deleted,class:"tok-deleted"},{tag:U.literal,class:"tok-literal"},{tag:U.string,class:"tok-string"},{tag:U.number,class:"tok-number"},{tag:[U.regexp,U.escape,U.special(U.string)],class:"tok-string2"},{tag:U.variableName,class:"tok-variableName"},{tag:U.local(U.variableName),class:"tok-variableName tok-local"},{tag:U.definition(U.variableName),class:"tok-variableName tok-definition"},{tag:U.special(U.variableName),class:"tok-variableName2"},{tag:U.definition(U.propertyName),class:"tok-propertyName tok-definition"},{tag:U.typeName,class:"tok-typeName"},{tag:U.namespace,class:"tok-namespace"},{tag:U.className,class:"tok-className"},{tag:U.macroName,class:"tok-macroName"},{tag:U.propertyName,class:"tok-propertyName"},{tag:U.operator,class:"tok-operator"},{tag:U.comment,class:"tok-comment"},{tag:U.meta,class:"tok-meta"},{tag:U.invalid,class:"tok-invalid"},{tag:U.punctuation,class:"tok-punctuation"}]);const hs=63,oy=64,FP=1,_P=2,Gv=3,HP=4,Yv=5,VP=6,WP=7,Jv=65,QP=66,$P=8,UP=9,XP=10,KP=11,qP=12,Zv=13,GP=19,YP=20,JP=29,ZP=33,eN=34,tN=47,nN=0,Ld=1,Gf=2,sl=3,Yf=4;class Li{constructor(e,t,r){this.parent=e,this.depth=t,this.type=r,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+r}}Li.top=new Li(null,-1,nN);function Wo(n,e){for(let t=0,r=e-n.pos-1;;r--,t++){let s=n.peek(r);if(Dr(s)||s==-1)return t}}function Jf(n){return n==32||n==9}function Dr(n){return n==10||n==13}function e1(n){return Jf(n)||Dr(n)}function Bi(n){return n<0||e1(n)}const rN=new EP({start:Li.top,reduce(n,e){return n.type==sl&&(e==YP||e==eN)?n.parent:n},shift(n,e,t,r){if(e==Gv)return new Li(n,Wo(r,r.pos),Ld);if(e==Jv||e==Yv)return new Li(n,Wo(r,r.pos),Gf);if(e==hs)return n.parent;if(e==GP||e==ZP)return new Li(n,0,sl);if(e==Zv&&n.type==Yf)return n.parent;if(e==tN){let s=/[1-9]/.exec(r.read(r.pos,t.pos));if(s)return new Li(n,n.depth+ +s[0],Yf)}return n},hash(n){return n.hash}});function As(n,e,t=0){return n.peek(t)==e&&n.peek(t+1)==e&&n.peek(t+2)==e&&Bi(n.peek(t+3))}const iN=new Bu((n,e)=>{if(n.next==-1&&e.canShift(oy))return n.acceptToken(oy);let t=n.peek(-1);if((Dr(t)||t<0)&&e.context.type!=sl){if(As(n,45))if(e.canShift(hs))n.acceptToken(hs);else return n.acceptToken(FP,3);if(As(n,46))if(e.canShift(hs))n.acceptToken(hs);else return n.acceptToken(_P,3);let r=0;for(;n.next==32;)r++,n.advance();(r<e.context.depth||r==e.context.depth&&e.context.type==Ld&&(n.next!=45||!Bi(n.peek(1))))&&n.next!=-1&&!Dr(n.next)&&n.next!=35&&n.acceptToken(hs,-r)}},{contextual:!0}),sN=new Bu((n,e)=>{if(e.context.type==sl){n.next==63&&(n.advance(),Bi(n.next)&&n.acceptToken(WP));return}if(n.next==45)n.advance(),Bi(n.next)&&n.acceptToken(e.context.type==Ld&&e.context.depth==Wo(n,n.pos-1)?HP:Gv);else if(n.next==63)n.advance(),Bi(n.next)&&n.acceptToken(e.context.type==Gf&&e.context.depth==Wo(n,n.pos-1)?VP:Yv);else{let t=n.pos;for(;;)if(Jf(n.next)){if(n.pos==t)return;n.advance()}else if(n.next==33)t1(n);else if(n.next==38)Zf(n);else if(n.next==42){Zf(n);break}else if(n.next==39||n.next==34){if(Id(n,!0))break;return}else if(n.next==91||n.next==123){if(!lN(n))return;break}else{n1(n,!0,!1,0);break}for(;Jf(n.next);)n.advance();if(n.next==58){if(n.pos==t&&e.canShift(JP))return;let r=n.peek(1);Bi(r)&&n.acceptTokenTo(e.context.type==Gf&&e.context.depth==Wo(n,t)?QP:Jv,t)}}},{contextual:!0});function oN(n){return n>32&&n<127&&n!=34&&n!=37&&n!=44&&n!=60&&n!=62&&n!=92&&n!=94&&n!=96&&n!=123&&n!=124&&n!=125}function ly(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function ay(n,e){return n.next==37?(n.advance(),ly(n.next)&&n.advance(),ly(n.next)&&n.advance(),!0):oN(n.next)||e&&n.next==44?(n.advance(),!0):!1}function t1(n){if(n.advance(),n.next==60){for(n.advance();;)if(!ay(n,!0)){n.next==62&&n.advance();break}}else for(;ay(n,!1););}function Zf(n){for(n.advance();!Bi(n.next)&&Su(n.tag)!="f";)n.advance()}function Id(n,e){let t=n.next,r=!1,s=n.pos;for(n.advance();;){let l=n.next;if(l<0)break;if(n.advance(),l==t)if(l==39)if(n.next==39)n.advance();else break;else break;else if(l==92&&t==34)n.next>=0&&n.advance();else if(Dr(l)){if(e)return!1;r=!0}else if(e&&n.pos>=s+1024)return!1}return!r}function lN(n){for(let e=[],t=n.pos+1024;;)if(n.next==91||n.next==123)e.push(n.next),n.advance();else if(n.next==39||n.next==34){if(!Id(n,!0))return!1}else if(n.next==93||n.next==125){if(e[e.length-1]!=n.next-2)return!1;if(e.pop(),n.advance(),!e.length)return!0}else{if(n.next<0||n.pos>t||Dr(n.next))return!1;n.advance()}}const aN="iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif";function Su(n){return n<33?"u":n>125?"s":aN[n-33]}function Gh(n,e){let t=Su(n);return t!="u"&&!(e&&t=="f")}function n1(n,e,t,r){if(Su(n.next)=="s"||(n.next==63||n.next==58||n.next==45)&&Gh(n.peek(1),t))n.advance();else return!1;let s=n.pos;for(;;){let l=n.next,a=0,c=r+1;for(;e1(l);){if(Dr(l)){if(e)return!1;c=0}else c++;l=n.peek(++a)}if(!(l>=0&&(l==58?Gh(n.peek(a+1),t):l==35?n.peek(a-1)!=32:Gh(l,t)))||!t&&c<=r||c==0&&!t&&(As(n,45,a)||As(n,46,a)))break;if(e&&Su(l)=="f")return!1;for(let d=a;d>=0;d--)n.advance();if(e&&n.pos>s+1024)return!1}return!0}const uN=new Bu((n,e)=>{if(n.next==33)t1(n),n.acceptToken(qP);else if(n.next==38||n.next==42){let t=n.next==38?XP:KP;Zf(n),n.acceptToken(t)}else n.next==39||n.next==34?(Id(n,!1),n.acceptToken(UP)):n1(n,!1,e.context.type==sl,e.context.depth)&&n.acceptToken($P)}),cN=new Bu((n,e)=>{let t=e.context.type==Yf?e.context.depth:-1,r=n.pos;e:for(;;){let s=0,l=n.next;for(;l==32;)l=n.peek(++s);if(!s&&(As(n,45,s)||As(n,46,s))||!Dr(l)&&(t<0&&(t=Math.max(e.context.depth+1,s)),s<t))break;for(;;){if(n.next<0)break e;let a=Dr(n.next);if(n.advance(),a)continue e;r=n.pos}}n.acceptTokenTo(Zv,r)}),hN=Xv({DirectiveName:U.keyword,DirectiveContent:U.attributeValue,"DirectiveEnd DocEnd":U.meta,QuotedLiteral:U.string,BlockLiteralHeader:U.special(U.string),BlockLiteralContent:U.content,Literal:U.content,"Key/Literal Key/QuotedLiteral":U.definition(U.propertyName),"Anchor Alias":U.labelName,Tag:U.typeName,Comment:U.lineComment,": , -":U.separator,"?":U.punctuation,"[ ]":U.squareBracket,"{ }":U.brace}),fN=ku.deserialize({version:14,states:"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y",stateData:";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O",goto:",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv",nodeNames:" DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document",maxTerm:74,context:rN,nodeProps:[["isolate",-3,8,9,14,""],["openedBy",18,"[",32,"{"],["closedBy",19,"]",33,"}"]],propSources:[hN],skippedNodes:[0],repeatNodeCount:6,tokenData:"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P",tokenizers:[iN,sN,uN,cN,0,1],topRules:{Stream:[0,15]},tokenPrec:0});var Yh;const gs=new Te;function dN(n){return be.define({combine:n?e=>e.concat(n):void 0})}const pN=new Te;class _n{constructor(e,t,r=[],s=""){this.data=e,this.name=s,ze.prototype.hasOwnProperty("tree")||Object.defineProperty(ze.prototype,"tree",{get(){return ur(this)}}),this.parser=t,this.extension=[Ms.of(this),ze.languageData.of((l,a,c)=>{let h=uy(l,a,c),d=h.type.prop(gs);if(!d)return[];let p=l.facet(d),m=h.type.prop(pN);if(m){let v=h.resolve(a-h.from,c);for(let w of m)if(w.test(v,l)){let S=l.facet(w.facet);return w.type=="replace"?S:S.concat(p)}}return p})].concat(r)}isActiveAt(e,t,r=-1){return uy(e,t,r).type.prop(gs)==this.data}findRegions(e){let t=e.facet(Ms);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],s=(l,a)=>{if(l.prop(gs)==this.data){r.push({from:a,to:a+l.length});return}let c=l.prop(Te.mounted);if(c){if(c.tree.prop(gs)==this.data){if(c.overlay)for(let h of c.overlay)r.push({from:h.from+a,to:h.to+a});else r.push({from:a,to:a+l.length});return}else if(c.overlay){let h=r.length;if(s(c.tree,c.overlay[0].from+a),r.length>h)return}}for(let h=0;h<l.children.length;h++){let d=l.children[h];d instanceof gt&&s(d,l.positions[h]+a)}};return s(ur(e),0),r}get allowsNesting(){return!0}}_n.setState=vt.define();function uy(n,e,t){let r=n.facet(Ms),s=ur(n).topNode;if(!r||r.allowsNesting)for(let l=s;l;l=l.enter(e,t,Pt.ExcludeBuffers))l.type.isTop&&(s=l);return s}class Cu extends _n{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=dN(e.languageData);return new Cu(t,e.parser.configure({props:[gs.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new Cu(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ur(n){let e=n.field(_n.state,!1);return e?e.tree:gt.empty}class gN{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let Po=null;class Ou{constructor(e,t,r=[],s,l,a,c,h){this.parser=e,this.state=t,this.fragments=r,this.tree=s,this.treeLen=l,this.viewport=a,this.skipped=c,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Ou(e,t,[],gt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new gN(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=gt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(zi.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(zi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Po;Po=this;try{return e()}finally{Po=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=cy(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:s,treeLen:l,viewport:a,skipped:c}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((d,p,m,v)=>h.push({fromA:d,toA:p,fromB:m,toB:v})),r=zi.applyChanges(r,h),s=gt.empty,l=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){c=[];for(let d of this.skipped){let p=e.mapPos(d.from,1),m=e.mapPos(d.to,-1);p<m&&c.push({from:p,to:m})}}}return new Ou(this.parser,t,r,s,l,a,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:s,to:l}=this.skipped[r];s<e.to&&l>e.from&&(this.fragments=cy(this.fragments,s,l),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Uv{createParse(t,r,s){let l=s[0].from,a=s[s.length-1].to;return{parsedPos:l,advance(){let h=Po;if(h){for(let d of s)h.tempSkipped.push(d);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=a,new gt(sn.none,[],[],a-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Po}}function cy(n,e,t){return zi.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Es{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Es(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Ou.create(e.facet(Ms).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Es(r)}}_n.state=Vi.define({create:Es.init,update(n,e){for(let t of e.effects)if(t.is(_n.setState))return t.value;return e.startState.facet(Ms)!=e.state.facet(Ms)?Es.init(e.state):n.apply(e)}});let r1=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(r1=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Jh=typeof navigator<"u"&&(!((Yh=navigator.scheduling)===null||Yh===void 0)&&Yh.isInputPending)?()=>navigator.scheduling.isInputPending():null,mN=Wn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(_n.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(_n.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=r1(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:s}}=this.view,l=r.field(_n.state);if(l.tree==l.context.tree&&l.context.isDone(s+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!Jh?Math.max(25,e.timeRemaining()-5):1e9),c=l.context.treeLen<s&&r.doc.length>s+1e3,h=l.context.work(()=>Jh&&Jh()||Date.now()>a,s+(c?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:_n.setState.of(new Es(l.context))})),this.chunkBudget>0&&!(h&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>or(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ms=be.define({combine(n){return n.length?n[0]:null},enables:n=>[_n.state,mN,Ae.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class yN{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const xN=be.define(),Bd=be.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Pu(n){let e=n.facet(Bd);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Nu(n,e){let t="",r=n.tabSize,s=n.facet(Bd)[0];if(s=="	"){for(;e>=r;)t+="	",e-=r;s=" "}for(let l=0;l<e;l++)t+=s;return t}function i1(n,e){n instanceof ze&&(n=new zu(n));for(let r of n.state.facet(xN)){let s=r(n,e);if(s!==void 0)return s}let t=ur(n.state);return t.length>=e?vN(n,t,e):null}class zu{constructor(e,t={}){this.state=e,this.options=t,this.unit=Pu(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:l}=this.options;return s!=null&&s>=r.from&&s<=r.to?l&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:r.text.slice(s-r.from),from:s}:{text:r.text.slice(0,s-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:s}=this.lineAt(e,t);return r.slice(e-s,Math.min(r.length,e+100-s))}column(e,t=1){let{text:r,from:s}=this.lineAt(e,t),l=this.countColumn(r,e-s),a=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return a>-1&&(l+=a-this.countColumn(r,r.search(/\S|$/))),l}countColumn(e,t=e.length){return Du(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:s}=this.lineAt(e,t),l=this.options.overrideIndentation;if(l){let a=l(s);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const s1=new Te;function vN(n,e,t){let r=e.resolveStack(t),s=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(s!=r.node){let l=[];for(let a=s;a&&!(a.from<r.node.from||a.to>r.node.to||a.from==r.node.from&&a.type==r.node.type);a=a.parent)l.push(a);for(let a=l.length-1;a>=0;a--)r={node:l[a],next:r}}return o1(r,n,t)}function o1(n,e,t){for(let r=n;r;r=r.next){let s=kN(r.node);if(s)return s(zd.create(e,t,r))}return 0}function wN(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function kN(n){let e=n.type.prop(s1);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Te.closedBy))){let s=n.lastChild,l=s&&r.indexOf(s.name)>-1;return a=>l1(a,!0,1,void 0,l&&!wN(a)?s.from:void 0)}return n.parent==null?bN:null}function bN(){return 0}class zd extends zu{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new zd(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(SN(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return o1(this.context.next,this.base,this.pos)}}function SN(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function CN(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,l=n.state.doc.lineAt(t.from),a=s==null||s<=l.from?l.to:Math.min(l.to,s);for(let c=t.to;;){let h=e.childAfter(c);if(!h||h==r)return null;if(!h.type.isSkipped){if(h.from>=a)return null;let d=/^ */.exec(l.text.slice(t.to-l.from))[0].length;return{from:t.from,to:t.to+d}}c=h.to}}function hy({closing:n,align:e=!0,units:t=1}){return r=>l1(r,e,t,n)}function l1(n,e,t,r,s){let l=n.textAfter,a=l.match(/^\s*/)[0].length,c=r&&l.slice(a,a+r.length)==r||s==n.pos+a,h=e?CN(n):null;return h?c?n.column(h.from):n.column(h.to):n.baseIndent+(c?0:n.unit*t)}const ON=new Te;function PN(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}class Fu{constructor(e,t){this.specs=e;let r;function s(c){let h=ci.newName();return(r||(r=Object.create(null)))["."+h]=c,h}const l=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,a=t.scope;this.scope=a instanceof _n?c=>c.prop(gs)==a.data:a?c=>c==a:void 0,this.style=qv(e.map(c=>({tag:c.tag,class:c.class||s(Object.assign({},c,{tag:null}))})),{all:l}).style,this.module=r?new ci(r):null,this.themeType=t.themeType}static define(e,t){return new Fu(e,t||{})}}const ed=be.define(),NN=be.define({combine(n){return n.length?[n[0]]:null}});function Zh(n){let e=n.facet(ed);return e.length?e:n.facet(NN)}function AN(n,e){let t=[MN],r;return n instanceof Fu&&(n.module&&t.push(Ae.styleModule.of(n.module)),r=n.themeType),r?t.push(ed.computeN([Ae.darkTheme],s=>s.facet(Ae.darkTheme)==(r=="dark")?[n]:[])):t.push(ed.of(n)),t}class EN{constructor(e){this.markCache=Object.create(null),this.tree=ur(e.state),this.decorations=this.buildDeco(e,Zh(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ur(e.state),r=Zh(e.state),s=r!=Zh(e.startState),{viewport:l}=e.view,a=e.changes.mapPos(this.decoratedTo,1);t.length<l.to&&!s&&t.type==this.tree.type&&a>=l.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=l.to)}buildDeco(e,t){if(!t||!this.tree.length)return ot.none;let r=new Go;for(let{from:s,to:l}of e.visibleRanges)IP(this.tree,t,(a,c,h)=>{r.add(a,c,this.markCache[h]||(this.markCache[h]=ot.mark({class:h})))},s,l);return r.finish()}}const MN=Tu.high(Wn.fromClass(EN,{decorations:n=>n.decorations})),RN=1e4,TN="()[]{}",DN=new Te;function td(n,e,t){let r=n.prop(e<0?Te.openedBy:Te.closedBy);if(r)return r;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function nd(n){let e=n.type.prop(DN);return e?e(n.node):n}function ms(n,e,t,r={}){let s=r.maxScanDistance||RN,l=r.brackets||TN,a=ur(n),c=a.resolveInner(e,t);for(let h=c;h;h=h.parent){let d=td(h.type,t,l);if(d&&h.from<h.to){let p=nd(h);if(p&&(t>0?e>=p.from&&e<p.to:e>p.from&&e<=p.to))return jN(n,e,t,h,p,d,l)}}return LN(n,e,t,a,c.type,s,l)}function jN(n,e,t,r,s,l,a){let c=r.parent,h={from:s.from,to:s.to},d=0,p=c==null?void 0:c.cursor();if(p&&(t<0?p.childBefore(r.from):p.childAfter(r.to)))do if(t<0?p.to<=r.from:p.from>=r.to){if(d==0&&l.indexOf(p.type.name)>-1&&p.from<p.to){let m=nd(p);return{start:h,end:m?{from:m.from,to:m.to}:void 0,matched:!0}}else if(td(p.type,t,a))d++;else if(td(p.type,-t,a)){if(d==0){let m=nd(p);return{start:h,end:m&&m.from<m.to?{from:m.from,to:m.to}:void 0,matched:!1}}d--}}while(t<0?p.prevSibling():p.nextSibling());return{start:h,matched:!1}}function LN(n,e,t,r,s,l,a){let c=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),h=a.indexOf(c);if(h<0||h%2==0!=t>0)return null;let d={from:t<0?e-1:e,to:t>0?e+1:e},p=n.doc.iterRange(e,t>0?n.doc.length:0),m=0;for(let v=0;!p.next().done&&v<=l;){let w=p.value;t<0&&(v+=w.length);let S=e+v*t;for(let C=t>0?0:w.length-1,O=t>0?w.length:-1;C!=O;C+=t){let N=a.indexOf(w[C]);if(!(N<0||r.resolveInner(S+C,1).type!=s))if(N%2==0==t>0)m++;else{if(m==1)return{start:d,end:{from:S+C,to:S+C+1},matched:N>>1==h>>1};m--}}t>0&&(v+=w.length)}return p.done?{start:d,matched:!1}:null}const IN=Object.create(null),fy=[sn.none],dy=[],py=Object.create(null),BN=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])BN[n]=zN(IN,e);function ef(n,e){dy.indexOf(n)>-1||(dy.push(n),console.warn(e))}function zN(n,e){let t=[];for(let c of e.split(" ")){let h=[];for(let d of c.split(".")){let p=n[d]||U[d];p?typeof p=="function"?h.length?h=h.map(p):ef(d,`Modifier ${d} used at start of tag`):h.length?ef(d,`Tag ${d} used as modifier`):h=Array.isArray(p)?p:[p]:ef(d,`Unknown highlighting tag ${d}`)}for(let d of h)t.push(d)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),s=r+" "+t.map(c=>c.id),l=py[s];if(l)return l.id;let a=py[s]=sn.define({id:fy.length,name:r,props:[Xv({[r]:t})]});return fy.push(a),a.id}st.RTL,st.LTR;const FN=Cu.define({name:"yaml",parser:fN.configure({props:[s1.add({Stream:n=>{for(let e=n.node.resolve(n.pos,-1);e&&e.to>=n.pos;e=e.parent){if(e.name=="BlockLiteralContent"&&e.from<e.to)return n.baseIndentFor(e);if(e.name=="BlockLiteral")return n.baseIndentFor(e)+n.unit;if(e.name=="BlockSequence"||e.name=="BlockMapping")return n.column(e.from,1);if(e.name=="QuotedLiteral")return null;if(e.name=="Literal"){let t=n.column(e.from,1);if(t==n.lineIndent(e.from,1))return t;if(e.to>n.pos)return null}}return null},FlowMapping:hy({closing:"}"}),FlowSequence:hy({closing:"]"})}),ON.add({"FlowMapping FlowSequence":PN,"Item Pair BlockLiteral":(n,e)=>({from:e.doc.lineAt(n.from).to,to:n.to})})]}),languageData:{commentTokens:{line:"#"},indentOnInput:/^\s*[\]\}]$/}});function _N(){return new yN(FN)}const HN="#e5c07b",gy="#e06c75",VN="#56b6c2",WN="#ffffff",iu="#abb2bf",rd="#7d8799",QN="#61afef",$N="#98c379",my="#d19a66",UN="#c678dd",XN="#21252b",yy="#2c313a",xy="#282c34",tf="#353a42",KN="#3E4451",vy="#528bff",qN=Ae.theme({"&":{color:iu,backgroundColor:xy},".cm-content":{caretColor:vy},".cm-cursor, .cm-dropCursor":{borderLeftColor:vy},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:KN},".cm-panels":{backgroundColor:XN,color:iu},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:xy,color:rd,border:"none"},".cm-activeLineGutter":{backgroundColor:yy},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tf},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tf,borderBottomColor:tf},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:yy,color:iu}}},{dark:!0}),GN=Fu.define([{tag:U.keyword,color:UN},{tag:[U.name,U.deleted,U.character,U.propertyName,U.macroName],color:gy},{tag:[U.function(U.variableName),U.labelName],color:QN},{tag:[U.color,U.constant(U.name),U.standard(U.name)],color:my},{tag:[U.definition(U.name),U.separator],color:iu},{tag:[U.typeName,U.className,U.number,U.changed,U.annotation,U.modifier,U.self,U.namespace],color:HN},{tag:[U.operator,U.operatorKeyword,U.url,U.escape,U.regexp,U.link,U.special(U.string)],color:VN},{tag:[U.meta,U.comment],color:rd},{tag:U.strong,fontWeight:"bold"},{tag:U.emphasis,fontStyle:"italic"},{tag:U.strikethrough,textDecoration:"line-through"},{tag:U.link,color:rd,textDecoration:"underline"},{tag:U.heading,fontWeight:"bold",color:gy},{tag:[U.atom,U.bool,U.special(U.variableName)],color:my},{tag:[U.processingInstruction,U.string,U.inserted],color:$N},{tag:U.invalid,color:WN}]),YN=[qN,AN(GN)],JN=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=_d(n.state,t.from);return r.line?ZN(n):r.block?tA(n):!1};function Fd(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(r(t.update(s)),!0):!1}}const ZN=Fd(iA,0),eA=Fd(a1,0),tA=Fd((n,e)=>a1(n,e,rA(e)),0);function _d(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const No=50;function nA(n,{open:e,close:t},r,s){let l=n.sliceDoc(r-No,r),a=n.sliceDoc(s,s+No),c=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(a)[0].length,d=l.length-c;if(l.slice(d-e.length,d)==e&&a.slice(h,h+t.length)==t)return{open:{pos:r-c,margin:c&&1},close:{pos:s+h,margin:h&&1}};let p,m;s-r<=2*No?p=m=n.sliceDoc(r,s):(p=n.sliceDoc(r,r+No),m=n.sliceDoc(s-No,s));let v=/^\s*/.exec(p)[0].length,w=/\s*$/.exec(m)[0].length,S=m.length-w-t.length;return p.slice(v,v+e.length)==e&&m.slice(S,S+t.length)==t?{open:{pos:r+v+e.length,margin:/\s/.test(p.charAt(v+e.length))?1:0},close:{pos:s-w-t.length,margin:/\s/.test(m.charAt(S-1))?1:0}}:null}function rA(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),s=t.to<=r.to?r:n.doc.lineAt(t.to);s.from>r.from&&s.from==t.to&&(s=t.to==r.to+1?r:n.doc.lineAt(t.to-1));let l=e.length-1;l>=0&&e[l].to>r.from?e[l].to=s.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:s.to})}return e}function a1(n,e,t=e.selection.ranges){let r=t.map(l=>_d(e,l.from).block);if(!r.every(l=>l))return null;let s=t.map((l,a)=>nA(e,r[a],l.from,l.to));if(n!=2&&!s.every(l=>l))return{changes:e.changes(t.map((l,a)=>s[a]?[]:[{from:l.from,insert:r[a].open+" "},{from:l.to,insert:" "+r[a].close}]))};if(n!=1&&s.some(l=>l)){let l=[];for(let a=0,c;a<s.length;a++)if(c=s[a]){let h=r[a],{open:d,close:p}=c;l.push({from:d.pos-h.open.length,to:d.pos+d.margin},{from:p.pos-p.margin,to:p.pos+h.close.length})}return{changes:l}}return null}function iA(n,e,t=e.selection.ranges){let r=[],s=-1;for(let{from:l,to:a}of t){let c=r.length,h=1e9,d=_d(e,l).line;if(d){for(let p=l;p<=a;){let m=e.doc.lineAt(p);if(m.from>s&&(l==a||a>m.from)){s=m.from;let v=/^\s*/.exec(m.text)[0].length,w=v==m.length,S=m.text.slice(v,v+d.length)==d?v:-1;v<m.text.length&&v<h&&(h=v),r.push({line:m,comment:S,token:d,indent:v,empty:w,single:!1})}p=m.to+1}if(h<1e9)for(let p=c;p<r.length;p++)r[p].indent<r[p].line.text.length&&(r[p].indent=h);r.length==c+1&&(r[c].single=!0)}}if(n!=2&&r.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:c,token:h,indent:d,empty:p,single:m}of r)(m||!p)&&l.push({from:c.from+d,insert:h+" "});let a=e.changes(l);return{changes:a,selection:e.selection.map(a,1)}}else if(n!=1&&r.some(l=>l.comment>=0)){let l=[];for(let{line:a,comment:c,token:h}of r)if(c>=0){let d=a.from+c,p=d+h.length;a.text[p-a.from]==" "&&p++,l.push({from:d,to:p})}return{changes:l}}return null}function Bs(n,e){return ie.create(n.ranges.map(e),n.mainIndex)}function $n(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Un({state:n,dispatch:e},t){let r=Bs(n.selection,t);return r.eq(n.selection,!0)?!1:(e($n(n,r)),!0)}function _u(n,e){return ie.cursor(e?n.to:n.from)}function u1(n,e){return Un(n,t=>t.empty?n.moveByChar(t,e):_u(t,e))}function Vt(n){return n.textDirectionAt(n.state.selection.main.head)==st.LTR}const c1=n=>u1(n,!Vt(n)),h1=n=>u1(n,Vt(n));function f1(n,e){return Un(n,t=>t.empty?n.moveByGroup(t,e):_u(t,e))}const sA=n=>f1(n,!Vt(n)),oA=n=>f1(n,Vt(n));function lA(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Hu(n,e,t){let r=ur(n).resolveInner(e.head),s=t?Te.closedBy:Te.openedBy;for(let h=e.head;;){let d=t?r.childAfter(h):r.childBefore(h);if(!d)break;lA(n,d,s)?r=d:h=t?d.to:d.from}let l=r.type.prop(s),a,c;return l&&(a=t?ms(n,r.from,1):ms(n,r.to,-1))&&a.matched?c=t?a.end.to:a.end.from:c=t?r.to:r.from,ie.cursor(c,t?-1:1)}const aA=n=>Un(n,e=>Hu(n.state,e,!Vt(n))),uA=n=>Un(n,e=>Hu(n.state,e,Vt(n)));function d1(n,e){return Un(n,t=>{if(!t.empty)return _u(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const p1=n=>d1(n,!1),g1=n=>d1(n,!0);function m1(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,s;if(e){for(let l of n.state.facet(Ae.scrollMargins)){let a=l(n);a!=null&&a.top&&(t=Math.max(a==null?void 0:a.top,t)),a!=null&&a.bottom&&(r=Math.max(a==null?void 0:a.bottom,r))}s=n.scrollDOM.clientHeight-t-r}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function y1(n,e){let t=m1(n),{state:r}=n,s=Bs(r.selection,a=>a.empty?n.moveVertically(a,e,t.height):_u(a,e));if(s.eq(r.selection))return!1;let l;if(t.selfScroll){let a=n.coordsAtPos(r.selection.main.head),c=n.scrollDOM.getBoundingClientRect(),h=c.top+t.marginTop,d=c.bottom-t.marginBottom;a&&a.top>h&&a.bottom<d&&(l=Ae.scrollIntoView(s.main.head,{y:"start",yMargin:a.top-h}))}return n.dispatch($n(r,s),{effects:l}),!0}const wy=n=>y1(n,!1),id=n=>y1(n,!0);function gi(n,e,t){let r=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?r.to:r.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==r.from&&r.length){let l=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;l&&e.head!=r.from+l&&(s=ie.cursor(r.from+l))}return s}const cA=n=>Un(n,e=>gi(n,e,!0)),hA=n=>Un(n,e=>gi(n,e,!1)),fA=n=>Un(n,e=>gi(n,e,!Vt(n))),dA=n=>Un(n,e=>gi(n,e,Vt(n))),pA=n=>Un(n,e=>ie.cursor(n.lineBlockAt(e.head).from,1)),gA=n=>Un(n,e=>ie.cursor(n.lineBlockAt(e.head).to,-1));function mA(n,e,t){let r=!1,s=Bs(n.selection,l=>{let a=ms(n,l.head,-1)||ms(n,l.head,1)||l.head>0&&ms(n,l.head-1,1)||l.head<n.doc.length&&ms(n,l.head+1,-1);if(!a||!a.end)return l;r=!0;let c=a.start.from==l.head?a.end.to:a.end.from;return ie.cursor(c)});return r?(e($n(n,s)),!0):!1}const yA=({state:n,dispatch:e})=>mA(n,e);function An(n,e){let t=Bs(n.state.selection,r=>{let s=e(r);return ie.range(r.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch($n(n.state,t)),!0)}function x1(n,e){return An(n,t=>n.moveByChar(t,e))}const v1=n=>x1(n,!Vt(n)),w1=n=>x1(n,Vt(n));function k1(n,e){return An(n,t=>n.moveByGroup(t,e))}const xA=n=>k1(n,!Vt(n)),vA=n=>k1(n,Vt(n)),wA=n=>An(n,e=>Hu(n.state,e,!Vt(n))),kA=n=>An(n,e=>Hu(n.state,e,Vt(n)));function b1(n,e){return An(n,t=>n.moveVertically(t,e))}const S1=n=>b1(n,!1),C1=n=>b1(n,!0);function O1(n,e){return An(n,t=>n.moveVertically(t,e,m1(n).height))}const ky=n=>O1(n,!1),by=n=>O1(n,!0),bA=n=>An(n,e=>gi(n,e,!0)),SA=n=>An(n,e=>gi(n,e,!1)),CA=n=>An(n,e=>gi(n,e,!Vt(n))),OA=n=>An(n,e=>gi(n,e,Vt(n))),PA=n=>An(n,e=>ie.cursor(n.lineBlockAt(e.head).from)),NA=n=>An(n,e=>ie.cursor(n.lineBlockAt(e.head).to)),Sy=({state:n,dispatch:e})=>(e($n(n,{anchor:0})),!0),Cy=({state:n,dispatch:e})=>(e($n(n,{anchor:n.doc.length})),!0),Oy=({state:n,dispatch:e})=>(e($n(n,{anchor:n.selection.main.anchor,head:0})),!0),Py=({state:n,dispatch:e})=>(e($n(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),AA=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),EA=({state:n,dispatch:e})=>{let t=Vu(n).map(({from:r,to:s})=>ie.range(r,Math.min(s+1,n.doc.length)));return e(n.update({selection:ie.create(t),userEvent:"select"})),!0},MA=({state:n,dispatch:e})=>{let t=Bs(n.selection,r=>{let s=ur(n),l=s.resolveStack(r.from,1);if(r.empty){let a=s.resolveStack(r.from,-1);a.node.from>=l.node.from&&a.node.to<=l.node.to&&(l=a)}for(let a=l;a;a=a.next){let{node:c}=a;if((c.from<r.from&&c.to>=r.to||c.to>r.to&&c.from<=r.from)&&a.next)return ie.range(c.to,c.from)}return r});return t.eq(n.selection)?!1:(e($n(n,t)),!0)};function P1(n,e){let{state:t}=n,r=t.selection,s=t.selection.ranges.slice();for(let l of t.selection.ranges){let a=t.doc.lineAt(l.head);if(e?a.to<n.state.doc.length:a.from>0)for(let c=l;;){let h=n.moveVertically(c,e);if(h.head<a.from||h.head>a.to){s.some(d=>d.head==h.head)||s.push(h);break}else{if(h.head==c.head)break;c=h}}}return s.length==r.ranges.length?!1:(n.dispatch($n(t,ie.create(s,s.length-1))),!0)}const RA=n=>P1(n,!1),TA=n=>P1(n,!0),DA=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=ie.create([t.main]):t.main.empty||(r=ie.create([ie.cursor(t.main.head)])),r?(e($n(n,r)),!0):!1};function ml(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,s=r.changeByRange(l=>{let{from:a,to:c}=l;if(a==c){let h=e(l);h<a?(t="delete.backward",h=Qa(n,h,!1)):h>a&&(t="delete.forward",h=Qa(n,h,!0)),a=Math.min(a,h),c=Math.max(c,h)}else a=Qa(n,a,!1),c=Qa(n,c,!0);return a==c?{range:l}:{changes:{from:a,to:c},range:ie.cursor(a,a<l.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(r.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Ae.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Qa(n,e,t){if(n instanceof Ae)for(let r of n.state.facet(Ae.atomicRanges).map(s=>s(n)))r.between(e,e,(s,l)=>{s<e&&l>e&&(e=t?l:s)});return e}const N1=(n,e,t)=>ml(n,r=>{let s=r.from,{state:l}=n,a=l.doc.lineAt(s),c,h;if(t&&!e&&s>a.from&&s<a.from+200&&!/[^ \t]/.test(c=a.text.slice(0,s-a.from))){if(c[c.length-1]=="	")return s-1;let d=Du(c,l.tabSize),p=d%Pu(l)||Pu(l);for(let m=0;m<p&&c[c.length-1-m]==" ";m++)s--;h=s}else h=Xt(a.text,s-a.from,e,e)+a.from,h==s&&a.number!=(e?l.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(h-a.from,s-a.from))&&(h=Xt(a.text,h-a.from,!1,!1)+a.from);return h}),sd=n=>N1(n,!1,!0),A1=n=>N1(n,!0,!1),E1=(n,e)=>ml(n,t=>{let r=t.head,{state:s}=n,l=s.doc.lineAt(r),a=s.charCategorizer(r);for(let c=null;;){if(r==(e?l.to:l.from)){r==t.head&&l.number!=(e?s.doc.lines:1)&&(r+=e?1:-1);break}let h=Xt(l.text,r-l.from,e)+l.from,d=l.text.slice(Math.min(r,h)-l.from,Math.max(r,h)-l.from),p=a(d);if(c!=null&&p!=c)break;(d!=" "||r!=t.head)&&(c=p),r=h}return r}),M1=n=>E1(n,!1),jA=n=>E1(n,!0),LA=n=>ml(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),IA=n=>ml(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),BA=n=>ml(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),zA=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Le.of(["",""])},range:ie.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},FA=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let s=r.from,l=n.doc.lineAt(s),a=s==l.from?s-1:Xt(l.text,s-l.from,!1)+l.from,c=s==l.to?s+1:Xt(l.text,s-l.from,!0)+l.from;return{changes:{from:a,to:c,insert:n.doc.slice(s,c).append(n.doc.slice(a,s))},range:ie.cursor(c)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Vu(n){let e=[],t=-1;for(let r of n.selection.ranges){let s=n.doc.lineAt(r.from),l=n.doc.lineAt(r.to);if(!r.empty&&r.to==l.from&&(l=n.doc.lineAt(r.to-1)),t>=s.number){let a=e[e.length-1];a.to=l.to,a.ranges.push(r)}else e.push({from:s.from,to:l.to,ranges:[r]});t=l.number+1}return e}function R1(n,e,t){if(n.readOnly)return!1;let r=[],s=[];for(let l of Vu(n)){if(t?l.to==n.doc.length:l.from==0)continue;let a=n.doc.lineAt(t?l.to+1:l.from-1),c=a.length+1;if(t){r.push({from:l.to,to:a.to},{from:l.from,insert:a.text+n.lineBreak});for(let h of l.ranges)s.push(ie.range(Math.min(n.doc.length,h.anchor+c),Math.min(n.doc.length,h.head+c)))}else{r.push({from:a.from,to:l.from},{from:l.to,insert:n.lineBreak+a.text});for(let h of l.ranges)s.push(ie.range(h.anchor-c,h.head-c))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:ie.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const _A=({state:n,dispatch:e})=>R1(n,e,!1),HA=({state:n,dispatch:e})=>R1(n,e,!0);function T1(n,e,t){if(n.readOnly)return!1;let r=[];for(let s of Vu(n))t?r.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):r.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const VA=({state:n,dispatch:e})=>T1(n,e,!1),WA=({state:n,dispatch:e})=>T1(n,e,!0),QA=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Vu(e).map(({from:s,to:l})=>(s>0?s--:l<e.doc.length&&l++,{from:s,to:l}))),r=Bs(e.selection,s=>{let l;if(n.lineWrapping){let a=n.lineBlockAt(s.head),c=n.coordsAtPos(s.head,s.assoc||1);c&&(l=a.bottom+n.documentTop-c.bottom+n.defaultLineHeight/2)}return n.moveVertically(s,!0,l)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function $A(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ur(n).resolveInner(e),r=t.childBefore(e),s=t.childAfter(e),l;return r&&s&&r.to<=e&&s.from>=e&&(l=r.type.prop(Te.closedBy))&&l.indexOf(s.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(r.to,s.from))?{from:r.to,to:s.from}:null}const Ny=D1(!1),UA=D1(!0);function D1(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(s=>{let{from:l,to:a}=s,c=e.doc.lineAt(l),h=!n&&l==a&&$A(e,l);n&&(l=a=(a<=c.to?c:e.doc.lineAt(a)).to);let d=new zu(e,{simulateBreak:l,simulateDoubleBreak:!!h}),p=i1(d,l);for(p==null&&(p=Du(/^\s*/.exec(e.doc.lineAt(l).text)[0],e.tabSize));a<c.to&&/\s/.test(c.text[a-c.from]);)a++;h?{from:l,to:a}=h:l>c.from&&l<c.from+100&&!/\S/.test(c.text.slice(0,l))&&(l=c.from);let m=["",Nu(e,p)];return h&&m.push(Nu(e,d.lineIndent(c.from,-1))),{changes:{from:l,to:a,insert:Le.of(m)},range:ie.cursor(l+1+m[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Hd(n,e){let t=-1;return n.changeByRange(r=>{let s=[];for(let a=r.from;a<=r.to;){let c=n.doc.lineAt(a);c.number>t&&(r.empty||r.to>c.from)&&(e(c,s,r),t=c.number),a=c.to+1}let l=n.changes(s);return{changes:s,range:ie.range(l.mapPos(r.anchor,1),l.mapPos(r.head,1))}})}const XA=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new zu(n,{overrideIndentation:l=>{let a=t[l];return a??-1}}),s=Hd(n,(l,a,c)=>{let h=i1(r,l.from);if(h==null)return;/\S/.test(l.text)||(h=0);let d=/^\s*/.exec(l.text)[0],p=Nu(n,h);(d!=p||c.from<l.from+d.length)&&(t[l.from]=h,a.push({from:l.from,to:l.from+d.length,insert:p}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},KA=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Hd(n,(t,r)=>{r.push({from:t.from,insert:n.facet(Bd)})}),{userEvent:"input.indent"})),!0),qA=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Hd(n,(t,r)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let l=Du(s,n.tabSize),a=0,c=Nu(n,Math.max(0,l-Pu(n)));for(;a<s.length&&a<c.length&&s.charCodeAt(a)==c.charCodeAt(a);)a++;r.push({from:t.from+a,to:t.from+s.length,insert:c.slice(a)})}),{userEvent:"delete.dedent"})),!0),GA=n=>(n.setTabFocusMode(),!0),YA=[{key:"Ctrl-b",run:c1,shift:v1,preventDefault:!0},{key:"Ctrl-f",run:h1,shift:w1},{key:"Ctrl-p",run:p1,shift:S1},{key:"Ctrl-n",run:g1,shift:C1},{key:"Ctrl-a",run:pA,shift:PA},{key:"Ctrl-e",run:gA,shift:NA},{key:"Ctrl-d",run:A1},{key:"Ctrl-h",run:sd},{key:"Ctrl-k",run:LA},{key:"Ctrl-Alt-h",run:M1},{key:"Ctrl-o",run:zA},{key:"Ctrl-t",run:FA},{key:"Ctrl-v",run:id}],JA=[{key:"ArrowLeft",run:c1,shift:v1,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:sA,shift:xA,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:fA,shift:CA,preventDefault:!0},{key:"ArrowRight",run:h1,shift:w1,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:oA,shift:vA,preventDefault:!0},{mac:"Cmd-ArrowRight",run:dA,shift:OA,preventDefault:!0},{key:"ArrowUp",run:p1,shift:S1,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Sy,shift:Oy},{mac:"Ctrl-ArrowUp",run:wy,shift:ky},{key:"ArrowDown",run:g1,shift:C1,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Cy,shift:Py},{mac:"Ctrl-ArrowDown",run:id,shift:by},{key:"PageUp",run:wy,shift:ky},{key:"PageDown",run:id,shift:by},{key:"Home",run:hA,shift:SA,preventDefault:!0},{key:"Mod-Home",run:Sy,shift:Oy},{key:"End",run:cA,shift:bA,preventDefault:!0},{key:"Mod-End",run:Cy,shift:Py},{key:"Enter",run:Ny,shift:Ny},{key:"Mod-a",run:AA},{key:"Backspace",run:sd,shift:sd,preventDefault:!0},{key:"Delete",run:A1,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:M1,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:jA,preventDefault:!0},{mac:"Mod-Backspace",run:IA,preventDefault:!0},{mac:"Mod-Delete",run:BA,preventDefault:!0}].concat(YA.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),ZA=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:aA,shift:wA},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:uA,shift:kA},{key:"Alt-ArrowUp",run:_A},{key:"Shift-Alt-ArrowUp",run:VA},{key:"Alt-ArrowDown",run:HA},{key:"Shift-Alt-ArrowDown",run:WA},{key:"Mod-Alt-ArrowUp",run:RA},{key:"Mod-Alt-ArrowDown",run:TA},{key:"Escape",run:DA},{key:"Mod-Enter",run:UA},{key:"Alt-l",mac:"Ctrl-l",run:EA},{key:"Mod-i",run:MA,preventDefault:!0},{key:"Mod-[",run:qA},{key:"Mod-]",run:KA},{key:"Mod-Alt-\\",run:XA},{key:"Shift-Mod-k",run:QA},{key:"Shift-Mod-\\",run:yA},{key:"Mod-/",run:JN},{key:"Alt-A",run:eA},{key:"Ctrl-m",mac:"Shift-Alt-m",run:GA}].concat(JA),eE=n=>{const{state:e}=n,t=e.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:"	"},range:ie.cursor(r.from+1)}));return n.dispatch(t),!0},tE=Md.of([{key:"Tab",run:eE}]);class nE extends hl{toDOM(){const e=document.createElement("span");return e.className="cm-space-dot",e.textContent="",e}}class rE extends hl{toDOM(){const e=document.createElement("span");return e.className="cm-tab-arrow",e.textContent="",e}}const iE=Wn.fromClass(class{constructor(n){Sm(this,"decorations");this.decorations=this.buildDecorations(n)}update(n){(n.docChanged||n.viewportChanged)&&(this.decorations=this.buildDecorations(n.view))}buildDecorations(n){const e=[];for(const{from:t,to:r}of n.visibleRanges){const s=n.state.doc.sliceString(t,r);for(let l=0;l<s.length;l++){const a=s[l],c=t+l;a===" "?e.push({from:c,to:c+1,decoration:ot.replace({widget:new nE})}):a==="	"&&e.push({from:c,to:c+1,decoration:ot.replace({widget:new rE})})}}return ot.set(e.map(t=>t.decoration.range(t.from,t.to)))}},{decorations:n=>n.decorations}),sE=Ae.theme({"&":{backgroundColor:"#ffffff",color:"#000000"},".cm-content":{caretColor:"#000000"},".cm-gutters":{backgroundColor:"#f5f5f5",color:"#999999",border:"none"},".cm-activeLineGutter":{backgroundColor:"#e8e8e8"},".cm-activeLine":{backgroundColor:"#f0f0f0"},".cm-space-dot":{color:"#999999"},".cm-tab-arrow":{color:"#999999",display:"inline-block",width:"calc(4ch)",textAlign:"left"}}),oE=Ae.theme({".cm-space-dot":{color:"#666666"},".cm-tab-arrow":{color:"#666666",display:"inline-block",width:"calc(4ch)",textAlign:"left"}});function Ay(n){switch(n){case"light":return[sE];case"dark":default:return[YN,oE]}}const lE=b.forwardRef(function({value:e,onChange:t,colorScheme:r,onFocusChange:s},l){const a=b.useRef(null),c=b.useRef(null),h=b.useRef(new cl),d=b.useRef(s);d.current=s,b.useImperativeHandle(l,()=>({focus:()=>{var m;(m=c.current)==null||m.focus()},blur:()=>{var m;(m=c.current)==null||m.contentDOM.blur()}}),[]),b.useEffect(()=>{if(!a.current||c.current)return;const m=ze.create({doc:e,extensions:[cP(),dP(),ZO(),qO(),_N(),tE,Md.of(ZA),ze.tabSize.of(4),iE,Ae.updateListener.of(v=>{var w;v.docChanged&&t(v.state.doc.toString()),v.focusChanged&&((w=d.current)==null||w.call(d,v.view.hasFocus))}),h.current.of(Ay(r)),Ae.lineWrapping]});return c.current=new Ae({state:m,parent:a.current}),()=>{var v;(v=c.current)==null||v.destroy(),c.current=null}},[]);const p=b.useCallback(m=>{const v=c.current;if(!v)return;const w=v.state.doc.toString();w!==m&&v.dispatch({changes:{from:0,to:w.length,insert:m}})},[]);return b.useEffect(()=>{p(e)},[e,p]),b.useEffect(()=>{const m=c.current;m&&m.dispatch({effects:h.current.reconfigure(Ay(r))})},[r]),x.jsx("div",{ref:a,className:"h-full w-full overflow-auto [&_.cm-editor]:h-full [&_.cm-scroller]:overflow-auto",style:{fontSize:"14px"}})});let $a=null,nf=null;async function j1(){return $a||(nf||(nf=(async()=>{const n=await fetch("/testsuite/tests.json");if(!n.ok)throw new Error(`Failed to load test suite: ${n.status}`);return $a=await n.json(),$a})()),nf)}function aE({isOpen:n,onClose:e,onSelect:t}){const[r,s]=b.useState([]),[l,a]=b.useState([]),[c,h]=b.useState(""),[d,p]=b.useState(!1),[m,v]=b.useState(null),[w,S]=b.useState(null),C=b.useRef(null);b.useEffect(()=>{n&&r.length===0&&!d&&(p(!0),j1().then(N=>{s(N.tests),a(N.tests),p(!1)}).catch(N=>{v(N.message),p(!1)}))},[n,r.length,d]),b.useEffect(()=>{n&&setTimeout(()=>{var N;return(N=C.current)==null?void 0:N.focus()},100)},[n]),b.useEffect(()=>{if(!c){a(r),S(null);return}try{const N=new RegExp(c,"i");S(null),a(r.filter(E=>N.test(E.id)||N.test(E.name)))}catch{S("Invalid regex"),a([])}},[c,r]),b.useEffect(()=>{const N=E=>{E.key==="Escape"&&n&&e()};return document.addEventListener("keydown",N),()=>document.removeEventListener("keydown",N)},[n,e]);const O=N=>{t(N.yaml),e(),h("")};return n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-[600px] max-h-[80vh] flex flex-col",children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Search"," ",x.jsx("a",{href:"https://github.com/yaml/yaml-test-suite/tree/data",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 underline",children:"YAML Test Suite"})]}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white transition-colors",children:"X"})]}),x.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[x.jsx("input",{ref:C,type:"text",placeholder:"Search by regex (e.g., 'block.*map' or 'spec example')",value:c,onChange:N=>h(N.target.value),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white rounded border border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:outline-none"}),w&&x.jsx("div",{className:"mt-1 text-red-600 dark:text-red-400 text-sm",children:w})]}),x.jsxs("div",{className:"flex-1 overflow-y-auto",children:[d&&x.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Loading tests..."}),m&&x.jsx("div",{className:"p-8 text-center text-red-600 dark:text-red-400",children:m}),!d&&!m&&l.map(N=>x.jsxs("button",{onClick:()=>O(N),className:"w-full px-4 py-3 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[x.jsx("span",{className:`font-mono ${N.error?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:N.id}),x.jsx("span",{className:"text-gray-500 dark:text-gray-400 mx-2",children:"-"}),x.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:N.name})]},N.id)),!d&&!m&&l.length===0&&c&&!w&&x.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No tests match your search"})]}),x.jsxs("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700 text-sm text-gray-500 flex justify-between",children:[x.jsxs("span",{children:[l.length," of ",r.length," tests"]}),x.jsx("span",{children:"(E) = expected parse error"})]})]})}):null}const uE={dark:"vs-dark",light:"light"},Qo=`# Edit this YAML and see how
# different parsers handle it.

# Green = matches reference parser
# Red = differs or errored

name: YAML Parser Playground

url: https://play.yaml.com/
repo:
  https://github.com/yaml/yaml-play

current parsers: 17
actively maintained: true

features:
- Compare outputs from multiple
  YAML parsers
- Search and load tests from the
  YAML Test Suite
- Select and drag output panes
- Click Help for shortcut keys
`,Ey=200,My=1600,Ry=b.forwardRef(function({value:e,onChange:t,width:r,onWidthChange:s,colorScheme:l,editorType:a,showBorder:c=!0,heightMode:h="full",isMobile:d=!1,onSubmitPR:p,onSignIn:m,isGitHubAuthenticated:v=!1},w){const S=b.useRef(!1),C=b.useRef(0),O=b.useRef(0),N=b.useRef(null),E=b.useRef(null),[T,I]=b.useState(!1),[R,L]=b.useState(!1),[j,H]=b.useState(!1),W=b.useRef(null);b.useEffect(()=>{if(!R)return;const G=Q=>{W.current&&!W.current.contains(Q.target)&&L(!1)},se=Q=>{Q.key==="Escape"&&L(!1)};return document.addEventListener("mousedown",G),document.addEventListener("keydown",se),()=>{document.removeEventListener("mousedown",G),document.removeEventListener("keydown",se)}},[R]),b.useImperativeHandle(w,()=>({focus:()=>{var G,se;a==="codemirror"?(G=E.current)==null||G.focus():(se=N.current)==null||se.focus()},blur:()=>{var G,se,Q;a==="codemirror"?(G=E.current)==null||G.blur():(se=N.current)!=null&&se.getDomNode()&&((Q=document.activeElement)==null||Q.blur())}}),[a]);const V=b.useCallback(G=>{N.current=G;const se=G.getModel();se&&se.updateOptions({tabSize:4,insertSpaces:!1}),G.onDidFocusEditorText(()=>H(!0)),G.onDidBlurEditorText(()=>H(!1))},[]),q=b.useCallback(G=>{S.current=!0,C.current=G.clientX,O.current=r,document.body.style.cursor="col-resize",document.body.style.userSelect="none";const se=ee=>{if(!S.current)return;const J=ee.clientX-C.current,A=Math.min(My,Math.max(Ey,O.current+J));s(A)},Q=()=>{S.current=!1,document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",se),document.removeEventListener("mouseup",Q)};document.addEventListener("mousemove",se),document.addEventListener("mouseup",Q)},[r,s]),$=h==="full"?"h-full":"h-full overflow-hidden",Z=c?"border-r border-gray-300 dark:border-gray-700":"",ue=j?"ring-2 ring-blue-500 ring-inset":"",X=d?{}:{width:`${r}px`,minWidth:`${Ey}px`,maxWidth:`${My}px`};return x.jsxs("div",{className:`flex flex-col ${$} ${d?"w-full border-b border-gray-300 dark:border-gray-700":Z} ${ue} relative transition-shadow`,style:X,children:[x.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 py-2 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between",children:[x.jsx("h2",{className:`font-semibold transition-colors ${j?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-500"}`,children:j?"YAML Input Editor (editing)":"YAML Input Editor"}),x.jsxs("div",{className:"flex items-center gap-1",children:[!d&&(p||m)&&x.jsx("button",{onClick:()=>{v&&p?p():m&&m()},className:"text-gray-400 hover:text-gray-700 dark:hover:text-white p-1",title:"Submit to yaml-test-suite",children:x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),x.jsx("button",{onClick:()=>navigator.clipboard.writeText(e),className:"text-gray-400 hover:text-gray-700 dark:hover:text-white p-1",title:"Copy YAML",children:x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),x.jsxs("div",{className:"relative",ref:W,children:[x.jsx("button",{onClick:()=>L(!R),className:"text-gray-400 hover:text-gray-700 dark:hover:text-white p-1",title:"Menu",children:x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),R&&x.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[x.jsx("button",{onClick:()=>{L(!1),I(!0)},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Search Test Suite"}),x.jsx("button",{onClick:()=>{var G,se;L(!1),t(""),a==="codemirror"?(G=E.current)==null||G.focus():(se=N.current)==null||se.focus()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Clear"}),x.jsx("button",{onClick:()=>{L(!1),t(Qo)},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Default YAML"})]})]})]})]}),x.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:a==="codemirror"?x.jsx(lE,{ref:E,value:e,onChange:t,colorScheme:l,onFocusChange:H}):x.jsx(_2,{height:"100%",defaultLanguage:"yaml",defaultValue:Qo,value:e,onChange:G=>t(G||""),theme:uE[l],onMount:V,options:{minimap:{enabled:!1},fontSize:14,fontFamily:"'Consolas', 'Monaco', 'Courier New', monospace",lineNumbers:"on",renderWhitespace:"all",tabSize:4,insertSpaces:!1,detectIndentation:!1,useTabStops:!1,scrollBeyondLastLine:!1,wordWrap:"on",automaticLayout:!0}})}),!d&&x.jsx("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-blue-500 transition-colors",onMouseDown:q}),x.jsx(aE,{isOpen:T,onClose:()=>I(!1),onSelect:t})]})});function cE({parser:n,agrees:e,loading:t,onClose:r,onAddPane:s,isDraggable:l=!0,onInfoClick:a,onRunTestSuite:c,showTestSuite:h=!0,output:d,parseSuccess:p,isSelected:m=!1,onToggleSelection:v}){const[w,S]=b.useState(!1),C=b.useRef(null);b.useEffect(()=>{if(!w)return;const Z=X=>{C.current&&!C.current.contains(X.target)&&S(!1)},ue=X=>{X.key==="Escape"&&S(!1)};return document.addEventListener("mousedown",Z),document.addEventListener("keydown",ue),()=>{document.removeEventListener("mousedown",Z),document.removeEventListener("keydown",ue)}},[w]);const{attributes:O,listeners:N,setNodeRef:E,transform:T,transition:I,isDragging:R}=MS({id:n.id,disabled:!l}),L={transform:Uo.Transform.toString(T),transition:I,opacity:R?.5:1},j=t||p===void 0?"bg-gray-300":p?"bg-green-300":"bg-red-300",V=!(n.id==="refparse")&&!t&&e===!1?"border-red-600":t||p===void 0?"border-gray-300":p?"border-green-300":"border-red-300",q=`${n.name} v${n.version} (${n.language})`,$=Z=>{Z.stopPropagation(),S(!w)};return x.jsxs("div",{ref:E,style:L,className:`${j} ${V} border-4 px-3 py-2 flex items-center justify-between cursor-grab active:cursor-grabbing select-none`,...O,...N,children:[x.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[v&&x.jsx("input",{type:"checkbox",checked:m,onChange:Z=>{Z.stopPropagation(),v(),Z.currentTarget.blur()},onClick:Z=>Z.stopPropagation(),className:"w-4 h-4 text-blue-600 bg-white border-gray-500 rounded cursor-pointer",title:"Include in selected group (S)"}),x.jsx("span",{className:"text-gray-900 font-semibold",title:q,children:n.name})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[t&&x.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-gray-700 border-t-transparent rounded-full"}),s&&x.jsx("button",{onClick:Z=>{Z.stopPropagation(),s()},className:"text-gray-700 hover:text-gray-500 p-1",title:"Add pane",children:x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),r&&x.jsx("button",{onClick:Z=>{Z.stopPropagation(),r()},className:"text-gray-700 hover:text-gray-500 text-lg leading-none px-1",title:"Close pane",children:""}),d&&x.jsx("button",{onClick:Z=>{Z.stopPropagation(),navigator.clipboard.writeText(d)},className:"text-gray-700 hover:text-gray-500 p-1",title:"Copy output",children:x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),x.jsxs("div",{className:"cursor-pointer relative",onClick:$,ref:C,children:[x.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),w&&x.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[140px]",children:[h&&x.jsx("button",{onClick:Z=>{Z.stopPropagation(),S(!1),c==null||c()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Test Suite"}),x.jsx("button",{onClick:Z=>{Z.stopPropagation(),S(!1),a==null||a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Parser Info"})]})]})]})]})}function hE({isOpen:n,onClose:e,parser:t}){return b.useEffect(()=>{if(!n)return;const r=s=>{s.key==="Escape"&&e()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",onClick:r=>r.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsx("div",{className:"p-4 space-y-3",children:x.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-sm",children:[t.repo&&x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Repository"}),x.jsx("a",{href:t.repo,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline truncate",children:t.repo})]}),x.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Language"}),x.jsx("span",{className:"text-gray-900 dark:text-white",children:t.language}),x.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Version"}),x.jsx("span",{className:"text-gray-900 dark:text-white",children:t.version})]})})]})}):null}const zs="https://localhost:7481",L1="https://yaml-play-oauth.ingy.workers.dev",su="0.1.40";function fE(){return su}async function dE(){try{return(await fetch(`${zs}/`,{method:"HEAD"})).ok}catch{return!1}}async function I1(n,e,t){const r=`${zs}/?version=${encodeURIComponent(su)}&parser=yaml-test-parse-${n}`;try{const s=new URLSearchParams;s.append("text",e);const l=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!l.ok){const h=(await l.text()).match(/Requires sandbox version (\S+)/);if(h)return{status:-1,output:`Version mismatch: sandbox is ${h[1]}, but frontend requires ${su}`,versionMismatch:{required:su,found:h[1]}};throw new Error(`HTTP ${l.status}: ${l.statusText}`)}const a=await l.json();return{status:a.status,output:a.output}}catch(s){return s&&typeof s=="object"&&"versionMismatch"in s?s:{status:-1,output:s instanceof Error?s.message:"Unknown error"}}}async function Vd(n){const e=`${zs}/github-models`;try{const t=await fetch(e,{method:"GET",headers:{Authorization:`Bearer ${n}`}});if(!t.ok)throw new Error(`Failed to fetch GitHub models: ${t.statusText}`);return await t.json()}catch(t){return console.error("Error fetching GitHub models:",t),[]}}async function Ty(n){const e=`${zs}/preview-pr`,t=new URLSearchParams;t.append("yaml",n.yaml),t.append("events",n.events),t.append("isError",n.isError?"true":"false"),t.append("model",n.model),t.append("githubToken",n.githubToken),n.testName&&t.append("testName",n.testName),n.currentTags&&n.currentTags.length>0&&t.append("currentTags",JSON.stringify(n.currentTags));const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!r.ok)throw new Error(`Failed to preview PR: ${r.statusText}`);return await r.json()}async function pE(n){const e=`${zs}/generate-final-file`,t=new URLSearchParams;t.append("testName",n.testName),t.append("from",n.from),t.append("tags",JSON.stringify(n.tags)),t.append("yaml",n.yaml),t.append("events",n.events),t.append("isError",n.isError?"true":"false"),t.append("includeJson",n.includeJson?"true":"false"),t.append("includeDump",n.includeDump?"true":"false");const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!r.ok)throw new Error(`Failed to generate final file: ${r.statusText}`);return await r.json()}async function gE(n){const e=`${zs}/submit-pr`,t=new URLSearchParams;t.append("token",n.token),t.append("testId",n.testId),t.append("testName",n.testName),t.append("yaml",n.yaml),t.append("events",n.events),t.append("isError",n.isError?"true":"false"),t.append("similarTests",JSON.stringify(n.similarTests)),t.append("tags",JSON.stringify(n.tags)),t.append("from",n.from);const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!r.ok)throw new Error(`Failed to submit PR: ${r.statusText}`);return await r.json()}async function mE(n){const e=`${L1}/device/code`;new URLSearchParams;const t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:void 0});if(!t.ok)throw new Error(`Failed to request device code: ${t.statusText}`);return await t.json()}async function yE(n,e){const t=`${L1}/device/token`,r=new URLSearchParams;r.append("device_code",e);const s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(!s.ok)throw new Error(`Failed to poll for token: ${s.statusText}`);return await s.json()}let od=null,ld=null,Dy=!1;async function xE(){if(Dy)return;const[n,e,t,r,s]=await Promise.all([fetch("/refparse/prelude.js").then(a=>a.text()),fetch("/refparse/grammar.js").then(a=>a.text()),fetch("/refparse/parser.js").then(a=>a.text()),fetch("/refparse/receiver.js").then(a=>a.text()),fetch("/refparse/test-receiver.js").then(a=>a.text())]),l=eval;window.global=window,l(n),l(e),l(t),l(r),l(s),od=window.Parser,ld=window.TestReceiver,Dy=!0}async function B1(n){try{if(await xE(),!ld)return{status:1,output:"TestReceiverClass not loaded"};if(!od)return{status:1,output:"Parser not loaded"};const e=new ld,t=new od(e);return t.parse(n),{status:0,output:t.receiver.output().replace(/\n$/,"")||"(empty output)"}}catch(e){return{status:1,output:e instanceof Error?e.message:String(e)}}}function jy(n){return n.replace(/\s+(\{\}|\[\])$/mg,"").replace(/^=COMMENT .*\n?/mg,"").replace(/^[^+\-=].*\n?/gm,"").trim()}function z1(n,e,t){let r=jy(n),s=jy(e);if(t==="rustyaml"&&(s=s.replace(/<Tag\("!!", "(.*?)"\)>/g,"<tag:yaml.org,2002:$1>").replace(/<Tag\("!", "(.*?)"\)>/g,"<!$1>").replace(/<Tag\("", "!"\)>/g,"<!>").replace(/<Tag\("", "(tag:.*?)"\)>/g,"<$1>").replace(/<Tag\("", "(!.*?)"\)>/g,"<$1>"),r=r.replace(/^\+DOC ---/gm,"+DOC").replace(/^-DOC \.\.\./gm,"-DOC").replace(/^=VAL :$/gm,"=VAL :~").replace(/^\+MAP \{\}( ?)/gm,"+MAP$1").replace(/^\+SEQ \[\]( ?)/gm,"+SEQ$1"),s.match(/&1/))){let l=1,a;for(;a=r.match(/&([a-zA-Z]\S*)/);){const c=a[1];r=r.replace(new RegExp(`([&*])${c}`,"g"),`$1${l}`),l++}}if(t==="goyaml"){const l=r.split(`
`),a=s.split(`
`);l.length===a.length&&(s=a.map((h,d)=>l[d]==="+DOC"&&h==="+DOC ---"?"+DOC":h).join(`
`))}return r===s}const Rs="yaml-play-test-results-";function vE(n){try{const e=Rs+n,t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}}function wE(n,e){try{const t=Rs+n;localStorage.setItem(t,JSON.stringify(e))}catch{}}function Do(n){try{const e=Rs+n;localStorage.removeItem(e)}catch{}}function kE(n,e,t){return n?n.parserVersion===e&&n.testSuiteVersion===t:!1}function bE(){try{const n=[];for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&t.startsWith(Rs)&&n.push(t)}n.forEach(e=>localStorage.removeItem(e))}catch{}}function SE(){const n=[];try{for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);if(t&&t.startsWith(Rs)){const r=t.substring(Rs.length),s=localStorage.getItem(t);if(s){const l=JSON.parse(s);n.push({parserId:r,cache:l})}}}}catch{}return n}const F1="yaml-play-test-sort";function Ly(){try{const n=localStorage.getItem(F1);if(n)return JSON.parse(n)}catch{}return{column:"id",direction:"asc"}}function CE(n){try{localStorage.setItem(F1,JSON.stringify(n))}catch{}}function ad({isOpen:n,onClose:e,parser:t,onSelectTest:r,forceRerun:s=!1,onCompare:l,onRunAgain:a,onClearCache:c}){const[h,d]=b.useState([]),[p,m]=b.useState([]),[v,w]=b.useState(!1),[S,C]=b.useState(null),[O,N]=b.useState(0),[E,T]=b.useState(Ly),[I,R]=b.useState(!1),[L,j]=b.useState(!1),H=b.useRef(!1),W=b.useRef(!1),V=b.useRef(0),q=b.useRef(null),$=b.useRef(null),Z=b.useRef(null);b.useEffect(()=>{n&&(T(Ly()),R(!1))},[n]),b.useEffect(()=>{if(!I)return;const ne=ce=>{Z.current&&!Z.current.contains(ce.target)&&R(!1)};return document.addEventListener("mousedown",ne),()=>document.removeEventListener("mousedown",ne)},[I]);const ue=b.useCallback((ne,ce)=>{const ke=[...ne];return ke.sort((Pe,we)=>{let Ee=0;switch(ce.column){case"ok":Ee=(Pe.passed?1:0)-(we.passed?1:0);break;case"id":Ee=Pe.testId.localeCompare(we.testId);break;case"description":Ee=Pe.testName.localeCompare(we.testName);break}return ce.direction==="asc"?Ee:-Ee}),ke},[]),X=ne=>{const ce={column:ne,direction:E.column===ne&&E.direction==="asc"?"desc":"asc"};T(ce),CE(ce)},G=ne=>E.column!==ne?null:E.direction==="asc"?" ":" ",se=v?p:ue(p,E);b.useEffect(()=>{if(!n){W.current=!1,j(!1),$.current&&(clearInterval($.current),$.current=null);return}if(H.current=!1,C(null),m([]),N(0),d([]),!W.current)return W.current=!0,w(!0),j(!0),V.current=Date.now(),$.current=window.setInterval(()=>{N(Date.now()-V.current)},10),()=>{H.current=!0,$.current&&(clearInterval($.current),$.current=null)}},[n,t.id,t.version,s]),b.useEffect(()=>{if(!L||!n)return;j(!1),(async()=>{try{const ce=await j1();if(H.current){w(!1),W.current=!1,$.current&&(clearInterval($.current),$.current=null);return}d(ce.tests);const ke=vE(t.id);if(!s&&kE(ke,t.version,ce.version)){const we=ke.results.map(Ee=>{const _e=ce.tests.find(We=>We.id===Ee.testId);return{testId:Ee.testId,testName:(_e==null?void 0:_e.name)||Ee.testId,passed:Ee.passed}});m(we),w(!1),W.current=!1,$.current&&(clearInterval($.current),$.current=null);return}s&&Do(t.id);const Pe=[];for(let we=0;we<ce.tests.length&&!H.current;we++){const Ee=ce.tests[we];m(qe=>[...qe,{testId:Ee.id,testName:Ee.name,passed:!1,running:!0}]);let _e;if(t.id==="refparse"){const qe=await B1(Ee.yaml);_e={status:qe.status,output:qe.output}}else _e=await I1(t.id,Ee.yaml,t.version);if(H.current)break;let We;Ee.error?We=_e.status!==0:We=_e.status===0&&z1(Ee.expected,_e.output,t.id),m(qe=>{const fe=[...qe];return fe.length>0&&(fe[fe.length-1]={testId:Ee.id,testName:Ee.name,passed:We,running:!1}),fe}),Pe.push({testId:Ee.id,passed:We}),setTimeout(()=>{q.current&&(q.current.scrollTop=q.current.scrollHeight)},0)}if(!H.current&&Pe.length===ce.tests.length){const we=Date.now()-V.current,Ee={parserVersion:t.version,testSuiteVersion:ce.version,results:Pe,elapsedTime:we};wE(t.id,Ee)}}catch(ce){C(ce instanceof Error?ce.message:"Unknown error")}finally{$.current&&(clearInterval($.current),$.current=null),w(!1),W.current=!1,setTimeout(()=>{q.current&&(q.current.scrollTop=0)},0)}})()},[L,n,t.id,t.version,s]),b.useEffect(()=>{if(!n)return;const ne=ce=>{ce.key==="Escape"&&(I?R(!1):(H.current=!0,e())),ce.key.toUpperCase()==="C"&&!ce.ctrlKey&&!ce.metaKey&&!ce.altKey&&!v&&l&&(e(),l())};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[n,e,v,l,I]);const Q=ne=>{H.current=!0,r(ne.yaml),e()},ee=()=>{H.current=!0,e()};if(!n)return null;const J=p.filter(ne=>ne.passed&&!ne.running).length,A=p.filter(ne=>!ne.passed&&!ne.running).length,B=h.length,le=B>0?Math.round(p.length/B*100):0,pe=B>0?(J/B*100).toFixed(1):"0.0",me=ne=>{const ce=Math.floor(ne/1e3),ke=Math.floor(ne%1e3/10);return`${ce}.${ke.toString().padStart(2,"0")}s`};return x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:ee,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] flex flex-col",onClick:ne=>ne.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.name," - Test Suite"]}),x.jsx("button",{onClick:ee,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center gap-4",children:[x.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["Pass: ",J]}),x.jsxs("span",{className:"text-red-600 dark:text-red-400",children:["Fail: ",A]}),x.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Total: ",B]}),v?x.jsxs("span",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-2",children:[x.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 dark:border-blue-400 border-t-transparent rounded-full"}),me(O)," (",le,"%)"]}):O>0?x.jsxs("span",{className:"text-gray-500",children:[pe,"% passing (",me(O),")"]}):x.jsxs("span",{className:"text-gray-500",children:[pe,"% passing (cached)"]}),!v&&(a||c||l)&&x.jsxs("div",{className:"ml-auto relative",ref:Z,children:[x.jsx("button",{onClick:()=>R(!I),className:"text-gray-700 dark:text-white hover:text-gray-900 dark:hover:text-gray-300 p-1",title:"Menu",children:x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),I&&x.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[l&&x.jsxs("button",{onClick:()=>{R(!1),e(),l()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"underline",children:"C"}),"ompare Test Runs"]}),a&&x.jsx("button",{onClick:()=>{R(!1),a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Run Again"}),c&&x.jsx("button",{onClick:()=>{R(!1),c()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Clear Cache"})]})]})]}),S&&x.jsxs("div",{className:"px-4 py-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 text-sm",children:["Error: ",S]}),p.length>0&&x.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[x.jsxs("span",{className:"w-10 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>X("ok"),children:["OK",G("ok")]}),x.jsxs("span",{className:"w-20 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none font-mono",onClick:()=>X("id"),children:["ID",G("id")]}),x.jsxs("span",{className:"flex-1 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>X("description"),children:["Description",G("description")]})]}),x.jsxs("div",{ref:q,className:"flex-1 overflow-y-auto p-2 space-y-1",children:[se.map(ne=>{const ce=h.find(ke=>ke.id===ne.testId);return x.jsxs("button",{onClick:()=>ce&&Q(ce),className:`w-full text-left px-3 py-2 rounded text-sm flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${ne.running?"bg-gray-100 dark:bg-gray-700":""}`,children:[x.jsx("span",{className:"w-10 flex-shrink-0 text-center",children:ne.running?x.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 dark:border-blue-400 border-t-transparent rounded-full"}):ne.passed?x.jsx("span",{className:"text-green-600 dark:text-green-400",children:""}):x.jsx("span",{className:"text-red-600 dark:text-red-400",children:""})}),x.jsx("span",{className:"w-20 text-gray-500 dark:text-gray-400 font-mono flex-shrink-0",children:ne.testId}),x.jsx("span",{className:"flex-1 text-gray-700 dark:text-gray-300 truncate",children:ne.testName})]},ne.testId)}),p.length===0&&!v&&!S&&x.jsx("div",{className:"text-gray-500 text-center py-4",children:"No test results available"}),p.length===0&&v&&x.jsx("div",{className:"text-gray-500 text-center py-4",children:"Loading test suite..."})]})]})})}const Ts=[{id:"refparse",name:"Reference Parser",version:"f00319457419feacddf743d75eb317dacf5caf4b",repo:"https://github.com/yaml/yaml-reference-parser",language:"JavaScript",isJavaScript:!0},{id:"npmyaml",name:"eemeli/yaml",version:"2.8.2",repo:"https://github.com/eemeli/yaml",language:"JavaScript",isJavaScript:!0},{id:"libyaml",name:"libyaml",version:"0.2.5",repo:"https://github.com/yaml/libyaml",language:"C"},{id:"pyyaml",name:"PyYAML",version:"6.0.3",language:"Python"},{id:"ruamel",name:"ruamel.yaml",version:"0.18.17",language:"Python"},{id:"goyaml",name:"go-yaml",version:"main",repo:"https://github.com/pantoniou/yaml",language:"Go"},{id:"libfyaml",name:"libfyaml",version:"0.9.1",repo:"https://github.com/pantoniou/libfyaml",language:"C"},{id:"rapid",name:"rapidyaml",version:"0.10.0",repo:"https://github.com/biojppm/rapidyaml",language:"C++"},{id:"rustyaml",name:"serde-yaml",version:"0.9.34",repo:"https://github.com/dtolnay/serde-yaml",language:"Rust"},{id:"snake",name:"SnakeYAML",version:"2.5",repo:"https://bitbucket.org/snakeyaml/snakeyaml",language:"Java"},{id:"snakeeng",name:"SnakeYAML Engine",version:"3.0.1",repo:"https://bitbucket.org/snakeyaml/snakeyaml-engine",language:"Java"},{id:"dotnet",name:"YamlDotNet",version:"16.3.0",repo:"https://github.com/aaubry/YamlDotNet",language:"C#"},{id:"luayaml",name:"lyaml",version:"6.2.8",repo:"https://github.com/gvvaughan/lyaml",language:"Lua"},{id:"nimyaml",name:"NimYAML",version:"2.2.1",repo:"https://github.com/flyx/NimYAML",language:"Nim"},{id:"ppyaml",name:"YAML::PP",version:"0.039",language:"Perl"},{id:"hsyaml",name:"HsYAML",version:"0.2.1.5",repo:"https://github.com/haskell-hvr/HsYAML",language:"Haskell"},{id:"refhs",name:"yamlreference",version:"bf471f804ccd014fcdded3a8c74c338df8f33c85",repo:"https://github.com/orenbenkiki/yamlreference",language:"Haskell"}],Er=n=>Ts.find(e=>e.id===n),OE=()=>["refparse","pyyaml","libyaml","goyaml"],_1="yaml-play-compare-sort";function PE(n){const e=Math.floor(n/1e3),t=Math.floor(n%1e3/10);return`${e}.${t.toString().padStart(2,"0")}s`}function Iy(){try{const n=localStorage.getItem(_1);if(n)return JSON.parse(n)}catch{}return{column:"percent",direction:"desc"}}function NE(n){try{localStorage.setItem(_1,JSON.stringify(n))}catch{}}function H1({isOpen:n,onClose:e,onSelectParser:t}){const[r,s]=b.useState([]),[l,a]=b.useState(Iy);b.useEffect(()=>{n&&a(Iy())},[n]);const c=b.useCallback((p,m)=>{const v=[...p];return v.sort((w,S)=>{let C=0;switch(m.column){case"parserName":C=w.parserName.localeCompare(S.parserName);break;case"version":C=w.version.localeCompare(S.version);break;case"passed":C=w.passed-S.passed;break;case"failed":C=w.failed-S.failed;break;case"total":C=w.total-S.total;break;case"percent":C=w.percentNum-S.percentNum;break;case"time":C=(w.elapsedTime??0)-(S.elapsedTime??0);break}return m.direction==="asc"?C:-C}),v},[]);b.useEffect(()=>{if(!n)return;const m=SE().map(v=>{const w=Er(v.parserId),S=v.cache.results.filter(T=>T.passed).length,C=v.cache.results.length,O=C-S,N=C>0?S/C*100:0,E=N.toFixed(1);return{parserId:v.parserId,parserName:(w==null?void 0:w.name)||v.parserId,passed:S,failed:O,total:C,percent:E,percentNum:N,version:v.cache.parserVersion,elapsedTime:v.cache.elapsedTime}});s(c(m,l))},[n,l,c]);const h=p=>{const m={column:p,direction:l.column===p&&l.direction==="asc"?"desc":"asc"};a(m),NE(m)},d=p=>l.column!==p?null:l.direction==="asc"?" ":" ";return b.useEffect(()=>{if(!n)return;const p=m=>{m.key==="Escape"&&e()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] flex flex-col",onClick:p=>p.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Compare Test Runs"}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[x.jsxs("table",{className:"w-full text-sm",children:[x.jsx("thead",{children:x.jsxs("tr",{className:"text-left text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:[x.jsxs("th",{className:"pb-2 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("parserName"),children:["Parser",d("parserName")]}),x.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("version"),children:["Version",d("version")]}),x.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("passed"),children:["Pass",d("passed")]}),x.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("failed"),children:["Fail",d("failed")]}),x.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("total"),children:["Total",d("total")]}),x.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("percent"),children:["%",d("percent")]}),x.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("time"),children:["Time",d("time")]})]})}),x.jsx("tbody",{children:r.map(p=>x.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>{t(p.parserId),e()},children:[x.jsx("td",{className:"py-2 text-gray-900 dark:text-white",children:p.parserName}),x.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400 font-mono text-xs",children:p.version}),x.jsx("td",{className:"py-2 text-right text-green-600 dark:text-green-400",children:p.passed}),x.jsx("td",{className:"py-2 text-right text-red-600 dark:text-red-400",children:p.failed}),x.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400",children:p.total}),x.jsxs("td",{className:"py-2 text-right text-gray-900 dark:text-white font-semibold",children:[p.percent,"%"]}),x.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400 font-mono text-xs",children:p.elapsedTime!=null?PE(p.elapsedTime):"-"})]},p.parserId))})]}),r.length===0&&x.jsx("div",{className:"text-gray-500 text-center py-8",children:"No cached test results available"})]})]})}):null}function AE(n){return["Failed to fetch","NetworkError","network error","ERR_CONNECTION_REFUSED","ECONNREFUSED","fetch failed","Load failed","HTTP 500","HTTP 502","HTTP 503","HTTP 504","Internal Server Error"].some(t=>n.toLowerCase().includes(t.toLowerCase()))}function rf({parser:n,result:e,onClose:t,onAddPane:r,isDraggable:s=!0,onSetYamlInput:l,showTestSuite:a=!0,isSelected:c=!1,onToggleSelection:h}){const[d,p]=b.useState(!1),[m,v]=b.useState(!1),[w,S]=b.useState(!1),[C,O]=b.useState(0),[N,E]=b.useState(!1),[T,I]=b.useState(null),[R,L]=b.useState(!1),[j,H]=b.useState(0),W=b.useCallback(()=>{Do(n.id),S(!0),O(G=>G+1)},[n.id]),V=b.useCallback(()=>{Do(n.id),v(!1)},[n.id]),q=b.useCallback(()=>{T&&(Do(T),L(!0),H(G=>G+1))},[T]),$=b.useCallback(()=>{T&&(Do(T),I(null))},[T]),Z=n.id!=="refparse",ue=Z&&(e==null?void 0:e.versionMismatch),X=Z&&!ue&&(e==null?void 0:e.status)===-1&&(e==null?void 0:e.output)&&AE(e.output);return x.jsxs("div",{className:"flex flex-col h-full min-h-[200px] bg-gray-100 dark:bg-gray-900",children:[x.jsx(cE,{parser:n,agrees:e==null?void 0:e.agrees,loading:e==null?void 0:e.loading,onClose:t,onAddPane:r,isDraggable:s,onInfoClick:()=>p(!0),onRunTestSuite:()=>{S(!1),v(!0)},showTestSuite:a,output:e==null?void 0:e.output,parseSuccess:e==null?void 0:e.matches,isSelected:c,onToggleSelection:h}),x.jsx(hE,{isOpen:d,onClose:()=>p(!1),parser:n}),x.jsx(ad,{isOpen:m,onClose:()=>v(!1),parser:n,onSelectTest:G=>l==null?void 0:l(G),forceRerun:w,onCompare:()=>E(!0),onRunAgain:W,onClearCache:V},C),x.jsx(H1,{isOpen:N,onClose:()=>E(!1),onSelectParser:G=>I(G)}),T&&Er(T)&&x.jsx(ad,{isOpen:!0,onClose:()=>{I(null),L(!1)},parser:Er(T),onSelectTest:G=>l==null?void 0:l(G),forceRerun:R,onCompare:()=>{I(null),E(!0)},onRunAgain:q,onClearCache:$},`view-${T}-${j}`),x.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-900 overflow-auto",children:e!=null&&e.error?x.jsxs("pre",{className:"p-3 text-red-600 dark:text-red-400 text-sm font-mono whitespace-pre-wrap",children:["Error: ",e.error]}):ue?x.jsxs("div",{className:"p-3 text-sm",children:[x.jsxs("p",{className:"text-yellow-600 dark:text-yellow-400 mb-2",children:["Wrong sandbox version (",e.versionMismatch.found,") found. Requires ",e.versionMismatch.required,"."]}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Click the "',x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Setup"}),'" button for instructions.']})]}):X?x.jsxs("div",{className:"p-3 text-sm",children:[x.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:"Can't connect to a local YAML parser sandbox server."}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Click the "',x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Setup"}),'" button for instructions.']})]}):e!=null&&e.loading?x.jsx("div",{className:"p-3 text-gray-500 text-sm",children:"Running parser..."}):x.jsx("pre",{className:"p-3 text-gray-800 dark:text-gray-200 text-sm font-mono whitespace-pre-wrap",children:(e==null?void 0:e.output)||"No output yet"})})]})}function EE({total:n,disagreeing:e,disagreeingNames:t,loading:r,sandboxAvailable:s=!0,onSandboxSetup:l}){if(!s)return x.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2 flex items-center justify-between",children:[x.jsxs("span",{className:"text-gray-900 dark:text-white font-semibold",children:["Can't connect to sandbox server. Click"," ",x.jsx("button",{onClick:l,className:"text-yellow-600 dark:text-yellow-400 underline hover:no-underline",children:"Setup"}),"."]}),x.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",title:"View on GitHub",children:x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.115 2.504.337 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})})})]});if(r)return x.jsx("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2",children:x.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-semibold",children:"Running parsers..."})});const a=e===0;return x.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2 flex items-center justify-between",children:[a?x.jsxs("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:["All ",n," parsers agree with the Reference Parser"]}):x.jsxs("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:[e,"/",n," parsers disagree with the Reference Parser: ",t.join(", ")]}),x.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",title:"View on GitHub",children:x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.115 2.504.337 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})})})]})}const ME=[{id:"light",label:"Light"},{id:"dark",label:"Dark"}],RE=[{id:"monaco",label:"Monaco"},{id:"codemirror",label:"CodeMirror"}];function TE({isOpen:n,onClose:e,colorScheme:t,onColorSchemeChange:r,editorType:s,onEditorTypeChange:l}){return b.useEffect(()=>{if(!n)return;const a=c=>{c.key==="Escape"&&e()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full mx-4",onClick:a=>a.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Options"}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsxs("div",{className:"p-4",children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Editor"}),x.jsx("div",{className:"flex gap-2 mb-4",children:RE.map(a=>x.jsx("button",{onClick:()=>l(a.id),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${s===a.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:a.label},a.id))}),x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Mode"}),x.jsx("div",{className:"flex gap-2",children:ME.map(a=>x.jsx("button",{onClick:()=>r(a.id),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${t===a.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:a.label},a.id))})]})]})}):null}const Wd=fE(),By=`docker run --rm -d --name yaml-play -p 7481:7481 yamlio/yaml-play-sandbox:${Wd} 7481`,zy=`docker run --rm -d --name yaml-play --network host yamlio/yaml-play-sandbox:${Wd} 7481`;function DE({isOpen:n,onClose:e}){const[t,r]=b.useState(!1),[s,l]=b.useState(!1),a=async(c,h)=>{try{await navigator.clipboard.writeText(c),h(!0),setTimeout(()=>h(!1),2e3)}catch{const d=document.createElement("textarea");d.value=c,document.body.appendChild(d),d.select(),document.execCommand("copy"),document.body.removeChild(d),h(!0),setTimeout(()=>h(!1),2e3)}};return b.useEffect(()=>{if(!n)return;const c=h=>{h.key==="Escape"&&e()};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-hidden",onClick:c=>c.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Sandbox Setup"}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh] space-y-6",children:[x.jsxs("section",{children:[x.jsxs("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:["Start the Sandbox Server (version ",Wd,")"]}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"These parsers run in a Docker container that you need to start on your machine. If you see connection errors, start the sandbox by running this command in a terminal:"}),x.jsxs("div",{className:"flex gap-2 items-start",children:[x.jsx("pre",{className:"flex-1 bg-gray-100 dark:bg-gray-900 p-3 rounded text-sm text-green-700 dark:text-green-400 font-mono overflow-x-auto",children:By}),x.jsx("button",{onClick:()=>a(By,r),className:"flex-shrink-0 p-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",title:t?"Copied!":"Copy to clipboard",children:t?x.jsx("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):x.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),x.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-3 mb-2",children:"The Docker command above does not work for some users. If it does not work for you then try this command instead:"}),x.jsxs("div",{className:"flex gap-2 items-start",children:[x.jsx("pre",{className:"flex-1 bg-gray-100 dark:bg-gray-900 p-3 rounded text-sm text-green-700 dark:text-green-400 font-mono overflow-x-auto",children:zy}),x.jsx("button",{onClick:()=>a(zy,l),className:"flex-shrink-0 p-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",title:s?"Copied!":"Copy to clipboard",children:s?x.jsx("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):x.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),x.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-3",children:"Note: If a different version of the sandbox server Docker container is already running, you'll need to kill that first."})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"HTTPS Certificate (if needed)"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"If you are still getting connection errors, you may need to accept the unsigned HTTPS certificate:"}),x.jsxs("ol",{className:"text-gray-600 dark:text-gray-300 text-sm list-decimal list-inside space-y-1",children:[x.jsxs("li",{children:["Click here:"," ",x.jsx("a",{href:"https://localhost:7481",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 underline",children:"https://localhost:7481"})," ","(opens in a new tab)"]}),x.jsx("li",{children:"Accept the security warning / proceed anyway"}),x.jsx("li",{children:"Return to this page and refresh"})]})]})]})]})}):null}function jE({onHelp:n,onOptions:e,onAllPanes:t,onUnselectAll:r,onTestFormat:s,onKeyboardShortcuts:l,onSandboxSetup:a,onAddTokens:c,onFactoryReset:h,hasTokens:d}){const[p,m]=b.useState(!1),v=b.useRef(null);return b.useEffect(()=>{if(!p)return;const w=C=>{v.current&&!v.current.contains(C.target)&&m(!1)},S=C=>{C.key==="Escape"&&m(!1)};return document.addEventListener("mousedown",w),document.addEventListener("keydown",S),()=>{document.removeEventListener("mousedown",w),document.removeEventListener("keydown",S)}},[p]),x.jsxs("div",{className:"relative",ref:v,children:[x.jsx("button",{onClick:()=>m(!p),className:"text-gray-700 dark:text-white hover:text-gray-900 dark:hover:text-gray-300 p-2",title:"Menu",children:x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),p&&x.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[x.jsxs("button",{onClick:()=>{m(!1),n()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"H"}),"elp"]}),x.jsxs("button",{onClick:()=>{m(!1),l()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"K"}),"eyboard Shortcuts"]}),x.jsxs("button",{onClick:()=>{m(!1),e()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"O"}),"ptions"]}),x.jsxs("button",{onClick:()=>{m(!1),t()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"A"}),"ll Panes"]}),x.jsxs("button",{onClick:()=>{m(!1),r()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"U"}),"nselect All"]}),d&&x.jsxs("button",{onClick:()=>{m(!1),s()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"T"}),"est Suite PR"]}),x.jsxs("button",{onClick:()=>{m(!1),c()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"G"}),"itHub Setup"]}),x.jsx("button",{onClick:()=>{m(!1),a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Sandbox Setup"}),x.jsx("button",{onClick:()=>{m(!1),h()},className:"w-full text-left px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Factory Reset"})]})]})}function LE({isOpen:n,onClose:e}){return b.useEffect(()=>{if(!n)return;const t=r=>{r.key==="Escape"&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[85vh] overflow-hidden flex flex-col",onClick:t=>t.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Help"}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsxs("div",{className:"p-4 space-y-5 overflow-y-auto",children:[x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Overview"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["The ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"YAML Parser Playground"})," lets you compare how 17+ different YAML parser implementations handle the same input. Enter YAML in the input editor on the left, and see the parsed output from each parser in the panes on the right."]})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Understanding the Colors"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"Each output pane has a colored header showing the parse status:"}),x.jsxs("div",{className:"space-y-2 text-sm",children:[x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"inline-block w-4 h-4 bg-green-300 border-4 border-green-300 rounded flex-shrink-0 mt-0.5"}),x.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Green:"})," The YAML parsed successfully (no errors)"]})]}),x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"inline-block w-4 h-4 bg-red-300 border-4 border-red-300 rounded flex-shrink-0 mt-0.5"}),x.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Red:"})," The parser returned an error"]})]}),x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"inline-block w-4 h-4 bg-green-300 border-4 border-red-600 rounded flex-shrink-0 mt-0.5"}),x.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Red border:"})," Output differs from the Reference Parser"]})]})]}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mt-2",children:"A red border indicates disagreement  either the output differs from the Reference Parser, or one parser succeeded while the other failed."})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"The Reference Parser"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["The ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Reference Parser"})," pane shows output from the official YAML Reference Parser, which aims to implement the YAML 1.2 specification exactly. All other parsers are compared against it. The Reference Parser runs directly in your browser and doesn't require the sandbox."]})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Output Format"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:['The output is a DSL (domain-specific language) representing YAML parser "events"  the internal data structures parsers create when processing YAML. This is the same format used by the'," ",x.jsx("a",{href:"https://github.com/yaml/yaml-test-suite",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"YAML Test Suite"}),'. A "parser" is just one stage in a YAML "loader"  it converts text to events, while later stages convert events to native data structures.']})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Running Other Parsers"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Most parsers (Python, Go, Ruby, Java, etc.) require a local Docker sandbox to run. Click the ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Setup"})," button in the header for instructions on starting the sandbox container. Without it, only the JavaScript-based Reference Parser will work."]})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"YAML Test Suite"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:["Use the ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Search Test Suite"})," feature (in the input pane menu) to load test cases from the official YAML Test Suite. You can also run the entire test suite against any parser by clicking its hamburger menu and selecting ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Test Suite"}),"."]}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm mt-3 mb-2",children:[x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Contributing Tests:"})," You can submit new test cases directly to the yaml-test-suite repository. Press"," ",x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"T"})," ","or use the menu to open ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Test Format"}),". Choose between ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Manual Mode"})," (fill in test name and tags yourself) or use ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"GitHub Models"})," to AI-generate these fields. You'll select applicable tags from a list, review similar tests to avoid duplicates, and create a pull request with one click."]}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:x.jsxs("em",{children:["Note: Test submission requires a GitHub token for PR creation. Optionally, select a model from"," ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"API Tokens"})," in the menu to enable AI-powered test naming via GitHub Models (uses your GitHub token, no additional API key needed)."]})})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Sharing URLs"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Your YAML input is automatically encoded in the URL. Copy and share the URL to let others see exactly what you're working on  great for bug reports and discussions about YAML edge cases."})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Keyboard Shortcuts"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Press ",x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"K"})," to see all keyboard shortcuts. Highlights include:"]}),x.jsxs("ul",{className:"text-gray-600 dark:text-gray-300 text-sm mt-2 space-y-1 list-disc list-inside",children:[x.jsxs("li",{children:[x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"I"}),"  Focus the input editor"]}),x.jsxs("li",{children:[x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"A"})," / ",x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"N"}),"  Show all / no panes"]}),x.jsxs("li",{children:[x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"D"}),"  Show only differing panes"]}),x.jsxs("li",{children:[x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"O"})," / ",x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"P"}),"  Options / Parser Panes"]})]})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Organizing Panes"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Drag parser panes by their headers to reorder them. Use"," ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Parser Panes"})," (press P) to show/hide specific parsers, or ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Options"})," (press O) to change the editor type or color scheme."]})]})]})]})}):null}function IE({isOpen:n,onClose:e}){return b.useEffect(()=>{if(!n)return;const t=r=>{r.key==="Escape"&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4",onClick:t=>t.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Keyboard Shortcuts"}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsx("div",{className:"p-4",children:x.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-sm",children:[x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"Esc"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Unfocus input pane / Close modal"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"I"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Focus input pane"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"\\\\\\"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Clear input and focus"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"A"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show all panes"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"D"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Select differing panes"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"S"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show your selected panes"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"U"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Unselect all (clear all checkboxes)"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"C"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Compare Test Runs"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"O"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Open Options"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"H"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show help"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"K"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show keyboard shortcuts"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"G"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"GitHub Setup"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"T"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Test Suite PR (submit new test)"})]})})]})}):null}const Qd="github-token",$d="github-user",Fy="Ov23liRrgge8JKovPTxm";function BE(n){localStorage.setItem(Qd,n)}function ys(){return localStorage.getItem(Qd)}function _y(){localStorage.removeItem(Qd),localStorage.removeItem($d)}function Hy(n){localStorage.setItem($d,JSON.stringify(n))}function zE(){const n=localStorage.getItem($d);if(!n)return null;try{return JSON.parse(n)}catch{return null}}async function Vy(n){const e=await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${n}`,Accept:"application/vnd.github.v3+json"}});if(!e.ok)throw new Error(`Failed to fetch user info: ${e.statusText}`);const t=await e.json();return{login:t.login,avatar_url:t.avatar_url,name:t.name}}function V1(n=640){const[e,t]=b.useState(typeof window<"u"?window.innerWidth<n:!1);return b.useEffect(()=>{const r=()=>t(window.innerWidth<n);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[n]),e}function FE(){const[n,e]=b.useState(typeof window<"u"?window.innerWidth>window.innerHeight:!1);return b.useEffect(()=>{const t=()=>e(window.innerWidth>window.innerHeight);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n}function _E({isOpen:n,onClose:e,yaml:t,events:r,isError:s,onConfigureModel:l}){const a=V1(640),[c,h]=b.useState("generating"),[d,p]=b.useState(""),[m,v]=b.useState(""),[w,S]=b.useState([]),[C,O]=b.useState(""),[N,E]=b.useState(""),[T,I]=b.useState([]),[R,L]=b.useState([]),[j,H]=b.useState(""),[W,V]=b.useState([]),[q,$]=b.useState(!1),[Z,ue]=b.useState(""),[X,G]=b.useState(""),[se,Q]=b.useState(!1),[ee,J]=b.useState(""),[A,B]=b.useState(!1),[le,pe]=b.useState(!1),[me,ne]=b.useState(!1),[ce,ke]=b.useState(!1),Pe=async()=>{try{await navigator.clipboard.writeText(ee),B(!0),setTimeout(()=>B(!1),2e3)}catch{const fe=document.createElement("textarea");fe.value=ee,document.body.appendChild(fe),fe.select(),document.execCommand("copy"),document.body.removeChild(fe),B(!0),setTimeout(()=>B(!1),2e3)}},we=b.useCallback(async()=>{if(!m.trim()){J(""),ke(!1);return}ke(!0);try{const fe=await pE({testName:m,from:j,tags:R,yaml:t,events:r,isError:s,includeJson:le,includeDump:me});J(fe.finalFileContent)}catch(fe){console.error("Failed to regenerate final file:",fe)}finally{ke(!1)}},[m,j,R,t,r,s,le,me]),Ee=b.useMemo(()=>{let fe;return()=>{clearTimeout(fe),fe=setTimeout(we,300)}},[we]),_e=async()=>{Q(!0);try{const fe=localStorage.getItem("github-model")||"",Me=ys()||"",Je=await Ty({yaml:t,events:r,isError:s,model:fe,githubToken:Me,testName:m,currentTags:R});S(Je.similarTests||[])}catch(fe){console.error("Failed to regenerate similar tests:",fe)}finally{Q(!1)}};b.useEffect(()=>{if(!n)return;h("generating"),p(""),v(""),S([]),O(""),E(""),I([]),L([]),H(""),V([]),$(!1),ue(""),(async()=>{try{const Me=localStorage.getItem("github-model")||"";let Je=localStorage.getItem("github-model-name")||"";if(Me&&!Je){const Ge=ys()||"";if(Ge)try{const Gt=(await Vd(Ge)).find(cr=>cr.id===Me);Gt&&(Je=`${Gt.publisher}/${Gt.name}`,localStorage.setItem("github-model-name",Je))}catch(wt){console.error("Failed to fetch model name:",wt)}}ue(Je);const En=ys()||"",ht=await Ty({yaml:t,events:r,isError:s,model:Me,githubToken:En});p(ht.testId),v(ht.testName||""),S(ht.similarTests||[]),I(ht.availableTags||[]),L(ht.tags||[]),G(ht.llmError||""),ht.githubUsername&&H(`https://github.com/${ht.githubUsername}`),ht.finalFileContent&&J(ht.finalFileContent),h("preview")}catch(Me){E(Me instanceof Error?Me.message:"Failed to generate preview"),h("error")}})()},[n,t,r,s]),b.useEffect(()=>{c==="preview"&&m.trim()&&Ee()},[m,R,le,me,c,Ee]);const We=(fe,Me)=>{const Je=Me?[...R,fe]:R.filter(En=>En!==fe);L(Je)};b.useEffect(()=>{const fe=setTimeout(()=>{if(c==="preview"){const Me=R.filter(Je=>!T.includes(Je));V(Me)}},1e3);return()=>clearTimeout(fe)},[R,T,c]);const qe=async()=>{const fe=ys();if(!fe){E("No GitHub token found"),h("error");return}if(!m.trim()){E("Test name is required"),h("error");return}if(R.length===0){E("At least one tag must be selected"),h("error");return}h("submitting");try{const Me=await gE({token:fe,testId:d,testName:m,yaml:t,events:r,isError:s,similarTests:w,tags:R,from:j});Me.success&&Me.prUrl?(O(Me.prUrl),h("success")):(E(Me.error||"Failed to create PR"),h("error"))}catch(Me){E(Me instanceof Error?Me.message:"Failed to submit PR"),h("error")}};return b.useEffect(()=>{if(!n)return;const fe=Me=>{Me.key==="Escape"&&e()};return document.addEventListener("keydown",fe),()=>document.removeEventListener("keydown",fe)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 h-[90vh] overflow-hidden flex flex-col",onClick:fe=>fe.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Submit to yaml-test-suite"}),Z&&l&&x.jsxs("button",{onClick:l,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:["using ",Z]}),l&&!Z&&x.jsx("button",{onClick:l,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Configure AI model"})]}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[c==="generating"&&x.jsxs("div",{className:"text-center py-8",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Generating new test ID, name and tags..."})]}),c==="preview"&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[x.jsx("span",{children:"Test ID:"}),x.jsx("span",{className:"font-mono font-bold text-gray-900 dark:text-white",children:d})]}),X&&x.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded p-3",children:[x.jsxs("p",{className:"text-xs text-red-800 dark:text-red-200 mb-2",children:[x.jsx("strong",{children:"AI Error:"})," ",X.split(/(\(https?:\/\/[^)]+\))/).map((fe,Me)=>{const Je=fe.match(/\((https?:\/\/[^)]+)\)/);return Je?x.jsxs("span",{children:["(",x.jsx("a",{href:Je[1],target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:Je[1]}),")"]},Me):fe})]}),x.jsxs("ul",{className:"text-xs text-red-700 dark:text-red-300 list-disc list-inside space-y-1",children:[x.jsx("li",{children:"Try 'docker logs yaml-play' or the browser console for more error info."}),x.jsx("li",{children:"You might try a different model or just try this one again."}),x.jsx("li",{children:"Otherwise, just fill in the test name and tags manually."})]})]}),!X&&!localStorage.getItem("github-model")&&l&&x.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded p-3",children:x.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[x.jsx("strong",{children:"Tip:"})," Enable AI-assisted test naming by"," ",x.jsx("button",{onClick:l,className:"text-blue-600 dark:text-blue-400 hover:underline font-semibold",children:"configuring a GitHub model"}),". Otherwise, fill in the test name and tags manually."]})}),x.jsxs("div",{children:[x.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Test Name ",!m.trim()&&x.jsx("span",{className:"text-red-600",children:"*"})]}),x.jsx("input",{type:"text",value:m,onChange:fe=>v(fe.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Multiline plain scalar in flow sequence"})]}),x.jsxs("div",{className:"relative",children:[x.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Tags ",R.length===0&&x.jsx("span",{className:"text-red-600",children:"*"}),R.length>0&&x.jsxs("span",{className:"text-gray-500 font-normal ml-2",children:["(",R.length," selected)"]})]}),x.jsxs("button",{type:"button",onClick:()=>$(!q),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-left text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center justify-between",children:[x.jsx("span",{className:"truncate",children:R.length>0?R.join(", "):"Select tags..."}),x.jsx("svg",{className:`w-4 h-4 transition-transform ${q?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),q&&x.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-lg max-h-48 overflow-y-auto",children:T.map(fe=>x.jsxs("label",{className:"flex items-center px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:R.includes(fe),onChange:Me=>We(fe,Me.target.checked),className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500 mr-2"}),x.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:fe})]},fe))})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("label",{className:`flex items-center ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[x.jsx("input",{type:"checkbox",checked:le,onChange:fe=>pe(fe.target.checked),disabled:s,className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500 mr-2 disabled:cursor-not-allowed"}),x.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include 'json' section"})]}),x.jsxs("label",{className:`flex items-center ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[x.jsx("input",{type:"checkbox",checked:me,onChange:fe=>ne(fe.target.checked),disabled:s,className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500 mr-2 disabled:cursor-not-allowed"}),x.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include 'dump' section (canonical YAML)"})]})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-1",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Final File Content"}),ce&&x.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[x.jsxs("svg",{className:"animate-spin h-3 w-3",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]})]}),x.jsx("button",{onClick:Pe,disabled:!ee,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:A?x.jsxs(x.Fragment,{children:[x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):x.jsxs(x.Fragment,{children:[x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy to Clipboard"]})})]}),x.jsx("pre",{className:"w-full h-[20rem] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 font-mono text-sm overflow-auto whitespace-pre",children:ee||"Enter a test name to see the final file content..."}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This is the exact file that will be submitted to yaml-test-suite."})]}),w.length>0&&x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Potentially Similar Existing Tests"}),x.jsx("button",{onClick:_e,disabled:se,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline disabled:opacity-50 disabled:cursor-not-allowed",children:se?"Searching...":"Search Again"})]}),x.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-3 space-y-2",children:[x.jsx("p",{className:"text-xs text-yellow-800 dark:text-yellow-200 mb-2",children:"The following tests may already cover similar features:"}),x.jsx("ul",{className:"space-y-1.5",children:w.map(fe=>x.jsx("li",{children:x.jsxs("a",{href:fe.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline font-mono flex items-start",children:[x.jsxs("span",{className:"font-bold mr-2",children:[fe.id,":"]}),x.jsx("span",{className:"flex-1",children:fe.name})]})},fe.id))})]})]})]}),c==="submitting"&&x.jsxs("div",{className:"text-center py-8",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Creating pull request..."})]}),c==="success"&&x.jsxs("div",{className:"text-center py-8 space-y-4",children:[x.jsx("div",{className:"text-green-600 dark:text-green-400 text-5xl",children:""}),x.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"PR Created Successfully!"}),x.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:C})]}),c==="error"&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"p-4 bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 rounded",children:[x.jsx("p",{className:"font-semibold mb-2",children:"Error"}),x.jsx("p",{className:"text-sm",children:N})]}),x.jsx("button",{onClick:e,className:"w-full px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded transition-colors",children:"Close"})]})]}),c==="preview"&&!a&&x.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex-shrink-0",children:[(!m.trim()||R.length===0||W.length>0)&&x.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 text-center mb-2",children:W.length>0?`Invalid tags: ${W.join(", ")}`:"Please fill in test name and select at least one tag"}),x.jsx("button",{onClick:qe,disabled:!m.trim()||R.length===0||W.length>0,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded transition-colors",children:"Submit PR"})]})]})}):null}function HE({auth:n}){const[e,t]=b.useState(null),[r,s]=b.useState(!1),l=async()=>{const c=await n.login();c&&t(c)};b.useEffect(()=>{e&&!n.isAuthenticated&&n.waitForAuth(e.deviceCode,e.interval)},[e,n]);const a=async()=>{e&&(await navigator.clipboard.writeText(e.userCode),s(!0),setTimeout(()=>s(!1),2e3))};return!n.isAuthenticated&&!n.isLoading&&!e?x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"flex items-center justify-between",children:x.jsx("span",{className:"text-md font-semibold text-gray-900 dark:text-white",children:"GitHub Authentication"})}),x.jsxs("div",{children:[x.jsxs("button",{onClick:l,className:"w-full px-4 py-3 bg-gray-900 dark:bg-gray-700 hover:bg-gray-800 dark:hover:bg-gray-600 text-white rounded transition-colors flex items-center justify-center gap-2",children:[x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.477 0 10c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0110 4.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C17.137 18.165 20 14.418 20 10c0-5.523-4.477-10-10-10z",clipRule:"evenodd"})}),"Sign in with GitHub"]}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Enables PR submission to yaml-test-suite. Uses OAuth Device Flow - no password required."})]}),n.error&&x.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:n.error})]}):e&&!n.isAuthenticated?x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"flex items-center justify-between",children:x.jsx("span",{className:"text-md font-semibold text-gray-900 dark:text-white",children:"Complete GitHub Authorization"})}),x.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded p-4 space-y-3",children:[x.jsx("p",{className:"text-sm text-gray-900 dark:text-white font-medium",children:'Copy this code, then click "Open GitHhub":'}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("code",{className:"flex-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded px-4 py-3 text-2xl font-mono font-bold text-center text-gray-900 dark:text-white tracking-wider",children:e.userCode}),x.jsx("button",{onClick:a,className:"px-3 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors",title:"Copy code",children:r?"":""})]}),x.jsx("a",{href:e.verificationUri,target:"_blank",rel:"noopener noreferrer",className:"block w-full px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-center rounded transition-colors",children:"Open GitHub "}),x.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Waiting for authorization... This page will update automatically."})]}),n.error&&x.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:n.error}),x.jsx("button",{onClick:()=>t(null),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancel"})]}):n.isAuthenticated&&n.user?x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-md font-semibold text-gray-900 dark:text-white",children:"GitHub Authentication"}),x.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:" Signed in"})]}),x.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-700",children:[x.jsx("img",{src:n.user.avatar_url,alt:n.user.login,className:"w-10 h-10 rounded-full"}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.user.name||n.user.login}),x.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["@",n.user.login]})]}),x.jsx("button",{onClick:n.logout,className:"px-3 py-1.5 text-sm bg-red-600 hover:bg-red-500 text-white rounded transition-colors",children:"Sign out"})]})]}):x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"flex items-center justify-between",children:x.jsx("span",{className:"text-md font-semibold text-gray-900 dark:text-white",children:"GitHub Authentication"})}),x.jsx("div",{className:"flex items-center justify-center py-8",children:x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})}const sf="github-model";function VE({isOpen:n,onClose:e,githubAuth:t}){const[r,s]=b.useState(""),[l,a]=b.useState([]),[c,h]=b.useState(!1);b.useEffect(()=>{if(!n)return;const p=localStorage.getItem(sf)||"";s(p);const m=ys();m&&(h(!0),Vd(m).then(v=>{if(a(v),h(!1),!p&&v.length>0){const w=v.find(S=>S.name==="Llama-3.3-70B-Instruct");w&&d(w.id)}}).catch(()=>{h(!1)}))},[n]);const d=p=>{if(s(p),p){localStorage.setItem(sf,p);const m=l.find(v=>v.id===p);m&&localStorage.setItem("github-model-name",`${m.publisher}/${m.name}`)}else localStorage.removeItem(sf),localStorage.removeItem("github-model-name")};return b.useEffect(()=>{if(!n)return;const p=m=>{m.key==="Escape"&&e()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",onClick:p=>p.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"GitHub Setup"}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsx("div",{className:"px-4 pt-4 pb-2",children:x.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Login to GitHub with oauth if you want to submit new"," ",x.jsx("a",{href:"https://github.com/yaml/yaml-test-suite",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline font-semibold",children:"YAML Test Suite"})," ","test cases. This will provide an internal token that allows you to submit pull requests with a single click. You can optionally select an AI model to suggest test names, tags and more via"," ",x.jsx("a",{href:"https://github.com/marketplace/models",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline font-semibold",children:"GitHub Models"}),". All settings are stored locally in your browser only."]})}),x.jsxs("div",{className:"p-4 space-y-6",children:[x.jsx(HE,{auth:t}),x.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("a",{href:"https://github.com/marketplace/models",target:"_blank",rel:"noopener noreferrer",className:"text-md font-semibold text-blue-600 dark:text-blue-400 hover:underline",children:"GitHub Models (AI Features)"}),r&&x.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:" Selected"})]}),x.jsxs("div",{children:[x.jsxs("select",{id:"github-model",value:r,onChange:p=>d(p.target.value),disabled:c||!t.isAuthenticated,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[x.jsx("option",{value:"",children:"None (Manual Mode)"}),c&&x.jsx("option",{disabled:!0,children:"Loading models..."}),!c&&l.map(p=>{const v=["OpenAI GPT-4o mini","Llama-3.3-70B-Instruct","DeepSeek-R1"].includes(p.name);return x.jsxs("option",{value:p.id,children:[p.publisher,"/",p.name,v?" (free)":""]},p.id)})]}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t.isAuthenticated?"Select a model for AI-powered test naming, or choose Manual Mode to fill in fields yourself. Uses your GitHub token.":"Authenticate with GitHub above to access AI models."})]})]})]})]})}):null}const of="yaml-play-layout";function Wy(){const n=OE();return{panes:Ts.map(t=>{const r=n.indexOf(t.id);return{id:t.id,visible:r>=0,order:r>=0?r:1e3+Ts.findIndex(s=>s.id===t.id)}}),selectedPaneIds:n}}function WE(){const[n,e]=b.useState(()=>{try{const E=localStorage.getItem(of);if(E){const T=JSON.parse(E),I=new Set(T.panes.map(L=>L.id)),R=Ts.filter(L=>!I.has(L.id)).map((L,j)=>({id:L.id,visible:!1,order:T.panes.length+j}));return{...T,panes:[...T.panes,...R]}}}catch{}return Wy()});b.useEffect(()=>{localStorage.setItem(of,JSON.stringify(n))},[n]);const t=b.useCallback((E,T)=>{e(I=>{let R;if(T){const L=Math.max(...I.panes.map(j=>j.order));R=I.panes.map(j=>j.id===E?{...j,visible:T,order:L+1}:j)}else R=I.panes.map(L=>L.id===E?{...L,visible:T}:L);return{...I,panes:R}})},[]),r=b.useCallback(E=>{e(T=>{const I=new Set(T.selectedPaneIds??[]);return I.has(E)?I.delete(E):I.add(E),{...T,selectedPaneIds:Array.from(I)}})},[]),s=b.useCallback((E,T)=>{e(I=>{const R=[...I.panes],L=R.findIndex(W=>W.id===E),j=R.findIndex(W=>W.id===T);if(L===-1||j===-1)return I;const[H]=R.splice(L,1);return R.splice(j,0,H),{panes:R.map((W,V)=>({...W,order:V}))}})},[]),l=b.useCallback(()=>{localStorage.removeItem(of),bE(),e(Wy())},[]),a=b.useCallback(()=>{e(E=>{const T=E.panes.filter(j=>j.visible),I=T.length>0?Math.max(...T.map(j=>j.order)):-1,R=E.panes.filter(j=>!j.visible&&j.id!=="refparse").sort((j,H)=>j.id.localeCompare(H.id)),L=new Map;return R.forEach((j,H)=>{L.set(j.id,I+1+H)}),{...E,panes:E.panes.map(j=>({...j,visible:!0,order:L.has(j.id)?L.get(j.id):j.order}))}})},[]),c=b.useCallback(()=>{e(E=>({...E,panes:E.panes.map(T=>T.id==="refparse"?T:{...T,visible:!1})}))},[]),h=b.useCallback(()=>{e(E=>{const T=new Set(E.selectedPaneIds??[]);return{...E,panes:E.panes.map(I=>({...I,visible:I.id==="refparse"||T.has(I.id)}))}})},[]),d=b.useCallback(()=>{e(E=>({...E,selectedPaneIds:[]}))},[]),p=b.useCallback(E=>{e(T=>({...T,selectedPaneIds:E}))},[]),m=b.useCallback(E=>{e(T=>{const I=new Set(E);if(T.panes.filter(H=>!H.visible&&I.has(H.id)).length===0)return T;let j=Math.max(...T.panes.filter(H=>H.visible).map(H=>H.order),-1)+1;return{...T,panes:T.panes.map(H=>!H.visible&&I.has(H.id)?{...H,visible:!0,order:j++}:H)}})},[]),v=b.useCallback(E=>{e(T=>{const I=new Set(E);return{...T,panes:T.panes.map((R,L)=>({...R,visible:I.has(R.id),order:I.has(R.id)?E.indexOf(R.id):L+100}))}})},[]),w=b.useCallback((E,T)=>{e(I=>{const R=I.panes.find(V=>V.id===E);if(!R)return I;const L=R.order,W=[...I.panes.map(V=>V.id===T?{...V,visible:!0,order:L+.5}:V)].sort((V,q)=>V.order-q.order).map((V,q)=>({...V,order:q}));return{...I,panes:W}})},[]),S=b.useCallback(E=>{e(T=>({...T,inputPaneWidth:E}))},[]),C=b.useCallback(E=>{e(T=>({...T,colorScheme:E}))},[]),O=b.useCallback(E=>{e(T=>({...T,editorType:E}))},[]),N=b.useCallback(()=>n.panes.filter(E=>E.visible).sort((E,T)=>E.order-T.order),[n.panes]);return{layout:n,updatePaneVisibility:t,togglePaneSelection:r,reorderPanes:s,resetLayout:l,showAllPanes:a,hideAllPanes:c,showSelectedPanes:h,clearSelectedPanes:d,selectPanes:p,showErrorPanes:m,showOnlyPanes:v,addPaneAfter:w,getVisiblePanes:N,inputPaneWidth:n.inputPaneWidth??600,setInputPaneWidth:S,colorScheme:n.colorScheme==="dark"?"dark":"light",setColorScheme:C,editorType:n.editorType??"monaco",setEditorType:O}}const Ua=Ts.filter(n=>n.id!=="refparse").map(n=>n.id);function QE(){const[n,e]=b.useState(new Map),[t,r]=b.useState(""),s=b.useRef(null),l=b.useCallback(async(h,d)=>{s.current&&s.current.abort(),s.current=new AbortController,e(w=>{const S=new Map(w);return S.set("refparse",{parserId:"refparse",output:"",status:0,loading:!0}),Ua.forEach(C=>{S.set(C,{parserId:C,output:"",status:0,loading:!0})}),S});const p=await B1(h),m=p.output,v=p.status;r(m),e(w=>{const S=new Map(w);return S.set("refparse",{parserId:"refparse",output:p.output,status:p.status,loading:!1,matches:p.status===0,agrees:!0}),S}),await Promise.all(Ua.map(async w=>{const S=Ts.find(E=>E.id===w);if(!S)return;const C=await I1(w,h,S.version);let O,N;if(C.status===-1)O=!1,N=!1;else if(w==="refhs"){const E=v===0,T=C.status===0;O=E===T,N=v===0&&O}else v!==0?(O=C.status!==0,N=!1):(O=C.status===0&&z1(m,C.output,w),N=O);e(E=>{const T=new Map(E);return T.set(w,{parserId:w,output:C.output,status:C.status,loading:!1,matches:N,agrees:O,versionMismatch:C.versionMismatch}),T})}))},[]),a=b.useCallback(h=>n.get(h),[n]),c=b.useCallback(()=>{const h=[];let d=0;return Ua.forEach(p=>{const m=n.get(p);if(!m||m.loading)d++;else if(!m.agrees){const v=Er(p);h.push((v==null?void 0:v.name)||p)}}),{total:Ua.length,disagreeing:h.length,disagreeingNames:h,loading:d>0}},[n]);return{results:n,refOutput:t,runAllParsers:l,getResult:a,getAgreementCount:c}}async function $E(n){if(!localStorage.getItem("github-model"))try{const r=(await Vd(n)).find(s=>s.name==="Llama-3.3-70B-Instruct");r&&(localStorage.setItem("github-model",r.id),localStorage.setItem("github-model-name",`${r.publisher}/${r.name}`))}catch(t){console.error("Failed to set default model:",t)}}function UE(){const[n,e]=b.useState(null),[t,r]=b.useState(!0),[s,l]=b.useState(null);b.useEffect(()=>{(async()=>{const p=ys(),m=zE();if(p&&m)try{const v=await Vy(p);e(v),Hy(v)}catch{_y(),e(null)}r(!1)})()},[]);const a=b.useCallback(async()=>{l(null),r(!0);try{const d=await mE(Fy);return{userCode:d.user_code,verificationUri:d.verification_uri,deviceCode:d.device_code,interval:d.interval}}catch(d){const p=d instanceof Error?d.message:"Failed to start OAuth flow";return l(p),r(!1),null}},[]),c=b.useCallback(async(d,p)=>{const m=p*1e3,v=60;let w=0;const S=async()=>{if(w>=v){l("Authentication timeout - please try again"),r(!1);return}w++;try{const C=await yE(Fy,d);if(C.access_token){const O=C.access_token;BE(O);const N=await Vy(O);e(N),Hy(N),await $E(O),r(!1);return}if(C.error==="authorization_pending")return await new Promise(O=>setTimeout(O,m)),S();if(C.error==="slow_down")return await new Promise(O=>setTimeout(O,m+5e3)),S();if(C.error){l(C.error_description||C.error),r(!1);return}return await new Promise(O=>setTimeout(O,m)),S()}catch(C){const O=C instanceof Error?C.message:"Polling failed";l(O),r(!1)}};await S()},[]),h=b.useCallback(()=>{_y(),e(null)},[]);return{user:n,isAuthenticated:!!n,isLoading:t,error:s,login:a,waitForAuth:c,logout:h}}const XE="0.1.40",KE={version:XE},qE=KE.version;function GE(){const n=window.location.hash.slice(1);if(!n)return null;try{return atob(n)}catch{return null}}function YE(n){const e=btoa(n);window.history.replaceState(null,"",`#${e}`)}function JE(){const e=new URLSearchParams(window.location.search).get("show");if(!e)return null;const r=e.split(",").map(s=>s.trim()).filter(Boolean).filter(s=>Er(s));return r.length>0?r:null}function ZE(n){const e=new URLSearchParams(window.location.search);if(!e.get("show"))return;n&&n.length>0?e.set("show",n.join(",")):e.delete("show");const r=e.toString(),s=r?`?${r}${window.location.hash}`:`${window.location.pathname}${window.location.hash}`;window.history.replaceState(null,"",s)}function eM(n){const t=`?show=${n.join(",")}${window.location.hash}`;window.history.replaceState(null,"",t)}function tM(){var yi,ln;const[n,e]=b.useState(()=>GE()||Qo),[t,r]=b.useState(!1),[s,l]=b.useState(!1),[a,c]=b.useState(!1),[h,d]=b.useState(!1),[p,m]=b.useState(!1),[v,w]=b.useState(null),[S,C]=b.useState(!1),[O,N]=b.useState(!1),[E,T]=b.useState(!1),[I,R]=b.useState(!1),L=b.useRef(null),j=b.useRef(""),H=V1(640),W=FE(),V=UE(),q=()=>V.isAuthenticated,{layout:$,updatePaneVisibility:Z,togglePaneSelection:ue,reorderPanes:X,resetLayout:G,showAllPanes:se,hideAllPanes:Q,showSelectedPanes:ee,clearSelectedPanes:J,selectPanes:A,showErrorPanes:B,showOnlyPanes:le,getVisiblePanes:pe,inputPaneWidth:me,setInputPaneWidth:ne,colorScheme:ce,setColorScheme:ke,editorType:Pe,setEditorType:we}=WE(),{results:Ee,runAllParsers:_e,getResult:We,getAgreementCount:qe}=QE(),fe=pe(),{total:Me,disagreeing:Je,disagreeingNames:En,loading:ht}=qe(),Ge=fe.map(Oe=>Oe.id).join(","),wt=b.useRef({input:"",panes:""}),Gt=Array.from(Ee.values()).some(Oe=>Oe.versionMismatch);b.useEffect(()=>{const Oe=async()=>{const De=await dE();T(De)};Oe();const oe=setInterval(Oe,1e4);return()=>clearInterval(oe)},[]),b.useEffect(()=>{const Oe=JE();if(ZE(Oe),Oe){const oe=["refparse",...Oe.filter(De=>De!=="refparse")];le(oe)}},[]),b.useEffect(()=>{const Oe=$.panes.find(oe=>oe.id==="refparse");Oe&&!Oe.visible&&Z("refparse",!0)},[$.panes,Z]),b.useEffect(()=>{const Oe=setTimeout(()=>{YE(n)},1e3);return()=>clearTimeout(Oe)},[n]),b.useEffect(()=>{const Oe=fe.map(oe=>oe.id);Oe.length>0&&eM(Oe)},[Ge,fe]),b.useEffect(()=>{if(wt.current.input===n&&wt.current.panes===Ge)return;const Oe=setTimeout(()=>{const oe=Ge.split(",").filter(Boolean);oe.length>0&&(wt.current={input:n,panes:Ge},_e(n,oe))},500);return()=>clearTimeout(Oe)},[n,Ge,_e]),b.useEffect(()=>{const Oe=oe=>{var Xn,xi,jr;const De=oe.target,ft=De.tagName==="INPUT"||De.tagName==="TEXTAREA"||De.closest(".monaco-editor")||De.closest(".cm-editor");if(oe.key==="Escape"&&ft){oe.preventDefault(),(Xn=L.current)==null||Xn.blur();return}if(ft)return;const Ze=oe.key.toUpperCase();if(Ze==="I"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),(xi=L.current)==null||xi.focus()),Ze==="H"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),c(!0)),Ze==="O"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),r(!0)),Ze==="A"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),se()),Ze==="S"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),ee()),Ze==="U"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),J()),Ze==="C"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),m(!0)),Ze==="K"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),d(!0)),Ze==="G"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),N(!0)),Ze==="T"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),q()?C(!0):N(!0)),oe.key==="\\"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(j.current+="\\",j.current==="\\\\\\"&&(oe.preventDefault(),e(""),(jr=L.current)==null||jr.focus(),j.current="")),Ze==="D"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey){oe.preventDefault();const fr=[];fe.forEach(dr=>{if(dr.id!=="refparse"){const pr=We(dr.id);pr&&pr.agrees===!1&&fr.push(dr.id)}}),A(fr)}Ze==="X"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey?(j.current+="X",j.current==="XXX"&&(oe.preventDefault(),G(),e(Qo),localStorage.removeItem("github-model"),localStorage.removeItem("github-model-name"),V.logout(),j.current="")):oe.key!=="\\"&&Ze!=="X"&&(j.current="")};return document.addEventListener("keydown",Oe),()=>document.removeEventListener("keydown",Oe)},[se,Q,ee,B,Ee,G,V.isAuthenticated]);const cr=ob(jm(xd,{activationConstraint:{distance:8}}),jm(md)),mi=b.useCallback(Oe=>{const{active:oe,over:De}=Oe;if(De&&oe.id!==De.id){if(oe.id==="refparse")return;X(oe.id,De.id)}},[X]),hr=Er("refparse");return H?x.jsxs("div",{className:`h-screen flex flex-col bg-gray-100 dark:bg-gray-900 ${ce==="dark"?"dark":""}`,children:[x.jsxs("header",{className:"bg-white dark:bg-gray-800 px-3 py-2 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[x.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"YAML Playground"}),x.jsxs("div",{className:"relative",children:[x.jsx("button",{onClick:()=>R(!I),className:"p-2 text-gray-700 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors","aria-label":"Menu",children:x.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),I&&x.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-lg z-50",children:[x.jsx("button",{onClick:()=>{c(!0),R(!1)},className:"w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"About"}),x.jsx("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),R(!1)},className:"w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Share"}),x.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",onClick:()=>R(!1),className:"block w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"GitHub"})]})]})]}),x.jsxs("div",{className:`flex-1 flex ${W?"flex-row":"flex-col"} overflow-hidden min-h-0`,children:[x.jsx("div",{className:`${W?"w-1/2 h-full":"h-1/2 w-full"} flex flex-col overflow-hidden ${W?"border-r border-gray-300 dark:border-gray-700":"border-b border-gray-300 dark:border-gray-700"}`,children:x.jsx(Ry,{ref:L,value:n,onChange:e,width:me,onWidthChange:ne,colorScheme:ce,editorType:Pe,showBorder:!1,isMobile:!0,onSubmitPR:()=>C(!0),onSignIn:()=>N(!0),isGitHubAuthenticated:V.isAuthenticated})}),hr&&x.jsx("div",{className:`${W?"w-1/2 h-full":"h-1/2 w-full"} flex flex-col overflow-hidden`,children:x.jsx(rf,{parser:hr,result:We("refparse"),isDraggable:!1,onSetYamlInput:e,showTestSuite:!1})})]})]}):x.jsxs("div",{className:`h-screen flex flex-col bg-gray-100 dark:bg-gray-900 ${ce==="dark"?"dark":""}`,children:[x.jsxs("header",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between",children:[x.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["YAML Parser Playground ",qE]}),x.jsxs("div",{className:"flex items-center gap-2",children:[(!E||Gt)&&x.jsx("button",{onClick:()=>l(!0),className:"px-3 py-1.5 bg-yellow-500 text-black font-semibold rounded hover:bg-yellow-400 transition-colors text-sm",children:"Setup"}),x.jsx(jE,{onHelp:()=>c(!0),onOptions:()=>r(!0),onAllPanes:se,onUnselectAll:J,onTestFormat:()=>C(!0),onKeyboardShortcuts:()=>d(!0),onSandboxSetup:()=>l(!0),onAddTokens:()=>N(!0),hasTokens:q(),onFactoryReset:()=>{G(),e(Qo),localStorage.removeItem("github-model"),localStorage.removeItem("github-model-name"),V.logout()}})]})]}),x.jsx("div",{className:"flex-1 flex overflow-hidden",children:(()=>{const Oe=fe.length>8,oe=Oe?fe.filter(De=>De.id!=="refparse"):fe;return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:`${Oe?"grid grid-rows-2":"flex flex-col"} h-full border-r border-gray-300 dark:border-gray-700`,style:{width:`${me}px`,minWidth:"200px",maxWidth:"800px"},children:[x.jsx(Ry,{ref:L,value:n,onChange:e,width:me,onWidthChange:ne,colorScheme:ce,editorType:Pe,showBorder:!1,heightMode:Oe?"half":"full",onSubmitPR:()=>C(!0),onSignIn:()=>N(!0),isGitHubAuthenticated:V.isAuthenticated}),Oe&&hr&&x.jsx("div",{className:"h-full overflow-hidden border-t border-gray-300 dark:border-gray-700",children:x.jsx(rf,{parser:hr,result:We("refparse"),isDraggable:!1,onSetYamlInput:e},"refparse-sidebar")})]},Oe?"left-col-split":"left-col-full"),x.jsx("div",{className:"flex-1 grid grid-cols-4 overflow-y-auto pane-container gap-px bg-gray-300 dark:bg-gray-700 auto-rows-fr",children:x.jsx(cS,{sensors:cr,collisionDetection:hb,onDragEnd:mi,children:x.jsx(SS,{items:oe.map(De=>De.id),strategy:kS,children:oe.map(De=>{var Xn;const ft=Er(De.id);if(!ft)return null;const Ze=De.id==="refparse";return x.jsx(rf,{parser:ft,result:We(De.id),onClose:Ze?void 0:()=>Z(De.id,!1),isDraggable:!Ze,onSetYamlInput:e,isSelected:Ze?!1:((Xn=$.selectedPaneIds)==null?void 0:Xn.includes(De.id))??!1,onToggleSelection:Ze?void 0:()=>ue(De.id)},De.id)})})})})]})})()}),x.jsx(EE,{total:Me,disagreeing:Je,disagreeingNames:En,loading:ht,sandboxAvailable:E,onSandboxSetup:()=>l(!0)}),x.jsx(TE,{isOpen:t,onClose:()=>r(!1),colorScheme:ce,onColorSchemeChange:ke,editorType:Pe,onEditorTypeChange:we}),x.jsx(DE,{isOpen:s,onClose:()=>{l(!1);const Oe=Ge.split(",").filter(Boolean);Oe.length>0&&_e(n,Oe)}}),x.jsx(LE,{isOpen:a,onClose:()=>c(!1)}),x.jsx(IE,{isOpen:h,onClose:()=>d(!1)}),x.jsx(H1,{isOpen:p,onClose:()=>m(!1),onSelectParser:Oe=>w(Oe)}),x.jsx(_E,{isOpen:S,onClose:()=>C(!1),yaml:n,events:((yi=We("refparse"))==null?void 0:yi.output)||"",isError:(((ln=We("refparse"))==null?void 0:ln.status)??0)!==0,onConfigureModel:()=>N(!0)}),x.jsx(VE,{isOpen:O,onClose:()=>N(!1),githubAuth:V}),v&&Er(v)&&x.jsx(ad,{isOpen:!0,onClose:()=>w(null),parser:Er(v),onSelectTest:Oe=>e(Oe),forceRerun:!1,onCompare:()=>{w(null),m(!0)}})]})}$k.createRoot(document.getElementById("root")).render(x.jsx(ct.StrictMode,{children:x.jsx(tM,{})}));
//# sourceMappingURL=index-B0Dx4fA6.js.map

var Dw=Object.defineProperty;var jw=(n,e,t)=>e in n?Dw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Em=(n,e,t)=>jw(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function Xy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Ph={exports:{}},So={},Th={exports:{}},Me={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm;function Lw(){if(Mm)return Me;Mm=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),a=Symbol.for("react.context"),u=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function v(P){return P===null||typeof P!="object"?null:(P=m&&P[m]||P["@@iterator"],typeof P=="function"?P:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,C={};function O(P,I,le){this.props=P,this.context=I,this.refs=C,this.updater=le||k}O.prototype.isReactComponent={},O.prototype.setState=function(P,I){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,I,"setState")},O.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function T(){}T.prototype=O.prototype;function E(P,I,le){this.props=P,this.context=I,this.refs=C,this.updater=le||k}var j=E.prototype=new T;j.constructor=E,b(j,O.prototype),j.isPureReactComponent=!0;var F=Array.isArray,M=Object.prototype.hasOwnProperty,L={current:null},R={key:!0,ref:!0,__self:!0,__source:!0};function H(P,I,le){var pe,me={},ne=null,ce=null;if(I!=null)for(pe in I.ref!==void 0&&(ce=I.ref),I.key!==void 0&&(ne=""+I.key),I)M.call(I,pe)&&!R.hasOwnProperty(pe)&&(me[pe]=I[pe]);var be=arguments.length-2;if(be===1)me.children=le;else if(1<be){for(var Ne=Array(be),ke=0;ke<be;ke++)Ne[ke]=arguments[ke+2];me.children=Ne}if(P&&P.defaultProps)for(pe in be=P.defaultProps,be)me[pe]===void 0&&(me[pe]=be[pe]);return{$$typeof:n,type:P,key:ne,ref:ce,props:me,_owner:L.current}}function V(P,I){return{$$typeof:n,type:P.type,key:I,ref:P.ref,props:P.props,_owner:P._owner}}function W(P){return typeof P=="object"&&P!==null&&P.$$typeof===n}function q(P){var I={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(le){return I[le]})}var $=/\/+/g;function Z(P,I){return typeof P=="object"&&P!==null&&P.key!=null?q(""+P.key):I.toString(36)}function ue(P,I,le,pe,me){var ne=typeof P;(ne==="undefined"||ne==="boolean")&&(P=null);var ce=!1;if(P===null)ce=!0;else switch(ne){case"string":case"number":ce=!0;break;case"object":switch(P.$$typeof){case n:case e:ce=!0}}if(ce)return ce=P,me=me(ce),P=pe===""?"."+Z(ce,0):pe,F(me)?(le="",P!=null&&(le=P.replace($,"$&/")+"/"),ue(me,I,le,"",function(ke){return ke})):me!=null&&(W(me)&&(me=V(me,le+(!me.key||ce&&ce.key===me.key?"":(""+me.key).replace($,"$&/")+"/")+P)),I.push(me)),1;if(ce=0,pe=pe===""?".":pe+":",F(P))for(var be=0;be<P.length;be++){ne=P[be];var Ne=pe+Z(ne,be);ce+=ue(ne,I,le,Ne,me)}else if(Ne=v(P),typeof Ne=="function")for(P=Ne.call(P),be=0;!(ne=P.next()).done;)ne=ne.value,Ne=pe+Z(ne,be++),ce+=ue(ne,I,le,Ne,me);else if(ne==="object")throw I=String(P),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return ce}function X(P,I,le){if(P==null)return P;var pe=[],me=0;return ue(P,pe,"","",function(ne){return I.call(le,ne,me++)}),pe}function G(P){if(P._status===-1){var I=P._result;I=I(),I.then(function(le){(P._status===0||P._status===-1)&&(P._status=1,P._result=le)},function(le){(P._status===0||P._status===-1)&&(P._status=2,P._result=le)}),P._status===-1&&(P._status=0,P._result=I)}if(P._status===1)return P._result.default;throw P._result}var se={current:null},Q={transition:null},ee={ReactCurrentDispatcher:se,ReactCurrentBatchConfig:Q,ReactCurrentOwner:L};function J(){throw Error("act(...) is not supported in production builds of React.")}return Me.Children={map:X,forEach:function(P,I,le){X(P,function(){I.apply(this,arguments)},le)},count:function(P){var I=0;return X(P,function(){I++}),I},toArray:function(P){return X(P,function(I){return I})||[]},only:function(P){if(!W(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Me.Component=O,Me.Fragment=t,Me.Profiler=s,Me.PureComponent=E,Me.StrictMode=r,Me.Suspense=h,Me.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Me.act=J,Me.cloneElement=function(P,I,le){if(P==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+P+".");var pe=b({},P.props),me=P.key,ne=P.ref,ce=P._owner;if(I!=null){if(I.ref!==void 0&&(ne=I.ref,ce=L.current),I.key!==void 0&&(me=""+I.key),P.type&&P.type.defaultProps)var be=P.type.defaultProps;for(Ne in I)M.call(I,Ne)&&!R.hasOwnProperty(Ne)&&(pe[Ne]=I[Ne]===void 0&&be!==void 0?be[Ne]:I[Ne])}var Ne=arguments.length-2;if(Ne===1)pe.children=le;else if(1<Ne){be=Array(Ne);for(var ke=0;ke<Ne;ke++)be[ke]=arguments[ke+2];pe.children=be}return{$$typeof:n,type:P.type,key:me,ref:ne,props:pe,_owner:ce}},Me.createContext=function(P){return P={$$typeof:a,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},P.Provider={$$typeof:l,_context:P},P.Consumer=P},Me.createElement=H,Me.createFactory=function(P){var I=H.bind(null,P);return I.type=P,I},Me.createRef=function(){return{current:null}},Me.forwardRef=function(P){return{$$typeof:u,render:P}},Me.isValidElement=W,Me.lazy=function(P){return{$$typeof:p,_payload:{_status:-1,_result:P},_init:G}},Me.memo=function(P,I){return{$$typeof:d,type:P,compare:I===void 0?null:I}},Me.startTransition=function(P){var I=Q.transition;Q.transition={};try{P()}finally{Q.transition=I}},Me.unstable_act=J,Me.useCallback=function(P,I){return se.current.useCallback(P,I)},Me.useContext=function(P){return se.current.useContext(P)},Me.useDebugValue=function(){},Me.useDeferredValue=function(P){return se.current.useDeferredValue(P)},Me.useEffect=function(P,I){return se.current.useEffect(P,I)},Me.useId=function(){return se.current.useId()},Me.useImperativeHandle=function(P,I,le){return se.current.useImperativeHandle(P,I,le)},Me.useInsertionEffect=function(P,I){return se.current.useInsertionEffect(P,I)},Me.useLayoutEffect=function(P,I){return se.current.useLayoutEffect(P,I)},Me.useMemo=function(P,I){return se.current.useMemo(P,I)},Me.useReducer=function(P,I,le){return se.current.useReducer(P,I,le)},Me.useRef=function(P){return se.current.useRef(P)},Me.useState=function(P){return se.current.useState(P)},Me.useSyncExternalStore=function(P,I,le){return se.current.useSyncExternalStore(P,I,le)},Me.useTransition=function(){return se.current.useTransition()},Me.version="18.3.1",Me}var Rm;function dd(){return Rm||(Rm=1,Th.exports=Lw()),Th.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dm;function Iw(){if(Dm)return So;Dm=1;var n=dd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function a(u,h,d){var p,m={},v=null,k=null;d!==void 0&&(v=""+d),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(k=h.ref);for(p in h)r.call(h,p)&&!l.hasOwnProperty(p)&&(m[p]=h[p]);if(u&&u.defaultProps)for(p in h=u.defaultProps,h)m[p]===void 0&&(m[p]=h[p]);return{$$typeof:e,type:u,key:v,ref:k,props:m,_owner:s.current}}return So.Fragment=t,So.jsx=a,So.jsxs=a,So}var jm;function Bw(){return jm||(jm=1,Ph.exports=Iw()),Ph.exports}var x=Bw(),S=dd();const ct=Xy(S);var Sa={},Ah={exports:{}},tn={},Eh={exports:{}},Mh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lm;function zw(){return Lm||(Lm=1,(function(n){function e(Q,ee){var J=Q.length;Q.push(ee);e:for(;0<J;){var P=J-1>>>1,I=Q[P];if(0<s(I,ee))Q[P]=ee,Q[J]=I,J=P;else break e}}function t(Q){return Q.length===0?null:Q[0]}function r(Q){if(Q.length===0)return null;var ee=Q[0],J=Q.pop();if(J!==ee){Q[0]=J;e:for(var P=0,I=Q.length,le=I>>>1;P<le;){var pe=2*(P+1)-1,me=Q[pe],ne=pe+1,ce=Q[ne];if(0>s(me,J))ne<I&&0>s(ce,me)?(Q[P]=ce,Q[ne]=J,P=ne):(Q[P]=me,Q[pe]=J,P=pe);else if(ne<I&&0>s(ce,J))Q[P]=ce,Q[ne]=J,P=ne;else break e}}return ee}function s(Q,ee){var J=Q.sortIndex-ee.sortIndex;return J!==0?J:Q.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var a=Date,u=a.now();n.unstable_now=function(){return a.now()-u}}var h=[],d=[],p=1,m=null,v=3,k=!1,b=!1,C=!1,O=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function j(Q){for(var ee=t(d);ee!==null;){if(ee.callback===null)r(d);else if(ee.startTime<=Q)r(d),ee.sortIndex=ee.expirationTime,e(h,ee);else break;ee=t(d)}}function F(Q){if(C=!1,j(Q),!b)if(t(h)!==null)b=!0,G(M);else{var ee=t(d);ee!==null&&se(F,ee.startTime-Q)}}function M(Q,ee){b=!1,C&&(C=!1,T(H),H=-1),k=!0;var J=v;try{for(j(ee),m=t(h);m!==null&&(!(m.expirationTime>ee)||Q&&!q());){var P=m.callback;if(typeof P=="function"){m.callback=null,v=m.priorityLevel;var I=P(m.expirationTime<=ee);ee=n.unstable_now(),typeof I=="function"?m.callback=I:m===t(h)&&r(h),j(ee)}else r(h);m=t(h)}if(m!==null)var le=!0;else{var pe=t(d);pe!==null&&se(F,pe.startTime-ee),le=!1}return le}finally{m=null,v=J,k=!1}}var L=!1,R=null,H=-1,V=5,W=-1;function q(){return!(n.unstable_now()-W<V)}function $(){if(R!==null){var Q=n.unstable_now();W=Q;var ee=!0;try{ee=R(!0,Q)}finally{ee?Z():(L=!1,R=null)}}else L=!1}var Z;if(typeof E=="function")Z=function(){E($)};else if(typeof MessageChannel<"u"){var ue=new MessageChannel,X=ue.port2;ue.port1.onmessage=$,Z=function(){X.postMessage(null)}}else Z=function(){O($,0)};function G(Q){R=Q,L||(L=!0,Z())}function se(Q,ee){H=O(function(){Q(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_continueExecution=function(){b||k||(b=!0,G(M))},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):V=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(Q){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var J=v;v=ee;try{return Q()}finally{v=J}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(Q,ee){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var J=v;v=Q;try{return ee()}finally{v=J}},n.unstable_scheduleCallback=function(Q,ee,J){var P=n.unstable_now();switch(typeof J=="object"&&J!==null?(J=J.delay,J=typeof J=="number"&&0<J?P+J:P):J=P,Q){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=J+I,Q={id:p++,callback:ee,priorityLevel:Q,startTime:J,expirationTime:I,sortIndex:-1},J>P?(Q.sortIndex=J,e(d,Q),t(h)===null&&Q===t(d)&&(C?(T(H),H=-1):C=!0,se(F,J-P))):(Q.sortIndex=I,e(h,Q),b||k||(b=!0,G(M))),Q},n.unstable_shouldYield=q,n.unstable_wrapCallback=function(Q){var ee=v;return function(){var J=v;v=ee;try{return Q.apply(this,arguments)}finally{v=J}}}})(Mh)),Mh}var Im;function Fw(){return Im||(Im=1,Eh.exports=zw()),Eh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bm;function _w(){if(Bm)return tn;Bm=1;var n=dd(),e=Fw();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,c=1;c<arguments.length;c++)o+="&args[]="+encodeURIComponent(arguments[c]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function l(i,o){a(i,o),a(i+"Capture",o)}function a(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var u=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function v(i){return h.call(m,i)?!0:h.call(p,i)?!1:d.test(i)?m[i]=!0:(p[i]=!0,!1)}function k(i,o,c,f){if(c!==null&&c.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:c!==null?!c.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function b(i,o,c,f){if(o===null||typeof o>"u"||k(i,o,c,f))return!0;if(f)return!1;if(c!==null)switch(c.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function C(i,o,c,f,g,y,w){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=c,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=w}var O={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){O[i]=new C(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];O[o]=new C(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){O[i]=new C(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){O[i]=new C(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){O[i]=new C(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){O[i]=new C(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){O[i]=new C(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){O[i]=new C(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){O[i]=new C(i,5,!1,i.toLowerCase(),null,!1,!1)});var T=/[\-:]([a-z])/g;function E(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(T,E);O[o]=new C(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(T,E);O[o]=new C(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(T,E);O[o]=new C(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){O[i]=new C(i,1,!1,i.toLowerCase(),null,!1,!1)}),O.xlinkHref=new C("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){O[i]=new C(i,1,!1,i.toLowerCase(),null,!0,!0)});function j(i,o,c,f){var g=O.hasOwnProperty(o)?O[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(b(o,c,g,f)&&(c=null),f||g===null?v(o)&&(c===null?i.removeAttribute(o):i.setAttribute(o,""+c)):g.mustUseProperty?i[g.propertyName]=c===null?g.type===3?!1:"":c:(o=g.attributeName,f=g.attributeNamespace,c===null?i.removeAttribute(o):(g=g.type,c=g===3||g===4&&c===!0?"":""+c,f?i.setAttributeNS(f,o,c):i.setAttribute(o,c))))}var F=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,M=Symbol.for("react.element"),L=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),H=Symbol.for("react.strict_mode"),V=Symbol.for("react.profiler"),W=Symbol.for("react.provider"),q=Symbol.for("react.context"),$=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),X=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),se=Symbol.for("react.offscreen"),Q=Symbol.iterator;function ee(i){return i===null||typeof i!="object"?null:(i=Q&&i[Q]||i["@@iterator"],typeof i=="function"?i:null)}var J=Object.assign,P;function I(i){if(P===void 0)try{throw Error()}catch(c){var o=c.stack.trim().match(/\n( *(at )?)/);P=o&&o[1]||""}return`
`+P+i}var le=!1;function pe(i,o){if(!i||le)return"";le=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(_){var f=_}Reflect.construct(i,[],o)}else{try{o.call()}catch(_){f=_}i.call(o.prototype)}else{try{throw Error()}catch(_){f=_}i()}}catch(_){if(_&&f&&typeof _.stack=="string"){for(var g=_.stack.split(`
`),y=f.stack.split(`
`),w=g.length-1,N=y.length-1;1<=w&&0<=N&&g[w]!==y[N];)N--;for(;1<=w&&0<=N;w--,N--)if(g[w]!==y[N]){if(w!==1||N!==1)do if(w--,N--,0>N||g[w]!==y[N]){var A=`
`+g[w].replace(" at new "," at ");return i.displayName&&A.includes("<anonymous>")&&(A=A.replace("<anonymous>",i.displayName)),A}while(1<=w&&0<=N);break}}}finally{le=!1,Error.prepareStackTrace=c}return(i=i?i.displayName||i.name:"")?I(i):""}function me(i){switch(i.tag){case 5:return I(i.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return i=pe(i.type,!1),i;case 11:return i=pe(i.type.render,!1),i;case 1:return i=pe(i.type,!0),i;default:return""}}function ne(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case R:return"Fragment";case L:return"Portal";case V:return"Profiler";case H:return"StrictMode";case Z:return"Suspense";case ue:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case q:return(i.displayName||"Context")+".Consumer";case W:return(i._context.displayName||"Context")+".Provider";case $:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case X:return o=i.displayName||null,o!==null?o:ne(i.type)||"Memo";case G:o=i._payload,i=i._init;try{return ne(i(o))}catch{}}return null}function ce(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ne(o);case 8:return o===H?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function be(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ne(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ke(i){var o=Ne(i)?"checked":"value",c=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var g=c.get,y=c.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(w){f=""+w,y.call(this,w)}}),Object.defineProperty(i,o,{enumerable:c.enumerable}),{getValue:function(){return f},setValue:function(w){f=""+w},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ae(i){i._valueTracker||(i._valueTracker=ke(i))}function _e(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var c=o.getValue(),f="";return i&&(f=Ne(i)?i.checked?"true":"false":i.value),i=f,i!==c?(o.setValue(i),!0):!1}function We(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ke(i,o){var c=o.checked;return J({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:c??i._wrapperState.initialChecked})}function he(i,o){var c=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;c=be(o.value!=null?o.value:c),i._wrapperState={initialChecked:f,initialValue:c,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Ee(i,o){o=o.checked,o!=null&&j(i,"checked",o,!1)}function Je(i,o){Ee(i,o);var c=be(o.value),f=o.type;if(c!=null)f==="number"?(c===0&&i.value===""||i.value!=c)&&(i.value=""+c):i.value!==""+c&&(i.value=""+c);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?ft(i,o.type,c):o.hasOwnProperty("defaultValue")&&ft(i,o.type,be(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Tn(i,o,c){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,c||o===i.value||(i.value=o),i.defaultValue=o}c=i.name,c!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,c!==""&&(i.name=c)}function ft(i,o,c){(o!=="number"||We(i.ownerDocument)!==i)&&(c==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+c&&(i.defaultValue=""+c))}var qe=Array.isArray;function kt(i,o,c,f){if(i=i.options,o){o={};for(var g=0;g<c.length;g++)o["$"+c[g]]=!0;for(c=0;c<i.length;c++)g=o.hasOwnProperty("$"+i[c].value),i[c].selected!==g&&(i[c].selected=g),g&&f&&(i[c].defaultSelected=!0)}else{for(c=""+be(c),o=null,g=0;g<i.length;g++){if(i[g].value===c){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function Kt(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return J({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function cr(i,o){var c=o.value;if(c==null){if(c=o.children,o=o.defaultValue,c!=null){if(o!=null)throw Error(t(92));if(qe(c)){if(1<c.length)throw Error(t(93));c=c[0]}o=c}o==null&&(o=""),c=o}i._wrapperState={initialValue:be(c)}}function pi(i,o){var c=be(o.value),f=be(o.defaultValue);c!=null&&(c=""+c,c!==i.value&&(i.value=c),o.defaultValue==null&&i.defaultValue!==c&&(i.defaultValue=c)),f!=null&&(i.defaultValue=""+f)}function hr(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function gi(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function on(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?gi(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Oe,oe=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,c,f,g){MSApp.execUnsafeLocalFunction(function(){return i(o,c,f,g)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Oe=Oe||document.createElement("div"),Oe.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Oe.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function je(i,o){if(o){var c=i.firstChild;if(c&&c===i.lastChild&&c.nodeType===3){c.nodeValue=o;return}}i.textContent=o}var dt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Ze=["Webkit","ms","Moz","O"];Object.keys(dt).forEach(function(i){Ze.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),dt[o]=dt[i]})});function Xn(i,o,c){return o==null||typeof o=="boolean"||o===""?"":c||typeof o!="number"||o===0||dt.hasOwnProperty(i)&&dt[i]?(""+o).trim():o+"px"}function mi(i,o){i=i.style;for(var c in o)if(o.hasOwnProperty(c)){var f=c.indexOf("--")===0,g=Xn(c,o[c],f);c==="float"&&(c="cssFloat"),f?i.setProperty(c,g):i[c]=g}}var Dr=J({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function fr(i,o){if(o){if(Dr[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function dr(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var pr=null;function _s(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Hs=null,jr=null,et=null;function Mt(i){if(i=lo(i)){if(typeof Hs!="function")throw Error(t(280));var o=i.stateNode;o&&(o=zl(o),Hs(i.stateNode,i.type,o))}}function Rt(i){jr?et?et.push(i):et=[i]:jr=i}function An(){if(jr){var i=jr,o=et;if(et=jr=null,Mt(i),o)for(i=0;i<o.length;i++)Mt(o[i])}}function Vt(i,o){return i(o)}function Dt(){}var qt=!1;function gr(i,o,c){if(qt)return i(o,c);qt=!0;try{return Vt(i,o,c)}finally{qt=!1,(jr!==null||et!==null)&&(Dt(),An())}}function tt(i,o){var c=i.stateNode;if(c===null)return null;var f=zl(c);if(f===null)return null;c=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(c&&typeof c!="function")throw Error(t(231,o,typeof c));return c}var mn=!1;if(u)try{var jt={};Object.defineProperty(jt,"passive",{get:function(){mn=!0}}),window.addEventListener("test",jt,jt),window.removeEventListener("test",jt,jt)}catch{mn=!1}function En(i,o,c,f,g,y,w,N,A){var _=Array.prototype.slice.call(arguments,3);try{o.apply(c,_)}catch(Y){this.onError(Y)}}var Mn=!1,Kn=null,ln=!1,mr=null,Ws={onError:function(i){Mn=!0,Kn=i}};function H1(i,o,c,f,g,y,w,N,A){Mn=!1,Kn=null,En.apply(Ws,arguments)}function W1(i,o,c,f,g,y,w,N,A){if(H1.apply(this,arguments),Mn){if(Mn){var _=Kn;Mn=!1,Kn=null}else throw Error(t(198));ln||(ln=!0,mr=_)}}function yi(i){var o=i,c=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(c=o.return),i=o.return;while(i)}return o.tag===3?c:null}function Zd(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function ep(i){if(yi(i)!==i)throw Error(t(188))}function V1(i){var o=i.alternate;if(!o){if(o=yi(i),o===null)throw Error(t(188));return o!==i?null:i}for(var c=i,f=o;;){var g=c.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){c=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===c)return ep(g),i;if(y===f)return ep(g),o;y=y.sibling}throw Error(t(188))}if(c.return!==f.return)c=g,f=y;else{for(var w=!1,N=g.child;N;){if(N===c){w=!0,c=g,f=y;break}if(N===f){w=!0,f=g,c=y;break}N=N.sibling}if(!w){for(N=y.child;N;){if(N===c){w=!0,c=y,f=g;break}if(N===f){w=!0,f=y,c=g;break}N=N.sibling}if(!w)throw Error(t(189))}}if(c.alternate!==f)throw Error(t(190))}if(c.tag!==3)throw Error(t(188));return c.stateNode.current===c?i:o}function tp(i){return i=V1(i),i!==null?np(i):null}function np(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=np(i);if(o!==null)return o;i=i.sibling}return null}var rp=e.unstable_scheduleCallback,ip=e.unstable_cancelCallback,Q1=e.unstable_shouldYield,$1=e.unstable_requestPaint,lt=e.unstable_now,U1=e.unstable_getCurrentPriorityLevel,Xu=e.unstable_ImmediatePriority,sp=e.unstable_UserBlockingPriority,xl=e.unstable_NormalPriority,X1=e.unstable_LowPriority,op=e.unstable_IdlePriority,vl=null,qn=null;function K1(i){if(qn&&typeof qn.onCommitFiberRoot=="function")try{qn.onCommitFiberRoot(vl,i,void 0,(i.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:Y1,q1=Math.log,G1=Math.LN2;function Y1(i){return i>>>=0,i===0?32:31-(q1(i)/G1|0)|0}var kl=64,wl=4194304;function Vs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function bl(i,o){var c=i.pendingLanes;if(c===0)return 0;var f=0,g=i.suspendedLanes,y=i.pingedLanes,w=c&268435455;if(w!==0){var N=w&~g;N!==0?f=Vs(N):(y&=w,y!==0&&(f=Vs(y)))}else w=c&~g,w!==0?f=Vs(w):y!==0&&(f=Vs(y));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,y=o&-o,g>=y||g===16&&(y&4194240)!==0))return o;if((f&4)!==0&&(f|=c&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=f;0<o;)c=31-Rn(o),g=1<<c,f|=i[c],o&=~g;return f}function J1(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Z1(i,o){for(var c=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes;0<y;){var w=31-Rn(y),N=1<<w,A=g[w];A===-1?((N&c)===0||(N&f)!==0)&&(g[w]=J1(N,o)):A<=o&&(i.expiredLanes|=N),y&=~N}}function Ku(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function lp(){var i=kl;return kl<<=1,(kl&4194240)===0&&(kl=64),i}function qu(i){for(var o=[],c=0;31>c;c++)o.push(i);return o}function Qs(i,o,c){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Rn(o),i[o]=c}function ek(i,o){var c=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<c;){var g=31-Rn(c),y=1<<g;o[g]=0,f[g]=-1,i[g]=-1,c&=~y}}function Gu(i,o){var c=i.entangledLanes|=o;for(i=i.entanglements;c;){var f=31-Rn(c),g=1<<f;g&o|i[f]&o&&(i[f]|=o),c&=~g}}var He=0;function ap(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var up,Yu,cp,hp,fp,Ju=!1,Sl=[],Lr=null,Ir=null,Br=null,$s=new Map,Us=new Map,zr=[],tk="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function dp(i,o){switch(i){case"focusin":case"focusout":Lr=null;break;case"dragenter":case"dragleave":Ir=null;break;case"mouseover":case"mouseout":Br=null;break;case"pointerover":case"pointerout":$s.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Us.delete(o.pointerId)}}function Xs(i,o,c,f,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:c,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},o!==null&&(o=lo(o),o!==null&&Yu(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function nk(i,o,c,f,g){switch(o){case"focusin":return Lr=Xs(Lr,i,o,c,f,g),!0;case"dragenter":return Ir=Xs(Ir,i,o,c,f,g),!0;case"mouseover":return Br=Xs(Br,i,o,c,f,g),!0;case"pointerover":var y=g.pointerId;return $s.set(y,Xs($s.get(y)||null,i,o,c,f,g)),!0;case"gotpointercapture":return y=g.pointerId,Us.set(y,Xs(Us.get(y)||null,i,o,c,f,g)),!0}return!1}function pp(i){var o=xi(i.target);if(o!==null){var c=yi(o);if(c!==null){if(o=c.tag,o===13){if(o=Zd(c),o!==null){i.blockedOn=o,fp(i.priority,function(){cp(c)});return}}else if(o===3&&c.stateNode.current.memoizedState.isDehydrated){i.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Cl(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var c=ec(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(c===null){c=i.nativeEvent;var f=new c.constructor(c.type,c);pr=f,c.target.dispatchEvent(f),pr=null}else return o=lo(c),o!==null&&Yu(o),i.blockedOn=c,!1;o.shift()}return!0}function gp(i,o,c){Cl(i)&&c.delete(o)}function rk(){Ju=!1,Lr!==null&&Cl(Lr)&&(Lr=null),Ir!==null&&Cl(Ir)&&(Ir=null),Br!==null&&Cl(Br)&&(Br=null),$s.forEach(gp),Us.forEach(gp)}function Ks(i,o){i.blockedOn===o&&(i.blockedOn=null,Ju||(Ju=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,rk)))}function qs(i){function o(g){return Ks(g,i)}if(0<Sl.length){Ks(Sl[0],i);for(var c=1;c<Sl.length;c++){var f=Sl[c];f.blockedOn===i&&(f.blockedOn=null)}}for(Lr!==null&&Ks(Lr,i),Ir!==null&&Ks(Ir,i),Br!==null&&Ks(Br,i),$s.forEach(o),Us.forEach(o),c=0;c<zr.length;c++)f=zr[c],f.blockedOn===i&&(f.blockedOn=null);for(;0<zr.length&&(c=zr[0],c.blockedOn===null);)pp(c),c.blockedOn===null&&zr.shift()}var Qi=F.ReactCurrentBatchConfig,Ol=!0;function ik(i,o,c,f){var g=He,y=Qi.transition;Qi.transition=null;try{He=1,Zu(i,o,c,f)}finally{He=g,Qi.transition=y}}function sk(i,o,c,f){var g=He,y=Qi.transition;Qi.transition=null;try{He=4,Zu(i,o,c,f)}finally{He=g,Qi.transition=y}}function Zu(i,o,c,f){if(Ol){var g=ec(i,o,c,f);if(g===null)yc(i,o,f,Nl,c),dp(i,f);else if(nk(g,i,o,c,f))f.stopPropagation();else if(dp(i,f),o&4&&-1<tk.indexOf(i)){for(;g!==null;){var y=lo(g);if(y!==null&&up(y),y=ec(i,o,c,f),y===null&&yc(i,o,f,Nl,c),y===g)break;g=y}g!==null&&f.stopPropagation()}else yc(i,o,f,null,c)}}var Nl=null;function ec(i,o,c,f){if(Nl=null,i=_s(f),i=xi(i),i!==null)if(o=yi(i),o===null)i=null;else if(c=o.tag,c===13){if(i=Zd(o),i!==null)return i;i=null}else if(c===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Nl=i,null}function mp(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(U1()){case Xu:return 1;case sp:return 4;case xl:case X1:return 16;case op:return 536870912;default:return 16}default:return 16}}var Fr=null,tc=null,Pl=null;function yp(){if(Pl)return Pl;var i,o=tc,c=o.length,f,g="value"in Fr?Fr.value:Fr.textContent,y=g.length;for(i=0;i<c&&o[i]===g[i];i++);var w=c-i;for(f=1;f<=w&&o[c-f]===g[y-f];f++);return Pl=g.slice(i,1<f?1-f:void 0)}function Tl(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Al(){return!0}function xp(){return!1}function an(i){function o(c,f,g,y,w){this._reactName=c,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var N in i)i.hasOwnProperty(N)&&(c=i[N],this[N]=c?c(y):y[N]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Al:xp,this.isPropagationStopped=xp,this}return J(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=Al)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=Al)},persist:function(){},isPersistent:Al}),o}var $i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nc=an($i),Gs=J({},$i,{view:0,detail:0}),ok=an(Gs),rc,ic,Ys,El=J({},Gs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:oc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Ys&&(Ys&&i.type==="mousemove"?(rc=i.screenX-Ys.screenX,ic=i.screenY-Ys.screenY):ic=rc=0,Ys=i),rc)},movementY:function(i){return"movementY"in i?i.movementY:ic}}),vp=an(El),lk=J({},El,{dataTransfer:0}),ak=an(lk),uk=J({},Gs,{relatedTarget:0}),sc=an(uk),ck=J({},$i,{animationName:0,elapsedTime:0,pseudoElement:0}),hk=an(ck),fk=J({},$i,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),dk=an(fk),pk=J({},$i,{data:0}),kp=an(pk),gk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},mk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},yk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function xk(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=yk[i])?!!o[i]:!1}function oc(){return xk}var vk=J({},Gs,{key:function(i){if(i.key){var o=gk[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Tl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?mk[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:oc,charCode:function(i){return i.type==="keypress"?Tl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Tl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),kk=an(vk),wk=J({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wp=an(wk),bk=J({},Gs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:oc}),Sk=an(bk),Ck=J({},$i,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ok=an(Ck),Nk=J({},El,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Pk=an(Nk),Tk=[9,13,27,32],lc=u&&"CompositionEvent"in window,Js=null;u&&"documentMode"in document&&(Js=document.documentMode);var Ak=u&&"TextEvent"in window&&!Js,bp=u&&(!lc||Js&&8<Js&&11>=Js),Sp=" ",Cp=!1;function Op(i,o){switch(i){case"keyup":return Tk.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Np(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ui=!1;function Ek(i,o){switch(i){case"compositionend":return Np(o);case"keypress":return o.which!==32?null:(Cp=!0,Sp);case"textInput":return i=o.data,i===Sp&&Cp?null:i;default:return null}}function Mk(i,o){if(Ui)return i==="compositionend"||!lc&&Op(i,o)?(i=yp(),Pl=tc=Fr=null,Ui=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return bp&&o.locale!=="ko"?null:o.data;default:return null}}var Rk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Pp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Rk[i.type]:o==="textarea"}function Tp(i,o,c,f){Rt(f),o=Ll(o,"onChange"),0<o.length&&(c=new nc("onChange","change",null,c,f),i.push({event:c,listeners:o}))}var Zs=null,eo=null;function Dk(i){Up(i,0)}function Ml(i){var o=Yi(i);if(_e(o))return i}function jk(i,o){if(i==="change")return o}var Ap=!1;if(u){var ac;if(u){var uc="oninput"in document;if(!uc){var Ep=document.createElement("div");Ep.setAttribute("oninput","return;"),uc=typeof Ep.oninput=="function"}ac=uc}else ac=!1;Ap=ac&&(!document.documentMode||9<document.documentMode)}function Mp(){Zs&&(Zs.detachEvent("onpropertychange",Rp),eo=Zs=null)}function Rp(i){if(i.propertyName==="value"&&Ml(eo)){var o=[];Tp(o,eo,i,_s(i)),gr(Dk,o)}}function Lk(i,o,c){i==="focusin"?(Mp(),Zs=o,eo=c,Zs.attachEvent("onpropertychange",Rp)):i==="focusout"&&Mp()}function Ik(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ml(eo)}function Bk(i,o){if(i==="click")return Ml(o)}function zk(i,o){if(i==="input"||i==="change")return Ml(o)}function Fk(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Dn=typeof Object.is=="function"?Object.is:Fk;function to(i,o){if(Dn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var c=Object.keys(i),f=Object.keys(o);if(c.length!==f.length)return!1;for(f=0;f<c.length;f++){var g=c[f];if(!h.call(o,g)||!Dn(i[g],o[g]))return!1}return!0}function Dp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function jp(i,o){var c=Dp(i);i=0;for(var f;c;){if(c.nodeType===3){if(f=i+c.textContent.length,i<=o&&f>=o)return{node:c,offset:o-i};i=f}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=Dp(c)}}function Lp(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Lp(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Ip(){for(var i=window,o=We();o instanceof i.HTMLIFrameElement;){try{var c=typeof o.contentWindow.location.href=="string"}catch{c=!1}if(c)i=o.contentWindow;else break;o=We(i.document)}return o}function cc(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function _k(i){var o=Ip(),c=i.focusedElem,f=i.selectionRange;if(o!==c&&c&&c.ownerDocument&&Lp(c.ownerDocument.documentElement,c)){if(f!==null&&cc(c)){if(o=f.start,i=f.end,i===void 0&&(i=o),"selectionStart"in c)c.selectionStart=o,c.selectionEnd=Math.min(i,c.value.length);else if(i=(o=c.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=c.textContent.length,y=Math.min(f.start,g);f=f.end===void 0?y:Math.min(f.end,g),!i.extend&&y>f&&(g=f,f=y,y=g),g=jp(c,y);var w=jp(c,f);g&&w&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==w.node||i.focusOffset!==w.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),y>f?(i.addRange(o),i.extend(w.node,w.offset)):(o.setEnd(w.node,w.offset),i.addRange(o)))}}for(o=[],i=c;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof c.focus=="function"&&c.focus(),c=0;c<o.length;c++)i=o[c],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Hk=u&&"documentMode"in document&&11>=document.documentMode,Xi=null,hc=null,no=null,fc=!1;function Bp(i,o,c){var f=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;fc||Xi==null||Xi!==We(f)||(f=Xi,"selectionStart"in f&&cc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),no&&to(no,f)||(no=f,f=Ll(hc,"onSelect"),0<f.length&&(o=new nc("onSelect","select",null,o,c),i.push({event:o,listeners:f}),o.target=Xi)))}function Rl(i,o){var c={};return c[i.toLowerCase()]=o.toLowerCase(),c["Webkit"+i]="webkit"+o,c["Moz"+i]="moz"+o,c}var Ki={animationend:Rl("Animation","AnimationEnd"),animationiteration:Rl("Animation","AnimationIteration"),animationstart:Rl("Animation","AnimationStart"),transitionend:Rl("Transition","TransitionEnd")},dc={},zp={};u&&(zp=document.createElement("div").style,"AnimationEvent"in window||(delete Ki.animationend.animation,delete Ki.animationiteration.animation,delete Ki.animationstart.animation),"TransitionEvent"in window||delete Ki.transitionend.transition);function Dl(i){if(dc[i])return dc[i];if(!Ki[i])return i;var o=Ki[i],c;for(c in o)if(o.hasOwnProperty(c)&&c in zp)return dc[i]=o[c];return i}var Fp=Dl("animationend"),_p=Dl("animationiteration"),Hp=Dl("animationstart"),Wp=Dl("transitionend"),Vp=new Map,Qp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _r(i,o){Vp.set(i,o),l(o,[i])}for(var pc=0;pc<Qp.length;pc++){var gc=Qp[pc],Wk=gc.toLowerCase(),Vk=gc[0].toUpperCase()+gc.slice(1);_r(Wk,"on"+Vk)}_r(Fp,"onAnimationEnd"),_r(_p,"onAnimationIteration"),_r(Hp,"onAnimationStart"),_r("dblclick","onDoubleClick"),_r("focusin","onFocus"),_r("focusout","onBlur"),_r(Wp,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ro="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Qk=new Set("cancel close invalid load scroll toggle".split(" ").concat(ro));function $p(i,o,c){var f=i.type||"unknown-event";i.currentTarget=c,W1(f,o,void 0,i),i.currentTarget=null}function Up(i,o){o=(o&4)!==0;for(var c=0;c<i.length;c++){var f=i[c],g=f.event;f=f.listeners;e:{var y=void 0;if(o)for(var w=f.length-1;0<=w;w--){var N=f[w],A=N.instance,_=N.currentTarget;if(N=N.listener,A!==y&&g.isPropagationStopped())break e;$p(g,N,_),y=A}else for(w=0;w<f.length;w++){if(N=f[w],A=N.instance,_=N.currentTarget,N=N.listener,A!==y&&g.isPropagationStopped())break e;$p(g,N,_),y=A}}}if(ln)throw i=mr,ln=!1,mr=null,i}function Ue(i,o){var c=o[Sc];c===void 0&&(c=o[Sc]=new Set);var f=i+"__bubble";c.has(f)||(Xp(o,i,2,!1),c.add(f))}function mc(i,o,c){var f=0;o&&(f|=4),Xp(c,i,f,o)}var jl="_reactListening"+Math.random().toString(36).slice(2);function io(i){if(!i[jl]){i[jl]=!0,r.forEach(function(c){c!=="selectionchange"&&(Qk.has(c)||mc(c,!1,i),mc(c,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[jl]||(o[jl]=!0,mc("selectionchange",!1,o))}}function Xp(i,o,c,f){switch(mp(o)){case 1:var g=ik;break;case 4:g=sk;break;default:g=Zu}c=g.bind(null,o,c,i),g=void 0,!mn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(o,c,{capture:!0,passive:g}):i.addEventListener(o,c,!0):g!==void 0?i.addEventListener(o,c,{passive:g}):i.addEventListener(o,c,!1)}function yc(i,o,c,f,g){var y=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var N=f.stateNode.containerInfo;if(N===g||N.nodeType===8&&N.parentNode===g)break;if(w===4)for(w=f.return;w!==null;){var A=w.tag;if((A===3||A===4)&&(A=w.stateNode.containerInfo,A===g||A.nodeType===8&&A.parentNode===g))return;w=w.return}for(;N!==null;){if(w=xi(N),w===null)return;if(A=w.tag,A===5||A===6){f=y=w;continue e}N=N.parentNode}}f=f.return}gr(function(){var _=y,Y=_s(c),te=[];e:{var K=Vp.get(i);if(K!==void 0){var fe=nc,ye=i;switch(i){case"keypress":if(Tl(c)===0)break e;case"keydown":case"keyup":fe=kk;break;case"focusin":ye="focus",fe=sc;break;case"focusout":ye="blur",fe=sc;break;case"beforeblur":case"afterblur":fe=sc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":fe=vp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":fe=ak;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":fe=Sk;break;case Fp:case _p:case Hp:fe=hk;break;case Wp:fe=Ok;break;case"scroll":fe=ok;break;case"wheel":fe=Pk;break;case"copy":case"cut":case"paste":fe=dk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":fe=wp}var xe=(o&4)!==0,at=!xe&&i==="scroll",B=xe?K!==null?K+"Capture":null:K;xe=[];for(var D=_,z;D!==null;){z=D;var re=z.stateNode;if(z.tag===5&&re!==null&&(z=re,B!==null&&(re=tt(D,B),re!=null&&xe.push(so(D,re,z)))),at)break;D=D.return}0<xe.length&&(K=new fe(K,ye,null,c,Y),te.push({event:K,listeners:xe}))}}if((o&7)===0){e:{if(K=i==="mouseover"||i==="pointerover",fe=i==="mouseout"||i==="pointerout",K&&c!==pr&&(ye=c.relatedTarget||c.fromElement)&&(xi(ye)||ye[yr]))break e;if((fe||K)&&(K=Y.window===Y?Y:(K=Y.ownerDocument)?K.defaultView||K.parentWindow:window,fe?(ye=c.relatedTarget||c.toElement,fe=_,ye=ye?xi(ye):null,ye!==null&&(at=yi(ye),ye!==at||ye.tag!==5&&ye.tag!==6)&&(ye=null)):(fe=null,ye=_),fe!==ye)){if(xe=vp,re="onMouseLeave",B="onMouseEnter",D="mouse",(i==="pointerout"||i==="pointerover")&&(xe=wp,re="onPointerLeave",B="onPointerEnter",D="pointer"),at=fe==null?K:Yi(fe),z=ye==null?K:Yi(ye),K=new xe(re,D+"leave",fe,c,Y),K.target=at,K.relatedTarget=z,re=null,xi(Y)===_&&(xe=new xe(B,D+"enter",ye,c,Y),xe.target=z,xe.relatedTarget=at,re=xe),at=re,fe&&ye)t:{for(xe=fe,B=ye,D=0,z=xe;z;z=qi(z))D++;for(z=0,re=B;re;re=qi(re))z++;for(;0<D-z;)xe=qi(xe),D--;for(;0<z-D;)B=qi(B),z--;for(;D--;){if(xe===B||B!==null&&xe===B.alternate)break t;xe=qi(xe),B=qi(B)}xe=null}else xe=null;fe!==null&&Kp(te,K,fe,xe,!1),ye!==null&&at!==null&&Kp(te,at,ye,xe,!0)}}e:{if(K=_?Yi(_):window,fe=K.nodeName&&K.nodeName.toLowerCase(),fe==="select"||fe==="input"&&K.type==="file")var ve=jk;else if(Pp(K))if(Ap)ve=zk;else{ve=Ik;var Se=Lk}else(fe=K.nodeName)&&fe.toLowerCase()==="input"&&(K.type==="checkbox"||K.type==="radio")&&(ve=Bk);if(ve&&(ve=ve(i,_))){Tp(te,ve,c,Y);break e}Se&&Se(i,K,_),i==="focusout"&&(Se=K._wrapperState)&&Se.controlled&&K.type==="number"&&ft(K,"number",K.value)}switch(Se=_?Yi(_):window,i){case"focusin":(Pp(Se)||Se.contentEditable==="true")&&(Xi=Se,hc=_,no=null);break;case"focusout":no=hc=Xi=null;break;case"mousedown":fc=!0;break;case"contextmenu":case"mouseup":case"dragend":fc=!1,Bp(te,c,Y);break;case"selectionchange":if(Hk)break;case"keydown":case"keyup":Bp(te,c,Y)}var Ce;if(lc)e:{switch(i){case"compositionstart":var Pe="onCompositionStart";break e;case"compositionend":Pe="onCompositionEnd";break e;case"compositionupdate":Pe="onCompositionUpdate";break e}Pe=void 0}else Ui?Op(i,c)&&(Pe="onCompositionEnd"):i==="keydown"&&c.keyCode===229&&(Pe="onCompositionStart");Pe&&(bp&&c.locale!=="ko"&&(Ui||Pe!=="onCompositionStart"?Pe==="onCompositionEnd"&&Ui&&(Ce=yp()):(Fr=Y,tc="value"in Fr?Fr.value:Fr.textContent,Ui=!0)),Se=Ll(_,Pe),0<Se.length&&(Pe=new kp(Pe,i,null,c,Y),te.push({event:Pe,listeners:Se}),Ce?Pe.data=Ce:(Ce=Np(c),Ce!==null&&(Pe.data=Ce)))),(Ce=Ak?Ek(i,c):Mk(i,c))&&(_=Ll(_,"onBeforeInput"),0<_.length&&(Y=new kp("onBeforeInput","beforeinput",null,c,Y),te.push({event:Y,listeners:_}),Y.data=Ce))}Up(te,o)})}function so(i,o,c){return{instance:i,listener:o,currentTarget:c}}function Ll(i,o){for(var c=o+"Capture",f=[];i!==null;){var g=i,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=tt(i,c),y!=null&&f.unshift(so(i,y,g)),y=tt(i,o),y!=null&&f.push(so(i,y,g))),i=i.return}return f}function qi(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Kp(i,o,c,f,g){for(var y=o._reactName,w=[];c!==null&&c!==f;){var N=c,A=N.alternate,_=N.stateNode;if(A!==null&&A===f)break;N.tag===5&&_!==null&&(N=_,g?(A=tt(c,y),A!=null&&w.unshift(so(c,A,N))):g||(A=tt(c,y),A!=null&&w.push(so(c,A,N)))),c=c.return}w.length!==0&&i.push({event:o,listeners:w})}var $k=/\r\n?/g,Uk=/\u0000|\uFFFD/g;function qp(i){return(typeof i=="string"?i:""+i).replace($k,`
`).replace(Uk,"")}function Il(i,o,c){if(o=qp(o),qp(i)!==o&&c)throw Error(t(425))}function Bl(){}var xc=null,vc=null;function kc(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var wc=typeof setTimeout=="function"?setTimeout:void 0,Xk=typeof clearTimeout=="function"?clearTimeout:void 0,Gp=typeof Promise=="function"?Promise:void 0,Kk=typeof queueMicrotask=="function"?queueMicrotask:typeof Gp<"u"?function(i){return Gp.resolve(null).then(i).catch(qk)}:wc;function qk(i){setTimeout(function(){throw i})}function bc(i,o){var c=o,f=0;do{var g=c.nextSibling;if(i.removeChild(c),g&&g.nodeType===8)if(c=g.data,c==="/$"){if(f===0){i.removeChild(g),qs(o);return}f--}else c!=="$"&&c!=="$?"&&c!=="$!"||f++;c=g}while(c);qs(o)}function Hr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Yp(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="$"||c==="$!"||c==="$?"){if(o===0)return i;o--}else c==="/$"&&o++}i=i.previousSibling}return null}var Gi=Math.random().toString(36).slice(2),Gn="__reactFiber$"+Gi,oo="__reactProps$"+Gi,yr="__reactContainer$"+Gi,Sc="__reactEvents$"+Gi,Gk="__reactListeners$"+Gi,Yk="__reactHandles$"+Gi;function xi(i){var o=i[Gn];if(o)return o;for(var c=i.parentNode;c;){if(o=c[yr]||c[Gn]){if(c=o.alternate,o.child!==null||c!==null&&c.child!==null)for(i=Yp(i);i!==null;){if(c=i[Gn])return c;i=Yp(i)}return o}i=c,c=i.parentNode}return null}function lo(i){return i=i[Gn]||i[yr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Yi(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function zl(i){return i[oo]||null}var Cc=[],Ji=-1;function Wr(i){return{current:i}}function Xe(i){0>Ji||(i.current=Cc[Ji],Cc[Ji]=null,Ji--)}function Qe(i,o){Ji++,Cc[Ji]=i.current,i.current=o}var Vr={},Lt=Wr(Vr),Gt=Wr(!1),vi=Vr;function Zi(i,o){var c=i.type.contextTypes;if(!c)return Vr;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in c)g[y]=o[y];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function Yt(i){return i=i.childContextTypes,i!=null}function Fl(){Xe(Gt),Xe(Lt)}function Jp(i,o,c){if(Lt.current!==Vr)throw Error(t(168));Qe(Lt,o),Qe(Gt,c)}function Zp(i,o,c){var f=i.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return c;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(t(108,ce(i)||"Unknown",g));return J({},c,f)}function _l(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Vr,vi=Lt.current,Qe(Lt,i),Qe(Gt,Gt.current),!0}function eg(i,o,c){var f=i.stateNode;if(!f)throw Error(t(169));c?(i=Zp(i,o,vi),f.__reactInternalMemoizedMergedChildContext=i,Xe(Gt),Xe(Lt),Qe(Lt,i)):Xe(Gt),Qe(Gt,c)}var xr=null,Hl=!1,Oc=!1;function tg(i){xr===null?xr=[i]:xr.push(i)}function Jk(i){Hl=!0,tg(i)}function Qr(){if(!Oc&&xr!==null){Oc=!0;var i=0,o=He;try{var c=xr;for(He=1;i<c.length;i++){var f=c[i];do f=f(!0);while(f!==null)}xr=null,Hl=!1}catch(g){throw xr!==null&&(xr=xr.slice(i+1)),rp(Xu,Qr),g}finally{He=o,Oc=!1}}return null}var es=[],ts=0,Wl=null,Vl=0,yn=[],xn=0,ki=null,vr=1,kr="";function wi(i,o){es[ts++]=Vl,es[ts++]=Wl,Wl=i,Vl=o}function ng(i,o,c){yn[xn++]=vr,yn[xn++]=kr,yn[xn++]=ki,ki=i;var f=vr;i=kr;var g=32-Rn(f)-1;f&=~(1<<g),c+=1;var y=32-Rn(o)+g;if(30<y){var w=g-g%5;y=(f&(1<<w)-1).toString(32),f>>=w,g-=w,vr=1<<32-Rn(o)+g|c<<g|f,kr=y+i}else vr=1<<y|c<<g|f,kr=i}function Nc(i){i.return!==null&&(wi(i,1),ng(i,1,0))}function Pc(i){for(;i===Wl;)Wl=es[--ts],es[ts]=null,Vl=es[--ts],es[ts]=null;for(;i===ki;)ki=yn[--xn],yn[xn]=null,kr=yn[--xn],yn[xn]=null,vr=yn[--xn],yn[xn]=null}var un=null,cn=null,Ge=!1,jn=null;function rg(i,o){var c=bn(5,null,null,0);c.elementType="DELETED",c.stateNode=o,c.return=i,o=i.deletions,o===null?(i.deletions=[c],i.flags|=16):o.push(c)}function ig(i,o){switch(i.tag){case 5:var c=i.type;return o=o.nodeType!==1||c.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,un=i,cn=Hr(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,un=i,cn=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(c=ki!==null?{id:vr,overflow:kr}:null,i.memoizedState={dehydrated:o,treeContext:c,retryLane:1073741824},c=bn(18,null,null,0),c.stateNode=o,c.return=i,i.child=c,un=i,cn=null,!0):!1;default:return!1}}function Tc(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Ac(i){if(Ge){var o=cn;if(o){var c=o;if(!ig(i,o)){if(Tc(i))throw Error(t(418));o=Hr(c.nextSibling);var f=un;o&&ig(i,o)?rg(f,c):(i.flags=i.flags&-4097|2,Ge=!1,un=i)}}else{if(Tc(i))throw Error(t(418));i.flags=i.flags&-4097|2,Ge=!1,un=i}}}function sg(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;un=i}function Ql(i){if(i!==un)return!1;if(!Ge)return sg(i),Ge=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!kc(i.type,i.memoizedProps)),o&&(o=cn)){if(Tc(i))throw og(),Error(t(418));for(;o;)rg(i,o),o=Hr(o.nextSibling)}if(sg(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var c=i.data;if(c==="/$"){if(o===0){cn=Hr(i.nextSibling);break e}o--}else c!=="$"&&c!=="$!"&&c!=="$?"||o++}i=i.nextSibling}cn=null}}else cn=un?Hr(i.stateNode.nextSibling):null;return!0}function og(){for(var i=cn;i;)i=Hr(i.nextSibling)}function ns(){cn=un=null,Ge=!1}function Ec(i){jn===null?jn=[i]:jn.push(i)}var Zk=F.ReactCurrentBatchConfig;function ao(i,o,c){if(i=c.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(c._owner){if(c=c._owner,c){if(c.tag!==1)throw Error(t(309));var f=c.stateNode}if(!f)throw Error(t(147,i));var g=f,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(w){var N=g.refs;w===null?delete N[y]:N[y]=w},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!c._owner)throw Error(t(290,i))}return i}function $l(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function lg(i){var o=i._init;return o(i._payload)}function ag(i){function o(B,D){if(i){var z=B.deletions;z===null?(B.deletions=[D],B.flags|=16):z.push(D)}}function c(B,D){if(!i)return null;for(;D!==null;)o(B,D),D=D.sibling;return null}function f(B,D){for(B=new Map;D!==null;)D.key!==null?B.set(D.key,D):B.set(D.index,D),D=D.sibling;return B}function g(B,D){return B=Jr(B,D),B.index=0,B.sibling=null,B}function y(B,D,z){return B.index=z,i?(z=B.alternate,z!==null?(z=z.index,z<D?(B.flags|=2,D):z):(B.flags|=2,D)):(B.flags|=1048576,D)}function w(B){return i&&B.alternate===null&&(B.flags|=2),B}function N(B,D,z,re){return D===null||D.tag!==6?(D=wh(z,B.mode,re),D.return=B,D):(D=g(D,z),D.return=B,D)}function A(B,D,z,re){var ve=z.type;return ve===R?Y(B,D,z.props.children,re,z.key):D!==null&&(D.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===G&&lg(ve)===D.type)?(re=g(D,z.props),re.ref=ao(B,D,z),re.return=B,re):(re=ga(z.type,z.key,z.props,null,B.mode,re),re.ref=ao(B,D,z),re.return=B,re)}function _(B,D,z,re){return D===null||D.tag!==4||D.stateNode.containerInfo!==z.containerInfo||D.stateNode.implementation!==z.implementation?(D=bh(z,B.mode,re),D.return=B,D):(D=g(D,z.children||[]),D.return=B,D)}function Y(B,D,z,re,ve){return D===null||D.tag!==7?(D=Ai(z,B.mode,re,ve),D.return=B,D):(D=g(D,z),D.return=B,D)}function te(B,D,z){if(typeof D=="string"&&D!==""||typeof D=="number")return D=wh(""+D,B.mode,z),D.return=B,D;if(typeof D=="object"&&D!==null){switch(D.$$typeof){case M:return z=ga(D.type,D.key,D.props,null,B.mode,z),z.ref=ao(B,null,D),z.return=B,z;case L:return D=bh(D,B.mode,z),D.return=B,D;case G:var re=D._init;return te(B,re(D._payload),z)}if(qe(D)||ee(D))return D=Ai(D,B.mode,z,null),D.return=B,D;$l(B,D)}return null}function K(B,D,z,re){var ve=D!==null?D.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ve!==null?null:N(B,D,""+z,re);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case M:return z.key===ve?A(B,D,z,re):null;case L:return z.key===ve?_(B,D,z,re):null;case G:return ve=z._init,K(B,D,ve(z._payload),re)}if(qe(z)||ee(z))return ve!==null?null:Y(B,D,z,re,null);$l(B,z)}return null}function fe(B,D,z,re,ve){if(typeof re=="string"&&re!==""||typeof re=="number")return B=B.get(z)||null,N(D,B,""+re,ve);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case M:return B=B.get(re.key===null?z:re.key)||null,A(D,B,re,ve);case L:return B=B.get(re.key===null?z:re.key)||null,_(D,B,re,ve);case G:var Se=re._init;return fe(B,D,z,Se(re._payload),ve)}if(qe(re)||ee(re))return B=B.get(z)||null,Y(D,B,re,ve,null);$l(D,re)}return null}function ye(B,D,z,re){for(var ve=null,Se=null,Ce=D,Pe=D=0,St=null;Ce!==null&&Pe<z.length;Pe++){Ce.index>Pe?(St=Ce,Ce=null):St=Ce.sibling;var Ie=K(B,Ce,z[Pe],re);if(Ie===null){Ce===null&&(Ce=St);break}i&&Ce&&Ie.alternate===null&&o(B,Ce),D=y(Ie,D,Pe),Se===null?ve=Ie:Se.sibling=Ie,Se=Ie,Ce=St}if(Pe===z.length)return c(B,Ce),Ge&&wi(B,Pe),ve;if(Ce===null){for(;Pe<z.length;Pe++)Ce=te(B,z[Pe],re),Ce!==null&&(D=y(Ce,D,Pe),Se===null?ve=Ce:Se.sibling=Ce,Se=Ce);return Ge&&wi(B,Pe),ve}for(Ce=f(B,Ce);Pe<z.length;Pe++)St=fe(Ce,B,Pe,z[Pe],re),St!==null&&(i&&St.alternate!==null&&Ce.delete(St.key===null?Pe:St.key),D=y(St,D,Pe),Se===null?ve=St:Se.sibling=St,Se=St);return i&&Ce.forEach(function(Zr){return o(B,Zr)}),Ge&&wi(B,Pe),ve}function xe(B,D,z,re){var ve=ee(z);if(typeof ve!="function")throw Error(t(150));if(z=ve.call(z),z==null)throw Error(t(151));for(var Se=ve=null,Ce=D,Pe=D=0,St=null,Ie=z.next();Ce!==null&&!Ie.done;Pe++,Ie=z.next()){Ce.index>Pe?(St=Ce,Ce=null):St=Ce.sibling;var Zr=K(B,Ce,Ie.value,re);if(Zr===null){Ce===null&&(Ce=St);break}i&&Ce&&Zr.alternate===null&&o(B,Ce),D=y(Zr,D,Pe),Se===null?ve=Zr:Se.sibling=Zr,Se=Zr,Ce=St}if(Ie.done)return c(B,Ce),Ge&&wi(B,Pe),ve;if(Ce===null){for(;!Ie.done;Pe++,Ie=z.next())Ie=te(B,Ie.value,re),Ie!==null&&(D=y(Ie,D,Pe),Se===null?ve=Ie:Se.sibling=Ie,Se=Ie);return Ge&&wi(B,Pe),ve}for(Ce=f(B,Ce);!Ie.done;Pe++,Ie=z.next())Ie=fe(Ce,B,Pe,Ie.value,re),Ie!==null&&(i&&Ie.alternate!==null&&Ce.delete(Ie.key===null?Pe:Ie.key),D=y(Ie,D,Pe),Se===null?ve=Ie:Se.sibling=Ie,Se=Ie);return i&&Ce.forEach(function(Rw){return o(B,Rw)}),Ge&&wi(B,Pe),ve}function at(B,D,z,re){if(typeof z=="object"&&z!==null&&z.type===R&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case M:e:{for(var ve=z.key,Se=D;Se!==null;){if(Se.key===ve){if(ve=z.type,ve===R){if(Se.tag===7){c(B,Se.sibling),D=g(Se,z.props.children),D.return=B,B=D;break e}}else if(Se.elementType===ve||typeof ve=="object"&&ve!==null&&ve.$$typeof===G&&lg(ve)===Se.type){c(B,Se.sibling),D=g(Se,z.props),D.ref=ao(B,Se,z),D.return=B,B=D;break e}c(B,Se);break}else o(B,Se);Se=Se.sibling}z.type===R?(D=Ai(z.props.children,B.mode,re,z.key),D.return=B,B=D):(re=ga(z.type,z.key,z.props,null,B.mode,re),re.ref=ao(B,D,z),re.return=B,B=re)}return w(B);case L:e:{for(Se=z.key;D!==null;){if(D.key===Se)if(D.tag===4&&D.stateNode.containerInfo===z.containerInfo&&D.stateNode.implementation===z.implementation){c(B,D.sibling),D=g(D,z.children||[]),D.return=B,B=D;break e}else{c(B,D);break}else o(B,D);D=D.sibling}D=bh(z,B.mode,re),D.return=B,B=D}return w(B);case G:return Se=z._init,at(B,D,Se(z._payload),re)}if(qe(z))return ye(B,D,z,re);if(ee(z))return xe(B,D,z,re);$l(B,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,D!==null&&D.tag===6?(c(B,D.sibling),D=g(D,z),D.return=B,B=D):(c(B,D),D=wh(z,B.mode,re),D.return=B,B=D),w(B)):c(B,D)}return at}var rs=ag(!0),ug=ag(!1),Ul=Wr(null),Xl=null,is=null,Mc=null;function Rc(){Mc=is=Xl=null}function Dc(i){var o=Ul.current;Xe(Ul),i._currentValue=o}function jc(i,o,c){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===c)break;i=i.return}}function ss(i,o){Xl=i,Mc=is=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(Jt=!0),i.firstContext=null)}function vn(i){var o=i._currentValue;if(Mc!==i)if(i={context:i,memoizedValue:o,next:null},is===null){if(Xl===null)throw Error(t(308));is=i,Xl.dependencies={lanes:0,firstContext:i}}else is=is.next=i;return o}var bi=null;function Lc(i){bi===null?bi=[i]:bi.push(i)}function cg(i,o,c,f){var g=o.interleaved;return g===null?(c.next=c,Lc(o)):(c.next=g.next,g.next=c),o.interleaved=c,wr(i,f)}function wr(i,o){i.lanes|=o;var c=i.alternate;for(c!==null&&(c.lanes|=o),c=i,i=i.return;i!==null;)i.childLanes|=o,c=i.alternate,c!==null&&(c.childLanes|=o),c=i,i=i.return;return c.tag===3?c.stateNode:null}var $r=!1;function Ic(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function hg(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function br(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Ur(i,o,c){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Le&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,wr(i,c)}return g=f.interleaved,g===null?(o.next=o,Lc(f)):(o.next=g.next,g.next=o),f.interleaved=o,wr(i,c)}function Kl(i,o,c){if(o=o.updateQueue,o!==null&&(o=o.shared,(c&4194240)!==0)){var f=o.lanes;f&=i.pendingLanes,c|=f,o.lanes=c,Gu(i,c)}}function fg(i,o){var c=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,c===f)){var g=null,y=null;if(c=c.firstBaseUpdate,c!==null){do{var w={eventTime:c.eventTime,lane:c.lane,tag:c.tag,payload:c.payload,callback:c.callback,next:null};y===null?g=y=w:y=y.next=w,c=c.next}while(c!==null);y===null?g=y=o:y=y.next=o}else g=y=o;c={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,effects:f.effects},i.updateQueue=c;return}i=c.lastBaseUpdate,i===null?c.firstBaseUpdate=o:i.next=o,c.lastBaseUpdate=o}function ql(i,o,c,f){var g=i.updateQueue;$r=!1;var y=g.firstBaseUpdate,w=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var A=N,_=A.next;A.next=null,w===null?y=_:w.next=_,w=A;var Y=i.alternate;Y!==null&&(Y=Y.updateQueue,N=Y.lastBaseUpdate,N!==w&&(N===null?Y.firstBaseUpdate=_:N.next=_,Y.lastBaseUpdate=A))}if(y!==null){var te=g.baseState;w=0,Y=_=A=null,N=y;do{var K=N.lane,fe=N.eventTime;if((f&K)===K){Y!==null&&(Y=Y.next={eventTime:fe,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var ye=i,xe=N;switch(K=o,fe=c,xe.tag){case 1:if(ye=xe.payload,typeof ye=="function"){te=ye.call(fe,te,K);break e}te=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=xe.payload,K=typeof ye=="function"?ye.call(fe,te,K):ye,K==null)break e;te=J({},te,K);break e;case 2:$r=!0}}N.callback!==null&&N.lane!==0&&(i.flags|=64,K=g.effects,K===null?g.effects=[N]:K.push(N))}else fe={eventTime:fe,lane:K,tag:N.tag,payload:N.payload,callback:N.callback,next:null},Y===null?(_=Y=fe,A=te):Y=Y.next=fe,w|=K;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;K=N,N=K.next,K.next=null,g.lastBaseUpdate=K,g.shared.pending=null}}while(!0);if(Y===null&&(A=te),g.baseState=A,g.firstBaseUpdate=_,g.lastBaseUpdate=Y,o=g.shared.interleaved,o!==null){g=o;do w|=g.lane,g=g.next;while(g!==o)}else y===null&&(g.shared.lanes=0);Oi|=w,i.lanes=w,i.memoizedState=te}}function dg(i,o,c){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var f=i[o],g=f.callback;if(g!==null){if(f.callback=null,f=c,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var uo={},Yn=Wr(uo),co=Wr(uo),ho=Wr(uo);function Si(i){if(i===uo)throw Error(t(174));return i}function Bc(i,o){switch(Qe(ho,o),Qe(co,i),Qe(Yn,uo),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:on(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=on(o,i)}Xe(Yn),Qe(Yn,o)}function os(){Xe(Yn),Xe(co),Xe(ho)}function pg(i){Si(ho.current);var o=Si(Yn.current),c=on(o,i.type);o!==c&&(Qe(co,i),Qe(Yn,c))}function zc(i){co.current===i&&(Xe(Yn),Xe(co))}var nt=Wr(0);function Gl(i){for(var o=i;o!==null;){if(o.tag===13){var c=o.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||c.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Fc=[];function _c(){for(var i=0;i<Fc.length;i++)Fc[i]._workInProgressVersionPrimary=null;Fc.length=0}var Yl=F.ReactCurrentDispatcher,Hc=F.ReactCurrentBatchConfig,Ci=0,rt=null,mt=null,wt=null,Jl=!1,fo=!1,po=0,ew=0;function It(){throw Error(t(321))}function Wc(i,o){if(o===null)return!1;for(var c=0;c<o.length&&c<i.length;c++)if(!Dn(i[c],o[c]))return!1;return!0}function Vc(i,o,c,f,g,y){if(Ci=y,rt=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Yl.current=i===null||i.memoizedState===null?iw:sw,i=c(f,g),fo){y=0;do{if(fo=!1,po=0,25<=y)throw Error(t(301));y+=1,wt=mt=null,o.updateQueue=null,Yl.current=ow,i=c(f,g)}while(fo)}if(Yl.current=ta,o=mt!==null&&mt.next!==null,Ci=0,wt=mt=rt=null,Jl=!1,o)throw Error(t(300));return i}function Qc(){var i=po!==0;return po=0,i}function Jn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return wt===null?rt.memoizedState=wt=i:wt=wt.next=i,wt}function kn(){if(mt===null){var i=rt.alternate;i=i!==null?i.memoizedState:null}else i=mt.next;var o=wt===null?rt.memoizedState:wt.next;if(o!==null)wt=o,mt=i;else{if(i===null)throw Error(t(310));mt=i,i={memoizedState:mt.memoizedState,baseState:mt.baseState,baseQueue:mt.baseQueue,queue:mt.queue,next:null},wt===null?rt.memoizedState=wt=i:wt=wt.next=i}return wt}function go(i,o){return typeof o=="function"?o(i):o}function $c(i){var o=kn(),c=o.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var f=mt,g=f.baseQueue,y=c.pending;if(y!==null){if(g!==null){var w=g.next;g.next=y.next,y.next=w}f.baseQueue=g=y,c.pending=null}if(g!==null){y=g.next,f=f.baseState;var N=w=null,A=null,_=y;do{var Y=_.lane;if((Ci&Y)===Y)A!==null&&(A=A.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),f=_.hasEagerState?_.eagerState:i(f,_.action);else{var te={lane:Y,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};A===null?(N=A=te,w=f):A=A.next=te,rt.lanes|=Y,Oi|=Y}_=_.next}while(_!==null&&_!==y);A===null?w=f:A.next=N,Dn(f,o.memoizedState)||(Jt=!0),o.memoizedState=f,o.baseState=w,o.baseQueue=A,c.lastRenderedState=f}if(i=c.interleaved,i!==null){g=i;do y=g.lane,rt.lanes|=y,Oi|=y,g=g.next;while(g!==i)}else g===null&&(c.lanes=0);return[o.memoizedState,c.dispatch]}function Uc(i){var o=kn(),c=o.queue;if(c===null)throw Error(t(311));c.lastRenderedReducer=i;var f=c.dispatch,g=c.pending,y=o.memoizedState;if(g!==null){c.pending=null;var w=g=g.next;do y=i(y,w.action),w=w.next;while(w!==g);Dn(y,o.memoizedState)||(Jt=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),c.lastRenderedState=y}return[y,f]}function gg(){}function mg(i,o){var c=rt,f=kn(),g=o(),y=!Dn(f.memoizedState,g);if(y&&(f.memoizedState=g,Jt=!0),f=f.queue,Xc(vg.bind(null,c,f,i),[i]),f.getSnapshot!==o||y||wt!==null&&wt.memoizedState.tag&1){if(c.flags|=2048,mo(9,xg.bind(null,c,f,g,o),void 0,null),bt===null)throw Error(t(349));(Ci&30)!==0||yg(c,o,g)}return g}function yg(i,o,c){i.flags|=16384,i={getSnapshot:o,value:c},o=rt.updateQueue,o===null?(o={lastEffect:null,stores:null},rt.updateQueue=o,o.stores=[i]):(c=o.stores,c===null?o.stores=[i]:c.push(i))}function xg(i,o,c,f){o.value=c,o.getSnapshot=f,kg(o)&&wg(i)}function vg(i,o,c){return c(function(){kg(o)&&wg(i)})}function kg(i){var o=i.getSnapshot;i=i.value;try{var c=o();return!Dn(i,c)}catch{return!0}}function wg(i){var o=wr(i,1);o!==null&&zn(o,i,1,-1)}function bg(i){var o=Jn();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:go,lastRenderedState:i},o.queue=i,i=i.dispatch=rw.bind(null,rt,i),[o.memoizedState,i]}function mo(i,o,c,f){return i={tag:i,create:o,destroy:c,deps:f,next:null},o=rt.updateQueue,o===null?(o={lastEffect:null,stores:null},rt.updateQueue=o,o.lastEffect=i.next=i):(c=o.lastEffect,c===null?o.lastEffect=i.next=i:(f=c.next,c.next=i,i.next=f,o.lastEffect=i)),i}function Sg(){return kn().memoizedState}function Zl(i,o,c,f){var g=Jn();rt.flags|=i,g.memoizedState=mo(1|o,c,void 0,f===void 0?null:f)}function ea(i,o,c,f){var g=kn();f=f===void 0?null:f;var y=void 0;if(mt!==null){var w=mt.memoizedState;if(y=w.destroy,f!==null&&Wc(f,w.deps)){g.memoizedState=mo(o,c,y,f);return}}rt.flags|=i,g.memoizedState=mo(1|o,c,y,f)}function Cg(i,o){return Zl(8390656,8,i,o)}function Xc(i,o){return ea(2048,8,i,o)}function Og(i,o){return ea(4,2,i,o)}function Ng(i,o){return ea(4,4,i,o)}function Pg(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function Tg(i,o,c){return c=c!=null?c.concat([i]):null,ea(4,4,Pg.bind(null,o,i),c)}function Kc(){}function Ag(i,o){var c=kn();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&Wc(o,f[1])?f[0]:(c.memoizedState=[i,o],i)}function Eg(i,o){var c=kn();o=o===void 0?null:o;var f=c.memoizedState;return f!==null&&o!==null&&Wc(o,f[1])?f[0]:(i=i(),c.memoizedState=[i,o],i)}function Mg(i,o,c){return(Ci&21)===0?(i.baseState&&(i.baseState=!1,Jt=!0),i.memoizedState=c):(Dn(c,o)||(c=lp(),rt.lanes|=c,Oi|=c,i.baseState=!0),o)}function tw(i,o){var c=He;He=c!==0&&4>c?c:4,i(!0);var f=Hc.transition;Hc.transition={};try{i(!1),o()}finally{He=c,Hc.transition=f}}function Rg(){return kn().memoizedState}function nw(i,o,c){var f=Gr(i);if(c={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null},Dg(i))jg(o,c);else if(c=cg(i,o,c,f),c!==null){var g=$t();zn(c,i,f,g),Lg(c,o,f)}}function rw(i,o,c){var f=Gr(i),g={lane:f,action:c,hasEagerState:!1,eagerState:null,next:null};if(Dg(i))jg(o,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var w=o.lastRenderedState,N=y(w,c);if(g.hasEagerState=!0,g.eagerState=N,Dn(N,w)){var A=o.interleaved;A===null?(g.next=g,Lc(o)):(g.next=A.next,A.next=g),o.interleaved=g;return}}catch{}finally{}c=cg(i,o,g,f),c!==null&&(g=$t(),zn(c,i,f,g),Lg(c,o,f))}}function Dg(i){var o=i.alternate;return i===rt||o!==null&&o===rt}function jg(i,o){fo=Jl=!0;var c=i.pending;c===null?o.next=o:(o.next=c.next,c.next=o),i.pending=o}function Lg(i,o,c){if((c&4194240)!==0){var f=o.lanes;f&=i.pendingLanes,c|=f,o.lanes=c,Gu(i,c)}}var ta={readContext:vn,useCallback:It,useContext:It,useEffect:It,useImperativeHandle:It,useInsertionEffect:It,useLayoutEffect:It,useMemo:It,useReducer:It,useRef:It,useState:It,useDebugValue:It,useDeferredValue:It,useTransition:It,useMutableSource:It,useSyncExternalStore:It,useId:It,unstable_isNewReconciler:!1},iw={readContext:vn,useCallback:function(i,o){return Jn().memoizedState=[i,o===void 0?null:o],i},useContext:vn,useEffect:Cg,useImperativeHandle:function(i,o,c){return c=c!=null?c.concat([i]):null,Zl(4194308,4,Pg.bind(null,o,i),c)},useLayoutEffect:function(i,o){return Zl(4194308,4,i,o)},useInsertionEffect:function(i,o){return Zl(4,2,i,o)},useMemo:function(i,o){var c=Jn();return o=o===void 0?null:o,i=i(),c.memoizedState=[i,o],i},useReducer:function(i,o,c){var f=Jn();return o=c!==void 0?c(o):o,f.memoizedState=f.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},f.queue=i,i=i.dispatch=nw.bind(null,rt,i),[f.memoizedState,i]},useRef:function(i){var o=Jn();return i={current:i},o.memoizedState=i},useState:bg,useDebugValue:Kc,useDeferredValue:function(i){return Jn().memoizedState=i},useTransition:function(){var i=bg(!1),o=i[0];return i=tw.bind(null,i[1]),Jn().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,c){var f=rt,g=Jn();if(Ge){if(c===void 0)throw Error(t(407));c=c()}else{if(c=o(),bt===null)throw Error(t(349));(Ci&30)!==0||yg(f,o,c)}g.memoizedState=c;var y={value:c,getSnapshot:o};return g.queue=y,Cg(vg.bind(null,f,y,i),[i]),f.flags|=2048,mo(9,xg.bind(null,f,y,c,o),void 0,null),c},useId:function(){var i=Jn(),o=bt.identifierPrefix;if(Ge){var c=kr,f=vr;c=(f&~(1<<32-Rn(f)-1)).toString(32)+c,o=":"+o+"R"+c,c=po++,0<c&&(o+="H"+c.toString(32)),o+=":"}else c=ew++,o=":"+o+"r"+c.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},sw={readContext:vn,useCallback:Ag,useContext:vn,useEffect:Xc,useImperativeHandle:Tg,useInsertionEffect:Og,useLayoutEffect:Ng,useMemo:Eg,useReducer:$c,useRef:Sg,useState:function(){return $c(go)},useDebugValue:Kc,useDeferredValue:function(i){var o=kn();return Mg(o,mt.memoizedState,i)},useTransition:function(){var i=$c(go)[0],o=kn().memoizedState;return[i,o]},useMutableSource:gg,useSyncExternalStore:mg,useId:Rg,unstable_isNewReconciler:!1},ow={readContext:vn,useCallback:Ag,useContext:vn,useEffect:Xc,useImperativeHandle:Tg,useInsertionEffect:Og,useLayoutEffect:Ng,useMemo:Eg,useReducer:Uc,useRef:Sg,useState:function(){return Uc(go)},useDebugValue:Kc,useDeferredValue:function(i){var o=kn();return mt===null?o.memoizedState=i:Mg(o,mt.memoizedState,i)},useTransition:function(){var i=Uc(go)[0],o=kn().memoizedState;return[i,o]},useMutableSource:gg,useSyncExternalStore:mg,useId:Rg,unstable_isNewReconciler:!1};function Ln(i,o){if(i&&i.defaultProps){o=J({},o),i=i.defaultProps;for(var c in i)o[c]===void 0&&(o[c]=i[c]);return o}return o}function qc(i,o,c,f){o=i.memoizedState,c=c(f,o),c=c==null?o:J({},o,c),i.memoizedState=c,i.lanes===0&&(i.updateQueue.baseState=c)}var na={isMounted:function(i){return(i=i._reactInternals)?yi(i)===i:!1},enqueueSetState:function(i,o,c){i=i._reactInternals;var f=$t(),g=Gr(i),y=br(f,g);y.payload=o,c!=null&&(y.callback=c),o=Ur(i,y,g),o!==null&&(zn(o,i,g,f),Kl(o,i,g))},enqueueReplaceState:function(i,o,c){i=i._reactInternals;var f=$t(),g=Gr(i),y=br(f,g);y.tag=1,y.payload=o,c!=null&&(y.callback=c),o=Ur(i,y,g),o!==null&&(zn(o,i,g,f),Kl(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var c=$t(),f=Gr(i),g=br(c,f);g.tag=2,o!=null&&(g.callback=o),o=Ur(i,g,f),o!==null&&(zn(o,i,f,c),Kl(o,i,f))}};function Ig(i,o,c,f,g,y,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,y,w):o.prototype&&o.prototype.isPureReactComponent?!to(c,f)||!to(g,y):!0}function Bg(i,o,c){var f=!1,g=Vr,y=o.contextType;return typeof y=="object"&&y!==null?y=vn(y):(g=Yt(o)?vi:Lt.current,f=o.contextTypes,y=(f=f!=null)?Zi(i,g):Vr),o=new o(c,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=na,i.stateNode=o,o._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=y),o}function zg(i,o,c,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(c,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(c,f),o.state!==i&&na.enqueueReplaceState(o,o.state,null)}function Gc(i,o,c,f){var g=i.stateNode;g.props=c,g.state=i.memoizedState,g.refs={},Ic(i);var y=o.contextType;typeof y=="object"&&y!==null?g.context=vn(y):(y=Yt(o)?vi:Lt.current,g.context=Zi(i,y)),g.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(qc(i,o,y,c),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&na.enqueueReplaceState(g,g.state,null),ql(i,c,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function ls(i,o){try{var c="",f=o;do c+=me(f),f=f.return;while(f);var g=c}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:g,digest:null}}function Yc(i,o,c){return{value:i,source:null,stack:c??null,digest:o??null}}function Jc(i,o){try{console.error(o.value)}catch(c){setTimeout(function(){throw c})}}var lw=typeof WeakMap=="function"?WeakMap:Map;function Fg(i,o,c){c=br(-1,c),c.tag=3,c.payload={element:null};var f=o.value;return c.callback=function(){ua||(ua=!0,dh=f),Jc(i,o)},c}function _g(i,o,c){c=br(-1,c),c.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;c.payload=function(){return f(g)},c.callback=function(){Jc(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(c.callback=function(){Jc(i,o),typeof f!="function"&&(Kr===null?Kr=new Set([this]):Kr.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})}),c}function Hg(i,o,c){var f=i.pingCache;if(f===null){f=i.pingCache=new lw;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(c)||(g.add(c),i=ww.bind(null,i,o,c),o.then(i,i))}function Wg(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Vg(i,o,c,f,g){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,c.flags|=131072,c.flags&=-52805,c.tag===1&&(c.alternate===null?c.tag=17:(o=br(-1,1),o.tag=2,Ur(c,o,1))),c.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var aw=F.ReactCurrentOwner,Jt=!1;function Qt(i,o,c,f){o.child=i===null?ug(o,null,c,f):rs(o,i.child,c,f)}function Qg(i,o,c,f,g){c=c.render;var y=o.ref;return ss(o,g),f=Vc(i,o,c,f,y,g),c=Qc(),i!==null&&!Jt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Sr(i,o,g)):(Ge&&c&&Nc(o),o.flags|=1,Qt(i,o,f,g),o.child)}function $g(i,o,c,f,g){if(i===null){var y=c.type;return typeof y=="function"&&!kh(y)&&y.defaultProps===void 0&&c.compare===null&&c.defaultProps===void 0?(o.tag=15,o.type=y,Ug(i,o,y,f,g)):(i=ga(c.type,null,f,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&g)===0){var w=y.memoizedProps;if(c=c.compare,c=c!==null?c:to,c(w,f)&&i.ref===o.ref)return Sr(i,o,g)}return o.flags|=1,i=Jr(y,f),i.ref=o.ref,i.return=o,o.child=i}function Ug(i,o,c,f,g){if(i!==null){var y=i.memoizedProps;if(to(y,f)&&i.ref===o.ref)if(Jt=!1,o.pendingProps=f=y,(i.lanes&g)!==0)(i.flags&131072)!==0&&(Jt=!0);else return o.lanes=i.lanes,Sr(i,o,g)}return Zc(i,o,c,f,g)}function Xg(i,o,c){var f=o.pendingProps,g=f.children,y=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(us,hn),hn|=c;else{if((c&1073741824)===0)return i=y!==null?y.baseLanes|c:c,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Qe(us,hn),hn|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=y!==null?y.baseLanes:c,Qe(us,hn),hn|=f}else y!==null?(f=y.baseLanes|c,o.memoizedState=null):f=c,Qe(us,hn),hn|=f;return Qt(i,o,g,c),o.child}function Kg(i,o){var c=o.ref;(i===null&&c!==null||i!==null&&i.ref!==c)&&(o.flags|=512,o.flags|=2097152)}function Zc(i,o,c,f,g){var y=Yt(c)?vi:Lt.current;return y=Zi(o,y),ss(o,g),c=Vc(i,o,c,f,y,g),f=Qc(),i!==null&&!Jt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,Sr(i,o,g)):(Ge&&f&&Nc(o),o.flags|=1,Qt(i,o,c,g),o.child)}function qg(i,o,c,f,g){if(Yt(c)){var y=!0;_l(o)}else y=!1;if(ss(o,g),o.stateNode===null)ia(i,o),Bg(o,c,f),Gc(o,c,f,g),f=!0;else if(i===null){var w=o.stateNode,N=o.memoizedProps;w.props=N;var A=w.context,_=c.contextType;typeof _=="object"&&_!==null?_=vn(_):(_=Yt(c)?vi:Lt.current,_=Zi(o,_));var Y=c.getDerivedStateFromProps,te=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";te||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==f||A!==_)&&zg(o,w,f,_),$r=!1;var K=o.memoizedState;w.state=K,ql(o,f,w,g),A=o.memoizedState,N!==f||K!==A||Gt.current||$r?(typeof Y=="function"&&(qc(o,c,Y,f),A=o.memoizedState),(N=$r||Ig(o,c,N,f,K,A,_))?(te||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=A),w.props=f,w.state=A,w.context=_,f=N):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{w=o.stateNode,hg(i,o),N=o.memoizedProps,_=o.type===o.elementType?N:Ln(o.type,N),w.props=_,te=o.pendingProps,K=w.context,A=c.contextType,typeof A=="object"&&A!==null?A=vn(A):(A=Yt(c)?vi:Lt.current,A=Zi(o,A));var fe=c.getDerivedStateFromProps;(Y=typeof fe=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==te||K!==A)&&zg(o,w,f,A),$r=!1,K=o.memoizedState,w.state=K,ql(o,f,w,g);var ye=o.memoizedState;N!==te||K!==ye||Gt.current||$r?(typeof fe=="function"&&(qc(o,c,fe,f),ye=o.memoizedState),(_=$r||Ig(o,c,_,f,K,ye,A)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(f,ye,A),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(f,ye,A)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===i.memoizedProps&&K===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&K===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ye),w.props=f,w.state=ye,w.context=A,f=_):(typeof w.componentDidUpdate!="function"||N===i.memoizedProps&&K===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&K===i.memoizedState||(o.flags|=1024),f=!1)}return eh(i,o,c,f,y,g)}function eh(i,o,c,f,g,y){Kg(i,o);var w=(o.flags&128)!==0;if(!f&&!w)return g&&eg(o,c,!1),Sr(i,o,y);f=o.stateNode,aw.current=o;var N=w&&typeof c.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,i!==null&&w?(o.child=rs(o,i.child,null,y),o.child=rs(o,null,N,y)):Qt(i,o,N,y),o.memoizedState=f.state,g&&eg(o,c,!0),o.child}function Gg(i){var o=i.stateNode;o.pendingContext?Jp(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Jp(i,o.context,!1),Bc(i,o.containerInfo)}function Yg(i,o,c,f,g){return ns(),Ec(g),o.flags|=256,Qt(i,o,c,f),o.child}var th={dehydrated:null,treeContext:null,retryLane:0};function nh(i){return{baseLanes:i,cachePool:null,transitions:null}}function Jg(i,o,c){var f=o.pendingProps,g=nt.current,y=!1,w=(o.flags&128)!==0,N;if((N=w)||(N=i!==null&&i.memoizedState===null?!1:(g&2)!==0),N?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),Qe(nt,g&1),i===null)return Ac(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(w=f.children,i=f.fallback,y?(f=o.mode,y=o.child,w={mode:"hidden",children:w},(f&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=w):y=ma(w,f,0,null),i=Ai(i,f,c,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=nh(c),o.memoizedState=th,i):rh(o,w));if(g=i.memoizedState,g!==null&&(N=g.dehydrated,N!==null))return uw(i,o,w,f,N,g,c);if(y){y=f.fallback,w=o.mode,g=i.child,N=g.sibling;var A={mode:"hidden",children:f.children};return(w&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=A,o.deletions=null):(f=Jr(g,A),f.subtreeFlags=g.subtreeFlags&14680064),N!==null?y=Jr(N,y):(y=Ai(y,w,c,null),y.flags|=2),y.return=o,f.return=o,f.sibling=y,o.child=f,f=y,y=o.child,w=i.child.memoizedState,w=w===null?nh(c):{baseLanes:w.baseLanes|c,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=i.childLanes&~c,o.memoizedState=th,f}return y=i.child,i=y.sibling,f=Jr(y,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=c),f.return=o,f.sibling=null,i!==null&&(c=o.deletions,c===null?(o.deletions=[i],o.flags|=16):c.push(i)),o.child=f,o.memoizedState=null,f}function rh(i,o){return o=ma({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function ra(i,o,c,f){return f!==null&&Ec(f),rs(o,i.child,null,c),i=rh(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function uw(i,o,c,f,g,y,w){if(c)return o.flags&256?(o.flags&=-257,f=Yc(Error(t(422))),ra(i,o,w,f)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=f.fallback,g=o.mode,f=ma({mode:"visible",children:f.children},g,0,null),y=Ai(y,g,w,null),y.flags|=2,f.return=o,y.return=o,f.sibling=y,o.child=f,(o.mode&1)!==0&&rs(o,i.child,null,w),o.child.memoizedState=nh(w),o.memoizedState=th,y);if((o.mode&1)===0)return ra(i,o,w,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var N=f.dgst;return f=N,y=Error(t(419)),f=Yc(y,f,void 0),ra(i,o,w,f)}if(N=(w&i.childLanes)!==0,Jt||N){if(f=bt,f!==null){switch(w&-w){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|w))!==0?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,wr(i,g),zn(f,i,g,-1))}return vh(),f=Yc(Error(t(421))),ra(i,o,w,f)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=bw.bind(null,i),g._reactRetry=o,null):(i=y.treeContext,cn=Hr(g.nextSibling),un=o,Ge=!0,jn=null,i!==null&&(yn[xn++]=vr,yn[xn++]=kr,yn[xn++]=ki,vr=i.id,kr=i.overflow,ki=o),o=rh(o,f.children),o.flags|=4096,o)}function Zg(i,o,c){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),jc(i.return,o,c)}function ih(i,o,c,f,g){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:c,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=c,y.tailMode=g)}function em(i,o,c){var f=o.pendingProps,g=f.revealOrder,y=f.tail;if(Qt(i,o,f.children,c),f=nt.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Zg(i,c,o);else if(i.tag===19)Zg(i,c,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(Qe(nt,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(c=o.child,g=null;c!==null;)i=c.alternate,i!==null&&Gl(i)===null&&(g=c),c=c.sibling;c=g,c===null?(g=o.child,o.child=null):(g=c.sibling,c.sibling=null),ih(o,!1,g,c,y);break;case"backwards":for(c=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Gl(i)===null){o.child=g;break}i=g.sibling,g.sibling=c,c=g,g=i}ih(o,!0,c,null,y);break;case"together":ih(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ia(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function Sr(i,o,c){if(i!==null&&(o.dependencies=i.dependencies),Oi|=o.lanes,(c&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,c=Jr(i,i.pendingProps),o.child=c,c.return=o;i.sibling!==null;)i=i.sibling,c=c.sibling=Jr(i,i.pendingProps),c.return=o;c.sibling=null}return o.child}function cw(i,o,c){switch(o.tag){case 3:Gg(o),ns();break;case 5:pg(o);break;case 1:Yt(o.type)&&_l(o);break;case 4:Bc(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;Qe(Ul,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Qe(nt,nt.current&1),o.flags|=128,null):(c&o.child.childLanes)!==0?Jg(i,o,c):(Qe(nt,nt.current&1),i=Sr(i,o,c),i!==null?i.sibling:null);Qe(nt,nt.current&1);break;case 19:if(f=(c&o.childLanes)!==0,(i.flags&128)!==0){if(f)return em(i,o,c);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Qe(nt,nt.current),f)break;return null;case 22:case 23:return o.lanes=0,Xg(i,o,c)}return Sr(i,o,c)}var tm,sh,nm,rm;tm=function(i,o){for(var c=o.child;c!==null;){if(c.tag===5||c.tag===6)i.appendChild(c.stateNode);else if(c.tag!==4&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===o)break;for(;c.sibling===null;){if(c.return===null||c.return===o)return;c=c.return}c.sibling.return=c.return,c=c.sibling}},sh=function(){},nm=function(i,o,c,f){var g=i.memoizedProps;if(g!==f){i=o.stateNode,Si(Yn.current);var y=null;switch(c){case"input":g=Ke(i,g),f=Ke(i,f),y=[];break;case"select":g=J({},g,{value:void 0}),f=J({},f,{value:void 0}),y=[];break;case"textarea":g=Kt(i,g),f=Kt(i,f),y=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Bl)}fr(c,f);var w;c=null;for(_ in g)if(!f.hasOwnProperty(_)&&g.hasOwnProperty(_)&&g[_]!=null)if(_==="style"){var N=g[_];for(w in N)N.hasOwnProperty(w)&&(c||(c={}),c[w]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?y||(y=[]):(y=y||[]).push(_,null));for(_ in f){var A=f[_];if(N=g!=null?g[_]:void 0,f.hasOwnProperty(_)&&A!==N&&(A!=null||N!=null))if(_==="style")if(N){for(w in N)!N.hasOwnProperty(w)||A&&A.hasOwnProperty(w)||(c||(c={}),c[w]="");for(w in A)A.hasOwnProperty(w)&&N[w]!==A[w]&&(c||(c={}),c[w]=A[w])}else c||(y||(y=[]),y.push(_,c)),c=A;else _==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,N=N?N.__html:void 0,A!=null&&N!==A&&(y=y||[]).push(_,A)):_==="children"?typeof A!="string"&&typeof A!="number"||(y=y||[]).push(_,""+A):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(s.hasOwnProperty(_)?(A!=null&&_==="onScroll"&&Ue("scroll",i),y||N===A||(y=[])):(y=y||[]).push(_,A))}c&&(y=y||[]).push("style",c);var _=y;(o.updateQueue=_)&&(o.flags|=4)}},rm=function(i,o,c,f){c!==f&&(o.flags|=4)};function yo(i,o){if(!Ge)switch(i.tailMode){case"hidden":o=i.tail;for(var c=null;o!==null;)o.alternate!==null&&(c=o),o=o.sibling;c===null?i.tail=null:c.sibling=null;break;case"collapsed":c=i.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Bt(i){var o=i.alternate!==null&&i.alternate.child===i.child,c=0,f=0;if(o)for(var g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)c|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=c,o}function hw(i,o,c){var f=o.pendingProps;switch(Pc(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(o),null;case 1:return Yt(o.type)&&Fl(),Bt(o),null;case 3:return f=o.stateNode,os(),Xe(Gt),Xe(Lt),_c(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Ql(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,jn!==null&&(mh(jn),jn=null))),sh(i,o),Bt(o),null;case 5:zc(o);var g=Si(ho.current);if(c=o.type,i!==null&&o.stateNode!=null)nm(i,o,c,f,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return Bt(o),null}if(i=Si(Yn.current),Ql(o)){f=o.stateNode,c=o.type;var y=o.memoizedProps;switch(f[Gn]=o,f[oo]=y,i=(o.mode&1)!==0,c){case"dialog":Ue("cancel",f),Ue("close",f);break;case"iframe":case"object":case"embed":Ue("load",f);break;case"video":case"audio":for(g=0;g<ro.length;g++)Ue(ro[g],f);break;case"source":Ue("error",f);break;case"img":case"image":case"link":Ue("error",f),Ue("load",f);break;case"details":Ue("toggle",f);break;case"input":he(f,y),Ue("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!y.multiple},Ue("invalid",f);break;case"textarea":cr(f,y),Ue("invalid",f)}fr(c,y),g=null;for(var w in y)if(y.hasOwnProperty(w)){var N=y[w];w==="children"?typeof N=="string"?f.textContent!==N&&(y.suppressHydrationWarning!==!0&&Il(f.textContent,N,i),g=["children",N]):typeof N=="number"&&f.textContent!==""+N&&(y.suppressHydrationWarning!==!0&&Il(f.textContent,N,i),g=["children",""+N]):s.hasOwnProperty(w)&&N!=null&&w==="onScroll"&&Ue("scroll",f)}switch(c){case"input":Ae(f),Tn(f,y,!0);break;case"textarea":Ae(f),hr(f);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(f.onclick=Bl)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{w=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=gi(c)),i==="http://www.w3.org/1999/xhtml"?c==="script"?(i=w.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=w.createElement(c,{is:f.is}):(i=w.createElement(c),c==="select"&&(w=i,f.multiple?w.multiple=!0:f.size&&(w.size=f.size))):i=w.createElementNS(i,c),i[Gn]=o,i[oo]=f,tm(i,o,!1,!1),o.stateNode=i;e:{switch(w=dr(c,f),c){case"dialog":Ue("cancel",i),Ue("close",i),g=f;break;case"iframe":case"object":case"embed":Ue("load",i),g=f;break;case"video":case"audio":for(g=0;g<ro.length;g++)Ue(ro[g],i);g=f;break;case"source":Ue("error",i),g=f;break;case"img":case"image":case"link":Ue("error",i),Ue("load",i),g=f;break;case"details":Ue("toggle",i),g=f;break;case"input":he(i,f),g=Ke(i,f),Ue("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=J({},f,{value:void 0}),Ue("invalid",i);break;case"textarea":cr(i,f),g=Kt(i,f),Ue("invalid",i);break;default:g=f}fr(c,g),N=g;for(y in N)if(N.hasOwnProperty(y)){var A=N[y];y==="style"?mi(i,A):y==="dangerouslySetInnerHTML"?(A=A?A.__html:void 0,A!=null&&oe(i,A)):y==="children"?typeof A=="string"?(c!=="textarea"||A!=="")&&je(i,A):typeof A=="number"&&je(i,""+A):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?A!=null&&y==="onScroll"&&Ue("scroll",i):A!=null&&j(i,y,A,w))}switch(c){case"input":Ae(i),Tn(i,f,!1);break;case"textarea":Ae(i),hr(i);break;case"option":f.value!=null&&i.setAttribute("value",""+be(f.value));break;case"select":i.multiple=!!f.multiple,y=f.value,y!=null?kt(i,!!f.multiple,y,!1):f.defaultValue!=null&&kt(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Bl)}switch(c){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Bt(o),null;case 6:if(i&&o.stateNode!=null)rm(i,o,i.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(c=Si(ho.current),Si(Yn.current),Ql(o)){if(f=o.stateNode,c=o.memoizedProps,f[Gn]=o,(y=f.nodeValue!==c)&&(i=un,i!==null))switch(i.tag){case 3:Il(f.nodeValue,c,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Il(f.nodeValue,c,(i.mode&1)!==0)}y&&(o.flags|=4)}else f=(c.nodeType===9?c:c.ownerDocument).createTextNode(f),f[Gn]=o,o.stateNode=f}return Bt(o),null;case 13:if(Xe(nt),f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ge&&cn!==null&&(o.mode&1)!==0&&(o.flags&128)===0)og(),ns(),o.flags|=98560,y=!1;else if(y=Ql(o),f!==null&&f.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Gn]=o}else ns(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Bt(o),y=!1}else jn!==null&&(mh(jn),jn=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=c,o):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(nt.current&1)!==0?yt===0&&(yt=3):vh())),o.updateQueue!==null&&(o.flags|=4),Bt(o),null);case 4:return os(),sh(i,o),i===null&&io(o.stateNode.containerInfo),Bt(o),null;case 10:return Dc(o.type._context),Bt(o),null;case 17:return Yt(o.type)&&Fl(),Bt(o),null;case 19:if(Xe(nt),y=o.memoizedState,y===null)return Bt(o),null;if(f=(o.flags&128)!==0,w=y.rendering,w===null)if(f)yo(y,!1);else{if(yt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(w=Gl(i),w!==null){for(o.flags|=128,yo(y,!1),f=w.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=c,c=o.child;c!==null;)y=c,i=f,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,i=w.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),c=c.sibling;return Qe(nt,nt.current&1|2),o.child}i=i.sibling}y.tail!==null&&lt()>cs&&(o.flags|=128,f=!0,yo(y,!1),o.lanes=4194304)}else{if(!f)if(i=Gl(w),i!==null){if(o.flags|=128,f=!0,c=i.updateQueue,c!==null&&(o.updateQueue=c,o.flags|=4),yo(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!Ge)return Bt(o),null}else 2*lt()-y.renderingStartTime>cs&&c!==1073741824&&(o.flags|=128,f=!0,yo(y,!1),o.lanes=4194304);y.isBackwards?(w.sibling=o.child,o.child=w):(c=y.last,c!==null?c.sibling=w:o.child=w,y.last=w)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=lt(),o.sibling=null,c=nt.current,Qe(nt,f?c&1|2:c&1),o):(Bt(o),null);case 22:case 23:return xh(),f=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(hn&1073741824)!==0&&(Bt(o),o.subtreeFlags&6&&(o.flags|=8192)):Bt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function fw(i,o){switch(Pc(o),o.tag){case 1:return Yt(o.type)&&Fl(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return os(),Xe(Gt),Xe(Lt),_c(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return zc(o),null;case 13:if(Xe(nt),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));ns()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Xe(nt),null;case 4:return os(),null;case 10:return Dc(o.type._context),null;case 22:case 23:return xh(),null;case 24:return null;default:return null}}var sa=!1,zt=!1,dw=typeof WeakSet=="function"?WeakSet:Set,ge=null;function as(i,o){var c=i.ref;if(c!==null)if(typeof c=="function")try{c(null)}catch(f){st(i,o,f)}else c.current=null}function oh(i,o,c){try{c()}catch(f){st(i,o,f)}}var im=!1;function pw(i,o){if(xc=Ol,i=Ip(),cc(i)){if("selectionStart"in i)var c={start:i.selectionStart,end:i.selectionEnd};else e:{c=(c=i.ownerDocument)&&c.defaultView||window;var f=c.getSelection&&c.getSelection();if(f&&f.rangeCount!==0){c=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{c.nodeType,y.nodeType}catch{c=null;break e}var w=0,N=-1,A=-1,_=0,Y=0,te=i,K=null;t:for(;;){for(var fe;te!==c||g!==0&&te.nodeType!==3||(N=w+g),te!==y||f!==0&&te.nodeType!==3||(A=w+f),te.nodeType===3&&(w+=te.nodeValue.length),(fe=te.firstChild)!==null;)K=te,te=fe;for(;;){if(te===i)break t;if(K===c&&++_===g&&(N=w),K===y&&++Y===f&&(A=w),(fe=te.nextSibling)!==null)break;te=K,K=te.parentNode}te=fe}c=N===-1||A===-1?null:{start:N,end:A}}else c=null}c=c||{start:0,end:0}}else c=null;for(vc={focusedElem:i,selectionRange:c},Ol=!1,ge=o;ge!==null;)if(o=ge,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ge=i;else for(;ge!==null;){o=ge;try{var ye=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ye!==null){var xe=ye.memoizedProps,at=ye.memoizedState,B=o.stateNode,D=B.getSnapshotBeforeUpdate(o.elementType===o.type?xe:Ln(o.type,xe),at);B.__reactInternalSnapshotBeforeUpdate=D}break;case 3:var z=o.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(re){st(o,o.return,re)}if(i=o.sibling,i!==null){i.return=o.return,ge=i;break}ge=o.return}return ye=im,im=!1,ye}function xo(i,o,c){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var y=g.destroy;g.destroy=void 0,y!==void 0&&oh(o,c,y)}g=g.next}while(g!==f)}}function oa(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var c=o=o.next;do{if((c.tag&i)===i){var f=c.create;c.destroy=f()}c=c.next}while(c!==o)}}function lh(i){var o=i.ref;if(o!==null){var c=i.stateNode;switch(i.tag){case 5:i=c;break;default:i=c}typeof o=="function"?o(i):o.current=i}}function sm(i){var o=i.alternate;o!==null&&(i.alternate=null,sm(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Gn],delete o[oo],delete o[Sc],delete o[Gk],delete o[Yk])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function om(i){return i.tag===5||i.tag===3||i.tag===4}function lm(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||om(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ah(i,o,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?c.nodeType===8?c.parentNode.insertBefore(i,o):c.insertBefore(i,o):(c.nodeType===8?(o=c.parentNode,o.insertBefore(i,c)):(o=c,o.appendChild(i)),c=c._reactRootContainer,c!=null||o.onclick!==null||(o.onclick=Bl));else if(f!==4&&(i=i.child,i!==null))for(ah(i,o,c),i=i.sibling;i!==null;)ah(i,o,c),i=i.sibling}function uh(i,o,c){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?c.insertBefore(i,o):c.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(uh(i,o,c),i=i.sibling;i!==null;)uh(i,o,c),i=i.sibling}var Nt=null,In=!1;function Xr(i,o,c){for(c=c.child;c!==null;)am(i,o,c),c=c.sibling}function am(i,o,c){if(qn&&typeof qn.onCommitFiberUnmount=="function")try{qn.onCommitFiberUnmount(vl,c)}catch{}switch(c.tag){case 5:zt||as(c,o);case 6:var f=Nt,g=In;Nt=null,Xr(i,o,c),Nt=f,In=g,Nt!==null&&(In?(i=Nt,c=c.stateNode,i.nodeType===8?i.parentNode.removeChild(c):i.removeChild(c)):Nt.removeChild(c.stateNode));break;case 18:Nt!==null&&(In?(i=Nt,c=c.stateNode,i.nodeType===8?bc(i.parentNode,c):i.nodeType===1&&bc(i,c),qs(i)):bc(Nt,c.stateNode));break;case 4:f=Nt,g=In,Nt=c.stateNode.containerInfo,In=!0,Xr(i,o,c),Nt=f,In=g;break;case 0:case 11:case 14:case 15:if(!zt&&(f=c.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var y=g,w=y.destroy;y=y.tag,w!==void 0&&((y&2)!==0||(y&4)!==0)&&oh(c,o,w),g=g.next}while(g!==f)}Xr(i,o,c);break;case 1:if(!zt&&(as(c,o),f=c.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=c.memoizedProps,f.state=c.memoizedState,f.componentWillUnmount()}catch(N){st(c,o,N)}Xr(i,o,c);break;case 21:Xr(i,o,c);break;case 22:c.mode&1?(zt=(f=zt)||c.memoizedState!==null,Xr(i,o,c),zt=f):Xr(i,o,c);break;default:Xr(i,o,c)}}function um(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var c=i.stateNode;c===null&&(c=i.stateNode=new dw),o.forEach(function(f){var g=Sw.bind(null,i,f);c.has(f)||(c.add(f),f.then(g,g))})}}function Bn(i,o){var c=o.deletions;if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];try{var y=i,w=o,N=w;e:for(;N!==null;){switch(N.tag){case 5:Nt=N.stateNode,In=!1;break e;case 3:Nt=N.stateNode.containerInfo,In=!0;break e;case 4:Nt=N.stateNode.containerInfo,In=!0;break e}N=N.return}if(Nt===null)throw Error(t(160));am(y,w,g),Nt=null,In=!1;var A=g.alternate;A!==null&&(A.return=null),g.return=null}catch(_){st(g,o,_)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)cm(o,i),o=o.sibling}function cm(i,o){var c=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Bn(o,i),Zn(i),f&4){try{xo(3,i,i.return),oa(3,i)}catch(xe){st(i,i.return,xe)}try{xo(5,i,i.return)}catch(xe){st(i,i.return,xe)}}break;case 1:Bn(o,i),Zn(i),f&512&&c!==null&&as(c,c.return);break;case 5:if(Bn(o,i),Zn(i),f&512&&c!==null&&as(c,c.return),i.flags&32){var g=i.stateNode;try{je(g,"")}catch(xe){st(i,i.return,xe)}}if(f&4&&(g=i.stateNode,g!=null)){var y=i.memoizedProps,w=c!==null?c.memoizedProps:y,N=i.type,A=i.updateQueue;if(i.updateQueue=null,A!==null)try{N==="input"&&y.type==="radio"&&y.name!=null&&Ee(g,y),dr(N,w);var _=dr(N,y);for(w=0;w<A.length;w+=2){var Y=A[w],te=A[w+1];Y==="style"?mi(g,te):Y==="dangerouslySetInnerHTML"?oe(g,te):Y==="children"?je(g,te):j(g,Y,te,_)}switch(N){case"input":Je(g,y);break;case"textarea":pi(g,y);break;case"select":var K=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var fe=y.value;fe!=null?kt(g,!!y.multiple,fe,!1):K!==!!y.multiple&&(y.defaultValue!=null?kt(g,!!y.multiple,y.defaultValue,!0):kt(g,!!y.multiple,y.multiple?[]:"",!1))}g[oo]=y}catch(xe){st(i,i.return,xe)}}break;case 6:if(Bn(o,i),Zn(i),f&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,y=i.memoizedProps;try{g.nodeValue=y}catch(xe){st(i,i.return,xe)}}break;case 3:if(Bn(o,i),Zn(i),f&4&&c!==null&&c.memoizedState.isDehydrated)try{qs(o.containerInfo)}catch(xe){st(i,i.return,xe)}break;case 4:Bn(o,i),Zn(i);break;case 13:Bn(o,i),Zn(i),g=i.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(fh=lt())),f&4&&um(i);break;case 22:if(Y=c!==null&&c.memoizedState!==null,i.mode&1?(zt=(_=zt)||Y,Bn(o,i),zt=_):Bn(o,i),Zn(i),f&8192){if(_=i.memoizedState!==null,(i.stateNode.isHidden=_)&&!Y&&(i.mode&1)!==0)for(ge=i,Y=i.child;Y!==null;){for(te=ge=Y;ge!==null;){switch(K=ge,fe=K.child,K.tag){case 0:case 11:case 14:case 15:xo(4,K,K.return);break;case 1:as(K,K.return);var ye=K.stateNode;if(typeof ye.componentWillUnmount=="function"){f=K,c=K.return;try{o=f,ye.props=o.memoizedProps,ye.state=o.memoizedState,ye.componentWillUnmount()}catch(xe){st(f,c,xe)}}break;case 5:as(K,K.return);break;case 22:if(K.memoizedState!==null){dm(te);continue}}fe!==null?(fe.return=K,ge=fe):dm(te)}Y=Y.sibling}e:for(Y=null,te=i;;){if(te.tag===5){if(Y===null){Y=te;try{g=te.stateNode,_?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(N=te.stateNode,A=te.memoizedProps.style,w=A!=null&&A.hasOwnProperty("display")?A.display:null,N.style.display=Xn("display",w))}catch(xe){st(i,i.return,xe)}}}else if(te.tag===6){if(Y===null)try{te.stateNode.nodeValue=_?"":te.memoizedProps}catch(xe){st(i,i.return,xe)}}else if((te.tag!==22&&te.tag!==23||te.memoizedState===null||te===i)&&te.child!==null){te.child.return=te,te=te.child;continue}if(te===i)break e;for(;te.sibling===null;){if(te.return===null||te.return===i)break e;Y===te&&(Y=null),te=te.return}Y===te&&(Y=null),te.sibling.return=te.return,te=te.sibling}}break;case 19:Bn(o,i),Zn(i),f&4&&um(i);break;case 21:break;default:Bn(o,i),Zn(i)}}function Zn(i){var o=i.flags;if(o&2){try{e:{for(var c=i.return;c!==null;){if(om(c)){var f=c;break e}c=c.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(je(g,""),f.flags&=-33);var y=lm(i);uh(i,y,g);break;case 3:case 4:var w=f.stateNode.containerInfo,N=lm(i);ah(i,N,w);break;default:throw Error(t(161))}}catch(A){st(i,i.return,A)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function gw(i,o,c){ge=i,hm(i)}function hm(i,o,c){for(var f=(i.mode&1)!==0;ge!==null;){var g=ge,y=g.child;if(g.tag===22&&f){var w=g.memoizedState!==null||sa;if(!w){var N=g.alternate,A=N!==null&&N.memoizedState!==null||zt;N=sa;var _=zt;if(sa=w,(zt=A)&&!_)for(ge=g;ge!==null;)w=ge,A=w.child,w.tag===22&&w.memoizedState!==null?pm(g):A!==null?(A.return=w,ge=A):pm(g);for(;y!==null;)ge=y,hm(y),y=y.sibling;ge=g,sa=N,zt=_}fm(i)}else(g.subtreeFlags&8772)!==0&&y!==null?(y.return=g,ge=y):fm(i)}}function fm(i){for(;ge!==null;){var o=ge;if((o.flags&8772)!==0){var c=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:zt||oa(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!zt)if(c===null)f.componentDidMount();else{var g=o.elementType===o.type?c.memoizedProps:Ln(o.type,c.memoizedProps);f.componentDidUpdate(g,c.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&dg(o,y,f);break;case 3:var w=o.updateQueue;if(w!==null){if(c=null,o.child!==null)switch(o.child.tag){case 5:c=o.child.stateNode;break;case 1:c=o.child.stateNode}dg(o,w,c)}break;case 5:var N=o.stateNode;if(c===null&&o.flags&4){c=N;var A=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":A.autoFocus&&c.focus();break;case"img":A.src&&(c.src=A.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var _=o.alternate;if(_!==null){var Y=_.memoizedState;if(Y!==null){var te=Y.dehydrated;te!==null&&qs(te)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}zt||o.flags&512&&lh(o)}catch(K){st(o,o.return,K)}}if(o===i){ge=null;break}if(c=o.sibling,c!==null){c.return=o.return,ge=c;break}ge=o.return}}function dm(i){for(;ge!==null;){var o=ge;if(o===i){ge=null;break}var c=o.sibling;if(c!==null){c.return=o.return,ge=c;break}ge=o.return}}function pm(i){for(;ge!==null;){var o=ge;try{switch(o.tag){case 0:case 11:case 15:var c=o.return;try{oa(4,o)}catch(A){st(o,c,A)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(A){st(o,g,A)}}var y=o.return;try{lh(o)}catch(A){st(o,y,A)}break;case 5:var w=o.return;try{lh(o)}catch(A){st(o,w,A)}}}catch(A){st(o,o.return,A)}if(o===i){ge=null;break}var N=o.sibling;if(N!==null){N.return=o.return,ge=N;break}ge=o.return}}var mw=Math.ceil,la=F.ReactCurrentDispatcher,ch=F.ReactCurrentOwner,wn=F.ReactCurrentBatchConfig,Le=0,bt=null,pt=null,Pt=0,hn=0,us=Wr(0),yt=0,vo=null,Oi=0,aa=0,hh=0,ko=null,Zt=null,fh=0,cs=1/0,Cr=null,ua=!1,dh=null,Kr=null,ca=!1,qr=null,ha=0,wo=0,ph=null,fa=-1,da=0;function $t(){return(Le&6)!==0?lt():fa!==-1?fa:fa=lt()}function Gr(i){return(i.mode&1)===0?1:(Le&2)!==0&&Pt!==0?Pt&-Pt:Zk.transition!==null?(da===0&&(da=lp()),da):(i=He,i!==0||(i=window.event,i=i===void 0?16:mp(i.type)),i)}function zn(i,o,c,f){if(50<wo)throw wo=0,ph=null,Error(t(185));Qs(i,c,f),((Le&2)===0||i!==bt)&&(i===bt&&((Le&2)===0&&(aa|=c),yt===4&&Yr(i,Pt)),en(i,f),c===1&&Le===0&&(o.mode&1)===0&&(cs=lt()+500,Hl&&Qr()))}function en(i,o){var c=i.callbackNode;Z1(i,o);var f=bl(i,i===bt?Pt:0);if(f===0)c!==null&&ip(c),i.callbackNode=null,i.callbackPriority=0;else if(o=f&-f,i.callbackPriority!==o){if(c!=null&&ip(c),o===1)i.tag===0?Jk(mm.bind(null,i)):tg(mm.bind(null,i)),Kk(function(){(Le&6)===0&&Qr()}),c=null;else{switch(ap(f)){case 1:c=Xu;break;case 4:c=sp;break;case 16:c=xl;break;case 536870912:c=op;break;default:c=xl}c=Cm(c,gm.bind(null,i))}i.callbackPriority=o,i.callbackNode=c}}function gm(i,o){if(fa=-1,da=0,(Le&6)!==0)throw Error(t(327));var c=i.callbackNode;if(hs()&&i.callbackNode!==c)return null;var f=bl(i,i===bt?Pt:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||o)o=pa(i,f);else{o=f;var g=Le;Le|=2;var y=xm();(bt!==i||Pt!==o)&&(Cr=null,cs=lt()+500,Pi(i,o));do try{vw();break}catch(N){ym(i,N)}while(!0);Rc(),la.current=y,Le=g,pt!==null?o=0:(bt=null,Pt=0,o=yt)}if(o!==0){if(o===2&&(g=Ku(i),g!==0&&(f=g,o=gh(i,g))),o===1)throw c=vo,Pi(i,0),Yr(i,f),en(i,lt()),c;if(o===6)Yr(i,f);else{if(g=i.current.alternate,(f&30)===0&&!yw(g)&&(o=pa(i,f),o===2&&(y=Ku(i),y!==0&&(f=y,o=gh(i,y))),o===1))throw c=vo,Pi(i,0),Yr(i,f),en(i,lt()),c;switch(i.finishedWork=g,i.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:Ti(i,Zt,Cr);break;case 3:if(Yr(i,f),(f&130023424)===f&&(o=fh+500-lt(),10<o)){if(bl(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){$t(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=wc(Ti.bind(null,i,Zt,Cr),o);break}Ti(i,Zt,Cr);break;case 4:if(Yr(i,f),(f&4194240)===f)break;for(o=i.eventTimes,g=-1;0<f;){var w=31-Rn(f);y=1<<w,w=o[w],w>g&&(g=w),f&=~y}if(f=g,f=lt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*mw(f/1960))-f,10<f){i.timeoutHandle=wc(Ti.bind(null,i,Zt,Cr),f);break}Ti(i,Zt,Cr);break;case 5:Ti(i,Zt,Cr);break;default:throw Error(t(329))}}}return en(i,lt()),i.callbackNode===c?gm.bind(null,i):null}function gh(i,o){var c=ko;return i.current.memoizedState.isDehydrated&&(Pi(i,o).flags|=256),i=pa(i,o),i!==2&&(o=Zt,Zt=c,o!==null&&mh(o)),i}function mh(i){Zt===null?Zt=i:Zt.push.apply(Zt,i)}function yw(i){for(var o=i;;){if(o.flags&16384){var c=o.updateQueue;if(c!==null&&(c=c.stores,c!==null))for(var f=0;f<c.length;f++){var g=c[f],y=g.getSnapshot;g=g.value;try{if(!Dn(y(),g))return!1}catch{return!1}}}if(c=o.child,o.subtreeFlags&16384&&c!==null)c.return=o,o=c;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Yr(i,o){for(o&=~hh,o&=~aa,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var c=31-Rn(o),f=1<<c;i[c]=-1,o&=~f}}function mm(i){if((Le&6)!==0)throw Error(t(327));hs();var o=bl(i,0);if((o&1)===0)return en(i,lt()),null;var c=pa(i,o);if(i.tag!==0&&c===2){var f=Ku(i);f!==0&&(o=f,c=gh(i,f))}if(c===1)throw c=vo,Pi(i,0),Yr(i,o),en(i,lt()),c;if(c===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Ti(i,Zt,Cr),en(i,lt()),null}function yh(i,o){var c=Le;Le|=1;try{return i(o)}finally{Le=c,Le===0&&(cs=lt()+500,Hl&&Qr())}}function Ni(i){qr!==null&&qr.tag===0&&(Le&6)===0&&hs();var o=Le;Le|=1;var c=wn.transition,f=He;try{if(wn.transition=null,He=1,i)return i()}finally{He=f,wn.transition=c,Le=o,(Le&6)===0&&Qr()}}function xh(){hn=us.current,Xe(us)}function Pi(i,o){i.finishedWork=null,i.finishedLanes=0;var c=i.timeoutHandle;if(c!==-1&&(i.timeoutHandle=-1,Xk(c)),pt!==null)for(c=pt.return;c!==null;){var f=c;switch(Pc(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Fl();break;case 3:os(),Xe(Gt),Xe(Lt),_c();break;case 5:zc(f);break;case 4:os();break;case 13:Xe(nt);break;case 19:Xe(nt);break;case 10:Dc(f.type._context);break;case 22:case 23:xh()}c=c.return}if(bt=i,pt=i=Jr(i.current,null),Pt=hn=o,yt=0,vo=null,hh=aa=Oi=0,Zt=ko=null,bi!==null){for(o=0;o<bi.length;o++)if(c=bi[o],f=c.interleaved,f!==null){c.interleaved=null;var g=f.next,y=c.pending;if(y!==null){var w=y.next;y.next=g,f.next=w}c.pending=f}bi=null}return i}function ym(i,o){do{var c=pt;try{if(Rc(),Yl.current=ta,Jl){for(var f=rt.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Jl=!1}if(Ci=0,wt=mt=rt=null,fo=!1,po=0,ch.current=null,c===null||c.return===null){yt=1,vo=o,pt=null;break}e:{var y=i,w=c.return,N=c,A=o;if(o=Pt,N.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){var _=A,Y=N,te=Y.tag;if((Y.mode&1)===0&&(te===0||te===11||te===15)){var K=Y.alternate;K?(Y.updateQueue=K.updateQueue,Y.memoizedState=K.memoizedState,Y.lanes=K.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var fe=Wg(w);if(fe!==null){fe.flags&=-257,Vg(fe,w,N,y,o),fe.mode&1&&Hg(y,_,o),o=fe,A=_;var ye=o.updateQueue;if(ye===null){var xe=new Set;xe.add(A),o.updateQueue=xe}else ye.add(A);break e}else{if((o&1)===0){Hg(y,_,o),vh();break e}A=Error(t(426))}}else if(Ge&&N.mode&1){var at=Wg(w);if(at!==null){(at.flags&65536)===0&&(at.flags|=256),Vg(at,w,N,y,o),Ec(ls(A,N));break e}}y=A=ls(A,N),yt!==4&&(yt=2),ko===null?ko=[y]:ko.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var B=Fg(y,A,o);fg(y,B);break e;case 1:N=A;var D=y.type,z=y.stateNode;if((y.flags&128)===0&&(typeof D.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Kr===null||!Kr.has(z)))){y.flags|=65536,o&=-o,y.lanes|=o;var re=_g(y,N,o);fg(y,re);break e}}y=y.return}while(y!==null)}km(c)}catch(ve){o=ve,pt===c&&c!==null&&(pt=c=c.return);continue}break}while(!0)}function xm(){var i=la.current;return la.current=ta,i===null?ta:i}function vh(){(yt===0||yt===3||yt===2)&&(yt=4),bt===null||(Oi&268435455)===0&&(aa&268435455)===0||Yr(bt,Pt)}function pa(i,o){var c=Le;Le|=2;var f=xm();(bt!==i||Pt!==o)&&(Cr=null,Pi(i,o));do try{xw();break}catch(g){ym(i,g)}while(!0);if(Rc(),Le=c,la.current=f,pt!==null)throw Error(t(261));return bt=null,Pt=0,yt}function xw(){for(;pt!==null;)vm(pt)}function vw(){for(;pt!==null&&!Q1();)vm(pt)}function vm(i){var o=Sm(i.alternate,i,hn);i.memoizedProps=i.pendingProps,o===null?km(i):pt=o,ch.current=null}function km(i){var o=i;do{var c=o.alternate;if(i=o.return,(o.flags&32768)===0){if(c=hw(c,o,hn),c!==null){pt=c;return}}else{if(c=fw(c,o),c!==null){c.flags&=32767,pt=c;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{yt=6,pt=null;return}}if(o=o.sibling,o!==null){pt=o;return}pt=o=i}while(o!==null);yt===0&&(yt=5)}function Ti(i,o,c){var f=He,g=wn.transition;try{wn.transition=null,He=1,kw(i,o,c,f)}finally{wn.transition=g,He=f}return null}function kw(i,o,c,f){do hs();while(qr!==null);if((Le&6)!==0)throw Error(t(327));c=i.finishedWork;var g=i.finishedLanes;if(c===null)return null;if(i.finishedWork=null,i.finishedLanes=0,c===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=c.lanes|c.childLanes;if(ek(i,y),i===bt&&(pt=bt=null,Pt=0),(c.subtreeFlags&2064)===0&&(c.flags&2064)===0||ca||(ca=!0,Cm(xl,function(){return hs(),null})),y=(c.flags&15990)!==0,(c.subtreeFlags&15990)!==0||y){y=wn.transition,wn.transition=null;var w=He;He=1;var N=Le;Le|=4,ch.current=null,pw(i,c),cm(c,i),_k(vc),Ol=!!xc,vc=xc=null,i.current=c,gw(c),$1(),Le=N,He=w,wn.transition=y}else i.current=c;if(ca&&(ca=!1,qr=i,ha=g),y=i.pendingLanes,y===0&&(Kr=null),K1(c.stateNode),en(i,lt()),o!==null)for(f=i.onRecoverableError,c=0;c<o.length;c++)g=o[c],f(g.value,{componentStack:g.stack,digest:g.digest});if(ua)throw ua=!1,i=dh,dh=null,i;return(ha&1)!==0&&i.tag!==0&&hs(),y=i.pendingLanes,(y&1)!==0?i===ph?wo++:(wo=0,ph=i):wo=0,Qr(),null}function hs(){if(qr!==null){var i=ap(ha),o=wn.transition,c=He;try{if(wn.transition=null,He=16>i?16:i,qr===null)var f=!1;else{if(i=qr,qr=null,ha=0,(Le&6)!==0)throw Error(t(331));var g=Le;for(Le|=4,ge=i.current;ge!==null;){var y=ge,w=y.child;if((ge.flags&16)!==0){var N=y.deletions;if(N!==null){for(var A=0;A<N.length;A++){var _=N[A];for(ge=_;ge!==null;){var Y=ge;switch(Y.tag){case 0:case 11:case 15:xo(8,Y,y)}var te=Y.child;if(te!==null)te.return=Y,ge=te;else for(;ge!==null;){Y=ge;var K=Y.sibling,fe=Y.return;if(sm(Y),Y===_){ge=null;break}if(K!==null){K.return=fe,ge=K;break}ge=fe}}}var ye=y.alternate;if(ye!==null){var xe=ye.child;if(xe!==null){ye.child=null;do{var at=xe.sibling;xe.sibling=null,xe=at}while(xe!==null)}}ge=y}}if((y.subtreeFlags&2064)!==0&&w!==null)w.return=y,ge=w;else e:for(;ge!==null;){if(y=ge,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:xo(9,y,y.return)}var B=y.sibling;if(B!==null){B.return=y.return,ge=B;break e}ge=y.return}}var D=i.current;for(ge=D;ge!==null;){w=ge;var z=w.child;if((w.subtreeFlags&2064)!==0&&z!==null)z.return=w,ge=z;else e:for(w=D;ge!==null;){if(N=ge,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:oa(9,N)}}catch(ve){st(N,N.return,ve)}if(N===w){ge=null;break e}var re=N.sibling;if(re!==null){re.return=N.return,ge=re;break e}ge=N.return}}if(Le=g,Qr(),qn&&typeof qn.onPostCommitFiberRoot=="function")try{qn.onPostCommitFiberRoot(vl,i)}catch{}f=!0}return f}finally{He=c,wn.transition=o}}return!1}function wm(i,o,c){o=ls(c,o),o=Fg(i,o,1),i=Ur(i,o,1),o=$t(),i!==null&&(Qs(i,1,o),en(i,o))}function st(i,o,c){if(i.tag===3)wm(i,i,c);else for(;o!==null;){if(o.tag===3){wm(o,i,c);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Kr===null||!Kr.has(f))){i=ls(c,i),i=_g(o,i,1),o=Ur(o,i,1),i=$t(),o!==null&&(Qs(o,1,i),en(o,i));break}}o=o.return}}function ww(i,o,c){var f=i.pingCache;f!==null&&f.delete(o),o=$t(),i.pingedLanes|=i.suspendedLanes&c,bt===i&&(Pt&c)===c&&(yt===4||yt===3&&(Pt&130023424)===Pt&&500>lt()-fh?Pi(i,0):hh|=c),en(i,o)}function bm(i,o){o===0&&((i.mode&1)===0?o=1:(o=wl,wl<<=1,(wl&130023424)===0&&(wl=4194304)));var c=$t();i=wr(i,o),i!==null&&(Qs(i,o,c),en(i,c))}function bw(i){var o=i.memoizedState,c=0;o!==null&&(c=o.retryLane),bm(i,c)}function Sw(i,o){var c=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(c=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),bm(i,c)}var Sm;Sm=function(i,o,c){if(i!==null)if(i.memoizedProps!==o.pendingProps||Gt.current)Jt=!0;else{if((i.lanes&c)===0&&(o.flags&128)===0)return Jt=!1,cw(i,o,c);Jt=(i.flags&131072)!==0}else Jt=!1,Ge&&(o.flags&1048576)!==0&&ng(o,Vl,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;ia(i,o),i=o.pendingProps;var g=Zi(o,Lt.current);ss(o,c),g=Vc(null,o,f,i,g,c);var y=Qc();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Yt(f)?(y=!0,_l(o)):y=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Ic(o),g.updater=na,o.stateNode=g,g._reactInternals=o,Gc(o,f,i,c),o=eh(null,o,f,!0,y,c)):(o.tag=0,Ge&&y&&Nc(o),Qt(null,o,g,c),o=o.child),o;case 16:f=o.elementType;e:{switch(ia(i,o),i=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=Ow(f),i=Ln(f,i),g){case 0:o=Zc(null,o,f,i,c);break e;case 1:o=qg(null,o,f,i,c);break e;case 11:o=Qg(null,o,f,i,c);break e;case 14:o=$g(null,o,f,Ln(f.type,i),c);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ln(f,g),Zc(i,o,f,g,c);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ln(f,g),qg(i,o,f,g,c);case 3:e:{if(Gg(o),i===null)throw Error(t(387));f=o.pendingProps,y=o.memoizedState,g=y.element,hg(i,o),ql(o,f,null,c);var w=o.memoizedState;if(f=w.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){g=ls(Error(t(423)),o),o=Yg(i,o,f,c,g);break e}else if(f!==g){g=ls(Error(t(424)),o),o=Yg(i,o,f,c,g);break e}else for(cn=Hr(o.stateNode.containerInfo.firstChild),un=o,Ge=!0,jn=null,c=ug(o,null,f,c),o.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling;else{if(ns(),f===g){o=Sr(i,o,c);break e}Qt(i,o,f,c)}o=o.child}return o;case 5:return pg(o),i===null&&Ac(o),f=o.type,g=o.pendingProps,y=i!==null?i.memoizedProps:null,w=g.children,kc(f,g)?w=null:y!==null&&kc(f,y)&&(o.flags|=32),Kg(i,o),Qt(i,o,w,c),o.child;case 6:return i===null&&Ac(o),null;case 13:return Jg(i,o,c);case 4:return Bc(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=rs(o,null,f,c):Qt(i,o,f,c),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ln(f,g),Qg(i,o,f,g,c);case 7:return Qt(i,o,o.pendingProps,c),o.child;case 8:return Qt(i,o,o.pendingProps.children,c),o.child;case 12:return Qt(i,o,o.pendingProps.children,c),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,y=o.memoizedProps,w=g.value,Qe(Ul,f._currentValue),f._currentValue=w,y!==null)if(Dn(y.value,w)){if(y.children===g.children&&!Gt.current){o=Sr(i,o,c);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var N=y.dependencies;if(N!==null){w=y.child;for(var A=N.firstContext;A!==null;){if(A.context===f){if(y.tag===1){A=br(-1,c&-c),A.tag=2;var _=y.updateQueue;if(_!==null){_=_.shared;var Y=_.pending;Y===null?A.next=A:(A.next=Y.next,Y.next=A),_.pending=A}}y.lanes|=c,A=y.alternate,A!==null&&(A.lanes|=c),jc(y.return,c,o),N.lanes|=c;break}A=A.next}}else if(y.tag===10)w=y.type===o.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(t(341));w.lanes|=c,N=w.alternate,N!==null&&(N.lanes|=c),jc(w,c,o),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===o){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}Qt(i,o,g.children,c),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,ss(o,c),g=vn(g),f=f(g),o.flags|=1,Qt(i,o,f,c),o.child;case 14:return f=o.type,g=Ln(f,o.pendingProps),g=Ln(f.type,g),$g(i,o,f,g,c);case 15:return Ug(i,o,o.type,o.pendingProps,c);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ln(f,g),ia(i,o),o.tag=1,Yt(f)?(i=!0,_l(o)):i=!1,ss(o,c),Bg(o,f,g),Gc(o,f,g,c),eh(null,o,f,!0,i,c);case 19:return em(i,o,c);case 22:return Xg(i,o,c)}throw Error(t(156,o.tag))};function Cm(i,o){return rp(i,o)}function Cw(i,o,c,f){this.tag=i,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function bn(i,o,c,f){return new Cw(i,o,c,f)}function kh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Ow(i){if(typeof i=="function")return kh(i)?1:0;if(i!=null){if(i=i.$$typeof,i===$)return 11;if(i===X)return 14}return 2}function Jr(i,o){var c=i.alternate;return c===null?(c=bn(i.tag,o,i.key,i.mode),c.elementType=i.elementType,c.type=i.type,c.stateNode=i.stateNode,c.alternate=i,i.alternate=c):(c.pendingProps=o,c.type=i.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=i.flags&14680064,c.childLanes=i.childLanes,c.lanes=i.lanes,c.child=i.child,c.memoizedProps=i.memoizedProps,c.memoizedState=i.memoizedState,c.updateQueue=i.updateQueue,o=i.dependencies,c.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},c.sibling=i.sibling,c.index=i.index,c.ref=i.ref,c}function ga(i,o,c,f,g,y){var w=2;if(f=i,typeof i=="function")kh(i)&&(w=1);else if(typeof i=="string")w=5;else e:switch(i){case R:return Ai(c.children,g,y,o);case H:w=8,g|=8;break;case V:return i=bn(12,c,o,g|2),i.elementType=V,i.lanes=y,i;case Z:return i=bn(13,c,o,g),i.elementType=Z,i.lanes=y,i;case ue:return i=bn(19,c,o,g),i.elementType=ue,i.lanes=y,i;case se:return ma(c,g,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case W:w=10;break e;case q:w=9;break e;case $:w=11;break e;case X:w=14;break e;case G:w=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=bn(w,c,o,g),o.elementType=i,o.type=f,o.lanes=y,o}function Ai(i,o,c,f){return i=bn(7,i,f,o),i.lanes=c,i}function ma(i,o,c,f){return i=bn(22,i,f,o),i.elementType=se,i.lanes=c,i.stateNode={isHidden:!1},i}function wh(i,o,c){return i=bn(6,i,null,o),i.lanes=c,i}function bh(i,o,c){return o=bn(4,i.children!==null?i.children:[],i.key,o),o.lanes=c,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function Nw(i,o,c,f,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=qu(0),this.expirationTimes=qu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=qu(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function Sh(i,o,c,f,g,y,w,N,A){return i=new Nw(i,o,c,N,A),o===1?(o=1,y===!0&&(o|=8)):o=0,y=bn(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:f,isDehydrated:c,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ic(y),i}function Pw(i,o,c){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:L,key:f==null?null:""+f,children:i,containerInfo:o,implementation:c}}function Om(i){if(!i)return Vr;i=i._reactInternals;e:{if(yi(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Yt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var c=i.type;if(Yt(c))return Zp(i,c,o)}return o}function Nm(i,o,c,f,g,y,w,N,A){return i=Sh(c,f,!0,i,g,y,w,N,A),i.context=Om(null),c=i.current,f=$t(),g=Gr(c),y=br(f,g),y.callback=o??null,Ur(c,y,g),i.current.lanes=g,Qs(i,g,f),en(i,f),i}function ya(i,o,c,f){var g=o.current,y=$t(),w=Gr(g);return c=Om(c),o.context===null?o.context=c:o.pendingContext=c,o=br(y,w),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=Ur(g,o,w),i!==null&&(zn(i,g,w,y),Kl(i,g,w)),w}function xa(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function Pm(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var c=i.retryLane;i.retryLane=c!==0&&c<o?c:o}}function Ch(i,o){Pm(i,o),(i=i.alternate)&&Pm(i,o)}function Tw(){return null}var Tm=typeof reportError=="function"?reportError:function(i){console.error(i)};function Oh(i){this._internalRoot=i}va.prototype.render=Oh.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));ya(i,o,null,null)},va.prototype.unmount=Oh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Ni(function(){ya(null,i,null,null)}),o[yr]=null}};function va(i){this._internalRoot=i}va.prototype.unstable_scheduleHydration=function(i){if(i){var o=hp();i={blockedOn:null,target:i,priority:o};for(var c=0;c<zr.length&&o!==0&&o<zr[c].priority;c++);zr.splice(c,0,i),c===0&&pp(i)}};function Nh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ka(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function Am(){}function Aw(i,o,c,f,g){if(g){if(typeof f=="function"){var y=f;f=function(){var _=xa(w);y.call(_)}}var w=Nm(o,f,i,0,null,!1,!1,"",Am);return i._reactRootContainer=w,i[yr]=w.current,io(i.nodeType===8?i.parentNode:i),Ni(),w}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var N=f;f=function(){var _=xa(A);N.call(_)}}var A=Sh(i,0,!1,null,null,!1,!1,"",Am);return i._reactRootContainer=A,i[yr]=A.current,io(i.nodeType===8?i.parentNode:i),Ni(function(){ya(o,A,c,f)}),A}function wa(i,o,c,f,g){var y=c._reactRootContainer;if(y){var w=y;if(typeof g=="function"){var N=g;g=function(){var A=xa(w);N.call(A)}}ya(o,w,i,g)}else w=Aw(c,o,i,g,f);return xa(w)}up=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var c=Vs(o.pendingLanes);c!==0&&(Gu(o,c|1),en(o,lt()),(Le&6)===0&&(cs=lt()+500,Qr()))}break;case 13:Ni(function(){var f=wr(i,1);if(f!==null){var g=$t();zn(f,i,1,g)}}),Ch(i,1)}},Yu=function(i){if(i.tag===13){var o=wr(i,134217728);if(o!==null){var c=$t();zn(o,i,134217728,c)}Ch(i,134217728)}},cp=function(i){if(i.tag===13){var o=Gr(i),c=wr(i,o);if(c!==null){var f=$t();zn(c,i,o,f)}Ch(i,o)}},hp=function(){return He},fp=function(i,o){var c=He;try{return He=i,o()}finally{He=c}},Hs=function(i,o,c){switch(o){case"input":if(Je(i,c),o=c.name,c.type==="radio"&&o!=null){for(c=i;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<c.length;o++){var f=c[o];if(f!==i&&f.form===i.form){var g=zl(f);if(!g)throw Error(t(90));_e(f),Je(f,g)}}}break;case"textarea":pi(i,c);break;case"select":o=c.value,o!=null&&kt(i,!!c.multiple,o,!1)}},Vt=yh,Dt=Ni;var Ew={usingClientEntryPoint:!1,Events:[lo,Yi,zl,Rt,An,yh]},bo={findFiberByHostInstance:xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Mw={bundleType:bo.bundleType,version:bo.version,rendererPackageName:bo.rendererPackageName,rendererConfig:bo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:F.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=tp(i),i===null?null:i.stateNode},findFiberByHostInstance:bo.findFiberByHostInstance||Tw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ba.isDisabled&&ba.supportsFiber)try{vl=ba.inject(Mw),qn=ba}catch{}}return tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ew,tn.createPortal=function(i,o){var c=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nh(o))throw Error(t(200));return Pw(i,o,null,c)},tn.createRoot=function(i,o){if(!Nh(i))throw Error(t(299));var c=!1,f="",g=Tm;return o!=null&&(o.unstable_strictMode===!0&&(c=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=Sh(i,1,!1,null,null,c,!1,f,g),i[yr]=o.current,io(i.nodeType===8?i.parentNode:i),new Oh(o)},tn.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=tp(o),i=i===null?null:i.stateNode,i},tn.flushSync=function(i){return Ni(i)},tn.hydrate=function(i,o,c){if(!ka(o))throw Error(t(200));return wa(null,i,o,!0,c)},tn.hydrateRoot=function(i,o,c){if(!Nh(i))throw Error(t(405));var f=c!=null&&c.hydratedSources||null,g=!1,y="",w=Tm;if(c!=null&&(c.unstable_strictMode===!0&&(g=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onRecoverableError!==void 0&&(w=c.onRecoverableError)),o=Nm(o,null,i,1,c??null,g,!1,y,w),i[yr]=o.current,io(i),f)for(i=0;i<f.length;i++)c=f[i],g=c._getVersion,g=g(c._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[c,g]:o.mutableSourceEagerHydrationData.push(c,g);return new va(o)},tn.render=function(i,o,c){if(!ka(o))throw Error(t(200));return wa(null,i,o,!1,c)},tn.unmountComponentAtNode=function(i){if(!ka(i))throw Error(t(40));return i._reactRootContainer?(Ni(function(){wa(null,null,i,!1,function(){i._reactRootContainer=null,i[yr]=null})}),!0):!1},tn.unstable_batchedUpdates=yh,tn.unstable_renderSubtreeIntoContainer=function(i,o,c,f){if(!ka(c))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return wa(i,o,c,!1,f)},tn.version="18.3.1-next-f1338f8080-20240426",tn}var zm;function Ky(){if(zm)return Ah.exports;zm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ah.exports=_w(),Ah.exports}var Fm;function Hw(){if(Fm)return Sa;Fm=1;var n=Ky();return Sa.createRoot=n.createRoot,Sa.hydrateRoot=n.hydrateRoot,Sa}var Ww=Hw();const Vw=Xy(Ww);var Ao=Ky();function Qw(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return S.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Eu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ds(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function pd(n){return"nodeType"in n}function sn(n){var e,t;return n?Ds(n)?n:pd(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function gd(n){const{Document:e}=sn(n);return n instanceof e}function al(n){return Ds(n)?!1:n instanceof sn(n).HTMLElement}function qy(n){return n instanceof sn(n).SVGElement}function js(n){return n?Ds(n)?n.document:pd(n)?gd(n)?n:al(n)||qy(n)?n.ownerDocument:document:document:document}const ar=Eu?S.useLayoutEffect:S.useEffect;function md(n){const e=S.useRef(n);return ar(()=>{e.current=n}),S.useCallback(function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function $w(){const n=S.useRef(null),e=S.useCallback((r,s)=>{n.current=setInterval(r,s)},[]),t=S.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function Xo(n,e){e===void 0&&(e=[n]);const t=S.useRef(n);return ar(()=>{t.current!==n&&(t.current=n)},e),t}function ul(n,e){const t=S.useRef();return S.useMemo(()=>{const r=n(t.current);return t.current=r,r},[...e])}function su(n){const e=md(n),t=S.useRef(null),r=S.useCallback(s=>{s!==t.current&&(e==null||e(s,t.current)),t.current=s},[]);return[t,r]}function df(n){const e=S.useRef();return S.useEffect(()=>{e.current=n},[n]),e.current}let Rh={};function cl(n,e){return S.useMemo(()=>{if(e)return e;const t=Rh[n]==null?0:Rh[n]+1;return Rh[n]=t,n+"-"+t},[n,e])}function Gy(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const u=Object.entries(a);for(const[h,d]of u){const p=l[h];p!=null&&(l[h]=p+n*d)}return l},{...e})}}const vs=Gy(1),ou=Gy(-1);function Uw(n){return"clientX"in n&&"clientY"in n}function yd(n){if(!n)return!1;const{KeyboardEvent:e}=sn(n.target);return e&&n instanceof e}function Xw(n){if(!n)return!1;const{TouchEvent:e}=sn(n.target);return e&&n instanceof e}function pf(n){if(Xw(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return Uw(n)?{x:n.clientX,y:n.clientY}:null}const Ko=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[Ko.Translate.toString(n),Ko.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:r}=n;return e+" "+t+"ms "+r}}}),_m="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Kw(n){return n.matches(_m)?n:n.querySelector(_m)}const qw={display:"none"};function Gw(n){let{id:e,value:t}=n;return ct.createElement("div",{id:e,style:qw},t)}function Yw(n){let{id:e,announcement:t,ariaLiveType:r="assertive"}=n;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ct.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},t)}function Jw(){const[n,e]=S.useState("");return{announce:S.useCallback(r=>{r!=null&&e(r)},[]),announcement:n}}const Yy=S.createContext(null);function Zw(n){const e=S.useContext(Yy);S.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function eb(){const[n]=S.useState(()=>new Set),e=S.useCallback(r=>(n.add(r),()=>n.delete(r)),[n]);return[S.useCallback(r=>{let{type:s,event:l}=r;n.forEach(a=>{var u;return(u=a[s])==null?void 0:u.call(a,l)})},[n]),e]}const tb={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},nb={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function rb(n){let{announcements:e=nb,container:t,hiddenTextDescribedById:r,screenReaderInstructions:s=tb}=n;const{announce:l,announcement:a}=Jw(),u=cl("DndLiveRegion"),[h,d]=S.useState(!1);if(S.useEffect(()=>{d(!0)},[]),Zw(S.useMemo(()=>({onDragStart(m){let{active:v}=m;l(e.onDragStart({active:v}))},onDragMove(m){let{active:v,over:k}=m;e.onDragMove&&l(e.onDragMove({active:v,over:k}))},onDragOver(m){let{active:v,over:k}=m;l(e.onDragOver({active:v,over:k}))},onDragEnd(m){let{active:v,over:k}=m;l(e.onDragEnd({active:v,over:k}))},onDragCancel(m){let{active:v,over:k}=m;l(e.onDragCancel({active:v,over:k}))}}),[l,e])),!h)return null;const p=ct.createElement(ct.Fragment,null,ct.createElement(Gw,{id:r,value:s.draggable}),ct.createElement(Yw,{id:u,announcement:a}));return t?Ao.createPortal(p,t):p}var xt;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(xt||(xt={}));function lu(){}function Hm(n,e){return S.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function ib(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return S.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Wn=Object.freeze({x:0,y:0});function sb(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function ob(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return t-r}function lb(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return r-t}function ab(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function Wm(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const ub=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=Wm(e,e.left,e.top),l=[];for(const a of r){const{id:u}=a,h=t.get(u);if(h){const d=sb(Wm(h),s);l.push({id:u,data:{droppableContainer:a,value:d}})}}return l.sort(ob)};function cb(n,e){const t=Math.max(e.top,n.top),r=Math.max(e.left,n.left),s=Math.min(e.left+e.width,n.left+n.width),l=Math.min(e.top+e.height,n.top+n.height),a=s-r,u=l-t;if(r<s&&t<l){const h=e.width*e.height,d=n.width*n.height,p=a*u,m=p/(h+d-p);return Number(m.toFixed(4))}return 0}const hb=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=[];for(const l of r){const{id:a}=l,u=t.get(a);if(u){const h=cb(u,e);h>0&&s.push({id:a,data:{droppableContainer:l,value:h}})}}return s.sort(lb)};function fb(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Jy(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Wn}function db(n){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,u)=>({...a,top:a.top+n*u.y,bottom:a.bottom+n*u.y,left:a.left+n*u.x,right:a.right+n*u.x}),{...t})}}const pb=db(1);function gb(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function mb(n,e,t){const r=gb(e);if(!r)return n;const{scaleX:s,scaleY:l,x:a,y:u}=r,h=n.left-a-(1-s)*parseFloat(t),d=n.top-u-(1-l)*parseFloat(t.slice(t.indexOf(" ")+1)),p=s?n.width/s:n.width,m=l?n.height/l:n.height;return{width:p,height:m,top:d,right:h+p,bottom:d+m,left:h}}const yb={ignoreTransform:!1};function Ls(n,e){e===void 0&&(e=yb);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:p}=sn(n).getComputedStyle(n);d&&(t=mb(t,d,p))}const{top:r,left:s,width:l,height:a,bottom:u,right:h}=t;return{top:r,left:s,width:l,height:a,bottom:u,right:h}}function Vm(n){return Ls(n,{ignoreTransform:!0})}function xb(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function vb(n,e){return e===void 0&&(e=sn(n).getComputedStyle(n)),e.position==="fixed"}function kb(n,e){e===void 0&&(e=sn(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=e[s];return typeof l=="string"?t.test(l):!1})}function xd(n,e){const t=[];function r(s){if(e!=null&&t.length>=e||!s)return t;if(gd(s)&&s.scrollingElement!=null&&!t.includes(s.scrollingElement))return t.push(s.scrollingElement),t;if(!al(s)||qy(s)||t.includes(s))return t;const l=sn(n).getComputedStyle(s);return s!==n&&kb(s,l)&&t.push(s),vb(s,l)?t:r(s.parentNode)}return n?r(n):t}function Zy(n){const[e]=xd(n,1);return e??null}function Dh(n){return!Eu||!n?null:Ds(n)?n:pd(n)?gd(n)||n===js(n).scrollingElement?window:al(n)?n:null:null}function ex(n){return Ds(n)?n.scrollX:n.scrollLeft}function tx(n){return Ds(n)?n.scrollY:n.scrollTop}function gf(n){return{x:ex(n),y:tx(n)}}var Ct;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(Ct||(Ct={}));function nx(n){return!Eu||!n?!1:n===document.scrollingElement}function rx(n){const e={x:0,y:0},t=nx(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},r={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},s=n.scrollTop<=e.y,l=n.scrollLeft<=e.x,a=n.scrollTop>=r.y,u=n.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:u,maxScroll:r,minScroll:e}}const wb={x:.2,y:.2};function bb(n,e,t,r,s){let{top:l,left:a,right:u,bottom:h}=t;r===void 0&&(r=10),s===void 0&&(s=wb);const{isTop:d,isBottom:p,isLeft:m,isRight:v}=rx(n),k={x:0,y:0},b={x:0,y:0},C={height:e.height*s.y,width:e.width*s.x};return!d&&l<=e.top+C.height?(k.y=Ct.Backward,b.y=r*Math.abs((e.top+C.height-l)/C.height)):!p&&h>=e.bottom-C.height&&(k.y=Ct.Forward,b.y=r*Math.abs((e.bottom-C.height-h)/C.height)),!v&&u>=e.right-C.width?(k.x=Ct.Forward,b.x=r*Math.abs((e.right-C.width-u)/C.width)):!m&&a<=e.left+C.width&&(k.x=Ct.Backward,b.x=r*Math.abs((e.left+C.width-a)/C.width)),{direction:k,speed:b}}function Sb(n){if(n===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:e,left:t,right:r,bottom:s}=n.getBoundingClientRect();return{top:e,left:t,right:r,bottom:s,width:n.clientWidth,height:n.clientHeight}}function ix(n){return n.reduce((e,t)=>vs(e,gf(t)),Wn)}function Cb(n){return n.reduce((e,t)=>e+ex(t),0)}function Ob(n){return n.reduce((e,t)=>e+tx(t),0)}function Nb(n,e){if(e===void 0&&(e=Ls),!n)return;const{top:t,left:r,bottom:s,right:l}=e(n);Zy(n)&&(s<=0||l<=0||t>=window.innerHeight||r>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const Pb=[["x",["left","right"],Cb],["y",["top","bottom"],Ob]];class vd{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=xd(t),s=ix(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,a,u]of Pb)for(const h of a)Object.defineProperty(this,h,{get:()=>{const d=u(r),p=s[l]-d;return this.rect[h]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Lo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var s;(s=this.target)==null||s.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function Tb(n){const{EventTarget:e}=sn(n);return n instanceof e?n:js(n)}function jh(n,e){const t=Math.abs(n.x),r=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var Sn;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(Sn||(Sn={}));function Qm(n){n.preventDefault()}function Ab(n){n.stopPropagation()}var ze;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(ze||(ze={}));const sx={start:[ze.Space,ze.Enter],cancel:[ze.Esc],end:[ze.Space,ze.Enter,ze.Tab]},Eb=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case ze.Right:return{...t,x:t.x+25};case ze.Left:return{...t,x:t.x-25};case ze.Down:return{...t,y:t.y+25};case ze.Up:return{...t,y:t.y-25}}};class kd{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Lo(js(t)),this.windowListeners=new Lo(sn(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(Sn.Resize,this.handleCancel),this.windowListeners.add(Sn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(Sn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&Nb(r),t(Wn)}handleKeyDown(e){if(yd(e)){const{active:t,context:r,options:s}=this.props,{keyboardCodes:l=sx,coordinateGetter:a=Eb,scrollBehavior:u="smooth"}=s,{code:h}=e;if(l.end.includes(h)){this.handleEnd(e);return}if(l.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:Wn;this.referenceCoordinates||(this.referenceCoordinates=p);const m=a(e,{active:t,context:r.current,currentCoordinates:p});if(m){const v=ou(m,p),k={x:0,y:0},{scrollableAncestors:b}=r.current;for(const C of b){const O=e.code,{isTop:T,isRight:E,isLeft:j,isBottom:F,maxScroll:M,minScroll:L}=rx(C),R=Sb(C),H={x:Math.min(O===ze.Right?R.right-R.width/2:R.right,Math.max(O===ze.Right?R.left:R.left+R.width/2,m.x)),y:Math.min(O===ze.Down?R.bottom-R.height/2:R.bottom,Math.max(O===ze.Down?R.top:R.top+R.height/2,m.y))},V=O===ze.Right&&!E||O===ze.Left&&!j,W=O===ze.Down&&!F||O===ze.Up&&!T;if(V&&H.x!==m.x){const q=C.scrollLeft+v.x,$=O===ze.Right&&q<=M.x||O===ze.Left&&q>=L.x;if($&&!v.y){C.scrollTo({left:q,behavior:u});return}$?k.x=C.scrollLeft-q:k.x=O===ze.Right?C.scrollLeft-M.x:C.scrollLeft-L.x,k.x&&C.scrollBy({left:-k.x,behavior:u});break}else if(W&&H.y!==m.y){const q=C.scrollTop+v.y,$=O===ze.Down&&q<=M.y||O===ze.Up&&q>=L.y;if($&&!v.x){C.scrollTo({top:q,behavior:u});return}$?k.y=C.scrollTop-q:k.y=O===ze.Down?C.scrollTop-M.y:C.scrollTop-L.y,k.y&&C.scrollBy({top:-k.y,behavior:u});break}}this.handleMove(e,vs(ou(m,this.referenceCoordinates),k))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}kd.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:r=sx,onActivation:s}=e,{active:l}=t;const{code:a}=n.nativeEvent;if(r.start.includes(a)){const u=l.activatorNode.current;return u&&n.target!==u?!1:(n.preventDefault(),s==null||s({event:n.nativeEvent}),!0)}return!1}}];function $m(n){return!!(n&&"distance"in n)}function Um(n){return!!(n&&"delay"in n)}class wd{constructor(e,t,r){var s;r===void 0&&(r=Tb(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:a}=l;this.props=e,this.events=t,this.document=js(a),this.documentListeners=new Lo(this.document),this.listeners=new Lo(r),this.windowListeners=new Lo(sn(a)),this.initialCoordinates=(s=pf(l))!=null?s:Wn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(Sn.Resize,this.handleCancel),this.windowListeners.add(Sn.DragStart,Qm),this.windowListeners.add(Sn.VisibilityChange,this.handleCancel),this.windowListeners.add(Sn.ContextMenu,Qm),this.documentListeners.add(Sn.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Um(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if($m(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(Sn.Click,Ab,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(Sn.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:u}}=l;if(!s)return;const h=(t=pf(e))!=null?t:Wn,d=ou(s,h);if(!r&&u){if($m(u)){if(u.tolerance!=null&&jh(d,u.tolerance))return this.handleCancel();if(jh(d,u.distance))return this.handleStart()}if(Um(u)&&jh(d,u.tolerance))return this.handleCancel();this.handlePending(u,d);return}e.cancelable&&e.preventDefault(),a(h)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===ze.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const Mb={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class bd extends wd{constructor(e){const{event:t}=e,r=js(t.target);super(e,Mb,r)}}bd.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r==null||r({event:t}),!0)}}];const Rb={move:{name:"mousemove"},end:{name:"mouseup"}};var mf;(function(n){n[n.RightClick=2]="RightClick"})(mf||(mf={}));class Db extends wd{constructor(e){super(e,Rb,js(e.event.target))}}Db.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return t.button===mf.RightClick?!1:(r==null||r({event:t}),!0)}}];const Lh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class jb extends wd{constructor(e){super(e,Lh)}static setup(){return window.addEventListener(Lh.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Lh.move.name,e)};function e(){}}}jb.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;const{touches:s}=t;return s.length>1?!1:(r==null||r({event:t}),!0)}}];var Io;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(Io||(Io={}));var au;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(au||(au={}));function Lb(n){let{acceleration:e,activator:t=Io.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:u=au.TreeOrder,pointerCoordinates:h,scrollableAncestors:d,scrollableAncestorRects:p,delta:m,threshold:v}=n;const k=Bb({delta:m,disabled:!l}),[b,C]=$w(),O=S.useRef({x:0,y:0}),T=S.useRef({x:0,y:0}),E=S.useMemo(()=>{switch(t){case Io.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Io.DraggableRect:return s}},[t,s,h]),j=S.useRef(null),F=S.useCallback(()=>{const L=j.current;if(!L)return;const R=O.current.x*T.current.x,H=O.current.y*T.current.y;L.scrollBy(R,H)},[]),M=S.useMemo(()=>u===au.TreeOrder?[...d].reverse():d,[u,d]);S.useEffect(()=>{if(!l||!d.length||!E){C();return}for(const L of M){if((r==null?void 0:r(L))===!1)continue;const R=d.indexOf(L),H=p[R];if(!H)continue;const{direction:V,speed:W}=bb(L,H,E,e,v);for(const q of["x","y"])k[q][V[q]]||(W[q]=0,V[q]=0);if(W.x>0||W.y>0){C(),j.current=L,b(F,a),O.current=W,T.current=V;return}}O.current={x:0,y:0},T.current={x:0,y:0},C()},[e,F,r,C,l,a,JSON.stringify(E),JSON.stringify(k),b,d,M,p,JSON.stringify(v)])}const Ib={x:{[Ct.Backward]:!1,[Ct.Forward]:!1},y:{[Ct.Backward]:!1,[Ct.Forward]:!1}};function Bb(n){let{delta:e,disabled:t}=n;const r=df(e);return ul(s=>{if(t||!r||!s)return Ib;const l={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[Ct.Backward]:s.x[Ct.Backward]||l.x===-1,[Ct.Forward]:s.x[Ct.Forward]||l.x===1},y:{[Ct.Backward]:s.y[Ct.Backward]||l.y===-1,[Ct.Forward]:s.y[Ct.Forward]||l.y===1}}},[t,e,r])}function zb(n,e){const t=e!=null?n.get(e):void 0,r=t?t.node.current:null;return ul(s=>{var l;return e==null?null:(l=r??s)!=null?l:null},[r,e])}function Fb(n,e){return S.useMemo(()=>n.reduce((t,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...t,...l]},[]),[n,e])}var qo;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(qo||(qo={}));var yf;(function(n){n.Optimized="optimized"})(yf||(yf={}));const Xm=new Map;function _b(n,e){let{dragging:t,dependencies:r,config:s}=e;const[l,a]=S.useState(null),{frequency:u,measure:h,strategy:d}=s,p=S.useRef(n),m=O(),v=Xo(m),k=S.useCallback(function(T){T===void 0&&(T=[]),!v.current&&a(E=>E===null?T:E.concat(T.filter(j=>!E.includes(j))))},[v]),b=S.useRef(null),C=ul(T=>{if(m&&!t)return Xm;if(!T||T===Xm||p.current!==n||l!=null){const E=new Map;for(let j of n){if(!j)continue;if(l&&l.length>0&&!l.includes(j.id)&&j.rect.current){E.set(j.id,j.rect.current);continue}const F=j.node.current,M=F?new vd(h(F),F):null;j.rect.current=M,M&&E.set(j.id,M)}return E}return T},[n,l,t,m,h]);return S.useEffect(()=>{p.current=n},[n]),S.useEffect(()=>{m||k()},[t,m]),S.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),S.useEffect(()=>{m||typeof u!="number"||b.current!==null||(b.current=setTimeout(()=>{k(),b.current=null},u))},[u,m,k,...r]),{droppableRects:C,measureDroppableContainers:k,measuringScheduled:l!=null};function O(){switch(d){case qo.Always:return!1;case qo.BeforeDragging:return t;default:return!t}}}function ox(n,e){return ul(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function Hb(n,e){return ox(n,e)}function Wb(n){let{callback:e,disabled:t}=n;const r=md(e),s=S.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(r)},[r,t]);return S.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Mu(n){let{callback:e,disabled:t}=n;const r=md(e),s=S.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(r)},[t]);return S.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Vb(n){return new vd(Ls(n),n)}function Km(n,e,t){e===void 0&&(e=Vb);const[r,s]=S.useState(null);function l(){s(h=>{if(!n)return null;if(n.isConnected===!1){var d;return(d=h??t)!=null?d:null}const p=e(n);return JSON.stringify(h)===JSON.stringify(p)?h:p})}const a=Wb({callback(h){if(n)for(const d of h){const{type:p,target:m}=d;if(p==="childList"&&m instanceof HTMLElement&&m.contains(n)){l();break}}}}),u=Mu({callback:l});return ar(()=>{l(),n?(u==null||u.observe(n),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(u==null||u.disconnect(),a==null||a.disconnect())},[n]),r}function Qb(n){const e=ox(n);return Jy(n,e)}const qm=[];function $b(n){const e=S.useRef(n),t=ul(r=>n?r&&r!==qm&&n&&e.current&&n.parentNode===e.current.parentNode?r:xd(n):qm,[n]);return S.useEffect(()=>{e.current=n},[n]),t}function Ub(n){const[e,t]=S.useState(null),r=S.useRef(n),s=S.useCallback(l=>{const a=Dh(l.target);a&&t(u=>u?(u.set(a,gf(a)),new Map(u)):null)},[]);return S.useEffect(()=>{const l=r.current;if(n!==l){a(l);const u=n.map(h=>{const d=Dh(h);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,gf(d)]):null}).filter(h=>h!=null);t(u.length?new Map(u):null),r.current=n}return()=>{a(n),a(l)};function a(u){u.forEach(h=>{const d=Dh(h);d==null||d.removeEventListener("scroll",s)})}},[s,n]),S.useMemo(()=>n.length?e?Array.from(e.values()).reduce((l,a)=>vs(l,a),Wn):ix(n):Wn,[n,e])}function Gm(n,e){e===void 0&&(e=[]);const t=S.useRef(null);return S.useEffect(()=>{t.current=null},e),S.useEffect(()=>{const r=n!==Wn;r&&!t.current&&(t.current=n),!r&&t.current&&(t.current=null)},[n]),t.current?ou(n,t.current):Wn}function Xb(n){S.useEffect(()=>{if(!Eu)return;const e=n.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t==null||t()}},n.map(e=>{let{sensor:t}=e;return t}))}function Kb(n,e){return S.useMemo(()=>n.reduce((t,r)=>{let{eventName:s,handler:l}=r;return t[s]=a=>{l(a,e)},t},{}),[n,e])}function lx(n){return S.useMemo(()=>n?xb(n):null,[n])}const Ym=[];function qb(n,e){e===void 0&&(e=Ls);const[t]=n,r=lx(t?sn(t):null),[s,l]=S.useState(Ym);function a(){l(()=>n.length?n.map(h=>nx(h)?r:new vd(e(h),h)):Ym)}const u=Mu({callback:a});return ar(()=>{u==null||u.disconnect(),a(),n.forEach(h=>u==null?void 0:u.observe(h))},[n]),s}function Gb(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return al(e)?e:n}function Yb(n){let{measure:e}=n;const[t,r]=S.useState(null),s=S.useCallback(d=>{for(const{target:p}of d)if(al(p)){r(m=>{const v=e(p);return m?{...m,width:v.width,height:v.height}:v});break}},[e]),l=Mu({callback:s}),a=S.useCallback(d=>{const p=Gb(d);l==null||l.disconnect(),p&&(l==null||l.observe(p)),r(p?e(p):null)},[e,l]),[u,h]=su(a);return S.useMemo(()=>({nodeRef:u,rect:t,setRef:h}),[t,u,h])}const Jb=[{sensor:bd,options:{}},{sensor:kd,options:{}}],Zb={current:{}},Xa={draggable:{measure:Vm},droppable:{measure:Vm,strategy:qo.WhileDragging,frequency:yf.Optimized},dragOverlay:{measure:Ls}};class Bo extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const eS={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Bo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:lu},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Xa,measureDroppableContainers:lu,windowRect:null,measuringScheduled:!1},tS={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:lu,draggableNodes:new Map,over:null,measureDroppableContainers:lu},Ru=S.createContext(tS),ax=S.createContext(eS);function nS(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Bo}}}function rS(n,e){switch(e.type){case xt.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case xt.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case xt.DragEnd:case xt.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case xt.RegisterDroppable:{const{element:t}=e,{id:r}=t,s=new Bo(n.droppable.containers);return s.set(r,t),{...n,droppable:{...n.droppable,containers:s}}}case xt.SetDroppableDisabled:{const{id:t,key:r,disabled:s}=e,l=n.droppable.containers.get(t);if(!l||r!==l.key)return n;const a=new Bo(n.droppable.containers);return a.set(t,{...l,disabled:s}),{...n,droppable:{...n.droppable,containers:a}}}case xt.UnregisterDroppable:{const{id:t,key:r}=e,s=n.droppable.containers.get(t);if(!s||r!==s.key)return n;const l=new Bo(n.droppable.containers);return l.delete(t),{...n,droppable:{...n.droppable,containers:l}}}default:return n}}function iS(n){let{disabled:e}=n;const{active:t,activatorEvent:r,draggableNodes:s}=S.useContext(Ru),l=df(r),a=df(t==null?void 0:t.id);return S.useEffect(()=>{if(!e&&!r&&l&&a!=null){if(!yd(l)||document.activeElement===l.target)return;const u=s.get(a);if(!u)return;const{activatorNode:h,node:d}=u;if(!h.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[h.current,d.current]){if(!p)continue;const m=Kw(p);if(m){m.focus();break}}})}},[r,e,s,a,l]),null}function sS(n,e){let{transform:t,...r}=e;return n!=null&&n.length?n.reduce((s,l)=>l({transform:s,...r}),t):t}function oS(n){return S.useMemo(()=>({draggable:{...Xa.draggable,...n==null?void 0:n.draggable},droppable:{...Xa.droppable,...n==null?void 0:n.droppable},dragOverlay:{...Xa.dragOverlay,...n==null?void 0:n.dragOverlay}}),[n==null?void 0:n.draggable,n==null?void 0:n.droppable,n==null?void 0:n.dragOverlay])}function lS(n){let{activeNode:e,measure:t,initialRect:r,config:s=!0}=n;const l=S.useRef(!1),{x:a,y:u}=typeof s=="boolean"?{x:s,y:s}:s;ar(()=>{if(!a&&!u||!e){l.current=!1;return}if(l.current||!r)return;const d=e==null?void 0:e.node.current;if(!d||d.isConnected===!1)return;const p=t(d),m=Jy(p,r);if(a||(m.x=0),u||(m.y=0),l.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const v=Zy(d);v&&v.scrollBy({top:m.y,left:m.x})}},[e,a,u,r,t])}const ux=S.createContext({...Wn,scaleX:1,scaleY:1});var ei;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(ei||(ei={}));const aS=S.memo(function(e){var t,r,s,l;let{id:a,accessibility:u,autoScroll:h=!0,children:d,sensors:p=Jb,collisionDetection:m=hb,measuring:v,modifiers:k,...b}=e;const C=S.useReducer(rS,void 0,nS),[O,T]=C,[E,j]=eb(),[F,M]=S.useState(ei.Uninitialized),L=F===ei.Initialized,{draggable:{active:R,nodes:H,translate:V},droppable:{containers:W}}=O,q=R!=null?H.get(R):null,$=S.useRef({initial:null,translated:null}),Z=S.useMemo(()=>{var et;return R!=null?{id:R,data:(et=q==null?void 0:q.data)!=null?et:Zb,rect:$}:null},[R,q]),ue=S.useRef(null),[X,G]=S.useState(null),[se,Q]=S.useState(null),ee=Xo(b,Object.values(b)),J=cl("DndDescribedBy",a),P=S.useMemo(()=>W.getEnabled(),[W]),I=oS(v),{droppableRects:le,measureDroppableContainers:pe,measuringScheduled:me}=_b(P,{dragging:L,dependencies:[V.x,V.y],config:I.droppable}),ne=zb(H,R),ce=S.useMemo(()=>se?pf(se):null,[se]),be=jr(),Ne=Hb(ne,I.draggable.measure);lS({activeNode:R!=null?H.get(R):null,config:be.layoutShiftCompensation,initialRect:Ne,measure:I.draggable.measure});const ke=Km(ne,I.draggable.measure,Ne),Ae=Km(ne?ne.parentElement:null),_e=S.useRef({activatorEvent:null,active:null,activeNode:ne,collisionRect:null,collisions:null,droppableRects:le,draggableNodes:H,draggingNode:null,draggingNodeRect:null,droppableContainers:W,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),We=W.getNodeFor((t=_e.current.over)==null?void 0:t.id),Ke=Yb({measure:I.dragOverlay.measure}),he=(r=Ke.nodeRef.current)!=null?r:ne,Ee=L?(s=Ke.rect)!=null?s:ke:null,Je=!!(Ke.nodeRef.current&&Ke.rect),Tn=Qb(Je?null:ke),ft=lx(he?sn(he):null),qe=$b(L?We??ne:null),kt=qb(qe),Kt=sS(k,{transform:{x:V.x-Tn.x,y:V.y-Tn.y,scaleX:1,scaleY:1},activatorEvent:se,active:Z,activeNodeRect:ke,containerNodeRect:Ae,draggingNodeRect:Ee,over:_e.current.over,overlayNodeRect:Ke.rect,scrollableAncestors:qe,scrollableAncestorRects:kt,windowRect:ft}),cr=ce?vs(ce,V):null,pi=Ub(qe),hr=Gm(pi),gi=Gm(pi,[ke]),on=vs(Kt,hr),Oe=Ee?pb(Ee,Kt):null,oe=Z&&Oe?m({active:Z,collisionRect:Oe,droppableRects:le,droppableContainers:P,pointerCoordinates:cr}):null,je=ab(oe,"id"),[dt,Ze]=S.useState(null),Xn=Je?Kt:vs(Kt,gi),mi=fb(Xn,(l=dt==null?void 0:dt.rect)!=null?l:null,ke),Dr=S.useRef(null),fr=S.useCallback((et,Mt)=>{let{sensor:Rt,options:An}=Mt;if(ue.current==null)return;const Vt=H.get(ue.current);if(!Vt)return;const Dt=et.nativeEvent,qt=new Rt({active:ue.current,activeNode:Vt,event:Dt,options:An,context:_e,onAbort(tt){if(!H.get(tt))return;const{onDragAbort:jt}=ee.current,En={id:tt};jt==null||jt(En),E({type:"onDragAbort",event:En})},onPending(tt,mn,jt,En){if(!H.get(tt))return;const{onDragPending:Kn}=ee.current,ln={id:tt,constraint:mn,initialCoordinates:jt,offset:En};Kn==null||Kn(ln),E({type:"onDragPending",event:ln})},onStart(tt){const mn=ue.current;if(mn==null)return;const jt=H.get(mn);if(!jt)return;const{onDragStart:En}=ee.current,Mn={activatorEvent:Dt,active:{id:mn,data:jt.data,rect:$}};Ao.unstable_batchedUpdates(()=>{En==null||En(Mn),M(ei.Initializing),T({type:xt.DragStart,initialCoordinates:tt,active:mn}),E({type:"onDragStart",event:Mn}),G(Dr.current),Q(Dt)})},onMove(tt){T({type:xt.DragMove,coordinates:tt})},onEnd:gr(xt.DragEnd),onCancel:gr(xt.DragCancel)});Dr.current=qt;function gr(tt){return async function(){const{active:jt,collisions:En,over:Mn,scrollAdjustedTranslate:Kn}=_e.current;let ln=null;if(jt&&Kn){const{cancelDrop:mr}=ee.current;ln={activatorEvent:Dt,active:jt,collisions:En,delta:Kn,over:Mn},tt===xt.DragEnd&&typeof mr=="function"&&await Promise.resolve(mr(ln))&&(tt=xt.DragCancel)}ue.current=null,Ao.unstable_batchedUpdates(()=>{T({type:tt}),M(ei.Uninitialized),Ze(null),G(null),Q(null),Dr.current=null;const mr=tt===xt.DragEnd?"onDragEnd":"onDragCancel";if(ln){const Ws=ee.current[mr];Ws==null||Ws(ln),E({type:mr,event:ln})}})}}},[H]),dr=S.useCallback((et,Mt)=>(Rt,An)=>{const Vt=Rt.nativeEvent,Dt=H.get(An);if(ue.current!==null||!Dt||Vt.dndKit||Vt.defaultPrevented)return;const qt={active:Dt};et(Rt,Mt.options,qt)===!0&&(Vt.dndKit={capturedBy:Mt.sensor},ue.current=An,fr(Rt,Mt))},[H,fr]),pr=Fb(p,dr);Xb(p),ar(()=>{ke&&F===ei.Initializing&&M(ei.Initialized)},[ke,F]),S.useEffect(()=>{const{onDragMove:et}=ee.current,{active:Mt,activatorEvent:Rt,collisions:An,over:Vt}=_e.current;if(!Mt||!Rt)return;const Dt={active:Mt,activatorEvent:Rt,collisions:An,delta:{x:on.x,y:on.y},over:Vt};Ao.unstable_batchedUpdates(()=>{et==null||et(Dt),E({type:"onDragMove",event:Dt})})},[on.x,on.y]),S.useEffect(()=>{const{active:et,activatorEvent:Mt,collisions:Rt,droppableContainers:An,scrollAdjustedTranslate:Vt}=_e.current;if(!et||ue.current==null||!Mt||!Vt)return;const{onDragOver:Dt}=ee.current,qt=An.get(je),gr=qt&&qt.rect.current?{id:qt.id,rect:qt.rect.current,data:qt.data,disabled:qt.disabled}:null,tt={active:et,activatorEvent:Mt,collisions:Rt,delta:{x:Vt.x,y:Vt.y},over:gr};Ao.unstable_batchedUpdates(()=>{Ze(gr),Dt==null||Dt(tt),E({type:"onDragOver",event:tt})})},[je]),ar(()=>{_e.current={activatorEvent:se,active:Z,activeNode:ne,collisionRect:Oe,collisions:oe,droppableRects:le,draggableNodes:H,draggingNode:he,draggingNodeRect:Ee,droppableContainers:W,over:dt,scrollableAncestors:qe,scrollAdjustedTranslate:on},$.current={initial:Ee,translated:Oe}},[Z,ne,oe,Oe,H,he,Ee,le,W,dt,qe,on]),Lb({...be,delta:V,draggingRect:Oe,pointerCoordinates:cr,scrollableAncestors:qe,scrollableAncestorRects:kt});const _s=S.useMemo(()=>({active:Z,activeNode:ne,activeNodeRect:ke,activatorEvent:se,collisions:oe,containerNodeRect:Ae,dragOverlay:Ke,draggableNodes:H,droppableContainers:W,droppableRects:le,over:dt,measureDroppableContainers:pe,scrollableAncestors:qe,scrollableAncestorRects:kt,measuringConfiguration:I,measuringScheduled:me,windowRect:ft}),[Z,ne,ke,se,oe,Ae,Ke,H,W,le,dt,pe,qe,kt,I,me,ft]),Hs=S.useMemo(()=>({activatorEvent:se,activators:pr,active:Z,activeNodeRect:ke,ariaDescribedById:{draggable:J},dispatch:T,draggableNodes:H,over:dt,measureDroppableContainers:pe}),[se,pr,Z,ke,T,J,H,dt,pe]);return ct.createElement(Yy.Provider,{value:j},ct.createElement(Ru.Provider,{value:Hs},ct.createElement(ax.Provider,{value:_s},ct.createElement(ux.Provider,{value:mi},d)),ct.createElement(iS,{disabled:(u==null?void 0:u.restoreFocus)===!1})),ct.createElement(rb,{...u,hiddenTextDescribedById:J}));function jr(){const et=(X==null?void 0:X.autoScrollEnabled)===!1,Mt=typeof h=="object"?h.enabled===!1:h===!1,Rt=L&&!et&&!Mt;return typeof h=="object"?{...h,enabled:Rt}:{enabled:Rt}}}),uS=S.createContext(null),Jm="button",cS="Draggable";function hS(n){let{id:e,data:t,disabled:r=!1,attributes:s}=n;const l=cl(cS),{activators:a,activatorEvent:u,active:h,activeNodeRect:d,ariaDescribedById:p,draggableNodes:m,over:v}=S.useContext(Ru),{role:k=Jm,roleDescription:b="draggable",tabIndex:C=0}=s??{},O=(h==null?void 0:h.id)===e,T=S.useContext(O?ux:uS),[E,j]=su(),[F,M]=su(),L=Kb(a,e),R=Xo(t);ar(()=>(m.set(e,{id:e,key:l,node:E,activatorNode:F,data:R}),()=>{const V=m.get(e);V&&V.key===l&&m.delete(e)}),[m,e]);const H=S.useMemo(()=>({role:k,tabIndex:C,"aria-disabled":r,"aria-pressed":O&&k===Jm?!0:void 0,"aria-roledescription":b,"aria-describedby":p.draggable}),[r,k,C,O,b,p.draggable]);return{active:h,activatorEvent:u,activeNodeRect:d,attributes:H,isDragging:O,listeners:r?void 0:L,node:E,over:v,setNodeRef:j,setActivatorNodeRef:M,transform:T}}function fS(){return S.useContext(ax)}const dS="Droppable",pS={timeout:25};function gS(n){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:s}=n;const l=cl(dS),{active:a,dispatch:u,over:h,measureDroppableContainers:d}=S.useContext(Ru),p=S.useRef({disabled:t}),m=S.useRef(!1),v=S.useRef(null),k=S.useRef(null),{disabled:b,updateMeasurementsFor:C,timeout:O}={...pS,...s},T=Xo(C??r),E=S.useCallback(()=>{if(!m.current){m.current=!0;return}k.current!=null&&clearTimeout(k.current),k.current=setTimeout(()=>{d(Array.isArray(T.current)?T.current:[T.current]),k.current=null},O)},[O]),j=Mu({callback:E,disabled:b||!a}),F=S.useCallback((H,V)=>{j&&(V&&(j.unobserve(V),m.current=!1),H&&j.observe(H))},[j]),[M,L]=su(F),R=Xo(e);return S.useEffect(()=>{!j||!M.current||(j.disconnect(),m.current=!1,j.observe(M.current))},[M,j]),S.useEffect(()=>(u({type:xt.RegisterDroppable,element:{id:r,key:l,disabled:t,node:M,rect:v,data:R}}),()=>u({type:xt.UnregisterDroppable,key:l,id:r})),[r]),S.useEffect(()=>{t!==p.current.disabled&&(u({type:xt.SetDroppableDisabled,id:r,key:l,disabled:t}),p.current.disabled=t)},[r,l,t,u]),{active:a,rect:v,isOver:(h==null?void 0:h.id)===r,node:M,over:h,setNodeRef:L}}function cx(n,e,t){const r=n.slice();return r.splice(t<0?r.length+t:t,0,r.splice(e,1)[0]),r}function mS(n,e){return n.reduce((t,r,s)=>{const l=e.get(r);return l&&(t[s]=l),t},Array(n.length))}function Ca(n){return n!==null&&n>=0}function yS(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function xS(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const Oa={scaleX:1,scaleY:1},vS=n=>{var e;let{rects:t,activeNodeRect:r,activeIndex:s,overIndex:l,index:a}=n;const u=(e=t[s])!=null?e:r;if(!u)return null;const h=kS(t,a,s);if(a===s){const d=t[l];return d?{x:s<l?d.left+d.width-(u.left+u.width):d.left-u.left,y:0,...Oa}:null}return a>s&&a<=l?{x:-u.width-h,y:0,...Oa}:a<s&&a>=l?{x:u.width+h,y:0,...Oa}:{x:0,y:0,...Oa}};function kS(n,e,t){const r=n[e],s=n[e-1],l=n[e+1];return!r||!s&&!l?0:t<e?s?r.left-(s.left+s.width):l.left-(r.left+r.width):l?l.left-(r.left+r.width):r.left-(s.left+s.width)}const hx=n=>{let{rects:e,activeIndex:t,overIndex:r,index:s}=n;const l=cx(e,r,t),a=e[s],u=l[s];return!u||!a?null:{x:u.left-a.left,y:u.top-a.top,scaleX:u.width/a.width,scaleY:u.height/a.height}},fx="Sortable",dx=ct.createContext({activeIndex:-1,containerId:fx,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:hx,disabled:{draggable:!1,droppable:!1}});function wS(n){let{children:e,id:t,items:r,strategy:s=hx,disabled:l=!1}=n;const{active:a,dragOverlay:u,droppableRects:h,over:d,measureDroppableContainers:p}=fS(),m=cl(fx,t),v=u.rect!==null,k=S.useMemo(()=>r.map(L=>typeof L=="object"&&"id"in L?L.id:L),[r]),b=a!=null,C=a?k.indexOf(a.id):-1,O=d?k.indexOf(d.id):-1,T=S.useRef(k),E=!yS(k,T.current),j=O!==-1&&C===-1||E,F=xS(l);ar(()=>{E&&b&&p(k)},[E,k,b,p]),S.useEffect(()=>{T.current=k},[k]);const M=S.useMemo(()=>({activeIndex:C,containerId:m,disabled:F,disableTransforms:j,items:k,overIndex:O,useDragOverlay:v,sortedRects:mS(k,h),strategy:s}),[C,m,F.draggable,F.droppable,j,k,O,h,v,s]);return ct.createElement(dx.Provider,{value:M},e)}const bS=n=>{let{id:e,items:t,activeIndex:r,overIndex:s}=n;return cx(t,r,s).indexOf(e)},SS=n=>{let{containerId:e,isSorting:t,wasDragging:r,index:s,items:l,newIndex:a,previousItems:u,previousContainerId:h,transition:d}=n;return!d||!r||u!==l&&s===a?!1:t?!0:a!==s&&e===h},CS={duration:200,easing:"ease"},px="transform",OS=Ko.Transition.toString({property:px,duration:0,easing:"linear"}),NS={roleDescription:"sortable"};function PS(n){let{disabled:e,index:t,node:r,rect:s}=n;const[l,a]=S.useState(null),u=S.useRef(t);return ar(()=>{if(!e&&t!==u.current&&r.current){const h=s.current;if(h){const d=Ls(r.current,{ignoreTransform:!0}),p={x:h.left-d.left,y:h.top-d.top,scaleX:h.width/d.width,scaleY:h.height/d.height};(p.x||p.y)&&a(p)}}t!==u.current&&(u.current=t)},[e,t,r,s]),S.useEffect(()=>{l&&a(null)},[l]),l}function TS(n){let{animateLayoutChanges:e=SS,attributes:t,disabled:r,data:s,getNewIndex:l=bS,id:a,strategy:u,resizeObserverConfig:h,transition:d=CS}=n;const{items:p,containerId:m,activeIndex:v,disabled:k,disableTransforms:b,sortedRects:C,overIndex:O,useDragOverlay:T,strategy:E}=S.useContext(dx),j=AS(r,k),F=p.indexOf(a),M=S.useMemo(()=>({sortable:{containerId:m,index:F,items:p},...s}),[m,s,F,p]),L=S.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:R,node:H,isOver:V,setNodeRef:W}=gS({id:a,data:M,disabled:j.droppable,resizeObserverConfig:{updateMeasurementsFor:L,...h}}),{active:q,activatorEvent:$,activeNodeRect:Z,attributes:ue,setNodeRef:X,listeners:G,isDragging:se,over:Q,setActivatorNodeRef:ee,transform:J}=hS({id:a,data:M,attributes:{...NS,...t},disabled:j.draggable}),P=Qw(W,X),I=!!q,le=I&&!b&&Ca(v)&&Ca(O),pe=!T&&se,me=pe&&le?J:null,ce=le?me??(u??E)({rects:C,activeNodeRect:Z,activeIndex:v,overIndex:O,index:F}):null,be=Ca(v)&&Ca(O)?l({id:a,items:p,activeIndex:v,overIndex:O}):F,Ne=q==null?void 0:q.id,ke=S.useRef({activeId:Ne,items:p,newIndex:be,containerId:m}),Ae=p!==ke.current.items,_e=e({active:q,containerId:m,isDragging:se,isSorting:I,id:a,index:F,items:p,newIndex:ke.current.newIndex,previousItems:ke.current.items,previousContainerId:ke.current.containerId,transition:d,wasDragging:ke.current.activeId!=null}),We=PS({disabled:!_e,index:F,node:H,rect:R});return S.useEffect(()=>{I&&ke.current.newIndex!==be&&(ke.current.newIndex=be),m!==ke.current.containerId&&(ke.current.containerId=m),p!==ke.current.items&&(ke.current.items=p)},[I,be,m,p]),S.useEffect(()=>{if(Ne===ke.current.activeId)return;if(Ne!=null&&ke.current.activeId==null){ke.current.activeId=Ne;return}const he=setTimeout(()=>{ke.current.activeId=Ne},50);return()=>clearTimeout(he)},[Ne]),{active:q,activeIndex:v,attributes:ue,data:M,rect:R,index:F,newIndex:be,items:p,isOver:V,isSorting:I,isDragging:se,listeners:G,node:H,overIndex:O,over:Q,setNodeRef:P,setActivatorNodeRef:ee,setDroppableNodeRef:W,setDraggableNodeRef:X,transform:We??ce,transition:Ke()};function Ke(){if(We||Ae&&ke.current.newIndex===F)return OS;if(!(pe&&!yd($)||!d)&&(I||_e))return Ko.Transition.toString({...d,property:px})}}function AS(n,e){var t,r;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n==null?void 0:n.draggable)!=null?t:e.draggable,droppable:(r=n==null?void 0:n.droppable)!=null?r:e.droppable}}ze.Down,ze.Right,ze.Up,ze.Left;function Zm(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function ES(n){if(Array.isArray(n))return n}function MS(n,e,t){return(e=zS(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function RS(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,l,a,u=[],h=!0,d=!1;try{if(l=(t=t.call(n)).next,e!==0)for(;!(h=(r=l.call(t)).done)&&(u.push(r.value),u.length!==e);h=!0);}catch(p){d=!0,s=p}finally{try{if(!h&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(d)throw s}}return u}}function DS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function e0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function t0(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?e0(Object(t),!0).forEach(function(r){MS(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):e0(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function jS(n,e){if(n==null)return{};var t,r,s=LS(n,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(r=0;r<l.length;r++)t=l[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}function LS(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function IS(n,e){return ES(n)||RS(n,e)||FS(n,e)||DS()}function BS(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function zS(n){var e=BS(n,"string");return typeof e=="symbol"?e:e+""}function FS(n,e){if(n){if(typeof n=="string")return Zm(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Zm(n,e):void 0}}function _S(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function n0(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function r0(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?n0(Object(t),!0).forEach(function(r){_S(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):n0(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function HS(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){return e.reduceRight(function(s,l){return l(s)},r)}}function Eo(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return s.length>=n.length?n.apply(this,s):function(){for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return e.apply(t,[].concat(s,u))}}}function uu(n){return{}.toString.call(n).includes("Object")}function WS(n){return!Object.keys(n).length}function Go(n){return typeof n=="function"}function VS(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function QS(n,e){return uu(e)||oi("changeType"),Object.keys(e).some(function(t){return!VS(n,t)})&&oi("changeField"),e}function $S(n){Go(n)||oi("selectorType")}function US(n){Go(n)||uu(n)||oi("handlerType"),uu(n)&&Object.values(n).some(function(e){return!Go(e)})&&oi("handlersType")}function XS(n){n||oi("initialIsRequired"),uu(n)||oi("initialType"),WS(n)&&oi("initialContent")}function KS(n,e){throw new Error(n[e]||n.default)}var qS={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},oi=Eo(KS)(qS),Na={changes:QS,selector:$S,handler:US,initial:XS};function GS(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Na.initial(n),Na.handler(e);var t={current:n},r=Eo(ZS)(t,e),s=Eo(JS)(t),l=Eo(Na.changes)(n),a=Eo(YS)(t);function u(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(p){return p};return Na.selector(d),d(t.current)}function h(d){HS(r,s,l,a)(d)}return[u,h]}function YS(n,e){return Go(e)?e(n.current):e}function JS(n,e){return n.current=r0(r0({},n.current),e),e}function ZS(n,e,t){return Go(e)?e(n.current):Object.keys(t).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,n.current[r])}),t}var e2={create:GS},t2={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function n2(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return s.length>=n.length?n.apply(this,s):function(){for(var a=arguments.length,u=new Array(a),h=0;h<a;h++)u[h]=arguments[h];return e.apply(t,[].concat(s,u))}}}function r2(n){return{}.toString.call(n).includes("Object")}function i2(n){return n||i0("configIsRequired"),r2(n)||i0("configType"),n.urls?(s2(),{paths:{vs:n.urls.monacoBase}}):n}function s2(){console.warn(gx.deprecation)}function o2(n,e){throw new Error(n[e]||n.default)}var gx={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},i0=n2(o2)(gx),l2={config:i2},a2=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return t.reduceRight(function(l,a){return a(l)},s)}};function mx(n,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&n[t]&&Object.assign(e[t],mx(n[t],e[t]))}),t0(t0({},n),e)}var u2={type:"cancelation",msg:"operation is manually canceled"};function Ih(n){var e=!1,t=new Promise(function(r,s){n.then(function(l){return e?s(u2):r(l)}),n.catch(s)});return t.cancel=function(){return e=!0},t}var c2=["monaco"],h2=e2.create({config:t2,isInitialized:!1,resolve:null,reject:null,monaco:null}),yx=IS(h2,2),hl=yx[0],Du=yx[1];function f2(n){var e=l2.config(n),t=e.monaco,r=jS(e,c2);Du(function(s){return{config:mx(s.config,r),monaco:t}})}function d2(){var n=hl(function(e){var t=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:t,isInitialized:r,resolve:s}});if(!n.isInitialized){if(Du({isInitialized:!0}),n.monaco)return n.resolve(n.monaco),Ih(Bh);if(window.monaco&&window.monaco.editor)return xx(window.monaco),n.resolve(window.monaco),Ih(Bh);a2(p2,m2)(y2)}return Ih(Bh)}function p2(n){return document.body.appendChild(n)}function g2(n){var e=document.createElement("script");return n&&(e.src=n),e}function m2(n){var e=hl(function(r){var s=r.config,l=r.reject;return{config:s,reject:l}}),t=g2("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return n()},t.onerror=e.reject,t}function y2(){var n=hl(function(t){var r=t.config,s=t.resolve,l=t.reject;return{config:r,resolve:s,reject:l}}),e=window.require;e.config(n.config),e(["vs/editor/editor.main"],function(t){var r=t.m||t;xx(r),n.resolve(r)},function(t){n.reject(t)})}function xx(n){hl().monaco||Du({monaco:n})}function x2(){return hl(function(n){var e=n.monaco;return e})}var Bh=new Promise(function(n,e){return Du({resolve:n,reject:e})}),vx={config:f2,init:d2,__getMonacoInstance:x2},v2={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},zh=v2,k2={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},w2=k2;function b2({children:n}){return ct.createElement("div",{style:w2.container},n)}var S2=b2,C2=S2;function O2({width:n,height:e,isEditorReady:t,loading:r,_ref:s,className:l,wrapperProps:a}){return ct.createElement("section",{style:{...zh.wrapper,width:n,height:e},...a},!t&&ct.createElement(C2,null,r),ct.createElement("div",{ref:s,style:{...zh.fullWidth,...!t&&zh.hide},className:l}))}var N2=O2,kx=S.memo(N2);function P2(n){S.useEffect(n,[])}var wx=P2;function T2(n,e,t=!0){let r=S.useRef(!0);S.useEffect(r.current||!t?()=>{r.current=!1}:n,e)}var pn=T2;function zo(){}function ds(n,e,t,r){return A2(n,r)||E2(n,e,t,r)}function A2(n,e){return n.editor.getModel(bx(n,e))}function E2(n,e,t,r){return n.editor.createModel(e,t,r?bx(n,r):void 0)}function bx(n,e){return n.Uri.parse(e)}function M2({original:n,modified:e,language:t,originalLanguage:r,modifiedLanguage:s,originalModelPath:l,modifiedModelPath:a,keepCurrentOriginalModel:u=!1,keepCurrentModifiedModel:h=!1,theme:d="light",loading:p="Loading...",options:m={},height:v="100%",width:k="100%",className:b,wrapperProps:C={},beforeMount:O=zo,onMount:T=zo}){let[E,j]=S.useState(!1),[F,M]=S.useState(!0),L=S.useRef(null),R=S.useRef(null),H=S.useRef(null),V=S.useRef(T),W=S.useRef(O),q=S.useRef(!1);wx(()=>{let X=vx.init();return X.then(G=>(R.current=G)&&M(!1)).catch(G=>(G==null?void 0:G.type)!=="cancelation"&&console.error("Monaco initialization: error:",G)),()=>L.current?ue():X.cancel()}),pn(()=>{if(L.current&&R.current){let X=L.current.getOriginalEditor(),G=ds(R.current,n||"",r||t||"text",l||"");G!==X.getModel()&&X.setModel(G)}},[l],E),pn(()=>{if(L.current&&R.current){let X=L.current.getModifiedEditor(),G=ds(R.current,e||"",s||t||"text",a||"");G!==X.getModel()&&X.setModel(G)}},[a],E),pn(()=>{let X=L.current.getModifiedEditor();X.getOption(R.current.editor.EditorOption.readOnly)?X.setValue(e||""):e!==X.getValue()&&(X.executeEdits("",[{range:X.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),X.pushUndoStop())},[e],E),pn(()=>{var X,G;(G=(X=L.current)==null?void 0:X.getModel())==null||G.original.setValue(n||"")},[n],E),pn(()=>{let{original:X,modified:G}=L.current.getModel();R.current.editor.setModelLanguage(X,r||t||"text"),R.current.editor.setModelLanguage(G,s||t||"text")},[t,r,s],E),pn(()=>{var X;(X=R.current)==null||X.editor.setTheme(d)},[d],E),pn(()=>{var X;(X=L.current)==null||X.updateOptions(m)},[m],E);let $=S.useCallback(()=>{var se;if(!R.current)return;W.current(R.current);let X=ds(R.current,n||"",r||t||"text",l||""),G=ds(R.current,e||"",s||t||"text",a||"");(se=L.current)==null||se.setModel({original:X,modified:G})},[t,e,s,n,r,l,a]),Z=S.useCallback(()=>{var X;!q.current&&H.current&&(L.current=R.current.editor.createDiffEditor(H.current,{automaticLayout:!0,...m}),$(),(X=R.current)==null||X.editor.setTheme(d),j(!0),q.current=!0)},[m,d,$]);S.useEffect(()=>{E&&V.current(L.current,R.current)},[E]),S.useEffect(()=>{!F&&!E&&Z()},[F,E,Z]);function ue(){var G,se,Q,ee;let X=(G=L.current)==null?void 0:G.getModel();u||((se=X==null?void 0:X.original)==null||se.dispose()),h||((Q=X==null?void 0:X.modified)==null||Q.dispose()),(ee=L.current)==null||ee.dispose()}return ct.createElement(kx,{width:k,height:v,isEditorReady:E,loading:p,_ref:H,className:b,wrapperProps:C})}var R2=M2;S.memo(R2);function D2(n){let e=S.useRef();return S.useEffect(()=>{e.current=n},[n]),e.current}var j2=D2,Pa=new Map;function L2({defaultValue:n,defaultLanguage:e,defaultPath:t,value:r,language:s,path:l,theme:a="light",line:u,loading:h="Loading...",options:d={},overrideServices:p={},saveViewState:m=!0,keepCurrentModel:v=!1,width:k="100%",height:b="100%",className:C,wrapperProps:O={},beforeMount:T=zo,onMount:E=zo,onChange:j,onValidate:F=zo}){let[M,L]=S.useState(!1),[R,H]=S.useState(!0),V=S.useRef(null),W=S.useRef(null),q=S.useRef(null),$=S.useRef(E),Z=S.useRef(T),ue=S.useRef(),X=S.useRef(r),G=j2(l),se=S.useRef(!1),Q=S.useRef(!1);wx(()=>{let P=vx.init();return P.then(I=>(V.current=I)&&H(!1)).catch(I=>(I==null?void 0:I.type)!=="cancelation"&&console.error("Monaco initialization: error:",I)),()=>W.current?J():P.cancel()}),pn(()=>{var I,le,pe,me;let P=ds(V.current,n||r||"",e||s||"",l||t||"");P!==((I=W.current)==null?void 0:I.getModel())&&(m&&Pa.set(G,(le=W.current)==null?void 0:le.saveViewState()),(pe=W.current)==null||pe.setModel(P),m&&((me=W.current)==null||me.restoreViewState(Pa.get(l))))},[l],M),pn(()=>{var P;(P=W.current)==null||P.updateOptions(d)},[d],M),pn(()=>{!W.current||r===void 0||(W.current.getOption(V.current.editor.EditorOption.readOnly)?W.current.setValue(r):r!==W.current.getValue()&&(Q.current=!0,W.current.executeEdits("",[{range:W.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),W.current.pushUndoStop(),Q.current=!1))},[r],M),pn(()=>{var I,le;let P=(I=W.current)==null?void 0:I.getModel();P&&s&&((le=V.current)==null||le.editor.setModelLanguage(P,s))},[s],M),pn(()=>{var P;u!==void 0&&((P=W.current)==null||P.revealLine(u))},[u],M),pn(()=>{var P;(P=V.current)==null||P.editor.setTheme(a)},[a],M);let ee=S.useCallback(()=>{var P;if(!(!q.current||!V.current)&&!se.current){Z.current(V.current);let I=l||t,le=ds(V.current,r||n||"",e||s||"",I||"");W.current=(P=V.current)==null?void 0:P.editor.create(q.current,{model:le,automaticLayout:!0,...d},p),m&&W.current.restoreViewState(Pa.get(I)),V.current.editor.setTheme(a),u!==void 0&&W.current.revealLine(u),L(!0),se.current=!0}},[n,e,t,r,s,l,d,p,m,a,u]);S.useEffect(()=>{M&&$.current(W.current,V.current)},[M]),S.useEffect(()=>{!R&&!M&&ee()},[R,M,ee]),X.current=r,S.useEffect(()=>{var P,I;M&&j&&((P=ue.current)==null||P.dispose(),ue.current=(I=W.current)==null?void 0:I.onDidChangeModelContent(le=>{Q.current||j(W.current.getValue(),le)}))},[M,j]),S.useEffect(()=>{if(M){let P=V.current.editor.onDidChangeMarkers(I=>{var pe;let le=(pe=W.current.getModel())==null?void 0:pe.uri;if(le&&I.find(me=>me.path===le.path)){let me=V.current.editor.getModelMarkers({resource:le});F==null||F(me)}});return()=>{P==null||P.dispose()}}return()=>{}},[M,F]);function J(){var P,I;(P=ue.current)==null||P.dispose(),v?m&&Pa.set(l,W.current.saveViewState()):(I=W.current.getModel())==null||I.dispose(),W.current.dispose()}return ct.createElement(kx,{width:k,height:b,isEditorReady:M,loading:h,_ref:q,className:C,wrapperProps:O})}var I2=L2,B2=S.memo(I2),z2=B2;let xf=[],Sx=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?Sx:xf).push(t=t+n[e])})();function F2(n){if(n<768)return!1;for(let e=0,t=xf.length;;){let r=e+t>>1;if(n<xf[r])t=r;else if(n>=Sx[r])e=r+1;else return!0;if(e==t)return!1}}function s0(n){return n>=127462&&n<=127487}const o0=8205;function _2(n,e,t=!0,r=!0){return(t?Cx:H2)(n,e,r)}function Cx(n,e,t){if(e==n.length)return e;e&&Ox(n.charCodeAt(e))&&Nx(n.charCodeAt(e-1))&&e--;let r=Fh(n,e);for(e+=l0(r);e<n.length;){let s=Fh(n,e);if(r==o0||s==o0||t&&F2(s))e+=l0(s),r=s;else if(s0(s)){let l=0,a=e-2;for(;a>=0&&s0(Fh(n,a));)l++,a-=2;if(l%2==0)break;e+=2}else break}return e}function H2(n,e,t){for(;e>0;){let r=Cx(n,e-2,t);if(r<e)return r;e--}return 0}function Fh(n,e){let t=n.charCodeAt(e);if(!Nx(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return Ox(r)?(t-55296<<10)+(r-56320)+65536:t}function Ox(n){return n>=56320&&n<57344}function Nx(n){return n>=55296&&n<56320}function l0(n){return n<65536?1:2}class Be{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=Os(this,e,t);let s=[];return this.decompose(0,e,s,2),r.length&&r.decompose(0,r.length,s,3),this.decompose(t,this.length,s,1),ir.from(s,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Os(this,e,t);let r=[];return this.decompose(e,t,r,0),ir.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),s=new Fo(this),l=new Fo(e);for(let a=t,u=t;;){if(s.next(a),l.next(a),a=0,s.lineBreak!=l.lineBreak||s.done!=l.done||s.value!=l.value)return!1;if(u+=s.value.length,s.done||u>=r)return!0}}iter(e=1){return new Fo(this,e)}iterRange(e,t=this.length){return new Px(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;r=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Tx(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Be.empty:e.length<=32?new ut(e):ir.from(ut.split(e,[]))}}class ut extends Be{constructor(e,t=W2(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,s){for(let l=0;;l++){let a=this.text[l],u=s+a.length;if((t?r:u)>=e)return new V2(s,u,r,a);s=u+1,r++}}decompose(e,t,r,s){let l=e<=0&&t>=this.length?this:new ut(a0(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let a=r.pop(),u=Ka(l.text,a.text.slice(),0,l.length);if(u.length<=32)r.push(new ut(u,a.length+l.length));else{let h=u.length>>1;r.push(new ut(u.slice(0,h)),new ut(u.slice(h)))}}else r.push(l)}replace(e,t,r){if(!(r instanceof ut))return super.replace(e,t,r);[e,t]=Os(this,e,t);let s=Ka(this.text,Ka(r.text,a0(this.text,0,e)),t),l=this.length+r.length-(t-e);return s.length<=32?new ut(s,l):ir.from(ut.split(s,[]),l)}sliceString(e,t=this.length,r=`
`){[e,t]=Os(this,e,t);let s="";for(let l=0,a=0;l<=t&&a<this.text.length;a++){let u=this.text[a],h=l+u.length;l>e&&a&&(s+=r),e<h&&t>l&&(s+=u.slice(Math.max(0,e-l),t-l)),l=h+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],s=-1;for(let l of e)r.push(l),s+=l.length+1,r.length==32&&(t.push(new ut(r,s)),r=[],s=-1);return s>-1&&t.push(new ut(r,s)),t}}class ir extends Be{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,s){for(let l=0;;l++){let a=this.children[l],u=s+a.length,h=r+a.lines-1;if((t?h:u)>=e)return a.lineInner(e,t,r,s);s=u+1,r=h+1}}decompose(e,t,r,s){for(let l=0,a=0;a<=t&&l<this.children.length;l++){let u=this.children[l],h=a+u.length;if(e<=h&&t>=a){let d=s&((a<=e?1:0)|(h>=t?2:0));a>=e&&h<=t&&!d?r.push(u):u.decompose(e-a,t-a,r,d)}a=h+1}}replace(e,t,r){if([e,t]=Os(this,e,t),r.lines<this.lines)for(let s=0,l=0;s<this.children.length;s++){let a=this.children[s],u=l+a.length;if(e>=l&&t<=u){let h=a.replace(e-l,t-l,r),d=this.lines-a.lines+h.lines;if(h.lines<d>>4&&h.lines>d>>6){let p=this.children.slice();return p[s]=h,new ir(p,this.length-(t-e)+r.length)}return super.replace(l,u,h)}l=u+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=Os(this,e,t);let s="";for(let l=0,a=0;l<this.children.length&&a<=t;l++){let u=this.children[l],h=a+u.length;a>e&&l&&(s+=r),e<h&&t>a&&(s+=u.sliceString(e-a,t-a,r)),a=h+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof ir))return 0;let r=0,[s,l,a,u]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,l+=t){if(s==a||l==u)return r;let h=this.children[s],d=e.children[l];if(h!=d)return r+h.scanIdentical(d,t);r+=h.length+1}}static from(e,t=e.reduce((r,s)=>r+s.length+1,-1)){let r=0;for(let k of e)r+=k.lines;if(r<32){let k=[];for(let b of e)b.flatten(k);return new ut(k,t)}let s=Math.max(32,r>>5),l=s<<1,a=s>>1,u=[],h=0,d=-1,p=[];function m(k){let b;if(k.lines>l&&k instanceof ir)for(let C of k.children)m(C);else k.lines>a&&(h>a||!h)?(v(),u.push(k)):k instanceof ut&&h&&(b=p[p.length-1])instanceof ut&&k.lines+b.lines<=32?(h+=k.lines,d+=k.length+1,p[p.length-1]=new ut(b.text.concat(k.text),b.length+1+k.length)):(h+k.lines>s&&v(),h+=k.lines,d+=k.length+1,p.push(k))}function v(){h!=0&&(u.push(p.length==1?p[0]:ir.from(p,d)),d=-1,h=p.length=0)}for(let k of e)m(k);return v(),u.length==1?u[0]:new ir(u,t)}}Be.empty=new ut([""],0);function W2(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Ka(n,e,t=0,r=1e9){for(let s=0,l=0,a=!0;l<n.length&&s<=r;l++){let u=n[l],h=s+u.length;h>=t&&(h>r&&(u=u.slice(0,r-s)),s<t&&(u=u.slice(t-s)),a?(e[e.length-1]+=u,a=!1):e.push(u)),s=h+1}return e}function a0(n,e,t){return Ka(n,[""],e,t)}class Fo{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof ut?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,s=this.nodes[r],l=this.offsets[r],a=l>>1,u=s instanceof ut?s.text.length:s.children.length;if(a==(t>0?u:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof ut){let h=s.text[a+(t<0?-1:0)];if(this.offsets[r]+=t,h.length>Math.max(0,e))return this.value=e==0?h:t>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=s.children[a+(t<0?-1:0)];e>h.length?(e-=h.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(h),this.offsets.push(t>0?1:(h instanceof ut?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Px{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Fo(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=r?s:t<0?s.slice(s.length-r):s.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Tx{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Be.prototype[Symbol.iterator]=function(){return this.iter()},Fo.prototype[Symbol.iterator]=Px.prototype[Symbol.iterator]=Tx.prototype[Symbol.iterator]=function(){return this});class V2{constructor(e,t,r,s){this.from=e,this.to=t,this.number=r,this.text=s}get length(){return this.to-this.from}}function Os(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function _t(n,e,t=!0,r=!0){return _2(n,e,t,r)}function Q2(n){return n>=56320&&n<57344}function $2(n){return n>=55296&&n<56320}function U2(n,e){let t=n.charCodeAt(e);if(!$2(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return Q2(r)?(t-55296<<10)+(r-56320)+65536:t}function X2(n){return n<65536?1:2}const vf=/\r\n?|\n/;var gn=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(gn||(gn={}));class Er{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,s=0;t<this.sections.length;){let l=this.sections[t++],a=this.sections[t++];a<0?(e(r,s,l),s+=l):s+=a,r+=l}}iterChangedRanges(e,t=!1){kf(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];s<0?e.push(r,s):e.push(s,r)}return new Er(e)}composeDesc(e){return this.empty?e:e.empty?this:Ax(this,e)}mapDesc(e,t=!1){return e.empty?this:wf(this,e,t)}mapPos(e,t=-1,r=gn.Simple){let s=0,l=0;for(let a=0;a<this.sections.length;){let u=this.sections[a++],h=this.sections[a++],d=s+u;if(h<0){if(d>e)return l+(e-s);l+=u}else{if(r!=gn.Simple&&d>=e&&(r==gn.TrackDel&&s<e&&d>e||r==gn.TrackBefore&&s<e||r==gn.TrackAfter&&d>e))return null;if(d>e||d==e&&t<0&&!u)return e==s||t<0?l:l+h;l+=h}s=d}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return l}touchesRange(e,t=e){for(let r=0,s=0;r<this.sections.length&&s<=t;){let l=this.sections[r++],a=this.sections[r++],u=s+l;if(a>=0&&s<=t&&u>=e)return s<e&&u>t?"cover":!0;s=u}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+r+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Er(e)}static create(e){return new Er(e)}}class Ot extends Er{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return kf(this,(t,r,s,l,a)=>e=e.replace(s,s+(r-t),a),!1),e}mapDesc(e,t=!1){return wf(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let s=0,l=0;s<t.length;s+=2){let a=t[s],u=t[s+1];if(u>=0){t[s]=u,t[s+1]=a;let h=s>>1;for(;r.length<h;)r.push(Be.empty);r.push(a?e.slice(l,l+a):Be.empty)}l+=a}return new Ot(t,r)}compose(e){return this.empty?e:e.empty?this:Ax(this,e,!0)}map(e,t=!1){return e.empty?this:wf(this,e,t,!0)}iterChanges(e,t=!1){kf(this,e,t)}get desc(){return Er.create(this.sections)}filter(e){let t=[],r=[],s=[],l=new Yo(this);e:for(let a=0,u=0;;){let h=a==e.length?1e9:e[a++];for(;u<h||u==h&&l.len==0;){if(l.done)break e;let p=Math.min(l.len,h-u);Ft(s,p,-1);let m=l.ins==-1?-1:l.off==0?l.ins:0;Ft(t,p,m),m>0&&ii(r,t,l.text),l.forward(p),u+=p}let d=e[a++];for(;u<d;){if(l.done)break e;let p=Math.min(l.len,d-u);Ft(t,p,-1),Ft(s,p,l.ins==-1?-1:l.off==0?l.ins:0),l.forward(p),u+=p}}return{changes:new Ot(t,r),filtered:Er.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],s=this.sections[t+1];s<0?e.push(r):s==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let s=[],l=[],a=0,u=null;function h(p=!1){if(!p&&!s.length)return;a<t&&Ft(s,t-a,-1);let m=new Ot(s,l);u=u?u.compose(m.map(u)):m,s=[],l=[],a=0}function d(p){if(Array.isArray(p))for(let m of p)d(m);else if(p instanceof Ot){if(p.length!=t)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${t})`);h(),u=u?u.compose(p.map(u)):p}else{let{from:m,to:v=m,insert:k}=p;if(m>v||m<0||v>t)throw new RangeError(`Invalid change range ${m} to ${v} (in doc of length ${t})`);let b=k?typeof k=="string"?Be.of(k.split(r||vf)):k:Be.empty,C=b.length;if(m==v&&C==0)return;m<a&&h(),m>a&&Ft(s,m-a,-1),Ft(s,v-m,C),ii(l,s,b),a=v}}return d(e),h(!u),u}static empty(e){return new Ot(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")t.push(l,-1);else{if(!Array.isArray(l)||typeof l[0]!="number"||l.some((a,u)=>u&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(l.length==1)t.push(l[0],0);else{for(;r.length<s;)r.push(Be.empty);r[s]=Be.of(l.slice(1)),t.push(l[0],r[s].length)}}}return new Ot(t,r)}static createSet(e,t){return new Ot(e,t)}}function Ft(n,e,t,r=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:s>=0&&e==0&&n[s]==0?n[s+1]+=t:r?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function ii(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Be.empty);n.push(t)}}function kf(n,e,t){let r=n.inserted;for(let s=0,l=0,a=0;a<n.sections.length;){let u=n.sections[a++],h=n.sections[a++];if(h<0)s+=u,l+=u;else{let d=s,p=l,m=Be.empty;for(;d+=u,p+=h,h&&r&&(m=m.append(r[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)u=n.sections[a++],h=n.sections[a++];e(s,d,l,p,m),s=d,l=p}}}function wf(n,e,t,r=!1){let s=[],l=r?[]:null,a=new Yo(n),u=new Yo(e);for(let h=-1;;){if(a.done&&u.len||u.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&u.ins==-1){let d=Math.min(a.len,u.len);Ft(s,d,-1),a.forward(d),u.forward(d)}else if(u.ins>=0&&(a.ins<0||h==a.i||a.off==0&&(u.len<a.len||u.len==a.len&&!t))){let d=u.len;for(Ft(s,u.ins,-1);d;){let p=Math.min(a.len,d);a.ins>=0&&h<a.i&&a.len<=p&&(Ft(s,0,a.ins),l&&ii(l,s,a.text),h=a.i),a.forward(p),d-=p}u.next()}else if(a.ins>=0){let d=0,p=a.len;for(;p;)if(u.ins==-1){let m=Math.min(p,u.len);d+=m,p-=m,u.forward(m)}else if(u.ins==0&&u.len<p)p-=u.len,u.next();else break;Ft(s,d,h<a.i?a.ins:0),l&&h<a.i&&ii(l,s,a.text),h=a.i,a.forward(a.len-p)}else{if(a.done&&u.done)return l?Ot.createSet(s,l):Er.create(s);throw new Error("Mismatched change set lengths")}}}function Ax(n,e,t=!1){let r=[],s=t?[]:null,l=new Yo(n),a=new Yo(e);for(let u=!1;;){if(l.done&&a.done)return s?Ot.createSet(r,s):Er.create(r);if(l.ins==0)Ft(r,l.len,0,u),l.next();else if(a.len==0&&!a.done)Ft(r,0,a.ins,u),s&&ii(s,r,a.text),a.next();else{if(l.done||a.done)throw new Error("Mismatched change set lengths");{let h=Math.min(l.len2,a.len),d=r.length;if(l.ins==-1){let p=a.ins==-1?-1:a.off?0:a.ins;Ft(r,h,p,u),s&&p&&ii(s,r,a.text)}else a.ins==-1?(Ft(r,l.off?0:l.len,h,u),s&&ii(s,r,l.textBit(h))):(Ft(r,l.off?0:l.len,a.off?0:a.ins,u),s&&!a.off&&ii(s,r,a.text));u=(l.ins>h||a.ins>=0&&a.len>h)&&(u||r.length>d),l.forward2(h),a.forward(h)}}}}class Yo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Be.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Be.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ji{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,s;return this.empty?r=s=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),r==this.from&&s==this.to?this:new ji(r,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ie.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ie.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&this.goalColumn==e.goalColumn&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ie.range(e.anchor,e.head)}static create(e,t,r){return new ji(e,t,r)}}class ie{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ie.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ie([this.main],0)}addRange(e,t=!0){return ie.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,ie.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ie(e.ranges.map(t=>ji.fromJSON(t)),e.main)}static single(e,t=e){return new ie([ie.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,s=0;s<e.length;s++){let l=e[s];if(l.empty?l.from<=r:l.from<r)return ie.normalized(e.slice(),t);r=l.to}return new ie(e,t)}static cursor(e,t=0,r,s){return ji.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(s??16777215)<<6)}static range(e,t,r,s){let l=(r??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?ji.create(t,e,48|l):ji.create(e,t,(t>e?8:0)|l)}static normalized(e,t=0){let r=e[t];e.sort((s,l)=>s.from-l.from),t=e.indexOf(r);for(let s=1;s<e.length;s++){let l=e[s],a=e[s-1];if(l.empty?l.from<=a.to:l.from<a.to){let u=a.from,h=Math.max(l.to,a.to);s<=t&&t--,e.splice(--s,2,l.anchor>l.head?ie.range(h,u):ie.range(u,h))}}return new ie(e,t)}}function Ex(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let Sd=0;class we{constructor(e,t,r,s,l){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=s,this.id=Sd++,this.default=e([]),this.extensions=typeof l=="function"?l(this):l}get reader(){return this}static define(e={}){return new we(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:Cd),!!e.static,e.enables)}of(e){return new qa([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new qa(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new qa(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function Cd(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class qa{constructor(e,t,r,s){this.dependencies=e,this.facet=t,this.type=r,this.value=s,this.id=Sd++}dynamicSlot(e){var t;let r=this.value,s=this.facet.compareInput,l=this.id,a=e[l]>>1,u=this.type==2,h=!1,d=!1,p=[];for(let m of this.dependencies)m=="doc"?h=!0:m=="selection"?d=!0:(((t=e[m.id])!==null&&t!==void 0?t:1)&1)==0&&p.push(e[m.id]);return{create(m){return m.values[a]=r(m),1},update(m,v){if(h&&v.docChanged||d&&(v.docChanged||v.selection)||bf(m,p)){let k=r(m);if(u?!u0(k,m.values[a],s):!s(k,m.values[a]))return m.values[a]=k,1}return 0},reconfigure:(m,v)=>{let k,b=v.config.address[l];if(b!=null){let C=hu(v,b);if(this.dependencies.every(O=>O instanceof we?v.facet(O)===m.facet(O):O instanceof Vi?v.field(O,!1)==m.field(O,!1):!0)||(u?u0(k=r(m),C,s):s(k=r(m),C)))return m.values[a]=C,0}else k=r(m);return m.values[a]=k,1}}}}function u0(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function bf(n,e){let t=!1;for(let r of e)_o(n,r)&1&&(t=!0);return t}function K2(n,e,t){let r=t.map(h=>n[h.id]),s=t.map(h=>h.type),l=r.filter(h=>!(h&1)),a=n[e.id]>>1;function u(h){let d=[];for(let p=0;p<r.length;p++){let m=hu(h,r[p]);if(s[p]==2)for(let v of m)d.push(v);else d.push(m)}return e.combine(d)}return{create(h){for(let d of r)_o(h,d);return h.values[a]=u(h),1},update(h,d){if(!bf(h,l))return 0;let p=u(h);return e.compare(p,h.values[a])?0:(h.values[a]=p,1)},reconfigure(h,d){let p=bf(h,r),m=d.config.facets[e.id],v=d.facet(e);if(m&&!p&&Cd(t,m))return h.values[a]=v,0;let k=u(h);return e.compare(k,v)?(h.values[a]=v,0):(h.values[a]=k,1)}}}const Ta=we.define({static:!0});class Vi{constructor(e,t,r,s,l){this.id=e,this.createF=t,this.updateF=r,this.compareF=s,this.spec=l,this.provides=void 0}static define(e){let t=new Vi(Sd++,e.create,e.update,e.compare||((r,s)=>r===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Ta).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,s)=>{let l=r.values[t],a=this.updateF(l,s);return this.compareF(l,a)?0:(r.values[t]=a,1)},reconfigure:(r,s)=>{let l=r.facet(Ta),a=s.facet(Ta),u;return(u=l.find(h=>h.field==this))&&u!=a.find(h=>h.field==this)?(r.values[t]=u.create(r),1):s.config.address[this.id]!=null?(r.values[t]=s.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,Ta.of({field:this,create:e})]}get extension(){return this}}const Ri={lowest:4,low:3,default:2,high:1,highest:0};function Co(n){return e=>new Mx(e,n)}const ju={highest:Co(Ri.highest),high:Co(Ri.high),default:Co(Ri.default),low:Co(Ri.low),lowest:Co(Ri.lowest)};class Mx{constructor(e,t){this.inner=e,this.prec=t}}class fl{of(e){return new Sf(this,e)}reconfigure(e){return fl.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class Sf{constructor(e,t){this.compartment=e,this.inner=t}}class cu{constructor(e,t,r,s,l,a){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=s,this.staticValues=l,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let s=[],l=Object.create(null),a=new Map;for(let v of q2(e,t,a))v instanceof Vi?s.push(v):(l[v.facet.id]||(l[v.facet.id]=[])).push(v);let u=Object.create(null),h=[],d=[];for(let v of s)u[v.id]=d.length<<1,d.push(k=>v.slot(k));let p=r==null?void 0:r.config.facets;for(let v in l){let k=l[v],b=k[0].facet,C=p&&p[v]||[];if(k.every(O=>O.type==0))if(u[b.id]=h.length<<1|1,Cd(C,k))h.push(r.facet(b));else{let O=b.combine(k.map(T=>T.value));h.push(r&&b.compare(O,r.facet(b))?r.facet(b):O)}else{for(let O of k)O.type==0?(u[O.id]=h.length<<1|1,h.push(O.value)):(u[O.id]=d.length<<1,d.push(T=>O.dynamicSlot(T)));u[b.id]=d.length<<1,d.push(O=>K2(O,b,k))}}let m=d.map(v=>v(u));return new cu(e,a,m,u,h,l)}}function q2(n,e,t){let r=[[],[],[],[],[]],s=new Map;function l(a,u){let h=s.get(a);if(h!=null){if(h<=u)return;let d=r[h].indexOf(a);d>-1&&r[h].splice(d,1),a instanceof Sf&&t.delete(a.compartment)}if(s.set(a,u),Array.isArray(a))for(let d of a)l(d,u);else if(a instanceof Sf){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(a.compartment)||a.inner;t.set(a.compartment,d),l(d,u)}else if(a instanceof Mx)l(a.inner,a.prec);else if(a instanceof Vi)r[u].push(a),a.provides&&l(a.provides,u);else if(a instanceof qa)r[u].push(a),a.facet.extensions&&l(a.facet.extensions,Ri.default);else{let d=a.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(d,u)}}return l(n,Ri.default),r.reduce((a,u)=>a.concat(u))}function _o(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function hu(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Rx=we.define(),Cf=we.define({combine:n=>n.some(e=>e),static:!0}),Dx=we.define({combine:n=>n.length?n[0]:void 0,static:!0}),jx=we.define(),Lx=we.define(),Ix=we.define(),Bx=we.define({combine:n=>n.length?n[0]:!1});class Is{constructor(e,t){this.type=e,this.value=t}static define(){return new G2}}class G2{of(e){return new Is(this,e)}}class Y2{constructor(e){this.map=e}of(e){return new vt(this,e)}}class vt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new vt(this.type,t)}is(e){return this.type==e}static define(e={}){return new Y2(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let s of e){let l=s.map(t);l&&r.push(l)}return r}}vt.reconfigure=vt.define();vt.appendConfig=vt.define();class Ht{constructor(e,t,r,s,l,a){this.startState=e,this.changes=t,this.selection=r,this.effects=s,this.annotations=l,this.scrollIntoView=a,this._doc=null,this._state=null,r&&Ex(r,t.newLength),l.some(u=>u.type==Ht.time)||(this.annotations=l.concat(Ht.time.of(Date.now())))}static create(e,t,r,s,l,a){return new Ht(e,t,r,s,l,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Ht.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Ht.time=Is.define();Ht.userEvent=Is.define();Ht.addToHistory=Is.define();Ht.remote=Is.define();function J2(n,e){let t=[];for(let r=0,s=0;;){let l,a;if(r<n.length&&(s==e.length||e[s]>=n[r]))l=n[r++],a=n[r++];else if(s<e.length)l=e[s++],a=e[s++];else return t;!t.length||t[t.length-1]<l?t.push(l,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function zx(n,e,t){var r;let s,l,a;return t?(s=e.changes,l=Ot.empty(e.changes.length),a=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),l=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(s)),{changes:a,selection:e.selection?e.selection.map(l):(r=n.selection)===null||r===void 0?void 0:r.map(s),effects:vt.mapEffects(n.effects,s).concat(vt.mapEffects(e.effects,l)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function Of(n,e,t){let r=e.selection,s=ks(e.annotations);return e.userEvent&&(s=s.concat(Ht.userEvent.of(e.userEvent))),{changes:e.changes instanceof Ot?e.changes:Ot.of(e.changes||[],t,n.facet(Dx)),selection:r&&(r instanceof ie?r:ie.single(r.anchor,r.head)),effects:ks(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function Fx(n,e,t){let r=Of(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let l=1;l<e.length;l++){e[l].filter===!1&&(t=!1);let a=!!e[l].sequential;r=zx(r,Of(n,e[l],a?r.changes.newLength:n.doc.length),a)}let s=Ht.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return eC(t?Z2(s):s)}function Z2(n){let e=n.startState,t=!0;for(let s of e.facet(jx)){let l=s(n);if(l===!1){t=!1;break}Array.isArray(l)&&(t=t===!0?l:J2(t,l))}if(t!==!0){let s,l;if(t===!1)l=n.changes.invertedDesc,s=Ot.empty(e.doc.length);else{let a=n.changes.filter(t);s=a.changes,l=a.filtered.mapDesc(a.changes).invertedDesc}n=Ht.create(e,s,n.selection&&n.selection.map(l),vt.mapEffects(n.effects,l),n.annotations,n.scrollIntoView)}let r=e.facet(Lx);for(let s=r.length-1;s>=0;s--){let l=r[s](n);l instanceof Ht?n=l:Array.isArray(l)&&l.length==1&&l[0]instanceof Ht?n=l[0]:n=Fx(e,ks(l),!1)}return n}function eC(n){let e=n.startState,t=e.facet(Ix),r=n;for(let s=t.length-1;s>=0;s--){let l=t[s](n);l&&Object.keys(l).length&&(r=zx(r,Of(e,l,n.changes.newLength),!0))}return r==n?n:Ht.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const tC=[];function ks(n){return n==null?tC:Array.isArray(n)?n:[n]}var Tr=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(Tr||(Tr={}));const nC=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let Nf;try{Nf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function rC(n){if(Nf)return Nf.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||nC.test(t)))return!0}return!1}function iC(n){return e=>{if(!/\S/.test(e))return Tr.Space;if(rC(e))return Tr.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Tr.Word;return Tr.Other}}class Fe{constructor(e,t,r,s,l,a){this.config=e,this.doc=t,this.selection=r,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=l,a&&(a._state=this);for(let u=0;u<this.config.dynamicSlots.length;u++)_o(this,u<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return _o(this,r),hu(this,r)}update(...e){return Fx(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:s}=t;for(let u of e.effects)u.is(fl.reconfigure)?(t&&(s=new Map,t.compartments.forEach((h,d)=>s.set(d,h)),t=null),s.set(u.value.compartment,u.value.extension)):u.is(vt.reconfigure)?(t=null,r=u.value):u.is(vt.appendConfig)&&(t=null,r=ks(r).concat(u.value));let l;t?l=e.startState.values.slice():(t=cu.resolve(r,s,this),l=new Fe(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(h,d)=>d.reconfigure(h,this),null).values);let a=e.startState.facet(Cf)?e.newSelection:e.newSelection.asSingle();new Fe(t,e.newDoc,a,l,(u,h)=>h.update(u,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ie.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),s=this.changes(r.changes),l=[r.range],a=ks(r.effects);for(let u=1;u<t.ranges.length;u++){let h=e(t.ranges[u]),d=this.changes(h.changes),p=d.map(s);for(let v=0;v<u;v++)l[v]=l[v].map(p);let m=s.mapDesc(d,!0);l.push(h.range.map(m)),s=s.compose(p),a=vt.mapEffects(a,p).concat(vt.mapEffects(ks(h.effects),m))}return{changes:s,selection:ie.create(l,t.mainIndex),effects:a}}changes(e=[]){return e instanceof Ot?e:Ot.of(e,this.doc.length,this.facet(Fe.lineSeparator))}toText(e){return Be.of(e.split(this.facet(Fe.lineSeparator)||vf))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(_o(this,t),hu(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let s=e[r];s instanceof Vi&&this.config.address[s.id]!=null&&(t[r]=s.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(r){for(let l in r)if(Object.prototype.hasOwnProperty.call(e,l)){let a=r[l],u=e[l];s.push(a.init(h=>a.spec.fromJSON(u,h)))}}return Fe.create({doc:e.doc,selection:ie.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=cu.resolve(e.extensions||[],new Map),r=e.doc instanceof Be?e.doc:Be.of((e.doc||"").split(t.staticFacet(Fe.lineSeparator)||vf)),s=e.selection?e.selection instanceof ie?e.selection:ie.single(e.selection.anchor,e.selection.head):ie.single(0);return Ex(s,r.length),t.staticFacet(Cf)||(s=s.asSingle()),new Fe(t,r,s,t.dynamicSlots.map(()=>null),(l,a)=>a.create(l),null)}get tabSize(){return this.facet(Fe.tabSize)}get lineBreak(){return this.facet(Fe.lineSeparator)||`
`}get readOnly(){return this.facet(Bx)}phrase(e,...t){for(let r of this.facet(Fe.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,s)=>{if(s=="$")return"$";let l=+(s||1);return!l||l>t.length?r:t[l-1]})),e}languageDataAt(e,t,r=-1){let s=[];for(let l of this.facet(Rx))for(let a of l(this,t,r))Object.prototype.hasOwnProperty.call(a,e)&&s.push(a[e]);return s}charCategorizer(e){let t=this.languageDataAt("wordChars",e);return iC(t.length?t[0]:"")}wordAt(e){let{text:t,from:r,length:s}=this.doc.lineAt(e),l=this.charCategorizer(e),a=e-r,u=e-r;for(;a>0;){let h=_t(t,a,!1);if(l(t.slice(h,a))!=Tr.Word)break;a=h}for(;u<s;){let h=_t(t,u);if(l(t.slice(u,h))!=Tr.Word)break;u=h}return a==u?null:ie.range(a+r,u+r)}}Fe.allowMultipleSelections=Cf;Fe.tabSize=we.define({combine:n=>n.length?n[0]:4});Fe.lineSeparator=Dx;Fe.readOnly=Bx;Fe.phrases=we.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(s=>n[s]==e[s])}});Fe.languageData=Rx;Fe.changeFilter=jx;Fe.transactionFilter=Lx;Fe.transactionExtender=Ix;fl.reconfigure=vt.define();function _x(n,e,t={}){let r={};for(let s of n)for(let l of Object.keys(s)){let a=s[l],u=r[l];if(u===void 0)r[l]=a;else if(!(u===a||a===void 0))if(Object.hasOwnProperty.call(t,l))r[l]=t[l](u,a);else throw new Error("Config merge conflict for field "+l)}for(let s in e)r[s]===void 0&&(r[s]=e[s]);return r}class zi{eq(e){return this==e}range(e,t=e){return Pf.create(e,t,this)}}zi.prototype.startSide=zi.prototype.endSide=0;zi.prototype.point=!1;zi.prototype.mapMode=gn.TrackDel;function Od(n,e){return n==e||n.constructor==e.constructor&&n.eq(e)}let Pf=class Hx{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new Hx(e,t,r)}};function Tf(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class Nd{constructor(e,t,r,s){this.from=e,this.to=t,this.value=r,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,s=0){let l=r?this.to:this.from;for(let a=s,u=l.length;;){if(a==u)return a;let h=a+u>>1,d=l[h]-e||(r?this.value[h].endSide:this.value[h].startSide)-t;if(h==a)return d>=0?a:u;d>=0?u=h:a=h+1}}between(e,t,r,s){for(let l=this.findIndex(t,-1e9,!0),a=this.findIndex(r,1e9,!1,l);l<a;l++)if(s(this.from[l]+e,this.to[l]+e,this.value[l])===!1)return!1}map(e,t){let r=[],s=[],l=[],a=-1,u=-1;for(let h=0;h<this.value.length;h++){let d=this.value[h],p=this.from[h]+e,m=this.to[h]+e,v,k;if(p==m){let b=t.mapPos(p,d.startSide,d.mapMode);if(b==null||(v=k=b,d.startSide!=d.endSide&&(k=t.mapPos(p,d.endSide),k<v)))continue}else if(v=t.mapPos(p,d.startSide),k=t.mapPos(m,d.endSide),v>k||v==k&&d.startSide>0&&d.endSide<=0)continue;(k-v||d.endSide-d.startSide)<0||(a<0&&(a=v),d.point&&(u=Math.max(u,k-v)),r.push(d),s.push(v-a),l.push(k-a))}return{mapped:r.length?new Nd(s,l,r,u):null,pos:a}}}class De{constructor(e,t,r,s){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=s}static create(e,t,r,s){return new De(e,t,r,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:s=0,filterTo:l=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(r&&(t=t.slice().sort(Tf)),this.isEmpty)return t.length?De.of(t):this;let u=new Wx(this,null,-1).goto(0),h=0,d=[],p=new Jo;for(;u.value||h<t.length;)if(h<t.length&&(u.from-t[h].from||u.startSide-t[h].value.startSide)>=0){let m=t[h++];p.addInner(m.from,m.to,m.value)||d.push(m)}else u.rangeIndex==1&&u.chunkIndex<this.chunk.length&&(h==t.length||this.chunkEnd(u.chunkIndex)<t[h].from)&&(!a||s>this.chunkEnd(u.chunkIndex)||l<this.chunkPos[u.chunkIndex])&&p.addChunk(this.chunkPos[u.chunkIndex],this.chunk[u.chunkIndex])?u.nextChunk():((!a||s>u.to||l<u.from||a(u.from,u.to,u.value))&&(p.addInner(u.from,u.to,u.value)||d.push(Pf.create(u.from,u.to,u.value))),u.next());return p.finishInner(this.nextLayer.isEmpty&&!d.length?De.empty:this.nextLayer.update({add:d,filter:a,filterFrom:s,filterTo:l}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],s=-1;for(let a=0;a<this.chunk.length;a++){let u=this.chunkPos[a],h=this.chunk[a],d=e.touchesRange(u,u+h.length);if(d===!1)s=Math.max(s,h.maxPoint),t.push(h),r.push(e.mapPos(u));else if(d===!0){let{mapped:p,pos:m}=h.map(u,e);p&&(s=Math.max(s,p.maxPoint),t.push(p),r.push(m))}}let l=this.nextLayer.map(e);return t.length==0?l:new De(r,t,l||De.empty,s)}between(e,t,r){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],a=this.chunk[s];if(t>=l&&e<=l+a.length&&a.between(l,e-l,t-l,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Zo.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Zo.from(e).goto(t)}static compare(e,t,r,s,l=-1){let a=e.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=l),u=t.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=l),h=c0(a,u,r),d=new Oo(a,h,l),p=new Oo(u,h,l);r.iterGaps((m,v,k)=>h0(d,m,p,v,k,s)),r.empty&&r.length==0&&h0(d,0,p,0,0,s)}static eq(e,t,r=0,s){s==null&&(s=999999999);let l=e.filter(p=>!p.isEmpty&&t.indexOf(p)<0),a=t.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(l.length!=a.length)return!1;if(!l.length)return!0;let u=c0(l,a),h=new Oo(l,u,0).goto(r),d=new Oo(a,u,0).goto(r);for(;;){if(h.to!=d.to||!Af(h.active,d.active)||h.point&&(!d.point||!Od(h.point,d.point)))return!1;if(h.to>s)return!0;h.next(),d.next()}}static spans(e,t,r,s,l=-1){let a=new Oo(e,null,l).goto(t),u=t,h=a.openStart;for(;;){let d=Math.min(a.to,r);if(a.point){let p=a.activeForPoint(a.to),m=a.pointFrom<t?p.length+1:a.point.startSide<0?p.length:Math.min(p.length,h);s.point(u,d,a.point,p,m,a.pointRank),h=Math.min(a.openEnd(d),p.length)}else d>u&&(s.span(u,d,a.active,h),h=a.openEnd(d));if(a.to>r)return h+(a.point&&a.to>r?1:0);u=a.to,a.next()}}static of(e,t=!1){let r=new Jo;for(let s of e instanceof Pf?[e]:t?sC(e):e)r.add(s.from,s.to,s.value);return r.finish()}static join(e){if(!e.length)return De.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let s=e[r];s!=De.empty;s=s.nextLayer)t=new De(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}De.empty=new De([],[],null,-1);function sC(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(Tf(e,r)>0)return n.slice().sort(Tf);e=r}return n}De.empty.nextLayer=De.empty;class Jo{finishChunk(e){this.chunks.push(new Nd(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Jo)).add(e,t,r)}addInner(e,t,r){let s=e-this.lastTo||r.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(De.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=De.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function c0(n,e,t){let r=new Map;for(let l of n)for(let a=0;a<l.chunk.length;a++)l.chunk[a].maxPoint<=0&&r.set(l.chunk[a],l.chunkPos[a]);let s=new Set;for(let l of e)for(let a=0;a<l.chunk.length;a++){let u=r.get(l.chunk[a]);u!=null&&(t?t.mapPos(u):u)==l.chunkPos[a]&&!(t!=null&&t.touchesRange(u,u+l.chunk[a].length))&&s.add(l.chunk[a])}return s}class Wx{constructor(e,t,r,s=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Zo{constructor(e){this.heap=e}static from(e,t=null,r=-1){let s=[];for(let l=0;l<e.length;l++)for(let a=e[l];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&s.push(new Wx(a,t,r,l));return s.length==1?s[0]:new Zo(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)_h(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)_h(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),_h(this.heap,0)}}}function _h(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let s=n[r];if(r+1<n.length&&s.compare(n[r+1])>=0&&(s=n[r+1],r++),t.compare(s)<0)break;n[r]=t,n[e]=s,e=r}}class Oo{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Zo.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Aa(this.active,e),Aa(this.activeTo,e),Aa(this.activeRank,e),this.minActive=f0(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:s,rank:l}=this.cursor;for(;t<this.activeRank.length&&(l-this.activeRank[t]||s-this.activeTo[t])>0;)t++;Ea(this.active,t,r),Ea(this.activeTo,t,s),Ea(this.activeRank,t,l),e&&Ea(e,t,this.cursor.from),this.minActive=f0(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),r&&Aa(r,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let s=r.length-1;s>=0&&r[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function h0(n,e,t,r,s,l){n.goto(e),t.goto(r);let a=r+s,u=r,h=r-e,d=!!l.boundChange;for(let p=!1;;){let m=n.to+h-t.to,v=m||n.endSide-t.endSide,k=v<0?n.to+h:t.to,b=Math.min(k,a);if(n.point||t.point?(n.point&&t.point&&Od(n.point,t.point)&&Af(n.activeForPoint(n.to),t.activeForPoint(t.to))||l.comparePoint(u,b,n.point,t.point),p=!1):(p&&l.boundChange(u),b>u&&!Af(n.active,t.active)&&l.compareRange(u,b,n.active,t.active),d&&b<a&&(m||n.openEnd(k)!=t.openEnd(k))&&(p=!0)),k>a)break;u=k,v<=0&&n.next(),v>=0&&t.next()}}function Af(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!Od(n[t],e[t]))return!1;return!0}function Aa(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function Ea(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function f0(n,e){let t=-1,r=1e9;for(let s=0;s<e.length;s++)(e[s]-r||n[s].endSide-n[t].endSide)<0&&(t=s,r=e[s]);return t}function Lu(n,e,t=n.length){let r=0;for(let s=0;s<t&&s<n.length;)n.charCodeAt(s)==9?(r+=e-r%e,s++):(r++,s=_t(n,s));return r}function oC(n,e,t,r){for(let s=0,l=0;;){if(l>=e)return s;if(s==n.length)break;l+=n.charCodeAt(s)==9?t-l%t:1,s=_t(n,s)}return n.length}const Ef="",d0=typeof Symbol>"u"?"__"+Ef:Symbol.for(Ef),Mf=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),p0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ai{constructor(e,t){this.rules=[];let{finish:r}=t||{};function s(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function l(a,u,h,d){let p=[],m=/^@(\w+)\b/.exec(a[0]),v=m&&m[1]=="keyframes";if(m&&u==null)return h.push(a[0]+";");for(let k in u){let b=u[k];if(/&/.test(k))l(k.split(/,\s*/).map(C=>a.map(O=>C.replace(/&/,O))).reduce((C,O)=>C.concat(O)),b,h);else if(b&&typeof b=="object"){if(!m)throw new RangeError("The value of a property ("+k+") should be a primitive value.");l(s(k),b,p,v)}else b!=null&&p.push(k.replace(/_.*/,"").replace(/[A-Z]/g,C=>"-"+C.toLowerCase())+": "+b+";")}(p.length||v)&&h.push((r&&!m&&!d?a.map(r):a).join(", ")+" {"+p.join(" ")+"}")}for(let a in e)l(s(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=p0[d0]||1;return p0[d0]=e+1,Ef+e.toString(36)}static mount(e,t,r){let s=e[Mf],l=r&&r.nonce;s?l&&s.setNonce(l):s=new lC(e,l),s.mount(Array.isArray(t)?t:[t],e)}}let g0=new Map;class lC{constructor(e,t){let r=e.ownerDocument||e,s=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let l=g0.get(r);if(l)return e[Mf]=l;this.sheet=new s.CSSStyleSheet,g0.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Mf]=this}mount(e,t){let r=this.sheet,s=0,l=0;for(let a=0;a<e.length;a++){let u=e[a],h=this.modules.indexOf(u);if(h<l&&h>-1&&(this.modules.splice(h,1),l--,h=-1),h==-1){if(this.modules.splice(l++,0,u),r)for(let d=0;d<u.rules.length;d++)r.insertRule(u.rules[d],s++)}else{for(;l<h;)s+=this.modules[l++].rules.length;s+=u.rules.length,l++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let h=0;h<this.modules.length;h++)a+=this.modules[h].getRules()+`
`;this.styleTag.textContent=a;let u=t.head||t;this.styleTag.parentNode!=u&&u.insertBefore(this.styleTag,u.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ui={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},el={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},aC=typeof navigator<"u"&&/Mac/.test(navigator.platform),uC=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var At=0;At<10;At++)ui[48+At]=ui[96+At]=String(At);for(var At=1;At<=24;At++)ui[At+111]="F"+At;for(var At=65;At<=90;At++)ui[At]=String.fromCharCode(At+32),el[At]=String.fromCharCode(At);for(var Hh in ui)el.hasOwnProperty(Hh)||(el[Hh]=ui[Hh]);function cC(n){var e=aC&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||uC&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?el:ui)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}let Ut=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Rf=typeof document<"u"?document:{documentElement:{style:{}}};const Df=/Edge\/(\d+)/.exec(Ut.userAgent),Vx=/MSIE \d/.test(Ut.userAgent),jf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ut.userAgent),Iu=!!(Vx||jf||Df),m0=!Iu&&/gecko\/(\d+)/i.test(Ut.userAgent),Wh=!Iu&&/Chrome\/(\d+)/.exec(Ut.userAgent),hC="webkitFontSmoothing"in Rf.documentElement.style,Lf=!Iu&&/Apple Computer/.test(Ut.vendor),y0=Lf&&(/Mobile\/\w+/.test(Ut.userAgent)||Ut.maxTouchPoints>2);var de={mac:y0||/Mac/.test(Ut.platform),windows:/Win/.test(Ut.platform),linux:/Linux|X11/.test(Ut.platform),ie:Iu,ie_version:Vx?Rf.documentMode||6:jf?+jf[1]:Df?+Df[1]:0,gecko:m0,gecko_version:m0?+(/Firefox\/(\d+)/.exec(Ut.userAgent)||[0,0])[1]:0,chrome:!!Wh,chrome_version:Wh?+Wh[1]:0,ios:y0,android:/Android\b/.test(Ut.userAgent),webkit_version:hC?+(/\bAppleWebKit\/(\d+)/.exec(Ut.userAgent)||[0,0])[1]:0,safari:Lf,safari_version:Lf?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Ut.userAgent)||[0,0])[1]:0,tabSize:Rf.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Pd(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const fu=Object.create(null);function Td(n,e,t){if(n==e)return!0;n||(n=fu),e||(e=fu);let r=Object.keys(n),s=Object.keys(e);if(r.length-0!=s.length-0)return!1;for(let l of r)if(l!=t&&(s.indexOf(l)==-1||n[l]!==e[l]))return!1;return!0}function fC(n,e){for(let t=n.attributes.length-1;t>=0;t--){let r=n.attributes[t].name;e[r]==null&&n.removeAttribute(r)}for(let t in e){let r=e[t];t=="style"?n.style.cssText=r:n.getAttribute(t)!=r&&n.setAttribute(t,r)}}function x0(n,e,t){let r=!1;if(e)for(let s in e)t&&s in t||(r=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(r=!0,s=="style"?n.style.cssText=t[s]:n.setAttribute(s,t[s]));return r}function dC(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class Bs{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Et=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Et||(Et={}));class it extends zi{constructor(e,t,r,s){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=s}get heightRelevant(){return!1}static mark(e){return new dl(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Fi(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,s;if(e.isBlockGap)r=-5e8,s=4e8;else{let{start:l,end:a}=Qx(e,t);r=(l?t?-3e8:-1:5e8)-1,s=(a?t?2e8:1:-6e8)+1}return new Fi(e,r,s,t,e.widget||null,!0)}static line(e){return new pl(e)}static set(e,t=!1){return De.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}it.none=De.empty;class dl extends it{constructor(e){let{start:t,end:r}=Qx(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.attrs=e.class&&e.attributes?Pd(e.attributes,{class:e.class}):e.class?{class:e.class}:e.attributes||fu}eq(e){return this==e||e instanceof dl&&this.tagName==e.tagName&&Td(this.attrs,e.attrs)}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}dl.prototype.point=!1;class pl extends it{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof pl&&this.spec.class==e.spec.class&&Td(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}pl.prototype.mapMode=gn.TrackBefore;pl.prototype.point=!0;class Fi extends it{constructor(e,t,r,s,l,a){super(t,r,l,e),this.block=s,this.isReplace=a,this.mapMode=s?t<=0?gn.TrackBefore:gn.TrackAfter:gn.TrackDel}get type(){return this.startSide!=this.endSide?Et.WidgetRange:this.startSide<=0?Et.WidgetBefore:Et.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Fi&&pC(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}Fi.prototype.point=!0;function Qx(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function pC(n,e){return n==e||!!(n&&e&&n.compare(e))}function ws(n,e,t,r=0){let s=t.length-1;s>=0&&t[s]+r>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class tl extends zi{constructor(e,t){super(),this.tagName=e,this.attributes=t}eq(e){return e==this||e instanceof tl&&this.tagName==e.tagName&&Td(this.attributes,e.attributes)}static create(e){return new tl(e.tagName,e.attributes||fu)}static set(e,t=!1){return De.of(e,t)}}tl.prototype.startSide=tl.prototype.endSide=-1;function nl(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function If(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Ho(n,e){if(!e.anchorNode)return!1;try{return If(n,e.anchorNode)}catch{return!1}}function Ga(n){return n.nodeType==3?rl(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Wo(n,e,t,r){return t?v0(n,e,t,r,-1)||v0(n,e,t,r,1):!1}function ci(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function du(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function v0(n,e,t,r,s){for(;;){if(n==t&&e==r)return!0;if(e==(s<0?0:Mr(n))){if(n.nodeName=="DIV")return!1;let l=n.parentNode;if(!l||l.nodeType!=1)return!1;e=ci(n)+(s<0?0:1),n=l}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?Mr(n):0}else return!1}}function Mr(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function pu(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function gC(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function $x(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function mC(n,e,t,r,s,l,a,u){let h=n.ownerDocument,d=h.defaultView||window;for(let p=n,m=!1;p&&!m;)if(p.nodeType==1){let v,k=p==h.body,b=1,C=1;if(k)v=gC(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(m=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let E=p.getBoundingClientRect();({scaleX:b,scaleY:C}=$x(p,E)),v={left:E.left,right:E.left+p.clientWidth*b,top:E.top,bottom:E.top+p.clientHeight*C}}let O=0,T=0;if(s=="nearest")e.top<v.top?(T=e.top-(v.top+a),t>0&&e.bottom>v.bottom+T&&(T=e.bottom-v.bottom+a)):e.bottom>v.bottom&&(T=e.bottom-v.bottom+a,t<0&&e.top-T<v.top&&(T=e.top-(v.top+a)));else{let E=e.bottom-e.top,j=v.bottom-v.top;T=(s=="center"&&E<=j?e.top+E/2-j/2:s=="start"||s=="center"&&t<0?e.top-a:e.bottom-j+a)-v.top}if(r=="nearest"?e.left<v.left?(O=e.left-(v.left+l),t>0&&e.right>v.right+O&&(O=e.right-v.right+l)):e.right>v.right&&(O=e.right-v.right+l,t<0&&e.left<v.left+O&&(O=e.left-(v.left+l))):O=(r=="center"?e.left+(e.right-e.left)/2-(v.right-v.left)/2:r=="start"==u?e.left-l:e.right-(v.right-v.left)+l)-v.left,O||T)if(k)d.scrollBy(O,T);else{let E=0,j=0;if(T){let F=p.scrollTop;p.scrollTop+=T/C,j=(p.scrollTop-F)*C}if(O){let F=p.scrollLeft;p.scrollLeft+=O/b,E=(p.scrollLeft-F)*b}e={left:e.left-E,top:e.top-j,right:e.right-E,bottom:e.bottom-j},E&&Math.abs(E-O)<1&&(r="nearest"),j&&Math.abs(j-T)<1&&(s="nearest")}if(k)break;(e.top<v.top||e.bottom>v.bottom||e.left<v.left||e.right>v.right)&&(e={left:Math.max(e.left,v.left),right:Math.min(e.right,v.right),top:Math.max(e.top,v.top),bottom:Math.min(e.bottom,v.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function yC(n){let e=n.ownerDocument,t,r;for(let s=n.parentNode;s&&!(s==e.body||t&&r);)if(s.nodeType==1)!r&&s.scrollHeight>s.clientHeight&&(r=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:r}}class xC{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?Mr(t):0),r,Math.min(e.focusOffset,r?Mr(r):0))}set(e,t,r,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=s}}let Mi=null;de.safari&&de.safari_version>=26&&(Mi=!1);function Ux(n){if(n.setActive)return n.setActive();if(Mi)return n.focus(Mi);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Mi==null?{get preventScroll(){return Mi={preventScroll:!0},!0}}:void 0),!Mi){Mi=!1;for(let t=0;t<e.length;){let r=e[t++],s=e[t++],l=e[t++];r.scrollTop!=s&&(r.scrollTop=s),r.scrollLeft!=l&&(r.scrollLeft=l)}}}let k0;function rl(n,e,t=e){let r=k0||(k0=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function bs(n,e,t,r){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=r);let l=new KeyboardEvent("keydown",s);l.synthetic=!0,n.dispatchEvent(l);let a=new KeyboardEvent("keyup",s);return a.synthetic=!0,n.dispatchEvent(a),l.defaultPrevented||a.defaultPrevented}function vC(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function kC(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,Mr(t));;)if(r){if(t.nodeType!=1)return!1;let s=t.childNodes[r-1];s.contentEditable=="false"?r--:(t=s,r=Mr(t))}else{if(t==n)return!0;r=ci(t),t=t.parentNode}}function Xx(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Kx(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=Mr(t)}else if(t.parentNode&&!du(t))r=ci(t),t=t.parentNode;else return null}}function qx(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!du(t))r=ci(t)+1,t=t.parentNode;else return null}}class _n{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new _n(e.parentNode,ci(e),t)}static after(e,t){return new _n(e.parentNode,ci(e)+1,t)}}var Ye=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(Ye||(Ye={}));const _i=Ye.LTR,Ad=Ye.RTL;function Gx(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const wC=Gx("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),bC=Gx("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Bf=Object.create(null),er=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Bf[e]=t,Bf[t]=-e}function Yx(n){return n<=247?wC[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?bC[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const SC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class or{get dir(){return this.level%2?Ad:_i}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,s){let l=-1;for(let a=0;a<e.length;a++){let u=e[a];if(u.from<=t&&u.to>=t){if(u.level==r)return a;(l<0||(s!=0?s<0?u.from<t:u.to>t:e[l].level>u.level))&&(l=a)}}if(l<0)throw new RangeError("Index out of range");return l}}function Jx(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],s=e[t];if(r.from!=s.from||r.to!=s.to||r.direction!=s.direction||!Jx(r.inner,s.inner))return!1}return!0}const Ve=[];function CC(n,e,t,r,s){for(let l=0;l<=r.length;l++){let a=l?r[l-1].to:e,u=l<r.length?r[l].from:t,h=l?256:s;for(let d=a,p=h,m=h;d<u;d++){let v=Yx(n.charCodeAt(d));v==512?v=p:v==8&&m==4&&(v=16),Ve[d]=v==4?2:v,v&7&&(m=v),p=v}for(let d=a,p=h,m=h;d<u;d++){let v=Ve[d];if(v==128)d<u-1&&p==Ve[d+1]&&p&24?v=Ve[d]=p:Ve[d]=256;else if(v==64){let k=d+1;for(;k<u&&Ve[k]==64;)k++;let b=d&&p==8||k<t&&Ve[k]==8?m==1?1:8:256;for(let C=d;C<k;C++)Ve[C]=b;d=k-1}else v==8&&m==1&&(Ve[d]=1);p=v,v&7&&(m=v)}}}function OC(n,e,t,r,s){let l=s==1?2:1;for(let a=0,u=0,h=0;a<=r.length;a++){let d=a?r[a-1].to:e,p=a<r.length?r[a].from:t;for(let m=d,v,k,b;m<p;m++)if(k=Bf[v=n.charCodeAt(m)])if(k<0){for(let C=u-3;C>=0;C-=3)if(er[C+1]==-k){let O=er[C+2],T=O&2?s:O&4?O&1?l:s:0;T&&(Ve[m]=Ve[er[C]]=T),u=C;break}}else{if(er.length==189)break;er[u++]=m,er[u++]=v,er[u++]=h}else if((b=Ve[m])==2||b==1){let C=b==s;h=C?0:1;for(let O=u-3;O>=0;O-=3){let T=er[O+2];if(T&2)break;if(C)er[O+2]|=2;else{if(T&4)break;er[O+2]|=4}}}}}function NC(n,e,t,r){for(let s=0,l=r;s<=t.length;s++){let a=s?t[s-1].to:n,u=s<t.length?t[s].from:e;for(let h=a;h<u;){let d=Ve[h];if(d==256){let p=h+1;for(;;)if(p==u){if(s==t.length)break;p=t[s++].to,u=s<t.length?t[s].from:e}else if(Ve[p]==256)p++;else break;let m=l==1,v=(p<e?Ve[p]:r)==1,k=m==v?m?1:2:r;for(let b=p,C=s,O=C?t[C-1].to:n;b>h;)b==O&&(b=t[--C].from,O=C?t[C-1].to:n),Ve[--b]=k;h=p}else l=d,h++}}}function zf(n,e,t,r,s,l,a){let u=r%2?2:1;if(r%2==s%2)for(let h=e,d=0;h<t;){let p=!0,m=!1;if(d==l.length||h<l[d].from){let C=Ve[h];C!=u&&(p=!1,m=C==16)}let v=!p&&u==1?[]:null,k=p?r:r+1,b=h;e:for(;;)if(d<l.length&&b==l[d].from){if(m)break e;let C=l[d];if(!p)for(let O=C.to,T=d+1;;){if(O==t)break e;if(T<l.length&&l[T].from==O)O=l[T++].to;else{if(Ve[O]==u)break e;break}}if(d++,v)v.push(C);else{C.from>h&&a.push(new or(h,C.from,k));let O=C.direction==_i!=!(k%2);Ff(n,O?r+1:r,s,C.inner,C.from,C.to,a),h=C.to}b=C.to}else{if(b==t||(p?Ve[b]!=u:Ve[b]==u))break;b++}v?zf(n,h,b,r+1,s,v,a):h<b&&a.push(new or(h,b,k)),h=b}else for(let h=t,d=l.length;h>e;){let p=!0,m=!1;if(!d||h>l[d-1].to){let C=Ve[h-1];C!=u&&(p=!1,m=C==16)}let v=!p&&u==1?[]:null,k=p?r:r+1,b=h;e:for(;;)if(d&&b==l[d-1].to){if(m)break e;let C=l[--d];if(!p)for(let O=C.from,T=d;;){if(O==e)break e;if(T&&l[T-1].to==O)O=l[--T].from;else{if(Ve[O-1]==u)break e;break}}if(v)v.push(C);else{C.to<h&&a.push(new or(C.to,h,k));let O=C.direction==_i!=!(k%2);Ff(n,O?r+1:r,s,C.inner,C.from,C.to,a),h=C.from}b=C.from}else{if(b==e||(p?Ve[b-1]!=u:Ve[b-1]==u))break;b--}v?zf(n,b,h,r+1,s,v,a):b<h&&a.push(new or(b,h,k)),h=b}}function Ff(n,e,t,r,s,l,a){let u=e%2?2:1;CC(n,s,l,r,u),OC(n,s,l,r,u),NC(s,l,r,u),zf(n,s,l,e,t,r,a)}function PC(n,e,t){if(!n)return[new or(0,0,e==Ad?1:0)];if(e==_i&&!t.length&&!SC.test(n))return Zx(n.length);if(t.length)for(;n.length>Ve.length;)Ve[Ve.length]=256;let r=[],s=e==_i?0:1;return Ff(n,s,s,t,0,n.length,r),r}function Zx(n){return[new or(0,n,0)]}let ev="";function TC(n,e,t,r,s){var l;let a=r.head-n.from,u=or.find(e,a,(l=r.bidiLevel)!==null&&l!==void 0?l:-1,r.assoc),h=e[u],d=h.side(s,t);if(a==d){let v=u+=s?1:-1;if(v<0||v>=e.length)return null;h=e[u=v],a=h.side(!s,t),d=h.side(s,t)}let p=_t(n.text,a,h.forward(s,t));(p<h.from||p>h.to)&&(p=d),ev=n.text.slice(Math.min(a,p),Math.max(a,p));let m=u==(s?e.length-1:0)?null:e[u+(s?1:-1)];return m&&p==d&&m.level+(s?0:1)<h.level?ie.cursor(m.side(!s,t)+n.from,m.forward(s,t)?1:-1,m.level):ie.cursor(p+n.from,h.forward(s,t)?-1:1,h.level)}function AC(n,e,t){for(let r=e;r<t;r++){let s=Yx(n.charCodeAt(r));if(s==1)return _i;if(s==2||s==4)return Ad}return _i}const tv=we.define(),nv=we.define(),rv=we.define(),iv=we.define(),_f=we.define(),sv=we.define(),ov=we.define(),Ed=we.define(),Md=we.define(),lv=we.define({combine:n=>n.some(e=>e)}),av=we.define({combine:n=>n.some(e=>e)}),uv=we.define();class Ss{constructor(e,t="nearest",r="nearest",s=5,l=5,a=!1){this.range=e,this.y=t,this.x=r,this.yMargin=s,this.xMargin=l,this.isSnapshot=a}map(e){return e.empty?this:new Ss(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Ss(ie.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ma=vt.define({map:(n,e)=>n.map(e)}),cv=vt.define();function lr(n,e,t){let r=n.facet(iv);r.length?r[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const Pr=we.define({combine:n=>n.length?n[0]:!0});let EC=0;const ps=we.define({combine(n){return n.filter((e,t)=>{for(let r=0;r<t;r++)if(n[r].plugin==e.plugin)return!1;return!0})}});class Vn{constructor(e,t,r,s,l){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=s,this.baseExtensions=l(this),this.extension=this.baseExtensions.concat(ps.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(ps.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:r,eventObservers:s,provide:l,decorations:a}=t||{};return new Vn(EC++,e,r,s,u=>{let h=[];return a&&h.push(Bu.of(d=>{let p=d.plugin(u);return p?a(p):it.none})),l&&h.push(l(u)),h})}static fromClass(e,t){return Vn.define((r,s)=>new e(r,s),t)}}class Vh{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(lr(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){lr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){lr(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const hv=we.define(),Rd=we.define(),Bu=we.define(),fv=we.define(),Dd=we.define(),gl=we.define(),dv=we.define();function w0(n,e){let t=n.state.facet(dv);if(!t.length)return t;let r=t.map(l=>l instanceof Function?l(n):l),s=[];return De.spans(r,e.from,e.to,{point(){},span(l,a,u,h){let d=l-e.from,p=a-e.from,m=s;for(let v=u.length-1;v>=0;v--,h--){let k=u[v].spec.bidiIsolate,b;if(k==null&&(k=AC(e.text,d,p)),h>0&&m.length&&(b=m[m.length-1]).to==d&&b.direction==k)b.to=p,m=b.inner;else{let C={from:d,to:p,direction:k,inner:[]};m.push(C),m=C.inner}}}}),s}const pv=we.define();function gv(n){let e=0,t=0,r=0,s=0;for(let l of n.state.facet(pv)){let a=l(n);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(r=Math.max(r,a.top)),a.bottom!=null&&(s=Math.max(s,a.bottom)))}return{left:e,right:t,top:r,bottom:s}}const Mo=we.define();class Cn{constructor(e,t,r,s){this.fromA=e,this.toA=t,this.fromB=r,this.toB=s}join(e){return new Cn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>r.toA)){if(s.toA<r.fromA)break;r=r.join(s),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let s=0,l=0,a=0;;){let u=s<e.length?e[s].fromB:1e9,h=l<t.length?t[l]:1e9,d=Math.min(u,h);if(d==1e9)break;let p=d+a,m=d,v=p;for(;;)if(l<t.length&&t[l]<=m){let k=t[l+1];l+=2,m=Math.max(m,k);for(let b=s;b<e.length&&e[b].fromB<=m;b++)a=e[b].toA-e[b].toB;v=Math.max(v,k+a)}else if(s<e.length&&e[s].fromB<=m){let k=e[s++];m=Math.max(m,k.toB),v=Math.max(v,k.toA),a=k.toA-k.toB}else break;r.push(new Cn(p,v,d,m))}return r}}class gu{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=Ot.empty(this.startState.doc.length);for(let l of r)this.changes=this.changes.compose(l.changes);let s=[];this.changes.iterChangedRanges((l,a,u,h)=>s.push(new Cn(l,a,u,h))),this.changedRanges=s}static create(e,t,r){return new gu(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}const MC=[];class gt{constructor(e,t,r=0){this.dom=e,this.length=t,this.flags=r,this.parent=null,e.cmTile=this}get breakAfter(){return this.flags&1}get children(){return MC}isWidget(){return!1}get isHidden(){return!1}isComposite(){return!1}isLine(){return!1}isText(){return!1}isBlock(){return!1}get domAttrs(){return null}sync(e){if(this.flags|=2,this.flags&4){this.flags&=-5;let t=this.domAttrs;t&&fC(this.dom,t)}}toString(){return this.constructor.name+(this.children.length?`(${this.children})`:"")+(this.breakAfter?"#":"")}destroy(){this.parent=null}setDOM(e){this.dom=e,e.cmTile=this}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e,t=this.posAtStart){let r=t;for(let s of this.children){if(s==e)return r;r+=s.length+s.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}covers(e){return!0}coordsIn(e,t){return null}domPosFor(e,t){let r=ci(this.dom),s=this.length?e>0:t>0;return new _n(this.parent.dom,r+(s?1:0),e==0||e==this.length)}markDirty(e){this.flags&=-3,e&&(this.flags|=4),this.parent&&this.parent.flags&2&&this.parent.markDirty(!1)}get overrideDOMText(){return null}get root(){for(let e=this;e;e=e.parent)if(e instanceof Fu)return e;return null}static get(e){return e.cmTile}}class zu extends gt{constructor(e){super(e,0),this._children=[]}isComposite(){return!0}get children(){return this._children}get lastChild(){return this.children.length?this.children[this.children.length-1]:null}append(e){this.children.push(e),e.parent=this}sync(e){if(this.flags&2)return;super.sync(e);let t=this.dom,r=null,s,l=(e==null?void 0:e.node)==t?e:null,a=0;for(let u of this.children){if(u.sync(e),a+=u.length+u.breakAfter,s=r?r.nextSibling:t.firstChild,l&&s!=u.dom&&(l.written=!0),u.dom.parentNode==t)for(;s&&s!=u.dom;)s=b0(s);else t.insertBefore(u.dom,s);r=u.dom}for(s=r?r.nextSibling:t.firstChild,l&&s&&(l.written=!0);s;)s=b0(s);this.length=a}}function b0(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Fu extends zu{constructor(e,t){super(t),this.view=e}owns(e){for(;e;e=e.parent)if(e==this)return!0;return!1}isBlock(){return!0}nearest(e){for(;;){if(!e)return null;let t=gt.get(e);if(t&&this.owns(t))return t;e=e.parentNode}}blockTiles(e){for(let t=[],r=this,s=0,l=0;;)if(s==r.children.length){if(!t.length)return;r=r.parent,r.breakAfter&&l++,s=t.pop()}else{let a=r.children[s++];if(a instanceof li)t.push(s),r=a,s=0;else{let u=l+a.length,h=e(a,l);if(h!==void 0)return h;l=u+a.breakAfter}}}resolveBlock(e,t){let r,s=-1,l,a=-1;if(this.blockTiles((u,h)=>{let d=h+u.length;if(e>=h&&e<=d){if(u.isWidget()&&t>=-1&&t<=1){if(u.flags&32)return!0;u.flags&16&&(r=void 0)}(h<e||e==d&&(t<-1?u.length:u.covers(1)))&&(!r||!u.isWidget()&&r.isWidget())&&(r=u,s=e-h),(d>e||e==h&&(t>1?u.length:u.covers(-1)))&&(!l||!u.isWidget()&&l.isWidget())&&(l=u,a=e-h)}}),!r&&!l)throw new Error("No tile at position "+e);return r&&t<0||!l?{tile:r,offset:s}:{tile:l,offset:a}}}class li extends zu{constructor(e,t){super(e),this.wrapper=t}isBlock(){return!0}covers(e){return this.children.length?e<0?this.children[0].covers(-1):this.lastChild.covers(1):!1}get domAttrs(){return this.wrapper.attributes}static of(e,t){let r=new li(t||document.createElement(e.tagName),e);return t||(r.flags|=4),r}}class Ns extends zu{constructor(e,t){super(e),this.attrs=t}isLine(){return!0}static start(e,t,r){let s=new Ns(t||document.createElement("div"),e);return(!t||!r)&&(s.flags|=4),s}get domAttrs(){return this.attrs}resolveInline(e,t,r){let s=null,l=-1,a=null,u=-1;function h(p,m){for(let v=0,k=0;v<p.children.length&&k<=m;v++){let b=p.children[v],C=k+b.length;C>=m&&(b.isComposite()?h(b,m-k):(!a||a.isHidden&&(t>0||r&&DC(a,b)))&&(C>m||b.flags&32)?(a=b,u=m-k):(k<m||b.flags&16&&!b.isHidden)&&(s=b,l=m-k)),k=C}}h(this,e);let d=(t<0?s:a)||s||a;return d?{tile:d,offset:d==s?l:u}:null}coordsIn(e,t){let r=this.resolveInline(e,t,!0);return r?r.tile.coordsIn(Math.max(0,r.offset),t):RC(this)}domIn(e,t){let r=this.resolveInline(e,t);if(r){let{tile:s,offset:l}=r;if(this.dom.contains(s.dom))return s.isText()?new _n(s.dom,Math.min(s.dom.nodeValue.length,l)):s.domPosFor(l,s.flags&16?1:s.flags&32?-1:t);let a=r.tile.parent,u=!1;for(let h of a.children){if(u)return new _n(h.dom,0);h==r.tile&&(u=!0)}}return new _n(this.dom,0)}}function RC(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Ga(e);return t[t.length-1]||null}function DC(n,e){let t=n.coordsIn(0,1),r=e.coordsIn(0,1);return t&&r&&r.top<t.bottom}class nn extends zu{constructor(e,t){super(e),this.mark=t}get domAttrs(){return this.mark.attrs}static of(e,t){let r=new nn(t||document.createElement(e.tagName),e);return t||(r.flags|=4),r}}class Li extends gt{constructor(e,t){super(e,t.length),this.text=t}sync(e){this.flags&2||(super.sync(e),this.dom.nodeValue!=this.text&&(e&&e.node==this.dom&&(e.written=!0),this.dom.nodeValue=this.text))}isText(){return!0}toString(){return JSON.stringify(this.text)}coordsIn(e,t){let r=this.dom.nodeValue.length;e>r&&(e=r);let s=e,l=e,a=0;e==0&&t<0||e==r&&t>=0?de.chrome||de.gecko||(e?(s--,a=1):l<r&&(l++,a=-1)):t<0?s--:l<r&&l++;let u=rl(this.dom,s,l).getClientRects();if(!u.length)return null;let h=u[(a?a<0:t>=0)?0:u.length-1];return de.safari&&!a&&h.width==0&&(h=Array.prototype.find.call(u,d=>d.width)||h),a?pu(h,a<0):h||null}static of(e,t){let r=new Li(t||document.createTextNode(e),e);return t||(r.flags|=2),r}}class Hi extends gt{constructor(e,t,r,s){super(e,t,s),this.widget=r}isWidget(){return!0}get isHidden(){return this.widget.isHidden}covers(e){return this.flags&48?!1:(this.flags&(e<0?64:128))>0}coordsIn(e,t){return this.coordsInWidget(e,t,!1)}coordsInWidget(e,t,r){let s=this.widget.coordsAt(this.dom,e,t);if(s)return s;if(r)return pu(this.dom.getBoundingClientRect(),this.length?e==0:t<=0);{let l=this.dom.getClientRects(),a=null;if(!l.length)return null;let u=this.flags&16?!0:this.flags&32?!1:e>0;for(let h=u?l.length-1:0;a=l[h],!(e>0?h==0:h==l.length-1||a.top<a.bottom);h+=u?-1:1);return pu(a,!u)}}get overrideDOMText(){if(!this.length)return Be.empty;let{root:e}=this;if(!e)return Be.empty;let t=this.posAtStart;return e.view.state.doc.slice(t,t+this.length)}destroy(){super.destroy(),this.widget.destroy(this.dom)}static of(e,t,r,s,l){return l||(l=e.toDOM(t),e.editable||(l.contentEditable="false")),new Hi(l,r,e,s)}}class mu extends gt{constructor(e){let t=document.createElement("img");t.className="cm-widgetBuffer",t.setAttribute("aria-hidden","true"),super(t,0,e)}get isHidden(){return!0}get overrideDOMText(){return Be.empty}coordsIn(e){return this.dom.getBoundingClientRect()}}class jC{constructor(e){this.index=0,this.beforeBreak=!1,this.parents=[],this.tile=e}advance(e,t,r){let{tile:s,index:l,beforeBreak:a,parents:u}=this;for(;e||t>0;)if(s.isComposite())if(a){if(!e)break;r&&r.break(),e--,a=!1}else if(l==s.children.length){if(!e&&!u.length)break;r&&r.leave(s),a=!!s.breakAfter,{tile:s,index:l}=u.pop(),l++}else{let h=s.children[l],d=h.breakAfter;(t>0?h.length<=e:h.length<e)&&(!r||r.skip(h,0,h.length)!==!1||!h.isComposite)?(a=!!d,l++,e-=h.length):(u.push({tile:s,index:l}),s=h,l=0,r&&h.isComposite()&&r.enter(h))}else if(l==s.length)a=!!s.breakAfter,{tile:s,index:l}=u.pop(),l++;else if(e){let h=Math.min(e,s.length-l);r&&r.skip(s,l,l+h),e-=h,l+=h}else break;return this.tile=s,this.index=l,this.beforeBreak=a,this}get root(){return this.parents.length?this.parents[0].tile:this.tile}}class LC{constructor(e,t,r,s){this.from=e,this.to=t,this.wrapper=r,this.rank=s}}class IC{constructor(e,t,r){this.cache=e,this.root=t,this.blockWrappers=r,this.curLine=null,this.lastBlock=null,this.afterWidget=null,this.pos=0,this.wrappers=[],this.wrapperPos=0}addText(e,t,r,s){var l;this.flushBuffer();let a=this.ensureMarks(t,r),u=a.lastChild;if(u&&u.isText()&&!(u.flags&8)&&u.length+e.length<512){this.cache.reused.set(u,2);let h=a.children[a.children.length-1]=new Li(u.dom,u.text+e);h.parent=a}else a.append(s||Li.of(e,(l=this.cache.find(Li))===null||l===void 0?void 0:l.dom));this.pos+=e.length,this.afterWidget=null}addComposition(e,t){let r=this.curLine;r.dom!=t.line.dom&&(r.setDOM(this.cache.reused.has(t.line)?Qh(t.line.dom):t.line.dom),this.cache.reused.set(t.line,2));let s=r;for(let u=t.marks.length-1;u>=0;u--){let h=t.marks[u],d=s.lastChild;if(d instanceof nn&&d.mark.eq(h.mark))d.dom!=h.dom&&d.setDOM(Qh(h.dom)),s=d;else{if(this.cache.reused.get(h)){let m=gt.get(h.dom);m&&m.setDOM(Qh(h.dom))}let p=nn.of(h.mark,h.dom);s.append(p),s=p}this.cache.reused.set(h,2)}let l=gt.get(e.text);l&&this.cache.reused.set(l,2);let a=new Li(e.text,e.text.nodeValue);a.flags|=8,s.append(a)}addInlineWidget(e,t,r){let s=this.afterWidget&&e.flags&48&&(this.afterWidget.flags&48)==(e.flags&48);s||this.flushBuffer();let l=this.ensureMarks(t,r);!s&&!(e.flags&16)&&l.append(this.getBuffer(1)),l.append(e),this.pos+=e.length,this.afterWidget=e}addMark(e,t,r){this.flushBuffer(),this.ensureMarks(t,r).append(e),this.pos+=e.length,this.afterWidget=null}addBlockWidget(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}continueWidget(e){let t=this.afterWidget||this.lastBlock;t.length+=e,this.pos+=e}addLineStart(e,t){var r;e||(e=mv);let s=Ns.start(e,t||((r=this.cache.find(Ns))===null||r===void 0?void 0:r.dom),!!t);this.getBlockPos().append(this.lastBlock=this.curLine=s)}addLine(e){this.getBlockPos().append(e),this.pos+=e.length,this.lastBlock=e,this.endLine()}addBreak(){this.lastBlock.flags|=1,this.endLine(),this.pos++}addLineStartIfNotCovered(e){this.blockPosCovered()||this.addLineStart(e)}ensureLine(e){this.curLine||this.addLineStart(e)}ensureMarks(e,t){var r;let s=this.curLine;for(let l=e.length-1;l>=0;l--){let a=e[l],u;if(t>0&&(u=s.lastChild)&&u instanceof nn&&u.mark.eq(a))s=u,t--;else{let h=nn.of(a,(r=this.cache.find(nn,d=>d.mark.eq(a)))===null||r===void 0?void 0:r.dom);s.append(h),s=h,t=0}}return s}endLine(){if(this.curLine){this.flushBuffer();let e=this.curLine.lastChild;(!e||!S0(this.curLine,!1)||e.dom.nodeName!="BR"&&e.isWidget()&&!(de.ios&&S0(this.curLine,!0)))&&this.curLine.append(this.cache.findWidget($h,0,32)||new Hi($h.toDOM(),0,$h,32)),this.curLine=this.afterWidget=null}}updateBlockWrappers(){this.wrapperPos>this.pos+1e4&&(this.blockWrappers.goto(this.pos),this.wrappers.length=0);for(let e=this.wrappers.length-1;e>=0;e--)this.wrappers[e].to<this.pos&&this.wrappers.splice(e,1);for(let e=this.blockWrappers;e.value&&e.from<=this.pos;e.next())if(e.to>=this.pos){let t=new LC(e.from,e.to,e.value,e.rank),r=this.wrappers.length;for(;r>0&&(this.wrappers[r-1].rank-t.rank||this.wrappers[r-1].to-t.to)<0;)r--;this.wrappers.splice(r,0,t)}this.wrapperPos=this.pos}getBlockPos(){var e;this.updateBlockWrappers();let t=this.root;for(let r of this.wrappers){let s=t.lastChild;if(r.from<this.pos&&s instanceof li&&s.wrapper.eq(r.wrapper))t=s;else{let l=li.of(r.wrapper,(e=this.cache.find(li,a=>a.wrapper.eq(r.wrapper)))===null||e===void 0?void 0:e.dom);t.append(l),t=l}}return t}blockPosCovered(){let e=this.lastBlock;return e!=null&&!e.breakAfter&&(!e.isWidget()||(e.flags&160)>0)}getBuffer(e){let t=2|(e<0?16:32),r=this.cache.find(mu,void 0,1);return r&&(r.flags=t),r||new mu(t)}flushBuffer(){this.afterWidget&&!(this.afterWidget.flags&32)&&(this.afterWidget.parent.append(this.getBuffer(-1)),this.afterWidget=null)}}class BC{constructor(e){this.skipCount=0,this.text="",this.textOff=0,this.cursor=e.iter()}skip(e){this.textOff+e<=this.text.length?this.textOff+=e:(this.skipCount+=e-(this.text.length-this.textOff),this.text="",this.textOff=0)}next(e){if(this.textOff==this.text.length){let{value:s,lineBreak:l,done:a}=this.cursor.next(this.skipCount);if(this.skipCount=0,a)throw new Error("Ran out of text content when drawing inline views");this.text=s;let u=this.textOff=Math.min(e,s.length);return l?null:s.slice(0,u)}let t=Math.min(this.text.length,this.textOff+e),r=this.text.slice(this.textOff,t);return this.textOff=t,r}}const yu=[Hi,Ns,Li,nn,mu,li,Fu];for(let n=0;n<yu.length;n++)yu[n].bucket=n;class zC{constructor(e){this.view=e,this.buckets=yu.map(()=>[]),this.index=yu.map(()=>0),this.reused=new Map}add(e){let t=e.constructor.bucket,r=this.buckets[t];r.length<6?r.push(e):r[this.index[t]=(this.index[t]+1)%6]=e}find(e,t,r=2){let s=e.bucket,l=this.buckets[s],a=this.index[s];for(let u=l.length-1;u>=0;u--){let h=(u+a)%l.length,d=l[h];if((!t||t(d))&&!this.reused.has(d))return l.splice(h,1),h<a&&this.index[s]--,this.reused.set(d,r),d}return null}findWidget(e,t,r){let s=this.buckets[0];if(s.length)for(let l=0,a=0;;l++){if(l==s.length){if(a)return null;a=1,l=0}let u=s[l];if(!this.reused.has(u)&&(a==0?u.widget.compare(e):u.widget.constructor==e.constructor&&e.updateDOM(u.dom,this.view)))return s.splice(l,1),l<this.index[0]&&this.index[0]--,u.widget==e&&u.length==t&&(u.flags&497)==r?(this.reused.set(u,1),u):(this.reused.set(u,2),new Hi(u.dom,t,e,u.flags&-498|r))}}reuse(e){return this.reused.set(e,1),e}maybeReuse(e,t=2){if(!this.reused.has(e))return this.reused.set(e,t),e.dom}clear(){for(let e=0;e<this.buckets.length;e++)this.buckets[e].length=this.index[e]=0}}class FC{constructor(e,t,r,s,l){this.view=e,this.decorations=s,this.disallowBlockEffectsFor=l,this.openWidget=!1,this.openMarks=0,this.cache=new zC(e),this.text=new BC(e.state.doc),this.builder=new IC(this.cache,new Fu(e,e.contentDOM),De.iter(r)),this.cache.reused.set(t,2),this.old=new jC(t),this.reuseWalker={skip:(a,u,h)=>{if(this.cache.add(a),a.isComposite())return!1},enter:a=>this.cache.add(a),leave:()=>{},break:()=>{}}}run(e,t){let r=t&&this.getCompositionContext(t.text);for(let s=0,l=0,a=0;;){let u=a<e.length?e[a++]:null,h=u?u.fromA:this.old.root.length;if(h>s){let d=h-s;this.preserve(d,!a,!u),s=h,l+=d}if(!u)break;t&&u.fromA<=t.range.fromA&&u.toA>=t.range.toA?(this.forward(u.fromA,t.range.fromA,t.range.fromA<t.range.toA?1:-1),this.emit(l,t.range.fromB),this.cache.clear(),this.builder.addComposition(t,r),this.text.skip(t.range.toB-t.range.fromB),this.forward(t.range.fromA,u.toA),this.emit(t.range.toB,u.toB)):(this.forward(u.fromA,u.toA),this.emit(l,u.toB)),l=u.toB,s=u.toA}return this.builder.curLine&&this.builder.endLine(),this.builder.root}preserve(e,t,r){let s=WC(this.old),l=this.openMarks;this.old.advance(e,r?1:-1,{skip:(a,u,h)=>{if(a.isWidget())if(this.openWidget)this.builder.continueWidget(h-u);else{let d=h>0||u<a.length?Hi.of(a.widget,this.view,h-u,a.flags&496,this.cache.maybeReuse(a)):this.cache.reuse(a);d.flags&256?(d.flags&=-2,this.builder.addBlockWidget(d)):(this.builder.ensureLine(null),this.builder.addInlineWidget(d,s,l),l=s.length)}else if(a.isText())this.builder.ensureLine(null),!u&&h==a.length?this.builder.addText(a.text,s,l,this.cache.reuse(a)):(this.cache.add(a),this.builder.addText(a.text.slice(u,h),s,l)),l=s.length;else if(a.isLine())a.flags&=-2,this.cache.reused.set(a,1),this.builder.addLine(a);else if(a instanceof mu)this.cache.add(a);else if(a instanceof nn)this.builder.ensureLine(null),this.builder.addMark(a,s,l),this.cache.reused.set(a,1),l=s.length;else return!1;this.openWidget=!1},enter:a=>{a.isLine()?this.builder.addLineStart(a.attrs,this.cache.maybeReuse(a)):(this.cache.add(a),a instanceof nn&&s.unshift(a.mark)),this.openWidget=!1},leave:a=>{a.isLine()?s.length&&(s.length=l=0):a instanceof nn&&(s.shift(),l=Math.min(l,s.length))},break:()=>{this.builder.addBreak(),this.openWidget=!1}}),this.text.skip(e)}emit(e,t){let r=null,s=this.builder,l=0,a=De.spans(this.decorations,e,t,{point:(u,h,d,p,m,v)=>{if(d instanceof Fi){if(this.disallowBlockEffectsFor[v]){if(d.block)throw new RangeError("Block decorations may not be specified via plugins");if(h>this.view.state.doc.lineAt(u).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}if(l=p.length,m>p.length)s.continueWidget(h-u);else{let k=d.widget||(d.block?Ps.block:Ps.inline),b=_C(d),C=this.cache.findWidget(k,h-u,b)||Hi.of(k,this.view,h-u,b);d.block?(d.startSide>0&&s.addLineStartIfNotCovered(r),s.addBlockWidget(C)):(s.ensureLine(r),s.addInlineWidget(C,p,m))}r=null}else r=HC(r,d);h>u&&this.text.skip(h-u)},span:(u,h,d,p)=>{for(let m=u;m<h;){let v=this.text.next(Math.min(512,h-m));v==null?(s.addLineStartIfNotCovered(r),s.addBreak(),m++):(s.ensureLine(r),s.addText(v,d,m==u?p:d.length),m+=v.length),r=null}}});s.addLineStartIfNotCovered(r),this.openWidget=a>l,this.openMarks=a}forward(e,t,r=1){t-e<=10?this.old.advance(t-e,r,this.reuseWalker):(this.old.advance(5,-1,this.reuseWalker),this.old.advance(t-e-10,-1),this.old.advance(5,r,this.reuseWalker))}getCompositionContext(e){let t=[],r=null;for(let s=e.parentNode;;s=s.parentNode){let l=gt.get(s);if(s==this.view.contentDOM)break;l instanceof nn?t.push(l):l!=null&&l.isLine()?r=l:s.nodeName=="DIV"&&!r&&s!=this.view.contentDOM?r=new Ns(s,mv):t.push(nn.of(new dl({tagName:s.nodeName.toLowerCase(),attributes:dC(s)}),s))}return{line:r,marks:t}}}function S0(n,e){let t=r=>{for(let s of r.children)if((e?s.isText():s.length)||t(s))return!0;return!1};return t(n)}function _C(n){let e=n.isReplace?(n.startSide<0?64:0)|(n.endSide>0?128:0):n.startSide>0?32:16;return n.block&&(e|=256),e}const mv={class:"cm-line"};function HC(n,e){let t=e.spec.attributes,r=e.spec.class;return!t&&!r||(n||(n={class:"cm-line"}),t&&Pd(t,n),r&&(n.class+=" "+r)),n}function WC(n){let e=[];for(let t=n.parents.length;t>1;t--){let r=t==n.parents.length?n.tile:n.parents[t].tile;r instanceof nn&&e.push(r.mark)}return e}function Qh(n){let e=gt.get(n);return e&&e.setDOM(n.cloneNode()),n}class Ps extends Bs{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Ps.inline=new Ps("span");Ps.block=new Ps("div");const $h=new class extends Bs{toDOM(){return document.createElement("br")}get isHidden(){return!0}get editable(){return!0}};class C0{constructor(e){this.view=e,this.decorations=[],this.blockWrappers=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.editContextFormatting=it.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.updateDeco(),this.tile=new Fu(e,e.contentDOM),this.updateInner([new Cn(0,0,0,e.state.doc.length)],null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:p,toA:m})=>m<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!YC(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let l=s>-1?QC(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){let{from:p,to:m}=this.hasComposition;r=new Cn(p,m,e.changes.mapPos(p,-1),e.changes.mapPos(m,1)).addToSet(r.slice())}this.hasComposition=l?{from:l.range.fromB,to:l.range.toB}:null,(de.ie||de.chrome)&&!l&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,u=this.blockWrappers;this.updateDeco();let h=XC(a,this.decorations,e.changes);h.length&&(r=Cn.extendWithRanges(r,h));let d=qC(u,this.blockWrappers,e.changes);return d.length&&(r=Cn.extendWithRanges(r,d)),l&&!r.some(p=>p.fromA<=l.range.fromA&&p.toA>=l.range.toA)&&(r=l.range.addToSet(r.slice())),this.tile.flags&2&&r.length==0?!1:(this.updateInner(r,l),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t){this.view.viewState.mustMeasureContent=!0;let{observer:r}=this.view;r.ignore(()=>{if(t||e.length){let a=this.tile,u=new FC(this.view,a,this.blockWrappers,this.decorations,this.dynamicDecorationMap);this.tile=u.run(e,t),Hf(a,u.cache.reused)}this.tile.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.tile.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let l=de.chrome||de.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.tile.sync(l),l&&(l.written||r.selectionRange.focusNode!=l.node||!this.tile.dom.contains(l.node))&&(this.forceSelection=!0),this.tile.dom.style.height=""});let s=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let l of this.tile.children)l.isWidget()&&l.widget instanceof Uh&&s.push(l.dom);r.updateGaps(s)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(cv)&&(this.editContextFormatting=r.value)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let{dom:r}=this.tile,s=this.view.root.activeElement,l=s==r,a=!l&&!(this.view.state.facet(Pr)||r.tabIndex>-1)&&Ho(r,this.view.observer.selectionRange)&&!(s&&r.contains(s));if(!(l||t||a))return;let u=this.forceSelection;this.forceSelection=!1;let h=this.view.state.selection.main,d,p;if(h.empty?p=d=this.inlineDOMNearPos(h.anchor,h.assoc||1):(p=this.inlineDOMNearPos(h.head,h.head==h.from?1:-1),d=this.inlineDOMNearPos(h.anchor,h.anchor==h.from?1:-1)),de.gecko&&h.empty&&!this.hasComposition&&VC(d)){let v=document.createTextNode("");this.view.observer.ignore(()=>d.node.insertBefore(v,d.node.childNodes[d.offset]||null)),d=p=new _n(v,0),u=!0}let m=this.view.observer.selectionRange;(u||!m.focusNode||(!Wo(d.node,d.offset,m.anchorNode,m.anchorOffset)||!Wo(p.node,p.offset,m.focusNode,m.focusOffset))&&!this.suppressWidgetCursorChange(m,h))&&(this.view.observer.ignore(()=>{de.android&&de.chrome&&r.contains(m.focusNode)&&GC(m.focusNode,r)&&(r.blur(),r.focus({preventScroll:!0}));let v=nl(this.view.root);if(v)if(h.empty){if(de.gecko){let k=$C(d.node,d.offset);if(k&&k!=3){let b=(k==1?Kx:qx)(d.node,d.offset);b&&(d=new _n(b.node,b.offset))}}v.collapse(d.node,d.offset),h.bidiLevel!=null&&v.caretBidiLevel!==void 0&&(v.caretBidiLevel=h.bidiLevel)}else if(v.extend){v.collapse(d.node,d.offset);try{v.extend(p.node,p.offset)}catch{}}else{let k=document.createRange();h.anchor>h.head&&([d,p]=[p,d]),k.setEnd(p.node,p.offset),k.setStart(d.node,d.offset),v.removeAllRanges(),v.addRange(k)}a&&this.view.root.activeElement==r&&(r.blur(),s&&s.focus())}),this.view.observer.setSelectionRange(d,p)),this.impreciseAnchor=d.precise?null:new _n(m.anchorNode,m.anchorOffset),this.impreciseHead=p.precise?null:new _n(m.focusNode,m.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Wo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=nl(e.root),{anchorNode:s,anchorOffset:l}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let a=this.lineAt(t.head,t.assoc);if(!a)return;let u=a.posAtStart;if(t.head==u||t.head==u+a.length)return;let h=this.coordsAt(t.head,-1),d=this.coordsAt(t.head,1);if(!h||!d||h.bottom>d.top)return;let p=this.domAtPos(t.head+t.assoc,t.assoc);r.collapse(p.node,p.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let m=e.observer.selectionRange;e.docView.posFromDOM(m.anchorNode,m.anchorOffset)!=t.from&&r.collapse(s,l)}posFromDOM(e,t){let r=this.tile.nearest(e);if(!r)return this.tile.dom.compareDocumentPosition(e)&2?0:this.view.state.doc.length;let s=r.posAtStart;if(r.isComposite()){let l;if(e==r.dom)l=r.dom.childNodes[t];else{let a=Mr(e)==0?0:t==0?-1:1;for(;;){let u=e.parentNode;if(u==r.dom)break;a==0&&u.firstChild!=u.lastChild&&(e==u.firstChild?a=-1:a=1),e=u}a<0?l=e:l=e.nextSibling}if(l==r.dom.firstChild)return s;for(;l&&!gt.get(l);)l=l.nextSibling;if(!l)return s+r.length;for(let a=0,u=s;;a++){let h=r.children[a];if(h.dom==l)return u;u+=h.length+h.breakAfter}}else return r.isText()?e==r.dom?s+t:s+(t?r.length:0):s}domAtPos(e,t){let{tile:r,offset:s}=this.tile.resolveBlock(e,t);return r.isWidget()?r.domPosFor(e,t):r.domIn(s,t)}inlineDOMNearPos(e,t){let r,s=-1,l=!1,a,u=-1,h=!1;return this.tile.blockTiles((d,p)=>{if(d.isWidget()){if(d.flags&32&&p>=e)return!0;d.flags&16&&(l=!0)}else{let m=p+d.length;if(p<=e&&(r=d,s=e-p,l=m<e),m>=e&&!a&&(a=d,u=e-p,h=p>e),p>e&&a)return!0}}),!r&&!a?this.domAtPos(e,t):(l&&a?r=null:h&&r&&(a=null),r&&t<0||!a?r.domIn(s,t):a.domIn(u,t))}coordsAt(e,t){let{tile:r,offset:s}=this.tile.resolveBlock(e,t);return r.isWidget()?r.widget instanceof Uh?null:r.coordsInWidget(s,t,!0):r.coordsIn(s,t)}lineAt(e,t){let{tile:r}=this.tile.resolveBlock(e,t);return r.isLine()?r:null}coordsForChar(e){let{tile:t,offset:r}=this.tile.resolveBlock(e,1);if(!t.isLine())return null;function s(l,a){if(l.isComposite())for(let u of l.children){if(u.length>=a){let h=s(u,a);if(h)return h}if(a-=u.length,a<0)break}else if(l.isText()&&a<l.length){let u=_t(l.text,a);if(u==a)return null;let h=rl(l.dom,a,u).getClientRects();for(let d=0;d<h.length;d++){let p=h[d];if(d==h.length-1||p.top<p.bottom&&p.left<p.right)return p}}return null}return s(t,r)}measureVisibleLineHeights(e){let t=[],{from:r,to:s}=e,l=this.view.contentDOM.clientWidth,a=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,u=-1,h=this.view.textDirection==Ye.LTR,d=0,p=(m,v,k)=>{for(let b=0;b<m.children.length&&!(v>s);b++){let C=m.children[b],O=v+C.length,T=C.dom.getBoundingClientRect(),{height:E}=T;if(k&&!b&&(d+=T.top-k.top),C instanceof li)O>r&&p(C,v,T);else if(v>=r&&(d>0&&t.push(-d),t.push(E+d),d=0,a)){let j=C.dom.lastChild,F=j?Ga(j):[];if(F.length){let M=F[F.length-1],L=h?M.right-T.left:T.right-M.left;L>u&&(u=L,this.minWidth=l,this.minWidthFrom=v,this.minWidthTo=O)}}k&&b==m.children.length-1&&(d+=k.bottom-T.bottom),v=O+C.breakAfter}};return p(this.tile,0,null),t}textDirectionAt(e){let{tile:t}=this.tile.resolveBlock(e,1);return getComputedStyle(t.dom).direction=="rtl"?Ye.RTL:Ye.LTR}measureTextSize(){let e=this.tile.blockTiles(a=>{if(a.isLine()&&a.children.length&&a.length<=20){let u=0,h;for(let d of a.children){if(!d.isText()||/[^ -~]/.test(d.text))return;let p=Ga(d.dom);if(p.length!=1)return;u+=p[0].width,h=p[0].height}if(u)return{lineHeight:a.dom.getBoundingClientRect().height,charWidth:u/a.length,textHeight:h}}});if(e)return e;let t=document.createElement("div"),r,s,l;return t.className="cm-line",t.style.width="99999px",t.style.position="absolute",t.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.tile.dom.appendChild(t);let a=Ga(t.firstChild)[0];r=t.getBoundingClientRect().height,s=a&&a.width?a.width/27:7,l=a&&a.height?a.height:r,t.remove()}),{lineHeight:r,charWidth:s,textHeight:l}}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,s=0;;s++){let l=s==t.viewports.length?null:t.viewports[s],a=l?l.from-1:this.view.state.doc.length;if(a>r){let u=(t.lineBlockAt(a).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(it.replace({widget:new Uh(u),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!l)break;r=l.to+1}return it.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Bu).map(l=>(this.dynamicDecorationMap[e++]=typeof l=="function")?l(this.view):l),r=!1,s=this.view.state.facet(Dd).map((l,a)=>{let u=typeof l=="function";return u&&(r=!0),u?l(this.view):l});for(s.length&&(this.dynamicDecorationMap[e++]=r,t.push(De.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;this.blockWrappers=this.view.state.facet(fv).map(l=>typeof l=="function"?l(this.view):l)}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(uv))try{if(d(this.view,e.range,e))return!0}catch(p){lr(this.view.state,p,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!r)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,s.left),top:Math.min(r.top,s.top),right:Math.max(r.right,s.right),bottom:Math.max(r.bottom,s.bottom)});let l=gv(this.view),a={left:r.left-l.left,top:r.top-l.top,right:r.right+l.right,bottom:r.bottom+l.bottom},{offsetWidth:u,offsetHeight:h}=this.view.scrollDOM;mC(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,u),-u),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==Ye.LTR)}lineHasWidget(e){let t=r=>r.isWidget()||r.children.some(t);return t(this.tile.resolveBlock(e,1).tile)}destroy(){Hf(this.tile)}}function Hf(n,e){let t=e==null?void 0:e.get(n);if(t!=1){t==null&&n.destroy();for(let r of n.children)Hf(r,e)}}function VC(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function yv(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=Kx(t.focusNode,t.focusOffset),s=qx(t.focusNode,t.focusOffset),l=r||s;if(s&&r&&s.node!=r.node){let u=gt.get(s.node);if(!u||u.isText()&&u.text!=s.node.nodeValue)l=s;else if(n.docView.lastCompositionAfterCursor){let h=gt.get(r.node);!h||h.isText()&&h.text!=r.node.nodeValue||(l=s)}}if(n.docView.lastCompositionAfterCursor=l!=r,!l)return null;let a=e-l.offset;return{from:a,to:a+l.node.nodeValue.length,node:l.node}}function QC(n,e,t){let r=yv(n,t);if(!r)return null;let{node:s,from:l,to:a}=r,u=s.nodeValue;if(/[\n\r]/.test(u)||n.state.doc.sliceString(r.from,r.to)!=u)return null;let h=e.invertedDesc;return{range:new Cn(h.mapPos(l),h.mapPos(a),l,a),text:s}}function $C(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let UC=class{constructor(){this.changes=[]}compareRange(e,t){ws(e,t,this.changes)}comparePoint(e,t){ws(e,t,this.changes)}boundChange(e){ws(e,e,this.changes)}};function XC(n,e,t){let r=new UC;return De.compare(n,e,t,r),r.changes}class KC{constructor(){this.changes=[]}compareRange(e,t){ws(e,t,this.changes)}comparePoint(){}boundChange(e){ws(e,e,this.changes)}}function qC(n,e,t){let r=new KC;return De.compare(n,e,t,r),r.changes}function GC(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function YC(n,e){let t=!1;return e&&n.iterChangedRanges((r,s)=>{r<e.to&&s>e.from&&(t=!0)}),t}class Uh extends Bs{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}function JC(n,e,t=1){let r=n.charCategorizer(e),s=n.doc.lineAt(e),l=e-s.from;if(s.length==0)return ie.cursor(e);l==0?t=1:l==s.length&&(t=-1);let a=l,u=l;t<0?a=_t(s.text,l,!1):u=_t(s.text,l);let h=r(s.text.slice(a,u));for(;a>0;){let d=_t(s.text,a,!1);if(r(s.text.slice(d,a))!=h)break;a=d}for(;u<s.length;){let d=_t(s.text,u);if(r(s.text.slice(u,d))!=h)break;u=d}return ie.range(a+s.from,u+s.from)}function ZC(n,e,t,r,s){let l=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let u=n.viewState.heightOracle.textHeight,h=Math.floor((s-t.top-(n.defaultLineHeight-u)*.5)/u);l+=h*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(t.from,t.to);return t.from+oC(a,l,n.state.tabSize)}function Wf(n,e,t){let r=n.lineBlockAt(e);if(Array.isArray(r.type)){let s;for(let l of r.type){if(l.from>e)break;if(!(l.to<e)){if(l.from<e&&l.to>e)return l;(!s||l.type==Et.Text&&(s.type!=l.type||(t<0?l.from<e:l.to>e)))&&(s=l)}}return s||r}return r}function eO(n,e,t,r){let s=Wf(n,e.head,e.assoc||-1),l=!r||s.type!=Et.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(l){let a=n.dom.getBoundingClientRect(),u=n.textDirectionAt(s.from),h=n.posAtCoords({x:t==(u==Ye.LTR)?a.right-1:a.left+1,y:(l.top+l.bottom)/2});if(h!=null)return ie.cursor(h,t?-1:1)}return ie.cursor(t?s.to:s.from,t?-1:1)}function O0(n,e,t,r){let s=n.state.doc.lineAt(e.head),l=n.bidiSpans(s),a=n.textDirectionAt(s.from);for(let u=e,h=null;;){let d=TC(s,l,a,u,t),p=ev;if(!d){if(s.number==(t?n.state.doc.lines:1))return u;p=`
`,s=n.state.doc.line(s.number+(t?1:-1)),l=n.bidiSpans(s),d=n.visualLineSide(s,!t)}if(h){if(!h(p))return u}else{if(!r)return d;h=r(p)}u=d}}function tO(n,e,t){let r=n.state.charCategorizer(e),s=r(t);return l=>{let a=r(l);return s==Tr.Space&&(s=a),s==a}}function nO(n,e,t,r){let s=e.head,l=t?1:-1;if(s==(t?n.state.doc.length:0))return ie.cursor(s,e.assoc);let a=e.goalColumn,u,h=n.contentDOM.getBoundingClientRect(),d=n.coordsAtPos(s,(e.empty?e.assoc:0)||(t?1:-1)),p=n.documentTop;if(d)a==null&&(a=d.left-h.left),u=l<0?d.top:d.bottom;else{let b=n.viewState.lineBlockAt(s);a==null&&(a=Math.min(h.right-h.left,n.defaultCharacterWidth*(s-b.from))),u=(l<0?b.top:b.bottom)+p}let m=h.left+a,v=r??n.viewState.heightOracle.textHeight>>1,k=Vf(n,{x:m,y:u+v*l},!1,l);return ie.cursor(k.pos,k.assoc,void 0,a)}function Vo(n,e,t){for(;;){let r=0;for(let s of n)s.between(e-1,e+1,(l,a,u)=>{if(e>l&&e<a){let h=r||t||(e-l<a-e?-1:1);e=h<0?l:a,r=h}});if(!r)return e}}function xv(n,e){let t=null;for(let r=0;r<e.ranges.length;r++){let s=e.ranges[r],l=null;if(s.empty){let a=Vo(n,s.from,0);a!=s.from&&(l=ie.cursor(a,-1))}else{let a=Vo(n,s.from,-1),u=Vo(n,s.to,1);(a!=s.from||u!=s.to)&&(l=ie.range(s.from==s.anchor?a:u,s.from==s.head?a:u))}l&&(t||(t=e.ranges.slice()),t[r]=l)}return t?ie.create(t,e.mainIndex):e}function Xh(n,e,t){let r=Vo(n.state.facet(gl).map(s=>s(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:ie.cursor(r,r<t.from?1:-1)}class sr{constructor(e,t){this.pos=e,this.assoc=t}}function Vf(n,e,t,r){let s=n.contentDOM.getBoundingClientRect(),l=s.top+n.viewState.paddingTop,{x:a,y:u}=e,h=u-l,d;for(;;){if(h<0)return new sr(0,1);if(h>n.viewState.docHeight)return new sr(n.state.doc.length,-1);if(d=n.elementAtHeight(h),r==null)break;if(d.type==Et.Text){if(r<0?d.to<n.viewport.from:d.from>n.viewport.to)break;let v=n.docView.coordsAt(r<0?d.from:d.to,r>0?-1:1);if(v&&(r<0?v.top<=h+l:v.bottom>=h+l))break}let m=n.viewState.heightOracle.textHeight/2;h=r>0?d.bottom+m:d.top-m}if(n.viewport.from>=d.to||n.viewport.to<=d.from){if(t)return null;if(d.type==Et.Text){let m=ZC(n,s,d,a,u);return new sr(m,m==d.from?1:-1)}}if(d.type!=Et.Text)return h<(d.top+d.bottom)/2?new sr(d.from,1):new sr(d.to,-1);let p=n.docView.lineAt(d.from,2);return(!p||p.length!=d.length)&&(p=n.docView.lineAt(d.from,-2)),new rO(n,a,u,n.textDirectionAt(d.from)).scanTile(p,d.from)}class rO{constructor(e,t,r,s){this.view=e,this.x=t,this.y=r,this.baseDir=s,this.line=null,this.spans=null}bidiSpansAt(e){return(!this.line||this.line.from>e||this.line.to<e)&&(this.line=this.view.state.doc.lineAt(e),this.spans=this.view.bidiSpans(this.line)),this}baseDirAt(e,t){let{line:r,spans:s}=this.bidiSpansAt(e);return s[or.find(s,e-r.from,-1,t)].level==this.baseDir}dirAt(e,t){let{line:r,spans:s}=this.bidiSpansAt(e);return s[or.find(s,e-r.from,-1,t)].dir}bidiIn(e,t){let{spans:r,line:s}=this.bidiSpansAt(e);return r.length>1||r.length&&(r[0].level!=this.baseDir||r[0].to+s.from<t)}scan(e,t){let r=0,s=e.length-1,l=new Set,a=this.bidiIn(e[0],e[s]),u,h,d=-1,p=1e9,m;e:for(;r<s;){let k=s-r,b=r+s>>1;t:if(l.has(b)){let O=r+Math.floor(Math.random()*k);for(let T=0;T<k;T++){if(!l.has(O)){b=O;break t}O++,O==s&&(O=r)}break e}l.add(b);let C=t(b);if(C)for(let O=0;O<C.length;O++){let T=C[O],E=0;if(T.bottom<this.y)(!u||u.bottom<T.bottom)&&(u=T),E=1;else if(T.top>this.y)(!h||h.top>T.top)&&(h=T),E=-1;else{let j=T.left>this.x?this.x-T.left:T.right<this.x?this.x-T.right:0,F=Math.abs(j);F<p&&(d=b,p=F,m=T),j&&(E=j<0==(this.baseDir==Ye.LTR)?-1:1)}E==-1&&(!a||this.baseDirAt(e[b],1))?s=b:E==1&&(!a||this.baseDirAt(e[b+1],-1))&&(r=b+1)}}if(!m){let k=u&&(!h||this.y-u.bottom<h.top-this.y)?u:h;return this.y=(k.top+k.bottom)/2,this.scan(e,t)}let v=(a?this.dirAt(e[d],1):this.baseDir)==Ye.LTR;return{i:d,after:this.x>(m.left+m.right)/2==v}}scanText(e,t){let r=[];for(let l=0;l<e.length;l=_t(e.text,l))r.push(t+l);r.push(t+e.length);let s=this.scan(r,l=>{let a=r[l]-t,u=r[l+1]-t;return rl(e.dom,a,u).getClientRects()});return s.after?new sr(r[s.i+1],-1):new sr(r[s.i],1)}scanTile(e,t){if(!e.length)return new sr(t,1);if(e.children.length==1){let u=e.children[0];if(u.isText())return this.scanText(u,t);if(u.isComposite())return this.scanTile(u,t)}let r=[t];for(let u=0,h=t;u<e.children.length;u++)r.push(h+=e.children[u].length);let s=this.scan(r,u=>{let h=e.children[u];return h.flags&48?null:(h.dom.nodeType==1?h.dom:rl(h.dom,0,h.length)).getClientRects()}),l=e.children[s.i],a=r[s.i];return l.isText()?this.scanText(l,a):l.isComposite()?this.scanTile(l,a):s.after?new sr(r[s.i+1],-1):new sr(a,1)}}const Ro="";class iO{constructor(e,t){this.points=e,this.view=t,this.text="",this.lineSeparator=t.state.facet(Fe.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ro}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let s=e;;){this.findPointBefore(r,s);let l=this.text.length;this.readNode(s);let a=gt.get(s),u=s.nextSibling;if(u==t){a!=null&&a.breakAfter&&!u&&r!=this.view.contentDOM&&this.lineBreak();break}let h=gt.get(u);(a&&h?a.breakAfter:(a?a.breakAfter:du(s))||du(u)&&(s.nodeName!="BR"||a!=null&&a.isWidget())&&this.text.length>l)&&!oO(u,t)&&this.lineBreak(),s=u}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,a=1,u;if(this.lineSeparator?(l=t.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(u=s.exec(t))&&(l=u.index,a=u[0].length),this.append(t.slice(r,l<0?t.length:l)),l<0)break;if(this.lineBreak(),a>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=a-1);r=l+a}}readNode(e){let t=gt.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let s=r.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(sO(e,r.node,r.offset)?t:0))}}function sO(n,e,t){for(;;){if(!e||t<Mr(e))return!1;if(e==n)return!0;t=ci(e)+1,e=e.parentNode}}function oO(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let r=gt.get(n);if(!(r!=null&&r.isWidget()))return!1;r&&(t||(t=[])).push(r)}if(t)for(let r of t){let s=r.overrideDOMText;if(s!=null&&s.length)return!1}return!0}class N0{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class lO{constructor(e,t,r,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:l,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=vv(e.docView.tile,t,r,0))){let u=l||a?[]:uO(e),h=new iO(u,e);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=cO(u,this.bounds.from)}else{let u=e.observer.selectionRange,h=l&&l.node==u.focusNode&&l.offset==u.focusOffset||!If(e.contentDOM,u.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(u.focusNode,u.focusOffset),d=a&&a.node==u.anchorNode&&a.offset==u.anchorOffset||!If(e.contentDOM,u.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(u.anchorNode,u.anchorOffset),p=e.viewport;if((de.ios||de.chrome)&&e.state.selection.main.empty&&h!=d&&(p.from>0||p.to<e.state.doc.length)){let m=Math.min(h,d),v=Math.max(h,d),k=p.from-m,b=p.to-v;(k==0||k==1||m==0)&&(b==0||b==-1||v==e.state.doc.length)&&(h=0,d=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(ie.range(d,h)):this.newSel=ie.single(d,h)}}}function vv(n,e,t,r){if(n.isComposite()){let s=-1,l=-1,a=-1,u=-1;for(let h=0,d=r,p=r;h<n.children.length;h++){let m=n.children[h],v=d+m.length;if(d<e&&v>t)return vv(m,e,t,d);if(v>=e&&s==-1&&(s=h,l=d),d>t&&m.dom.parentNode==n.dom){a=h,u=p;break}p=v,d=v+m.breakAfter}return{from:l,to:u<0?r+n.length:u,startDOM:(s?n.children[s-1].dom.nextSibling:null)||n.dom.firstChild,endDOM:a<n.children.length&&a>=0?n.children[a].dom:null}}else return n.isText()?{from:r,to:r+n.length,startDOM:n.dom,endDOM:n.dom.nextSibling}:null}function kv(n,e){let t,{newSel:r}=e,s=n.state.selection.main,l=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:u}=e.bounds,h=s.from,d=null;(l===8||de.android&&e.text.length<u-a)&&(h=s.to,d="end");let p=wv(n.state.doc.sliceString(a,u,Ro),e.text,h-a,d);p&&(de.chrome&&l==13&&p.toB==p.from+2&&e.text.slice(p.from,p.toB)==Ro+Ro&&p.toB--,t={from:a+p.from,to:a+p.toA,insert:Be.of(e.text.slice(p.from,p.toB).split(Ro))})}else r&&(!n.hasFocus&&n.state.facet(Pr)||xu(r,s))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!s.empty&&r&&r.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:(de.mac||de.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=ie.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:Be.of([t.insert.toString().replace("."," ")])}):t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:n.state.doc.lineAt(s.from).to<s.to&&n.docView.lineHasWidget(s.to)&&n.inputState.insertingTextAt>Date.now()-50?t={from:s.from,to:s.to,insert:n.state.toText(n.inputState.insertingText)}:de.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=ie.single(r.main.anchor-1,r.main.head-1)),t={from:s.from,to:s.to,insert:Be.of([" "])}),t)return jd(n,t,r,l);if(r&&!xu(r,s)){let a=!1,u="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),u=n.inputState.lastSelectionOrigin,u=="select.pointer"&&(r=xv(n.state.facet(gl).map(h=>h(n)),r))),n.dispatch({selection:r,scrollIntoView:a,userEvent:u}),!0}else return!1}function jd(n,e,t,r=-1){if(de.ios&&n.inputState.flushIOSKey(e))return!0;let s=n.state.selection.main;if(de.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&n.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&bs(n.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&bs(n.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&bs(n.contentDOM,"Delete",46)))return!0;let l=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let a,u=()=>a||(a=aO(n,e,t));return n.state.facet(sv).some(h=>h(n,e.from,e.to,l,u))||n.dispatch(u()),!0}function aO(n,e,t){let r,s=n.state,l=s.selection.main,a=-1;if(e.from==e.to&&e.from<l.from||e.from>l.to){let h=e.from<l.from?-1:1,d=h<0?l.from:l.to,p=Vo(s.facet(gl).map(m=>m(n)),d,h);e.from==p&&(a=p)}if(a>-1)r={changes:e,selection:ie.cursor(e.from+e.insert.length,-1)};else if(e.from>=l.from&&e.to<=l.to&&e.to-e.from>=(l.to-l.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let h=l.from<e.from?s.sliceDoc(l.from,e.from):"",d=l.to>e.to?s.sliceDoc(e.to,l.to):"";r=s.replaceSelection(n.state.toText(h+e.insert.sliceString(0,void 0,n.state.lineBreak)+d))}else{let h=s.changes(e),d=t&&t.main.to<=h.newLength?t.main:void 0;if(s.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&e.to<=l.to+10&&e.to>=l.to-10){let p=n.state.sliceDoc(e.from,e.to),m,v=t&&yv(n,t.main.head);if(v){let b=e.insert.length-(e.to-e.from);m={from:v.from,to:v.to-b}}else m=n.state.doc.lineAt(l.head);let k=l.to-e.to;r=s.changeByRange(b=>{if(b.from==l.from&&b.to==l.to)return{changes:h,range:d||b.map(h)};let C=b.to-k,O=C-p.length;if(n.state.sliceDoc(O,C)!=p||C>=m.from&&O<=m.to)return{range:b};let T=s.changes({from:O,to:C,insert:e.insert}),E=b.to-l.to;return{changes:T,range:d?ie.range(Math.max(0,d.anchor+E),Math.max(0,d.head+E)):b.map(T)}})}else r={changes:h,selection:d&&s.selection.replaceRange(d)}}let u="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,u+=".compose",n.inputState.compositionFirstChange&&(u+=".start",n.inputState.compositionFirstChange=!1)),s.update(r,{userEvent:u,scrollIntoView:!0})}function wv(n,e,t,r){let s=Math.min(n.length,e.length),l=0;for(;l<s&&n.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==s&&n.length==e.length)return null;let a=n.length,u=e.length;for(;a>0&&u>0&&n.charCodeAt(a-1)==e.charCodeAt(u-1);)a--,u--;if(r=="end"){let h=Math.max(0,l-Math.min(a,u));t-=a+h-l}if(a<l&&n.length<e.length){let h=t<=l&&t>=a?l-t:0;l-=h,u=l+(u-a),a=l}else if(u<l){let h=t<=l&&t>=u?l-t:0;l-=h,a=l+(a-u),u=l}return{from:l,toA:a,toB:u}}function uO(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:l}=n.observer.selectionRange;return t&&(e.push(new N0(t,r)),(s!=t||l!=r)&&e.push(new N0(s,l))),e}function cO(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?ie.single(t+e,r+e):null}function xu(n,e){return e.head==n.main.head&&e.anchor==n.main.anchor}class hO{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,de.safari&&e.contentDOM.addEventListener("input",()=>null),de.gecko&&NO(e.contentDOM.ownerDocument)}handleEvent(e){!vO(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let s of r.observers)s(this.view,t);for(let s of r.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=fO(e),r=this.handlers,s=this.view.contentDOM;for(let l in t)if(l!="scroll"){let a=!t[l].handlers.length,u=r[l];u&&a!=!u.handlers.length&&(s.removeEventListener(l,this.handleEvent),u=null),u||s.addEventListener(l,this.handleEvent,{passive:a})}for(let l in r)l!="scroll"&&!t[l]&&s.removeEventListener(l,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Sv.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),de.android&&de.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return de.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=bv.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||dO.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,bs(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:de.safari&&!de.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function P0(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(s){lr(t.state,s)}}}function fO(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let s=r.spec,l=s&&s.plugin.domEventHandlers,a=s&&s.plugin.domEventObservers;if(l)for(let u in l){let h=l[u];h&&t(u).handlers.push(P0(r.value,h))}if(a)for(let u in a){let h=a[u];h&&t(u).observers.push(P0(r.value,h))}}for(let r in Qn)t(r).handlers.push(Qn[r]);for(let r in Nn)t(r).observers.push(Nn[r]);return e}const bv=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],dO="dthko",Sv=[16,17,18,20,91,92,224,225],Ra=6;function Da(n){return Math.max(0,n)*.7+8}function pO(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class gO{constructor(e,t,r,s){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=yC(e.contentDOM),this.atoms=e.state.facet(gl).map(a=>a(e));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Fe.allowMultipleSelections)&&mO(e,t),this.dragging=xO(e,t)&&Nv(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&pO(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,s=0,l=0,a=this.view.win.innerWidth,u=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:l,bottom:u}=this.scrollParents.y.getBoundingClientRect());let h=gv(this.view);e.clientX-h.left<=s+Ra?t=-Da(s-e.clientX):e.clientX+h.right>=a-Ra&&(t=Da(e.clientX-a)),e.clientY-h.top<=l+Ra?r=-Da(l-e.clientY):e.clientY+h.bottom>=u-Ra&&(r=Da(e.clientY-u)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,r=xv(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function mO(n,e){let t=n.state.facet(tv);return t.length?t[0](e):de.mac?e.metaKey:e.ctrlKey}function yO(n,e){let t=n.state.facet(nv);return t.length?t[0](e):de.mac?!e.altKey:!e.ctrlKey}function xO(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=nl(n.root);if(!r||r.rangeCount==0)return!0;let s=r.getRangeAt(0).getClientRects();for(let l=0;l<s.length;l++){let a=s[l];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function vO(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=gt.get(t))&&r.isWidget()&&!r.isHidden&&r.widget.ignoreEvent(e))return!1;return!0}const Qn=Object.create(null),Nn=Object.create(null),Cv=de.ie&&de.ie_version<15||de.ios&&de.webkit_version<604;function kO(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Ov(n,t.value)},50)}function _u(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function Ov(n,e){e=_u(n.state,Ed,e);let{state:t}=n,r,s=1,l=t.toText(e),a=l.lines==t.selection.ranges.length;if(Qf!=null&&t.selection.ranges.every(h=>h.empty)&&Qf==l.toString()){let h=-1;r=t.changeByRange(d=>{let p=t.doc.lineAt(d.from);if(p.from==h)return{range:d};h=p.from;let m=t.toText((a?l.line(s++).text:e)+t.lineBreak);return{changes:{from:p.from,insert:m},range:ie.cursor(d.from+m.length)}})}else a?r=t.changeByRange(h=>{let d=l.line(s++);return{changes:{from:h.from,to:h.to,insert:d.text},range:ie.cursor(h.from+d.length)}}):r=t.replaceSelection(l);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Nn.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Qn.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Nn.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Nn.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Qn.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(rv))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=bO(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new gO(n,e,t,r)),r&&n.observer.ignore(()=>{Ux(n.contentDOM);let l=n.root.activeElement;l&&!l.contains(n.contentDOM)&&l.blur()});let s=n.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function T0(n,e,t,r){if(r==1)return ie.cursor(e,t);if(r==2)return JC(n.state,e,t);{let s=n.docView.lineAt(e,t),l=n.state.doc.lineAt(s?s.posAtEnd:e),a=s?s.posAtStart:l.from,u=s?s.posAtEnd:l.to;return u<n.state.doc.length&&u==l.to&&u++,ie.range(a,u)}}const wO=de.ie&&de.ie_version<=11;let A0=null,E0=0,M0=0;function Nv(n){if(!wO)return n.detail;let e=A0,t=M0;return A0=n,M0=Date.now(),E0=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(E0+1)%3:1}function bO(n,e){let t=n.posAndSideAtCoords({x:e.clientX,y:e.clientY},!1),r=Nv(e),s=n.state.selection;return{update(l){l.docChanged&&(t.pos=l.changes.mapPos(t.pos),s=s.map(l.changes))},get(l,a,u){let h=n.posAndSideAtCoords({x:l.clientX,y:l.clientY},!1),d,p=T0(n,h.pos,h.assoc,r);if(t.pos!=h.pos&&!a){let m=T0(n,t.pos,t.assoc,r),v=Math.min(m.from,p.from),k=Math.max(m.to,p.to);p=v<p.from?ie.range(v,k):ie.range(k,v)}return a?s.replaceRange(s.main.extend(p.from,p.to)):u&&r==1&&s.ranges.length>1&&(d=SO(s,h.pos))?d:u?s.addRange(p):ie.create([p])}}}function SO(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:s}=n.ranges[t];if(r<=e&&s>=e)return ie.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Qn.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let s=n.docView.tile.nearest(e.target);if(s&&s.isWidget()){let l=s.posAtStart,a=l+s.length;(l>=t.to||a<=t.from)&&(t=ie.range(l,a))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",_u(n.state,Md,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Qn.dragend=n=>(n.inputState.draggedContent=null,!1);function R0(n,e,t,r){if(t=_u(n.state,Ed,t),!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:l}=n.inputState,a=r&&l&&yO(n,e)?{from:l.from,to:l.to}:null,u={from:s,insert:t},h=n.state.changes(a?[a,u]:u);n.focus(),n.dispatch({changes:h,selection:{anchor:h.mapPos(s,-1),head:h.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Qn.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),s=0,l=()=>{++s==t.length&&R0(n,e,r.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let u=new FileReader;u.onerror=l,u.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(u.result)||(r[a]=u.result),l()},u.readAsText(t[a])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return R0(n,e,r,!0),!0}return!1};Qn.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=Cv?null:e.clipboardData;return t?(Ov(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(kO(n),!1)};function CO(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function OO(n){let e=[],t=[],r=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:l}of n.selection.ranges){let a=n.doc.lineAt(l);a.number>s&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),s=a.number}r=!0}return{text:_u(n,Md,e.join(n.lineBreak)),ranges:t,linewise:r}}let Qf=null;Qn.copy=Qn.cut=(n,e)=>{if(!Ho(n.contentDOM,n.observer.selectionRange))return!1;let{text:t,ranges:r,linewise:s}=OO(n.state);if(!t&&!s)return!1;Qf=s?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let l=Cv?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",t),!0):(CO(n,t),!1)};const Pv=Is.define();function Tv(n,e){let t=[];for(let r of n.facet(ov)){let s=r(n,e);s&&t.push(s)}return t.length?n.update({effects:t,annotations:Pv.of(!0)}):null}function Av(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=Tv(n.state,e);t?n.dispatch(t):n.update([])}},10)}Nn.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),Av(n)};Nn.blur=n=>{n.observer.clearSelectionRange(),Av(n)};Nn.compositionstart=Nn.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Nn.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,de.chrome&&de.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Nn.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Qn.beforeinput=(n,e)=>{var t,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let l=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),a=e.getTargetRanges();if(l&&a.length){let u=a[0],h=n.posAtDOM(u.startContainer,u.startOffset),d=n.posAtDOM(u.endContainer,u.endOffset);return jd(n,{from:h,to:d,insert:n.state.toText(l)},null),!0}}let s;if(de.chrome&&de.android&&(s=bv.find(l=>l.inputType==e.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let l=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>l+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return de.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),de.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Nn.compositionend(n,e),20),!1};const D0=new Set;function NO(n){D0.has(n)||(D0.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const j0=["pre-wrap","normal","pre-line","break-spaces"];let Ts=!1;function L0(){Ts=!1}class PO{constructor(e){this.lineWrapping=e,this.doc=Be.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return j0.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let s=e[r];s<0?r++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,r,s,l,a){let u=j0.indexOf(e)>-1,h=Math.abs(t-this.lineHeight)>.3||this.lineWrapping!=u||Math.abs(r-this.charWidth)>.1;if(this.lineWrapping=u,this.lineHeight=t,this.charWidth=r,this.textHeight=s,this.lineLength=l,h){this.heightSamples={};for(let d=0;d<a.length;d++){let p=a[d];p<0?d++:this.heightSamples[Math.floor(p*10)]=!0}}return h}}class TO{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Fn{constructor(e,t,r,s,l){this.from=e,this.length=t,this.top=r,this.height=s,this._content=l}get type(){return typeof this._content=="number"?Et.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Fi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Fn(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var $e=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})($e||($e={}));const Ya=.001;class Xt{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ya&&(Ts=!0),this.height=e)}replace(e,t,r){return Xt.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,s){let l=this,a=r.doc;for(let u=s.length-1;u>=0;u--){let{fromA:h,toA:d,fromB:p,toB:m}=s[u],v=l.lineAt(h,$e.ByPosNoHeight,r.setDoc(t),0,0),k=v.to>=d?v:l.lineAt(d,$e.ByPosNoHeight,r,0,0);for(m+=k.to-d,d=k.to;u>0&&v.from<=s[u-1].toA;)h=s[u-1].fromA,p=s[u-1].fromB,u--,h<v.from&&(v=l.lineAt(h,$e.ByPosNoHeight,r,0,0));p+=v.from-h,h=v.from;let b=Ld.build(r.setDoc(a),e,p,m);l=vu(l,l.replace(h,d,b))}return l.updateHeight(r,0)}static empty(){return new dn(0,0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,s=0,l=0;for(;;)if(t==r)if(s>l*2){let u=e[t-1];u.break?e.splice(--t,1,u.left,null,u.right):e.splice(--t,1,u.left,u.right),r+=1+u.break,s-=u.size}else if(l>s*2){let u=e[r];u.break?e.splice(r,1,u.left,null,u.right):e.splice(r,1,u.left,u.right),r+=2+u.break,l-=u.size}else break;else if(s<l){let u=e[t++];u&&(s+=u.size)}else{let u=e[--r];u&&(l+=u.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,r++),new EO(Xt.of(e.slice(0,t)),a,Xt.of(e.slice(r)))}}function vu(n,e){return n==e?n:(n.constructor!=e.constructor&&(Ts=!0),e)}Xt.prototype.size=1;const AO=it.replace({});class Ev extends Xt{constructor(e,t,r){super(e,t),this.deco=r,this.spaceAbove=0}mainBlock(e,t){return new Fn(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.deco||0)}blockAt(e,t,r,s){return this.spaceAbove&&e<r+this.spaceAbove?new Fn(s,0,r,this.spaceAbove,AO):this.mainBlock(r,s)}lineAt(e,t,r,s,l){let a=this.mainBlock(s,l);return this.spaceAbove?this.blockAt(0,r,s,l).join(a):a}forEachLine(e,t,r,s,l,a){e<=l+this.length&&t>=l&&a(this.lineAt(0,$e.ByPos,r,s,l))}setMeasuredHeight(e){let t=e.heights[e.index++];t<0?(this.spaceAbove=-t,t=e.heights[e.index++]):this.spaceAbove=0,this.setHeight(t)}updateHeight(e,t=0,r=!1,s){return s&&s.from<=t&&s.more&&this.setMeasuredHeight(s),this.outdated=!1,this}toString(){return`block(${this.length})`}}class dn extends Ev{constructor(e,t,r){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0,this.spaceAbove=r}mainBlock(e,t){return new Fn(t,this.length,e+this.spaceAbove,this.height-this.spaceAbove,this.breaks)}replace(e,t,r){let s=r[0];return r.length==1&&(s instanceof dn||s instanceof Tt&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Tt?s=new dn(s.length,this.height,this.spaceAbove):s.height=this.height,this.outdated||(s.outdated=!1),s):Xt.of(r)}updateHeight(e,t=0,r=!1,s){return s&&s.from<=t&&s.more?this.setMeasuredHeight(s):(r||this.outdated)&&(this.spaceAbove=0,this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight)),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Tt extends Xt{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,l=s-r+1,a,u=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*l);a=h/l,this.length>l+1&&(u=(this.height-h)/(this.length-l-1))}else a=this.height/l;return{firstLine:r,lastLine:s,perLine:a,perChar:u}}blockAt(e,t,r,s){let{firstLine:l,lastLine:a,perLine:u,perChar:h}=this.heightMetrics(t,s);if(t.lineWrapping){let d=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),p=t.doc.lineAt(d),m=u+p.length*h,v=Math.max(r,e-m/2);return new Fn(p.from,p.length,v,m,0)}else{let d=Math.max(0,Math.min(a-l,Math.floor((e-r)/u))),{from:p,length:m}=t.doc.line(l+d);return new Fn(p,m,r+u*d,u,0)}}lineAt(e,t,r,s,l){if(t==$e.ByHeight)return this.blockAt(e,r,s,l);if(t==$e.ByPosNoHeight){let{from:k,to:b}=r.doc.lineAt(e);return new Fn(k,b-k,0,0,0)}let{firstLine:a,perLine:u,perChar:h}=this.heightMetrics(r,l),d=r.doc.lineAt(e),p=u+d.length*h,m=d.number-a,v=s+u*m+h*(d.from-l-m);return new Fn(d.from,d.length,Math.max(s,Math.min(v,s+this.height-p)),p,0)}forEachLine(e,t,r,s,l,a){e=Math.max(e,l),t=Math.min(t,l+this.length);let{firstLine:u,perLine:h,perChar:d}=this.heightMetrics(r,l);for(let p=e,m=s;p<=t;){let v=r.doc.lineAt(p);if(p==e){let b=v.number-u;m+=h*b+d*(e-l-b)}let k=h+d*v.length;a(new Fn(v.from,v.length,m,k,0)),m+=k,p=v.to+1}}replace(e,t,r){let s=this.length-t;if(s>0){let l=r[r.length-1];l instanceof Tt?r[r.length-1]=new Tt(l.length+s):r.push(null,new Tt(s-1))}if(e>0){let l=r[0];l instanceof Tt?r[0]=new Tt(e+l.length):r.unshift(new Tt(e-1),null)}return Xt.of(r)}decomposeLeft(e,t){t.push(new Tt(e-1),null)}decomposeRight(e,t){t.push(null,new Tt(this.length-e-1))}updateHeight(e,t=0,r=!1,s){let l=t+this.length;if(s&&s.from<=t+this.length&&s.more){let a=[],u=Math.max(t,s.from),h=-1;for(s.from>t&&a.push(new Tt(s.from-t-1).updateHeight(e,t));u<=l&&s.more;){let p=e.doc.lineAt(u).length;a.length&&a.push(null);let m=s.heights[s.index++],v=0;m<0&&(v=-m,m=s.heights[s.index++]),h==-1?h=m:Math.abs(m-h)>=Ya&&(h=-2);let k=new dn(p,m,v);k.outdated=!1,a.push(k),u+=p+1}u<=l&&a.push(null,new Tt(l-u).updateHeight(e,u));let d=Xt.of(a);return(h<0||Math.abs(d.height-this.height)>=Ya||Math.abs(h-this.heightMetrics(e,t).perLine)>=Ya)&&(Ts=!0),vu(this,d)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class EO extends Xt{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,s){let l=r+this.left.height;return e<l?this.left.blockAt(e,t,r,s):this.right.blockAt(e,t,l,s+this.left.length+this.break)}lineAt(e,t,r,s,l){let a=s+this.left.height,u=l+this.left.length+this.break,h=t==$e.ByHeight?e<a:e<u,d=h?this.left.lineAt(e,t,r,s,l):this.right.lineAt(e,t,r,a,u);if(this.break||(h?d.to<u:d.from>u))return d;let p=t==$e.ByPosNoHeight?$e.ByPosNoHeight:$e.ByPos;return h?d.join(this.right.lineAt(u,p,r,a,u)):this.left.lineAt(u,p,r,s,l).join(d)}forEachLine(e,t,r,s,l,a){let u=s+this.left.height,h=l+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,t,r,s,l,a),t>=h&&this.right.forEachLine(e,t,r,u,h,a);else{let d=this.lineAt(h,$e.ByPos,r,s,l);e<d.from&&this.left.forEachLine(e,d.from-1,r,s,l,a),d.to>=e&&d.from<=t&&a(d),t>d.to&&this.right.forEachLine(d.to+1,t,r,u,h,a)}}replace(e,t,r){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,r));let l=[];e>0&&this.decomposeLeft(e,l);let a=l.length;for(let u of r)l.push(u);if(e>0&&I0(l,a-1),t<this.length){let u=l.length;this.decomposeRight(t,l),I0(l,u)}return Xt.of(l)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,s=r+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Xt.of(this.break?[e,null,t]:[e,t]):(this.left=vu(this.left,e),this.right=vu(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,s){let{left:l,right:a}=this,u=t+l.length+this.break,h=null;return s&&s.from<=t+l.length&&s.more?h=l=l.updateHeight(e,t,r,s):l.updateHeight(e,t,r),s&&s.from<=u+a.length&&s.more?h=a=a.updateHeight(e,u,r,s):a.updateHeight(e,u,r),h?this.balanced(l,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function I0(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof Tt&&(r=n[e+1])instanceof Tt&&n.splice(e-1,3,new Tt(t.length+1+r.length))}const MO=5;class Ld{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof dn?s.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new dn(r-this.pos,-1,0)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let s=r.widget?r.widget.estimatedHeight:0,l=r.widget?r.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let a=t-e;r.block?this.addBlock(new Ev(a,s,r)):(a||l||s>=MO)&&this.addLineDeco(s,l,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new dn(this.pos-e,-1,0)),this.writtenTo=this.pos}blankContent(e,t){let r=new Tt(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof dn)return e;let t=new dn(0,-1,0);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let s=this.ensureLine();s.length+=r,s.collapsed+=r,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof dn)&&!this.isCovered?this.nodes.push(new dn(0,-1,0)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let s of this.nodes)s instanceof dn&&s.updateHeight(this.oracle,r),r+=s?s.length:1;return this.nodes}static build(e,t,r,s){let l=new Ld(r,e);return De.spans(t,r,s,l,0),l.finish(r)}}function RO(n,e,t){let r=new DO;return De.compare(n,e,t,r,0),r.changes}class DO{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,s){(e<t||r&&r.heightRelevant||s&&s.heightRelevant)&&ws(e,t,this.changes,5)}}function jO(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,s=r.defaultView||window,l=Math.max(0,t.left),a=Math.min(s.innerWidth,t.right),u=Math.max(0,t.top),h=Math.min(s.innerHeight,t.bottom);for(let d=n.parentNode;d&&d!=r.body;)if(d.nodeType==1){let p=d,m=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&m.overflow!="visible"){let v=p.getBoundingClientRect();l=Math.max(l,v.left),a=Math.min(a,v.right),u=Math.max(u,v.top),h=Math.min(d==n.parentNode?s.innerHeight:h,v.bottom)}d=m.position=="absolute"||m.position=="fixed"?p.offsetParent:p.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:l-t.left,right:Math.max(l,a)-t.left,top:u-(t.top+e),bottom:Math.max(u,h)-(t.top+e)}}function LO(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function IO(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Kh{constructor(e,t,r,s){this.from=e,this.to=t,this.size=r,this.displaySize=s}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let s=e[r],l=t[r];if(s.from!=l.from||s.to!=l.to||s.size!=l.size)return!1}return!0}draw(e,t){return it.replace({widget:new BO(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class BO extends Bs{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class B0{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=z0,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ye.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Rd).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new PO(t),this.stateDeco=F0(e),this.heightMap=Xt.empty().applyChanges(this.stateDeco,Be.empty,this.heightOracle.setDoc(e.doc),[new Cn(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=it.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let s=r?t.head:t.anchor;if(!e.some(({from:l,to:a})=>s>=l&&s<=a)){let{from:l,to:a}=this.lineBlockAt(s);e.push(new ja(l,a))}}return this.viewports=e.sort((r,s)=>r.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?z0:new Id(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Do(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=F0(this.state);let s=e.changedRanges,l=Cn.extendWithRanges(s,RO(r,this.stateDeco,e?e.changes:Ot.empty(this.state.doc.length))),a=this.heightMap.height,u=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);L0(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),(this.heightMap.height!=a||Ts)&&(e.flags|=2),u?(this.scrollAnchorPos=e.changes.mapPos(u.from,-1),this.scrollAnchorHeight=u.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let h=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<h.from||t.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t));let d=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&(e.selectionSet||e.focusChanged)&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(av)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),s=this.heightOracle,l=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Ye.RTL:Ye.LTR;let a=this.heightOracle.mustRefreshForWrapping(l)||this.mustMeasureContent,u=t.getBoundingClientRect(),h=a||this.mustMeasureContent||this.contentDOMHeight!=u.height;this.contentDOMHeight=u.height,this.mustMeasureContent=!1;let d=0,p=0;if(u.width&&u.height){let{scaleX:F,scaleY:M}=$x(t,u);(F>.005&&Math.abs(this.scaleX-F)>.005||M>.005&&Math.abs(this.scaleY-M)>.005)&&(this.scaleX=F,this.scaleY=M,d|=16,a=h=!0)}let m=(parseInt(r.paddingTop)||0)*this.scaleY,v=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=m||this.paddingBottom!=v)&&(this.paddingTop=m,this.paddingBottom=v,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let k=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=k&&(this.scrollAnchorHeight=-1,this.scrollTop=k),this.scrolledToBottom=Xx(e.scrollDOM);let b=(this.printing?IO:jO)(t,this.paddingTop),C=b.top-this.pixelViewport.top,O=b.bottom-this.pixelViewport.bottom;this.pixelViewport=b;let T=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(T!=this.inView&&(this.inView=T,T&&(h=!0)),!this.inView&&!this.scrollTarget&&!LO(e.dom))return 0;let E=u.width;if((this.contentDOMWidth!=E||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=u.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),h){let F=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(F)&&(a=!0),a||s.lineWrapping&&Math.abs(E-this.contentDOMWidth)>s.charWidth){let{lineHeight:M,charWidth:L,textHeight:R}=e.docView.measureTextSize();a=M>0&&s.refresh(l,M,L,R,Math.max(5,E/L),F),a&&(e.docView.minWidth=0,d|=16)}C>0&&O>0?p=Math.max(C,O):C<0&&O<0&&(p=Math.min(C,O)),L0();for(let M of this.viewports){let L=M.from==this.viewport.from?F:e.docView.measureVisibleLineHeights(M);this.heightMap=(a?Xt.empty().applyChanges(this.stateDeco,Be.empty,this.heightOracle,[new Cn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,a,new TO(M.from,L))}Ts&&(d|=2)}let j=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return j&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),d|=this.updateForViewport()),(d&2||j)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,l=this.heightOracle,{visibleTop:a,visibleBottom:u}=this,h=new ja(s.lineAt(a-r*1e3,$e.ByHeight,l,0,0).from,s.lineAt(u+(1-r)*1e3,$e.ByHeight,l,0,0).to);if(t){let{head:d}=t.range;if(d<h.from||d>h.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),m=s.lineAt(d,$e.ByPos,l,0,0),v;t.y=="center"?v=(m.top+m.bottom)/2-p/2:t.y=="start"||t.y=="nearest"&&d<h.from?v=m.top:v=m.bottom-p,h=new ja(s.lineAt(v-1e3/2,$e.ByHeight,l,0,0).from,s.lineAt(v+p+1e3/2,$e.ByHeight,l,0,0).to)}}return h}mapViewport(e,t){let r=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new ja(this.heightMap.lineAt(r,$e.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,$e.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,$e.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(t,$e.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:u}=this;return(e==0||s<=a-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||l>=u+Math.max(10,Math.min(r,250)))&&s>a-2*1e3&&l<u+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let s of e)t.touchesRange(s.from,s.to)||r.push(new Kh(t.mapPos(s.from),t.mapPos(s.to),s.size,s.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,s=r?1e4:2e3,l=s>>1,a=s<<1;if(this.defaultTextDirection!=Ye.LTR&&!r)return[];let u=[],h=(p,m,v,k)=>{if(m-p<l)return;let b=this.state.selection.main,C=[b.from];b.empty||C.push(b.to);for(let T of C)if(T>p&&T<m){h(p,T-10,v,k),h(T+10,m,v,k);return}let O=FO(e,T=>T.from>=v.from&&T.to<=v.to&&Math.abs(T.from-p)<l&&Math.abs(T.to-m)<l&&!C.some(E=>T.from<E&&T.to>E));if(!O){if(m<v.to&&t&&r&&t.visibleRanges.some(j=>j.from<=m&&j.to>=m)){let j=t.moveToLineBoundary(ie.cursor(m),!1,!0).head;j>p&&(m=j)}let T=this.gapSize(v,p,m,k),E=r||T<2e6?T:2e6;O=new Kh(p,m,T,E)}u.push(O)},d=p=>{if(p.length<a||p.type!=Et.Text)return;let m=zO(p.from,p.to,this.stateDeco);if(m.total<a)return;let v=this.scrollTarget?this.scrollTarget.range.head:null,k,b;if(r){let C=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,O,T;if(v!=null){let E=Ia(m,v),j=((this.visibleBottom-this.visibleTop)/2+C)/p.height;O=E-j,T=E+j}else O=(this.visibleTop-p.top-C)/p.height,T=(this.visibleBottom-p.top+C)/p.height;k=La(m,O),b=La(m,T)}else{let C=m.total*this.heightOracle.charWidth,O=s*this.heightOracle.charWidth,T=0;if(C>2e6)for(let L of e)L.from>=p.from&&L.from<p.to&&L.size!=L.displaySize&&L.from*this.heightOracle.charWidth+T<this.pixelViewport.left&&(T=L.size-L.displaySize);let E=this.pixelViewport.left+T,j=this.pixelViewport.right+T,F,M;if(v!=null){let L=Ia(m,v),R=((j-E)/2+O)/C;F=L-R,M=L+R}else F=(E-O)/C,M=(j+O)/C;k=La(m,F),b=La(m,M)}k>p.from&&h(p.from,k,p,m),b<p.to&&h(b,p.to,p,m)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(d):d(p);return u}gapSize(e,t,r,s){let l=Ia(s,r)-Ia(s,t);return this.heightOracle.lineWrapping?e.height*l:s.total*this.heightOracle.charWidth*l}updateLineGaps(e){Kh.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=it.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];De.spans(t,this.viewport.from,this.viewport.to,{span(l,a){r.push({from:l,to:a})},point(){}},20);let s=0;if(r.length!=this.visibleRanges.length)s=12;else for(let l=0;l<r.length&&!(s&8);l++){let a=this.visibleRanges[l],u=r[l];(a.from!=u.from||a.to!=u.to)&&(s|=4,e&&e.mapPos(a.from,-1)==u.from&&e.mapPos(a.to,1)==u.to||(s|=8))}return this.visibleRanges=r,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Do(this.heightMap.lineAt(e,$e.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Do(this.heightMap.lineAt(this.scaler.fromDOM(e),$e.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Do(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ja{constructor(e,t){this.from=e,this.to=t}}function zO(n,e,t){let r=[],s=n,l=0;return De.spans(t,n,e,{span(){},point(a,u){a>s&&(r.push({from:s,to:a}),l+=a-s),s=u}},20),s<e&&(r.push({from:s,to:e}),l+=e-s),{total:l,ranges:r}}function La({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let s=0;;s++){let{from:l,to:a}=e[s],u=a-l;if(r<=u)return l+r;r-=u}}function Ia(n,e){let t=0;for(let{from:r,to:s}of n.ranges){if(e<=s){t+=e-r;break}t+=s-r}return t/n.total}function FO(n,e){for(let t of n)if(e(t))return t}const z0={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};function F0(n){let e=n.facet(Bu).filter(r=>typeof r!="function"),t=n.facet(Dd).filter(r=>typeof r!="function");return t.length&&e.push(De.join(t)),e}class Id{constructor(e,t,r){let s=0,l=0,a=0;this.viewports=r.map(({from:u,to:h})=>{let d=t.lineAt(u,$e.ByPos,e,0,0).top,p=t.lineAt(h,$e.ByPos,e,0,0).bottom;return s+=p-d,{from:u,to:h,top:d,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let u of this.viewports)u.domTop=a+(u.top-l)*this.scale,a=u.domBottom=u.domTop+(u.bottom-u.top),l=u.bottom}toDOM(e){for(let t=0,r=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.top)return s+(e-r)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);r=l.bottom,s=l.domBottom}}fromDOM(e){for(let t=0,r=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.domTop)return r+(e-s)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);r=l.bottom,s=l.domBottom}}eq(e){return e instanceof Id?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function Do(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new Fn(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(s=>Do(s,e)):n._content)}const Ba=we.define({combine:n=>n.join(" ")}),$f=we.define({combine:n=>n.indexOf(!0)>-1}),Uf=ai.newName(),Mv=ai.newName(),Rv=ai.newName(),Dv={"&light":"."+Mv,"&dark":"."+Rv};function Xf(n,e,t){return new ai(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+r}})}const _O=Xf("."+Uf,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Dv),HO={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},qh=de.ie&&de.ie_version<=11;class WO{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new xC,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(de.ie&&de.ie_version<=11||de.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&de.android&&e.constructor.EDIT_CONTEXT!==!1&&!(de.chrome&&de.chrome_version<126)&&(this.editContext=new QO(e),e.state.facet(Pr)&&(e.contentDOM.editContext=this.editContext.editContext)),qh&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,s=this.selectionRange;if(r.state.facet(Pr)?r.root.activeElement!=this.dom:!Ho(this.dom,s))return;let l=s.anchorNode&&r.docView.tile.nearest(s.anchorNode);if(l&&l.isWidget()&&l.widget.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(de.ie&&de.ie_version<=11||de.android&&de.chrome)&&!r.state.selection.main.empty&&s.focusNode&&Wo(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=nl(e.root);if(!t)return!1;let r=de.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&VO(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let s=Ho(this.dom,r);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&kC(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,HO),qh&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),qh&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let s=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=l.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&l.force&&bs(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,s=!1;for(let l of e){let a=this.readMutation(l);a&&(a.typeOver&&(s=!0),t==-1?{from:t,to:r}=a:(t=Math.min(a.from,t),r=Math.max(a.to,r)))}return{from:t,to:r,typeOver:s}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),s=this.selectionChanged&&Ho(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let l=new lO(this.view,e,t,r);return this.view.docView.domChanged={newSel:l.newSel?l.newSel.main:null},l}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,s=kv(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!xu(this.view.state.selection,t.newSel.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.tile.nearest(e.target);if(!t||t.isWidget())return null;if(t.markDirty(e.type=="attributes"),e.type=="childList"){let r=_0(t,e.previousSibling||e.target.previousSibling,-1),s=_0(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Pr)!=e.state.facet(Pr)&&(e.view.contentDOM.editContext=e.state.facet(Pr)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function _0(n,e,t){for(;e;){let r=gt.get(e);if(r&&r.parent==n)return r;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function H0(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,l=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor,1);return Wo(a.node,a.offset,s,l)&&([t,r,s,l]=[s,l,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:l}}function VO(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return H0(n,s)}let t=null;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?H0(n,t):null}class QO{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let s=e.state.selection.main,{anchor:l,head:a}=s,u=this.toEditorPos(r.updateRangeStart),h=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:u,drifted:!1});let d=h-u>r.text.length;u==this.from&&l<this.from?u=l:h==this.to&&l>this.to&&(h=l);let p=wv(e.state.sliceDoc(u,h),r.text,(d?s.from:s.to)-u,d?"end":null);if(!p){let v=ie.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));xu(v,s)||e.dispatch({selection:v,userEvent:"select"});return}let m={from:p.from+u,to:p.toA+u,insert:Be.of(r.text.slice(p.from,p.toB).split(`
`))};if((de.mac||de.android)&&m.from==a-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(m={from:u,to:h,insert:Be.of([r.text.replace("."," ")])}),this.pendingContextChange=m,!e.state.readOnly){let v=this.to-this.from+(m.to-m.from+m.insert.length);jd(e,m,ie.single(this.toEditorPos(r.selectionStart,v),this.toEditorPos(r.selectionEnd,v)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),m.from<m.to&&!m.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(t.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let s=[],l=null;for(let a=this.toEditorPos(r.rangeStart),u=this.toEditorPos(r.rangeEnd);a<u;a++){let h=e.coordsForChar(a);l=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||l||new DOMRect,s.push(l)}t.updateCharacterBounds(r.rangeStart,s)},this.handlers.textformatupdate=r=>{let s=[];for(let l of r.getTextFormats()){let a=l.underlineStyle,u=l.underlineThickness;if(!/none/i.test(a)&&!/none/i.test(u)){let h=this.toEditorPos(l.rangeStart),d=this.toEditorPos(l.rangeEnd);if(h<d){let p=`text-decoration: underline ${/^[a-z]/.test(a)?a+" ":a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${/thin/i.test(u)?1:2}px`;s.push(it.mark({attributes:{style:p}}).range(h,d))}}}e.dispatch({effects:cv.of(it.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let s=nl(r.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,s=this.pendingContextChange;return e.changes.iterChanges((l,a,u,h,d)=>{if(r)return;let p=d.length-(a-l);if(s&&a>=s.to)if(s.from==l&&s.to==a&&s.insert.eq(d)){s=this.pendingContextChange=null,t+=p,this.to+=p;return}else s=null,this.revertPending(e.state);if(l+=t,a+=t,a<=this.from)this.from+=p,this.to+=p;else if(l<this.to){if(l<this.from||a>this.to||this.to-this.from+d.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(l),this.toContextPos(a),d.toString()),this.to+=p}t+=p}),s&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(r,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Te{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(s=>s.forEach(l=>r(l,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||vC(e.parent)||document,this.viewState=new B0(e.state||Fe.create(e)),e.scrollTo&&e.scrollTo.is(Ma)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(ps).map(s=>new Vh(s));for(let s of this.plugins)s.update(this);this.observer=new WO(this),this.inputState=new hO(this),this.inputState.ensureHandlers(this.plugins),this.docView=new C0(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>{this.viewState.mustMeasureContent=!0,this.requestMeasure()})}dispatch(...e){let t=e.length==1&&e[0]instanceof Ht?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,s,l=this.state;for(let v of e){if(v.startState!=l)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");l=v.state}if(this.destroyed){this.viewState.state=l;return}let a=this.hasFocus,u=0,h=null;e.some(v=>v.annotation(Pv))?(this.inputState.notifiedFocused=a,u=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,h=Tv(l,a),h||(u=1));let d=this.observer.delayedAndroidKey,p=null;if(d?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(l.doc)||!this.state.selection.eq(l.selection))&&(p=null)):this.observer.clear(),l.facet(Fe.phrases)!=this.state.facet(Fe.phrases))return this.setState(l);s=gu.create(this,l,e),s.flags|=u;let m=this.viewState.scrollTarget;try{this.updateState=2;for(let v of e){if(m&&(m=m.map(v.changes)),v.scrollIntoView){let{main:k}=v.state.selection;m=new Ss(k.empty?k:ie.cursor(k.head,k.head>k.anchor?-1:1))}for(let k of v.effects)k.is(Ma)&&(m=k.value.clip(this.state))}this.viewState.update(s,m),this.bidiCache=ku.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(Mo)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(v=>v.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Ba)!=s.state.facet(Ba)&&(this.viewState.mustMeasureContent=!0),(t||r||m||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let v of this.state.facet(_f))try{v(s)}catch(k){lr(this.state,k,"update listener")}(h||p)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),p&&!kv(this,p)&&d.force&&bs(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new B0(e),this.plugins=e.facet(ps).map(r=>new Vh(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new C0(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(ps),r=e.state.facet(ps);if(t!=r){let s=[];for(let l of r){let a=t.indexOf(l);if(a<0)s.push(new Vh(l));else{let u=this.plugins[a];u.mustUpdate=e,s.push(u)}}for(let l of this.plugins)l.mustUpdate!=e&&l.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){lr(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,s=r.scrollTop*this.scaleY,{scrollAnchorPos:l,scrollAnchorHeight:a}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let u=0;;u++){if(a<0)if(Xx(r))l=-1,a=this.viewState.heightMap.height;else{let k=this.viewState.scrollAnchorAt(s);l=k.from,a=k.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(u>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];h&4||([this.measureRequests,d]=[d,this.measureRequests]);let p=d.map(k=>{try{return k.read(this)}catch(b){return lr(this.state,b),W0}}),m=gu.create(this,this.state,[]),v=!1;m.flags|=h,t?t.flags|=h:t=m,this.updateState=2,m.empty||(this.updatePlugins(m),this.inputState.update(m),this.updateAttrs(),v=this.docView.update(m),v&&this.docViewUpdate());for(let k=0;k<d.length;k++)if(p[k]!=W0)try{let b=d[k];b.write&&b.write(p[k],this)}catch(b){lr(this.state,b)}if(v&&this.docView.updateSelection(!0),!m.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let b=(l<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(l).top)-a;if(b>1||b<-1){s=s+b,r.scrollTop=s/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let u of this.state.facet(_f))u(t)}get themeClasses(){return Uf+" "+(this.state.facet($f)?Rv:Mv)+" "+this.state.facet(Ba)}updateAttrs(){let e=V0(this,hv,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(Pr)?"true":"false",class:"cm-content",style:`${de.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),V0(this,Rd,t);let r=this.observer.ignore(()=>{let s=x0(this.contentDOM,this.contentAttrs,t),l=x0(this.dom,this.editorAttrs,e);return s||l});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let s of r.effects)if(s.is(Te.announce)){t&&(this.announceDOM.textContent=""),t=!1;let l=this.announceDOM.appendChild(document.createElement("div"));l.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Mo);let e=this.state.facet(Te.cspNonce);ai.mount(this.root,this.styleModules.concat(_O).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return Xh(this,e,O0(this,e,t,r))}moveByGroup(e,t){return Xh(this,e,O0(this,e,t,r=>tO(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),s=this.textDirectionAt(e.from),l=r[t?r.length-1:0];return ie.cursor(l.side(t,s)+e.from,l.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,r=!0){return eO(this,e,t,r)}moveVertically(e,t,r){return Xh(this,e,nO(this,e,t,r))}domAtPos(e,t=1){return this.docView.domAtPos(e,t)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){this.readMeasured();let r=Vf(this,e,t);return r&&r.pos}posAndSideAtCoords(e,t=!0){return this.readMeasured(),Vf(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let s=this.state.doc.lineAt(e),l=this.bidiSpans(s),a=l[or.find(l,e-s.from,-1,t)];return pu(r,a.dir==Ye.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(lv)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>$O)return Zx(e.length);let t=this.textDirectionAt(e.from),r;for(let l of this.bidiCache)if(l.from==e.from&&l.dir==t&&(l.fresh||Jx(l.isolates,r=w0(this,e))))return l.order;r||(r=w0(this,e));let s=PC(e.text,t,r);return this.bidiCache.push(new ku(e.from,e.to,t,r,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||de.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Ux(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Ma.of(new Ss(typeof e=="number"?ie.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Ma.of(new Ss(ie.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Vn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Vn.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=ai.newName(),s=[Ba.of(r),Mo.of(Xf(`.${r}`,e))];return t&&t.dark&&s.push($f.of(!0)),s}static baseTheme(e){return ju.lowest(Mo.of(Xf("."+Uf,e,Dv)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),s=r&&gt.get(r)||gt.get(e);return((t=s==null?void 0:s.root)===null||t===void 0?void 0:t.view)||null}}Te.styleModule=Mo;Te.inputHandler=sv;Te.clipboardInputFilter=Ed;Te.clipboardOutputFilter=Md;Te.scrollHandler=uv;Te.focusChangeEffect=ov;Te.perLineTextDirection=lv;Te.exceptionSink=iv;Te.updateListener=_f;Te.editable=Pr;Te.mouseSelectionStyle=rv;Te.dragMovesSelection=nv;Te.clickAddsSelectionRange=tv;Te.decorations=Bu;Te.blockWrappers=fv;Te.outerDecorations=Dd;Te.atomicRanges=gl;Te.bidiIsolatedRanges=dv;Te.scrollMargins=pv;Te.darkTheme=$f;Te.cspNonce=we.define({combine:n=>n.length?n[0]:""});Te.contentAttributes=Rd;Te.editorAttributes=hv;Te.lineWrapping=Te.contentAttributes.of({class:"cm-lineWrapping"});Te.announce=vt.define();const $O=4096,W0={};class ku{constructor(e,t,r,s,l,a){this.from=e,this.to=t,this.dir=r,this.isolates=s,this.fresh=l,this.order=a}static update(e,t){if(t.empty&&!e.some(l=>l.fresh))return e;let r=[],s=e.length?e[e.length-1].dir:Ye.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let a=e[l];a.dir==s&&!t.touchesRange(a.from,a.to)&&r.push(new ku(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return r}}function V0(n,e,t){for(let r=n.state.facet(e),s=r.length-1;s>=0;s--){let l=r[s],a=typeof l=="function"?l(n):l;a&&Pd(a,t)}return t}const UO=de.mac?"mac":de.windows?"win":de.linux?"linux":"key";function XO(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let s,l,a,u;for(let h=0;h<t.length-1;++h){const d=t[h];if(/^(cmd|meta|m)$/i.test(d))u=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))a=!0;else if(/^mod$/i.test(d))e=="mac"?u=!0:l=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(r="Alt-"+r),l&&(r="Ctrl-"+r),u&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function za(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const KO=ju.default(Te.domEventHandlers({keydown(n,e){return JO(qO(e.state),n,e,"editor")}})),Bd=we.define({enables:KO}),Q0=new WeakMap;function qO(n){let e=n.facet(Bd),t=Q0.get(e);return t||Q0.set(e,t=YO(e.reduce((r,s)=>r.concat(s),[]))),t}let ri=null;const GO=4e3;function YO(n,e=UO){let t=Object.create(null),r=Object.create(null),s=(a,u)=>{let h=r[a];if(h==null)r[a]=u;else if(h!=u)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},l=(a,u,h,d,p)=>{var m,v;let k=t[a]||(t[a]=Object.create(null)),b=u.split(/ (?!$)/).map(T=>XO(T,e));for(let T=1;T<b.length;T++){let E=b.slice(0,T).join(" ");s(E,!0),k[E]||(k[E]={preventDefault:!0,stopPropagation:!1,run:[j=>{let F=ri={view:j,prefix:E,scope:a};return setTimeout(()=>{ri==F&&(ri=null)},GO),!0}]})}let C=b.join(" ");s(C,!1);let O=k[C]||(k[C]={preventDefault:!1,stopPropagation:!1,run:((v=(m=k._any)===null||m===void 0?void 0:m.run)===null||v===void 0?void 0:v.slice())||[]});h&&O.run.push(h),d&&(O.preventDefault=!0),p&&(O.stopPropagation=!0)};for(let a of n){let u=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let d of u){let p=t[d]||(t[d]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:m}=a;for(let v in p)p[v].run.push(k=>m(k,Kf))}let h=a[e]||a.key;if(h)for(let d of u)l(d,h,a.run,a.preventDefault,a.stopPropagation),a.shift&&l(d,"Shift-"+h,a.shift,a.preventDefault,a.stopPropagation)}return t}let Kf=null;function JO(n,e,t,r){Kf=e;let s=cC(e),l=U2(s,0),a=X2(l)==s.length&&s!=" ",u="",h=!1,d=!1,p=!1;ri&&ri.view==t&&ri.scope==r&&(u=ri.prefix+" ",Sv.indexOf(e.keyCode)<0&&(d=!0,ri=null));let m=new Set,v=O=>{if(O){for(let T of O.run)if(!m.has(T)&&(m.add(T),T(t)))return O.stopPropagation&&(p=!0),!0;O.preventDefault&&(O.stopPropagation&&(p=!0),d=!0)}return!1},k=n[r],b,C;return k&&(v(k[u+za(s,e,!a)])?h=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(de.windows&&e.ctrlKey&&e.altKey)&&!(de.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(b=ui[e.keyCode])&&b!=s?(v(k[u+za(b,e,!0)])||e.shiftKey&&(C=el[e.keyCode])!=s&&C!=b&&v(k[u+za(C,e,!1)]))&&(h=!0):a&&e.shiftKey&&v(k[u+za(s,e,!0)])&&(h=!0),!h&&v(k._any)&&(h=!0)),d&&(h=!0),h&&p&&e.stopPropagation(),Kf=null,h}class ml{constructor(e,t,r,s,l){this.className=e,this.left=t,this.top=r,this.width=s,this.height=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let s=e.coordsAtPos(r.head,r.assoc||1);if(!s)return[];let l=jv(e);return[new ml(t,s.left-l.left,s.top-l.top,null,s.bottom-s.top)]}else return ZO(e,t,r)}}function jv(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Ye.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function $0(n,e,t,r){let s=n.coordsAtPos(e,t*2);if(!s)return r;let l=n.dom.getBoundingClientRect(),a=(s.top+s.bottom)/2,u=n.posAtCoords({x:l.left+1,y:a}),h=n.posAtCoords({x:l.right-1,y:a});return u==null||h==null?r:{from:Math.max(r.from,Math.min(u,h)),to:Math.min(r.to,Math.max(u,h))}}function ZO(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),l=n.textDirection==Ye.LTR,a=n.contentDOM,u=a.getBoundingClientRect(),h=jv(n),d=a.querySelector(".cm-line"),p=d&&window.getComputedStyle(d),m=u.left+(p?parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)):0),v=u.right-(p?parseInt(p.paddingRight):0),k=Wf(n,r,1),b=Wf(n,s,-1),C=k.type==Et.Text?k:null,O=b.type==Et.Text?b:null;if(C&&(n.lineWrapping||k.widgetLineBreaks)&&(C=$0(n,r,1,C)),O&&(n.lineWrapping||b.widgetLineBreaks)&&(O=$0(n,s,-1,O)),C&&O&&C.from==O.from&&C.to==O.to)return E(j(t.from,t.to,C));{let M=C?j(t.from,null,C):F(k,!1),L=O?j(null,t.to,O):F(b,!0),R=[];return(C||k).to<(O||b).from-(C&&O?1:0)||k.widgetLineBreaks>1&&M.bottom+n.defaultLineHeight/2<L.top?R.push(T(m,M.bottom,v,L.top)):M.bottom<L.top&&n.elementAtHeight((M.bottom+L.top)/2).type==Et.Text&&(M.bottom=L.top=(M.bottom+L.top)/2),E(M).concat(R).concat(E(L))}function T(M,L,R,H){return new ml(e,M-h.left,L-h.top,Math.max(0,R-M),H-L)}function E({top:M,bottom:L,horizontal:R}){let H=[];for(let V=0;V<R.length;V+=2)H.push(T(R[V],M,R[V+1],L));return H}function j(M,L,R){let H=1e9,V=-1e9,W=[];function q(ue,X,G,se,Q){let ee=n.coordsAtPos(ue,ue==R.to?-2:2),J=n.coordsAtPos(G,G==R.from?2:-2);!ee||!J||(H=Math.min(ee.top,J.top,H),V=Math.max(ee.bottom,J.bottom,V),Q==Ye.LTR?W.push(l&&X?m:ee.left,l&&se?v:J.right):W.push(!l&&se?m:J.left,!l&&X?v:ee.right))}let $=M??R.from,Z=L??R.to;for(let ue of n.visibleRanges)if(ue.to>$&&ue.from<Z)for(let X=Math.max(ue.from,$),G=Math.min(ue.to,Z);;){let se=n.state.doc.lineAt(X);for(let Q of n.bidiSpans(se)){let ee=Q.from+se.from,J=Q.to+se.from;if(ee>=G)break;J>X&&q(Math.max(ee,X),M==null&&ee<=$,Math.min(J,G),L==null&&J>=Z,Q.dir)}if(X=se.to+1,X>=G)break}return W.length==0&&q($,M==null,Z,L==null,n.textDirection),{top:H,bottom:V,horizontal:W}}function F(M,L){let R=u.top+(L?M.top:M.bottom);return{top:R,bottom:R,horizontal:[]}}}function eN(n,e){return n.constructor==e.constructor&&n.eq(e)}class tN{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Ja)!=e.state.facet(Ja)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(Ja);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!eN(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[r].constructor&&s.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e,de.safari&&de.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Ja=we.define();function Lv(n){return[Vn.define(e=>new tN(e,n)),Ja.of(n)]}const il=we.define({combine(n){return _x(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function nN(n={}){return[il.of(n),rN,iN,sN,av.of(!0)]}function Iv(n){return n.startState.facet(il)!=n.state.facet(il)}const rN=Lv({above:!0,markers(n){let{state:e}=n,t=e.facet(il),r=[];for(let s of e.selection.ranges){let l=s==e.selection.main;if(s.empty||t.drawRangeCursor){let a=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",u=s.empty?s:ie.cursor(s.head,s.head>s.anchor?-1:1);for(let h of ml.forRange(n,a,u))r.push(h)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Iv(n);return t&&U0(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){U0(e.state,n)},class:"cm-cursorLayer"});function U0(n,e){e.style.animationDuration=n.facet(il).cursorBlinkRate+"ms"}const iN=Lv({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:ml.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Iv(n)},class:"cm-selectionLayer"}),sN=ju.highest(Te.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function oN(){return aN}const lN=it.line({class:"cm-activeLine"}),aN=Vn.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let s=n.lineBlockAt(r.head);s.from>e&&(t.push(lN.range(s.from)),e=s.from)}return it.set(t)}},{decorations:n=>n.decorations});class hi extends zi{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}hi.prototype.elementClass="";hi.prototype.toDOM=void 0;hi.prototype.mapMode=gn.TrackBefore;hi.prototype.startSide=hi.prototype.endSide=-1;hi.prototype.point=!0;const Za=we.define(),uN=we.define(),eu=we.define(),X0=we.define({combine:n=>n.some(e=>e)});function cN(n){return[hN]}const hN=Vn.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(eu).map(e=>new q0(n,e)),this.fixed=!n.state.facet(X0);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(X0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=De.iter(this.view.state.facet(Za),this.view.viewport.from),r=[],s=this.gutters.map(l=>new fN(l,this.view.viewport,-this.view.documentPadding.top));for(let l of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(l.type)){let a=!0;for(let u of l.type)if(u.type==Et.Text&&a){qf(t,r,u.from);for(let h of s)h.line(this.view,u,r);a=!1}else if(u.widget)for(let h of s)h.widget(this.view,u)}else if(l.type==Et.Text){qf(t,r,l.from);for(let a of s)a.line(this.view,l,r)}else if(l.widget)for(let a of s)a.widget(this.view,l);for(let l of s)l.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(eu),t=n.state.facet(eu),r=n.docChanged||n.heightChanged||n.viewportChanged||!De.eq(n.startState.facet(Za),n.state.facet(Za),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(r=!0);else{r=!0;let s=[];for(let l of t){let a=e.indexOf(l);a<0?s.push(new q0(this.view,l)):(this.gutters[a].update(n),s.push(this.gutters[a]))}for(let l of this.gutters)l.dom.remove(),s.indexOf(l)<0&&l.destroy();for(let l of s)l.config.side=="after"?this.getDOMAfter().appendChild(l.dom):this.dom.appendChild(l.dom);this.gutters=s}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Te.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let r=t.dom.offsetWidth*e.scaleX,s=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Ye.LTR?{left:r,right:s}:{right:r,left:s}})});function K0(n){return Array.isArray(n)?n:[n]}function qf(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class fN{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=De.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:s}=this,l=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==s.elements.length){let u=new Bv(e,a,l,r);s.elements.push(u),s.dom.appendChild(u.dom)}else s.elements[this.i].update(e,a,l,r);this.height=t.bottom,this.i++}line(e,t,r){let s=[];qf(this.cursor,s,t.from),r.length&&(s=s.concat(r));let l=this.gutter.config.lineMarker(e,t,s);l&&s.unshift(l);let a=this.gutter;s.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),s=r?[r]:null;for(let l of e.state.facet(uN)){let a=l(e,t.widget,t);a&&(s||(s=[])).push(a)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class q0{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,s=>{let l=s.target,a;if(l!=this.dom&&this.dom.contains(l)){for(;l.parentNode!=this.dom;)l=l.parentNode;let h=l.getBoundingClientRect();a=(h.top+h.bottom)/2}else a=s.clientY;let u=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[r](e,u,s)&&s.preventDefault()});this.markers=K0(t.markers(e)),t.initialSpacer&&(this.spacer=new Bv(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=K0(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let r=e.view.viewport;return!De.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Bv{constructor(e,t,r,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,s)}update(e,t,r,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),dN(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let r="cm-gutterElement",s=this.dom.firstChild;for(let l=0,a=0;;){let u=a,h=l<t.length?t[l++]:null,d=!1;if(h){let p=h.elementClass;p&&(r+=" "+p);for(let m=a;m<this.markers.length;m++)if(this.markers[m].compare(h)){u=m,d=!0;break}}else u=this.markers.length;for(;a<u;){let p=this.markers[a++];if(p.toDOM){p.destroy(s);let m=s.nextSibling;s.remove(),s=m}}if(!h)break;h.toDOM&&(d?s=s.nextSibling:this.dom.insertBefore(h.toDOM(e),s)),d&&a++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function dN(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const pN=we.define(),gN=we.define(),gs=we.define({combine(n){return _x(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let s in t){let l=r[s],a=t[s];r[s]=l?(u,h,d)=>l(u,h,d)||a(u,h,d):a}return r}})}});class Gh extends hi{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Yh(n,e){return n.state.facet(gs).formatNumber(e,n.state)}const mN=eu.compute([gs],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(pN)},lineMarker(e,t,r){return r.some(s=>s.toDOM)?null:new Gh(Yh(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let s of e.state.facet(gN)){let l=s(e,t,r);if(l)return l}return null},lineMarkerChange:e=>e.startState.facet(gs)!=e.state.facet(gs),initialSpacer(e){return new Gh(Yh(e,G0(e.state.doc.lines)))},updateSpacer(e,t){let r=Yh(t.view,G0(t.view.state.doc.lines));return r==e.number?e:new Gh(r)},domEventHandlers:n.facet(gs).domEventHandlers,side:"before"}));function yN(n={}){return[gs.of(n),cN(),mN]}function G0(n){let e=9;for(;e<n;)e=e*10+9;return e}const xN=new class extends hi{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},vN=Za.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let s=n.doc.lineAt(r.head).from;s>t&&(t=s,e.push(xN.range(s)))}return De.of(e)});function kN(){return vN}const zv=1024;let wN=0;class Jh{constructor(e,t){this.from=e,this.to=t}}class Re{constructor(e={}){this.id=wN++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=rn.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Re.closedBy=new Re({deserialize:n=>n.split(" ")});Re.openedBy=new Re({deserialize:n=>n.split(" ")});Re.group=new Re({deserialize:n=>n.split(" ")});Re.isolate=new Re({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Re.contextHash=new Re({perNode:!0});Re.lookAhead=new Re({perNode:!0});Re.mounted=new Re({perNode:!0});class Qo{constructor(e,t,r,s=!1){this.tree=e,this.overlay=t,this.parser=r,this.bracketed=s}static get(e){return e&&e.props&&e.props[Re.mounted.id]}}const bN=Object.create(null);class rn{constructor(e,t,r,s=0){this.name=e,this.props=t,this.id=r,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):bN,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new rn(e.name||"",t,e.id,r);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(s)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[l[0].id]=l[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Re.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let s of r.split(" "))t[s]=e[r];return r=>{for(let s=r.prop(Re.group),l=-1;l<(s?s.length:0);l++){let a=t[l<0?r.name:s[l]];if(a)return a}}}}rn.none=new rn("",Object.create(null),0,8);class zd{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let s=null;for(let l of e){let a=l(r);if(a){s||(s=Object.assign({},r.props));let u=a[1],h=a[0];h.combine&&h.id in s&&(u=h.combine(s[h.id],u)),s[h.id]=u}}t.push(s?new rn(r.name,s,r.id,r.flags):r)}return new zd(t)}}const Fa=new WeakMap,Y0=new WeakMap;var ot;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays",n[n.EnterBracketed=16]="EnterBracketed"})(ot||(ot={}));class ht{constructor(e,t,r,s,l){if(this.type=e,this.children=t,this.positions=r,this.length=s,this.props=null,l&&l.length){this.props=Object.create(null);for(let[a,u]of l)this.props[typeof a=="number"?a:a.id]=u}}toString(){let e=Qo.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let s=r.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Yf(this.topNode,e)}cursorAt(e,t=0,r=0){let s=Fa.get(this)||this.topNode,l=new Yf(s);return l.moveTo(e,t),Fa.set(this,l._tree),l}get topNode(){return new On(this,0,0,null)}resolve(e,t=0){let r=sl(Fa.get(this)||this.topNode,e,t,!1);return Fa.set(this,r),r}resolveInner(e,t=0){let r=sl(Y0.get(this)||this.topNode,e,t,!0);return Y0.set(this,r),r}resolveStack(e,t=0){return ON(this,e,t)}iterate(e){let{enter:t,leave:r,from:s=0,to:l=this.length}=e,a=e.mode||0,u=(a&ot.IncludeAnonymous)>0;for(let h=this.cursor(a|ot.IncludeAnonymous);;){let d=!1;if(h.from<=l&&h.to>=s&&(!u&&h.type.isAnonymous||t(h)!==!1)){if(h.firstChild())continue;d=!0}for(;d&&r&&(u||!h.type.isAnonymous)&&r(h),!h.nextSibling();){if(!h.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Hd(rn.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,s)=>new ht(this.type,t,r,s,this.propValues),e.makeTree||((t,r,s)=>new ht(rn.none,t,r,s)))}static build(e){return NN(e)}}ht.empty=new ht(rn.none,[],[],0);class Fd{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Fd(this.buffer,this.index)}}class fi{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return rn.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],s=this.set.types[t],l=s.name;if(/\W/.test(l)&&!s.isError&&(l=JSON.stringify(l)),e+=4,r==e)return l;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return l+"("+a.join(",")+")"}findChild(e,t,r,s,l){let{buffer:a}=this,u=-1;for(let h=e;h!=t&&!(Fv(l,s,a[h+1],a[h+2])&&(u=h,r>0));h=a[h+3]);return u}slice(e,t,r){let s=this.buffer,l=new Uint16Array(t-e),a=0;for(let u=e,h=0;u<t;){l[h++]=s[u++],l[h++]=s[u++]-r;let d=l[h++]=s[u++]-r;l[h++]=s[u++]-e,a=Math.max(a,d)}return new fi(l,a,this.set)}}function Fv(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function sl(n,e,t,r){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!r&&n instanceof On&&n.index<0?null:n.parent;if(!a)return n;n=a}let l=r?0:ot.IgnoreOverlays;if(r)for(let a=n,u=a.parent;u;a=u,u=a.parent)a instanceof On&&a.index<0&&((s=u.enter(e,t,l))===null||s===void 0?void 0:s.from)!=a.from&&(n=u);for(;;){let a=n.enter(e,t,l);if(!a)return n;n=a}}class _v{cursor(e=0){return new Yf(this,e)}getChild(e,t=null,r=null){let s=J0(this,e,t,r);return s.length?s[0]:null}getChildren(e,t=null,r=null){return J0(this,e,t,r)}resolve(e,t=0){return sl(this,e,t,!1)}resolveInner(e,t=0){return sl(this,e,t,!0)}matchContext(e){return Gf(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(r=t,t=s.prevSibling):t=s}return r}get node(){return this}get next(){return this.parent}}class On extends _v{constructor(e,t,r,s){super(),this._tree=e,this.from=t,this.index=r,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,s,l=0){for(let a=this;;){for(let{children:u,positions:h}=a._tree,d=t>0?u.length:-1;e!=d;e+=t){let p=u[e],m=h[e]+a.from,v;if(!(!(l&ot.EnterBracketed&&p instanceof ht&&(v=Qo.get(p))&&!v.overlay&&v.bracketed&&r>=m&&r<=m+p.length)&&!Fv(s,r,m,m+p.length))){if(p instanceof fi){if(l&ot.ExcludeBuffers)continue;let k=p.findChild(0,p.buffer.length,t,r-m,s);if(k>-1)return new si(new SN(a,p,e,m),null,k)}else if(l&ot.IncludeAnonymous||!p.type.isAnonymous||_d(p)){let k;if(!(l&ot.IgnoreMounts)&&(k=Qo.get(p))&&!k.overlay)return new On(k.tree,m,e,a);let b=new On(p,m,e,a);return l&ot.IncludeAnonymous||!b.type.isAnonymous?b:b.nextChild(t<0?p.children.length-1:0,t,r,s,l)}}}if(l&ot.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}prop(e){return this._tree.prop(e)}enter(e,t,r=0){let s;if(!(r&ot.IgnoreOverlays)&&(s=Qo.get(this._tree))&&s.overlay){let l=e-this.from,a=r&ot.EnterBracketed&&s.bracketed;for(let{from:u,to:h}of s.overlay)if((t>0||a?u<=l:u<l)&&(t<0||a?h>=l:h>l))return new On(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function J0(n,e,t,r){let s=n.cursor(),l=[];if(!s.firstChild())return l;if(t!=null){for(let a=!1;!a;)if(a=s.type.is(t),!s.nextSibling())return l}for(;;){if(r!=null&&s.type.is(r))return l;if(s.type.is(e)&&l.push(s.node),!s.nextSibling())return r==null?l:[]}}function Gf(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class SN{constructor(e,t,r,s){this.parent=e,this.buffer=t,this.index=r,this.start=s}}class si extends _v{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,r);return l<0?null:new si(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}prop(e){return this.type.prop(e)}enter(e,t,r=0){if(r&ot.ExcludeBuffers)return null;let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return l<0?null:new si(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new si(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new si(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,s=this.index+4,l=r.buffer[this.index+3];if(l>s){let a=r.buffer[this.index+1];e.push(r.slice(s,l,a)),t.push(0)}return new ht(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Hv(n){if(!n.length)return null;let e=0,t=n[0];for(let l=1;l<n.length;l++){let a=n[l];(a.from>t.from||a.to<t.to)&&(t=a,e=l)}let r=t instanceof On&&t.index<0?null:t.parent,s=n.slice();return r?s[e]=r:s.splice(e,1),new CN(s,t)}class CN{constructor(e,t){this.heads=e,this.node=t}get next(){return Hv(this.heads)}}function ON(n,e,t){let r=n.resolveInner(e,t),s=null;for(let l=r instanceof On?r:r.context.parent;l;l=l.parent)if(l.index<0){let a=l.parent;(s||(s=[r])).push(a.resolve(e,t)),l=a}else{let a=Qo.get(l.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let u=new On(a.tree,a.overlay[0].from+l.from,-1,l);(s||(s=[r])).push(sl(u,e,t,!1))}}return s?Hv(s):r}class Yf{get name(){return this.type.name}constructor(e,t=0){if(this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,this.mode=t&~ot.EnterBracketed,e instanceof On)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=r+s.buffer[e+1],this.to=r+s.buffer[e+2],!0}yield(e){return e?e instanceof On?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:s}=this.buffer,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,r);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&ot.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ot.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ot.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let s=r<0?0:this.stack[r]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(s)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(s.buffer.buffer[l+3]<this.index)return!1;({index:t,parent:r}=s)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let l=t+e,a=e<0?-1:r._tree.children.length;l!=a;l+=e){let u=r._tree.children[l];if(this.mode&ot.IncludeAnonymous||u instanceof fi||!u.type.isAnonymous||_d(u))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let s=this.index,l=this.stack.length;l>=0;){for(let a=e;a;a=a._parent)if(a.index==s){if(s==this.index)return a;t=a,r=l+1;break e}s=this.stack[--l]}for(let s=r;s<this.stack.length;s++)t=new si(this.buffer,t,this.stack[s]);return this.bufferNode=new si(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&t&&t(this),s=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,s=!0}}}matchContext(e){if(!this.buffer)return Gf(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let s=e.length-1,l=this.stack.length-1;s>=0;l--){if(l<0)return Gf(this._tree,e,s);let a=r[t.buffer[this.stack[l]]];if(!a.isAnonymous){if(e[s]&&e[s]!=a.name)return!1;s--}}return!0}}function _d(n){return n.children.some(e=>e instanceof fi||!e.type.isAnonymous||_d(e))}function NN(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:s=zv,reused:l=[],minRepeatType:a=r.types.length}=n,u=Array.isArray(t)?new Fd(t,t.length):t,h=r.types,d=0,p=0;function m(M,L,R,H,V,W){let{id:q,start:$,end:Z,size:ue}=u,X=p,G=d;if(ue<0)if(u.next(),ue==-1){let P=l[q];R.push(P),H.push($-M);return}else if(ue==-3){d=q;return}else if(ue==-4){p=q;return}else throw new RangeError(`Unrecognized record size: ${ue}`);let se=h[q],Q,ee,J=$-M;if(Z-$<=s&&(ee=O(u.pos-L,V))){let P=new Uint16Array(ee.size-ee.skip),I=u.pos-ee.size,le=P.length;for(;u.pos>I;)le=T(ee.start,P,le);Q=new fi(P,Z-ee.start,r),J=ee.start-M}else{let P=u.pos-ue;u.next();let I=[],le=[],pe=q>=a?q:-1,me=0,ne=Z;for(;u.pos>P;)pe>=0&&u.id==pe&&u.size>=0?(u.end<=ne-s&&(b(I,le,$,me,u.end,ne,pe,X,G),me=I.length,ne=u.end),u.next()):W>2500?v($,P,I,le):m($,P,I,le,pe,W+1);if(pe>=0&&me>0&&me<I.length&&b(I,le,$,me,$,ne,pe,X,G),I.reverse(),le.reverse(),pe>-1&&me>0){let ce=k(se,G);Q=Hd(se,I,le,0,I.length,0,Z-$,ce,ce)}else Q=C(se,I,le,Z-$,X-Z,G)}R.push(Q),H.push(J)}function v(M,L,R,H){let V=[],W=0,q=-1;for(;u.pos>L;){let{id:$,start:Z,end:ue,size:X}=u;if(X>4)u.next();else{if(q>-1&&Z<q)break;q<0&&(q=ue-s),V.push($,Z,ue),W++,u.next()}}if(W){let $=new Uint16Array(W*4),Z=V[V.length-2];for(let ue=V.length-3,X=0;ue>=0;ue-=3)$[X++]=V[ue],$[X++]=V[ue+1]-Z,$[X++]=V[ue+2]-Z,$[X++]=X;R.push(new fi($,V[2]-Z,r)),H.push(Z-M)}}function k(M,L){return(R,H,V)=>{let W=0,q=R.length-1,$,Z;if(q>=0&&($=R[q])instanceof ht){if(!q&&$.type==M&&$.length==V)return $;(Z=$.prop(Re.lookAhead))&&(W=H[q]+$.length+Z)}return C(M,R,H,V,W,L)}}function b(M,L,R,H,V,W,q,$,Z){let ue=[],X=[];for(;M.length>H;)ue.push(M.pop()),X.push(L.pop()+R-V);M.push(C(r.types[q],ue,X,W-V,$-W,Z)),L.push(V-R)}function C(M,L,R,H,V,W,q){if(W){let $=[Re.contextHash,W];q=q?[$].concat(q):[$]}if(V>25){let $=[Re.lookAhead,V];q=q?[$].concat(q):[$]}return new ht(M,L,R,H,q)}function O(M,L){let R=u.fork(),H=0,V=0,W=0,q=R.end-s,$={size:0,start:0,skip:0};e:for(let Z=R.pos-M;R.pos>Z;){let ue=R.size;if(R.id==L&&ue>=0){$.size=H,$.start=V,$.skip=W,W+=4,H+=4,R.next();continue}let X=R.pos-ue;if(ue<0||X<Z||R.start<q)break;let G=R.id>=a?4:0,se=R.start;for(R.next();R.pos>X;){if(R.size<0)if(R.size==-3||R.size==-4)G+=4;else break e;else R.id>=a&&(G+=4);R.next()}V=se,H+=ue,W+=G}return(L<0||H==M)&&($.size=H,$.start=V,$.skip=W),$.size>4?$:void 0}function T(M,L,R){let{id:H,start:V,end:W,size:q}=u;if(u.next(),q>=0&&H<a){let $=R;if(q>4){let Z=u.pos-(q-4);for(;u.pos>Z;)R=T(M,L,R)}L[--R]=$,L[--R]=W-M,L[--R]=V-M,L[--R]=H}else q==-3?d=H:q==-4&&(p=H);return R}let E=[],j=[];for(;u.pos>0;)m(n.start||0,n.bufferStart||0,E,j,-1,0);let F=(e=n.length)!==null&&e!==void 0?e:E.length?j[0]+E[0].length:0;return new ht(h[n.topID],E.reverse(),j.reverse(),F)}const Z0=new WeakMap;function tu(n,e){if(!n.isAnonymous||e instanceof fi||e.type!=n)return 1;let t=Z0.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof ht)){t=1;break}t+=tu(n,r)}Z0.set(e,t)}return t}function Hd(n,e,t,r,s,l,a,u,h){let d=0;for(let b=r;b<s;b++)d+=tu(n,e[b]);let p=Math.ceil(d*1.5/8),m=[],v=[];function k(b,C,O,T,E){for(let j=O;j<T;){let F=j,M=C[j],L=tu(n,b[j]);for(j++;j<T;j++){let R=tu(n,b[j]);if(L+R>=p)break;L+=R}if(j==F+1){if(L>p){let R=b[F];k(R.children,R.positions,0,R.children.length,C[F]+E);continue}m.push(b[F])}else{let R=C[j-1]+b[j-1].length-M;m.push(Hd(n,b,C,F,j,M,R,null,h))}v.push(M+E-l)}}return k(e,t,r,s,0),(u||h)(m,v,a)}class Bi{constructor(e,t,r,s,l=!1,a=!1){this.from=e,this.to=t,this.tree=r,this.offset=s,this.open=(l?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let s=[new Bi(0,e.length,e,0,!1,r)];for(let l of t)l.to>e.length&&s.push(l);return s}static applyChanges(e,t,r=128){if(!t.length)return e;let s=[],l=1,a=e.length?e[0]:null;for(let u=0,h=0,d=0;;u++){let p=u<t.length?t[u]:null,m=p?p.fromA:1e9;if(m-h>=r)for(;a&&a.from<m;){let v=a;if(h>=v.from||m<=v.to||d){let k=Math.max(v.from,h)-d,b=Math.min(v.to,m)-d;v=k>=b?null:new Bi(k,b,v.tree,v.offset+d,u>0,!!p)}if(v&&s.push(v),a.to>m)break;a=l<e.length?e[l++]:null}if(!p)break;h=p.toA,d=p.toA-p.toB}return s}}let Wv=class{startParse(e,t,r){return typeof e=="string"&&(e=new PN(e)),r=r?r.length?r.map(s=>new Jh(s.from,s.to)):[new Jh(0,0)]:[new Jh(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let s=this.startParse(e,t,r);for(;;){let l=s.advance();if(l)return l}}};class PN{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Re({perNode:!0});var ey={};class wu{constructor(e,t,r,s,l,a,u,h,d,p=0,m){this.p=e,this.stack=t,this.state=r,this.reducePos=s,this.pos=l,this.score=a,this.buffer=u,this.bufferBase=h,this.curContext=d,this.lookAhead=p,this.parent=m}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let s=e.parser.context;return new wu(e,[],t,r,r,0,[],0,s?new ty(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,s=e&65535,{parser:l}=this.p,a=this.reducePos<this.pos-25&&this.setLookAhead(this.pos),u=l.dynamicPrecedence(s);if(u&&(this.score+=u),r==0){this.pushState(l.getGoto(this.state,s,!0),this.reducePos),s<l.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(s,this.reducePos);return}let h=this.stack.length-(r-1)*3-(e&262144?6:0),d=h?this.stack[h-2]:this.p.ranges[0].from,p=this.reducePos-d;p>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(d==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=d,this.p.lastBigReductionSize=p));let m=h?this.stack[h-1]:0,v=this.bufferBase+this.buffer.length-m;if(s<l.minRepeatTerm||e&131072){let k=l.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,d,k,v+4,!0)}if(e&262144)this.state=this.stack[h];else{let k=this.stack[h-3];this.state=l.getGoto(k,s,!0)}for(;this.stack.length>h;)this.stack.pop();this.reduceContext(s,d)}storeNode(e,t,r,s=4,l=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,u=this.buffer.length;if(u==0&&a.parent&&(u=a.bufferBase-a.parent.bufferBase,a=a.parent),u>0&&a.buffer[u-4]==0&&a.buffer[u-1]>-1){if(t==r)return;if(a.buffer[u-2]>=t){a.buffer[u-2]=r;return}}}if(!l||this.pos==r)this.buffer.push(e,t,r,s);else{let a=this.buffer.length;if(a>0&&(this.buffer[a-4]!=0||this.buffer[a-1]<0)){let u=!1;for(let h=a;h>0&&this.buffer[h-2]>r;h-=4)if(this.buffer[h-1]>=0){u=!0;break}if(u)for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4)}this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=r,this.buffer[a+3]=s}}shift(e,t,r,s){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let l=e,{parser:a}=this.p;this.pos=s;let u=a.stateFlag(l,1);!u&&(s>r||t<=a.maxNode)&&(this.reducePos=s),this.pushState(l,u?r:Math.min(r,this.reducePos)),this.shiftContext(t,r),t<=a.maxNode&&this.buffer.push(t,r,s,4)}else this.pos=s,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,s,4)}apply(e,t,r,s){e&65536?this.reduce(e):this.shift(e,t,r,s)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(r,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new wu(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new TN(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if((r&65536)==0)return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let l=0,a;l<t.length;l+=2)(a=t[l+1])!=this.state&&this.p.parser.hasAction(a,e)&&s.push(t[l],a);if(this.stack.length<120)for(let l=0;s.length<8&&l<t.length;l+=2){let a=t[l+1];s.some((u,h)=>h&1&&u==a)||s.push(t[l],a)}t=s}let r=[];for(let s=0;s<t.length&&r.length<4;s+=2){let l=t[s+1];if(l==this.state)continue;let a=this.split();a.pushState(l,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[s],this.pos),a.reducePos=this.pos,a.score-=200,r.push(a)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let r=t>>19,s=t&65535,l=this.stack.length-r*3;if(l<0||e.getGoto(this.stack[l],s,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;t=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(s,l)=>{if(!t.includes(s))return t.push(s),e.allActions(s,a=>{if(!(a&393216))if(a&65536){let u=(a>>19)-l;if(u>1){let h=a&65535,d=this.stack.length-u*3;if(d>=0&&e.getGoto(this.stack[d],h,!1)>=0)return u<<19|65536|h}}else{let u=r(a,l+1);if(u!=null)return u}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new ty(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){return e<=this.lookAhead?!1:(this.emitLookAhead(),this.lookAhead=e,!0)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class ty{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class TN{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class bu{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new bu(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new bu(this.stack,this.pos,this.index)}}function _a(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,s=0;r<n.length;){let l=0;for(;;){let a=n.charCodeAt(r++),u=!1;if(a==126){l=65535;break}a>=92&&a--,a>=34&&a--;let h=a-32;if(h>=46&&(h-=46,u=!0),l+=h,u)break;l*=46}t?t[s++]=l:t=new e(l)}return t}class nu{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const ny=new nu;class AN{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=ny,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,s=this.rangeIndex,l=this.pos+e;for(;l<r.from;){if(!s)return null;let a=this.ranges[--s];l-=r.from-a.to,r=a}for(;t<0?l>r.to:l>=r.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];l+=a.from-r.to,r=a}return l}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,s;if(t>=0&&t<this.chunk.length)r=this.pos+e,s=this.chunk.charCodeAt(t);else{let l=this.resolveOffset(e,1);if(l==null)return-1;if(r=l,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let a=this.rangeIndex,u=this.range;for(;u.to<=r;)u=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>u.to&&(this.chunk2=this.chunk2.slice(0,u.to-r)),s=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),s}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=ny,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(r+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return r}}class Cs{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;EN(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}Cs.prototype.contextual=Cs.prototype.fallback=Cs.prototype.extend=!1;Cs.prototype.fallback=Cs.prototype.extend=!1;class Hu{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function EN(n,e,t,r,s,l){let a=0,u=1<<r,{dialect:h}=t.p.parser;e:for(;(u&n[a])!=0;){let d=n[a+1];for(let k=a+3;k<d;k+=2)if((n[k+1]&u)>0){let b=n[k];if(h.allows(b)&&(e.token.value==-1||e.token.value==b||MN(b,e.token.value,s,l))){e.acceptToken(b);break}}let p=e.next,m=0,v=n[a+2];if(e.next<0&&v>m&&n[d+v*3-3]==65535){a=n[d+v*3-1];continue e}for(;m<v;){let k=m+v>>1,b=d+k+(k<<1),C=n[b],O=n[b+1]||65536;if(p<C)v=k;else if(p>=O)m=k+1;else{a=n[b+2],e.advance();continue e}}break}}function ry(n,e,t){for(let r=e,s;(s=n[r])!=65535;r++)if(s==t)return r-e;return-1}function MN(n,e,t,r){let s=ry(t,r,e);return s<0||ry(t,r,n)<s}const fn=typeof process<"u"&&ey&&/\bparse\b/.test(ey.LOG);let Zh=null;function iy(n,e,t){let r=n.cursor(ot.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class RN{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?iy(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?iy(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],s=this.index[t];if(s==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let l=r.children[s],a=this.start[t]+r.positions[s];if(a>e)return this.nextStart=a,null;if(l instanceof ht){if(a==e){if(a<this.safeFrom)return null;let u=a+l.length;if(u<=this.safeTo){let h=l.prop(Re.lookAhead);if(!h||u+h<this.fragment.to)return l}}this.index[t]++,a+l.length>=Math.max(this.safeFrom,e)&&(this.trees.push(l),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+l.length}}}class DN{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new nu)}getActions(e){let t=0,r=null,{parser:s}=e.p,{tokenizers:l}=s,a=s.stateSlot(e.state,3),u=e.curContext?e.curContext.hash:0,h=0;for(let d=0;d<l.length;d++){if((1<<d&a)==0)continue;let p=l[d],m=this.tokens[d];if(!(r&&!p.fallback)&&((p.contextual||m.start!=e.pos||m.mask!=a||m.context!=u)&&(this.updateCachedToken(m,p,e),m.mask=a,m.context=u),m.lookAhead>m.end+25&&(h=Math.max(m.lookAhead,h)),m.value!=0)){let v=t;if(m.extended>-1&&(t=this.addActions(e,m.extended,m.end,t)),t=this.addActions(e,m.value,m.end,t),!p.extend&&(r=m,t>v))break}}for(;this.actions.length>t;)this.actions.pop();return h&&e.setLookAhead(h),!r&&e.pos==this.stream.end&&(r=new nu,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new nu,{pos:r,p:s}=e;return t.start=r,t.end=Math.min(r+1,s.stream.end),t.value=r==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,r){let s=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(s,e),r),e.value>-1){let{parser:l}=r.p;for(let a=0;a<l.specialized.length;a++)if(l.specialized[a]==e.value){let u=l.specializers[a](this.stream.read(e.start,e.end),r);if(u>=0&&r.p.parser.dialect.allows(u>>1)){(u&1)==0?e.value=u>>1:e.extended=u>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,r,s){for(let l=0;l<s;l+=3)if(this.actions[l]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=r,s}addActions(e,t,r,s){let{state:l}=e,{parser:a}=e.p,{data:u}=a;for(let h=0;h<2;h++)for(let d=a.stateSlot(l,h?2:1);;d+=3){if(u[d]==65535)if(u[d+1]==1)d=Or(u,d+2);else{s==0&&u[d+1]==2&&(s=this.putAction(Or(u,d+2),t,r,s));break}u[d]==t&&(s=this.putAction(Or(u,d+1),t,r,s))}return s}}class jN{constructor(e,t,r,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new AN(t,s),this.tokens=new DN(e,this.stream),this.topTerm=e.top[1];let{from:l}=s[0];this.stacks=[wu.start(this,e.top[0],l)],this.fragments=r.length&&this.stream.end-l>e.bufferLength*4?new RN(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],s,l;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let u=e[a];for(;;){if(this.tokens.mainToken=null,u.pos>t)r.push(u);else{if(this.advanceStack(u,r,e))continue;{s||(s=[],l=[]),s.push(u);let h=this.tokens.getMainToken(u);l.push(h.value,h.end)}}break}}if(!r.length){let a=s&&BN(s);if(a)return fn&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw fn&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let a=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,l,r);if(a)return fn&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(r.length>a)for(r.sort((u,h)=>h.score-u.score);r.length>a;)r.pop();r.some(u=>u.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let a=0;a<r.length-1;a++){let u=r[a];for(let h=a+1;h<r.length;h++){let d=r[h];if(u.sameState(d)||u.buffer.length>500&&d.buffer.length>500)if((u.score-d.score||u.buffer.length-d.buffer.length)>0)r.splice(h--,1);else{r.splice(a--,1);continue e}}}r.length>12&&(r.sort((a,u)=>u.score-a.score),r.splice(12,r.length-12))}this.minStackPos=r[0].pos;for(let a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let s=e.pos,{parser:l}=this,a=fn?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,p=d?e.curContext.hash:0;for(let m=this.fragments.nodeAt(s);m;){let v=this.parser.nodeSet.types[m.type.id]==m.type?l.getGoto(e.state,m.type.id):-1;if(v>-1&&m.length&&(!d||(m.prop(Re.contextHash)||0)==p))return e.useNode(m,v),fn&&console.log(a+this.stackID(e)+` (via reuse of ${l.getName(m.type.id)})`),!0;if(!(m instanceof ht)||m.children.length==0||m.positions[0]>0)break;let k=m.children[0];if(k instanceof ht&&m.positions[0]==0)m=k;else break}}let u=l.stateSlot(e.state,4);if(u>0)return e.reduce(u),fn&&console.log(a+this.stackID(e)+` (via always-reduce ${l.getName(u&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let d=0;d<h.length;){let p=h[d++],m=h[d++],v=h[d++],k=d==h.length||!r,b=k?e:e.split(),C=this.tokens.mainToken;if(b.apply(p,m,C?C.start:b.pos,v),fn&&console.log(a+this.stackID(b)+` (via ${(p&65536)==0?"shift":`reduce of ${l.getName(p&65535)}`} for ${l.getName(m)} @ ${s}${b==e?"":", split"})`),k)return!0;b.pos>s?t.push(b):r.push(b)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return sy(e,t),!0}}runRecovery(e,t,r){let s=null,l=!1;for(let a=0;a<e.length;a++){let u=e[a],h=t[a<<1],d=t[(a<<1)+1],p=fn?this.stackID(u)+" -> ":"";if(u.deadEnd&&(l||(l=!0,u.restart(),fn&&console.log(p+this.stackID(u)+" (restarted)"),this.advanceFully(u,r))))continue;let m=u.split(),v=p;for(let k=0;k<10&&m.forceReduce()&&(fn&&console.log(v+this.stackID(m)+" (via force-reduce)"),!this.advanceFully(m,r));k++)fn&&(v=this.stackID(m)+" -> ");for(let k of u.recoverByInsert(h))fn&&console.log(p+this.stackID(k)+" (via recover-insert)"),this.advanceFully(k,r);this.stream.end>u.pos?(d==u.pos&&(d++,h=0),u.recoverByDelete(h,d),fn&&console.log(p+this.stackID(u)+` (via recover-delete ${this.parser.getName(h)})`),sy(u,r)):(!s||s.score<m.score)&&(s=m)}return s}stackToTree(e){return e.close(),ht.build({buffer:bu.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Zh||(Zh=new WeakMap)).get(e);return t||Zh.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function sy(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class LN{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const ef=n=>n;class IN{constructor(e){this.start=e.start,this.shift=e.shift||ef,this.reduce=e.reduce||ef,this.reuse=e.reuse||ef,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class Su extends Wv{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let u=0;u<e.repeatNodeCount;u++)t.push("");let r=Object.keys(e.topRules).map(u=>e.topRules[u][1]),s=[];for(let u=0;u<t.length;u++)s.push([]);function l(u,h,d){s[u].push([h,h.deserialize(String(d))])}if(e.nodeProps)for(let u of e.nodeProps){let h=u[0];typeof h=="string"&&(h=Re[h]);for(let d=1;d<u.length;){let p=u[d++];if(p>=0)l(p,h,u[d++]);else{let m=u[d+-p];for(let v=-p;v>0;v--)l(u[d++],h,m);d++}}}this.nodeSet=new zd(t.map((u,h)=>rn.define({name:h>=this.minRepeatTerm?void 0:u,id:h,props:s[h],top:r.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=zv;let a=_a(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let u=0;u<this.specializerSpecs.length;u++)this.specialized[u]=this.specializerSpecs[u].term;this.specializers=this.specializerSpecs.map(oy),this.states=_a(e.states,Uint32Array),this.data=_a(e.stateData),this.goto=_a(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(u=>typeof u=="number"?new Cs(a,u):u),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let s=new jN(this,e,t,r);for(let l of this.wrappers)s=l(s,e,t,r);return s}getGoto(e,t,r=!1){let s=this.goto;if(t>=s[0])return-1;for(let l=s[t+1];;){let a=s[l++],u=a&1,h=s[l++];if(u&&r)return h;for(let d=l+(a>>1);l<d;l++)if(s[l]==e)return h;if(u)return-1}}hasAction(e,t){let r=this.data;for(let s=0;s<2;s++)for(let l=this.stateSlot(e,s?2:1),a;;l+=3){if((a=r[l])==65535)if(r[l+1]==1)a=r[l=Or(r,l+2)];else{if(r[l+1]==2)return Or(r,l+2);break}if(a==t||a==0)return Or(r,l+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t?!0:null)}allActions(e,t){let r=this.stateSlot(e,4),s=r?t(r):void 0;for(let l=this.stateSlot(e,1);s==null;l+=3){if(this.data[l]==65535)if(this.data[l+1]==1)l=Or(this.data,l+2);else break;s=t(Or(this.data,l+1))}return s}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=Or(this.data,r+2);else break;if((this.data[r+2]&1)==0){let s=this.data[r+1];t.some((l,a)=>a&1&&l==s)||t.push(this.data[r],s)}}return t}configure(e){let t=Object.assign(Object.create(Su.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let s=e.tokenizers.find(l=>l.from==r);return s?s.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,s)=>{let l=e.specializers.find(u=>u.from==r.external);if(!l)return r;let a=Object.assign(Object.assign({},r),{external:l.to});return t.specializers[s]=oy(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let l of e.split(" ")){let a=t.indexOf(l);a>=0&&(r[a]=!0)}let s=null;for(let l=0;l<t.length;l++)if(!r[l])for(let a=this.dialects[t[l]],u;(u=this.data[a++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[u]=1;return new LN(e,r,s)}static deserialize(e){return new Su(e)}}function Or(n,e){return n[e]|n[e+1]<<16}function BN(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function oy(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}let zN=0,Nr=class Jf{constructor(e,t,r,s){this.name=e,this.set=t,this.base=r,this.modified=s,this.id=zN++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof Jf&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let s=new Jf(r,[],null,[]);if(s.set.push(s),t)for(let l of t.set)s.set.push(l);return s}static defineModifier(e){let t=new Cu(e);return r=>r.modified.indexOf(t)>-1?r:Cu.get(r.base||r,r.modified.concat(t).sort((s,l)=>s.id-l.id))}},FN=0;class Cu{constructor(e){this.name=e,this.instances=[],this.id=FN++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(u=>u.base==e&&_N(t,u.modified));if(r)return r;let s=[],l=new Nr(e.name,s,e,t);for(let u of t)u.instances.push(l);let a=HN(t);for(let u of e.set)if(!u.modified.length)for(let h of a)s.push(Cu.get(u,h));return l}}function _N(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function HN(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,s=e.length;r<s;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function Vv(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let s of t.split(" "))if(s){let l=[],a=2,u=s;for(let m=0;;){if(u=="..."&&m>0&&m+3==s.length){a=1;break}let v=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(u);if(!v)throw new RangeError("Invalid path: "+s);if(l.push(v[0]=="*"?"":v[0][0]=='"'?JSON.parse(v[0]):v[0]),m+=v[0].length,m==s.length)break;let k=s[m++];if(m==s.length&&k=="!"){a=0;break}if(k!="/")throw new RangeError("Invalid path: "+s);u=s.slice(m)}let h=l.length-1,d=l[h];if(!d)throw new RangeError("Invalid path: "+s);let p=new ol(r,a,h>0?l.slice(0,h):null);e[d]=p.sort(e[d])}}return Qv.add(e)}const Qv=new Re({combine(n,e){let t,r,s;for(;n||e;){if(!n||e&&n.depth>=e.depth?(s=e,e=e.next):(s=n,n=n.next),t&&t.mode==s.mode&&!s.context&&!t.context)continue;let l=new ol(s.tags,s.mode,s.context);t?t.next=l:r=l,t=l}return r}});class ol{constructor(e,t,r,s){this.tags=e,this.mode=t,this.context=r,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}ol.empty=new ol([],2,null);function $v(n,e){let t=Object.create(null);for(let l of n)if(!Array.isArray(l.tag))t[l.tag.id]=l.class;else for(let a of l.tag)t[a.id]=l.class;let{scope:r,all:s=null}=e||{};return{style:l=>{let a=s;for(let u of l)for(let h of u.set){let d=t[h.id];if(d){a=a?a+" "+d:d;break}}return a},scope:r}}function WN(n,e){let t=null;for(let r of n){let s=r.style(e);s&&(t=t?t+" "+s:s)}return t}function VN(n,e,t,r=0,s=n.length){let l=new QN(r,Array.isArray(e)?e:[e],t);l.highlightRange(n.cursor(),r,s,"",l.highlighters),l.flush(s)}class QN{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,s,l){let{type:a,from:u,to:h}=e;if(u>=r||h<=t)return;a.isTop&&(l=this.highlighters.filter(k=>!k.scope||k.scope(a)));let d=s,p=$N(e)||ol.empty,m=WN(l,p.tags);if(m&&(d&&(d+=" "),d+=m,p.mode==1&&(s+=(s?" ":"")+m)),this.startSpan(Math.max(t,u),d),p.opaque)return;let v=e.tree&&e.tree.prop(Re.mounted);if(v&&v.overlay){let k=e.node.enter(v.overlay[0].from+u,1),b=this.highlighters.filter(O=>!O.scope||O.scope(v.tree.type)),C=e.firstChild();for(let O=0,T=u;;O++){let E=O<v.overlay.length?v.overlay[O]:null,j=E?E.from+u:h,F=Math.max(t,T),M=Math.min(r,j);if(F<M&&C)for(;e.from<M&&(this.highlightRange(e,F,M,s,l),this.startSpan(Math.min(M,e.to),d),!(e.to>=j||!e.nextSibling())););if(!E||j>r)break;T=E.to+u,T>t&&(this.highlightRange(k.cursor(),Math.max(t,E.from+u),Math.min(r,T),"",b),this.startSpan(Math.min(r,T),d))}C&&e.parent()}else if(e.firstChild()){v&&(s="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,s,l),this.startSpan(Math.min(r,e.to),d)}while(e.nextSibling());e.parent()}}}function $N(n){let e=n.type.prop(Qv);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const ae=Nr.define,Ha=ae(),ti=ae(),ly=ae(ti),ay=ae(ti),ni=ae(),Wa=ae(ni),tf=ae(ni),rr=ae(),Ei=ae(rr),tr=ae(),nr=ae(),Zf=ae(),No=ae(Zf),Va=ae(),U={comment:Ha,lineComment:ae(Ha),blockComment:ae(Ha),docComment:ae(Ha),name:ti,variableName:ae(ti),typeName:ly,tagName:ae(ly),propertyName:ay,attributeName:ae(ay),className:ae(ti),labelName:ae(ti),namespace:ae(ti),macroName:ae(ti),literal:ni,string:Wa,docString:ae(Wa),character:ae(Wa),attributeValue:ae(Wa),number:tf,integer:ae(tf),float:ae(tf),bool:ae(ni),regexp:ae(ni),escape:ae(ni),color:ae(ni),url:ae(ni),keyword:tr,self:ae(tr),null:ae(tr),atom:ae(tr),unit:ae(tr),modifier:ae(tr),operatorKeyword:ae(tr),controlKeyword:ae(tr),definitionKeyword:ae(tr),moduleKeyword:ae(tr),operator:nr,derefOperator:ae(nr),arithmeticOperator:ae(nr),logicOperator:ae(nr),bitwiseOperator:ae(nr),compareOperator:ae(nr),updateOperator:ae(nr),definitionOperator:ae(nr),typeOperator:ae(nr),controlOperator:ae(nr),punctuation:Zf,separator:ae(Zf),bracket:No,angleBracket:ae(No),squareBracket:ae(No),paren:ae(No),brace:ae(No),content:rr,heading:Ei,heading1:ae(Ei),heading2:ae(Ei),heading3:ae(Ei),heading4:ae(Ei),heading5:ae(Ei),heading6:ae(Ei),contentSeparator:ae(rr),list:ae(rr),quote:ae(rr),emphasis:ae(rr),strong:ae(rr),link:ae(rr),monospace:ae(rr),strikethrough:ae(rr),inserted:ae(),deleted:ae(),changed:ae(),invalid:ae(),meta:Va,documentMeta:ae(Va),annotation:ae(Va),processingInstruction:ae(Va),definition:Nr.defineModifier("definition"),constant:Nr.defineModifier("constant"),function:Nr.defineModifier("function"),standard:Nr.defineModifier("standard"),local:Nr.defineModifier("local"),special:Nr.defineModifier("special")};for(let n in U){let e=U[n];e instanceof Nr&&(e.name=n)}$v([{tag:U.link,class:"tok-link"},{tag:U.heading,class:"tok-heading"},{tag:U.emphasis,class:"tok-emphasis"},{tag:U.strong,class:"tok-strong"},{tag:U.keyword,class:"tok-keyword"},{tag:U.atom,class:"tok-atom"},{tag:U.bool,class:"tok-bool"},{tag:U.url,class:"tok-url"},{tag:U.labelName,class:"tok-labelName"},{tag:U.inserted,class:"tok-inserted"},{tag:U.deleted,class:"tok-deleted"},{tag:U.literal,class:"tok-literal"},{tag:U.string,class:"tok-string"},{tag:U.number,class:"tok-number"},{tag:[U.regexp,U.escape,U.special(U.string)],class:"tok-string2"},{tag:U.variableName,class:"tok-variableName"},{tag:U.local(U.variableName),class:"tok-variableName tok-local"},{tag:U.definition(U.variableName),class:"tok-variableName tok-definition"},{tag:U.special(U.variableName),class:"tok-variableName2"},{tag:U.definition(U.propertyName),class:"tok-propertyName tok-definition"},{tag:U.typeName,class:"tok-typeName"},{tag:U.namespace,class:"tok-namespace"},{tag:U.className,class:"tok-className"},{tag:U.macroName,class:"tok-macroName"},{tag:U.propertyName,class:"tok-propertyName"},{tag:U.operator,class:"tok-operator"},{tag:U.comment,class:"tok-comment"},{tag:U.meta,class:"tok-meta"},{tag:U.invalid,class:"tok-invalid"},{tag:U.punctuation,class:"tok-punctuation"}]);const fs=63,uy=64,UN=1,XN=2,Uv=3,KN=4,Xv=5,qN=6,GN=7,Kv=65,YN=66,JN=8,ZN=9,eP=10,tP=11,nP=12,qv=13,rP=19,iP=20,sP=29,oP=33,lP=34,aP=47,uP=0,Wd=1,ed=2,ll=3,td=4;class Di{constructor(e,t,r){this.parent=e,this.depth=t,this.type=r,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+r}}Di.top=new Di(null,-1,uP);function $o(n,e){for(let t=0,r=e-n.pos-1;;r--,t++){let s=n.peek(r);if(Rr(s)||s==-1)return t}}function nd(n){return n==32||n==9}function Rr(n){return n==10||n==13}function Gv(n){return nd(n)||Rr(n)}function Ii(n){return n<0||Gv(n)}const cP=new IN({start:Di.top,reduce(n,e){return n.type==ll&&(e==iP||e==lP)?n.parent:n},shift(n,e,t,r){if(e==Uv)return new Di(n,$o(r,r.pos),Wd);if(e==Kv||e==Xv)return new Di(n,$o(r,r.pos),ed);if(e==fs)return n.parent;if(e==rP||e==oP)return new Di(n,0,ll);if(e==qv&&n.type==td)return n.parent;if(e==aP){let s=/[1-9]/.exec(r.read(r.pos,t.pos));if(s)return new Di(n,n.depth+ +s[0],td)}return n},hash(n){return n.hash}});function As(n,e,t=0){return n.peek(t)==e&&n.peek(t+1)==e&&n.peek(t+2)==e&&Ii(n.peek(t+3))}const hP=new Hu((n,e)=>{if(n.next==-1&&e.canShift(uy))return n.acceptToken(uy);let t=n.peek(-1);if((Rr(t)||t<0)&&e.context.type!=ll){if(As(n,45))if(e.canShift(fs))n.acceptToken(fs);else return n.acceptToken(UN,3);if(As(n,46))if(e.canShift(fs))n.acceptToken(fs);else return n.acceptToken(XN,3);let r=0;for(;n.next==32;)r++,n.advance();(r<e.context.depth||r==e.context.depth&&e.context.type==Wd&&(n.next!=45||!Ii(n.peek(1))))&&n.next!=-1&&!Rr(n.next)&&n.next!=35&&n.acceptToken(fs,-r)}},{contextual:!0}),fP=new Hu((n,e)=>{if(e.context.type==ll){n.next==63&&(n.advance(),Ii(n.next)&&n.acceptToken(GN));return}if(n.next==45)n.advance(),Ii(n.next)&&n.acceptToken(e.context.type==Wd&&e.context.depth==$o(n,n.pos-1)?KN:Uv);else if(n.next==63)n.advance(),Ii(n.next)&&n.acceptToken(e.context.type==ed&&e.context.depth==$o(n,n.pos-1)?qN:Xv);else{let t=n.pos;for(;;)if(nd(n.next)){if(n.pos==t)return;n.advance()}else if(n.next==33)Yv(n);else if(n.next==38)rd(n);else if(n.next==42){rd(n);break}else if(n.next==39||n.next==34){if(Vd(n,!0))break;return}else if(n.next==91||n.next==123){if(!pP(n))return;break}else{Jv(n,!0,!1,0);break}for(;nd(n.next);)n.advance();if(n.next==58){if(n.pos==t&&e.canShift(sP))return;let r=n.peek(1);Ii(r)&&n.acceptTokenTo(e.context.type==ed&&e.context.depth==$o(n,t)?YN:Kv,t)}}},{contextual:!0});function dP(n){return n>32&&n<127&&n!=34&&n!=37&&n!=44&&n!=60&&n!=62&&n!=92&&n!=94&&n!=96&&n!=123&&n!=124&&n!=125}function cy(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function hy(n,e){return n.next==37?(n.advance(),cy(n.next)&&n.advance(),cy(n.next)&&n.advance(),!0):dP(n.next)||e&&n.next==44?(n.advance(),!0):!1}function Yv(n){if(n.advance(),n.next==60){for(n.advance();;)if(!hy(n,!0)){n.next==62&&n.advance();break}}else for(;hy(n,!1););}function rd(n){for(n.advance();!Ii(n.next)&&Ou(n.next)!="f";)n.advance()}function Vd(n,e){let t=n.next,r=!1,s=n.pos;for(n.advance();;){let l=n.next;if(l<0)break;if(n.advance(),l==t)if(l==39)if(n.next==39)n.advance();else break;else break;else if(l==92&&t==34)n.next>=0&&n.advance();else if(Rr(l)){if(e)return!1;r=!0}else if(e&&n.pos>=s+1024)return!1}return!r}function pP(n){for(let e=[],t=n.pos+1024;;)if(n.next==91||n.next==123)e.push(n.next),n.advance();else if(n.next==39||n.next==34){if(!Vd(n,!0))return!1}else if(n.next==93||n.next==125){if(e[e.length-1]!=n.next-2)return!1;if(e.pop(),n.advance(),!e.length)return!0}else{if(n.next<0||n.pos>t||Rr(n.next))return!1;n.advance()}}const gP="iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif";function Ou(n){return n<33?"u":n>125?"s":gP[n-33]}function nf(n,e){let t=Ou(n);return t!="u"&&!(e&&t=="f")}function Jv(n,e,t,r){if(Ou(n.next)=="s"||(n.next==63||n.next==58||n.next==45)&&nf(n.peek(1),t))n.advance();else return!1;let s=n.pos;for(;;){let l=n.next,a=0,u=r+1;for(;Gv(l);){if(Rr(l)){if(e)return!1;u=0}else u++;l=n.peek(++a)}if(!(l>=0&&(l==58?nf(n.peek(a+1),t):l==35?n.peek(a-1)!=32:nf(l,t)))||!t&&u<=r||u==0&&!t&&(As(n,45,a)||As(n,46,a)))break;if(e&&Ou(l)=="f")return!1;for(let d=a;d>=0;d--)n.advance();if(e&&n.pos>s+1024)return!1}return!0}const mP=new Hu((n,e)=>{if(n.next==33)Yv(n),n.acceptToken(nP);else if(n.next==38||n.next==42){let t=n.next==38?eP:tP;rd(n),n.acceptToken(t)}else n.next==39||n.next==34?(Vd(n,!1),n.acceptToken(ZN)):Jv(n,!1,e.context.type==ll,e.context.depth)&&n.acceptToken(JN)}),yP=new Hu((n,e)=>{let t=e.context.type==td?e.context.depth:-1,r=n.pos;e:for(;;){let s=0,l=n.next;for(;l==32;)l=n.peek(++s);if(!s&&(As(n,45,s)||As(n,46,s))||!Rr(l)&&(t<0&&(t=Math.max(e.context.depth+1,s)),s<t))break;for(;;){if(n.next<0)break e;let a=Rr(n.next);if(n.advance(),a)continue e;r=n.pos}}n.acceptTokenTo(qv,r)}),xP=Vv({DirectiveName:U.keyword,DirectiveContent:U.attributeValue,"DirectiveEnd DocEnd":U.meta,QuotedLiteral:U.string,BlockLiteralHeader:U.special(U.string),BlockLiteralContent:U.content,Literal:U.content,"Key/Literal Key/QuotedLiteral":U.definition(U.propertyName),"Anchor Alias":U.labelName,Tag:U.typeName,Comment:U.lineComment,": , -":U.separator,"?":U.punctuation,"[ ]":U.squareBracket,"{ }":U.brace}),vP=Su.deserialize({version:14,states:"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y",stateData:";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O",goto:",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv",nodeNames:" DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document",maxTerm:74,context:cP,nodeProps:[["isolate",-3,8,9,14,""],["openedBy",18,"[",32,"{"],["closedBy",19,"]",33,"}"]],propSources:[xP],skippedNodes:[0],repeatNodeCount:6,tokenData:"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P",tokenizers:[hP,fP,mP,yP,0,1],topRules:{Stream:[0,15]},tokenPrec:0});var rf;const ms=new Re;function kP(n){return we.define({combine:n?e=>e.concat(n):void 0})}const wP=new Re;class Hn{constructor(e,t,r=[],s=""){this.data=e,this.name=s,Fe.prototype.hasOwnProperty("tree")||Object.defineProperty(Fe.prototype,"tree",{get(){return ur(this)}}),this.parser=t,this.extension=[Ms.of(this),Fe.languageData.of((l,a,u)=>{let h=fy(l,a,u),d=h.type.prop(ms);if(!d)return[];let p=l.facet(d),m=h.type.prop(wP);if(m){let v=h.resolve(a-h.from,u);for(let k of m)if(k.test(v,l)){let b=l.facet(k.facet);return k.type=="replace"?b:b.concat(p)}}return p})].concat(r)}isActiveAt(e,t,r=-1){return fy(e,t,r).type.prop(ms)==this.data}findRegions(e){let t=e.facet(Ms);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],s=(l,a)=>{if(l.prop(ms)==this.data){r.push({from:a,to:a+l.length});return}let u=l.prop(Re.mounted);if(u){if(u.tree.prop(ms)==this.data){if(u.overlay)for(let h of u.overlay)r.push({from:h.from+a,to:h.to+a});else r.push({from:a,to:a+l.length});return}else if(u.overlay){let h=r.length;if(s(u.tree,u.overlay[0].from+a),r.length>h)return}}for(let h=0;h<l.children.length;h++){let d=l.children[h];d instanceof ht&&s(d,l.positions[h]+a)}};return s(ur(e),0),r}get allowsNesting(){return!0}}Hn.setState=vt.define();function fy(n,e,t){let r=n.facet(Ms),s=ur(n).topNode;if(!r||r.allowsNesting)for(let l=s;l;l=l.enter(e,t,ot.ExcludeBuffers|ot.EnterBracketed))l.type.isTop&&(s=l);return s}class Nu extends Hn{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=kP(e.languageData);return new Nu(t,e.parser.configure({props:[ms.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new Nu(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ur(n){let e=n.field(Hn.state,!1);return e?e.tree:ht.empty}class bP{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let Po=null;class Pu{constructor(e,t,r=[],s,l,a,u,h){this.parser=e,this.state=t,this.fragments=r,this.tree=s,this.treeLen=l,this.viewport=a,this.skipped=u,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Pu(e,t,[],ht.empty,0,r,[],null)}startParse(){return this.parser.startParse(new bP(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=ht.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Bi.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Bi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Po;Po=this;try{return e()}finally{Po=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=dy(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:s,treeLen:l,viewport:a,skipped:u}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((d,p,m,v)=>h.push({fromA:d,toA:p,fromB:m,toB:v})),r=Bi.applyChanges(r,h),s=ht.empty,l=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){u=[];for(let d of this.skipped){let p=e.mapPos(d.from,1),m=e.mapPos(d.to,-1);p<m&&u.push({from:p,to:m})}}}return new Pu(this.parser,t,r,s,l,a,u,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:s,to:l}=this.skipped[r];s<e.to&&l>e.from&&(this.fragments=dy(this.fragments,s,l),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Wv{createParse(t,r,s){let l=s[0].from,a=s[s.length-1].to;return{parsedPos:l,advance(){let h=Po;if(h){for(let d of s)h.tempSkipped.push(d);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=a,new ht(rn.none,[],[],a-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Po}}function dy(n,e,t){return Bi.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Es{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Es(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Pu.create(e.facet(Ms).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Es(r)}}Hn.state=Vi.define({create:Es.init,update(n,e){for(let t of e.effects)if(t.is(Hn.setState))return t.value;return e.startState.facet(Ms)!=e.state.facet(Ms)?Es.init(e.state):n.apply(e)}});let Zv=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Zv=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const sf=typeof navigator<"u"&&(!((rf=navigator.scheduling)===null||rf===void 0)&&rf.isInputPending)?()=>navigator.scheduling.isInputPending():null,SP=Vn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Hn.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Hn.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Zv(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:s}}=this.view,l=r.field(Hn.state);if(l.tree==l.context.tree&&l.context.isDone(s+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!sf?Math.max(25,e.timeRemaining()-5):1e9),u=l.context.treeLen<s&&r.doc.length>s+1e3,h=l.context.work(()=>sf&&sf()||Date.now()>a,s+(u?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:Hn.setState.of(new Es(l.context))})),this.chunkBudget>0&&!(h&&!u)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>lr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Ms=we.define({combine(n){return n.length?n[0]:null},enables:n=>[Hn.state,SP,Te.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class CP{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const OP=we.define(),Qd=we.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Tu(n){let e=n.facet(Qd);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Au(n,e){let t="",r=n.tabSize,s=n.facet(Qd)[0];if(s=="	"){for(;e>=r;)t+="	",e-=r;s=" "}for(let l=0;l<e;l++)t+=s;return t}function e1(n,e){n instanceof Fe&&(n=new Wu(n));for(let r of n.state.facet(OP)){let s=r(n,e);if(s!==void 0)return s}let t=ur(n.state);return t.length>=e?NP(n,t,e):null}class Wu{constructor(e,t={}){this.state=e,this.options=t,this.unit=Tu(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:l}=this.options;return s!=null&&s>=r.from&&s<=r.to?l&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:r.text.slice(s-r.from),from:s}:{text:r.text.slice(0,s-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:s}=this.lineAt(e,t);return r.slice(e-s,Math.min(r.length,e+100-s))}column(e,t=1){let{text:r,from:s}=this.lineAt(e,t),l=this.countColumn(r,e-s),a=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return a>-1&&(l+=a-this.countColumn(r,r.search(/\S|$/))),l}countColumn(e,t=e.length){return Lu(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:s}=this.lineAt(e,t),l=this.options.overrideIndentation;if(l){let a=l(s);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const t1=new Re;function NP(n,e,t){let r=e.resolveStack(t),s=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(s!=r.node){let l=[];for(let a=s;a&&!(a.from<r.node.from||a.to>r.node.to||a.from==r.node.from&&a.type==r.node.type);a=a.parent)l.push(a);for(let a=l.length-1;a>=0;a--)r={node:l[a],next:r}}return n1(r,n,t)}function n1(n,e,t){for(let r=n;r;r=r.next){let s=TP(r.node);if(s)return s($d.create(e,t,r))}return 0}function PP(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function TP(n){let e=n.type.prop(t1);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Re.closedBy))){let s=n.lastChild,l=s&&r.indexOf(s.name)>-1;return a=>r1(a,!0,1,void 0,l&&!PP(a)?s.from:void 0)}return n.parent==null?AP:null}function AP(){return 0}class $d extends Wu{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new $d(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(EP(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return n1(this.context.next,this.base,this.pos)}}function EP(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function MP(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,l=n.state.doc.lineAt(t.from),a=s==null||s<=l.from?l.to:Math.min(l.to,s);for(let u=t.to;;){let h=e.childAfter(u);if(!h||h==r)return null;if(!h.type.isSkipped){if(h.from>=a)return null;let d=/^ */.exec(l.text.slice(t.to-l.from))[0].length;return{from:t.from,to:t.to+d}}u=h.to}}function py({closing:n,align:e=!0,units:t=1}){return r=>r1(r,e,t,n)}function r1(n,e,t,r,s){let l=n.textAfter,a=l.match(/^\s*/)[0].length,u=r&&l.slice(a,a+r.length)==r||s==n.pos+a,h=e?MP(n):null;return h?u?n.column(h.from):n.column(h.to):n.baseIndent+(u?0:n.unit*t)}const RP=new Re;function DP(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}class Vu{constructor(e,t){this.specs=e;let r;function s(u){let h=ai.newName();return(r||(r=Object.create(null)))["."+h]=u,h}const l=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,a=t.scope;this.scope=a instanceof Hn?u=>u.prop(ms)==a.data:a?u=>u==a:void 0,this.style=$v(e.map(u=>({tag:u.tag,class:u.class||s(Object.assign({},u,{tag:null}))})),{all:l}).style,this.module=r?new ai(r):null,this.themeType=t.themeType}static define(e,t){return new Vu(e,t||{})}}const id=we.define(),jP=we.define({combine(n){return n.length?[n[0]]:null}});function of(n){let e=n.facet(id);return e.length?e:n.facet(jP)}function LP(n,e){let t=[BP],r;return n instanceof Vu&&(n.module&&t.push(Te.styleModule.of(n.module)),r=n.themeType),r?t.push(id.computeN([Te.darkTheme],s=>s.facet(Te.darkTheme)==(r=="dark")?[n]:[])):t.push(id.of(n)),t}class IP{constructor(e){this.markCache=Object.create(null),this.tree=ur(e.state),this.decorations=this.buildDeco(e,of(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ur(e.state),r=of(e.state),s=r!=of(e.startState),{viewport:l}=e.view,a=e.changes.mapPos(this.decoratedTo,1);t.length<l.to&&!s&&t.type==this.tree.type&&a>=l.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=l.to)}buildDeco(e,t){if(!t||!this.tree.length)return it.none;let r=new Jo;for(let{from:s,to:l}of e.visibleRanges)VN(this.tree,t,(a,u,h)=>{r.add(a,u,this.markCache[h]||(this.markCache[h]=it.mark({class:h})))},s,l);return r.finish()}}const BP=ju.high(Vn.fromClass(IP,{decorations:n=>n.decorations})),zP=1e4,FP="()[]{}",_P=new Re;function sd(n,e,t){let r=n.prop(e<0?Re.openedBy:Re.closedBy);if(r)return r;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function od(n){let e=n.type.prop(_P);return e?e(n.node):n}function ys(n,e,t,r={}){let s=r.maxScanDistance||zP,l=r.brackets||FP,a=ur(n),u=a.resolveInner(e,t);for(let h=u;h;h=h.parent){let d=sd(h.type,t,l);if(d&&h.from<h.to){let p=od(h);if(p&&(t>0?e>=p.from&&e<p.to:e>p.from&&e<=p.to))return HP(n,e,t,h,p,d,l)}}return WP(n,e,t,a,u.type,s,l)}function HP(n,e,t,r,s,l,a){let u=r.parent,h={from:s.from,to:s.to},d=0,p=u==null?void 0:u.cursor();if(p&&(t<0?p.childBefore(r.from):p.childAfter(r.to)))do if(t<0?p.to<=r.from:p.from>=r.to){if(d==0&&l.indexOf(p.type.name)>-1&&p.from<p.to){let m=od(p);return{start:h,end:m?{from:m.from,to:m.to}:void 0,matched:!0}}else if(sd(p.type,t,a))d++;else if(sd(p.type,-t,a)){if(d==0){let m=od(p);return{start:h,end:m&&m.from<m.to?{from:m.from,to:m.to}:void 0,matched:!1}}d--}}while(t<0?p.prevSibling():p.nextSibling());return{start:h,matched:!1}}function WP(n,e,t,r,s,l,a){let u=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),h=a.indexOf(u);if(h<0||h%2==0!=t>0)return null;let d={from:t<0?e-1:e,to:t>0?e+1:e},p=n.doc.iterRange(e,t>0?n.doc.length:0),m=0;for(let v=0;!p.next().done&&v<=l;){let k=p.value;t<0&&(v+=k.length);let b=e+v*t;for(let C=t>0?0:k.length-1,O=t>0?k.length:-1;C!=O;C+=t){let T=a.indexOf(k[C]);if(!(T<0||r.resolveInner(b+C,1).type!=s))if(T%2==0==t>0)m++;else{if(m==1)return{start:d,end:{from:b+C,to:b+C+1},matched:T>>1==h>>1};m--}}t>0&&(v+=k.length)}return p.done?{start:d,matched:!1}:null}const VP=Object.create(null),gy=[rn.none],my=[],yy=Object.create(null),QP=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])QP[n]=$P(VP,e);function lf(n,e){my.indexOf(n)>-1||(my.push(n),console.warn(e))}function $P(n,e){let t=[];for(let u of e.split(" ")){let h=[];for(let d of u.split(".")){let p=n[d]||U[d];p?typeof p=="function"?h.length?h=h.map(p):lf(d,`Modifier ${d} used at start of tag`):h.length?lf(d,`Tag ${d} used as modifier`):h=Array.isArray(p)?p:[p]:lf(d,`Unknown highlighting tag ${d}`)}for(let d of h)t.push(d)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),s=r+" "+t.map(u=>u.id),l=yy[s];if(l)return l.id;let a=yy[s]=rn.define({id:gy.length,name:r,props:[Vv({[r]:t})]});return gy.push(a),a.id}Ye.RTL,Ye.LTR;const UP=Nu.define({name:"yaml",parser:vP.configure({props:[t1.add({Stream:n=>{for(let e=n.node.resolve(n.pos,-1);e&&e.to>=n.pos;e=e.parent){if(e.name=="BlockLiteralContent"&&e.from<e.to)return n.baseIndentFor(e);if(e.name=="BlockLiteral")return n.baseIndentFor(e)+n.unit;if(e.name=="BlockSequence"||e.name=="BlockMapping")return n.column(e.from,1);if(e.name=="QuotedLiteral")return null;if(e.name=="Literal"){let t=n.column(e.from,1);if(t==n.lineIndent(e.from,1))return t;if(e.to>n.pos)return null}}return null},FlowMapping:py({closing:"}"}),FlowSequence:py({closing:"]"})}),RP.add({"FlowMapping FlowSequence":DP,"Item Pair BlockLiteral":(n,e)=>({from:e.doc.lineAt(n.from).to,to:n.to})})]}),languageData:{commentTokens:{line:"#"},indentOnInput:/^\s*[\]\}]$/}});function XP(){return new CP(UP)}const KP="#e5c07b",xy="#e06c75",qP="#56b6c2",GP="#ffffff",ru="#abb2bf",ld="#7d8799",YP="#61afef",JP="#98c379",vy="#d19a66",ZP="#c678dd",eT="#21252b",ky="#2c313a",wy="#282c34",af="#353a42",tT="#3E4451",by="#528bff",nT=Te.theme({"&":{color:ru,backgroundColor:wy},".cm-content":{caretColor:by},".cm-cursor, .cm-dropCursor":{borderLeftColor:by},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:tT},".cm-panels":{backgroundColor:eT,color:ru},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:wy,color:ld,border:"none"},".cm-activeLineGutter":{backgroundColor:ky},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:af},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:af,borderBottomColor:af},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:ky,color:ru}}},{dark:!0}),rT=Vu.define([{tag:U.keyword,color:ZP},{tag:[U.name,U.deleted,U.character,U.propertyName,U.macroName],color:xy},{tag:[U.function(U.variableName),U.labelName],color:YP},{tag:[U.color,U.constant(U.name),U.standard(U.name)],color:vy},{tag:[U.definition(U.name),U.separator],color:ru},{tag:[U.typeName,U.className,U.number,U.changed,U.annotation,U.modifier,U.self,U.namespace],color:KP},{tag:[U.operator,U.operatorKeyword,U.url,U.escape,U.regexp,U.link,U.special(U.string)],color:qP},{tag:[U.meta,U.comment],color:ld},{tag:U.strong,fontWeight:"bold"},{tag:U.emphasis,fontStyle:"italic"},{tag:U.strikethrough,textDecoration:"line-through"},{tag:U.link,color:ld,textDecoration:"underline"},{tag:U.heading,fontWeight:"bold",color:xy},{tag:[U.atom,U.bool,U.special(U.variableName)],color:vy},{tag:[U.processingInstruction,U.string,U.inserted],color:JP},{tag:U.invalid,color:GP}]),iT=[nT,LP(rT)],sT=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=Xd(n.state,t.from);return r.line?oT(n):r.block?aT(n):!1};function Ud(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(r(t.update(s)),!0):!1}}const oT=Ud(hT,0),lT=Ud(i1,0),aT=Ud((n,e)=>i1(n,e,cT(e)),0);function Xd(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const To=50;function uT(n,{open:e,close:t},r,s){let l=n.sliceDoc(r-To,r),a=n.sliceDoc(s,s+To),u=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(a)[0].length,d=l.length-u;if(l.slice(d-e.length,d)==e&&a.slice(h,h+t.length)==t)return{open:{pos:r-u,margin:u&&1},close:{pos:s+h,margin:h&&1}};let p,m;s-r<=2*To?p=m=n.sliceDoc(r,s):(p=n.sliceDoc(r,r+To),m=n.sliceDoc(s-To,s));let v=/^\s*/.exec(p)[0].length,k=/\s*$/.exec(m)[0].length,b=m.length-k-t.length;return p.slice(v,v+e.length)==e&&m.slice(b,b+t.length)==t?{open:{pos:r+v+e.length,margin:/\s/.test(p.charAt(v+e.length))?1:0},close:{pos:s-k-t.length,margin:/\s/.test(m.charAt(b-1))?1:0}}:null}function cT(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),s=t.to<=r.to?r:n.doc.lineAt(t.to);s.from>r.from&&s.from==t.to&&(s=t.to==r.to+1?r:n.doc.lineAt(t.to-1));let l=e.length-1;l>=0&&e[l].to>r.from?e[l].to=s.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:s.to})}return e}function i1(n,e,t=e.selection.ranges){let r=t.map(l=>Xd(e,l.from).block);if(!r.every(l=>l))return null;let s=t.map((l,a)=>uT(e,r[a],l.from,l.to));if(n!=2&&!s.every(l=>l))return{changes:e.changes(t.map((l,a)=>s[a]?[]:[{from:l.from,insert:r[a].open+" "},{from:l.to,insert:" "+r[a].close}]))};if(n!=1&&s.some(l=>l)){let l=[];for(let a=0,u;a<s.length;a++)if(u=s[a]){let h=r[a],{open:d,close:p}=u;l.push({from:d.pos-h.open.length,to:d.pos+d.margin},{from:p.pos-p.margin,to:p.pos+h.close.length})}return{changes:l}}return null}function hT(n,e,t=e.selection.ranges){let r=[],s=-1;e:for(let{from:l,to:a}of t){let u=r.length,h=1e9,d;for(let p=l;p<=a;){let m=e.doc.lineAt(p);if(d==null&&(d=Xd(e,m.from).line,!d))continue e;if(m.from>s&&(l==a||a>m.from)){s=m.from;let v=/^\s*/.exec(m.text)[0].length,k=v==m.length,b=m.text.slice(v,v+d.length)==d?v:-1;v<m.text.length&&v<h&&(h=v),r.push({line:m,comment:b,token:d,indent:v,empty:k,single:!1})}p=m.to+1}if(h<1e9)for(let p=u;p<r.length;p++)r[p].indent<r[p].line.text.length&&(r[p].indent=h);r.length==u+1&&(r[u].single=!0)}if(n!=2&&r.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:u,token:h,indent:d,empty:p,single:m}of r)(m||!p)&&l.push({from:u.from+d,insert:h+" "});let a=e.changes(l);return{changes:a,selection:e.selection.map(a,1)}}else if(n!=1&&r.some(l=>l.comment>=0)){let l=[];for(let{line:a,comment:u,token:h}of r)if(u>=0){let d=a.from+u,p=d+h.length;a.text[p-a.from]==" "&&p++,l.push({from:d,to:p})}return{changes:l}}return null}function zs(n,e){return ie.create(n.ranges.map(e),n.mainIndex)}function $n(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Un({state:n,dispatch:e},t){let r=zs(n.selection,t);return r.eq(n.selection,!0)?!1:(e($n(n,r)),!0)}function Qu(n,e){return ie.cursor(e?n.to:n.from)}function s1(n,e){return Un(n,t=>t.empty?n.moveByChar(t,e):Qu(t,e))}function Wt(n){return n.textDirectionAt(n.state.selection.main.head)==Ye.LTR}const o1=n=>s1(n,!Wt(n)),l1=n=>s1(n,Wt(n));function a1(n,e){return Un(n,t=>t.empty?n.moveByGroup(t,e):Qu(t,e))}const fT=n=>a1(n,!Wt(n)),dT=n=>a1(n,Wt(n));function pT(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function $u(n,e,t){let r=ur(n).resolveInner(e.head),s=t?Re.closedBy:Re.openedBy;for(let h=e.head;;){let d=t?r.childAfter(h):r.childBefore(h);if(!d)break;pT(n,d,s)?r=d:h=t?d.to:d.from}let l=r.type.prop(s),a,u;return l&&(a=t?ys(n,r.from,1):ys(n,r.to,-1))&&a.matched?u=t?a.end.to:a.end.from:u=t?r.to:r.from,ie.cursor(u,t?-1:1)}const gT=n=>Un(n,e=>$u(n.state,e,!Wt(n))),mT=n=>Un(n,e=>$u(n.state,e,Wt(n)));function u1(n,e){return Un(n,t=>{if(!t.empty)return Qu(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const c1=n=>u1(n,!1),h1=n=>u1(n,!0);function f1(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,s;if(e){for(let l of n.state.facet(Te.scrollMargins)){let a=l(n);a!=null&&a.top&&(t=Math.max(a==null?void 0:a.top,t)),a!=null&&a.bottom&&(r=Math.max(a==null?void 0:a.bottom,r))}s=n.scrollDOM.clientHeight-t-r}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function d1(n,e){let t=f1(n),{state:r}=n,s=zs(r.selection,a=>a.empty?n.moveVertically(a,e,t.height):Qu(a,e));if(s.eq(r.selection))return!1;let l;if(t.selfScroll){let a=n.coordsAtPos(r.selection.main.head),u=n.scrollDOM.getBoundingClientRect(),h=u.top+t.marginTop,d=u.bottom-t.marginBottom;a&&a.top>h&&a.bottom<d&&(l=Te.scrollIntoView(s.main.head,{y:"start",yMargin:a.top-h}))}return n.dispatch($n(r,s),{effects:l}),!0}const Sy=n=>d1(n,!1),ad=n=>d1(n,!0);function di(n,e,t){let r=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?r.to:r.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==r.from&&r.length){let l=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;l&&e.head!=r.from+l&&(s=ie.cursor(r.from+l))}return s}const yT=n=>Un(n,e=>di(n,e,!0)),xT=n=>Un(n,e=>di(n,e,!1)),vT=n=>Un(n,e=>di(n,e,!Wt(n))),kT=n=>Un(n,e=>di(n,e,Wt(n))),wT=n=>Un(n,e=>ie.cursor(n.lineBlockAt(e.head).from,1)),bT=n=>Un(n,e=>ie.cursor(n.lineBlockAt(e.head).to,-1));function ST(n,e,t){let r=!1,s=zs(n.selection,l=>{let a=ys(n,l.head,-1)||ys(n,l.head,1)||l.head>0&&ys(n,l.head-1,1)||l.head<n.doc.length&&ys(n,l.head+1,-1);if(!a||!a.end)return l;r=!0;let u=a.start.from==l.head?a.end.to:a.end.from;return ie.cursor(u)});return r?(e($n(n,s)),!0):!1}const CT=({state:n,dispatch:e})=>ST(n,e);function Pn(n,e){let t=zs(n.state.selection,r=>{let s=e(r);return ie.range(r.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch($n(n.state,t)),!0)}function p1(n,e){return Pn(n,t=>n.moveByChar(t,e))}const g1=n=>p1(n,!Wt(n)),m1=n=>p1(n,Wt(n));function y1(n,e){return Pn(n,t=>n.moveByGroup(t,e))}const OT=n=>y1(n,!Wt(n)),NT=n=>y1(n,Wt(n)),PT=n=>Pn(n,e=>$u(n.state,e,!Wt(n))),TT=n=>Pn(n,e=>$u(n.state,e,Wt(n)));function x1(n,e){return Pn(n,t=>n.moveVertically(t,e))}const v1=n=>x1(n,!1),k1=n=>x1(n,!0);function w1(n,e){return Pn(n,t=>n.moveVertically(t,e,f1(n).height))}const Cy=n=>w1(n,!1),Oy=n=>w1(n,!0),AT=n=>Pn(n,e=>di(n,e,!0)),ET=n=>Pn(n,e=>di(n,e,!1)),MT=n=>Pn(n,e=>di(n,e,!Wt(n))),RT=n=>Pn(n,e=>di(n,e,Wt(n))),DT=n=>Pn(n,e=>ie.cursor(n.lineBlockAt(e.head).from)),jT=n=>Pn(n,e=>ie.cursor(n.lineBlockAt(e.head).to)),Ny=({state:n,dispatch:e})=>(e($n(n,{anchor:0})),!0),Py=({state:n,dispatch:e})=>(e($n(n,{anchor:n.doc.length})),!0),Ty=({state:n,dispatch:e})=>(e($n(n,{anchor:n.selection.main.anchor,head:0})),!0),Ay=({state:n,dispatch:e})=>(e($n(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),LT=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),IT=({state:n,dispatch:e})=>{let t=Uu(n).map(({from:r,to:s})=>ie.range(r,Math.min(s+1,n.doc.length)));return e(n.update({selection:ie.create(t),userEvent:"select"})),!0},BT=({state:n,dispatch:e})=>{let t=zs(n.selection,r=>{let s=ur(n),l=s.resolveStack(r.from,1);if(r.empty){let a=s.resolveStack(r.from,-1);a.node.from>=l.node.from&&a.node.to<=l.node.to&&(l=a)}for(let a=l;a;a=a.next){let{node:u}=a;if((u.from<r.from&&u.to>=r.to||u.to>r.to&&u.from<=r.from)&&a.next)return ie.range(u.to,u.from)}return r});return t.eq(n.selection)?!1:(e($n(n,t)),!0)};function b1(n,e){let{state:t}=n,r=t.selection,s=t.selection.ranges.slice();for(let l of t.selection.ranges){let a=t.doc.lineAt(l.head);if(e?a.to<n.state.doc.length:a.from>0)for(let u=l;;){let h=n.moveVertically(u,e);if(h.head<a.from||h.head>a.to){s.some(d=>d.head==h.head)||s.push(h);break}else{if(h.head==u.head)break;u=h}}}return s.length==r.ranges.length?!1:(n.dispatch($n(t,ie.create(s,s.length-1))),!0)}const zT=n=>b1(n,!1),FT=n=>b1(n,!0),_T=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=ie.create([t.main]):t.main.empty||(r=ie.create([ie.cursor(t.main.head)])),r?(e($n(n,r)),!0):!1};function yl(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,s=r.changeByRange(l=>{let{from:a,to:u}=l;if(a==u){let h=e(l);h<a?(t="delete.backward",h=Qa(n,h,!1)):h>a&&(t="delete.forward",h=Qa(n,h,!0)),a=Math.min(a,h),u=Math.max(u,h)}else a=Qa(n,a,!1),u=Qa(n,u,!0);return a==u?{range:l}:{changes:{from:a,to:u},range:ie.cursor(a,a<l.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(r.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Te.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Qa(n,e,t){if(n instanceof Te)for(let r of n.state.facet(Te.atomicRanges).map(s=>s(n)))r.between(e,e,(s,l)=>{s<e&&l>e&&(e=t?l:s)});return e}const S1=(n,e,t)=>yl(n,r=>{let s=r.from,{state:l}=n,a=l.doc.lineAt(s),u,h;if(t&&!e&&s>a.from&&s<a.from+200&&!/[^ \t]/.test(u=a.text.slice(0,s-a.from))){if(u[u.length-1]=="	")return s-1;let d=Lu(u,l.tabSize),p=d%Tu(l)||Tu(l);for(let m=0;m<p&&u[u.length-1-m]==" ";m++)s--;h=s}else h=_t(a.text,s-a.from,e,e)+a.from,h==s&&a.number!=(e?l.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(h-a.from,s-a.from))&&(h=_t(a.text,h-a.from,!1,!1)+a.from);return h}),ud=n=>S1(n,!1,!0),C1=n=>S1(n,!0,!1),O1=(n,e)=>yl(n,t=>{let r=t.head,{state:s}=n,l=s.doc.lineAt(r),a=s.charCategorizer(r);for(let u=null;;){if(r==(e?l.to:l.from)){r==t.head&&l.number!=(e?s.doc.lines:1)&&(r+=e?1:-1);break}let h=_t(l.text,r-l.from,e)+l.from,d=l.text.slice(Math.min(r,h)-l.from,Math.max(r,h)-l.from),p=a(d);if(u!=null&&p!=u)break;(d!=" "||r!=t.head)&&(u=p),r=h}return r}),N1=n=>O1(n,!1),HT=n=>O1(n,!0),WT=n=>yl(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),VT=n=>yl(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),QT=n=>yl(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),$T=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Be.of(["",""])},range:ie.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},UT=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let s=r.from,l=n.doc.lineAt(s),a=s==l.from?s-1:_t(l.text,s-l.from,!1)+l.from,u=s==l.to?s+1:_t(l.text,s-l.from,!0)+l.from;return{changes:{from:a,to:u,insert:n.doc.slice(s,u).append(n.doc.slice(a,s))},range:ie.cursor(u)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Uu(n){let e=[],t=-1;for(let r of n.selection.ranges){let s=n.doc.lineAt(r.from),l=n.doc.lineAt(r.to);if(!r.empty&&r.to==l.from&&(l=n.doc.lineAt(r.to-1)),t>=s.number){let a=e[e.length-1];a.to=l.to,a.ranges.push(r)}else e.push({from:s.from,to:l.to,ranges:[r]});t=l.number+1}return e}function P1(n,e,t){if(n.readOnly)return!1;let r=[],s=[];for(let l of Uu(n)){if(t?l.to==n.doc.length:l.from==0)continue;let a=n.doc.lineAt(t?l.to+1:l.from-1),u=a.length+1;if(t){r.push({from:l.to,to:a.to},{from:l.from,insert:a.text+n.lineBreak});for(let h of l.ranges)s.push(ie.range(Math.min(n.doc.length,h.anchor+u),Math.min(n.doc.length,h.head+u)))}else{r.push({from:a.from,to:l.from},{from:l.to,insert:n.lineBreak+a.text});for(let h of l.ranges)s.push(ie.range(h.anchor-u,h.head-u))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:ie.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const XT=({state:n,dispatch:e})=>P1(n,e,!1),KT=({state:n,dispatch:e})=>P1(n,e,!0);function T1(n,e,t){if(n.readOnly)return!1;let r=[];for(let l of Uu(n))t?r.push({from:l.from,insert:n.doc.slice(l.from,l.to)+n.lineBreak}):r.push({from:l.to,insert:n.lineBreak+n.doc.slice(l.from,l.to)});let s=n.changes(r);return e(n.update({changes:s,selection:n.selection.map(s,t?1:-1),scrollIntoView:!0,userEvent:"input.copyline"})),!0}const qT=({state:n,dispatch:e})=>T1(n,e,!1),GT=({state:n,dispatch:e})=>T1(n,e,!0),YT=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Uu(e).map(({from:s,to:l})=>(s>0?s--:l<e.doc.length&&l++,{from:s,to:l}))),r=zs(e.selection,s=>{let l;if(n.lineWrapping){let a=n.lineBlockAt(s.head),u=n.coordsAtPos(s.head,s.assoc||1);u&&(l=a.bottom+n.documentTop-u.bottom+n.defaultLineHeight/2)}return n.moveVertically(s,!0,l)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function JT(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ur(n).resolveInner(e),r=t.childBefore(e),s=t.childAfter(e),l;return r&&s&&r.to<=e&&s.from>=e&&(l=r.type.prop(Re.closedBy))&&l.indexOf(s.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(r.to,s.from))?{from:r.to,to:s.from}:null}const Ey=A1(!1),ZT=A1(!0);function A1(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(s=>{let{from:l,to:a}=s,u=e.doc.lineAt(l),h=!n&&l==a&&JT(e,l);n&&(l=a=(a<=u.to?u:e.doc.lineAt(a)).to);let d=new Wu(e,{simulateBreak:l,simulateDoubleBreak:!!h}),p=e1(d,l);for(p==null&&(p=Lu(/^\s*/.exec(e.doc.lineAt(l).text)[0],e.tabSize));a<u.to&&/\s/.test(u.text[a-u.from]);)a++;h?{from:l,to:a}=h:l>u.from&&l<u.from+100&&!/\S/.test(u.text.slice(0,l))&&(l=u.from);let m=["",Au(e,p)];return h&&m.push(Au(e,d.lineIndent(u.from,-1))),{changes:{from:l,to:a,insert:Be.of(m)},range:ie.cursor(l+1+m[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Kd(n,e){let t=-1;return n.changeByRange(r=>{let s=[];for(let a=r.from;a<=r.to;){let u=n.doc.lineAt(a);u.number>t&&(r.empty||r.to>u.from)&&(e(u,s,r),t=u.number),a=u.to+1}let l=n.changes(s);return{changes:s,range:ie.range(l.mapPos(r.anchor,1),l.mapPos(r.head,1))}})}const eA=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new Wu(n,{overrideIndentation:l=>{let a=t[l];return a??-1}}),s=Kd(n,(l,a,u)=>{let h=e1(r,l.from);if(h==null)return;/\S/.test(l.text)||(h=0);let d=/^\s*/.exec(l.text)[0],p=Au(n,h);(d!=p||u.from<l.from+d.length)&&(t[l.from]=h,a.push({from:l.from,to:l.from+d.length,insert:p}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},tA=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Kd(n,(t,r)=>{r.push({from:t.from,insert:n.facet(Qd)})}),{userEvent:"input.indent"})),!0),nA=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Kd(n,(t,r)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let l=Lu(s,n.tabSize),a=0,u=Au(n,Math.max(0,l-Tu(n)));for(;a<s.length&&a<u.length&&s.charCodeAt(a)==u.charCodeAt(a);)a++;r.push({from:t.from+a,to:t.from+s.length,insert:u.slice(a)})}),{userEvent:"delete.dedent"})),!0),rA=n=>(n.setTabFocusMode(),!0),iA=[{key:"Ctrl-b",run:o1,shift:g1,preventDefault:!0},{key:"Ctrl-f",run:l1,shift:m1},{key:"Ctrl-p",run:c1,shift:v1},{key:"Ctrl-n",run:h1,shift:k1},{key:"Ctrl-a",run:wT,shift:DT},{key:"Ctrl-e",run:bT,shift:jT},{key:"Ctrl-d",run:C1},{key:"Ctrl-h",run:ud},{key:"Ctrl-k",run:WT},{key:"Ctrl-Alt-h",run:N1},{key:"Ctrl-o",run:$T},{key:"Ctrl-t",run:UT},{key:"Ctrl-v",run:ad}],sA=[{key:"ArrowLeft",run:o1,shift:g1,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:fT,shift:OT,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:vT,shift:MT,preventDefault:!0},{key:"ArrowRight",run:l1,shift:m1,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:dT,shift:NT,preventDefault:!0},{mac:"Cmd-ArrowRight",run:kT,shift:RT,preventDefault:!0},{key:"ArrowUp",run:c1,shift:v1,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Ny,shift:Ty},{mac:"Ctrl-ArrowUp",run:Sy,shift:Cy},{key:"ArrowDown",run:h1,shift:k1,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Py,shift:Ay},{mac:"Ctrl-ArrowDown",run:ad,shift:Oy},{key:"PageUp",run:Sy,shift:Cy},{key:"PageDown",run:ad,shift:Oy},{key:"Home",run:xT,shift:ET,preventDefault:!0},{key:"Mod-Home",run:Ny,shift:Ty},{key:"End",run:yT,shift:AT,preventDefault:!0},{key:"Mod-End",run:Py,shift:Ay},{key:"Enter",run:Ey,shift:Ey},{key:"Mod-a",run:LT},{key:"Backspace",run:ud,shift:ud,preventDefault:!0},{key:"Delete",run:C1,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:N1,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:HT,preventDefault:!0},{mac:"Mod-Backspace",run:VT,preventDefault:!0},{mac:"Mod-Delete",run:QT,preventDefault:!0}].concat(iA.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),oA=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:gT,shift:PT},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:mT,shift:TT},{key:"Alt-ArrowUp",run:XT},{key:"Shift-Alt-ArrowUp",run:qT},{key:"Alt-ArrowDown",run:KT},{key:"Shift-Alt-ArrowDown",run:GT},{key:"Mod-Alt-ArrowUp",run:zT},{key:"Mod-Alt-ArrowDown",run:FT},{key:"Escape",run:_T},{key:"Mod-Enter",run:ZT},{key:"Alt-l",mac:"Ctrl-l",run:IT},{key:"Mod-i",run:BT,preventDefault:!0},{key:"Mod-[",run:nA},{key:"Mod-]",run:tA},{key:"Mod-Alt-\\",run:eA},{key:"Shift-Mod-k",run:YT},{key:"Shift-Mod-\\",run:CT},{key:"Mod-/",run:sT},{key:"Alt-A",run:lT},{key:"Ctrl-m",mac:"Shift-Alt-m",run:rA}].concat(sA),lA=n=>{const{state:e}=n,t=e.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:"	"},range:ie.cursor(r.from+1)}));return n.dispatch(t),!0},aA=Bd.of([{key:"Tab",run:lA}]);class uA extends Bs{toDOM(){const e=document.createElement("span");return e.className="cm-space-dot",e.textContent="",e}}class cA extends Bs{toDOM(){const e=document.createElement("span");return e.className="cm-tab-arrow",e.textContent="",e}}const hA=Vn.fromClass(class{constructor(n){Em(this,"decorations");this.decorations=this.buildDecorations(n)}update(n){(n.docChanged||n.viewportChanged)&&(this.decorations=this.buildDecorations(n.view))}buildDecorations(n){const e=[];for(const{from:t,to:r}of n.visibleRanges){const s=n.state.doc.sliceString(t,r);for(let l=0;l<s.length;l++){const a=s[l],u=t+l;a===" "?e.push({from:u,to:u+1,decoration:it.replace({widget:new uA})}):a==="	"&&e.push({from:u,to:u+1,decoration:it.replace({widget:new cA})})}}return it.set(e.map(t=>t.decoration.range(t.from,t.to)))}},{decorations:n=>n.decorations}),fA=Te.theme({"&":{backgroundColor:"#ffffff",color:"#000000"},".cm-content":{caretColor:"#000000"},".cm-gutters":{backgroundColor:"#f5f5f5",color:"#999999",border:"none"},".cm-activeLineGutter":{backgroundColor:"#e8e8e8"},".cm-activeLine":{backgroundColor:"#f0f0f0"},".cm-space-dot":{color:"#999999"},".cm-tab-arrow":{color:"#999999",display:"inline-block",width:"calc(4ch)",textAlign:"left"}}),dA=Te.theme({".cm-space-dot":{color:"#666666"},".cm-tab-arrow":{color:"#666666",display:"inline-block",width:"calc(4ch)",textAlign:"left"}});function My(n){switch(n){case"light":return[fA];case"dark":default:return[iT,dA]}}const pA=S.forwardRef(function({value:e,onChange:t,colorScheme:r,onFocusChange:s},l){const a=S.useRef(null),u=S.useRef(null),h=S.useRef(new fl),d=S.useRef(s);d.current=s,S.useImperativeHandle(l,()=>({focus:()=>{var m;(m=u.current)==null||m.focus()},blur:()=>{var m;(m=u.current)==null||m.contentDOM.blur()}}),[]),S.useEffect(()=>{if(!a.current||u.current)return;const m=Fe.create({doc:e,extensions:[yN(),kN(),oN(),nN(),XP(),aA,Bd.of(oA),Fe.tabSize.of(4),hA,Te.updateListener.of(v=>{var k;v.docChanged&&t(v.state.doc.toString()),v.focusChanged&&((k=d.current)==null||k.call(d,v.view.hasFocus))}),h.current.of(My(r)),Te.lineWrapping]});return u.current=new Te({state:m,parent:a.current}),()=>{var v;(v=u.current)==null||v.destroy(),u.current=null}},[]);const p=S.useCallback(m=>{const v=u.current;if(!v)return;const k=v.state.doc.toString();k!==m&&v.dispatch({changes:{from:0,to:k.length,insert:m}})},[]);return S.useEffect(()=>{p(e)},[e,p]),S.useEffect(()=>{const m=u.current;m&&m.dispatch({effects:h.current.reconfigure(My(r))})},[r]),x.jsx("div",{ref:a,className:"h-full w-full overflow-auto [&_.cm-editor]:h-full [&_.cm-scroller]:overflow-auto",style:{fontSize:"14px"}})});let $a=null,uf=null;async function E1(){return $a||(uf||(uf=(async()=>{const n=await fetch("/testsuite/tests.json");if(!n.ok)throw new Error(`Failed to load test suite: ${n.status}`);return $a=await n.json(),$a})()),uf)}function gA({isOpen:n,onClose:e,onSelect:t}){const[r,s]=S.useState([]),[l,a]=S.useState([]),[u,h]=S.useState(""),[d,p]=S.useState(!1),[m,v]=S.useState(null),[k,b]=S.useState(null),C=S.useRef(null);S.useEffect(()=>{n&&r.length===0&&!d&&(p(!0),E1().then(T=>{s(T.tests),a(T.tests),p(!1)}).catch(T=>{v(T.message),p(!1)}))},[n,r.length,d]),S.useEffect(()=>{n&&setTimeout(()=>{var T;return(T=C.current)==null?void 0:T.focus()},100)},[n]),S.useEffect(()=>{if(!u){a(r),b(null);return}try{const T=new RegExp(u,"i");b(null),a(r.filter(E=>T.test(E.id)||T.test(E.name)))}catch{b("Invalid regex"),a([])}},[u,r]),S.useEffect(()=>{const T=E=>{E.key==="Escape"&&n&&e()};return document.addEventListener("keydown",T),()=>document.removeEventListener("keydown",T)},[n,e]);const O=T=>{t(T.yaml),e(),h("")};return n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-[600px] max-h-[80vh] flex flex-col",children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Search"," ",x.jsx("a",{href:"https://github.com/yaml/yaml-test-suite/tree/data",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 underline",children:"YAML Test Suite"})]}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white transition-colors",children:"X"})]}),x.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[x.jsx("input",{ref:C,type:"text",placeholder:"Search by regex (e.g., 'block.*map' or 'spec example')",value:u,onChange:T=>h(T.target.value),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white rounded border border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:outline-none"}),k&&x.jsx("div",{className:"mt-1 text-red-600 dark:text-red-400 text-sm",children:k})]}),x.jsxs("div",{className:"flex-1 overflow-y-auto",children:[d&&x.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Loading tests..."}),m&&x.jsx("div",{className:"p-8 text-center text-red-600 dark:text-red-400",children:m}),!d&&!m&&l.map(T=>x.jsxs("button",{onClick:()=>O(T),className:"w-full px-4 py-3 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[x.jsx("span",{className:`font-mono ${T.error?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:T.id}),x.jsx("span",{className:"text-gray-500 dark:text-gray-400 mx-2",children:"-"}),x.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:T.name})]},T.id)),!d&&!m&&l.length===0&&u&&!k&&x.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No tests match your search"})]}),x.jsxs("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700 text-sm text-gray-500 flex justify-between",children:[x.jsxs("span",{children:[l.length," of ",r.length," tests"]}),x.jsx("span",{children:"(E) = expected parse error"})]})]})}):null}const mA={dark:"vs-dark",light:"light"},Uo=`# Edit this YAML and see how
# different parsers handle it.

# Green = matches reference parser
# Red = differs or errored

name: YAML Parser Playground

url: https://play.yaml.com/
repo:
  https://github.com/yaml/yaml-play

current parsers: 17
actively maintained: true

features:
- Compare outputs from multiple
  YAML parsers
- Search and load tests from the
  YAML Test Suite
- Select and drag output panes
- Click Help for shortcut keys
`,Ry=200,Dy=1600,jy=S.forwardRef(function({value:e,onChange:t,width:r,onWidthChange:s,colorScheme:l,editorType:a,showBorder:u=!0,heightMode:h="full",isMobile:d=!1,onSubmitPR:p,onSignIn:m,isGitHubAuthenticated:v=!1},k){const b=S.useRef(!1),C=S.useRef(0),O=S.useRef(0),T=S.useRef(null),E=S.useRef(null),[j,F]=S.useState(!1),[M,L]=S.useState(!1),[R,H]=S.useState(!1),V=S.useRef(null);S.useEffect(()=>{if(!M)return;const G=Q=>{V.current&&!V.current.contains(Q.target)&&L(!1)},se=Q=>{Q.key==="Escape"&&L(!1)};return document.addEventListener("mousedown",G),document.addEventListener("keydown",se),()=>{document.removeEventListener("mousedown",G),document.removeEventListener("keydown",se)}},[M]),S.useImperativeHandle(k,()=>({focus:()=>{var G,se;a==="codemirror"?(G=E.current)==null||G.focus():(se=T.current)==null||se.focus()},blur:()=>{var G,se,Q;a==="codemirror"?(G=E.current)==null||G.blur():(se=T.current)!=null&&se.getDomNode()&&((Q=document.activeElement)==null||Q.blur())}}),[a]);const W=S.useCallback(G=>{T.current=G;const se=G.getModel();se&&se.updateOptions({tabSize:4,insertSpaces:!1}),G.onDidFocusEditorText(()=>H(!0)),G.onDidBlurEditorText(()=>H(!1))},[]),q=S.useCallback(G=>{b.current=!0,C.current=G.clientX,O.current=r,document.body.style.cursor="col-resize",document.body.style.userSelect="none";const se=ee=>{if(!b.current)return;const J=ee.clientX-C.current,P=Math.min(Dy,Math.max(Ry,O.current+J));s(P)},Q=()=>{b.current=!1,document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",se),document.removeEventListener("mouseup",Q)};document.addEventListener("mousemove",se),document.addEventListener("mouseup",Q)},[r,s]),$=h==="full"?"h-full":"h-full overflow-hidden",Z=u?"border-r border-gray-300 dark:border-gray-700":"",ue=R?"ring-2 ring-blue-500 ring-inset":"",X=d?{}:{width:`${r}px`,minWidth:`${Ry}px`,maxWidth:`${Dy}px`};return x.jsxs("div",{className:`flex flex-col ${$} ${d?"w-full border-b border-gray-300 dark:border-gray-700":Z} ${ue} relative transition-shadow`,style:X,children:[x.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 py-2 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between",children:[x.jsx("h2",{className:`font-semibold transition-colors ${R?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-500"}`,children:R?"YAML Input Editor (editing)":"YAML Input Editor"}),x.jsxs("div",{className:"flex items-center gap-1",children:[!d&&(p||m)&&x.jsx("button",{onClick:()=>{v&&p?p():m&&m()},className:"text-gray-400 hover:text-gray-700 dark:hover:text-white p-1",title:"Submit to yaml-test-suite",children:x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),x.jsx("button",{onClick:()=>navigator.clipboard.writeText(e),className:"text-gray-400 hover:text-gray-700 dark:hover:text-white p-1",title:"Copy YAML",children:x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),x.jsxs("div",{className:"relative",ref:V,children:[x.jsx("button",{onClick:()=>L(!M),className:"text-gray-400 hover:text-gray-700 dark:hover:text-white p-1",title:"Menu",children:x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),M&&x.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[x.jsx("button",{onClick:()=>{L(!1),F(!0)},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Search Test Suite"}),x.jsx("button",{onClick:()=>{var G,se;L(!1),t(""),a==="codemirror"?(G=E.current)==null||G.focus():(se=T.current)==null||se.focus()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Clear"}),x.jsx("button",{onClick:()=>{L(!1),t(Uo)},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Default YAML"})]})]})]})]}),x.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:a==="codemirror"?x.jsx(pA,{ref:E,value:e,onChange:t,colorScheme:l,onFocusChange:H}):x.jsx(z2,{height:"100%",defaultLanguage:"yaml",defaultValue:Uo,value:e,onChange:G=>t(G||""),theme:mA[l],onMount:W,options:{minimap:{enabled:!1},fontSize:14,fontFamily:"'Consolas', 'Monaco', 'Courier New', monospace",lineNumbers:"on",renderWhitespace:"all",tabSize:4,insertSpaces:!1,detectIndentation:!1,useTabStops:!1,scrollBeyondLastLine:!1,wordWrap:"on",automaticLayout:!0}})}),!d&&x.jsx("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-blue-500 transition-colors",onMouseDown:q}),x.jsx(gA,{isOpen:j,onClose:()=>F(!1),onSelect:t})]})});function yA({parser:n,agrees:e,loading:t,onClose:r,onAddPane:s,isDraggable:l=!0,onInfoClick:a,onRunTestSuite:u,showTestSuite:h=!0,output:d,parseSuccess:p,isSelected:m=!1,onToggleSelection:v}){const[k,b]=S.useState(!1),C=S.useRef(null);S.useEffect(()=>{if(!k)return;const Z=X=>{C.current&&!C.current.contains(X.target)&&b(!1)},ue=X=>{X.key==="Escape"&&b(!1)};return document.addEventListener("mousedown",Z),document.addEventListener("keydown",ue),()=>{document.removeEventListener("mousedown",Z),document.removeEventListener("keydown",ue)}},[k]);const{attributes:O,listeners:T,setNodeRef:E,transform:j,transition:F,isDragging:M}=TS({id:n.id,disabled:!l}),L={transform:Ko.Transform.toString(j),transition:F,opacity:M?.5:1},R=t||p===void 0?"bg-gray-300":p?"bg-green-300":"bg-red-300",W=!(n.id==="refparse")&&!t&&e===!1?"border-red-600":t||p===void 0?"border-gray-300":e!==!1?"border-green-300":"border-red-300",q=`${n.name} v${n.version} (${n.language})`,$=Z=>{Z.stopPropagation(),b(!k)};return x.jsxs("div",{ref:E,style:L,className:`${R} ${W} border-4 px-3 py-2 flex items-center justify-between cursor-grab active:cursor-grabbing select-none`,...O,...T,children:[x.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[v&&x.jsx("input",{type:"checkbox",checked:m,onChange:Z=>{Z.stopPropagation(),v(),Z.currentTarget.blur()},onClick:Z=>Z.stopPropagation(),className:"w-4 h-4 text-blue-600 bg-white border-gray-500 rounded cursor-pointer",title:"Include in selected group (S)"}),x.jsx("span",{className:"text-gray-900 font-semibold",title:q,children:n.name})]}),x.jsxs("div",{className:"flex items-center gap-2",children:[t&&x.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-gray-700 border-t-transparent rounded-full"}),s&&x.jsx("button",{onClick:Z=>{Z.stopPropagation(),s()},className:"text-gray-700 hover:text-gray-500 p-1",title:"Add pane",children:x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),r&&x.jsx("button",{onClick:Z=>{Z.stopPropagation(),r()},className:"text-gray-700 hover:text-gray-500 text-lg leading-none px-1",title:"Close pane",children:""}),d&&x.jsx("button",{onClick:Z=>{Z.stopPropagation(),navigator.clipboard.writeText(d)},className:"text-gray-700 hover:text-gray-500 p-1",title:"Copy output",children:x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),x.jsxs("div",{className:"cursor-pointer relative",onClick:$,ref:C,children:[x.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),k&&x.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[140px]",children:[h&&x.jsx("button",{onClick:Z=>{Z.stopPropagation(),b(!1),u==null||u()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Test Suite"}),x.jsx("button",{onClick:Z=>{Z.stopPropagation(),b(!1),a==null||a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Parser Info"})]})]})]})]})}function xA({isOpen:n,onClose:e,parser:t}){return S.useEffect(()=>{if(!n)return;const r=s=>{s.key==="Escape"&&e()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",onClick:r=>r.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsx("div",{className:"p-4 space-y-3",children:x.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-sm",children:[t.repo&&x.jsxs(x.Fragment,{children:[x.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Repository"}),x.jsx("a",{href:t.repo,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline truncate",children:t.repo})]}),x.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Language"}),x.jsx("span",{className:"text-gray-900 dark:text-white",children:t.language}),x.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Version"}),x.jsx("span",{className:"text-gray-900 dark:text-white",children:t.version})]})})]})}):null}const Fs="https://localhost:7481",M1="https://yaml-play-oauth.ingy.workers.dev",iu="0.1.42";function vA(){return iu}async function kA(){try{return(await fetch(`${Fs}/`,{method:"HEAD"})).ok}catch{return!1}}async function R1(n,e,t){const r=`${Fs}/?version=${encodeURIComponent(iu)}&parser=yaml-test-parse-${n}`;try{const s=new URLSearchParams;s.append("text",e);const l=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!l.ok){const h=(await l.text()).match(/Requires sandbox version (\S+)/);if(h)return{status:-1,output:`Version mismatch: sandbox is ${h[1]}, but frontend requires ${iu}`,versionMismatch:{required:iu,found:h[1]}};throw new Error(`HTTP ${l.status}: ${l.statusText}`)}const a=await l.json();return{status:a.status,output:a.output}}catch(s){return s&&typeof s=="object"&&"versionMismatch"in s?s:{status:-1,output:s instanceof Error?s.message:"Unknown error"}}}async function qd(n){const e=`${Fs}/github-models`;try{const t=await fetch(e,{method:"GET",headers:{Authorization:`Bearer ${n}`}});if(!t.ok)throw new Error(`Failed to fetch GitHub models: ${t.statusText}`);return await t.json()}catch(t){return console.error("Error fetching GitHub models:",t),[]}}async function Ly(n){const e=`${Fs}/preview-pr`,t=new URLSearchParams;t.append("yaml",n.yaml),t.append("events",n.events),t.append("isError",n.isError?"true":"false"),t.append("model",n.model),t.append("githubToken",n.githubToken),n.testName&&t.append("testName",n.testName),n.currentTags&&n.currentTags.length>0&&t.append("currentTags",JSON.stringify(n.currentTags));const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!r.ok)throw new Error(`Failed to preview PR: ${r.statusText}`);return await r.json()}async function wA(n){const e=`${Fs}/generate-final-file`,t=new URLSearchParams;t.append("testName",n.testName),t.append("from",n.from),t.append("tags",JSON.stringify(n.tags)),t.append("yaml",n.yaml),t.append("events",n.events),t.append("isError",n.isError?"true":"false"),t.append("includeJson",n.includeJson?"true":"false"),t.append("includeDump",n.includeDump?"true":"false");const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!r.ok)throw new Error(`Failed to generate final file: ${r.statusText}`);return await r.json()}async function bA(n){const e=`${Fs}/submit-pr`,t=new URLSearchParams;t.append("token",n.token),t.append("testId",n.testId),t.append("testName",n.testName),t.append("yaml",n.yaml),t.append("events",n.events),t.append("isError",n.isError?"true":"false"),t.append("similarTests",JSON.stringify(n.similarTests)),t.append("tags",JSON.stringify(n.tags)),t.append("from",n.from);const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!r.ok)throw new Error(`Failed to submit PR: ${r.statusText}`);return await r.json()}async function SA(n){const e=`${M1}/device/code`;new URLSearchParams;const t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:void 0});if(!t.ok)throw new Error(`Failed to request device code: ${t.statusText}`);return await t.json()}async function CA(n,e){const t=`${M1}/device/token`,r=new URLSearchParams;r.append("device_code",e);const s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(!s.ok)throw new Error(`Failed to poll for token: ${s.statusText}`);return await s.json()}let cd=null,hd=null,Iy=!1;async function OA(){if(Iy)return;const[n,e,t,r,s]=await Promise.all([fetch("/refparse/prelude.js").then(a=>a.text()),fetch("/refparse/grammar.js").then(a=>a.text()),fetch("/refparse/parser.js").then(a=>a.text()),fetch("/refparse/receiver.js").then(a=>a.text()),fetch("/refparse/test-receiver.js").then(a=>a.text())]),l=eval;window.global=window,l(n),l(e),l(t),l(r),l(s),cd=window.Parser,hd=window.TestReceiver,Iy=!0}async function D1(n){try{if(await OA(),!hd)return{status:1,output:"TestReceiverClass not loaded"};if(!cd)return{status:1,output:"Parser not loaded"};const e=new hd,t=new cd(e);return t.parse(n),{status:0,output:t.receiver.output().replace(/\n$/,"")||"(empty output)"}}catch(e){return{status:1,output:e instanceof Error?e.message:String(e)}}}function By(n){return n.replace(/\s+(\{\}|\[\])$/mg,"").replace(/^=COMMENT .*\n?/mg,"").replace(/^[^+\-=].*\n?/gm,"").trim()}function j1(n,e,t){let r=By(n),s=By(e);if(t==="rustyaml"&&(s=s.replace(/<Tag\("!!", "(.*?)"\)>/g,"<tag:yaml.org,2002:$1>").replace(/<Tag\("!", "(.*?)"\)>/g,"<!$1>").replace(/<Tag\("", "!"\)>/g,"<!>").replace(/<Tag\("", "(tag:.*?)"\)>/g,"<$1>").replace(/<Tag\("", "(!.*?)"\)>/g,"<$1>"),r=r.replace(/^\+DOC ---/gm,"+DOC").replace(/^-DOC \.\.\./gm,"-DOC").replace(/^=VAL :$/gm,"=VAL :~").replace(/^\+MAP \{\}( ?)/gm,"+MAP$1").replace(/^\+SEQ \[\]( ?)/gm,"+SEQ$1"),s.match(/&1/))){let l=1,a;for(;a=r.match(/&([a-zA-Z]\S*)/);){const u=a[1];r=r.replace(new RegExp(`([&*])${u}`,"g"),`$1${l}`),l++}}if(t==="goyaml"){const l=r.split(`
`),a=s.split(`
`);l.length===a.length&&(s=a.map((h,d)=>l[d]==="+DOC"&&h==="+DOC ---"?"+DOC":h).join(`
`))}return r===s}const Rs="yaml-play-test-results-";function NA(n){try{const e=Rs+n,t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}}function PA(n,e){try{const t=Rs+n;localStorage.setItem(t,JSON.stringify(e))}catch{}}function jo(n){try{const e=Rs+n;localStorage.removeItem(e)}catch{}}function TA(n,e,t){return n?n.parserVersion===e&&n.testSuiteVersion===t:!1}function AA(){try{const n=[];for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&t.startsWith(Rs)&&n.push(t)}n.forEach(e=>localStorage.removeItem(e))}catch{}}function EA(){const n=[];try{for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);if(t&&t.startsWith(Rs)){const r=t.substring(Rs.length),s=localStorage.getItem(t);if(s){const l=JSON.parse(s);n.push({parserId:r,cache:l})}}}}catch{}return n}const L1="yaml-play-test-sort";function zy(){try{const n=localStorage.getItem(L1);if(n)return JSON.parse(n)}catch{}return{column:"id",direction:"asc"}}function MA(n){try{localStorage.setItem(L1,JSON.stringify(n))}catch{}}function fd({isOpen:n,onClose:e,parser:t,onSelectTest:r,forceRerun:s=!1,onCompare:l,onRunAgain:a,onClearCache:u}){const[h,d]=S.useState([]),[p,m]=S.useState([]),[v,k]=S.useState(!1),[b,C]=S.useState(null),[O,T]=S.useState(0),[E,j]=S.useState(zy),[F,M]=S.useState(!1),[L,R]=S.useState(!1),H=S.useRef(!1),V=S.useRef(!1),W=S.useRef(0),q=S.useRef(null),$=S.useRef(null),Z=S.useRef(null);S.useEffect(()=>{n&&(j(zy()),M(!1))},[n]),S.useEffect(()=>{if(!F)return;const ne=ce=>{Z.current&&!Z.current.contains(ce.target)&&M(!1)};return document.addEventListener("mousedown",ne),()=>document.removeEventListener("mousedown",ne)},[F]);const ue=S.useCallback((ne,ce)=>{const be=[...ne];return be.sort((Ne,ke)=>{let Ae=0;switch(ce.column){case"ok":Ae=(Ne.passed?1:0)-(ke.passed?1:0);break;case"id":Ae=Ne.testId.localeCompare(ke.testId);break;case"description":Ae=Ne.testName.localeCompare(ke.testName);break}return ce.direction==="asc"?Ae:-Ae}),be},[]),X=ne=>{const ce={column:ne,direction:E.column===ne&&E.direction==="asc"?"desc":"asc"};j(ce),MA(ce)},G=ne=>E.column!==ne?null:E.direction==="asc"?" ":" ",se=v?p:ue(p,E);S.useEffect(()=>{if(!n){V.current=!1,R(!1),$.current&&(clearInterval($.current),$.current=null);return}if(H.current=!1,C(null),m([]),T(0),d([]),!V.current)return V.current=!0,k(!0),R(!0),W.current=Date.now(),$.current=window.setInterval(()=>{T(Date.now()-W.current)},10),()=>{H.current=!0,$.current&&(clearInterval($.current),$.current=null)}},[n,t.id,t.version,s]),S.useEffect(()=>{if(!L||!n)return;R(!1),(async()=>{try{const ce=await E1();if(H.current){k(!1),V.current=!1,$.current&&(clearInterval($.current),$.current=null);return}d(ce.tests);const be=NA(t.id);if(!s&&TA(be,t.version,ce.version)){const ke=be.results.map(Ae=>{const _e=ce.tests.find(We=>We.id===Ae.testId);return{testId:Ae.testId,testName:(_e==null?void 0:_e.name)||Ae.testId,passed:Ae.passed}});m(ke),k(!1),V.current=!1,$.current&&(clearInterval($.current),$.current=null);return}s&&jo(t.id);const Ne=[];for(let ke=0;ke<ce.tests.length&&!H.current;ke++){const Ae=ce.tests[ke];m(Ke=>[...Ke,{testId:Ae.id,testName:Ae.name,passed:!1,running:!0}]);let _e;if(t.id==="refparse"){const Ke=await D1(Ae.yaml);_e={status:Ke.status,output:Ke.output}}else _e=await R1(t.id,Ae.yaml,t.version);if(H.current)break;let We;Ae.error?We=_e.status!==0:We=_e.status===0&&j1(Ae.expected,_e.output,t.id),m(Ke=>{const he=[...Ke];return he.length>0&&(he[he.length-1]={testId:Ae.id,testName:Ae.name,passed:We,running:!1}),he}),Ne.push({testId:Ae.id,passed:We}),setTimeout(()=>{q.current&&(q.current.scrollTop=q.current.scrollHeight)},0)}if(!H.current&&Ne.length===ce.tests.length){const ke=Date.now()-W.current,Ae={parserVersion:t.version,testSuiteVersion:ce.version,results:Ne,elapsedTime:ke};PA(t.id,Ae)}}catch(ce){C(ce instanceof Error?ce.message:"Unknown error")}finally{$.current&&(clearInterval($.current),$.current=null),k(!1),V.current=!1,setTimeout(()=>{q.current&&(q.current.scrollTop=0)},0)}})()},[L,n,t.id,t.version,s]),S.useEffect(()=>{if(!n)return;const ne=ce=>{ce.key==="Escape"&&(F?M(!1):(H.current=!0,e())),ce.key.toUpperCase()==="C"&&!ce.ctrlKey&&!ce.metaKey&&!ce.altKey&&!v&&l&&(e(),l())};return document.addEventListener("keydown",ne),()=>document.removeEventListener("keydown",ne)},[n,e,v,l,F]);const Q=ne=>{H.current=!0,r(ne.yaml),e()},ee=()=>{H.current=!0,e()};if(!n)return null;const J=p.filter(ne=>ne.passed&&!ne.running).length,P=p.filter(ne=>!ne.passed&&!ne.running).length,I=h.length,le=I>0?Math.round(p.length/I*100):0,pe=I>0?(J/I*100).toFixed(1):"0.0",me=ne=>{const ce=Math.floor(ne/1e3),be=Math.floor(ne%1e3/10);return`${ce}.${be.toString().padStart(2,"0")}s`};return x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:ee,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] flex flex-col",onClick:ne=>ne.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.name," - Test Suite"]}),x.jsx("button",{onClick:ee,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center gap-4",children:[x.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["Pass: ",J]}),x.jsxs("span",{className:"text-red-600 dark:text-red-400",children:["Fail: ",P]}),x.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Total: ",I]}),v?x.jsxs("span",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-2",children:[x.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 dark:border-blue-400 border-t-transparent rounded-full"}),me(O)," (",le,"%)"]}):O>0?x.jsxs("span",{className:"text-gray-500",children:[pe,"% passing (",me(O),")"]}):x.jsxs("span",{className:"text-gray-500",children:[pe,"% passing (cached)"]}),!v&&(a||u||l)&&x.jsxs("div",{className:"ml-auto relative",ref:Z,children:[x.jsx("button",{onClick:()=>M(!F),className:"text-gray-700 dark:text-white hover:text-gray-900 dark:hover:text-gray-300 p-1",title:"Menu",children:x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),F&&x.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[l&&x.jsxs("button",{onClick:()=>{M(!1),e(),l()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"underline",children:"C"}),"ompare Test Runs"]}),a&&x.jsx("button",{onClick:()=>{M(!1),a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Run Again"}),u&&x.jsx("button",{onClick:()=>{M(!1),u()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Clear Cache"})]})]})]}),b&&x.jsxs("div",{className:"px-4 py-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 text-sm",children:["Error: ",b]}),p.length>0&&x.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[x.jsxs("span",{className:"w-10 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>X("ok"),children:["OK",G("ok")]}),x.jsxs("span",{className:"w-20 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none font-mono",onClick:()=>X("id"),children:["ID",G("id")]}),x.jsxs("span",{className:"flex-1 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>X("description"),children:["Description",G("description")]})]}),x.jsxs("div",{ref:q,className:"flex-1 overflow-y-auto p-2 space-y-1",children:[se.map(ne=>{const ce=h.find(be=>be.id===ne.testId);return x.jsxs("button",{onClick:()=>ce&&Q(ce),className:`w-full text-left px-3 py-2 rounded text-sm flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${ne.running?"bg-gray-100 dark:bg-gray-700":""}`,children:[x.jsx("span",{className:"w-10 flex-shrink-0 text-center",children:ne.running?x.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 dark:border-blue-400 border-t-transparent rounded-full"}):ne.passed?x.jsx("span",{className:"text-green-600 dark:text-green-400",children:""}):x.jsx("span",{className:"text-red-600 dark:text-red-400",children:""})}),x.jsx("span",{className:"w-20 text-gray-500 dark:text-gray-400 font-mono flex-shrink-0",children:ne.testId}),x.jsx("span",{className:"flex-1 text-gray-700 dark:text-gray-300 truncate",children:ne.testName})]},ne.testId)}),p.length===0&&!v&&!b&&x.jsx("div",{className:"text-gray-500 text-center py-4",children:"No test results available"}),p.length===0&&v&&x.jsx("div",{className:"text-gray-500 text-center py-4",children:"Loading test suite..."})]})]})})}const Wi=[{id:"refparse",name:"Reference Parser",version:"f00319457419feacddf743d75eb317dacf5caf4b",repo:"https://github.com/yaml/yaml-reference-parser",language:"JavaScript",isJavaScript:!0},{id:"npmyaml",name:"eemeli/yaml",version:"2.8.2",repo:"https://github.com/eemeli/yaml",language:"JavaScript",isJavaScript:!0},{id:"libyaml",name:"libyaml",version:"0.2.5",repo:"https://github.com/yaml/libyaml",language:"C"},{id:"pyyaml",name:"PyYAML",version:"6.0.3",language:"Python"},{id:"ruamel",name:"ruamel.yaml",version:"0.18.17",language:"Python"},{id:"goyaml",name:"go-yaml",version:"main",repo:"https://github.com/pantoniou/yaml",language:"Go"},{id:"libfyaml",name:"libfyaml",version:"0.9.4",repo:"https://github.com/pantoniou/libfyaml",language:"C"},{id:"rapid",name:"rapidyaml",version:"0.10.0",repo:"https://github.com/biojppm/rapidyaml",language:"C++"},{id:"rustyaml",name:"serde-yaml",version:"0.9.34",repo:"https://github.com/dtolnay/serde-yaml",language:"Rust"},{id:"snake",name:"SnakeYAML",version:"2.5",repo:"https://bitbucket.org/snakeyaml/snakeyaml",language:"Java"},{id:"snakeeng",name:"SnakeYAML Engine",version:"3.0.1",repo:"https://bitbucket.org/snakeyaml/snakeyaml-engine",language:"Java"},{id:"dotnet",name:"YamlDotNet",version:"16.3.0",repo:"https://github.com/aaubry/YamlDotNet",language:"C#"},{id:"luayaml",name:"lyaml",version:"6.2.8",repo:"https://github.com/gvvaughan/lyaml",language:"Lua"},{id:"nimyaml",name:"NimYAML",version:"2.2.1",repo:"https://github.com/flyx/NimYAML",language:"Nim"},{id:"ppyaml",name:"YAML::PP",version:"0.039",language:"Perl"},{id:"hsyaml",name:"HsYAML",version:"0.2.1.5",repo:"https://github.com/haskell-hvr/HsYAML",language:"Haskell"},{id:"refhs",name:"yamlreference",version:"bf471f804ccd014fcdded3a8c74c338df8f33c85",repo:"https://github.com/orenbenkiki/yamlreference",language:"Haskell"}],Ar=n=>Wi.find(e=>e.id===n),RA=()=>Wi.map(n=>n.id),I1={dotnet:"d",goyaml:"g",hsyaml:"h",libfyaml:"f",libyaml:"l",luayaml:"L",nimyaml:"n",npmyaml:"J",ppyaml:"P",pyyaml:"p",rapid:"x",refhs:"H",ruamel:"U",rustyaml:"r",snake:"s",snakeeng:"S",d:"dotnet",g:"goyaml",h:"hsyaml",f:"libfyaml",l:"libyaml",L:"luayaml",n:"nimyaml",J:"npmyaml",P:"ppyaml",p:"pyyaml",x:"rapid",H:"refhs",U:"ruamel",r:"rustyaml",s:"snake",S:"snakeeng"},B1=n=>n.filter(e=>e!=="refparse").map(e=>I1[e]).filter(Boolean).join(""),DA=n=>["refparse",...n.split("").map(t=>I1[t]).filter(Boolean)],z1="yaml-play-compare-sort";function jA(n){const e=Math.floor(n/1e3),t=Math.floor(n%1e3/10);return`${e}.${t.toString().padStart(2,"0")}s`}function Fy(){try{const n=localStorage.getItem(z1);if(n)return JSON.parse(n)}catch{}return{column:"percent",direction:"desc"}}function LA(n){try{localStorage.setItem(z1,JSON.stringify(n))}catch{}}function F1({isOpen:n,onClose:e,onSelectParser:t}){const[r,s]=S.useState([]),[l,a]=S.useState(Fy);S.useEffect(()=>{n&&a(Fy())},[n]);const u=S.useCallback((p,m)=>{const v=[...p];return v.sort((k,b)=>{let C=0;switch(m.column){case"parserName":C=k.parserName.localeCompare(b.parserName);break;case"version":C=k.version.localeCompare(b.version);break;case"passed":C=k.passed-b.passed;break;case"failed":C=k.failed-b.failed;break;case"total":C=k.total-b.total;break;case"percent":C=k.percentNum-b.percentNum;break;case"time":C=(k.elapsedTime??0)-(b.elapsedTime??0);break}return m.direction==="asc"?C:-C}),v},[]);S.useEffect(()=>{if(!n)return;const m=EA().map(v=>{const k=Ar(v.parserId),b=v.cache.results.filter(j=>j.passed).length,C=v.cache.results.length,O=C-b,T=C>0?b/C*100:0,E=T.toFixed(1);return{parserId:v.parserId,parserName:(k==null?void 0:k.name)||v.parserId,passed:b,failed:O,total:C,percent:E,percentNum:T,version:v.cache.parserVersion,elapsedTime:v.cache.elapsedTime}});s(u(m,l))},[n,l,u]);const h=p=>{const m={column:p,direction:l.column===p&&l.direction==="asc"?"desc":"asc"};a(m),LA(m)},d=p=>l.column!==p?null:l.direction==="asc"?" ":" ";return S.useEffect(()=>{if(!n)return;const p=m=>{m.key==="Escape"&&e()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] flex flex-col",onClick:p=>p.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Compare Test Runs"}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[x.jsxs("table",{className:"w-full text-sm",children:[x.jsx("thead",{children:x.jsxs("tr",{className:"text-left text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:[x.jsxs("th",{className:"pb-2 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("parserName"),children:["Parser",d("parserName")]}),x.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("version"),children:["Version",d("version")]}),x.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("passed"),children:["Pass",d("passed")]}),x.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("failed"),children:["Fail",d("failed")]}),x.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("total"),children:["Total",d("total")]}),x.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("percent"),children:["%",d("percent")]}),x.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("time"),children:["Time",d("time")]})]})}),x.jsx("tbody",{children:r.map(p=>x.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>{t(p.parserId),e()},children:[x.jsx("td",{className:"py-2 text-gray-900 dark:text-white",children:p.parserName}),x.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400 font-mono text-xs",children:p.version}),x.jsx("td",{className:"py-2 text-right text-green-600 dark:text-green-400",children:p.passed}),x.jsx("td",{className:"py-2 text-right text-red-600 dark:text-red-400",children:p.failed}),x.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400",children:p.total}),x.jsxs("td",{className:"py-2 text-right text-gray-900 dark:text-white font-semibold",children:[p.percent,"%"]}),x.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400 font-mono text-xs",children:p.elapsedTime!=null?jA(p.elapsedTime):"-"})]},p.parserId))})]}),r.length===0&&x.jsx("div",{className:"text-gray-500 text-center py-8",children:"No cached test results available"})]})]})}):null}function IA(n){return["Failed to fetch","NetworkError","network error","ERR_CONNECTION_REFUSED","ECONNREFUSED","fetch failed","Load failed","HTTP 500","HTTP 502","HTTP 503","HTTP 504","Internal Server Error"].some(t=>n.toLowerCase().includes(t.toLowerCase()))}function cf({parser:n,result:e,onClose:t,onAddPane:r,isDraggable:s=!0,onSetYamlInput:l,showTestSuite:a=!0,isSelected:u=!1,onToggleSelection:h}){const[d,p]=S.useState(!1),[m,v]=S.useState(!1),[k,b]=S.useState(!1),[C,O]=S.useState(0),[T,E]=S.useState(!1),[j,F]=S.useState(null),[M,L]=S.useState(!1),[R,H]=S.useState(0),V=S.useCallback(()=>{jo(n.id),b(!0),O(G=>G+1)},[n.id]),W=S.useCallback(()=>{jo(n.id),v(!1)},[n.id]),q=S.useCallback(()=>{j&&(jo(j),L(!0),H(G=>G+1))},[j]),$=S.useCallback(()=>{j&&(jo(j),F(null))},[j]),Z=n.id!=="refparse",ue=Z&&(e==null?void 0:e.versionMismatch),X=Z&&!ue&&(e==null?void 0:e.status)===-1&&(e==null?void 0:e.output)&&IA(e.output);return x.jsxs("div",{className:"flex flex-col h-full min-h-[200px] bg-gray-100 dark:bg-gray-900",children:[x.jsx(yA,{parser:n,agrees:e==null?void 0:e.agrees,loading:e==null?void 0:e.loading,onClose:t,onAddPane:r,isDraggable:s,onInfoClick:()=>p(!0),onRunTestSuite:()=>{b(!1),v(!0)},showTestSuite:a,output:e==null?void 0:e.output,parseSuccess:e==null?void 0:e.matches,isSelected:u,onToggleSelection:h}),x.jsx(xA,{isOpen:d,onClose:()=>p(!1),parser:n}),x.jsx(fd,{isOpen:m,onClose:()=>v(!1),parser:n,onSelectTest:G=>l==null?void 0:l(G),forceRerun:k,onCompare:()=>E(!0),onRunAgain:V,onClearCache:W},C),x.jsx(F1,{isOpen:T,onClose:()=>E(!1),onSelectParser:G=>F(G)}),j&&Ar(j)&&x.jsx(fd,{isOpen:!0,onClose:()=>{F(null),L(!1)},parser:Ar(j),onSelectTest:G=>l==null?void 0:l(G),forceRerun:M,onCompare:()=>{F(null),E(!0)},onRunAgain:q,onClearCache:$},`view-${j}-${R}`),x.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-900 overflow-auto",children:e!=null&&e.error?x.jsxs("pre",{className:"p-3 text-red-600 dark:text-red-400 text-sm font-mono whitespace-pre-wrap",children:["Error: ",e.error]}):ue?x.jsxs("div",{className:"p-3 text-sm",children:[x.jsxs("p",{className:"text-yellow-600 dark:text-yellow-400 mb-2",children:["Wrong sandbox version (",e.versionMismatch.found,") found. Requires ",e.versionMismatch.required,"."]}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Click the "',x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Setup"}),'" button for instructions.']})]}):X?x.jsxs("div",{className:"p-3 text-sm",children:[x.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:"Can't connect to a local YAML parser sandbox server."}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Click the "',x.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Setup"}),'" button for instructions.']})]}):e!=null&&e.loading?x.jsx("div",{className:"p-3 text-gray-500 text-sm",children:"Running parser..."}):x.jsx("pre",{className:"p-3 text-gray-800 dark:text-gray-200 text-sm font-mono whitespace-pre-wrap",children:(e==null?void 0:e.output)||"No output yet"})})]})}function BA({total:n,disagreeing:e,disagreeingNames:t,loading:r,sandboxAvailable:s=!0,onSandboxSetup:l}){if(!s)return x.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2 flex items-center justify-between",children:[x.jsxs("span",{className:"text-gray-900 dark:text-white font-semibold",children:["Can't connect to sandbox server. Click"," ",x.jsx("button",{onClick:l,className:"text-yellow-600 dark:text-yellow-400 underline hover:no-underline",children:"Setup"}),"."]}),x.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",title:"View on GitHub",children:x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.115 2.504.337 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})})})]});if(r)return x.jsx("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2",children:x.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-semibold",children:"Running parsers..."})});const a=e===0;return x.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2 flex items-center justify-between",children:[a?x.jsxs("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:["All ",n," parsers agree with the Reference Parser"]}):x.jsxs("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:[e,"/",n," parsers disagree with the Reference Parser: ",t.join(", ")]}),x.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",title:"View on GitHub",children:x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.115 2.504.337 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})})})]})}const zA=[{id:"light",label:"Light"},{id:"dark",label:"Dark"}],FA=[{id:"monaco",label:"Monaco"},{id:"codemirror",label:"CodeMirror"}];function _A({isOpen:n,onClose:e,colorScheme:t,onColorSchemeChange:r,editorType:s,onEditorTypeChange:l}){return S.useEffect(()=>{if(!n)return;const a=u=>{u.key==="Escape"&&e()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full mx-4",onClick:a=>a.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Options"}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsxs("div",{className:"p-4",children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Editor"}),x.jsx("div",{className:"flex gap-2 mb-4",children:FA.map(a=>x.jsx("button",{onClick:()=>l(a.id),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${s===a.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:a.label},a.id))}),x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Mode"}),x.jsx("div",{className:"flex gap-2",children:zA.map(a=>x.jsx("button",{onClick:()=>r(a.id),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${t===a.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:a.label},a.id))})]})]})}):null}const Gd=vA(),_y=`docker run --rm -d --name yaml-play -p 7481:7481 yamlio/yaml-play-sandbox:${Gd} 7481`,Hy=`docker run --rm -d --name yaml-play --network host yamlio/yaml-play-sandbox:${Gd} 7481`;function HA({isOpen:n,onClose:e}){const[t,r]=S.useState(!1),[s,l]=S.useState(!1),a=async(u,h)=>{try{await navigator.clipboard.writeText(u),h(!0),setTimeout(()=>h(!1),2e3)}catch{const d=document.createElement("textarea");d.value=u,document.body.appendChild(d),d.select(),document.execCommand("copy"),document.body.removeChild(d),h(!0),setTimeout(()=>h(!1),2e3)}};return S.useEffect(()=>{if(!n)return;const u=h=>{h.key==="Escape"&&e()};return document.addEventListener("keydown",u),()=>document.removeEventListener("keydown",u)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-hidden",onClick:u=>u.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Sandbox Setup"}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh] space-y-6",children:[x.jsxs("section",{children:[x.jsxs("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:["Start the Sandbox Server (version ",Gd,")"]}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"These parsers run in a Docker container that you need to start on your machine. If you see connection errors, start the sandbox by running this command in a terminal:"}),x.jsxs("div",{className:"flex gap-2 items-start",children:[x.jsx("pre",{className:"flex-1 bg-gray-100 dark:bg-gray-900 p-3 rounded text-sm text-green-700 dark:text-green-400 font-mono overflow-x-auto",children:_y}),x.jsx("button",{onClick:()=>a(_y,r),className:"flex-shrink-0 p-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",title:t?"Copied!":"Copy to clipboard",children:t?x.jsx("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):x.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),x.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-3 mb-2",children:"The Docker command above does not work for some users. If it does not work for you then try this command instead:"}),x.jsxs("div",{className:"flex gap-2 items-start",children:[x.jsx("pre",{className:"flex-1 bg-gray-100 dark:bg-gray-900 p-3 rounded text-sm text-green-700 dark:text-green-400 font-mono overflow-x-auto",children:Hy}),x.jsx("button",{onClick:()=>a(Hy,l),className:"flex-shrink-0 p-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",title:s?"Copied!":"Copy to clipboard",children:s?x.jsx("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):x.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),x.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-3",children:"Note: If a different version of the sandbox server Docker container is already running, you'll need to kill that first."})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"HTTPS Certificate (if needed)"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"If you are still getting connection errors, you may need to accept the unsigned HTTPS certificate:"}),x.jsxs("ol",{className:"text-gray-600 dark:text-gray-300 text-sm list-decimal list-inside space-y-1",children:[x.jsxs("li",{children:["Click here:"," ",x.jsx("a",{href:"https://localhost:7481",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 underline",children:"https://localhost:7481"})," ","(opens in a new tab)"]}),x.jsx("li",{children:"Accept the security warning / proceed anyway"}),x.jsx("li",{children:"Return to this page and refresh"})]})]})]})]})}):null}function WA({onHelp:n,onOptions:e,onAllPanes:t,onUnselectAll:r,onTestFormat:s,onKeyboardShortcuts:l,onSandboxSetup:a,onAddTokens:u,onFactoryReset:h,hasTokens:d}){const[p,m]=S.useState(!1),v=S.useRef(null);return S.useEffect(()=>{if(!p)return;const k=C=>{v.current&&!v.current.contains(C.target)&&m(!1)},b=C=>{C.key==="Escape"&&m(!1)};return document.addEventListener("mousedown",k),document.addEventListener("keydown",b),()=>{document.removeEventListener("mousedown",k),document.removeEventListener("keydown",b)}},[p]),x.jsxs("div",{className:"relative",ref:v,children:[x.jsx("button",{onClick:()=>m(!p),className:"text-gray-700 dark:text-white hover:text-gray-900 dark:hover:text-gray-300 p-2",title:"Menu",children:x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),p&&x.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[x.jsxs("button",{onClick:()=>{m(!1),n()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"H"}),"elp"]}),x.jsxs("button",{onClick:()=>{m(!1),l()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"K"}),"eyboard Shortcuts"]}),x.jsxs("button",{onClick:()=>{m(!1),e()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"O"}),"ptions"]}),x.jsxs("button",{onClick:()=>{m(!1),t()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"A"}),"ll Panes"]}),x.jsxs("button",{onClick:()=>{m(!1),r()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"U"}),"nselect All"]}),d&&x.jsxs("button",{onClick:()=>{m(!1),s()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"T"}),"est Suite PR"]}),x.jsxs("button",{onClick:()=>{m(!1),u()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[x.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"G"}),"itHub Setup"]}),x.jsx("button",{onClick:()=>{m(!1),a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Sandbox Setup"}),x.jsx("button",{onClick:()=>{m(!1),h()},className:"w-full text-left px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Factory Reset"})]})]})}function VA({isOpen:n,onClose:e}){return S.useEffect(()=>{if(!n)return;const t=r=>{r.key==="Escape"&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[85vh] overflow-hidden flex flex-col",onClick:t=>t.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Help"}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsxs("div",{className:"p-4 space-y-5 overflow-y-auto",children:[x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Overview"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["The ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"YAML Parser Playground"})," lets you compare how 17+ different YAML parser implementations handle the same input. Enter YAML in the input editor on the left, and see the parsed output from each parser in the panes on the right."]})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Understanding the Colors"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"Each output pane has a colored header showing the parse status:"}),x.jsxs("div",{className:"space-y-2 text-sm",children:[x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"inline-block w-4 h-4 bg-green-300 border-4 border-green-300 rounded flex-shrink-0 mt-0.5"}),x.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Green:"})," The YAML parsed successfully (no errors)"]})]}),x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"inline-block w-4 h-4 bg-red-300 border-4 border-red-300 rounded flex-shrink-0 mt-0.5"}),x.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Red:"})," The parser returned an error"]})]}),x.jsxs("div",{className:"flex items-start gap-2",children:[x.jsx("span",{className:"inline-block w-4 h-4 bg-green-300 border-4 border-red-600 rounded flex-shrink-0 mt-0.5"}),x.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Red border:"})," Output differs from the Reference Parser"]})]})]}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mt-2",children:"A red border indicates disagreement  either the output differs from the Reference Parser, or one parser succeeded while the other failed."})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"The Reference Parser"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["The ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Reference Parser"})," pane shows output from the official YAML Reference Parser, which aims to implement the YAML 1.2 specification exactly. All other parsers are compared against it. The Reference Parser runs directly in your browser and doesn't require the sandbox."]})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Output Format"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:['The output is a DSL (domain-specific language) representing YAML parser "events"  the internal data structures parsers create when processing YAML. This is the same format used by the'," ",x.jsx("a",{href:"https://github.com/yaml/yaml-test-suite",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"YAML Test Suite"}),'. A "parser" is just one stage in a YAML "loader"  it converts text to events, while later stages convert events to native data structures.']})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Running Other Parsers"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Most parsers (Python, Go, Ruby, Java, etc.) require a local Docker sandbox to run. Click the ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Setup"})," button in the header for instructions on starting the sandbox container. Without it, only the JavaScript-based Reference Parser will work."]})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"YAML Test Suite"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:["Use the ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Search Test Suite"})," feature (in the input pane menu) to load test cases from the official YAML Test Suite. You can also run the entire test suite against any parser by clicking its hamburger menu and selecting ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Test Suite"}),"."]}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm mt-3 mb-2",children:[x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Contributing Tests:"})," You can submit new test cases directly to the yaml-test-suite repository. Press"," ",x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"T"})," ","or use the menu to open ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Test Format"}),". Choose between ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Manual Mode"})," (fill in test name and tags yourself) or use ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"GitHub Models"})," to AI-generate these fields. You'll select applicable tags from a list, review similar tests to avoid duplicates, and create a pull request with one click."]}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:x.jsxs("em",{children:["Note: Test submission requires a GitHub token for PR creation. Optionally, select a model from"," ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"API Tokens"})," in the menu to enable AI-powered test naming via GitHub Models (uses your GitHub token, no additional API key needed)."]})})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Sharing URLs"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Your YAML input is automatically encoded in the URL. Copy and share the URL to let others see exactly what you're working on  great for bug reports and discussions about YAML edge cases."})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Keyboard Shortcuts"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Press ",x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"K"})," to see all keyboard shortcuts. Highlights include:"]}),x.jsxs("ul",{className:"text-gray-600 dark:text-gray-300 text-sm mt-2 space-y-1 list-disc list-inside",children:[x.jsxs("li",{children:[x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"I"}),"  Focus the input editor"]}),x.jsxs("li",{children:[x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"A"})," / ",x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"N"}),"  Show all / no panes"]}),x.jsxs("li",{children:[x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"D"}),"  Show only differing panes"]}),x.jsxs("li",{children:[x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"O"})," / ",x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"P"}),"  Options / Parser Panes"]})]})]}),x.jsxs("section",{children:[x.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Organizing Panes"}),x.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Drag parser panes by their headers to reorder them. Use"," ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Parser Panes"})," (press P) to show/hide specific parsers, or ",x.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Options"})," (press O) to change the editor type or color scheme."]})]})]})]})}):null}function QA({isOpen:n,onClose:e}){return S.useEffect(()=>{if(!n)return;const t=r=>{r.key==="Escape"&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4",onClick:t=>t.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Keyboard Shortcuts"}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsx("div",{className:"p-4",children:x.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-sm",children:[x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"Esc"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Unfocus input pane / Close modal"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"I"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Focus input pane"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"\\\\\\"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Clear input and focus"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"A"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show all panes"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"D"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Select differing panes"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"S"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show your selected panes"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"U"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Unselect all (clear all checkboxes)"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"C"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Compare Test Runs"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"O"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Open Options"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"H"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show help"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"K"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show keyboard shortcuts"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"G"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"GitHub Setup"}),x.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"T"}),x.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Test Suite PR (submit new test)"})]})})]})}):null}const Yd="github-token",Jd="github-user",Wy="Ov23liRrgge8JKovPTxm";function $A(n){localStorage.setItem(Yd,n)}function xs(){return localStorage.getItem(Yd)}function Vy(){localStorage.removeItem(Yd),localStorage.removeItem(Jd)}function Qy(n){localStorage.setItem(Jd,JSON.stringify(n))}function UA(){const n=localStorage.getItem(Jd);if(!n)return null;try{return JSON.parse(n)}catch{return null}}async function $y(n){const e=await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${n}`,Accept:"application/vnd.github.v3+json"}});if(!e.ok)throw new Error(`Failed to fetch user info: ${e.statusText}`);const t=await e.json();return{login:t.login,avatar_url:t.avatar_url,name:t.name}}function _1(n=640){const[e,t]=S.useState(typeof window<"u"?window.innerWidth<n:!1);return S.useEffect(()=>{const r=()=>t(window.innerWidth<n);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[n]),e}function XA(){const[n,e]=S.useState(typeof window<"u"?window.innerWidth>window.innerHeight:!1);return S.useEffect(()=>{const t=()=>e(window.innerWidth>window.innerHeight);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n}function KA({isOpen:n,onClose:e,yaml:t,events:r,isError:s,onConfigureModel:l}){const a=_1(640),[u,h]=S.useState("generating"),[d,p]=S.useState(""),[m,v]=S.useState(""),[k,b]=S.useState([]),[C,O]=S.useState(""),[T,E]=S.useState(""),[j,F]=S.useState([]),[M,L]=S.useState([]),[R,H]=S.useState(""),[V,W]=S.useState([]),[q,$]=S.useState(!1),[Z,ue]=S.useState(""),[X,G]=S.useState(""),[se,Q]=S.useState(!1),[ee,J]=S.useState(""),[P,I]=S.useState(!1),[le,pe]=S.useState(!1),[me,ne]=S.useState(!1),[ce,be]=S.useState(!1),Ne=async()=>{try{await navigator.clipboard.writeText(ee),I(!0),setTimeout(()=>I(!1),2e3)}catch{const he=document.createElement("textarea");he.value=ee,document.body.appendChild(he),he.select(),document.execCommand("copy"),document.body.removeChild(he),I(!0),setTimeout(()=>I(!1),2e3)}},ke=S.useCallback(async()=>{if(!m.trim()){J(""),be(!1);return}be(!0);try{const he=await wA({testName:m,from:R,tags:M,yaml:t,events:r,isError:s,includeJson:le,includeDump:me});J(he.finalFileContent)}catch(he){console.error("Failed to regenerate final file:",he)}finally{be(!1)}},[m,R,M,t,r,s,le,me]),Ae=S.useMemo(()=>{let he;return()=>{clearTimeout(he),he=setTimeout(ke,300)}},[ke]),_e=async()=>{Q(!0);try{const he=localStorage.getItem("github-model")||"",Ee=xs()||"",Je=await Ly({yaml:t,events:r,isError:s,model:he,githubToken:Ee,testName:m,currentTags:M});b(Je.similarTests||[])}catch(he){console.error("Failed to regenerate similar tests:",he)}finally{Q(!1)}};S.useEffect(()=>{if(!n)return;h("generating"),p(""),v(""),b([]),O(""),E(""),F([]),L([]),H(""),W([]),$(!1),ue(""),(async()=>{try{const Ee=localStorage.getItem("github-model")||"";let Je=localStorage.getItem("github-model-name")||"";if(Ee&&!Je){const qe=xs()||"";if(qe)try{const Kt=(await qd(qe)).find(cr=>cr.id===Ee);Kt&&(Je=`${Kt.publisher}/${Kt.name}`,localStorage.setItem("github-model-name",Je))}catch(kt){console.error("Failed to fetch model name:",kt)}}ue(Je);const Tn=xs()||"",ft=await Ly({yaml:t,events:r,isError:s,model:Ee,githubToken:Tn});p(ft.testId),v(ft.testName||""),b(ft.similarTests||[]),F(ft.availableTags||[]),L(ft.tags||[]),G(ft.llmError||""),ft.githubUsername&&H(`https://github.com/${ft.githubUsername}`),ft.finalFileContent&&J(ft.finalFileContent),h("preview")}catch(Ee){E(Ee instanceof Error?Ee.message:"Failed to generate preview"),h("error")}})()},[n,t,r,s]),S.useEffect(()=>{u==="preview"&&m.trim()&&Ae()},[m,M,le,me,u,Ae]);const We=(he,Ee)=>{const Je=Ee?[...M,he]:M.filter(Tn=>Tn!==he);L(Je)};S.useEffect(()=>{const he=setTimeout(()=>{if(u==="preview"){const Ee=M.filter(Je=>!j.includes(Je));W(Ee)}},1e3);return()=>clearTimeout(he)},[M,j,u]);const Ke=async()=>{const he=xs();if(!he){E("No GitHub token found"),h("error");return}if(!m.trim()){E("Test name is required"),h("error");return}if(M.length===0){E("At least one tag must be selected"),h("error");return}h("submitting");try{const Ee=await bA({token:he,testId:d,testName:m,yaml:t,events:r,isError:s,similarTests:k,tags:M,from:R});Ee.success&&Ee.prUrl?(O(Ee.prUrl),h("success")):(E(Ee.error||"Failed to create PR"),h("error"))}catch(Ee){E(Ee instanceof Error?Ee.message:"Failed to submit PR"),h("error")}};return S.useEffect(()=>{if(!n)return;const he=Ee=>{Ee.key==="Escape"&&e()};return document.addEventListener("keydown",he),()=>document.removeEventListener("keydown",he)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 h-[90vh] overflow-hidden flex flex-col",onClick:he=>he.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[x.jsxs("div",{className:"flex items-center gap-3",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Submit to yaml-test-suite"}),Z&&l&&x.jsxs("button",{onClick:l,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:["using ",Z]}),l&&!Z&&x.jsx("button",{onClick:l,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Configure AI model"})]}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[u==="generating"&&x.jsxs("div",{className:"text-center py-8",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Generating new test ID, name and tags..."})]}),u==="preview"&&x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[x.jsx("span",{children:"Test ID:"}),x.jsx("span",{className:"font-mono font-bold text-gray-900 dark:text-white",children:d})]}),X&&x.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded p-3",children:[x.jsxs("p",{className:"text-xs text-red-800 dark:text-red-200 mb-2",children:[x.jsx("strong",{children:"AI Error:"})," ",X.split(/(\(https?:\/\/[^)]+\))/).map((he,Ee)=>{const Je=he.match(/\((https?:\/\/[^)]+)\)/);return Je?x.jsxs("span",{children:["(",x.jsx("a",{href:Je[1],target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:Je[1]}),")"]},Ee):he})]}),x.jsxs("ul",{className:"text-xs text-red-700 dark:text-red-300 list-disc list-inside space-y-1",children:[x.jsx("li",{children:"Try 'docker logs yaml-play' or the browser console for more error info."}),x.jsx("li",{children:"You might try a different model or just try this one again."}),x.jsx("li",{children:"Otherwise, just fill in the test name and tags manually."})]})]}),!X&&!localStorage.getItem("github-model")&&l&&x.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded p-3",children:x.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[x.jsx("strong",{children:"Tip:"})," Enable AI-assisted test naming by"," ",x.jsx("button",{onClick:l,className:"text-blue-600 dark:text-blue-400 hover:underline font-semibold",children:"configuring a GitHub model"}),". Otherwise, fill in the test name and tags manually."]})}),x.jsxs("div",{children:[x.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Test Name ",!m.trim()&&x.jsx("span",{className:"text-red-600",children:"*"})]}),x.jsx("input",{type:"text",value:m,onChange:he=>v(he.target.value),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"e.g., Multiline plain scalar in flow sequence"})]}),x.jsxs("div",{className:"relative",children:[x.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Tags ",M.length===0&&x.jsx("span",{className:"text-red-600",children:"*"}),M.length>0&&x.jsxs("span",{className:"text-gray-500 font-normal ml-2",children:["(",M.length," selected)"]})]}),x.jsxs("button",{type:"button",onClick:()=>$(!q),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-left text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center justify-between",children:[x.jsx("span",{className:"truncate",children:M.length>0?M.join(", "):"Select tags..."}),x.jsx("svg",{className:`w-4 h-4 transition-transform ${q?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),q&&x.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-lg max-h-48 overflow-y-auto",children:j.map(he=>x.jsxs("label",{className:"flex items-center px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",children:[x.jsx("input",{type:"checkbox",checked:M.includes(he),onChange:Ee=>We(he,Ee.target.checked),className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500 mr-2"}),x.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:he})]},he))})]}),x.jsxs("div",{className:"space-y-2",children:[x.jsxs("label",{className:`flex items-center ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[x.jsx("input",{type:"checkbox",checked:le,onChange:he=>pe(he.target.checked),disabled:s,className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500 mr-2 disabled:cursor-not-allowed"}),x.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include 'json' section"})]}),x.jsxs("label",{className:`flex items-center ${s?"opacity-50 cursor-not-allowed":"cursor-pointer"}`,children:[x.jsx("input",{type:"checkbox",checked:me,onChange:he=>ne(he.target.checked),disabled:s,className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500 mr-2 disabled:cursor-not-allowed"}),x.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:"Include 'dump' section (canonical YAML)"})]})]}),x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-1",children:[x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300",children:"Final File Content"}),ce&&x.jsxs("span",{className:"text-xs text-gray-500 dark:text-gray-400 flex items-center gap-1",children:[x.jsxs("svg",{className:"animate-spin h-3 w-3",fill:"none",viewBox:"0 0 24 24",children:[x.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),x.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]})]}),x.jsx("button",{onClick:Ne,disabled:!ee,className:"text-sm text-blue-600 dark:text-blue-400 hover:underline flex items-center gap-1 disabled:opacity-50 disabled:cursor-not-allowed",children:P?x.jsxs(x.Fragment,{children:[x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Copied!"]}):x.jsxs(x.Fragment,{children:[x.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Copy to Clipboard"]})})]}),x.jsx("pre",{className:"w-full h-[20rem] px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-gray-50 dark:bg-gray-900 text-gray-800 dark:text-gray-200 font-mono text-sm overflow-auto whitespace-pre",children:ee||"Enter a test name to see the final file content..."}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:"This is the exact file that will be submitted to yaml-test-suite."})]}),k.length>0&&x.jsxs("div",{children:[x.jsxs("div",{className:"flex items-center justify-between mb-2",children:[x.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Potentially Similar Existing Tests"}),x.jsx("button",{onClick:_e,disabled:se,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline disabled:opacity-50 disabled:cursor-not-allowed",children:se?"Searching...":"Search Again"})]}),x.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-3 space-y-2",children:[x.jsx("p",{className:"text-xs text-yellow-800 dark:text-yellow-200 mb-2",children:"The following tests may already cover similar features:"}),x.jsx("ul",{className:"space-y-1.5",children:k.map(he=>x.jsx("li",{children:x.jsxs("a",{href:he.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline font-mono flex items-start",children:[x.jsxs("span",{className:"font-bold mr-2",children:[he.id,":"]}),x.jsx("span",{className:"flex-1",children:he.name})]})},he.id))})]})]})]}),u==="submitting"&&x.jsxs("div",{className:"text-center py-8",children:[x.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),x.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Creating pull request..."})]}),u==="success"&&x.jsxs("div",{className:"text-center py-8 space-y-4",children:[x.jsx("div",{className:"text-green-600 dark:text-green-400 text-5xl",children:""}),x.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"PR Created Successfully!"}),x.jsx("a",{href:C,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:C})]}),u==="error"&&x.jsxs("div",{className:"space-y-4",children:[x.jsxs("div",{className:"p-4 bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 rounded",children:[x.jsx("p",{className:"font-semibold mb-2",children:"Error"}),x.jsx("p",{className:"text-sm",children:T})]}),x.jsx("button",{onClick:e,className:"w-full px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded transition-colors",children:"Close"})]})]}),u==="preview"&&!a&&x.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex-shrink-0",children:[(!m.trim()||M.length===0||V.length>0)&&x.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 text-center mb-2",children:V.length>0?`Invalid tags: ${V.join(", ")}`:"Please fill in test name and select at least one tag"}),x.jsx("button",{onClick:Ke,disabled:!m.trim()||M.length===0||V.length>0,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded transition-colors",children:"Submit PR"})]})]})}):null}function qA({auth:n}){const[e,t]=S.useState(null),[r,s]=S.useState(!1),l=async()=>{const u=await n.login();u&&t(u)};S.useEffect(()=>{e&&!n.isAuthenticated&&n.waitForAuth(e.deviceCode,e.interval)},[e,n]);const a=async()=>{e&&(await navigator.clipboard.writeText(e.userCode),s(!0),setTimeout(()=>s(!1),2e3))};return!n.isAuthenticated&&!n.isLoading&&!e?x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"flex items-center justify-between",children:x.jsx("span",{className:"text-md font-semibold text-gray-900 dark:text-white",children:"GitHub Authentication"})}),x.jsxs("div",{children:[x.jsxs("button",{onClick:l,className:"w-full px-4 py-3 bg-gray-900 dark:bg-gray-700 hover:bg-gray-800 dark:hover:bg-gray-600 text-white rounded transition-colors flex items-center justify-center gap-2",children:[x.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:x.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.477 0 10c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0110 4.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C17.137 18.165 20 14.418 20 10c0-5.523-4.477-10-10-10z",clipRule:"evenodd"})}),"Sign in with GitHub"]}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Enables PR submission to yaml-test-suite. Uses OAuth Device Flow - no password required."})]}),n.error&&x.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:n.error})]}):e&&!n.isAuthenticated?x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"flex items-center justify-between",children:x.jsx("span",{className:"text-md font-semibold text-gray-900 dark:text-white",children:"Complete GitHub Authorization"})}),x.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded p-4 space-y-3",children:[x.jsx("p",{className:"text-sm text-gray-900 dark:text-white font-medium",children:'Copy this code, then click "Open GitHhub":'}),x.jsxs("div",{className:"flex items-center gap-2",children:[x.jsx("code",{className:"flex-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded px-4 py-3 text-2xl font-mono font-bold text-center text-gray-900 dark:text-white tracking-wider",children:e.userCode}),x.jsx("button",{onClick:a,className:"px-3 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors",title:"Copy code",children:r?"":""})]}),x.jsx("a",{href:e.verificationUri,target:"_blank",rel:"noopener noreferrer",className:"block w-full px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-center rounded transition-colors",children:"Open GitHub "}),x.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Waiting for authorization... This page will update automatically."})]}),n.error&&x.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:n.error}),x.jsx("button",{onClick:()=>t(null),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancel"})]}):n.isAuthenticated&&n.user?x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("span",{className:"text-md font-semibold text-gray-900 dark:text-white",children:"GitHub Authentication"}),x.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:" Signed in"})]}),x.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-700",children:[x.jsx("img",{src:n.user.avatar_url,alt:n.user.login,className:"w-10 h-10 rounded-full"}),x.jsxs("div",{className:"flex-1",children:[x.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.user.name||n.user.login}),x.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["@",n.user.login]})]}),x.jsx("button",{onClick:n.logout,className:"px-3 py-1.5 text-sm bg-red-600 hover:bg-red-500 text-white rounded transition-colors",children:"Sign out"})]})]}):x.jsxs("div",{className:"space-y-3",children:[x.jsx("div",{className:"flex items-center justify-between",children:x.jsx("span",{className:"text-md font-semibold text-gray-900 dark:text-white",children:"GitHub Authentication"})}),x.jsx("div",{className:"flex items-center justify-center py-8",children:x.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})}const hf="github-model";function GA({isOpen:n,onClose:e,githubAuth:t}){const[r,s]=S.useState(""),[l,a]=S.useState([]),[u,h]=S.useState(!1);S.useEffect(()=>{if(!n)return;const p=localStorage.getItem(hf)||"";s(p);const m=xs();m&&(h(!0),qd(m).then(v=>{if(a(v),h(!1),!p&&v.length>0){const k=v.find(b=>b.name==="Llama-3.3-70B-Instruct");k&&d(k.id)}}).catch(()=>{h(!1)}))},[n]);const d=p=>{if(s(p),p){localStorage.setItem(hf,p);const m=l.find(v=>v.id===p);m&&localStorage.setItem("github-model-name",`${m.publisher}/${m.name}`)}else localStorage.removeItem(hf),localStorage.removeItem("github-model-name")};return S.useEffect(()=>{if(!n)return;const p=m=>{m.key==="Escape"&&e()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[n,e]),n?x.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:x.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",onClick:p=>p.stopPropagation(),children:[x.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[x.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"GitHub Setup"}),x.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),x.jsx("div",{className:"px-4 pt-4 pb-2",children:x.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Login to GitHub with oauth if you want to submit new"," ",x.jsx("a",{href:"https://github.com/yaml/yaml-test-suite",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline font-semibold",children:"YAML Test Suite"})," ","test cases. This will provide an internal token that allows you to submit pull requests with a single click. You can optionally select an AI model to suggest test names, tags and more via"," ",x.jsx("a",{href:"https://github.com/marketplace/models",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline font-semibold",children:"GitHub Models"}),". All settings are stored locally in your browser only."]})}),x.jsxs("div",{className:"p-4 space-y-6",children:[x.jsx(qA,{auth:t}),x.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700"}),x.jsxs("div",{className:"space-y-3",children:[x.jsxs("div",{className:"flex items-center justify-between",children:[x.jsx("a",{href:"https://github.com/marketplace/models",target:"_blank",rel:"noopener noreferrer",className:"text-md font-semibold text-blue-600 dark:text-blue-400 hover:underline",children:"GitHub Models (AI Features)"}),r&&x.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:" Selected"})]}),x.jsxs("div",{children:[x.jsxs("select",{id:"github-model",value:r,onChange:p=>d(p.target.value),disabled:u||!t.isAuthenticated,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[x.jsx("option",{value:"",children:"None (Manual Mode)"}),u&&x.jsx("option",{disabled:!0,children:"Loading models..."}),!u&&l.map(p=>{const v=["OpenAI GPT-4o mini","Llama-3.3-70B-Instruct","DeepSeek-R1"].includes(p.name);return x.jsxs("option",{value:p.id,children:[p.publisher,"/",p.name,v?" (free)":""]},p.id)})]}),x.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t.isAuthenticated?"Select a model for AI-powered test naming, or choose Manual Mode to fill in fields yourself. Uses your GitHub token.":"Authenticate with GitHub above to access AI models."})]})]})]})]})}):null}const ff="yaml-play-layout";function Uy(){const n=RA();return{panes:Wi.map(t=>{const r=n.indexOf(t.id);return{id:t.id,visible:r>=0,order:r>=0?r:1e3+Wi.findIndex(s=>s.id===t.id)}}),selectedPaneIds:n}}function YA(){const[n,e]=S.useState(()=>{try{const E=localStorage.getItem(ff);if(E){const j=JSON.parse(E),F=new Set(j.panes.map(L=>L.id)),M=Wi.filter(L=>!F.has(L.id)).map((L,R)=>({id:L.id,visible:!1,order:j.panes.length+R}));return{...j,panes:[...j.panes,...M]}}}catch{}return Uy()});S.useEffect(()=>{localStorage.setItem(ff,JSON.stringify(n))},[n]);const t=S.useCallback((E,j)=>{e(F=>{let M;if(j){const L=Math.max(...F.panes.map(R=>R.order));M=F.panes.map(R=>R.id===E?{...R,visible:j,order:L+1}:R)}else M=F.panes.map(L=>L.id===E?{...L,visible:j}:L);return{...F,panes:M}})},[]),r=S.useCallback(E=>{e(j=>{const F=new Set(j.selectedPaneIds??[]);return F.has(E)?F.delete(E):F.add(E),{...j,selectedPaneIds:Array.from(F)}})},[]),s=S.useCallback((E,j)=>{e(F=>{const M=[...F.panes],L=M.findIndex(V=>V.id===E),R=M.findIndex(V=>V.id===j);if(L===-1||R===-1)return F;const[H]=M.splice(L,1);return M.splice(R,0,H),{...F,panes:M.map((V,W)=>({...V,order:W}))}})},[]),l=S.useCallback(()=>{localStorage.removeItem(ff),AA(),e(Uy())},[]),a=S.useCallback(()=>{e(E=>{const j=E.panes.filter(R=>R.visible),F=j.length>0?Math.max(...j.map(R=>R.order)):-1,M=E.panes.filter(R=>!R.visible&&R.id!=="refparse").sort((R,H)=>R.id.localeCompare(H.id)),L=new Map;return M.forEach((R,H)=>{L.set(R.id,F+1+H)}),{...E,panes:E.panes.map(R=>({...R,visible:!0,order:L.has(R.id)?L.get(R.id):R.order}))}})},[]),u=S.useCallback(()=>{e(E=>({...E,panes:E.panes.map(j=>j.id==="refparse"?j:{...j,visible:!1})}))},[]),h=S.useCallback(()=>{e(E=>{const j=new Set(E.selectedPaneIds??[]);return{...E,panes:E.panes.map(F=>({...F,visible:F.id==="refparse"||j.has(F.id)}))}})},[]),d=S.useCallback(()=>{e(E=>({...E,selectedPaneIds:[]}))},[]),p=S.useCallback(E=>{e(j=>({...j,selectedPaneIds:E}))},[]),m=S.useCallback(E=>{e(j=>{const F=new Set(E);if(j.panes.filter(H=>!H.visible&&F.has(H.id)).length===0)return j;let R=Math.max(...j.panes.filter(H=>H.visible).map(H=>H.order),-1)+1;return{...j,panes:j.panes.map(H=>!H.visible&&F.has(H.id)?{...H,visible:!0,order:R++}:H)}})},[]),v=S.useCallback(E=>{e(j=>{const F=new Set(E);return{...j,panes:j.panes.map((M,L)=>({...M,visible:F.has(M.id),order:F.has(M.id)?E.indexOf(M.id):L+100}))}})},[]),k=S.useCallback((E,j)=>{e(F=>{const M=F.panes.find(W=>W.id===E);if(!M)return F;const L=M.order,V=[...F.panes.map(W=>W.id===j?{...W,visible:!0,order:L+.5}:W)].sort((W,q)=>W.order-q.order).map((W,q)=>({...W,order:q}));return{...F,panes:V}})},[]),b=S.useCallback(E=>{e(j=>({...j,inputPaneWidth:E}))},[]),C=S.useCallback(E=>{e(j=>({...j,colorScheme:E}))},[]),O=S.useCallback(E=>{e(j=>({...j,editorType:E}))},[]),T=S.useCallback(()=>n.panes.filter(E=>E.visible).sort((E,j)=>E.order-j.order),[n.panes]);return{layout:n,updatePaneVisibility:t,togglePaneSelection:r,reorderPanes:s,resetLayout:l,showAllPanes:a,hideAllPanes:u,showSelectedPanes:h,clearSelectedPanes:d,selectPanes:p,showErrorPanes:m,showOnlyPanes:v,addPaneAfter:k,getVisiblePanes:T,inputPaneWidth:n.inputPaneWidth??600,setInputPaneWidth:b,colorScheme:n.colorScheme==="dark"?"dark":"light",setColorScheme:C,editorType:n.editorType??"monaco",setEditorType:O}}const Ua=Wi.filter(n=>n.id!=="refparse").map(n=>n.id);function JA(){const[n,e]=S.useState(new Map),[t,r]=S.useState(""),s=S.useRef(null),l=S.useCallback(async(h,d)=>{s.current&&s.current.abort(),s.current=new AbortController,e(k=>{const b=new Map(k);return b.set("refparse",{parserId:"refparse",output:"",status:0,loading:!0}),Ua.forEach(C=>{b.set(C,{parserId:C,output:"",status:0,loading:!0})}),b});const p=await D1(h),m=p.output,v=p.status;r(m),e(k=>{const b=new Map(k);return b.set("refparse",{parserId:"refparse",output:p.output,status:p.status,loading:!1,matches:p.status===0,agrees:!0}),b}),await Promise.all(Ua.map(async k=>{const b=Wi.find(E=>E.id===k);if(!b)return;const C=await R1(k,h,b.version);let O,T;if(C.status===-1)O=!1,T=!1;else if(k==="refhs"){const E=v===0,j=C.status===0;O=E===j,T=v===0&&O}else v!==0?(O=C.status!==0,T=!1):(O=C.status===0&&j1(m,C.output,k),T=O);e(E=>{const j=new Map(E);return j.set(k,{parserId:k,output:C.output,status:C.status,loading:!1,matches:T,agrees:O,versionMismatch:C.versionMismatch}),j})}))},[]),a=S.useCallback(h=>n.get(h),[n]),u=S.useCallback(()=>{const h=[];let d=0;return Ua.forEach(p=>{const m=n.get(p);if(!m||m.loading)d++;else if(!m.agrees){const v=Ar(p);h.push((v==null?void 0:v.name)||p)}}),{total:Ua.length,disagreeing:h.length,disagreeingNames:h,loading:d>0}},[n]);return{results:n,refOutput:t,runAllParsers:l,getResult:a,getAgreementCount:u}}async function ZA(n){if(!localStorage.getItem("github-model"))try{const r=(await qd(n)).find(s=>s.name==="Llama-3.3-70B-Instruct");r&&(localStorage.setItem("github-model",r.id),localStorage.setItem("github-model-name",`${r.publisher}/${r.name}`))}catch(t){console.error("Failed to set default model:",t)}}function eE(){const[n,e]=S.useState(null),[t,r]=S.useState(!0),[s,l]=S.useState(null);S.useEffect(()=>{(async()=>{const p=xs(),m=UA();if(p&&m)try{const v=await $y(p);e(v),Qy(v)}catch{Vy(),e(null)}r(!1)})()},[]);const a=S.useCallback(async()=>{l(null),r(!0);try{const d=await SA(Wy);return{userCode:d.user_code,verificationUri:d.verification_uri,deviceCode:d.device_code,interval:d.interval}}catch(d){const p=d instanceof Error?d.message:"Failed to start OAuth flow";return l(p),r(!1),null}},[]),u=S.useCallback(async(d,p)=>{const m=p*1e3,v=60;let k=0;const b=async()=>{if(k>=v){l("Authentication timeout - please try again"),r(!1);return}k++;try{const C=await CA(Wy,d);if(C.access_token){const O=C.access_token;$A(O);const T=await $y(O);e(T),Qy(T),await ZA(O),r(!1);return}if(C.error==="authorization_pending")return await new Promise(O=>setTimeout(O,m)),b();if(C.error==="slow_down")return await new Promise(O=>setTimeout(O,m+5e3)),b();if(C.error){l(C.error_description||C.error),r(!1);return}return await new Promise(O=>setTimeout(O,m)),b()}catch(C){const O=C instanceof Error?C.message:"Polling failed";l(O),r(!1)}};await b()},[]),h=S.useCallback(()=>{Vy(),e(null)},[]);return{user:n,isAuthenticated:!!n,isLoading:t,error:s,login:a,waitForAuth:u,logout:h}}const tE="0.1.42",nE={version:tE},rE=nE.version;function iE(){const n=window.location.hash.slice(1);if(!n)return null;try{return atob(n)}catch{return null}}function sE(n){const e=btoa(n);window.history.replaceState(null,"",`#${e}`)}function oE(){const e=new URLSearchParams(window.location.search).get("show");if(!e)return null;const r=DA(e).filter(s=>Ar(s));return r.length>0?r:null}function lE(n){const e=new URLSearchParams(window.location.search);if(!e.get("show"))return;n&&n.length>0?e.set("show",B1(n)):e.delete("show");const r=e.toString(),s=r?`?${r}${window.location.hash}`:`${window.location.pathname}${window.location.hash}`;window.history.replaceState(null,"",s)}function aE(n){const t=`?show=${B1(n)}${window.location.hash}`;window.history.replaceState(null,"",t)}function uE(){var gi,on;const[n,e]=S.useState(()=>iE()||Uo),[t,r]=S.useState(!1),[s,l]=S.useState(!1),[a,u]=S.useState(!1),[h,d]=S.useState(!1),[p,m]=S.useState(!1),[v,k]=S.useState(null),[b,C]=S.useState(!1),[O,T]=S.useState(!1),[E,j]=S.useState(!1),[F,M]=S.useState(!1),L=S.useRef(null),R=S.useRef(""),H=_1(640),V=XA(),W=eE(),q=()=>W.isAuthenticated,{layout:$,updatePaneVisibility:Z,togglePaneSelection:ue,reorderPanes:X,resetLayout:G,showAllPanes:se,hideAllPanes:Q,showSelectedPanes:ee,clearSelectedPanes:J,selectPanes:P,showErrorPanes:I,showOnlyPanes:le,getVisiblePanes:pe,inputPaneWidth:me,setInputPaneWidth:ne,colorScheme:ce,setColorScheme:be,editorType:Ne,setEditorType:ke}=YA(),{results:Ae,runAllParsers:_e,getResult:We,getAgreementCount:Ke}=JA(),he=pe(),{total:Ee,disagreeing:Je,disagreeingNames:Tn,loading:ft}=Ke(),qe=he.map(Oe=>Oe.id).join(","),kt=S.useRef({input:"",panes:""}),Kt=Array.from(Ae.values()).some(Oe=>Oe.versionMismatch);S.useEffect(()=>{const Oe=async()=>{const je=await kA();j(je)};Oe();const oe=setInterval(Oe,1e4);return()=>clearInterval(oe)},[]),S.useEffect(()=>{const Oe=oE();if(lE(Oe),Oe){const oe=["refparse",...Oe.filter(je=>je!=="refparse")];le(oe)}},[]),S.useEffect(()=>{const Oe=$.panes.find(oe=>oe.id==="refparse");Oe&&!Oe.visible&&Z("refparse",!0)},[$.panes,Z]),S.useEffect(()=>{const Oe=setTimeout(()=>{sE(n)},1e3);return()=>clearTimeout(Oe)},[n]),S.useEffect(()=>{const Oe=he.map(oe=>oe.id);Oe.length>0&&aE(Oe)},[qe,he]),S.useEffect(()=>{if(kt.current.input===n&&kt.current.panes===qe)return;const Oe=setTimeout(()=>{const oe=qe.split(",").filter(Boolean);oe.length>0&&(kt.current={input:n,panes:qe},_e(n,oe))},500);return()=>clearTimeout(Oe)},[n,qe,_e]),S.useEffect(()=>{const Oe=oe=>{var Xn,mi,Dr;const je=oe.target,dt=je.tagName==="INPUT"||je.tagName==="TEXTAREA"||je.closest(".monaco-editor")||je.closest(".cm-editor");if(oe.key==="Escape"&&dt){oe.preventDefault(),(Xn=L.current)==null||Xn.blur();return}if(dt)return;const Ze=oe.key.toUpperCase();if(Ze==="I"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),(mi=L.current)==null||mi.focus()),Ze==="H"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),u(!0)),Ze==="O"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),r(!0)),Ze==="A"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),se()),Ze==="S"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),ee()),Ze==="U"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),J()),Ze==="C"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),m(!0)),Ze==="K"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),d(!0)),Ze==="G"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),T(!0)),Ze==="T"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(oe.preventDefault(),q()?C(!0):T(!0)),oe.key==="\\"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey&&(R.current+="\\",R.current==="\\\\\\"&&(oe.preventDefault(),e(""),(Dr=L.current)==null||Dr.focus(),R.current="")),Ze==="D"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey){oe.preventDefault();const fr=[];he.forEach(dr=>{if(dr.id!=="refparse"){const pr=We(dr.id);pr&&pr.agrees===!1&&fr.push(dr.id)}}),P(fr)}Ze==="X"&&!oe.ctrlKey&&!oe.metaKey&&!oe.altKey?(R.current+="X",R.current==="XXX"&&(oe.preventDefault(),G(),e(Uo),localStorage.removeItem("github-model"),localStorage.removeItem("github-model-name"),W.logout(),R.current="")):oe.key!=="\\"&&Ze!=="X"&&(R.current="")};return document.addEventListener("keydown",Oe),()=>document.removeEventListener("keydown",Oe)},[se,Q,ee,I,Ae,G,W.isAuthenticated]);const cr=ib(Hm(bd,{activationConstraint:{distance:8}}),Hm(kd)),pi=S.useCallback(Oe=>{const{active:oe,over:je}=Oe;if(je&&oe.id!==je.id){if(oe.id==="refparse")return;X(oe.id,je.id)}},[X]),hr=Ar("refparse");return H?x.jsxs("div",{className:`h-screen flex flex-col bg-gray-100 dark:bg-gray-900 ${ce==="dark"?"dark":""}`,children:[x.jsxs("header",{className:"bg-white dark:bg-gray-800 px-3 py-2 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[x.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"YAML Playground"}),x.jsxs("div",{className:"relative",children:[x.jsx("button",{onClick:()=>M(!F),className:"p-2 text-gray-700 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors","aria-label":"Menu",children:x.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:x.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),F&&x.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-lg z-50",children:[x.jsx("button",{onClick:()=>{u(!0),M(!1)},className:"w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"About"}),x.jsx("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),M(!1)},className:"w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Share"}),x.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",onClick:()=>M(!1),className:"block w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"GitHub"})]})]})]}),x.jsxs("div",{className:`flex-1 flex ${V?"flex-row":"flex-col"} overflow-hidden min-h-0`,children:[x.jsx("div",{className:`${V?"w-1/2 h-full":"h-1/2 w-full"} flex flex-col overflow-hidden ${V?"border-r border-gray-300 dark:border-gray-700":"border-b border-gray-300 dark:border-gray-700"}`,children:x.jsx(jy,{ref:L,value:n,onChange:e,width:me,onWidthChange:ne,colorScheme:ce,editorType:Ne,showBorder:!1,isMobile:!0,onSubmitPR:()=>C(!0),onSignIn:()=>T(!0),isGitHubAuthenticated:W.isAuthenticated})}),hr&&x.jsx("div",{className:`${V?"w-1/2 h-full":"h-1/2 w-full"} flex flex-col overflow-hidden`,children:x.jsx(cf,{parser:hr,result:We("refparse"),isDraggable:!1,onSetYamlInput:e,showTestSuite:!1})})]})]}):x.jsxs("div",{className:`h-screen flex flex-col bg-gray-100 dark:bg-gray-900 ${ce==="dark"?"dark":""}`,children:[x.jsxs("header",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between",children:[x.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["YAML Parser Playground ",rE]}),x.jsxs("div",{className:"flex items-center gap-2",children:[(!E||Kt)&&x.jsx("button",{onClick:()=>l(!0),className:"px-3 py-1.5 bg-yellow-500 text-black font-semibold rounded hover:bg-yellow-400 transition-colors text-sm",children:"Setup"}),x.jsx(WA,{onHelp:()=>u(!0),onOptions:()=>r(!0),onAllPanes:se,onUnselectAll:J,onTestFormat:()=>C(!0),onKeyboardShortcuts:()=>d(!0),onSandboxSetup:()=>l(!0),onAddTokens:()=>T(!0),hasTokens:q(),onFactoryReset:()=>{G(),e(Uo),localStorage.removeItem("github-model"),localStorage.removeItem("github-model-name"),W.logout()}})]})]}),x.jsx("div",{className:"flex-1 flex overflow-hidden",children:(()=>{const Oe=he.length>8,oe=Oe?he.filter(je=>je.id!=="refparse"):he;return x.jsxs(x.Fragment,{children:[x.jsxs("div",{className:`${Oe?"grid grid-rows-2":"flex flex-col"} h-full border-r border-gray-300 dark:border-gray-700`,style:{width:`${me}px`,minWidth:"200px",maxWidth:"800px"},children:[x.jsx(jy,{ref:L,value:n,onChange:e,width:me,onWidthChange:ne,colorScheme:ce,editorType:Ne,showBorder:!1,heightMode:Oe?"half":"full",onSubmitPR:()=>C(!0),onSignIn:()=>T(!0),isGitHubAuthenticated:W.isAuthenticated}),Oe&&hr&&x.jsx("div",{className:"h-full overflow-hidden border-t border-gray-300 dark:border-gray-700",children:x.jsx(cf,{parser:hr,result:We("refparse"),isDraggable:!1,onSetYamlInput:e},"refparse-sidebar")})]},Oe?"left-col-split":"left-col-full"),x.jsx("div",{className:"flex-1 grid grid-cols-4 overflow-y-auto pane-container gap-px bg-gray-300 dark:bg-gray-700 auto-rows-fr",children:x.jsx(aS,{sensors:cr,collisionDetection:ub,onDragEnd:pi,children:x.jsx(wS,{items:oe.map(je=>je.id),strategy:vS,children:oe.map(je=>{var Xn;const dt=Ar(je.id);if(!dt)return null;const Ze=je.id==="refparse";return x.jsx(cf,{parser:dt,result:We(je.id),onClose:Ze?void 0:()=>Z(je.id,!1),isDraggable:!Ze,onSetYamlInput:e,isSelected:Ze?!1:((Xn=$.selectedPaneIds)==null?void 0:Xn.includes(je.id))??!1,onToggleSelection:Ze?void 0:()=>ue(je.id)},je.id)})})})})]})})()}),x.jsx(BA,{total:Ee,disagreeing:Je,disagreeingNames:Tn,loading:ft,sandboxAvailable:E,onSandboxSetup:()=>l(!0)}),x.jsx(_A,{isOpen:t,onClose:()=>r(!1),colorScheme:ce,onColorSchemeChange:be,editorType:Ne,onEditorTypeChange:ke}),x.jsx(HA,{isOpen:s,onClose:()=>{l(!1);const Oe=qe.split(",").filter(Boolean);Oe.length>0&&_e(n,Oe)}}),x.jsx(VA,{isOpen:a,onClose:()=>u(!1)}),x.jsx(QA,{isOpen:h,onClose:()=>d(!1)}),x.jsx(F1,{isOpen:p,onClose:()=>m(!1),onSelectParser:Oe=>k(Oe)}),x.jsx(KA,{isOpen:b,onClose:()=>C(!1),yaml:n,events:((gi=We("refparse"))==null?void 0:gi.output)||"",isError:(((on=We("refparse"))==null?void 0:on.status)??0)!==0,onConfigureModel:()=>T(!0)}),x.jsx(GA,{isOpen:O,onClose:()=>T(!1),githubAuth:W}),v&&Ar(v)&&x.jsx(fd,{isOpen:!0,onClose:()=>k(null),parser:Ar(v),onSelectTest:Oe=>e(Oe),forceRerun:!1,onCompare:()=>{k(null),m(!0)}})]})}Vw.createRoot(document.getElementById("root")).render(x.jsx(ct.StrictMode,{children:x.jsx(uE,{})}));
//# sourceMappingURL=index-esiFjIa-.js.map

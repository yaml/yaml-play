var uk=Object.defineProperty;var ck=(n,e,t)=>e in n?uk(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var dm=(n,e,t)=>ck(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function Cy(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var vh={exports:{}},fo={},xh={exports:{}},Pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pm;function hk(){if(pm)return Pe;pm=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function v(A){return A===null||typeof A!="object"?null:(A=m&&A[m]||A["@@iterator"],typeof A=="function"?A:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},k=Object.assign,S={};function b(A,I,se){this.props=A,this.context=I,this.refs=S,this.updater=se||x}b.prototype.isReactComponent={},b.prototype.setState=function(A,I){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,I,"setState")},b.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function C(){}C.prototype=b.prototype;function D(A,I,se){this.props=A,this.context=I,this.refs=S,this.updater=se||x}var B=D.prototype=new C;B.constructor=D,k(B,b.prototype),B.isPureReactComponent=!0;var _=Array.isArray,T=Object.prototype.hasOwnProperty,F={current:null},z={key:!0,ref:!0,__self:!0,__source:!0};function K(A,I,se){var ge,re={},W=null,ke=null;if(I!=null)for(ge in I.ref!==void 0&&(ke=I.ref),I.key!==void 0&&(W=""+I.key),I)T.call(I,ge)&&!z.hasOwnProperty(ge)&&(re[ge]=I[ge]);var we=arguments.length-2;if(we===1)re.children=se;else if(1<we){for(var Ce=Array(we),Se=0;Se<we;Se++)Ce[Se]=arguments[Se+2];re.children=Ce}if(A&&A.defaultProps)for(ge in we=A.defaultProps,we)re[ge]===void 0&&(re[ge]=we[ge]);return{$$typeof:n,type:A,key:W,ref:ke,props:re,_owner:F.current}}function J(A,I){return{$$typeof:n,type:A.type,key:I,ref:A.ref,props:A.props,_owner:A._owner}}function G(A){return typeof A=="object"&&A!==null&&A.$$typeof===n}function te(A){var I={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(se){return I[se]})}var ne=/\/+/g;function ce(A,I){return typeof A=="object"&&A!==null&&A.key!=null?te(""+A.key):I.toString(36)}function he(A,I,se,ge,re){var W=typeof A;(W==="undefined"||W==="boolean")&&(A=null);var ke=!1;if(A===null)ke=!0;else switch(W){case"string":case"number":ke=!0;break;case"object":switch(A.$$typeof){case n:case e:ke=!0}}if(ke)return ke=A,re=re(ke),A=ge===""?"."+ce(ke,0):ge,_(re)?(se="",A!=null&&(se=A.replace(ne,"$&/")+"/"),he(re,I,se,"",function(Se){return Se})):re!=null&&(G(re)&&(re=J(re,se+(!re.key||ke&&ke.key===re.key?"":(""+re.key).replace(ne,"$&/")+"/")+A)),I.push(re)),1;if(ke=0,ge=ge===""?".":ge+":",_(A))for(var we=0;we<A.length;we++){W=A[we];var Ce=ge+ce(W,we);ke+=he(W,I,se,Ce,re)}else if(Ce=v(A),typeof Ce=="function")for(A=Ce.call(A),we=0;!(W=A.next()).done;)W=W.value,Ce=ge+ce(W,we++),ke+=he(W,I,se,Ce,re);else if(W==="object")throw I=String(A),Error("Objects are not valid as a React child (found: "+(I==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":I)+"). If you meant to render a collection of children, use an array instead.");return ke}function q(A,I,se){if(A==null)return A;var ge=[],re=0;return he(A,ge,"","",function(W){return I.call(se,W,re++)}),ge}function fe(A){if(A._status===-1){var I=A._result;I=I(),I.then(function(se){(A._status===0||A._status===-1)&&(A._status=1,A._result=se)},function(se){(A._status===0||A._status===-1)&&(A._status=2,A._result=se)}),A._status===-1&&(A._status=0,A._result=I)}if(A._status===1)return A._result.default;throw A._result}var pe={current:null},$={transition:null},ee={ReactCurrentDispatcher:pe,ReactCurrentBatchConfig:$,ReactCurrentOwner:F};function X(){throw Error("act(...) is not supported in production builds of React.")}return Pe.Children={map:q,forEach:function(A,I,se){q(A,function(){I.apply(this,arguments)},se)},count:function(A){var I=0;return q(A,function(){I++}),I},toArray:function(A){return q(A,function(I){return I})||[]},only:function(A){if(!G(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Pe.Component=b,Pe.Fragment=t,Pe.Profiler=s,Pe.PureComponent=D,Pe.StrictMode=r,Pe.Suspense=h,Pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ee,Pe.act=X,Pe.cloneElement=function(A,I,se){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var ge=k({},A.props),re=A.key,W=A.ref,ke=A._owner;if(I!=null){if(I.ref!==void 0&&(W=I.ref,ke=F.current),I.key!==void 0&&(re=""+I.key),A.type&&A.type.defaultProps)var we=A.type.defaultProps;for(Ce in I)T.call(I,Ce)&&!z.hasOwnProperty(Ce)&&(ge[Ce]=I[Ce]===void 0&&we!==void 0?we[Ce]:I[Ce])}var Ce=arguments.length-2;if(Ce===1)ge.children=se;else if(1<Ce){we=Array(Ce);for(var Se=0;Se<Ce;Se++)we[Se]=arguments[Se+2];ge.children=we}return{$$typeof:n,type:A.type,key:re,ref:W,props:ge,_owner:ke}},Pe.createContext=function(A){return A={$$typeof:a,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:l,_context:A},A.Consumer=A},Pe.createElement=K,Pe.createFactory=function(A){var I=K.bind(null,A);return I.type=A,I},Pe.createRef=function(){return{current:null}},Pe.forwardRef=function(A){return{$$typeof:c,render:A}},Pe.isValidElement=G,Pe.lazy=function(A){return{$$typeof:p,_payload:{_status:-1,_result:A},_init:fe}},Pe.memo=function(A,I){return{$$typeof:d,type:A,compare:I===void 0?null:I}},Pe.startTransition=function(A){var I=$.transition;$.transition={};try{A()}finally{$.transition=I}},Pe.unstable_act=X,Pe.useCallback=function(A,I){return pe.current.useCallback(A,I)},Pe.useContext=function(A){return pe.current.useContext(A)},Pe.useDebugValue=function(){},Pe.useDeferredValue=function(A){return pe.current.useDeferredValue(A)},Pe.useEffect=function(A,I){return pe.current.useEffect(A,I)},Pe.useId=function(){return pe.current.useId()},Pe.useImperativeHandle=function(A,I,se){return pe.current.useImperativeHandle(A,I,se)},Pe.useInsertionEffect=function(A,I){return pe.current.useInsertionEffect(A,I)},Pe.useLayoutEffect=function(A,I){return pe.current.useLayoutEffect(A,I)},Pe.useMemo=function(A,I){return pe.current.useMemo(A,I)},Pe.useReducer=function(A,I,se){return pe.current.useReducer(A,I,se)},Pe.useRef=function(A){return pe.current.useRef(A)},Pe.useState=function(A){return pe.current.useState(A)},Pe.useSyncExternalStore=function(A,I,se){return pe.current.useSyncExternalStore(A,I,se)},Pe.useTransition=function(){return pe.current.useTransition()},Pe.version="18.3.1",Pe}var gm;function rd(){return gm||(gm=1,xh.exports=hk()),xh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mm;function fk(){if(mm)return fo;mm=1;var n=rd(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function a(c,h,d){var p,m={},v=null,x=null;d!==void 0&&(v=""+d),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(x=h.ref);for(p in h)r.call(h,p)&&!l.hasOwnProperty(p)&&(m[p]=h[p]);if(c&&c.defaultProps)for(p in h=c.defaultProps,h)m[p]===void 0&&(m[p]=h[p]);return{$$typeof:e,type:c,key:v,ref:x,props:m,_owner:s.current}}return fo.Fragment=t,fo.jsx=a,fo.jsxs=a,fo}var ym;function dk(){return ym||(ym=1,vh.exports=fk()),vh.exports}var L=dk(),P=rd();const Ze=Cy(P);var ma={},wh={exports:{}},$t={},kh={exports:{}},Sh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function pk(){return vm||(vm=1,(function(n){function e($,ee){var X=$.length;$.push(ee);e:for(;0<X;){var A=X-1>>>1,I=$[A];if(0<s(I,ee))$[A]=ee,$[X]=I,X=A;else break e}}function t($){return $.length===0?null:$[0]}function r($){if($.length===0)return null;var ee=$[0],X=$.pop();if(X!==ee){$[0]=X;e:for(var A=0,I=$.length,se=I>>>1;A<se;){var ge=2*(A+1)-1,re=$[ge],W=ge+1,ke=$[W];if(0>s(re,X))W<I&&0>s(ke,re)?($[A]=ke,$[W]=X,A=W):($[A]=re,$[ge]=X,A=ge);else if(W<I&&0>s(ke,X))$[A]=ke,$[W]=X,A=W;else break e}}return ee}function s($,ee){var X=$.sortIndex-ee.sortIndex;return X!==0?X:$.id-ee.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var h=[],d=[],p=1,m=null,v=3,x=!1,k=!1,S=!1,b=typeof setTimeout=="function"?setTimeout:null,C=typeof clearTimeout=="function"?clearTimeout:null,D=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function B($){for(var ee=t(d);ee!==null;){if(ee.callback===null)r(d);else if(ee.startTime<=$)r(d),ee.sortIndex=ee.expirationTime,e(h,ee);else break;ee=t(d)}}function _($){if(S=!1,B($),!k)if(t(h)!==null)k=!0,fe(T);else{var ee=t(d);ee!==null&&pe(_,ee.startTime-$)}}function T($,ee){k=!1,S&&(S=!1,C(K),K=-1),x=!0;var X=v;try{for(B(ee),m=t(h);m!==null&&(!(m.expirationTime>ee)||$&&!te());){var A=m.callback;if(typeof A=="function"){m.callback=null,v=m.priorityLevel;var I=A(m.expirationTime<=ee);ee=n.unstable_now(),typeof I=="function"?m.callback=I:m===t(h)&&r(h),B(ee)}else r(h);m=t(h)}if(m!==null)var se=!0;else{var ge=t(d);ge!==null&&pe(_,ge.startTime-ee),se=!1}return se}finally{m=null,v=X,x=!1}}var F=!1,z=null,K=-1,J=5,G=-1;function te(){return!(n.unstable_now()-G<J)}function ne(){if(z!==null){var $=n.unstable_now();G=$;var ee=!0;try{ee=z(!0,$)}finally{ee?ce():(F=!1,z=null)}}else F=!1}var ce;if(typeof D=="function")ce=function(){D(ne)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,q=he.port2;he.port1.onmessage=ne,ce=function(){q.postMessage(null)}}else ce=function(){b(ne,0)};function fe($){z=$,F||(F=!0,ce())}function pe($,ee){K=b(function(){$(n.unstable_now())},ee)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function($){$.callback=null},n.unstable_continueExecution=function(){k||x||(k=!0,fe(T))},n.unstable_forceFrameRate=function($){0>$||125<$?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<$?Math.floor(1e3/$):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function($){switch(v){case 1:case 2:case 3:var ee=3;break;default:ee=v}var X=v;v=ee;try{return $()}finally{v=X}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function($,ee){switch($){case 1:case 2:case 3:case 4:case 5:break;default:$=3}var X=v;v=$;try{return ee()}finally{v=X}},n.unstable_scheduleCallback=function($,ee,X){var A=n.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?A+X:A):X=A,$){case 1:var I=-1;break;case 2:I=250;break;case 5:I=1073741823;break;case 4:I=1e4;break;default:I=5e3}return I=X+I,$={id:p++,callback:ee,priorityLevel:$,startTime:X,expirationTime:I,sortIndex:-1},X>A?($.sortIndex=X,e(d,$),t(h)===null&&$===t(d)&&(S?(C(K),K=-1):S=!0,pe(_,X-A))):($.sortIndex=I,e(h,$),k||x||(k=!0,fe(T))),$},n.unstable_shouldYield=te,n.unstable_wrapCallback=function($){var ee=v;return function(){var X=v;v=ee;try{return $.apply(this,arguments)}finally{v=X}}}})(Sh)),Sh}var xm;function gk(){return xm||(xm=1,kh.exports=pk()),kh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wm;function mk(){if(wm)return $t;wm=1;var n=rd(),e=gk();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function l(i,o){a(i,o),a(i+"Capture",o)}function a(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function v(i){return h.call(m,i)?!0:h.call(p,i)?!1:d.test(i)?m[i]=!0:(p[i]=!0,!1)}function x(i,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function k(i,o,u,f){if(o===null||typeof o>"u"||x(i,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function S(i,o,u,f,g,y,w){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=w}var b={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){b[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];b[o]=new S(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){b[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){b[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){b[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){b[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){b[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){b[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){b[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var C=/[\-:]([a-z])/g;function D(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(C,D);b[o]=new S(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(C,D);b[o]=new S(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(C,D);b[o]=new S(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){b[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),b.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){b[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function B(i,o,u,f){var g=b.hasOwnProperty(o)?b[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(k(o,u,g,f)&&(u=null),f||g===null?v(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):g.mustUseProperty?i[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,f=g.attributeNamespace,u===null?i.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?i.setAttributeNS(f,o,u):i.setAttribute(o,u))))}var _=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),F=Symbol.for("react.portal"),z=Symbol.for("react.fragment"),K=Symbol.for("react.strict_mode"),J=Symbol.for("react.profiler"),G=Symbol.for("react.provider"),te=Symbol.for("react.context"),ne=Symbol.for("react.forward_ref"),ce=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),q=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),pe=Symbol.for("react.offscreen"),$=Symbol.iterator;function ee(i){return i===null||typeof i!="object"?null:(i=$&&i[$]||i["@@iterator"],typeof i=="function"?i:null)}var X=Object.assign,A;function I(i){if(A===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);A=o&&o[1]||""}return`
`+A+i}var se=!1;function ge(i,o){if(!i||se)return"";se=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(j){var f=j}Reflect.construct(i,[],o)}else{try{o.call()}catch(j){f=j}i.call(o.prototype)}else{try{throw Error()}catch(j){f=j}i()}}catch(j){if(j&&f&&typeof j.stack=="string"){for(var g=j.stack.split(`
`),y=f.stack.split(`
`),w=g.length-1,O=y.length-1;1<=w&&0<=O&&g[w]!==y[O];)O--;for(;1<=w&&0<=O;w--,O--)if(g[w]!==y[O]){if(w!==1||O!==1)do if(w--,O--,0>O||g[w]!==y[O]){var M=`
`+g[w].replace(" at new "," at ");return i.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",i.displayName)),M}while(1<=w&&0<=O);break}}}finally{se=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?I(i):""}function re(i){switch(i.tag){case 5:return I(i.type);case 16:return I("Lazy");case 13:return I("Suspense");case 19:return I("SuspenseList");case 0:case 2:case 15:return i=ge(i.type,!1),i;case 11:return i=ge(i.type.render,!1),i;case 1:return i=ge(i.type,!0),i;default:return""}}function W(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case z:return"Fragment";case F:return"Portal";case J:return"Profiler";case K:return"StrictMode";case ce:return"Suspense";case he:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case te:return(i.displayName||"Context")+".Consumer";case G:return(i._context.displayName||"Context")+".Provider";case ne:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case q:return o=i.displayName||null,o!==null?o:W(i.type)||"Memo";case fe:o=i._payload,i=i._init;try{return W(i(o))}catch{}}return null}function ke(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return W(o);case 8:return o===K?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function we(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Ce(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function Se(i){var o=Ce(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(w){f=""+w,y.call(this,w)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(w){f=""+w},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Kt(i){i._valueTracker||(i._valueTracker=Se(i))}function ft(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return i&&(f=Ce(i)?i.checked?"true":"false":i.value),i=f,i!==u?(o.setValue(i),!0):!1}function qt(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function yt(i,o){var u=o.checked;return X({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function er(i,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=we(o.value!=null?o.value:u),i._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function tr(i,o){o=o.checked,o!=null&&B(i,"checked",o,!1)}function Di(i,o){tr(i,o);var u=we(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?ii(i,o.type,u):o.hasOwnProperty("defaultValue")&&ii(i,o.type,we(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Cs(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function ii(i,o,u){(o!=="number"||qt(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var zt=Array.isArray;function vn(i,o,u,f){if(i=i.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=o.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&f&&(i[u].defaultSelected=!0)}else{for(u=""+we(u),o=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function wr(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return X({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Ps(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(zt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:we(u)}}function As(i,o){var u=we(o.value),f=we(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),f!=null&&(i.defaultValue=""+f)}function ol(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function ll(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zn(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?ll(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var xn,kr=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,g){MSApp.execUnsafeLocalFunction(function(){return i(o,u,f,g)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(xn=xn||document.createElement("div"),xn.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=xn.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function Sr(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var jt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},al=["Webkit","ms","Moz","O"];Object.keys(jt).forEach(function(i){al.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),jt[o]=jt[i]})});function ul(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||jt.hasOwnProperty(i)&&jt[i]?(""+o).trim():o+"px"}function cl(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=ul(u,o[u],f);u==="float"&&(u="cssFloat"),f?i.setProperty(u,g):i[u]=g}}var Ms=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ri(i,o){if(o){if(Ms[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Es(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ti=null;function Ds(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Rs=null,br=null,He=null;function vt(i){if(i=Gs(i)){if(typeof Rs!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Rl(o),Rs(i.stateNode,i.type,o))}}function xt(i){br?He?He.push(i):He=[i]:br=i}function wn(){if(br){var i=br,o=He;if(He=br=null,vt(i),o)for(i=0;i<o.length;i++)vt(o[i])}}function Dt(i,o){return i(o)}function wt(){}var Ft=!1;function nr(i,o,u){if(Ft)return i(o,u);Ft=!0;try{return Dt(i,o,u)}finally{Ft=!1,(br!==null||He!==null)&&(wt(),wn())}}function We(i,o){var u=i.stateNode;if(u===null)return null;var f=Rl(u);if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var on=!1;if(c)try{var kt={};Object.defineProperty(kt,"passive",{get:function(){on=!0}}),window.addEventListener("test",kt,kt),window.removeEventListener("test",kt,kt)}catch{on=!1}function kn(i,o,u,f,g,y,w,O,M){var j=Array.prototype.slice.call(arguments,3);try{o.apply(u,j)}catch(Q){this.onError(Q)}}var Sn=!1,jn=null,Yt=!1,rr=null,Ts={onError:function(i){Sn=!0,jn=i}};function yx(i,o,u,f,g,y,w,O,M){Sn=!1,jn=null,kn.apply(Ts,arguments)}function vx(i,o,u,f,g,y,w,O,M){if(yx.apply(this,arguments),Sn){if(Sn){var j=jn;Sn=!1,jn=null}else throw Error(t(198));Yt||(Yt=!0,rr=j)}}function si(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Bd(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function zd(i){if(si(i)!==i)throw Error(t(188))}function xx(i){var o=i.alternate;if(!o){if(o=si(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,f=o;;){var g=u.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===u)return zd(g),i;if(y===f)return zd(g),o;y=y.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=y;else{for(var w=!1,O=g.child;O;){if(O===u){w=!0,u=g,f=y;break}if(O===f){w=!0,f=g,u=y;break}O=O.sibling}if(!w){for(O=y.child;O;){if(O===u){w=!0,u=y,f=g;break}if(O===f){w=!0,f=y,u=g;break}O=O.sibling}if(!w)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function jd(i){return i=xx(i),i!==null?Fd(i):null}function Fd(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Fd(i);if(o!==null)return o;i=i.sibling}return null}var _d=e.unstable_scheduleCallback,Vd=e.unstable_cancelCallback,wx=e.unstable_shouldYield,kx=e.unstable_requestPaint,qe=e.unstable_now,Sx=e.unstable_getCurrentPriorityLevel,ju=e.unstable_ImmediatePriority,Hd=e.unstable_UserBlockingPriority,hl=e.unstable_NormalPriority,bx=e.unstable_LowPriority,Wd=e.unstable_IdlePriority,fl=null,Fn=null;function Ox(i){if(Fn&&typeof Fn.onCommitFiberRoot=="function")try{Fn.onCommitFiberRoot(fl,i,void 0,(i.current.flags&128)===128)}catch{}}var bn=Math.clz32?Math.clz32:Ax,Cx=Math.log,Px=Math.LN2;function Ax(i){return i>>>=0,i===0?32:31-(Cx(i)/Px|0)|0}var dl=64,pl=4194304;function Ns(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function gl(i,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,g=i.suspendedLanes,y=i.pingedLanes,w=u&268435455;if(w!==0){var O=w&~g;O!==0?f=Ns(O):(y&=w,y!==0&&(f=Ns(y)))}else w=u&~g,w!==0?f=Ns(w):y!==0&&(f=Ns(y));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,y=o&-o,g>=y||g===16&&(y&4194240)!==0))return o;if((f&4)!==0&&(f|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=f;0<o;)u=31-bn(o),g=1<<u,f|=i[u],o&=~g;return f}function Mx(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Ex(i,o){for(var u=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes;0<y;){var w=31-bn(y),O=1<<w,M=g[w];M===-1?((O&u)===0||(O&f)!==0)&&(g[w]=Mx(O,o)):M<=o&&(i.expiredLanes|=O),y&=~O}}function Fu(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Qd(){var i=dl;return dl<<=1,(dl&4194240)===0&&(dl=64),i}function _u(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Ls(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-bn(o),i[o]=u}function Dx(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<u;){var g=31-bn(u),y=1<<g;o[g]=0,f[g]=-1,i[g]=-1,u&=~y}}function Vu(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var f=31-bn(u),g=1<<f;g&o|i[f]&o&&(i[f]|=o),u&=~g}}var Le=0;function $d(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Ud,Hu,Xd,Kd,qd,Wu=!1,ml=[],Or=null,Cr=null,Pr=null,Is=new Map,Bs=new Map,Ar=[],Rx="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Yd(i,o){switch(i){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Cr=null;break;case"mouseover":case"mouseout":Pr=null;break;case"pointerover":case"pointerout":Is.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Bs.delete(o.pointerId)}}function zs(i,o,u,f,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},o!==null&&(o=Gs(o),o!==null&&Hu(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function Tx(i,o,u,f,g){switch(o){case"focusin":return Or=zs(Or,i,o,u,f,g),!0;case"dragenter":return Cr=zs(Cr,i,o,u,f,g),!0;case"mouseover":return Pr=zs(Pr,i,o,u,f,g),!0;case"pointerover":var y=g.pointerId;return Is.set(y,zs(Is.get(y)||null,i,o,u,f,g)),!0;case"gotpointercapture":return y=g.pointerId,Bs.set(y,zs(Bs.get(y)||null,i,o,u,f,g)),!0}return!1}function Gd(i){var o=oi(i.target);if(o!==null){var u=si(o);if(u!==null){if(o=u.tag,o===13){if(o=Bd(u),o!==null){i.blockedOn=o,qd(i.priority,function(){Xd(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function yl(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=$u(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);Ti=f,u.target.dispatchEvent(f),Ti=null}else return o=Gs(u),o!==null&&Hu(o),i.blockedOn=u,!1;o.shift()}return!0}function Zd(i,o,u){yl(i)&&u.delete(o)}function Nx(){Wu=!1,Or!==null&&yl(Or)&&(Or=null),Cr!==null&&yl(Cr)&&(Cr=null),Pr!==null&&yl(Pr)&&(Pr=null),Is.forEach(Zd),Bs.forEach(Zd)}function js(i,o){i.blockedOn===o&&(i.blockedOn=null,Wu||(Wu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,Nx)))}function Fs(i){function o(g){return js(g,i)}if(0<ml.length){js(ml[0],i);for(var u=1;u<ml.length;u++){var f=ml[u];f.blockedOn===i&&(f.blockedOn=null)}}for(Or!==null&&js(Or,i),Cr!==null&&js(Cr,i),Pr!==null&&js(Pr,i),Is.forEach(o),Bs.forEach(o),u=0;u<Ar.length;u++)f=Ar[u],f.blockedOn===i&&(f.blockedOn=null);for(;0<Ar.length&&(u=Ar[0],u.blockedOn===null);)Gd(u),u.blockedOn===null&&Ar.shift()}var Ni=_.ReactCurrentBatchConfig,vl=!0;function Lx(i,o,u,f){var g=Le,y=Ni.transition;Ni.transition=null;try{Le=1,Qu(i,o,u,f)}finally{Le=g,Ni.transition=y}}function Ix(i,o,u,f){var g=Le,y=Ni.transition;Ni.transition=null;try{Le=4,Qu(i,o,u,f)}finally{Le=g,Ni.transition=y}}function Qu(i,o,u,f){if(vl){var g=$u(i,o,u,f);if(g===null)ac(i,o,f,xl,u),Yd(i,f);else if(Tx(g,i,o,u,f))f.stopPropagation();else if(Yd(i,f),o&4&&-1<Rx.indexOf(i)){for(;g!==null;){var y=Gs(g);if(y!==null&&Ud(y),y=$u(i,o,u,f),y===null&&ac(i,o,f,xl,u),y===g)break;g=y}g!==null&&f.stopPropagation()}else ac(i,o,f,null,u)}}var xl=null;function $u(i,o,u,f){if(xl=null,i=Ds(f),i=oi(i),i!==null)if(o=si(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Bd(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return xl=i,null}function Jd(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Sx()){case ju:return 1;case Hd:return 4;case hl:case bx:return 16;case Wd:return 536870912;default:return 16}default:return 16}}var Mr=null,Uu=null,wl=null;function ep(){if(wl)return wl;var i,o=Uu,u=o.length,f,g="value"in Mr?Mr.value:Mr.textContent,y=g.length;for(i=0;i<u&&o[i]===g[i];i++);var w=u-i;for(f=1;f<=w&&o[u-f]===g[y-f];f++);return wl=g.slice(i,1<f?1-f:void 0)}function kl(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Sl(){return!0}function tp(){return!1}function Gt(i){function o(u,f,g,y,w){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var O in i)i.hasOwnProperty(O)&&(u=i[O],this[O]=u?u(y):y[O]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Sl:tp,this.isPropagationStopped=tp,this}return X(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Sl)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Sl)},persist:function(){},isPersistent:Sl}),o}var Li={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Xu=Gt(Li),_s=X({},Li,{view:0,detail:0}),Bx=Gt(_s),Ku,qu,Vs,bl=X({},_s,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Gu,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==Vs&&(Vs&&i.type==="mousemove"?(Ku=i.screenX-Vs.screenX,qu=i.screenY-Vs.screenY):qu=Ku=0,Vs=i),Ku)},movementY:function(i){return"movementY"in i?i.movementY:qu}}),np=Gt(bl),zx=X({},bl,{dataTransfer:0}),jx=Gt(zx),Fx=X({},_s,{relatedTarget:0}),Yu=Gt(Fx),_x=X({},Li,{animationName:0,elapsedTime:0,pseudoElement:0}),Vx=Gt(_x),Hx=X({},Li,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),Wx=Gt(Hx),Qx=X({},Li,{data:0}),rp=Gt(Qx),$x={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ux={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Xx={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Kx(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=Xx[i])?!!o[i]:!1}function Gu(){return Kx}var qx=X({},_s,{key:function(i){if(i.key){var o=$x[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=kl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?Ux[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Gu,charCode:function(i){return i.type==="keypress"?kl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?kl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Yx=Gt(qx),Gx=X({},bl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ip=Gt(Gx),Zx=X({},_s,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Gu}),Jx=Gt(Zx),ew=X({},Li,{propertyName:0,elapsedTime:0,pseudoElement:0}),tw=Gt(ew),nw=X({},bl,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),rw=Gt(nw),iw=[9,13,27,32],Zu=c&&"CompositionEvent"in window,Hs=null;c&&"documentMode"in document&&(Hs=document.documentMode);var sw=c&&"TextEvent"in window&&!Hs,sp=c&&(!Zu||Hs&&8<Hs&&11>=Hs),op=" ",lp=!1;function ap(i,o){switch(i){case"keyup":return iw.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function up(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Ii=!1;function ow(i,o){switch(i){case"compositionend":return up(o);case"keypress":return o.which!==32?null:(lp=!0,op);case"textInput":return i=o.data,i===op&&lp?null:i;default:return null}}function lw(i,o){if(Ii)return i==="compositionend"||!Zu&&ap(i,o)?(i=ep(),wl=Uu=Mr=null,Ii=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return sp&&o.locale!=="ko"?null:o.data;default:return null}}var aw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function cp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!aw[i.type]:o==="textarea"}function hp(i,o,u,f){xt(f),o=Ml(o,"onChange"),0<o.length&&(u=new Xu("onChange","change",null,u,f),i.push({event:u,listeners:o}))}var Ws=null,Qs=null;function uw(i){Ep(i,0)}function Ol(i){var o=_i(i);if(ft(o))return i}function cw(i,o){if(i==="change")return o}var fp=!1;if(c){var Ju;if(c){var ec="oninput"in document;if(!ec){var dp=document.createElement("div");dp.setAttribute("oninput","return;"),ec=typeof dp.oninput=="function"}Ju=ec}else Ju=!1;fp=Ju&&(!document.documentMode||9<document.documentMode)}function pp(){Ws&&(Ws.detachEvent("onpropertychange",gp),Qs=Ws=null)}function gp(i){if(i.propertyName==="value"&&Ol(Qs)){var o=[];hp(o,Qs,i,Ds(i)),nr(uw,o)}}function hw(i,o,u){i==="focusin"?(pp(),Ws=o,Qs=u,Ws.attachEvent("onpropertychange",gp)):i==="focusout"&&pp()}function fw(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ol(Qs)}function dw(i,o){if(i==="click")return Ol(o)}function pw(i,o){if(i==="input"||i==="change")return Ol(o)}function gw(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var On=typeof Object.is=="function"?Object.is:gw;function $s(i,o){if(On(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!h.call(o,g)||!On(i[g],o[g]))return!1}return!0}function mp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function yp(i,o){var u=mp(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=o&&f>=o)return{node:u,offset:o-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=mp(u)}}function vp(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?vp(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function xp(){for(var i=window,o=qt();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=qt(i.document)}return o}function tc(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function mw(i){var o=xp(),u=i.focusedElem,f=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&vp(u.ownerDocument.documentElement,u)){if(f!==null&&tc(u)){if(o=f.start,i=f.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=u.textContent.length,y=Math.min(f.start,g);f=f.end===void 0?y:Math.min(f.end,g),!i.extend&&y>f&&(g=f,f=y,y=g),g=yp(u,y);var w=yp(u,f);g&&w&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==w.node||i.focusOffset!==w.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),y>f?(i.addRange(o),i.extend(w.node,w.offset)):(o.setEnd(w.node,w.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var yw=c&&"documentMode"in document&&11>=document.documentMode,Bi=null,nc=null,Us=null,rc=!1;function wp(i,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;rc||Bi==null||Bi!==qt(f)||(f=Bi,"selectionStart"in f&&tc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Us&&$s(Us,f)||(Us=f,f=Ml(nc,"onSelect"),0<f.length&&(o=new Xu("onSelect","select",null,o,u),i.push({event:o,listeners:f}),o.target=Bi)))}function Cl(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var zi={animationend:Cl("Animation","AnimationEnd"),animationiteration:Cl("Animation","AnimationIteration"),animationstart:Cl("Animation","AnimationStart"),transitionend:Cl("Transition","TransitionEnd")},ic={},kp={};c&&(kp=document.createElement("div").style,"AnimationEvent"in window||(delete zi.animationend.animation,delete zi.animationiteration.animation,delete zi.animationstart.animation),"TransitionEvent"in window||delete zi.transitionend.transition);function Pl(i){if(ic[i])return ic[i];if(!zi[i])return i;var o=zi[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in kp)return ic[i]=o[u];return i}var Sp=Pl("animationend"),bp=Pl("animationiteration"),Op=Pl("animationstart"),Cp=Pl("transitionend"),Pp=new Map,Ap="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Er(i,o){Pp.set(i,o),l(o,[i])}for(var sc=0;sc<Ap.length;sc++){var oc=Ap[sc],vw=oc.toLowerCase(),xw=oc[0].toUpperCase()+oc.slice(1);Er(vw,"on"+xw)}Er(Sp,"onAnimationEnd"),Er(bp,"onAnimationIteration"),Er(Op,"onAnimationStart"),Er("dblclick","onDoubleClick"),Er("focusin","onFocus"),Er("focusout","onBlur"),Er(Cp,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Xs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ww=new Set("cancel close invalid load scroll toggle".split(" ").concat(Xs));function Mp(i,o,u){var f=i.type||"unknown-event";i.currentTarget=u,vx(f,o,void 0,i),i.currentTarget=null}function Ep(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],g=f.event;f=f.listeners;e:{var y=void 0;if(o)for(var w=f.length-1;0<=w;w--){var O=f[w],M=O.instance,j=O.currentTarget;if(O=O.listener,M!==y&&g.isPropagationStopped())break e;Mp(g,O,j),y=M}else for(w=0;w<f.length;w++){if(O=f[w],M=O.instance,j=O.currentTarget,O=O.listener,M!==y&&g.isPropagationStopped())break e;Mp(g,O,j),y=M}}}if(Yt)throw i=rr,Yt=!1,rr=null,i}function je(i,o){var u=o[pc];u===void 0&&(u=o[pc]=new Set);var f=i+"__bubble";u.has(f)||(Dp(o,i,2,!1),u.add(f))}function lc(i,o,u){var f=0;o&&(f|=4),Dp(u,i,f,o)}var Al="_reactListening"+Math.random().toString(36).slice(2);function Ks(i){if(!i[Al]){i[Al]=!0,r.forEach(function(u){u!=="selectionchange"&&(ww.has(u)||lc(u,!1,i),lc(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Al]||(o[Al]=!0,lc("selectionchange",!1,o))}}function Dp(i,o,u,f){switch(Jd(o)){case 1:var g=Lx;break;case 4:g=Ix;break;default:g=Qu}u=g.bind(null,o,u,i),g=void 0,!on||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(o,u,{capture:!0,passive:g}):i.addEventListener(o,u,!0):g!==void 0?i.addEventListener(o,u,{passive:g}):i.addEventListener(o,u,!1)}function ac(i,o,u,f,g){var y=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var O=f.stateNode.containerInfo;if(O===g||O.nodeType===8&&O.parentNode===g)break;if(w===4)for(w=f.return;w!==null;){var M=w.tag;if((M===3||M===4)&&(M=w.stateNode.containerInfo,M===g||M.nodeType===8&&M.parentNode===g))return;w=w.return}for(;O!==null;){if(w=oi(O),w===null)return;if(M=w.tag,M===5||M===6){f=y=w;continue e}O=O.parentNode}}f=f.return}nr(function(){var j=y,Q=Ds(u),U=[];e:{var H=Pp.get(i);if(H!==void 0){var le=Xu,ue=i;switch(i){case"keypress":if(kl(u)===0)break e;case"keydown":case"keyup":le=Yx;break;case"focusin":ue="focus",le=Yu;break;case"focusout":ue="blur",le=Yu;break;case"beforeblur":case"afterblur":le=Yu;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=np;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=jx;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=Jx;break;case Sp:case bp:case Op:le=Vx;break;case Cp:le=tw;break;case"scroll":le=Bx;break;case"wheel":le=rw;break;case"copy":case"cut":case"paste":le=Wx;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=ip}var de=(o&4)!==0,Ye=!de&&i==="scroll",R=de?H!==null?H+"Capture":null:H;de=[];for(var E=j,N;E!==null;){N=E;var Y=N.stateNode;if(N.tag===5&&Y!==null&&(N=Y,R!==null&&(Y=We(E,R),Y!=null&&de.push(qs(E,Y,N)))),Ye)break;E=E.return}0<de.length&&(H=new le(H,ue,null,u,Q),U.push({event:H,listeners:de}))}}if((o&7)===0){e:{if(H=i==="mouseover"||i==="pointerover",le=i==="mouseout"||i==="pointerout",H&&u!==Ti&&(ue=u.relatedTarget||u.fromElement)&&(oi(ue)||ue[ir]))break e;if((le||H)&&(H=Q.window===Q?Q:(H=Q.ownerDocument)?H.defaultView||H.parentWindow:window,le?(ue=u.relatedTarget||u.toElement,le=j,ue=ue?oi(ue):null,ue!==null&&(Ye=si(ue),ue!==Ye||ue.tag!==5&&ue.tag!==6)&&(ue=null)):(le=null,ue=j),le!==ue)){if(de=np,Y="onMouseLeave",R="onMouseEnter",E="mouse",(i==="pointerout"||i==="pointerover")&&(de=ip,Y="onPointerLeave",R="onPointerEnter",E="pointer"),Ye=le==null?H:_i(le),N=ue==null?H:_i(ue),H=new de(Y,E+"leave",le,u,Q),H.target=Ye,H.relatedTarget=N,Y=null,oi(Q)===j&&(de=new de(R,E+"enter",ue,u,Q),de.target=N,de.relatedTarget=Ye,Y=de),Ye=Y,le&&ue)t:{for(de=le,R=ue,E=0,N=de;N;N=ji(N))E++;for(N=0,Y=R;Y;Y=ji(Y))N++;for(;0<E-N;)de=ji(de),E--;for(;0<N-E;)R=ji(R),N--;for(;E--;){if(de===R||R!==null&&de===R.alternate)break t;de=ji(de),R=ji(R)}de=null}else de=null;le!==null&&Rp(U,H,le,de,!1),ue!==null&&Ye!==null&&Rp(U,Ye,ue,de,!0)}}e:{if(H=j?_i(j):window,le=H.nodeName&&H.nodeName.toLowerCase(),le==="select"||le==="input"&&H.type==="file")var me=cw;else if(cp(H))if(fp)me=pw;else{me=fw;var ve=hw}else(le=H.nodeName)&&le.toLowerCase()==="input"&&(H.type==="checkbox"||H.type==="radio")&&(me=dw);if(me&&(me=me(i,j))){hp(U,me,u,Q);break e}ve&&ve(i,H,j),i==="focusout"&&(ve=H._wrapperState)&&ve.controlled&&H.type==="number"&&ii(H,"number",H.value)}switch(ve=j?_i(j):window,i){case"focusin":(cp(ve)||ve.contentEditable==="true")&&(Bi=ve,nc=j,Us=null);break;case"focusout":Us=nc=Bi=null;break;case"mousedown":rc=!0;break;case"contextmenu":case"mouseup":case"dragend":rc=!1,wp(U,u,Q);break;case"selectionchange":if(yw)break;case"keydown":case"keyup":wp(U,u,Q)}var xe;if(Zu)e:{switch(i){case"compositionstart":var be="onCompositionStart";break e;case"compositionend":be="onCompositionEnd";break e;case"compositionupdate":be="onCompositionUpdate";break e}be=void 0}else Ii?ap(i,u)&&(be="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(be="onCompositionStart");be&&(sp&&u.locale!=="ko"&&(Ii||be!=="onCompositionStart"?be==="onCompositionEnd"&&Ii&&(xe=ep()):(Mr=Q,Uu="value"in Mr?Mr.value:Mr.textContent,Ii=!0)),ve=Ml(j,be),0<ve.length&&(be=new rp(be,i,null,u,Q),U.push({event:be,listeners:ve}),xe?be.data=xe:(xe=up(u),xe!==null&&(be.data=xe)))),(xe=sw?ow(i,u):lw(i,u))&&(j=Ml(j,"onBeforeInput"),0<j.length&&(Q=new rp("onBeforeInput","beforeinput",null,u,Q),U.push({event:Q,listeners:j}),Q.data=xe))}Ep(U,o)})}function qs(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Ml(i,o){for(var u=o+"Capture",f=[];i!==null;){var g=i,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=We(i,u),y!=null&&f.unshift(qs(i,y,g)),y=We(i,o),y!=null&&f.push(qs(i,y,g))),i=i.return}return f}function ji(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Rp(i,o,u,f,g){for(var y=o._reactName,w=[];u!==null&&u!==f;){var O=u,M=O.alternate,j=O.stateNode;if(M!==null&&M===f)break;O.tag===5&&j!==null&&(O=j,g?(M=We(u,y),M!=null&&w.unshift(qs(u,M,O))):g||(M=We(u,y),M!=null&&w.push(qs(u,M,O)))),u=u.return}w.length!==0&&i.push({event:o,listeners:w})}var kw=/\r\n?/g,Sw=/\u0000|\uFFFD/g;function Tp(i){return(typeof i=="string"?i:""+i).replace(kw,`
`).replace(Sw,"")}function El(i,o,u){if(o=Tp(o),Tp(i)!==o&&u)throw Error(t(425))}function Dl(){}var uc=null,cc=null;function hc(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var fc=typeof setTimeout=="function"?setTimeout:void 0,bw=typeof clearTimeout=="function"?clearTimeout:void 0,Np=typeof Promise=="function"?Promise:void 0,Ow=typeof queueMicrotask=="function"?queueMicrotask:typeof Np<"u"?function(i){return Np.resolve(null).then(i).catch(Cw)}:fc;function Cw(i){setTimeout(function(){throw i})}function dc(i,o){var u=o,f=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){i.removeChild(g),Fs(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);Fs(o)}function Dr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Lp(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var Fi=Math.random().toString(36).slice(2),_n="__reactFiber$"+Fi,Ys="__reactProps$"+Fi,ir="__reactContainer$"+Fi,pc="__reactEvents$"+Fi,Pw="__reactListeners$"+Fi,Aw="__reactHandles$"+Fi;function oi(i){var o=i[_n];if(o)return o;for(var u=i.parentNode;u;){if(o=u[ir]||u[_n]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=Lp(i);i!==null;){if(u=i[_n])return u;i=Lp(i)}return o}i=u,u=i.parentNode}return null}function Gs(i){return i=i[_n]||i[ir],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function _i(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Rl(i){return i[Ys]||null}var gc=[],Vi=-1;function Rr(i){return{current:i}}function Fe(i){0>Vi||(i.current=gc[Vi],gc[Vi]=null,Vi--)}function ze(i,o){Vi++,gc[Vi]=i.current,i.current=o}var Tr={},St=Rr(Tr),_t=Rr(!1),li=Tr;function Hi(i,o){var u=i.type.contextTypes;if(!u)return Tr;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in u)g[y]=o[y];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function Vt(i){return i=i.childContextTypes,i!=null}function Tl(){Fe(_t),Fe(St)}function Ip(i,o,u){if(St.current!==Tr)throw Error(t(168));ze(St,o),ze(_t,u)}function Bp(i,o,u){var f=i.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(t(108,ke(i)||"Unknown",g));return X({},u,f)}function Nl(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Tr,li=St.current,ze(St,i),ze(_t,_t.current),!0}function zp(i,o,u){var f=i.stateNode;if(!f)throw Error(t(169));u?(i=Bp(i,o,li),f.__reactInternalMemoizedMergedChildContext=i,Fe(_t),Fe(St),ze(St,i)):Fe(_t),ze(_t,u)}var sr=null,Ll=!1,mc=!1;function jp(i){sr===null?sr=[i]:sr.push(i)}function Mw(i){Ll=!0,jp(i)}function Nr(){if(!mc&&sr!==null){mc=!0;var i=0,o=Le;try{var u=sr;for(Le=1;i<u.length;i++){var f=u[i];do f=f(!0);while(f!==null)}sr=null,Ll=!1}catch(g){throw sr!==null&&(sr=sr.slice(i+1)),_d(ju,Nr),g}finally{Le=o,mc=!1}}return null}var Wi=[],Qi=0,Il=null,Bl=0,ln=[],an=0,ai=null,or=1,lr="";function ui(i,o){Wi[Qi++]=Bl,Wi[Qi++]=Il,Il=i,Bl=o}function Fp(i,o,u){ln[an++]=or,ln[an++]=lr,ln[an++]=ai,ai=i;var f=or;i=lr;var g=32-bn(f)-1;f&=~(1<<g),u+=1;var y=32-bn(o)+g;if(30<y){var w=g-g%5;y=(f&(1<<w)-1).toString(32),f>>=w,g-=w,or=1<<32-bn(o)+g|u<<g|f,lr=y+i}else or=1<<y|u<<g|f,lr=i}function yc(i){i.return!==null&&(ui(i,1),Fp(i,1,0))}function vc(i){for(;i===Il;)Il=Wi[--Qi],Wi[Qi]=null,Bl=Wi[--Qi],Wi[Qi]=null;for(;i===ai;)ai=ln[--an],ln[an]=null,lr=ln[--an],ln[an]=null,or=ln[--an],ln[an]=null}var Zt=null,Jt=null,Ve=!1,Cn=null;function _p(i,o){var u=fn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function Vp(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,Zt=i,Jt=Dr(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,Zt=i,Jt=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=ai!==null?{id:or,overflow:lr}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=fn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,Zt=i,Jt=null,!0):!1;default:return!1}}function xc(i){return(i.mode&1)!==0&&(i.flags&128)===0}function wc(i){if(Ve){var o=Jt;if(o){var u=o;if(!Vp(i,o)){if(xc(i))throw Error(t(418));o=Dr(u.nextSibling);var f=Zt;o&&Vp(i,o)?_p(f,u):(i.flags=i.flags&-4097|2,Ve=!1,Zt=i)}}else{if(xc(i))throw Error(t(418));i.flags=i.flags&-4097|2,Ve=!1,Zt=i}}}function Hp(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;Zt=i}function zl(i){if(i!==Zt)return!1;if(!Ve)return Hp(i),Ve=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!hc(i.type,i.memoizedProps)),o&&(o=Jt)){if(xc(i))throw Wp(),Error(t(418));for(;o;)_p(i,o),o=Dr(o.nextSibling)}if(Hp(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){Jt=Dr(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}Jt=null}}else Jt=Zt?Dr(i.stateNode.nextSibling):null;return!0}function Wp(){for(var i=Jt;i;)i=Dr(i.nextSibling)}function $i(){Jt=Zt=null,Ve=!1}function kc(i){Cn===null?Cn=[i]:Cn.push(i)}var Ew=_.ReactCurrentBatchConfig;function Zs(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,i));var g=f,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(w){var O=g.refs;w===null?delete O[y]:O[y]=w},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function jl(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Qp(i){var o=i._init;return o(i._payload)}function $p(i){function o(R,E){if(i){var N=R.deletions;N===null?(R.deletions=[E],R.flags|=16):N.push(E)}}function u(R,E){if(!i)return null;for(;E!==null;)o(R,E),E=E.sibling;return null}function f(R,E){for(R=new Map;E!==null;)E.key!==null?R.set(E.key,E):R.set(E.index,E),E=E.sibling;return R}function g(R,E){return R=Vr(R,E),R.index=0,R.sibling=null,R}function y(R,E,N){return R.index=N,i?(N=R.alternate,N!==null?(N=N.index,N<E?(R.flags|=2,E):N):(R.flags|=2,E)):(R.flags|=1048576,E)}function w(R){return i&&R.alternate===null&&(R.flags|=2),R}function O(R,E,N,Y){return E===null||E.tag!==6?(E=fh(N,R.mode,Y),E.return=R,E):(E=g(E,N),E.return=R,E)}function M(R,E,N,Y){var me=N.type;return me===z?Q(R,E,N.props.children,Y,N.key):E!==null&&(E.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===fe&&Qp(me)===E.type)?(Y=g(E,N.props),Y.ref=Zs(R,E,N),Y.return=R,Y):(Y=aa(N.type,N.key,N.props,null,R.mode,Y),Y.ref=Zs(R,E,N),Y.return=R,Y)}function j(R,E,N,Y){return E===null||E.tag!==4||E.stateNode.containerInfo!==N.containerInfo||E.stateNode.implementation!==N.implementation?(E=dh(N,R.mode,Y),E.return=R,E):(E=g(E,N.children||[]),E.return=R,E)}function Q(R,E,N,Y,me){return E===null||E.tag!==7?(E=yi(N,R.mode,Y,me),E.return=R,E):(E=g(E,N),E.return=R,E)}function U(R,E,N){if(typeof E=="string"&&E!==""||typeof E=="number")return E=fh(""+E,R.mode,N),E.return=R,E;if(typeof E=="object"&&E!==null){switch(E.$$typeof){case T:return N=aa(E.type,E.key,E.props,null,R.mode,N),N.ref=Zs(R,null,E),N.return=R,N;case F:return E=dh(E,R.mode,N),E.return=R,E;case fe:var Y=E._init;return U(R,Y(E._payload),N)}if(zt(E)||ee(E))return E=yi(E,R.mode,N,null),E.return=R,E;jl(R,E)}return null}function H(R,E,N,Y){var me=E!==null?E.key:null;if(typeof N=="string"&&N!==""||typeof N=="number")return me!==null?null:O(R,E,""+N,Y);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case T:return N.key===me?M(R,E,N,Y):null;case F:return N.key===me?j(R,E,N,Y):null;case fe:return me=N._init,H(R,E,me(N._payload),Y)}if(zt(N)||ee(N))return me!==null?null:Q(R,E,N,Y,null);jl(R,N)}return null}function le(R,E,N,Y,me){if(typeof Y=="string"&&Y!==""||typeof Y=="number")return R=R.get(N)||null,O(E,R,""+Y,me);if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case T:return R=R.get(Y.key===null?N:Y.key)||null,M(E,R,Y,me);case F:return R=R.get(Y.key===null?N:Y.key)||null,j(E,R,Y,me);case fe:var ve=Y._init;return le(R,E,N,ve(Y._payload),me)}if(zt(Y)||ee(Y))return R=R.get(N)||null,Q(E,R,Y,me,null);jl(E,Y)}return null}function ue(R,E,N,Y){for(var me=null,ve=null,xe=E,be=E=0,at=null;xe!==null&&be<N.length;be++){xe.index>be?(at=xe,xe=null):at=xe.sibling;var De=H(R,xe,N[be],Y);if(De===null){xe===null&&(xe=at);break}i&&xe&&De.alternate===null&&o(R,xe),E=y(De,E,be),ve===null?me=De:ve.sibling=De,ve=De,xe=at}if(be===N.length)return u(R,xe),Ve&&ui(R,be),me;if(xe===null){for(;be<N.length;be++)xe=U(R,N[be],Y),xe!==null&&(E=y(xe,E,be),ve===null?me=xe:ve.sibling=xe,ve=xe);return Ve&&ui(R,be),me}for(xe=f(R,xe);be<N.length;be++)at=le(xe,R,be,N[be],Y),at!==null&&(i&&at.alternate!==null&&xe.delete(at.key===null?be:at.key),E=y(at,E,be),ve===null?me=at:ve.sibling=at,ve=at);return i&&xe.forEach(function(Hr){return o(R,Hr)}),Ve&&ui(R,be),me}function de(R,E,N,Y){var me=ee(N);if(typeof me!="function")throw Error(t(150));if(N=me.call(N),N==null)throw Error(t(151));for(var ve=me=null,xe=E,be=E=0,at=null,De=N.next();xe!==null&&!De.done;be++,De=N.next()){xe.index>be?(at=xe,xe=null):at=xe.sibling;var Hr=H(R,xe,De.value,Y);if(Hr===null){xe===null&&(xe=at);break}i&&xe&&Hr.alternate===null&&o(R,xe),E=y(Hr,E,be),ve===null?me=Hr:ve.sibling=Hr,ve=Hr,xe=at}if(De.done)return u(R,xe),Ve&&ui(R,be),me;if(xe===null){for(;!De.done;be++,De=N.next())De=U(R,De.value,Y),De!==null&&(E=y(De,E,be),ve===null?me=De:ve.sibling=De,ve=De);return Ve&&ui(R,be),me}for(xe=f(R,xe);!De.done;be++,De=N.next())De=le(xe,R,be,De.value,Y),De!==null&&(i&&De.alternate!==null&&xe.delete(De.key===null?be:De.key),E=y(De,E,be),ve===null?me=De:ve.sibling=De,ve=De);return i&&xe.forEach(function(ak){return o(R,ak)}),Ve&&ui(R,be),me}function Ye(R,E,N,Y){if(typeof N=="object"&&N!==null&&N.type===z&&N.key===null&&(N=N.props.children),typeof N=="object"&&N!==null){switch(N.$$typeof){case T:e:{for(var me=N.key,ve=E;ve!==null;){if(ve.key===me){if(me=N.type,me===z){if(ve.tag===7){u(R,ve.sibling),E=g(ve,N.props.children),E.return=R,R=E;break e}}else if(ve.elementType===me||typeof me=="object"&&me!==null&&me.$$typeof===fe&&Qp(me)===ve.type){u(R,ve.sibling),E=g(ve,N.props),E.ref=Zs(R,ve,N),E.return=R,R=E;break e}u(R,ve);break}else o(R,ve);ve=ve.sibling}N.type===z?(E=yi(N.props.children,R.mode,Y,N.key),E.return=R,R=E):(Y=aa(N.type,N.key,N.props,null,R.mode,Y),Y.ref=Zs(R,E,N),Y.return=R,R=Y)}return w(R);case F:e:{for(ve=N.key;E!==null;){if(E.key===ve)if(E.tag===4&&E.stateNode.containerInfo===N.containerInfo&&E.stateNode.implementation===N.implementation){u(R,E.sibling),E=g(E,N.children||[]),E.return=R,R=E;break e}else{u(R,E);break}else o(R,E);E=E.sibling}E=dh(N,R.mode,Y),E.return=R,R=E}return w(R);case fe:return ve=N._init,Ye(R,E,ve(N._payload),Y)}if(zt(N))return ue(R,E,N,Y);if(ee(N))return de(R,E,N,Y);jl(R,N)}return typeof N=="string"&&N!==""||typeof N=="number"?(N=""+N,E!==null&&E.tag===6?(u(R,E.sibling),E=g(E,N),E.return=R,R=E):(u(R,E),E=fh(N,R.mode,Y),E.return=R,R=E),w(R)):u(R,E)}return Ye}var Ui=$p(!0),Up=$p(!1),Fl=Rr(null),_l=null,Xi=null,Sc=null;function bc(){Sc=Xi=_l=null}function Oc(i){var o=Fl.current;Fe(Fl),i._currentValue=o}function Cc(i,o,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===u)break;i=i.return}}function Ki(i,o){_l=i,Sc=Xi=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(Ht=!0),i.firstContext=null)}function un(i){var o=i._currentValue;if(Sc!==i)if(i={context:i,memoizedValue:o,next:null},Xi===null){if(_l===null)throw Error(t(308));Xi=i,_l.dependencies={lanes:0,firstContext:i}}else Xi=Xi.next=i;return o}var ci=null;function Pc(i){ci===null?ci=[i]:ci.push(i)}function Xp(i,o,u,f){var g=o.interleaved;return g===null?(u.next=u,Pc(o)):(u.next=g.next,g.next=u),o.interleaved=u,ar(i,f)}function ar(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Lr=!1;function Ac(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Kp(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function ur(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Ir(i,o,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Me&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,ar(i,u)}return g=f.interleaved,g===null?(o.next=o,Pc(f)):(o.next=g.next,g.next=o),f.interleaved=o,ar(i,u)}function Vl(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,Vu(i,u)}}function qp(i,o){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var w={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?g=y=w:y=y.next=w,u=u.next}while(u!==null);y===null?g=y=o:y=y.next=o}else g=y=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,effects:f.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function Hl(i,o,u,f){var g=i.updateQueue;Lr=!1;var y=g.firstBaseUpdate,w=g.lastBaseUpdate,O=g.shared.pending;if(O!==null){g.shared.pending=null;var M=O,j=M.next;M.next=null,w===null?y=j:w.next=j,w=M;var Q=i.alternate;Q!==null&&(Q=Q.updateQueue,O=Q.lastBaseUpdate,O!==w&&(O===null?Q.firstBaseUpdate=j:O.next=j,Q.lastBaseUpdate=M))}if(y!==null){var U=g.baseState;w=0,Q=j=M=null,O=y;do{var H=O.lane,le=O.eventTime;if((f&H)===H){Q!==null&&(Q=Q.next={eventTime:le,lane:0,tag:O.tag,payload:O.payload,callback:O.callback,next:null});e:{var ue=i,de=O;switch(H=o,le=u,de.tag){case 1:if(ue=de.payload,typeof ue=="function"){U=ue.call(le,U,H);break e}U=ue;break e;case 3:ue.flags=ue.flags&-65537|128;case 0:if(ue=de.payload,H=typeof ue=="function"?ue.call(le,U,H):ue,H==null)break e;U=X({},U,H);break e;case 2:Lr=!0}}O.callback!==null&&O.lane!==0&&(i.flags|=64,H=g.effects,H===null?g.effects=[O]:H.push(O))}else le={eventTime:le,lane:H,tag:O.tag,payload:O.payload,callback:O.callback,next:null},Q===null?(j=Q=le,M=U):Q=Q.next=le,w|=H;if(O=O.next,O===null){if(O=g.shared.pending,O===null)break;H=O,O=H.next,H.next=null,g.lastBaseUpdate=H,g.shared.pending=null}}while(!0);if(Q===null&&(M=U),g.baseState=M,g.firstBaseUpdate=j,g.lastBaseUpdate=Q,o=g.shared.interleaved,o!==null){g=o;do w|=g.lane,g=g.next;while(g!==o)}else y===null&&(g.shared.lanes=0);di|=w,i.lanes=w,i.memoizedState=U}}function Yp(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var f=i[o],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var Js={},Vn=Rr(Js),eo=Rr(Js),to=Rr(Js);function hi(i){if(i===Js)throw Error(t(174));return i}function Mc(i,o){switch(ze(to,o),ze(eo,i),ze(Vn,Js),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:zn(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=zn(o,i)}Fe(Vn),ze(Vn,o)}function qi(){Fe(Vn),Fe(eo),Fe(to)}function Gp(i){hi(to.current);var o=hi(Vn.current),u=zn(o,i.type);o!==u&&(ze(eo,i),ze(Vn,u))}function Ec(i){eo.current===i&&(Fe(Vn),Fe(eo))}var Qe=Rr(0);function Wl(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Dc=[];function Rc(){for(var i=0;i<Dc.length;i++)Dc[i]._workInProgressVersionPrimary=null;Dc.length=0}var Ql=_.ReactCurrentDispatcher,Tc=_.ReactCurrentBatchConfig,fi=0,$e=null,nt=null,ot=null,$l=!1,no=!1,ro=0,Dw=0;function bt(){throw Error(t(321))}function Nc(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!On(i[u],o[u]))return!1;return!0}function Lc(i,o,u,f,g,y){if(fi=y,$e=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Ql.current=i===null||i.memoizedState===null?Lw:Iw,i=u(f,g),no){y=0;do{if(no=!1,ro=0,25<=y)throw Error(t(301));y+=1,ot=nt=null,o.updateQueue=null,Ql.current=Bw,i=u(f,g)}while(no)}if(Ql.current=Kl,o=nt!==null&&nt.next!==null,fi=0,ot=nt=$e=null,$l=!1,o)throw Error(t(300));return i}function Ic(){var i=ro!==0;return ro=0,i}function Hn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ot===null?$e.memoizedState=ot=i:ot=ot.next=i,ot}function cn(){if(nt===null){var i=$e.alternate;i=i!==null?i.memoizedState:null}else i=nt.next;var o=ot===null?$e.memoizedState:ot.next;if(o!==null)ot=o,nt=i;else{if(i===null)throw Error(t(310));nt=i,i={memoizedState:nt.memoizedState,baseState:nt.baseState,baseQueue:nt.baseQueue,queue:nt.queue,next:null},ot===null?$e.memoizedState=ot=i:ot=ot.next=i}return ot}function io(i,o){return typeof o=="function"?o(i):o}function Bc(i){var o=cn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=nt,g=f.baseQueue,y=u.pending;if(y!==null){if(g!==null){var w=g.next;g.next=y.next,y.next=w}f.baseQueue=g=y,u.pending=null}if(g!==null){y=g.next,f=f.baseState;var O=w=null,M=null,j=y;do{var Q=j.lane;if((fi&Q)===Q)M!==null&&(M=M.next={lane:0,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null}),f=j.hasEagerState?j.eagerState:i(f,j.action);else{var U={lane:Q,action:j.action,hasEagerState:j.hasEagerState,eagerState:j.eagerState,next:null};M===null?(O=M=U,w=f):M=M.next=U,$e.lanes|=Q,di|=Q}j=j.next}while(j!==null&&j!==y);M===null?w=f:M.next=O,On(f,o.memoizedState)||(Ht=!0),o.memoizedState=f,o.baseState=w,o.baseQueue=M,u.lastRenderedState=f}if(i=u.interleaved,i!==null){g=i;do y=g.lane,$e.lanes|=y,di|=y,g=g.next;while(g!==i)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function zc(i){var o=cn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=u.dispatch,g=u.pending,y=o.memoizedState;if(g!==null){u.pending=null;var w=g=g.next;do y=i(y,w.action),w=w.next;while(w!==g);On(y,o.memoizedState)||(Ht=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,f]}function Zp(){}function Jp(i,o){var u=$e,f=cn(),g=o(),y=!On(f.memoizedState,g);if(y&&(f.memoizedState=g,Ht=!0),f=f.queue,jc(ng.bind(null,u,f,i),[i]),f.getSnapshot!==o||y||ot!==null&&ot.memoizedState.tag&1){if(u.flags|=2048,so(9,tg.bind(null,u,f,g,o),void 0,null),lt===null)throw Error(t(349));(fi&30)!==0||eg(u,o,g)}return g}function eg(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=$e.updateQueue,o===null?(o={lastEffect:null,stores:null},$e.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function tg(i,o,u,f){o.value=u,o.getSnapshot=f,rg(o)&&ig(i)}function ng(i,o,u){return u(function(){rg(o)&&ig(i)})}function rg(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!On(i,u)}catch{return!0}}function ig(i){var o=ar(i,1);o!==null&&En(o,i,1,-1)}function sg(i){var o=Hn();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:io,lastRenderedState:i},o.queue=i,i=i.dispatch=Nw.bind(null,$e,i),[o.memoizedState,i]}function so(i,o,u,f){return i={tag:i,create:o,destroy:u,deps:f,next:null},o=$e.updateQueue,o===null?(o={lastEffect:null,stores:null},$e.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,o.lastEffect=i)),i}function og(){return cn().memoizedState}function Ul(i,o,u,f){var g=Hn();$e.flags|=i,g.memoizedState=so(1|o,u,void 0,f===void 0?null:f)}function Xl(i,o,u,f){var g=cn();f=f===void 0?null:f;var y=void 0;if(nt!==null){var w=nt.memoizedState;if(y=w.destroy,f!==null&&Nc(f,w.deps)){g.memoizedState=so(o,u,y,f);return}}$e.flags|=i,g.memoizedState=so(1|o,u,y,f)}function lg(i,o){return Ul(8390656,8,i,o)}function jc(i,o){return Xl(2048,8,i,o)}function ag(i,o){return Xl(4,2,i,o)}function ug(i,o){return Xl(4,4,i,o)}function cg(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function hg(i,o,u){return u=u!=null?u.concat([i]):null,Xl(4,4,cg.bind(null,o,i),u)}function Fc(){}function fg(i,o){var u=cn();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Nc(o,f[1])?f[0]:(u.memoizedState=[i,o],i)}function dg(i,o){var u=cn();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Nc(o,f[1])?f[0]:(i=i(),u.memoizedState=[i,o],i)}function pg(i,o,u){return(fi&21)===0?(i.baseState&&(i.baseState=!1,Ht=!0),i.memoizedState=u):(On(u,o)||(u=Qd(),$e.lanes|=u,di|=u,i.baseState=!0),o)}function Rw(i,o){var u=Le;Le=u!==0&&4>u?u:4,i(!0);var f=Tc.transition;Tc.transition={};try{i(!1),o()}finally{Le=u,Tc.transition=f}}function gg(){return cn().memoizedState}function Tw(i,o,u){var f=Fr(i);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},mg(i))yg(o,u);else if(u=Xp(i,o,u,f),u!==null){var g=Tt();En(u,i,f,g),vg(u,o,f)}}function Nw(i,o,u){var f=Fr(i),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(mg(i))yg(o,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var w=o.lastRenderedState,O=y(w,u);if(g.hasEagerState=!0,g.eagerState=O,On(O,w)){var M=o.interleaved;M===null?(g.next=g,Pc(o)):(g.next=M.next,M.next=g),o.interleaved=g;return}}catch{}finally{}u=Xp(i,o,g,f),u!==null&&(g=Tt(),En(u,i,f,g),vg(u,o,f))}}function mg(i){var o=i.alternate;return i===$e||o!==null&&o===$e}function yg(i,o){no=$l=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function vg(i,o,u){if((u&4194240)!==0){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,Vu(i,u)}}var Kl={readContext:un,useCallback:bt,useContext:bt,useEffect:bt,useImperativeHandle:bt,useInsertionEffect:bt,useLayoutEffect:bt,useMemo:bt,useReducer:bt,useRef:bt,useState:bt,useDebugValue:bt,useDeferredValue:bt,useTransition:bt,useMutableSource:bt,useSyncExternalStore:bt,useId:bt,unstable_isNewReconciler:!1},Lw={readContext:un,useCallback:function(i,o){return Hn().memoizedState=[i,o===void 0?null:o],i},useContext:un,useEffect:lg,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Ul(4194308,4,cg.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Ul(4194308,4,i,o)},useInsertionEffect:function(i,o){return Ul(4,2,i,o)},useMemo:function(i,o){var u=Hn();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var f=Hn();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},f.queue=i,i=i.dispatch=Tw.bind(null,$e,i),[f.memoizedState,i]},useRef:function(i){var o=Hn();return i={current:i},o.memoizedState=i},useState:sg,useDebugValue:Fc,useDeferredValue:function(i){return Hn().memoizedState=i},useTransition:function(){var i=sg(!1),o=i[0];return i=Rw.bind(null,i[1]),Hn().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var f=$e,g=Hn();if(Ve){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),lt===null)throw Error(t(349));(fi&30)!==0||eg(f,o,u)}g.memoizedState=u;var y={value:u,getSnapshot:o};return g.queue=y,lg(ng.bind(null,f,y,i),[i]),f.flags|=2048,so(9,tg.bind(null,f,y,u,o),void 0,null),u},useId:function(){var i=Hn(),o=lt.identifierPrefix;if(Ve){var u=lr,f=or;u=(f&~(1<<32-bn(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=ro++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=Dw++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},Iw={readContext:un,useCallback:fg,useContext:un,useEffect:jc,useImperativeHandle:hg,useInsertionEffect:ag,useLayoutEffect:ug,useMemo:dg,useReducer:Bc,useRef:og,useState:function(){return Bc(io)},useDebugValue:Fc,useDeferredValue:function(i){var o=cn();return pg(o,nt.memoizedState,i)},useTransition:function(){var i=Bc(io)[0],o=cn().memoizedState;return[i,o]},useMutableSource:Zp,useSyncExternalStore:Jp,useId:gg,unstable_isNewReconciler:!1},Bw={readContext:un,useCallback:fg,useContext:un,useEffect:jc,useImperativeHandle:hg,useInsertionEffect:ag,useLayoutEffect:ug,useMemo:dg,useReducer:zc,useRef:og,useState:function(){return zc(io)},useDebugValue:Fc,useDeferredValue:function(i){var o=cn();return nt===null?o.memoizedState=i:pg(o,nt.memoizedState,i)},useTransition:function(){var i=zc(io)[0],o=cn().memoizedState;return[i,o]},useMutableSource:Zp,useSyncExternalStore:Jp,useId:gg,unstable_isNewReconciler:!1};function Pn(i,o){if(i&&i.defaultProps){o=X({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function _c(i,o,u,f){o=i.memoizedState,u=u(f,o),u=u==null?o:X({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var ql={isMounted:function(i){return(i=i._reactInternals)?si(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var f=Tt(),g=Fr(i),y=ur(f,g);y.payload=o,u!=null&&(y.callback=u),o=Ir(i,y,g),o!==null&&(En(o,i,g,f),Vl(o,i,g))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var f=Tt(),g=Fr(i),y=ur(f,g);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=Ir(i,y,g),o!==null&&(En(o,i,g,f),Vl(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Tt(),f=Fr(i),g=ur(u,f);g.tag=2,o!=null&&(g.callback=o),o=Ir(i,g,f),o!==null&&(En(o,i,f,u),Vl(o,i,f))}};function xg(i,o,u,f,g,y,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,y,w):o.prototype&&o.prototype.isPureReactComponent?!$s(u,f)||!$s(g,y):!0}function wg(i,o,u){var f=!1,g=Tr,y=o.contextType;return typeof y=="object"&&y!==null?y=un(y):(g=Vt(o)?li:St.current,f=o.contextTypes,y=(f=f!=null)?Hi(i,g):Tr),o=new o(u,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=ql,i.stateNode=o,o._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=y),o}function kg(i,o,u,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==i&&ql.enqueueReplaceState(o,o.state,null)}function Vc(i,o,u,f){var g=i.stateNode;g.props=u,g.state=i.memoizedState,g.refs={},Ac(i);var y=o.contextType;typeof y=="object"&&y!==null?g.context=un(y):(y=Vt(o)?li:St.current,g.context=Hi(i,y)),g.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(_c(i,o,y,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&ql.enqueueReplaceState(g,g.state,null),Hl(i,u,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function Yi(i,o){try{var u="",f=o;do u+=re(f),f=f.return;while(f);var g=u}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:g,digest:null}}function Hc(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Wc(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var zw=typeof WeakMap=="function"?WeakMap:Map;function Sg(i,o,u){u=ur(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){na||(na=!0,ih=f),Wc(i,o)},u}function bg(i,o,u){u=ur(-1,u),u.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;u.payload=function(){return f(g)},u.callback=function(){Wc(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){Wc(i,o),typeof f!="function"&&(zr===null?zr=new Set([this]):zr.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})}),u}function Og(i,o,u){var f=i.pingCache;if(f===null){f=i.pingCache=new zw;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(g.add(u),i=Gw.bind(null,i,o,u),o.then(i,i))}function Cg(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Pg(i,o,u,f,g){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=ur(-1,1),o.tag=2,Ir(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var jw=_.ReactCurrentOwner,Ht=!1;function Rt(i,o,u,f){o.child=i===null?Up(o,null,u,f):Ui(o,i.child,u,f)}function Ag(i,o,u,f,g){u=u.render;var y=o.ref;return Ki(o,g),f=Lc(i,o,u,f,y,g),u=Ic(),i!==null&&!Ht?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,cr(i,o,g)):(Ve&&u&&yc(o),o.flags|=1,Rt(i,o,f,g),o.child)}function Mg(i,o,u,f,g){if(i===null){var y=u.type;return typeof y=="function"&&!hh(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=y,Eg(i,o,y,f,g)):(i=aa(u.type,null,f,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&g)===0){var w=y.memoizedProps;if(u=u.compare,u=u!==null?u:$s,u(w,f)&&i.ref===o.ref)return cr(i,o,g)}return o.flags|=1,i=Vr(y,f),i.ref=o.ref,i.return=o,o.child=i}function Eg(i,o,u,f,g){if(i!==null){var y=i.memoizedProps;if($s(y,f)&&i.ref===o.ref)if(Ht=!1,o.pendingProps=f=y,(i.lanes&g)!==0)(i.flags&131072)!==0&&(Ht=!0);else return o.lanes=i.lanes,cr(i,o,g)}return Qc(i,o,u,f,g)}function Dg(i,o,u){var f=o.pendingProps,g=f.children,y=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},ze(Zi,en),en|=u;else{if((u&1073741824)===0)return i=y!==null?y.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,ze(Zi,en),en|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=y!==null?y.baseLanes:u,ze(Zi,en),en|=f}else y!==null?(f=y.baseLanes|u,o.memoizedState=null):f=u,ze(Zi,en),en|=f;return Rt(i,o,g,u),o.child}function Rg(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Qc(i,o,u,f,g){var y=Vt(u)?li:St.current;return y=Hi(o,y),Ki(o,g),u=Lc(i,o,u,f,y,g),f=Ic(),i!==null&&!Ht?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,cr(i,o,g)):(Ve&&f&&yc(o),o.flags|=1,Rt(i,o,u,g),o.child)}function Tg(i,o,u,f,g){if(Vt(u)){var y=!0;Nl(o)}else y=!1;if(Ki(o,g),o.stateNode===null)Gl(i,o),wg(o,u,f),Vc(o,u,f,g),f=!0;else if(i===null){var w=o.stateNode,O=o.memoizedProps;w.props=O;var M=w.context,j=u.contextType;typeof j=="object"&&j!==null?j=un(j):(j=Vt(u)?li:St.current,j=Hi(o,j));var Q=u.getDerivedStateFromProps,U=typeof Q=="function"||typeof w.getSnapshotBeforeUpdate=="function";U||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==f||M!==j)&&kg(o,w,f,j),Lr=!1;var H=o.memoizedState;w.state=H,Hl(o,f,w,g),M=o.memoizedState,O!==f||H!==M||_t.current||Lr?(typeof Q=="function"&&(_c(o,u,Q,f),M=o.memoizedState),(O=Lr||xg(o,u,O,f,H,M,j))?(U||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=M),w.props=f,w.state=M,w.context=j,f=O):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{w=o.stateNode,Kp(i,o),O=o.memoizedProps,j=o.type===o.elementType?O:Pn(o.type,O),w.props=j,U=o.pendingProps,H=w.context,M=u.contextType,typeof M=="object"&&M!==null?M=un(M):(M=Vt(u)?li:St.current,M=Hi(o,M));var le=u.getDerivedStateFromProps;(Q=typeof le=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(O!==U||H!==M)&&kg(o,w,f,M),Lr=!1,H=o.memoizedState,w.state=H,Hl(o,f,w,g);var ue=o.memoizedState;O!==U||H!==ue||_t.current||Lr?(typeof le=="function"&&(_c(o,u,le,f),ue=o.memoizedState),(j=Lr||xg(o,u,j,f,H,ue,M)||!1)?(Q||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(f,ue,M),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(f,ue,M)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||O===i.memoizedProps&&H===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&H===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ue),w.props=f,w.state=ue,w.context=M,f=j):(typeof w.componentDidUpdate!="function"||O===i.memoizedProps&&H===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||O===i.memoizedProps&&H===i.memoizedState||(o.flags|=1024),f=!1)}return $c(i,o,u,f,y,g)}function $c(i,o,u,f,g,y){Rg(i,o);var w=(o.flags&128)!==0;if(!f&&!w)return g&&zp(o,u,!1),cr(i,o,y);f=o.stateNode,jw.current=o;var O=w&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,i!==null&&w?(o.child=Ui(o,i.child,null,y),o.child=Ui(o,null,O,y)):Rt(i,o,O,y),o.memoizedState=f.state,g&&zp(o,u,!0),o.child}function Ng(i){var o=i.stateNode;o.pendingContext?Ip(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Ip(i,o.context,!1),Mc(i,o.containerInfo)}function Lg(i,o,u,f,g){return $i(),kc(g),o.flags|=256,Rt(i,o,u,f),o.child}var Uc={dehydrated:null,treeContext:null,retryLane:0};function Xc(i){return{baseLanes:i,cachePool:null,transitions:null}}function Ig(i,o,u){var f=o.pendingProps,g=Qe.current,y=!1,w=(o.flags&128)!==0,O;if((O=w)||(O=i!==null&&i.memoizedState===null?!1:(g&2)!==0),O?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),ze(Qe,g&1),i===null)return wc(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(w=f.children,i=f.fallback,y?(f=o.mode,y=o.child,w={mode:"hidden",children:w},(f&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=w):y=ua(w,f,0,null),i=yi(i,f,u,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Xc(u),o.memoizedState=Uc,i):Kc(o,w));if(g=i.memoizedState,g!==null&&(O=g.dehydrated,O!==null))return Fw(i,o,w,f,O,g,u);if(y){y=f.fallback,w=o.mode,g=i.child,O=g.sibling;var M={mode:"hidden",children:f.children};return(w&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=M,o.deletions=null):(f=Vr(g,M),f.subtreeFlags=g.subtreeFlags&14680064),O!==null?y=Vr(O,y):(y=yi(y,w,u,null),y.flags|=2),y.return=o,f.return=o,f.sibling=y,o.child=f,f=y,y=o.child,w=i.child.memoizedState,w=w===null?Xc(u):{baseLanes:w.baseLanes|u,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=i.childLanes&~u,o.memoizedState=Uc,f}return y=i.child,i=y.sibling,f=Vr(y,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=u),f.return=o,f.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=f,o.memoizedState=null,f}function Kc(i,o){return o=ua({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function Yl(i,o,u,f){return f!==null&&kc(f),Ui(o,i.child,null,u),i=Kc(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Fw(i,o,u,f,g,y,w){if(u)return o.flags&256?(o.flags&=-257,f=Hc(Error(t(422))),Yl(i,o,w,f)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=f.fallback,g=o.mode,f=ua({mode:"visible",children:f.children},g,0,null),y=yi(y,g,w,null),y.flags|=2,f.return=o,y.return=o,f.sibling=y,o.child=f,(o.mode&1)!==0&&Ui(o,i.child,null,w),o.child.memoizedState=Xc(w),o.memoizedState=Uc,y);if((o.mode&1)===0)return Yl(i,o,w,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var O=f.dgst;return f=O,y=Error(t(419)),f=Hc(y,f,void 0),Yl(i,o,w,f)}if(O=(w&i.childLanes)!==0,Ht||O){if(f=lt,f!==null){switch(w&-w){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|w))!==0?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,ar(i,g),En(f,i,g,-1))}return ch(),f=Hc(Error(t(421))),Yl(i,o,w,f)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=Zw.bind(null,i),g._reactRetry=o,null):(i=y.treeContext,Jt=Dr(g.nextSibling),Zt=o,Ve=!0,Cn=null,i!==null&&(ln[an++]=or,ln[an++]=lr,ln[an++]=ai,or=i.id,lr=i.overflow,ai=o),o=Kc(o,f.children),o.flags|=4096,o)}function Bg(i,o,u){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),Cc(i.return,o,u)}function qc(i,o,u,f,g){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=u,y.tailMode=g)}function zg(i,o,u){var f=o.pendingProps,g=f.revealOrder,y=f.tail;if(Rt(i,o,f.children,u),f=Qe.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Bg(i,u,o);else if(i.tag===19)Bg(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(ze(Qe,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)i=u.alternate,i!==null&&Wl(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),qc(o,!1,g,u,y);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Wl(i)===null){o.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}qc(o,!0,u,null,y);break;case"together":qc(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function Gl(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function cr(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),di|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=Vr(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Vr(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function _w(i,o,u){switch(o.tag){case 3:Ng(o),$i();break;case 5:Gp(o);break;case 1:Vt(o.type)&&Nl(o);break;case 4:Mc(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;ze(Fl,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(ze(Qe,Qe.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Ig(i,o,u):(ze(Qe,Qe.current&1),i=cr(i,o,u),i!==null?i.sibling:null);ze(Qe,Qe.current&1);break;case 19:if(f=(u&o.childLanes)!==0,(i.flags&128)!==0){if(f)return zg(i,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),ze(Qe,Qe.current),f)break;return null;case 22:case 23:return o.lanes=0,Dg(i,o,u)}return cr(i,o,u)}var jg,Yc,Fg,_g;jg=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Yc=function(){},Fg=function(i,o,u,f){var g=i.memoizedProps;if(g!==f){i=o.stateNode,hi(Vn.current);var y=null;switch(u){case"input":g=yt(i,g),f=yt(i,f),y=[];break;case"select":g=X({},g,{value:void 0}),f=X({},f,{value:void 0}),y=[];break;case"textarea":g=wr(i,g),f=wr(i,f),y=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Dl)}Ri(u,f);var w;u=null;for(j in g)if(!f.hasOwnProperty(j)&&g.hasOwnProperty(j)&&g[j]!=null)if(j==="style"){var O=g[j];for(w in O)O.hasOwnProperty(w)&&(u||(u={}),u[w]="")}else j!=="dangerouslySetInnerHTML"&&j!=="children"&&j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&j!=="autoFocus"&&(s.hasOwnProperty(j)?y||(y=[]):(y=y||[]).push(j,null));for(j in f){var M=f[j];if(O=g!=null?g[j]:void 0,f.hasOwnProperty(j)&&M!==O&&(M!=null||O!=null))if(j==="style")if(O){for(w in O)!O.hasOwnProperty(w)||M&&M.hasOwnProperty(w)||(u||(u={}),u[w]="");for(w in M)M.hasOwnProperty(w)&&O[w]!==M[w]&&(u||(u={}),u[w]=M[w])}else u||(y||(y=[]),y.push(j,u)),u=M;else j==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,O=O?O.__html:void 0,M!=null&&O!==M&&(y=y||[]).push(j,M)):j==="children"?typeof M!="string"&&typeof M!="number"||(y=y||[]).push(j,""+M):j!=="suppressContentEditableWarning"&&j!=="suppressHydrationWarning"&&(s.hasOwnProperty(j)?(M!=null&&j==="onScroll"&&je("scroll",i),y||O===M||(y=[])):(y=y||[]).push(j,M))}u&&(y=y||[]).push("style",u);var j=y;(o.updateQueue=j)&&(o.flags|=4)}},_g=function(i,o,u,f){u!==f&&(o.flags|=4)};function oo(i,o){if(!Ve)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Ot(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(o)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=u,o}function Vw(i,o,u){var f=o.pendingProps;switch(vc(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ot(o),null;case 1:return Vt(o.type)&&Tl(),Ot(o),null;case 3:return f=o.stateNode,qi(),Fe(_t),Fe(St),Rc(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(zl(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Cn!==null&&(lh(Cn),Cn=null))),Yc(i,o),Ot(o),null;case 5:Ec(o);var g=hi(to.current);if(u=o.type,i!==null&&o.stateNode!=null)Fg(i,o,u,f,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return Ot(o),null}if(i=hi(Vn.current),zl(o)){f=o.stateNode,u=o.type;var y=o.memoizedProps;switch(f[_n]=o,f[Ys]=y,i=(o.mode&1)!==0,u){case"dialog":je("cancel",f),je("close",f);break;case"iframe":case"object":case"embed":je("load",f);break;case"video":case"audio":for(g=0;g<Xs.length;g++)je(Xs[g],f);break;case"source":je("error",f);break;case"img":case"image":case"link":je("error",f),je("load",f);break;case"details":je("toggle",f);break;case"input":er(f,y),je("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!y.multiple},je("invalid",f);break;case"textarea":Ps(f,y),je("invalid",f)}Ri(u,y),g=null;for(var w in y)if(y.hasOwnProperty(w)){var O=y[w];w==="children"?typeof O=="string"?f.textContent!==O&&(y.suppressHydrationWarning!==!0&&El(f.textContent,O,i),g=["children",O]):typeof O=="number"&&f.textContent!==""+O&&(y.suppressHydrationWarning!==!0&&El(f.textContent,O,i),g=["children",""+O]):s.hasOwnProperty(w)&&O!=null&&w==="onScroll"&&je("scroll",f)}switch(u){case"input":Kt(f),Cs(f,y,!0);break;case"textarea":Kt(f),ol(f);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(f.onclick=Dl)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{w=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=ll(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=w.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=w.createElement(u,{is:f.is}):(i=w.createElement(u),u==="select"&&(w=i,f.multiple?w.multiple=!0:f.size&&(w.size=f.size))):i=w.createElementNS(i,u),i[_n]=o,i[Ys]=f,jg(i,o,!1,!1),o.stateNode=i;e:{switch(w=Es(u,f),u){case"dialog":je("cancel",i),je("close",i),g=f;break;case"iframe":case"object":case"embed":je("load",i),g=f;break;case"video":case"audio":for(g=0;g<Xs.length;g++)je(Xs[g],i);g=f;break;case"source":je("error",i),g=f;break;case"img":case"image":case"link":je("error",i),je("load",i),g=f;break;case"details":je("toggle",i),g=f;break;case"input":er(i,f),g=yt(i,f),je("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=X({},f,{value:void 0}),je("invalid",i);break;case"textarea":Ps(i,f),g=wr(i,f),je("invalid",i);break;default:g=f}Ri(u,g),O=g;for(y in O)if(O.hasOwnProperty(y)){var M=O[y];y==="style"?cl(i,M):y==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&kr(i,M)):y==="children"?typeof M=="string"?(u!=="textarea"||M!=="")&&Sr(i,M):typeof M=="number"&&Sr(i,""+M):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?M!=null&&y==="onScroll"&&je("scroll",i):M!=null&&B(i,y,M,w))}switch(u){case"input":Kt(i),Cs(i,f,!1);break;case"textarea":Kt(i),ol(i);break;case"option":f.value!=null&&i.setAttribute("value",""+we(f.value));break;case"select":i.multiple=!!f.multiple,y=f.value,y!=null?vn(i,!!f.multiple,y,!1):f.defaultValue!=null&&vn(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Dl)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Ot(o),null;case 6:if(i&&o.stateNode!=null)_g(i,o,i.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(u=hi(to.current),hi(Vn.current),zl(o)){if(f=o.stateNode,u=o.memoizedProps,f[_n]=o,(y=f.nodeValue!==u)&&(i=Zt,i!==null))switch(i.tag){case 3:El(f.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&El(f.nodeValue,u,(i.mode&1)!==0)}y&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[_n]=o,o.stateNode=f}return Ot(o),null;case 13:if(Fe(Qe),f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ve&&Jt!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Wp(),$i(),o.flags|=98560,y=!1;else if(y=zl(o),f!==null&&f.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[_n]=o}else $i(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Ot(o),y=!1}else Cn!==null&&(lh(Cn),Cn=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Qe.current&1)!==0?rt===0&&(rt=3):ch())),o.updateQueue!==null&&(o.flags|=4),Ot(o),null);case 4:return qi(),Yc(i,o),i===null&&Ks(o.stateNode.containerInfo),Ot(o),null;case 10:return Oc(o.type._context),Ot(o),null;case 17:return Vt(o.type)&&Tl(),Ot(o),null;case 19:if(Fe(Qe),y=o.memoizedState,y===null)return Ot(o),null;if(f=(o.flags&128)!==0,w=y.rendering,w===null)if(f)oo(y,!1);else{if(rt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(w=Wl(i),w!==null){for(o.flags|=128,oo(y,!1),f=w.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)y=u,i=f,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,i=w.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return ze(Qe,Qe.current&1|2),o.child}i=i.sibling}y.tail!==null&&qe()>Ji&&(o.flags|=128,f=!0,oo(y,!1),o.lanes=4194304)}else{if(!f)if(i=Wl(w),i!==null){if(o.flags|=128,f=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),oo(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!Ve)return Ot(o),null}else 2*qe()-y.renderingStartTime>Ji&&u!==1073741824&&(o.flags|=128,f=!0,oo(y,!1),o.lanes=4194304);y.isBackwards?(w.sibling=o.child,o.child=w):(u=y.last,u!==null?u.sibling=w:o.child=w,y.last=w)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=qe(),o.sibling=null,u=Qe.current,ze(Qe,f?u&1|2:u&1),o):(Ot(o),null);case 22:case 23:return uh(),f=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(en&1073741824)!==0&&(Ot(o),o.subtreeFlags&6&&(o.flags|=8192)):Ot(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function Hw(i,o){switch(vc(o),o.tag){case 1:return Vt(o.type)&&Tl(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return qi(),Fe(_t),Fe(St),Rc(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Ec(o),null;case 13:if(Fe(Qe),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));$i()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Fe(Qe),null;case 4:return qi(),null;case 10:return Oc(o.type._context),null;case 22:case 23:return uh(),null;case 24:return null;default:return null}}var Zl=!1,Ct=!1,Ww=typeof WeakSet=="function"?WeakSet:Set,ae=null;function Gi(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Ue(i,o,f)}else u.current=null}function Gc(i,o,u){try{u()}catch(f){Ue(i,o,f)}}var Vg=!1;function Qw(i,o){if(uc=vl,i=xp(),tc(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var w=0,O=-1,M=-1,j=0,Q=0,U=i,H=null;t:for(;;){for(var le;U!==u||g!==0&&U.nodeType!==3||(O=w+g),U!==y||f!==0&&U.nodeType!==3||(M=w+f),U.nodeType===3&&(w+=U.nodeValue.length),(le=U.firstChild)!==null;)H=U,U=le;for(;;){if(U===i)break t;if(H===u&&++j===g&&(O=w),H===y&&++Q===f&&(M=w),(le=U.nextSibling)!==null)break;U=H,H=U.parentNode}U=le}u=O===-1||M===-1?null:{start:O,end:M}}else u=null}u=u||{start:0,end:0}}else u=null;for(cc={focusedElem:i,selectionRange:u},vl=!1,ae=o;ae!==null;)if(o=ae,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ae=i;else for(;ae!==null;){o=ae;try{var ue=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ue!==null){var de=ue.memoizedProps,Ye=ue.memoizedState,R=o.stateNode,E=R.getSnapshotBeforeUpdate(o.elementType===o.type?de:Pn(o.type,de),Ye);R.__reactInternalSnapshotBeforeUpdate=E}break;case 3:var N=o.stateNode.containerInfo;N.nodeType===1?N.textContent="":N.nodeType===9&&N.documentElement&&N.removeChild(N.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(Y){Ue(o,o.return,Y)}if(i=o.sibling,i!==null){i.return=o.return,ae=i;break}ae=o.return}return ue=Vg,Vg=!1,ue}function lo(i,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var y=g.destroy;g.destroy=void 0,y!==void 0&&Gc(o,u,y)}g=g.next}while(g!==f)}}function Jl(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function Zc(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function Hg(i){var o=i.alternate;o!==null&&(i.alternate=null,Hg(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[_n],delete o[Ys],delete o[pc],delete o[Pw],delete o[Aw])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Wg(i){return i.tag===5||i.tag===3||i.tag===4}function Qg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Wg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function Jc(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Dl));else if(f!==4&&(i=i.child,i!==null))for(Jc(i,o,u),i=i.sibling;i!==null;)Jc(i,o,u),i=i.sibling}function eh(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(eh(i,o,u),i=i.sibling;i!==null;)eh(i,o,u),i=i.sibling}var dt=null,An=!1;function Br(i,o,u){for(u=u.child;u!==null;)$g(i,o,u),u=u.sibling}function $g(i,o,u){if(Fn&&typeof Fn.onCommitFiberUnmount=="function")try{Fn.onCommitFiberUnmount(fl,u)}catch{}switch(u.tag){case 5:Ct||Gi(u,o);case 6:var f=dt,g=An;dt=null,Br(i,o,u),dt=f,An=g,dt!==null&&(An?(i=dt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):dt.removeChild(u.stateNode));break;case 18:dt!==null&&(An?(i=dt,u=u.stateNode,i.nodeType===8?dc(i.parentNode,u):i.nodeType===1&&dc(i,u),Fs(i)):dc(dt,u.stateNode));break;case 4:f=dt,g=An,dt=u.stateNode.containerInfo,An=!0,Br(i,o,u),dt=f,An=g;break;case 0:case 11:case 14:case 15:if(!Ct&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var y=g,w=y.destroy;y=y.tag,w!==void 0&&((y&2)!==0||(y&4)!==0)&&Gc(u,o,w),g=g.next}while(g!==f)}Br(i,o,u);break;case 1:if(!Ct&&(Gi(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(O){Ue(u,o,O)}Br(i,o,u);break;case 21:Br(i,o,u);break;case 22:u.mode&1?(Ct=(f=Ct)||u.memoizedState!==null,Br(i,o,u),Ct=f):Br(i,o,u);break;default:Br(i,o,u)}}function Ug(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new Ww),o.forEach(function(f){var g=Jw.bind(null,i,f);u.has(f)||(u.add(f),f.then(g,g))})}}function Mn(i,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var y=i,w=o,O=w;e:for(;O!==null;){switch(O.tag){case 5:dt=O.stateNode,An=!1;break e;case 3:dt=O.stateNode.containerInfo,An=!0;break e;case 4:dt=O.stateNode.containerInfo,An=!0;break e}O=O.return}if(dt===null)throw Error(t(160));$g(y,w,g),dt=null,An=!1;var M=g.alternate;M!==null&&(M.return=null),g.return=null}catch(j){Ue(g,o,j)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Xg(o,i),o=o.sibling}function Xg(i,o){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(Mn(o,i),Wn(i),f&4){try{lo(3,i,i.return),Jl(3,i)}catch(de){Ue(i,i.return,de)}try{lo(5,i,i.return)}catch(de){Ue(i,i.return,de)}}break;case 1:Mn(o,i),Wn(i),f&512&&u!==null&&Gi(u,u.return);break;case 5:if(Mn(o,i),Wn(i),f&512&&u!==null&&Gi(u,u.return),i.flags&32){var g=i.stateNode;try{Sr(g,"")}catch(de){Ue(i,i.return,de)}}if(f&4&&(g=i.stateNode,g!=null)){var y=i.memoizedProps,w=u!==null?u.memoizedProps:y,O=i.type,M=i.updateQueue;if(i.updateQueue=null,M!==null)try{O==="input"&&y.type==="radio"&&y.name!=null&&tr(g,y),Es(O,w);var j=Es(O,y);for(w=0;w<M.length;w+=2){var Q=M[w],U=M[w+1];Q==="style"?cl(g,U):Q==="dangerouslySetInnerHTML"?kr(g,U):Q==="children"?Sr(g,U):B(g,Q,U,j)}switch(O){case"input":Di(g,y);break;case"textarea":As(g,y);break;case"select":var H=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var le=y.value;le!=null?vn(g,!!y.multiple,le,!1):H!==!!y.multiple&&(y.defaultValue!=null?vn(g,!!y.multiple,y.defaultValue,!0):vn(g,!!y.multiple,y.multiple?[]:"",!1))}g[Ys]=y}catch(de){Ue(i,i.return,de)}}break;case 6:if(Mn(o,i),Wn(i),f&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,y=i.memoizedProps;try{g.nodeValue=y}catch(de){Ue(i,i.return,de)}}break;case 3:if(Mn(o,i),Wn(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Fs(o.containerInfo)}catch(de){Ue(i,i.return,de)}break;case 4:Mn(o,i),Wn(i);break;case 13:Mn(o,i),Wn(i),g=i.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(rh=qe())),f&4&&Ug(i);break;case 22:if(Q=u!==null&&u.memoizedState!==null,i.mode&1?(Ct=(j=Ct)||Q,Mn(o,i),Ct=j):Mn(o,i),Wn(i),f&8192){if(j=i.memoizedState!==null,(i.stateNode.isHidden=j)&&!Q&&(i.mode&1)!==0)for(ae=i,Q=i.child;Q!==null;){for(U=ae=Q;ae!==null;){switch(H=ae,le=H.child,H.tag){case 0:case 11:case 14:case 15:lo(4,H,H.return);break;case 1:Gi(H,H.return);var ue=H.stateNode;if(typeof ue.componentWillUnmount=="function"){f=H,u=H.return;try{o=f,ue.props=o.memoizedProps,ue.state=o.memoizedState,ue.componentWillUnmount()}catch(de){Ue(f,u,de)}}break;case 5:Gi(H,H.return);break;case 22:if(H.memoizedState!==null){Yg(U);continue}}le!==null?(le.return=H,ae=le):Yg(U)}Q=Q.sibling}e:for(Q=null,U=i;;){if(U.tag===5){if(Q===null){Q=U;try{g=U.stateNode,j?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(O=U.stateNode,M=U.memoizedProps.style,w=M!=null&&M.hasOwnProperty("display")?M.display:null,O.style.display=ul("display",w))}catch(de){Ue(i,i.return,de)}}}else if(U.tag===6){if(Q===null)try{U.stateNode.nodeValue=j?"":U.memoizedProps}catch(de){Ue(i,i.return,de)}}else if((U.tag!==22&&U.tag!==23||U.memoizedState===null||U===i)&&U.child!==null){U.child.return=U,U=U.child;continue}if(U===i)break e;for(;U.sibling===null;){if(U.return===null||U.return===i)break e;Q===U&&(Q=null),U=U.return}Q===U&&(Q=null),U.sibling.return=U.return,U=U.sibling}}break;case 19:Mn(o,i),Wn(i),f&4&&Ug(i);break;case 21:break;default:Mn(o,i),Wn(i)}}function Wn(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(Wg(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(Sr(g,""),f.flags&=-33);var y=Qg(i);eh(i,y,g);break;case 3:case 4:var w=f.stateNode.containerInfo,O=Qg(i);Jc(i,O,w);break;default:throw Error(t(161))}}catch(M){Ue(i,i.return,M)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function $w(i,o,u){ae=i,Kg(i)}function Kg(i,o,u){for(var f=(i.mode&1)!==0;ae!==null;){var g=ae,y=g.child;if(g.tag===22&&f){var w=g.memoizedState!==null||Zl;if(!w){var O=g.alternate,M=O!==null&&O.memoizedState!==null||Ct;O=Zl;var j=Ct;if(Zl=w,(Ct=M)&&!j)for(ae=g;ae!==null;)w=ae,M=w.child,w.tag===22&&w.memoizedState!==null?Gg(g):M!==null?(M.return=w,ae=M):Gg(g);for(;y!==null;)ae=y,Kg(y),y=y.sibling;ae=g,Zl=O,Ct=j}qg(i)}else(g.subtreeFlags&8772)!==0&&y!==null?(y.return=g,ae=y):qg(i)}}function qg(i){for(;ae!==null;){var o=ae;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Ct||Jl(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Ct)if(u===null)f.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:Pn(o.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&Yp(o,y,f);break;case 3:var w=o.updateQueue;if(w!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}Yp(o,w,u)}break;case 5:var O=o.stateNode;if(u===null&&o.flags&4){u=O;var M=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&u.focus();break;case"img":M.src&&(u.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var j=o.alternate;if(j!==null){var Q=j.memoizedState;if(Q!==null){var U=Q.dehydrated;U!==null&&Fs(U)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Ct||o.flags&512&&Zc(o)}catch(H){Ue(o,o.return,H)}}if(o===i){ae=null;break}if(u=o.sibling,u!==null){u.return=o.return,ae=u;break}ae=o.return}}function Yg(i){for(;ae!==null;){var o=ae;if(o===i){ae=null;break}var u=o.sibling;if(u!==null){u.return=o.return,ae=u;break}ae=o.return}}function Gg(i){for(;ae!==null;){var o=ae;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{Jl(4,o)}catch(M){Ue(o,u,M)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(M){Ue(o,g,M)}}var y=o.return;try{Zc(o)}catch(M){Ue(o,y,M)}break;case 5:var w=o.return;try{Zc(o)}catch(M){Ue(o,w,M)}}}catch(M){Ue(o,o.return,M)}if(o===i){ae=null;break}var O=o.sibling;if(O!==null){O.return=o.return,ae=O;break}ae=o.return}}var Uw=Math.ceil,ea=_.ReactCurrentDispatcher,th=_.ReactCurrentOwner,hn=_.ReactCurrentBatchConfig,Me=0,lt=null,Je=null,pt=0,en=0,Zi=Rr(0),rt=0,ao=null,di=0,ta=0,nh=0,uo=null,Wt=null,rh=0,Ji=1/0,hr=null,na=!1,ih=null,zr=null,ra=!1,jr=null,ia=0,co=0,sh=null,sa=-1,oa=0;function Tt(){return(Me&6)!==0?qe():sa!==-1?sa:sa=qe()}function Fr(i){return(i.mode&1)===0?1:(Me&2)!==0&&pt!==0?pt&-pt:Ew.transition!==null?(oa===0&&(oa=Qd()),oa):(i=Le,i!==0||(i=window.event,i=i===void 0?16:Jd(i.type)),i)}function En(i,o,u,f){if(50<co)throw co=0,sh=null,Error(t(185));Ls(i,u,f),((Me&2)===0||i!==lt)&&(i===lt&&((Me&2)===0&&(ta|=u),rt===4&&_r(i,pt)),Qt(i,f),u===1&&Me===0&&(o.mode&1)===0&&(Ji=qe()+500,Ll&&Nr()))}function Qt(i,o){var u=i.callbackNode;Ex(i,o);var f=gl(i,i===lt?pt:0);if(f===0)u!==null&&Vd(u),i.callbackNode=null,i.callbackPriority=0;else if(o=f&-f,i.callbackPriority!==o){if(u!=null&&Vd(u),o===1)i.tag===0?Mw(Jg.bind(null,i)):jp(Jg.bind(null,i)),Ow(function(){(Me&6)===0&&Nr()}),u=null;else{switch($d(f)){case 1:u=ju;break;case 4:u=Hd;break;case 16:u=hl;break;case 536870912:u=Wd;break;default:u=hl}u=lm(u,Zg.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function Zg(i,o){if(sa=-1,oa=0,(Me&6)!==0)throw Error(t(327));var u=i.callbackNode;if(es()&&i.callbackNode!==u)return null;var f=gl(i,i===lt?pt:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||o)o=la(i,f);else{o=f;var g=Me;Me|=2;var y=tm();(lt!==i||pt!==o)&&(hr=null,Ji=qe()+500,gi(i,o));do try{qw();break}catch(O){em(i,O)}while(!0);bc(),ea.current=y,Me=g,Je!==null?o=0:(lt=null,pt=0,o=rt)}if(o!==0){if(o===2&&(g=Fu(i),g!==0&&(f=g,o=oh(i,g))),o===1)throw u=ao,gi(i,0),_r(i,f),Qt(i,qe()),u;if(o===6)_r(i,f);else{if(g=i.current.alternate,(f&30)===0&&!Xw(g)&&(o=la(i,f),o===2&&(y=Fu(i),y!==0&&(f=y,o=oh(i,y))),o===1))throw u=ao,gi(i,0),_r(i,f),Qt(i,qe()),u;switch(i.finishedWork=g,i.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:mi(i,Wt,hr);break;case 3:if(_r(i,f),(f&130023424)===f&&(o=rh+500-qe(),10<o)){if(gl(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){Tt(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=fc(mi.bind(null,i,Wt,hr),o);break}mi(i,Wt,hr);break;case 4:if(_r(i,f),(f&4194240)===f)break;for(o=i.eventTimes,g=-1;0<f;){var w=31-bn(f);y=1<<w,w=o[w],w>g&&(g=w),f&=~y}if(f=g,f=qe()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*Uw(f/1960))-f,10<f){i.timeoutHandle=fc(mi.bind(null,i,Wt,hr),f);break}mi(i,Wt,hr);break;case 5:mi(i,Wt,hr);break;default:throw Error(t(329))}}}return Qt(i,qe()),i.callbackNode===u?Zg.bind(null,i):null}function oh(i,o){var u=uo;return i.current.memoizedState.isDehydrated&&(gi(i,o).flags|=256),i=la(i,o),i!==2&&(o=Wt,Wt=u,o!==null&&lh(o)),i}function lh(i){Wt===null?Wt=i:Wt.push.apply(Wt,i)}function Xw(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],y=g.getSnapshot;g=g.value;try{if(!On(y(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function _r(i,o){for(o&=~nh,o&=~ta,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-bn(o),f=1<<u;i[u]=-1,o&=~f}}function Jg(i){if((Me&6)!==0)throw Error(t(327));es();var o=gl(i,0);if((o&1)===0)return Qt(i,qe()),null;var u=la(i,o);if(i.tag!==0&&u===2){var f=Fu(i);f!==0&&(o=f,u=oh(i,f))}if(u===1)throw u=ao,gi(i,0),_r(i,o),Qt(i,qe()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,mi(i,Wt,hr),Qt(i,qe()),null}function ah(i,o){var u=Me;Me|=1;try{return i(o)}finally{Me=u,Me===0&&(Ji=qe()+500,Ll&&Nr())}}function pi(i){jr!==null&&jr.tag===0&&(Me&6)===0&&es();var o=Me;Me|=1;var u=hn.transition,f=Le;try{if(hn.transition=null,Le=1,i)return i()}finally{Le=f,hn.transition=u,Me=o,(Me&6)===0&&Nr()}}function uh(){en=Zi.current,Fe(Zi)}function gi(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,bw(u)),Je!==null)for(u=Je.return;u!==null;){var f=u;switch(vc(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Tl();break;case 3:qi(),Fe(_t),Fe(St),Rc();break;case 5:Ec(f);break;case 4:qi();break;case 13:Fe(Qe);break;case 19:Fe(Qe);break;case 10:Oc(f.type._context);break;case 22:case 23:uh()}u=u.return}if(lt=i,Je=i=Vr(i.current,null),pt=en=o,rt=0,ao=null,nh=ta=di=0,Wt=uo=null,ci!==null){for(o=0;o<ci.length;o++)if(u=ci[o],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,y=u.pending;if(y!==null){var w=y.next;y.next=g,f.next=w}u.pending=f}ci=null}return i}function em(i,o){do{var u=Je;try{if(bc(),Ql.current=Kl,$l){for(var f=$e.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}$l=!1}if(fi=0,ot=nt=$e=null,no=!1,ro=0,th.current=null,u===null||u.return===null){rt=1,ao=o,Je=null;break}e:{var y=i,w=u.return,O=u,M=o;if(o=pt,O.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var j=M,Q=O,U=Q.tag;if((Q.mode&1)===0&&(U===0||U===11||U===15)){var H=Q.alternate;H?(Q.updateQueue=H.updateQueue,Q.memoizedState=H.memoizedState,Q.lanes=H.lanes):(Q.updateQueue=null,Q.memoizedState=null)}var le=Cg(w);if(le!==null){le.flags&=-257,Pg(le,w,O,y,o),le.mode&1&&Og(y,j,o),o=le,M=j;var ue=o.updateQueue;if(ue===null){var de=new Set;de.add(M),o.updateQueue=de}else ue.add(M);break e}else{if((o&1)===0){Og(y,j,o),ch();break e}M=Error(t(426))}}else if(Ve&&O.mode&1){var Ye=Cg(w);if(Ye!==null){(Ye.flags&65536)===0&&(Ye.flags|=256),Pg(Ye,w,O,y,o),kc(Yi(M,O));break e}}y=M=Yi(M,O),rt!==4&&(rt=2),uo===null?uo=[y]:uo.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var R=Sg(y,M,o);qp(y,R);break e;case 1:O=M;var E=y.type,N=y.stateNode;if((y.flags&128)===0&&(typeof E.getDerivedStateFromError=="function"||N!==null&&typeof N.componentDidCatch=="function"&&(zr===null||!zr.has(N)))){y.flags|=65536,o&=-o,y.lanes|=o;var Y=bg(y,O,o);qp(y,Y);break e}}y=y.return}while(y!==null)}rm(u)}catch(me){o=me,Je===u&&u!==null&&(Je=u=u.return);continue}break}while(!0)}function tm(){var i=ea.current;return ea.current=Kl,i===null?Kl:i}function ch(){(rt===0||rt===3||rt===2)&&(rt=4),lt===null||(di&268435455)===0&&(ta&268435455)===0||_r(lt,pt)}function la(i,o){var u=Me;Me|=2;var f=tm();(lt!==i||pt!==o)&&(hr=null,gi(i,o));do try{Kw();break}catch(g){em(i,g)}while(!0);if(bc(),Me=u,ea.current=f,Je!==null)throw Error(t(261));return lt=null,pt=0,rt}function Kw(){for(;Je!==null;)nm(Je)}function qw(){for(;Je!==null&&!wx();)nm(Je)}function nm(i){var o=om(i.alternate,i,en);i.memoizedProps=i.pendingProps,o===null?rm(i):Je=o,th.current=null}function rm(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=Vw(u,o,en),u!==null){Je=u;return}}else{if(u=Hw(u,o),u!==null){u.flags&=32767,Je=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{rt=6,Je=null;return}}if(o=o.sibling,o!==null){Je=o;return}Je=o=i}while(o!==null);rt===0&&(rt=5)}function mi(i,o,u){var f=Le,g=hn.transition;try{hn.transition=null,Le=1,Yw(i,o,u,f)}finally{hn.transition=g,Le=f}return null}function Yw(i,o,u,f){do es();while(jr!==null);if((Me&6)!==0)throw Error(t(327));u=i.finishedWork;var g=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=u.lanes|u.childLanes;if(Dx(i,y),i===lt&&(Je=lt=null,pt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||ra||(ra=!0,lm(hl,function(){return es(),null})),y=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||y){y=hn.transition,hn.transition=null;var w=Le;Le=1;var O=Me;Me|=4,th.current=null,Qw(i,u),Xg(u,i),mw(cc),vl=!!uc,cc=uc=null,i.current=u,$w(u),kx(),Me=O,Le=w,hn.transition=y}else i.current=u;if(ra&&(ra=!1,jr=i,ia=g),y=i.pendingLanes,y===0&&(zr=null),Ox(u.stateNode),Qt(i,qe()),o!==null)for(f=i.onRecoverableError,u=0;u<o.length;u++)g=o[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(na)throw na=!1,i=ih,ih=null,i;return(ia&1)!==0&&i.tag!==0&&es(),y=i.pendingLanes,(y&1)!==0?i===sh?co++:(co=0,sh=i):co=0,Nr(),null}function es(){if(jr!==null){var i=$d(ia),o=hn.transition,u=Le;try{if(hn.transition=null,Le=16>i?16:i,jr===null)var f=!1;else{if(i=jr,jr=null,ia=0,(Me&6)!==0)throw Error(t(331));var g=Me;for(Me|=4,ae=i.current;ae!==null;){var y=ae,w=y.child;if((ae.flags&16)!==0){var O=y.deletions;if(O!==null){for(var M=0;M<O.length;M++){var j=O[M];for(ae=j;ae!==null;){var Q=ae;switch(Q.tag){case 0:case 11:case 15:lo(8,Q,y)}var U=Q.child;if(U!==null)U.return=Q,ae=U;else for(;ae!==null;){Q=ae;var H=Q.sibling,le=Q.return;if(Hg(Q),Q===j){ae=null;break}if(H!==null){H.return=le,ae=H;break}ae=le}}}var ue=y.alternate;if(ue!==null){var de=ue.child;if(de!==null){ue.child=null;do{var Ye=de.sibling;de.sibling=null,de=Ye}while(de!==null)}}ae=y}}if((y.subtreeFlags&2064)!==0&&w!==null)w.return=y,ae=w;else e:for(;ae!==null;){if(y=ae,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:lo(9,y,y.return)}var R=y.sibling;if(R!==null){R.return=y.return,ae=R;break e}ae=y.return}}var E=i.current;for(ae=E;ae!==null;){w=ae;var N=w.child;if((w.subtreeFlags&2064)!==0&&N!==null)N.return=w,ae=N;else e:for(w=E;ae!==null;){if(O=ae,(O.flags&2048)!==0)try{switch(O.tag){case 0:case 11:case 15:Jl(9,O)}}catch(me){Ue(O,O.return,me)}if(O===w){ae=null;break e}var Y=O.sibling;if(Y!==null){Y.return=O.return,ae=Y;break e}ae=O.return}}if(Me=g,Nr(),Fn&&typeof Fn.onPostCommitFiberRoot=="function")try{Fn.onPostCommitFiberRoot(fl,i)}catch{}f=!0}return f}finally{Le=u,hn.transition=o}}return!1}function im(i,o,u){o=Yi(u,o),o=Sg(i,o,1),i=Ir(i,o,1),o=Tt(),i!==null&&(Ls(i,1,o),Qt(i,o))}function Ue(i,o,u){if(i.tag===3)im(i,i,u);else for(;o!==null;){if(o.tag===3){im(o,i,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(zr===null||!zr.has(f))){i=Yi(u,i),i=bg(o,i,1),o=Ir(o,i,1),i=Tt(),o!==null&&(Ls(o,1,i),Qt(o,i));break}}o=o.return}}function Gw(i,o,u){var f=i.pingCache;f!==null&&f.delete(o),o=Tt(),i.pingedLanes|=i.suspendedLanes&u,lt===i&&(pt&u)===u&&(rt===4||rt===3&&(pt&130023424)===pt&&500>qe()-rh?gi(i,0):nh|=u),Qt(i,o)}function sm(i,o){o===0&&((i.mode&1)===0?o=1:(o=pl,pl<<=1,(pl&130023424)===0&&(pl=4194304)));var u=Tt();i=ar(i,o),i!==null&&(Ls(i,o,u),Qt(i,u))}function Zw(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),sm(i,u)}function Jw(i,o){var u=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),sm(i,u)}var om;om=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||_t.current)Ht=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return Ht=!1,_w(i,o,u);Ht=(i.flags&131072)!==0}else Ht=!1,Ve&&(o.flags&1048576)!==0&&Fp(o,Bl,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;Gl(i,o),i=o.pendingProps;var g=Hi(o,St.current);Ki(o,u),g=Lc(null,o,f,i,g,u);var y=Ic();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,Vt(f)?(y=!0,Nl(o)):y=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Ac(o),g.updater=ql,o.stateNode=g,g._reactInternals=o,Vc(o,f,i,u),o=$c(null,o,f,!0,y,u)):(o.tag=0,Ve&&y&&yc(o),Rt(null,o,g,u),o=o.child),o;case 16:f=o.elementType;e:{switch(Gl(i,o),i=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=tk(f),i=Pn(f,i),g){case 0:o=Qc(null,o,f,i,u);break e;case 1:o=Tg(null,o,f,i,u);break e;case 11:o=Ag(null,o,f,i,u);break e;case 14:o=Mg(null,o,f,Pn(f.type,i),u);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Pn(f,g),Qc(i,o,f,g,u);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Pn(f,g),Tg(i,o,f,g,u);case 3:e:{if(Ng(o),i===null)throw Error(t(387));f=o.pendingProps,y=o.memoizedState,g=y.element,Kp(i,o),Hl(o,f,null,u);var w=o.memoizedState;if(f=w.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){g=Yi(Error(t(423)),o),o=Lg(i,o,f,u,g);break e}else if(f!==g){g=Yi(Error(t(424)),o),o=Lg(i,o,f,u,g);break e}else for(Jt=Dr(o.stateNode.containerInfo.firstChild),Zt=o,Ve=!0,Cn=null,u=Up(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if($i(),f===g){o=cr(i,o,u);break e}Rt(i,o,f,u)}o=o.child}return o;case 5:return Gp(o),i===null&&wc(o),f=o.type,g=o.pendingProps,y=i!==null?i.memoizedProps:null,w=g.children,hc(f,g)?w=null:y!==null&&hc(f,y)&&(o.flags|=32),Rg(i,o),Rt(i,o,w,u),o.child;case 6:return i===null&&wc(o),null;case 13:return Ig(i,o,u);case 4:return Mc(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=Ui(o,null,f,u):Rt(i,o,f,u),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Pn(f,g),Ag(i,o,f,g,u);case 7:return Rt(i,o,o.pendingProps,u),o.child;case 8:return Rt(i,o,o.pendingProps.children,u),o.child;case 12:return Rt(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,y=o.memoizedProps,w=g.value,ze(Fl,f._currentValue),f._currentValue=w,y!==null)if(On(y.value,w)){if(y.children===g.children&&!_t.current){o=cr(i,o,u);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var O=y.dependencies;if(O!==null){w=y.child;for(var M=O.firstContext;M!==null;){if(M.context===f){if(y.tag===1){M=ur(-1,u&-u),M.tag=2;var j=y.updateQueue;if(j!==null){j=j.shared;var Q=j.pending;Q===null?M.next=M:(M.next=Q.next,Q.next=M),j.pending=M}}y.lanes|=u,M=y.alternate,M!==null&&(M.lanes|=u),Cc(y.return,u,o),O.lanes|=u;break}M=M.next}}else if(y.tag===10)w=y.type===o.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(t(341));w.lanes|=u,O=w.alternate,O!==null&&(O.lanes|=u),Cc(w,u,o),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===o){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}Rt(i,o,g.children,u),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,Ki(o,u),g=un(g),f=f(g),o.flags|=1,Rt(i,o,f,u),o.child;case 14:return f=o.type,g=Pn(f,o.pendingProps),g=Pn(f.type,g),Mg(i,o,f,g,u);case 15:return Eg(i,o,o.type,o.pendingProps,u);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Pn(f,g),Gl(i,o),o.tag=1,Vt(f)?(i=!0,Nl(o)):i=!1,Ki(o,u),wg(o,f,g),Vc(o,f,g,u),$c(null,o,f,!0,i,u);case 19:return zg(i,o,u);case 22:return Dg(i,o,u)}throw Error(t(156,o.tag))};function lm(i,o){return _d(i,o)}function ek(i,o,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function fn(i,o,u,f){return new ek(i,o,u,f)}function hh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function tk(i){if(typeof i=="function")return hh(i)?1:0;if(i!=null){if(i=i.$$typeof,i===ne)return 11;if(i===q)return 14}return 2}function Vr(i,o){var u=i.alternate;return u===null?(u=fn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function aa(i,o,u,f,g,y){var w=2;if(f=i,typeof i=="function")hh(i)&&(w=1);else if(typeof i=="string")w=5;else e:switch(i){case z:return yi(u.children,g,y,o);case K:w=8,g|=8;break;case J:return i=fn(12,u,o,g|2),i.elementType=J,i.lanes=y,i;case ce:return i=fn(13,u,o,g),i.elementType=ce,i.lanes=y,i;case he:return i=fn(19,u,o,g),i.elementType=he,i.lanes=y,i;case pe:return ua(u,g,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case G:w=10;break e;case te:w=9;break e;case ne:w=11;break e;case q:w=14;break e;case fe:w=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=fn(w,u,o,g),o.elementType=i,o.type=f,o.lanes=y,o}function yi(i,o,u,f){return i=fn(7,i,f,o),i.lanes=u,i}function ua(i,o,u,f){return i=fn(22,i,f,o),i.elementType=pe,i.lanes=u,i.stateNode={isHidden:!1},i}function fh(i,o,u){return i=fn(6,i,null,o),i.lanes=u,i}function dh(i,o,u){return o=fn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function nk(i,o,u,f,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=_u(0),this.expirationTimes=_u(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=_u(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function ph(i,o,u,f,g,y,w,O,M){return i=new nk(i,o,u,O,M),o===1?(o=1,y===!0&&(o|=8)):o=0,y=fn(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ac(y),i}function rk(i,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:f==null?null:""+f,children:i,containerInfo:o,implementation:u}}function am(i){if(!i)return Tr;i=i._reactInternals;e:{if(si(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(Vt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(Vt(u))return Bp(i,u,o)}return o}function um(i,o,u,f,g,y,w,O,M){return i=ph(u,f,!0,i,g,y,w,O,M),i.context=am(null),u=i.current,f=Tt(),g=Fr(u),y=ur(f,g),y.callback=o??null,Ir(u,y,g),i.current.lanes=g,Ls(i,g,f),Qt(i,f),i}function ca(i,o,u,f){var g=o.current,y=Tt(),w=Fr(g);return u=am(u),o.context===null?o.context=u:o.pendingContext=u,o=ur(y,w),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=Ir(g,o,w),i!==null&&(En(i,g,w,y),Vl(i,g,w)),w}function ha(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function cm(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function gh(i,o){cm(i,o),(i=i.alternate)&&cm(i,o)}function ik(){return null}var hm=typeof reportError=="function"?reportError:function(i){console.error(i)};function mh(i){this._internalRoot=i}fa.prototype.render=mh.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));ca(i,o,null,null)},fa.prototype.unmount=mh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;pi(function(){ca(null,i,null,null)}),o[ir]=null}};function fa(i){this._internalRoot=i}fa.prototype.unstable_scheduleHydration=function(i){if(i){var o=Kd();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Ar.length&&o!==0&&o<Ar[u].priority;u++);Ar.splice(u,0,i),u===0&&Gd(i)}};function yh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function da(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function fm(){}function sk(i,o,u,f,g){if(g){if(typeof f=="function"){var y=f;f=function(){var j=ha(w);y.call(j)}}var w=um(o,f,i,0,null,!1,!1,"",fm);return i._reactRootContainer=w,i[ir]=w.current,Ks(i.nodeType===8?i.parentNode:i),pi(),w}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var O=f;f=function(){var j=ha(M);O.call(j)}}var M=ph(i,0,!1,null,null,!1,!1,"",fm);return i._reactRootContainer=M,i[ir]=M.current,Ks(i.nodeType===8?i.parentNode:i),pi(function(){ca(o,M,u,f)}),M}function pa(i,o,u,f,g){var y=u._reactRootContainer;if(y){var w=y;if(typeof g=="function"){var O=g;g=function(){var M=ha(w);O.call(M)}}ca(o,w,i,g)}else w=sk(u,o,i,g,f);return ha(w)}Ud=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Ns(o.pendingLanes);u!==0&&(Vu(o,u|1),Qt(o,qe()),(Me&6)===0&&(Ji=qe()+500,Nr()))}break;case 13:pi(function(){var f=ar(i,1);if(f!==null){var g=Tt();En(f,i,1,g)}}),gh(i,1)}},Hu=function(i){if(i.tag===13){var o=ar(i,134217728);if(o!==null){var u=Tt();En(o,i,134217728,u)}gh(i,134217728)}},Xd=function(i){if(i.tag===13){var o=Fr(i),u=ar(i,o);if(u!==null){var f=Tt();En(u,i,o,f)}gh(i,o)}},Kd=function(){return Le},qd=function(i,o){var u=Le;try{return Le=i,o()}finally{Le=u}},Rs=function(i,o,u){switch(o){case"input":if(Di(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==i&&f.form===i.form){var g=Rl(f);if(!g)throw Error(t(90));ft(f),Di(f,g)}}}break;case"textarea":As(i,u);break;case"select":o=u.value,o!=null&&vn(i,!!u.multiple,o,!1)}},Dt=ah,wt=pi;var ok={usingClientEntryPoint:!1,Events:[Gs,_i,Rl,xt,wn,ah]},ho={findFiberByHostInstance:oi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},lk={bundleType:ho.bundleType,version:ho.version,rendererPackageName:ho.rendererPackageName,rendererConfig:ho.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:_.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=jd(i),i===null?null:i.stateNode},findFiberByHostInstance:ho.findFiberByHostInstance||ik,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ga=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ga.isDisabled&&ga.supportsFiber)try{fl=ga.inject(lk),Fn=ga}catch{}}return $t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ok,$t.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!yh(o))throw Error(t(200));return rk(i,o,null,u)},$t.createRoot=function(i,o){if(!yh(i))throw Error(t(299));var u=!1,f="",g=hm;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=ph(i,1,!1,null,null,u,!1,f,g),i[ir]=o.current,Ks(i.nodeType===8?i.parentNode:i),new mh(o)},$t.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=jd(o),i=i===null?null:i.stateNode,i},$t.flushSync=function(i){return pi(i)},$t.hydrate=function(i,o,u){if(!da(o))throw Error(t(200));return pa(null,i,o,!0,u)},$t.hydrateRoot=function(i,o,u){if(!yh(i))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,y="",w=hm;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(w=u.onRecoverableError)),o=um(o,null,i,1,u??null,g,!1,y,w),i[ir]=o.current,Ks(i),f)for(i=0;i<f.length;i++)u=f[i],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new fa(o)},$t.render=function(i,o,u){if(!da(o))throw Error(t(200));return pa(null,i,o,!1,u)},$t.unmountComponentAtNode=function(i){if(!da(i))throw Error(t(40));return i._reactRootContainer?(pi(function(){pa(null,null,i,!1,function(){i._reactRootContainer=null,i[ir]=null})}),!0):!1},$t.unstable_batchedUpdates=ah,$t.unstable_renderSubtreeIntoContainer=function(i,o,u,f){if(!da(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return pa(i,o,u,!1,f)},$t.version="18.3.1-next-f1338f8080-20240426",$t}var km;function Py(){if(km)return wh.exports;km=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),wh.exports=mk(),wh.exports}var Sm;function yk(){if(Sm)return ma;Sm=1;var n=Py();return ma.createRoot=n.createRoot,ma.hydrateRoot=n.hydrateRoot,ma}var vk=yk();const xk=Cy(vk);var xo=Py();function wk(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return P.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const bu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function ws(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function id(n){return"nodeType"in n}function Xt(n){var e,t;return n?ws(n)?n:id(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function sd(n){const{Document:e}=Xt(n);return n instanceof e}function qo(n){return ws(n)?!1:n instanceof Xt(n).HTMLElement}function Ay(n){return n instanceof Xt(n).SVGElement}function ks(n){return n?ws(n)?n.document:id(n)?sd(n)?n:qo(n)||Ay(n)?n.ownerDocument:document:document:document}const Gn=bu?P.useLayoutEffect:P.useEffect;function od(n){const e=P.useRef(n);return Gn(()=>{e.current=n}),P.useCallback(function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function kk(){const n=P.useRef(null),e=P.useCallback((r,s)=>{n.current=setInterval(r,s)},[]),t=P.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function Lo(n,e){e===void 0&&(e=[n]);const t=P.useRef(n);return Gn(()=>{t.current!==n&&(t.current=n)},e),t}function Yo(n,e){const t=P.useRef();return P.useMemo(()=>{const r=n(t.current);return t.current=r,r},[...e])}function tu(n){const e=od(n),t=P.useRef(null),r=P.useCallback(s=>{s!==t.current&&(e==null||e(s,t.current)),t.current=s},[]);return[t,r]}function ef(n){const e=P.useRef();return P.useEffect(()=>{e.current=n},[n]),e.current}let bh={};function Go(n,e){return P.useMemo(()=>{if(e)return e;const t=bh[n]==null?0:bh[n]+1;return bh[n]=t,n+"-"+t},[n,e])}function My(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const c=Object.entries(a);for(const[h,d]of c){const p=l[h];p!=null&&(l[h]=p+n*d)}return l},{...e})}}const ls=My(1),nu=My(-1);function Sk(n){return"clientX"in n&&"clientY"in n}function ld(n){if(!n)return!1;const{KeyboardEvent:e}=Xt(n.target);return e&&n instanceof e}function bk(n){if(!n)return!1;const{TouchEvent:e}=Xt(n.target);return e&&n instanceof e}function tf(n){if(bk(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return Sk(n)?{x:n.clientX,y:n.clientY}:null}const Io=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[Io.Translate.toString(n),Io.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:r}=n;return e+" "+t+"ms "+r}}}),bm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Ok(n){return n.matches(bm)?n:n.querySelector(bm)}const Ck={display:"none"};function Pk(n){let{id:e,value:t}=n;return Ze.createElement("div",{id:e,style:Ck},t)}function Ak(n){let{id:e,announcement:t,ariaLiveType:r="assertive"}=n;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return Ze.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},t)}function Mk(){const[n,e]=P.useState("");return{announce:P.useCallback(r=>{r!=null&&e(r)},[]),announcement:n}}const Ey=P.createContext(null);function Ek(n){const e=P.useContext(Ey);P.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function Dk(){const[n]=P.useState(()=>new Set),e=P.useCallback(r=>(n.add(r),()=>n.delete(r)),[n]);return[P.useCallback(r=>{let{type:s,event:l}=r;n.forEach(a=>{var c;return(c=a[s])==null?void 0:c.call(a,l)})},[n]),e]}const Rk={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Tk={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Nk(n){let{announcements:e=Tk,container:t,hiddenTextDescribedById:r,screenReaderInstructions:s=Rk}=n;const{announce:l,announcement:a}=Mk(),c=Go("DndLiveRegion"),[h,d]=P.useState(!1);if(P.useEffect(()=>{d(!0)},[]),Ek(P.useMemo(()=>({onDragStart(m){let{active:v}=m;l(e.onDragStart({active:v}))},onDragMove(m){let{active:v,over:x}=m;e.onDragMove&&l(e.onDragMove({active:v,over:x}))},onDragOver(m){let{active:v,over:x}=m;l(e.onDragOver({active:v,over:x}))},onDragEnd(m){let{active:v,over:x}=m;l(e.onDragEnd({active:v,over:x}))},onDragCancel(m){let{active:v,over:x}=m;l(e.onDragCancel({active:v,over:x}))}}),[l,e])),!h)return null;const p=Ze.createElement(Ze.Fragment,null,Ze.createElement(Pk,{id:r,value:s.draggable}),Ze.createElement(Ak,{id:c,announcement:a}));return t?xo.createPortal(p,t):p}var it;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(it||(it={}));function ru(){}function Om(n,e){return P.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function Lk(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return P.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Rn=Object.freeze({x:0,y:0});function Ik(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Bk(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return t-r}function zk(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return r-t}function jk(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function Cm(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const Fk=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=Cm(e,e.left,e.top),l=[];for(const a of r){const{id:c}=a,h=t.get(c);if(h){const d=Ik(Cm(h),s);l.push({id:c,data:{droppableContainer:a,value:d}})}}return l.sort(Bk)};function _k(n,e){const t=Math.max(e.top,n.top),r=Math.max(e.left,n.left),s=Math.min(e.left+e.width,n.left+n.width),l=Math.min(e.top+e.height,n.top+n.height),a=s-r,c=l-t;if(r<s&&t<l){const h=e.width*e.height,d=n.width*n.height,p=a*c,m=p/(h+d-p);return Number(m.toFixed(4))}return 0}const Vk=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=[];for(const l of r){const{id:a}=l,c=t.get(a);if(c){const h=_k(c,e);h>0&&s.push({id:a,data:{droppableContainer:l,value:h}})}}return s.sort(zk)};function Hk(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Dy(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Rn}function Wk(n){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,c)=>({...a,top:a.top+n*c.y,bottom:a.bottom+n*c.y,left:a.left+n*c.x,right:a.right+n*c.x}),{...t})}}const Qk=Wk(1);function $k(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function Uk(n,e,t){const r=$k(e);if(!r)return n;const{scaleX:s,scaleY:l,x:a,y:c}=r,h=n.left-a-(1-s)*parseFloat(t),d=n.top-c-(1-l)*parseFloat(t.slice(t.indexOf(" ")+1)),p=s?n.width/s:n.width,m=l?n.height/l:n.height;return{width:p,height:m,top:d,right:h+p,bottom:d+m,left:h}}const Xk={ignoreTransform:!1};function Ss(n,e){e===void 0&&(e=Xk);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:p}=Xt(n).getComputedStyle(n);d&&(t=Uk(t,d,p))}const{top:r,left:s,width:l,height:a,bottom:c,right:h}=t;return{top:r,left:s,width:l,height:a,bottom:c,right:h}}function Pm(n){return Ss(n,{ignoreTransform:!0})}function Kk(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function qk(n,e){return e===void 0&&(e=Xt(n).getComputedStyle(n)),e.position==="fixed"}function Yk(n,e){e===void 0&&(e=Xt(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=e[s];return typeof l=="string"?t.test(l):!1})}function ad(n,e){const t=[];function r(s){if(e!=null&&t.length>=e||!s)return t;if(sd(s)&&s.scrollingElement!=null&&!t.includes(s.scrollingElement))return t.push(s.scrollingElement),t;if(!qo(s)||Ay(s)||t.includes(s))return t;const l=Xt(n).getComputedStyle(s);return s!==n&&Yk(s,l)&&t.push(s),qk(s,l)?t:r(s.parentNode)}return n?r(n):t}function Ry(n){const[e]=ad(n,1);return e??null}function Oh(n){return!bu||!n?null:ws(n)?n:id(n)?sd(n)||n===ks(n).scrollingElement?window:qo(n)?n:null:null}function Ty(n){return ws(n)?n.scrollX:n.scrollLeft}function Ny(n){return ws(n)?n.scrollY:n.scrollTop}function nf(n){return{x:Ty(n),y:Ny(n)}}var ut;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(ut||(ut={}));function Ly(n){return!bu||!n?!1:n===document.scrollingElement}function Iy(n){const e={x:0,y:0},t=Ly(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},r={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},s=n.scrollTop<=e.y,l=n.scrollLeft<=e.x,a=n.scrollTop>=r.y,c=n.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:c,maxScroll:r,minScroll:e}}const Gk={x:.2,y:.2};function Zk(n,e,t,r,s){let{top:l,left:a,right:c,bottom:h}=t;r===void 0&&(r=10),s===void 0&&(s=Gk);const{isTop:d,isBottom:p,isLeft:m,isRight:v}=Iy(n),x={x:0,y:0},k={x:0,y:0},S={height:e.height*s.y,width:e.width*s.x};return!d&&l<=e.top+S.height?(x.y=ut.Backward,k.y=r*Math.abs((e.top+S.height-l)/S.height)):!p&&h>=e.bottom-S.height&&(x.y=ut.Forward,k.y=r*Math.abs((e.bottom-S.height-h)/S.height)),!v&&c>=e.right-S.width?(x.x=ut.Forward,k.x=r*Math.abs((e.right-S.width-c)/S.width)):!m&&a<=e.left+S.width&&(x.x=ut.Backward,k.x=r*Math.abs((e.left+S.width-a)/S.width)),{direction:x,speed:k}}function Jk(n){if(n===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:e,left:t,right:r,bottom:s}=n.getBoundingClientRect();return{top:e,left:t,right:r,bottom:s,width:n.clientWidth,height:n.clientHeight}}function By(n){return n.reduce((e,t)=>ls(e,nf(t)),Rn)}function eS(n){return n.reduce((e,t)=>e+Ty(t),0)}function tS(n){return n.reduce((e,t)=>e+Ny(t),0)}function nS(n,e){if(e===void 0&&(e=Ss),!n)return;const{top:t,left:r,bottom:s,right:l}=e(n);Ry(n)&&(s<=0||l<=0||t>=window.innerHeight||r>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const rS=[["x",["left","right"],eS],["y",["top","bottom"],tS]];class ud{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=ad(t),s=By(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,a,c]of rS)for(const h of a)Object.defineProperty(this,h,{get:()=>{const d=c(r),p=s[l]-d;return this.rect[h]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Oo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var s;(s=this.target)==null||s.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function iS(n){const{EventTarget:e}=Xt(n);return n instanceof e?n:ks(n)}function Ch(n,e){const t=Math.abs(n.x),r=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var dn;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(dn||(dn={}));function Am(n){n.preventDefault()}function sS(n){n.stopPropagation()}var Re;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Re||(Re={}));const zy={start:[Re.Space,Re.Enter],cancel:[Re.Esc],end:[Re.Space,Re.Enter,Re.Tab]},oS=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Re.Right:return{...t,x:t.x+25};case Re.Left:return{...t,x:t.x-25};case Re.Down:return{...t,y:t.y+25};case Re.Up:return{...t,y:t.y-25}}};class cd{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Oo(ks(t)),this.windowListeners=new Oo(Xt(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(dn.Resize,this.handleCancel),this.windowListeners.add(dn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(dn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&nS(r),t(Rn)}handleKeyDown(e){if(ld(e)){const{active:t,context:r,options:s}=this.props,{keyboardCodes:l=zy,coordinateGetter:a=oS,scrollBehavior:c="smooth"}=s,{code:h}=e;if(l.end.includes(h)){this.handleEnd(e);return}if(l.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:Rn;this.referenceCoordinates||(this.referenceCoordinates=p);const m=a(e,{active:t,context:r.current,currentCoordinates:p});if(m){const v=nu(m,p),x={x:0,y:0},{scrollableAncestors:k}=r.current;for(const S of k){const b=e.code,{isTop:C,isRight:D,isLeft:B,isBottom:_,maxScroll:T,minScroll:F}=Iy(S),z=Jk(S),K={x:Math.min(b===Re.Right?z.right-z.width/2:z.right,Math.max(b===Re.Right?z.left:z.left+z.width/2,m.x)),y:Math.min(b===Re.Down?z.bottom-z.height/2:z.bottom,Math.max(b===Re.Down?z.top:z.top+z.height/2,m.y))},J=b===Re.Right&&!D||b===Re.Left&&!B,G=b===Re.Down&&!_||b===Re.Up&&!C;if(J&&K.x!==m.x){const te=S.scrollLeft+v.x,ne=b===Re.Right&&te<=T.x||b===Re.Left&&te>=F.x;if(ne&&!v.y){S.scrollTo({left:te,behavior:c});return}ne?x.x=S.scrollLeft-te:x.x=b===Re.Right?S.scrollLeft-T.x:S.scrollLeft-F.x,x.x&&S.scrollBy({left:-x.x,behavior:c});break}else if(G&&K.y!==m.y){const te=S.scrollTop+v.y,ne=b===Re.Down&&te<=T.y||b===Re.Up&&te>=F.y;if(ne&&!v.x){S.scrollTo({top:te,behavior:c});return}ne?x.y=S.scrollTop-te:x.y=b===Re.Down?S.scrollTop-T.y:S.scrollTop-F.y,x.y&&S.scrollBy({top:-x.y,behavior:c});break}}this.handleMove(e,ls(nu(m,this.referenceCoordinates),x))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}cd.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:r=zy,onActivation:s}=e,{active:l}=t;const{code:a}=n.nativeEvent;if(r.start.includes(a)){const c=l.activatorNode.current;return c&&n.target!==c?!1:(n.preventDefault(),s==null||s({event:n.nativeEvent}),!0)}return!1}}];function Mm(n){return!!(n&&"distance"in n)}function Em(n){return!!(n&&"delay"in n)}class hd{constructor(e,t,r){var s;r===void 0&&(r=iS(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:a}=l;this.props=e,this.events=t,this.document=ks(a),this.documentListeners=new Oo(this.document),this.listeners=new Oo(r),this.windowListeners=new Oo(Xt(a)),this.initialCoordinates=(s=tf(l))!=null?s:Rn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(dn.Resize,this.handleCancel),this.windowListeners.add(dn.DragStart,Am),this.windowListeners.add(dn.VisibilityChange,this.handleCancel),this.windowListeners.add(dn.ContextMenu,Am),this.documentListeners.add(dn.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Em(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(Mm(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(dn.Click,sS,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(dn.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:c}}=l;if(!s)return;const h=(t=tf(e))!=null?t:Rn,d=nu(s,h);if(!r&&c){if(Mm(c)){if(c.tolerance!=null&&Ch(d,c.tolerance))return this.handleCancel();if(Ch(d,c.distance))return this.handleStart()}if(Em(c)&&Ch(d,c.tolerance))return this.handleCancel();this.handlePending(c,d);return}e.cancelable&&e.preventDefault(),a(h)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Re.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const lS={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class fd extends hd{constructor(e){const{event:t}=e,r=ks(t.target);super(e,lS,r)}}fd.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r==null||r({event:t}),!0)}}];const aS={move:{name:"mousemove"},end:{name:"mouseup"}};var rf;(function(n){n[n.RightClick=2]="RightClick"})(rf||(rf={}));class uS extends hd{constructor(e){super(e,aS,ks(e.event.target))}}uS.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return t.button===rf.RightClick?!1:(r==null||r({event:t}),!0)}}];const Ph={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class cS extends hd{constructor(e){super(e,Ph)}static setup(){return window.addEventListener(Ph.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Ph.move.name,e)};function e(){}}}cS.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;const{touches:s}=t;return s.length>1?!1:(r==null||r({event:t}),!0)}}];var Co;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(Co||(Co={}));var iu;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(iu||(iu={}));function hS(n){let{acceleration:e,activator:t=Co.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:c=iu.TreeOrder,pointerCoordinates:h,scrollableAncestors:d,scrollableAncestorRects:p,delta:m,threshold:v}=n;const x=dS({delta:m,disabled:!l}),[k,S]=kk(),b=P.useRef({x:0,y:0}),C=P.useRef({x:0,y:0}),D=P.useMemo(()=>{switch(t){case Co.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Co.DraggableRect:return s}},[t,s,h]),B=P.useRef(null),_=P.useCallback(()=>{const F=B.current;if(!F)return;const z=b.current.x*C.current.x,K=b.current.y*C.current.y;F.scrollBy(z,K)},[]),T=P.useMemo(()=>c===iu.TreeOrder?[...d].reverse():d,[c,d]);P.useEffect(()=>{if(!l||!d.length||!D){S();return}for(const F of T){if((r==null?void 0:r(F))===!1)continue;const z=d.indexOf(F),K=p[z];if(!K)continue;const{direction:J,speed:G}=Zk(F,K,D,e,v);for(const te of["x","y"])x[te][J[te]]||(G[te]=0,J[te]=0);if(G.x>0||G.y>0){S(),B.current=F,k(_,a),b.current=G,C.current=J;return}}b.current={x:0,y:0},C.current={x:0,y:0},S()},[e,_,r,S,l,a,JSON.stringify(D),JSON.stringify(x),k,d,T,p,JSON.stringify(v)])}const fS={x:{[ut.Backward]:!1,[ut.Forward]:!1},y:{[ut.Backward]:!1,[ut.Forward]:!1}};function dS(n){let{delta:e,disabled:t}=n;const r=ef(e);return Yo(s=>{if(t||!r||!s)return fS;const l={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[ut.Backward]:s.x[ut.Backward]||l.x===-1,[ut.Forward]:s.x[ut.Forward]||l.x===1},y:{[ut.Backward]:s.y[ut.Backward]||l.y===-1,[ut.Forward]:s.y[ut.Forward]||l.y===1}}},[t,e,r])}function pS(n,e){const t=e!=null?n.get(e):void 0,r=t?t.node.current:null;return Yo(s=>{var l;return e==null?null:(l=r??s)!=null?l:null},[r,e])}function gS(n,e){return P.useMemo(()=>n.reduce((t,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...t,...l]},[]),[n,e])}var Bo;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(Bo||(Bo={}));var sf;(function(n){n.Optimized="optimized"})(sf||(sf={}));const Dm=new Map;function mS(n,e){let{dragging:t,dependencies:r,config:s}=e;const[l,a]=P.useState(null),{frequency:c,measure:h,strategy:d}=s,p=P.useRef(n),m=b(),v=Lo(m),x=P.useCallback(function(C){C===void 0&&(C=[]),!v.current&&a(D=>D===null?C:D.concat(C.filter(B=>!D.includes(B))))},[v]),k=P.useRef(null),S=Yo(C=>{if(m&&!t)return Dm;if(!C||C===Dm||p.current!==n||l!=null){const D=new Map;for(let B of n){if(!B)continue;if(l&&l.length>0&&!l.includes(B.id)&&B.rect.current){D.set(B.id,B.rect.current);continue}const _=B.node.current,T=_?new ud(h(_),_):null;B.rect.current=T,T&&D.set(B.id,T)}return D}return C},[n,l,t,m,h]);return P.useEffect(()=>{p.current=n},[n]),P.useEffect(()=>{m||x()},[t,m]),P.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),P.useEffect(()=>{m||typeof c!="number"||k.current!==null||(k.current=setTimeout(()=>{x(),k.current=null},c))},[c,m,x,...r]),{droppableRects:S,measureDroppableContainers:x,measuringScheduled:l!=null};function b(){switch(d){case Bo.Always:return!1;case Bo.BeforeDragging:return t;default:return!t}}}function jy(n,e){return Yo(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function yS(n,e){return jy(n,e)}function vS(n){let{callback:e,disabled:t}=n;const r=od(e),s=P.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(r)},[r,t]);return P.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Ou(n){let{callback:e,disabled:t}=n;const r=od(e),s=P.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(r)},[t]);return P.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function xS(n){return new ud(Ss(n),n)}function Rm(n,e,t){e===void 0&&(e=xS);const[r,s]=P.useState(null);function l(){s(h=>{if(!n)return null;if(n.isConnected===!1){var d;return(d=h??t)!=null?d:null}const p=e(n);return JSON.stringify(h)===JSON.stringify(p)?h:p})}const a=vS({callback(h){if(n)for(const d of h){const{type:p,target:m}=d;if(p==="childList"&&m instanceof HTMLElement&&m.contains(n)){l();break}}}}),c=Ou({callback:l});return Gn(()=>{l(),n?(c==null||c.observe(n),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),a==null||a.disconnect())},[n]),r}function wS(n){const e=jy(n);return Dy(n,e)}const Tm=[];function kS(n){const e=P.useRef(n),t=Yo(r=>n?r&&r!==Tm&&n&&e.current&&n.parentNode===e.current.parentNode?r:ad(n):Tm,[n]);return P.useEffect(()=>{e.current=n},[n]),t}function SS(n){const[e,t]=P.useState(null),r=P.useRef(n),s=P.useCallback(l=>{const a=Oh(l.target);a&&t(c=>c?(c.set(a,nf(a)),new Map(c)):null)},[]);return P.useEffect(()=>{const l=r.current;if(n!==l){a(l);const c=n.map(h=>{const d=Oh(h);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,nf(d)]):null}).filter(h=>h!=null);t(c.length?new Map(c):null),r.current=n}return()=>{a(n),a(l)};function a(c){c.forEach(h=>{const d=Oh(h);d==null||d.removeEventListener("scroll",s)})}},[s,n]),P.useMemo(()=>n.length?e?Array.from(e.values()).reduce((l,a)=>ls(l,a),Rn):By(n):Rn,[n,e])}function Nm(n,e){e===void 0&&(e=[]);const t=P.useRef(null);return P.useEffect(()=>{t.current=null},e),P.useEffect(()=>{const r=n!==Rn;r&&!t.current&&(t.current=n),!r&&t.current&&(t.current=null)},[n]),t.current?nu(n,t.current):Rn}function bS(n){P.useEffect(()=>{if(!bu)return;const e=n.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t==null||t()}},n.map(e=>{let{sensor:t}=e;return t}))}function OS(n,e){return P.useMemo(()=>n.reduce((t,r)=>{let{eventName:s,handler:l}=r;return t[s]=a=>{l(a,e)},t},{}),[n,e])}function Fy(n){return P.useMemo(()=>n?Kk(n):null,[n])}const Lm=[];function CS(n,e){e===void 0&&(e=Ss);const[t]=n,r=Fy(t?Xt(t):null),[s,l]=P.useState(Lm);function a(){l(()=>n.length?n.map(h=>Ly(h)?r:new ud(e(h),h)):Lm)}const c=Ou({callback:a});return Gn(()=>{c==null||c.disconnect(),a(),n.forEach(h=>c==null?void 0:c.observe(h))},[n]),s}function PS(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return qo(e)?e:n}function AS(n){let{measure:e}=n;const[t,r]=P.useState(null),s=P.useCallback(d=>{for(const{target:p}of d)if(qo(p)){r(m=>{const v=e(p);return m?{...m,width:v.width,height:v.height}:v});break}},[e]),l=Ou({callback:s}),a=P.useCallback(d=>{const p=PS(d);l==null||l.disconnect(),p&&(l==null||l.observe(p)),r(p?e(p):null)},[e,l]),[c,h]=tu(a);return P.useMemo(()=>({nodeRef:c,rect:t,setRef:h}),[t,c,h])}const MS=[{sensor:fd,options:{}},{sensor:cd,options:{}}],ES={current:{}},Va={draggable:{measure:Pm},droppable:{measure:Pm,strategy:Bo.WhileDragging,frequency:sf.Optimized},dragOverlay:{measure:Ss}};class Po extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const DS={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Po,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ru},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Va,measureDroppableContainers:ru,windowRect:null,measuringScheduled:!1},RS={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ru,draggableNodes:new Map,over:null,measureDroppableContainers:ru},Cu=P.createContext(RS),_y=P.createContext(DS);function TS(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Po}}}function NS(n,e){switch(e.type){case it.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case it.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case it.DragEnd:case it.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case it.RegisterDroppable:{const{element:t}=e,{id:r}=t,s=new Po(n.droppable.containers);return s.set(r,t),{...n,droppable:{...n.droppable,containers:s}}}case it.SetDroppableDisabled:{const{id:t,key:r,disabled:s}=e,l=n.droppable.containers.get(t);if(!l||r!==l.key)return n;const a=new Po(n.droppable.containers);return a.set(t,{...l,disabled:s}),{...n,droppable:{...n.droppable,containers:a}}}case it.UnregisterDroppable:{const{id:t,key:r}=e,s=n.droppable.containers.get(t);if(!s||r!==s.key)return n;const l=new Po(n.droppable.containers);return l.delete(t),{...n,droppable:{...n.droppable,containers:l}}}default:return n}}function LS(n){let{disabled:e}=n;const{active:t,activatorEvent:r,draggableNodes:s}=P.useContext(Cu),l=ef(r),a=ef(t==null?void 0:t.id);return P.useEffect(()=>{if(!e&&!r&&l&&a!=null){if(!ld(l)||document.activeElement===l.target)return;const c=s.get(a);if(!c)return;const{activatorNode:h,node:d}=c;if(!h.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[h.current,d.current]){if(!p)continue;const m=Ok(p);if(m){m.focus();break}}})}},[r,e,s,a,l]),null}function IS(n,e){let{transform:t,...r}=e;return n!=null&&n.length?n.reduce((s,l)=>l({transform:s,...r}),t):t}function BS(n){return P.useMemo(()=>({draggable:{...Va.draggable,...n==null?void 0:n.draggable},droppable:{...Va.droppable,...n==null?void 0:n.droppable},dragOverlay:{...Va.dragOverlay,...n==null?void 0:n.dragOverlay}}),[n==null?void 0:n.draggable,n==null?void 0:n.droppable,n==null?void 0:n.dragOverlay])}function zS(n){let{activeNode:e,measure:t,initialRect:r,config:s=!0}=n;const l=P.useRef(!1),{x:a,y:c}=typeof s=="boolean"?{x:s,y:s}:s;Gn(()=>{if(!a&&!c||!e){l.current=!1;return}if(l.current||!r)return;const d=e==null?void 0:e.node.current;if(!d||d.isConnected===!1)return;const p=t(d),m=Dy(p,r);if(a||(m.x=0),c||(m.y=0),l.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const v=Ry(d);v&&v.scrollBy({top:m.y,left:m.x})}},[e,a,c,r,t])}const Vy=P.createContext({...Rn,scaleX:1,scaleY:1});var Wr;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Wr||(Wr={}));const jS=P.memo(function(e){var t,r,s,l;let{id:a,accessibility:c,autoScroll:h=!0,children:d,sensors:p=MS,collisionDetection:m=Vk,measuring:v,modifiers:x,...k}=e;const S=P.useReducer(NS,void 0,TS),[b,C]=S,[D,B]=Dk(),[_,T]=P.useState(Wr.Uninitialized),F=_===Wr.Initialized,{draggable:{active:z,nodes:K,translate:J},droppable:{containers:G}}=b,te=z!=null?K.get(z):null,ne=P.useRef({initial:null,translated:null}),ce=P.useMemo(()=>{var He;return z!=null?{id:z,data:(He=te==null?void 0:te.data)!=null?He:ES,rect:ne}:null},[z,te]),he=P.useRef(null),[q,fe]=P.useState(null),[pe,$]=P.useState(null),ee=Lo(k,Object.values(k)),X=Go("DndDescribedBy",a),A=P.useMemo(()=>G.getEnabled(),[G]),I=BS(v),{droppableRects:se,measureDroppableContainers:ge,measuringScheduled:re}=mS(A,{dragging:F,dependencies:[J.x,J.y],config:I.droppable}),W=pS(K,z),ke=P.useMemo(()=>pe?tf(pe):null,[pe]),we=br(),Ce=yS(W,I.draggable.measure);zS({activeNode:z!=null?K.get(z):null,config:we.layoutShiftCompensation,initialRect:Ce,measure:I.draggable.measure});const Se=Rm(W,I.draggable.measure,Ce),Kt=Rm(W?W.parentElement:null),ft=P.useRef({activatorEvent:null,active:null,activeNode:W,collisionRect:null,collisions:null,droppableRects:se,draggableNodes:K,draggingNode:null,draggingNodeRect:null,droppableContainers:G,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),qt=G.getNodeFor((t=ft.current.over)==null?void 0:t.id),yt=AS({measure:I.dragOverlay.measure}),er=(r=yt.nodeRef.current)!=null?r:W,tr=F?(s=yt.rect)!=null?s:Se:null,Di=!!(yt.nodeRef.current&&yt.rect),Cs=wS(Di?null:Se),ii=Fy(er?Xt(er):null),zt=kS(F?qt??W:null),vn=CS(zt),wr=IS(x,{transform:{x:J.x-Cs.x,y:J.y-Cs.y,scaleX:1,scaleY:1},activatorEvent:pe,active:ce,activeNodeRect:Se,containerNodeRect:Kt,draggingNodeRect:tr,over:ft.current.over,overlayNodeRect:yt.rect,scrollableAncestors:zt,scrollableAncestorRects:vn,windowRect:ii}),Ps=ke?ls(ke,J):null,As=SS(zt),ol=Nm(As),ll=Nm(As,[Se]),zn=ls(wr,ol),xn=tr?Qk(tr,wr):null,kr=ce&&xn?m({active:ce,collisionRect:xn,droppableRects:se,droppableContainers:A,pointerCoordinates:Ps}):null,Sr=jk(kr,"id"),[jt,al]=P.useState(null),ul=Di?wr:ls(wr,ll),cl=Hk(ul,(l=jt==null?void 0:jt.rect)!=null?l:null,Se),Ms=P.useRef(null),Ri=P.useCallback((He,vt)=>{let{sensor:xt,options:wn}=vt;if(he.current==null)return;const Dt=K.get(he.current);if(!Dt)return;const wt=He.nativeEvent,Ft=new xt({active:he.current,activeNode:Dt,event:wt,options:wn,context:ft,onAbort(We){if(!K.get(We))return;const{onDragAbort:kt}=ee.current,kn={id:We};kt==null||kt(kn),D({type:"onDragAbort",event:kn})},onPending(We,on,kt,kn){if(!K.get(We))return;const{onDragPending:jn}=ee.current,Yt={id:We,constraint:on,initialCoordinates:kt,offset:kn};jn==null||jn(Yt),D({type:"onDragPending",event:Yt})},onStart(We){const on=he.current;if(on==null)return;const kt=K.get(on);if(!kt)return;const{onDragStart:kn}=ee.current,Sn={activatorEvent:wt,active:{id:on,data:kt.data,rect:ne}};xo.unstable_batchedUpdates(()=>{kn==null||kn(Sn),T(Wr.Initializing),C({type:it.DragStart,initialCoordinates:We,active:on}),D({type:"onDragStart",event:Sn}),fe(Ms.current),$(wt)})},onMove(We){C({type:it.DragMove,coordinates:We})},onEnd:nr(it.DragEnd),onCancel:nr(it.DragCancel)});Ms.current=Ft;function nr(We){return async function(){const{active:kt,collisions:kn,over:Sn,scrollAdjustedTranslate:jn}=ft.current;let Yt=null;if(kt&&jn){const{cancelDrop:rr}=ee.current;Yt={activatorEvent:wt,active:kt,collisions:kn,delta:jn,over:Sn},We===it.DragEnd&&typeof rr=="function"&&await Promise.resolve(rr(Yt))&&(We=it.DragCancel)}he.current=null,xo.unstable_batchedUpdates(()=>{C({type:We}),T(Wr.Uninitialized),al(null),fe(null),$(null),Ms.current=null;const rr=We===it.DragEnd?"onDragEnd":"onDragCancel";if(Yt){const Ts=ee.current[rr];Ts==null||Ts(Yt),D({type:rr,event:Yt})}})}}},[K]),Es=P.useCallback((He,vt)=>(xt,wn)=>{const Dt=xt.nativeEvent,wt=K.get(wn);if(he.current!==null||!wt||Dt.dndKit||Dt.defaultPrevented)return;const Ft={active:wt};He(xt,vt.options,Ft)===!0&&(Dt.dndKit={capturedBy:vt.sensor},he.current=wn,Ri(xt,vt))},[K,Ri]),Ti=gS(p,Es);bS(p),Gn(()=>{Se&&_===Wr.Initializing&&T(Wr.Initialized)},[Se,_]),P.useEffect(()=>{const{onDragMove:He}=ee.current,{active:vt,activatorEvent:xt,collisions:wn,over:Dt}=ft.current;if(!vt||!xt)return;const wt={active:vt,activatorEvent:xt,collisions:wn,delta:{x:zn.x,y:zn.y},over:Dt};xo.unstable_batchedUpdates(()=>{He==null||He(wt),D({type:"onDragMove",event:wt})})},[zn.x,zn.y]),P.useEffect(()=>{const{active:He,activatorEvent:vt,collisions:xt,droppableContainers:wn,scrollAdjustedTranslate:Dt}=ft.current;if(!He||he.current==null||!vt||!Dt)return;const{onDragOver:wt}=ee.current,Ft=wn.get(Sr),nr=Ft&&Ft.rect.current?{id:Ft.id,rect:Ft.rect.current,data:Ft.data,disabled:Ft.disabled}:null,We={active:He,activatorEvent:vt,collisions:xt,delta:{x:Dt.x,y:Dt.y},over:nr};xo.unstable_batchedUpdates(()=>{al(nr),wt==null||wt(We),D({type:"onDragOver",event:We})})},[Sr]),Gn(()=>{ft.current={activatorEvent:pe,active:ce,activeNode:W,collisionRect:xn,collisions:kr,droppableRects:se,draggableNodes:K,draggingNode:er,draggingNodeRect:tr,droppableContainers:G,over:jt,scrollableAncestors:zt,scrollAdjustedTranslate:zn},ne.current={initial:tr,translated:xn}},[ce,W,kr,xn,K,er,tr,se,G,jt,zt,zn]),hS({...we,delta:J,draggingRect:xn,pointerCoordinates:Ps,scrollableAncestors:zt,scrollableAncestorRects:vn});const Ds=P.useMemo(()=>({active:ce,activeNode:W,activeNodeRect:Se,activatorEvent:pe,collisions:kr,containerNodeRect:Kt,dragOverlay:yt,draggableNodes:K,droppableContainers:G,droppableRects:se,over:jt,measureDroppableContainers:ge,scrollableAncestors:zt,scrollableAncestorRects:vn,measuringConfiguration:I,measuringScheduled:re,windowRect:ii}),[ce,W,Se,pe,kr,Kt,yt,K,G,se,jt,ge,zt,vn,I,re,ii]),Rs=P.useMemo(()=>({activatorEvent:pe,activators:Ti,active:ce,activeNodeRect:Se,ariaDescribedById:{draggable:X},dispatch:C,draggableNodes:K,over:jt,measureDroppableContainers:ge}),[pe,Ti,ce,Se,C,X,K,jt,ge]);return Ze.createElement(Ey.Provider,{value:B},Ze.createElement(Cu.Provider,{value:Rs},Ze.createElement(_y.Provider,{value:Ds},Ze.createElement(Vy.Provider,{value:cl},d)),Ze.createElement(LS,{disabled:(c==null?void 0:c.restoreFocus)===!1})),Ze.createElement(Nk,{...c,hiddenTextDescribedById:X}));function br(){const He=(q==null?void 0:q.autoScrollEnabled)===!1,vt=typeof h=="object"?h.enabled===!1:h===!1,xt=F&&!He&&!vt;return typeof h=="object"?{...h,enabled:xt}:{enabled:xt}}}),FS=P.createContext(null),Im="button",_S="Draggable";function VS(n){let{id:e,data:t,disabled:r=!1,attributes:s}=n;const l=Go(_S),{activators:a,activatorEvent:c,active:h,activeNodeRect:d,ariaDescribedById:p,draggableNodes:m,over:v}=P.useContext(Cu),{role:x=Im,roleDescription:k="draggable",tabIndex:S=0}=s??{},b=(h==null?void 0:h.id)===e,C=P.useContext(b?Vy:FS),[D,B]=tu(),[_,T]=tu(),F=OS(a,e),z=Lo(t);Gn(()=>(m.set(e,{id:e,key:l,node:D,activatorNode:_,data:z}),()=>{const J=m.get(e);J&&J.key===l&&m.delete(e)}),[m,e]);const K=P.useMemo(()=>({role:x,tabIndex:S,"aria-disabled":r,"aria-pressed":b&&x===Im?!0:void 0,"aria-roledescription":k,"aria-describedby":p.draggable}),[r,x,S,b,k,p.draggable]);return{active:h,activatorEvent:c,activeNodeRect:d,attributes:K,isDragging:b,listeners:r?void 0:F,node:D,over:v,setNodeRef:B,setActivatorNodeRef:T,transform:C}}function HS(){return P.useContext(_y)}const WS="Droppable",QS={timeout:25};function $S(n){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:s}=n;const l=Go(WS),{active:a,dispatch:c,over:h,measureDroppableContainers:d}=P.useContext(Cu),p=P.useRef({disabled:t}),m=P.useRef(!1),v=P.useRef(null),x=P.useRef(null),{disabled:k,updateMeasurementsFor:S,timeout:b}={...QS,...s},C=Lo(S??r),D=P.useCallback(()=>{if(!m.current){m.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{d(Array.isArray(C.current)?C.current:[C.current]),x.current=null},b)},[b]),B=Ou({callback:D,disabled:k||!a}),_=P.useCallback((K,J)=>{B&&(J&&(B.unobserve(J),m.current=!1),K&&B.observe(K))},[B]),[T,F]=tu(_),z=Lo(e);return P.useEffect(()=>{!B||!T.current||(B.disconnect(),m.current=!1,B.observe(T.current))},[T,B]),P.useEffect(()=>(c({type:it.RegisterDroppable,element:{id:r,key:l,disabled:t,node:T,rect:v,data:z}}),()=>c({type:it.UnregisterDroppable,key:l,id:r})),[r]),P.useEffect(()=>{t!==p.current.disabled&&(c({type:it.SetDroppableDisabled,id:r,key:l,disabled:t}),p.current.disabled=t)},[r,l,t,c]),{active:a,rect:v,isOver:(h==null?void 0:h.id)===r,node:T,over:h,setNodeRef:F}}function Hy(n,e,t){const r=n.slice();return r.splice(t<0?r.length+t:t,0,r.splice(e,1)[0]),r}function US(n,e){return n.reduce((t,r,s)=>{const l=e.get(r);return l&&(t[s]=l),t},Array(n.length))}function ya(n){return n!==null&&n>=0}function XS(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function KS(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const va={scaleX:1,scaleY:1},qS=n=>{var e;let{rects:t,activeNodeRect:r,activeIndex:s,overIndex:l,index:a}=n;const c=(e=t[s])!=null?e:r;if(!c)return null;const h=YS(t,a,s);if(a===s){const d=t[l];return d?{x:s<l?d.left+d.width-(c.left+c.width):d.left-c.left,y:0,...va}:null}return a>s&&a<=l?{x:-c.width-h,y:0,...va}:a<s&&a>=l?{x:c.width+h,y:0,...va}:{x:0,y:0,...va}};function YS(n,e,t){const r=n[e],s=n[e-1],l=n[e+1];return!r||!s&&!l?0:t<e?s?r.left-(s.left+s.width):l.left-(r.left+r.width):l?l.left-(r.left+r.width):r.left-(s.left+s.width)}const Wy=n=>{let{rects:e,activeIndex:t,overIndex:r,index:s}=n;const l=Hy(e,r,t),a=e[s],c=l[s];return!c||!a?null:{x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height}},Qy="Sortable",$y=Ze.createContext({activeIndex:-1,containerId:Qy,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Wy,disabled:{draggable:!1,droppable:!1}});function GS(n){let{children:e,id:t,items:r,strategy:s=Wy,disabled:l=!1}=n;const{active:a,dragOverlay:c,droppableRects:h,over:d,measureDroppableContainers:p}=HS(),m=Go(Qy,t),v=c.rect!==null,x=P.useMemo(()=>r.map(F=>typeof F=="object"&&"id"in F?F.id:F),[r]),k=a!=null,S=a?x.indexOf(a.id):-1,b=d?x.indexOf(d.id):-1,C=P.useRef(x),D=!XS(x,C.current),B=b!==-1&&S===-1||D,_=KS(l);Gn(()=>{D&&k&&p(x)},[D,x,k,p]),P.useEffect(()=>{C.current=x},[x]);const T=P.useMemo(()=>({activeIndex:S,containerId:m,disabled:_,disableTransforms:B,items:x,overIndex:b,useDragOverlay:v,sortedRects:US(x,h),strategy:s}),[S,m,_.draggable,_.droppable,B,x,b,h,v,s]);return Ze.createElement($y.Provider,{value:T},e)}const ZS=n=>{let{id:e,items:t,activeIndex:r,overIndex:s}=n;return Hy(t,r,s).indexOf(e)},JS=n=>{let{containerId:e,isSorting:t,wasDragging:r,index:s,items:l,newIndex:a,previousItems:c,previousContainerId:h,transition:d}=n;return!d||!r||c!==l&&s===a?!1:t?!0:a!==s&&e===h},eb={duration:200,easing:"ease"},Uy="transform",tb=Io.Transition.toString({property:Uy,duration:0,easing:"linear"}),nb={roleDescription:"sortable"};function rb(n){let{disabled:e,index:t,node:r,rect:s}=n;const[l,a]=P.useState(null),c=P.useRef(t);return Gn(()=>{if(!e&&t!==c.current&&r.current){const h=s.current;if(h){const d=Ss(r.current,{ignoreTransform:!0}),p={x:h.left-d.left,y:h.top-d.top,scaleX:h.width/d.width,scaleY:h.height/d.height};(p.x||p.y)&&a(p)}}t!==c.current&&(c.current=t)},[e,t,r,s]),P.useEffect(()=>{l&&a(null)},[l]),l}function ib(n){let{animateLayoutChanges:e=JS,attributes:t,disabled:r,data:s,getNewIndex:l=ZS,id:a,strategy:c,resizeObserverConfig:h,transition:d=eb}=n;const{items:p,containerId:m,activeIndex:v,disabled:x,disableTransforms:k,sortedRects:S,overIndex:b,useDragOverlay:C,strategy:D}=P.useContext($y),B=sb(r,x),_=p.indexOf(a),T=P.useMemo(()=>({sortable:{containerId:m,index:_,items:p},...s}),[m,s,_,p]),F=P.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:z,node:K,isOver:J,setNodeRef:G}=$S({id:a,data:T,disabled:B.droppable,resizeObserverConfig:{updateMeasurementsFor:F,...h}}),{active:te,activatorEvent:ne,activeNodeRect:ce,attributes:he,setNodeRef:q,listeners:fe,isDragging:pe,over:$,setActivatorNodeRef:ee,transform:X}=VS({id:a,data:T,attributes:{...nb,...t},disabled:B.draggable}),A=wk(G,q),I=!!te,se=I&&!k&&ya(v)&&ya(b),ge=!C&&pe,re=ge&&se?X:null,ke=se?re??(c??D)({rects:S,activeNodeRect:ce,activeIndex:v,overIndex:b,index:_}):null,we=ya(v)&&ya(b)?l({id:a,items:p,activeIndex:v,overIndex:b}):_,Ce=te==null?void 0:te.id,Se=P.useRef({activeId:Ce,items:p,newIndex:we,containerId:m}),Kt=p!==Se.current.items,ft=e({active:te,containerId:m,isDragging:pe,isSorting:I,id:a,index:_,items:p,newIndex:Se.current.newIndex,previousItems:Se.current.items,previousContainerId:Se.current.containerId,transition:d,wasDragging:Se.current.activeId!=null}),qt=rb({disabled:!ft,index:_,node:K,rect:z});return P.useEffect(()=>{I&&Se.current.newIndex!==we&&(Se.current.newIndex=we),m!==Se.current.containerId&&(Se.current.containerId=m),p!==Se.current.items&&(Se.current.items=p)},[I,we,m,p]),P.useEffect(()=>{if(Ce===Se.current.activeId)return;if(Ce!=null&&Se.current.activeId==null){Se.current.activeId=Ce;return}const er=setTimeout(()=>{Se.current.activeId=Ce},50);return()=>clearTimeout(er)},[Ce]),{active:te,activeIndex:v,attributes:he,data:T,rect:z,index:_,newIndex:we,items:p,isOver:J,isSorting:I,isDragging:pe,listeners:fe,node:K,overIndex:b,over:$,setNodeRef:A,setActivatorNodeRef:ee,setDroppableNodeRef:G,setDraggableNodeRef:q,transform:qt??ke,transition:yt()};function yt(){if(qt||Kt&&Se.current.newIndex===_)return tb;if(!(ge&&!ld(ne)||!d)&&(I||ft))return Io.Transition.toString({...d,property:Uy})}}function sb(n,e){var t,r;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n==null?void 0:n.draggable)!=null?t:e.draggable,droppable:(r=n==null?void 0:n.droppable)!=null?r:e.droppable}}Re.Down,Re.Right,Re.Up,Re.Left;function Bm(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function ob(n){if(Array.isArray(n))return n}function lb(n,e,t){return(e=pb(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function ab(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,l,a,c=[],h=!0,d=!1;try{if(l=(t=t.call(n)).next,e!==0)for(;!(h=(r=l.call(t)).done)&&(c.push(r.value),c.length!==e);h=!0);}catch(p){d=!0,s=p}finally{try{if(!h&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(d)throw s}}return c}}function ub(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function jm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?zm(Object(t),!0).forEach(function(r){lb(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):zm(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function cb(n,e){if(n==null)return{};var t,r,s=hb(n,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(r=0;r<l.length;r++)t=l[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}function hb(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function fb(n,e){return ob(n)||ab(n,e)||gb(n,e)||ub()}function db(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function pb(n){var e=db(n,"string");return typeof e=="symbol"?e:e+""}function gb(n,e){if(n){if(typeof n=="string")return Bm(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Bm(n,e):void 0}}function mb(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Fm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function _m(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Fm(Object(t),!0).forEach(function(r){mb(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Fm(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function yb(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){return e.reduceRight(function(s,l){return l(s)},r)}}function wo(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return s.length>=n.length?n.apply(this,s):function(){for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];return e.apply(t,[].concat(s,c))}}}function su(n){return{}.toString.call(n).includes("Object")}function vb(n){return!Object.keys(n).length}function zo(n){return typeof n=="function"}function xb(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function wb(n,e){return su(e)||Gr("changeType"),Object.keys(e).some(function(t){return!xb(n,t)})&&Gr("changeField"),e}function kb(n){zo(n)||Gr("selectorType")}function Sb(n){zo(n)||su(n)||Gr("handlerType"),su(n)&&Object.values(n).some(function(e){return!zo(e)})&&Gr("handlersType")}function bb(n){n||Gr("initialIsRequired"),su(n)||Gr("initialType"),vb(n)&&Gr("initialContent")}function Ob(n,e){throw new Error(n[e]||n.default)}var Cb={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},Gr=wo(Ob)(Cb),xa={changes:wb,selector:kb,handler:Sb,initial:bb};function Pb(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};xa.initial(n),xa.handler(e);var t={current:n},r=wo(Eb)(t,e),s=wo(Mb)(t),l=wo(xa.changes)(n),a=wo(Ab)(t);function c(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(p){return p};return xa.selector(d),d(t.current)}function h(d){yb(r,s,l,a)(d)}return[c,h]}function Ab(n,e){return zo(e)?e(n.current):e}function Mb(n,e){return n.current=_m(_m({},n.current),e),e}function Eb(n,e,t){return zo(e)?e(n.current):Object.keys(t).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,n.current[r])}),t}var Db={create:Pb},Rb={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function Tb(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return s.length>=n.length?n.apply(this,s):function(){for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];return e.apply(t,[].concat(s,c))}}}function Nb(n){return{}.toString.call(n).includes("Object")}function Lb(n){return n||Vm("configIsRequired"),Nb(n)||Vm("configType"),n.urls?(Ib(),{paths:{vs:n.urls.monacoBase}}):n}function Ib(){console.warn(Xy.deprecation)}function Bb(n,e){throw new Error(n[e]||n.default)}var Xy={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Vm=Tb(Bb)(Xy),zb={config:Lb},jb=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return t.reduceRight(function(l,a){return a(l)},s)}};function Ky(n,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&n[t]&&Object.assign(e[t],Ky(n[t],e[t]))}),jm(jm({},n),e)}var Fb={type:"cancelation",msg:"operation is manually canceled"};function Ah(n){var e=!1,t=new Promise(function(r,s){n.then(function(l){return e?s(Fb):r(l)}),n.catch(s)});return t.cancel=function(){return e=!0},t}var _b=["monaco"],Vb=Db.create({config:Rb,isInitialized:!1,resolve:null,reject:null,monaco:null}),qy=fb(Vb,2),Zo=qy[0],Pu=qy[1];function Hb(n){var e=zb.config(n),t=e.monaco,r=cb(e,_b);Pu(function(s){return{config:Ky(s.config,r),monaco:t}})}function Wb(){var n=Zo(function(e){var t=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:t,isInitialized:r,resolve:s}});if(!n.isInitialized){if(Pu({isInitialized:!0}),n.monaco)return n.resolve(n.monaco),Ah(Mh);if(window.monaco&&window.monaco.editor)return Yy(window.monaco),n.resolve(window.monaco),Ah(Mh);jb(Qb,Ub)(Xb)}return Ah(Mh)}function Qb(n){return document.body.appendChild(n)}function $b(n){var e=document.createElement("script");return n&&(e.src=n),e}function Ub(n){var e=Zo(function(r){var s=r.config,l=r.reject;return{config:s,reject:l}}),t=$b("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return n()},t.onerror=e.reject,t}function Xb(){var n=Zo(function(t){var r=t.config,s=t.resolve,l=t.reject;return{config:r,resolve:s,reject:l}}),e=window.require;e.config(n.config),e(["vs/editor/editor.main"],function(t){var r=t.m||t;Yy(r),n.resolve(r)},function(t){n.reject(t)})}function Yy(n){Zo().monaco||Pu({monaco:n})}function Kb(){return Zo(function(n){var e=n.monaco;return e})}var Mh=new Promise(function(n,e){return Pu({resolve:n,reject:e})}),Gy={config:Hb,init:Wb,__getMonacoInstance:Kb},qb={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Eh=qb,Yb={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},Gb=Yb;function Zb({children:n}){return Ze.createElement("div",{style:Gb.container},n)}var Jb=Zb,eO=Jb;function tO({width:n,height:e,isEditorReady:t,loading:r,_ref:s,className:l,wrapperProps:a}){return Ze.createElement("section",{style:{...Eh.wrapper,width:n,height:e},...a},!t&&Ze.createElement(eO,null,r),Ze.createElement("div",{ref:s,style:{...Eh.fullWidth,...!t&&Eh.hide},className:l}))}var nO=tO,Zy=P.memo(nO);function rO(n){P.useEffect(n,[])}var Jy=rO;function iO(n,e,t=!0){let r=P.useRef(!0);P.useEffect(r.current||!t?()=>{r.current=!1}:n,e)}var rn=iO;function Ao(){}function ns(n,e,t,r){return sO(n,r)||oO(n,e,t,r)}function sO(n,e){return n.editor.getModel(ev(n,e))}function oO(n,e,t,r){return n.editor.createModel(e,t,r?ev(n,r):void 0)}function ev(n,e){return n.Uri.parse(e)}function lO({original:n,modified:e,language:t,originalLanguage:r,modifiedLanguage:s,originalModelPath:l,modifiedModelPath:a,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:h=!1,theme:d="light",loading:p="Loading...",options:m={},height:v="100%",width:x="100%",className:k,wrapperProps:S={},beforeMount:b=Ao,onMount:C=Ao}){let[D,B]=P.useState(!1),[_,T]=P.useState(!0),F=P.useRef(null),z=P.useRef(null),K=P.useRef(null),J=P.useRef(C),G=P.useRef(b),te=P.useRef(!1);Jy(()=>{let q=Gy.init();return q.then(fe=>(z.current=fe)&&T(!1)).catch(fe=>(fe==null?void 0:fe.type)!=="cancelation"&&console.error("Monaco initialization: error:",fe)),()=>F.current?he():q.cancel()}),rn(()=>{if(F.current&&z.current){let q=F.current.getOriginalEditor(),fe=ns(z.current,n||"",r||t||"text",l||"");fe!==q.getModel()&&q.setModel(fe)}},[l],D),rn(()=>{if(F.current&&z.current){let q=F.current.getModifiedEditor(),fe=ns(z.current,e||"",s||t||"text",a||"");fe!==q.getModel()&&q.setModel(fe)}},[a],D),rn(()=>{let q=F.current.getModifiedEditor();q.getOption(z.current.editor.EditorOption.readOnly)?q.setValue(e||""):e!==q.getValue()&&(q.executeEdits("",[{range:q.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),q.pushUndoStop())},[e],D),rn(()=>{var q,fe;(fe=(q=F.current)==null?void 0:q.getModel())==null||fe.original.setValue(n||"")},[n],D),rn(()=>{let{original:q,modified:fe}=F.current.getModel();z.current.editor.setModelLanguage(q,r||t||"text"),z.current.editor.setModelLanguage(fe,s||t||"text")},[t,r,s],D),rn(()=>{var q;(q=z.current)==null||q.editor.setTheme(d)},[d],D),rn(()=>{var q;(q=F.current)==null||q.updateOptions(m)},[m],D);let ne=P.useCallback(()=>{var pe;if(!z.current)return;G.current(z.current);let q=ns(z.current,n||"",r||t||"text",l||""),fe=ns(z.current,e||"",s||t||"text",a||"");(pe=F.current)==null||pe.setModel({original:q,modified:fe})},[t,e,s,n,r,l,a]),ce=P.useCallback(()=>{var q;!te.current&&K.current&&(F.current=z.current.editor.createDiffEditor(K.current,{automaticLayout:!0,...m}),ne(),(q=z.current)==null||q.editor.setTheme(d),B(!0),te.current=!0)},[m,d,ne]);P.useEffect(()=>{D&&J.current(F.current,z.current)},[D]),P.useEffect(()=>{!_&&!D&&ce()},[_,D,ce]);function he(){var fe,pe,$,ee;let q=(fe=F.current)==null?void 0:fe.getModel();c||((pe=q==null?void 0:q.original)==null||pe.dispose()),h||(($=q==null?void 0:q.modified)==null||$.dispose()),(ee=F.current)==null||ee.dispose()}return Ze.createElement(Zy,{width:x,height:v,isEditorReady:D,loading:p,_ref:K,className:k,wrapperProps:S})}var aO=lO;P.memo(aO);function uO(n){let e=P.useRef();return P.useEffect(()=>{e.current=n},[n]),e.current}var cO=uO,wa=new Map;function hO({defaultValue:n,defaultLanguage:e,defaultPath:t,value:r,language:s,path:l,theme:a="light",line:c,loading:h="Loading...",options:d={},overrideServices:p={},saveViewState:m=!0,keepCurrentModel:v=!1,width:x="100%",height:k="100%",className:S,wrapperProps:b={},beforeMount:C=Ao,onMount:D=Ao,onChange:B,onValidate:_=Ao}){let[T,F]=P.useState(!1),[z,K]=P.useState(!0),J=P.useRef(null),G=P.useRef(null),te=P.useRef(null),ne=P.useRef(D),ce=P.useRef(C),he=P.useRef(),q=P.useRef(r),fe=cO(l),pe=P.useRef(!1),$=P.useRef(!1);Jy(()=>{let A=Gy.init();return A.then(I=>(J.current=I)&&K(!1)).catch(I=>(I==null?void 0:I.type)!=="cancelation"&&console.error("Monaco initialization: error:",I)),()=>G.current?X():A.cancel()}),rn(()=>{var I,se,ge,re;let A=ns(J.current,n||r||"",e||s||"",l||t||"");A!==((I=G.current)==null?void 0:I.getModel())&&(m&&wa.set(fe,(se=G.current)==null?void 0:se.saveViewState()),(ge=G.current)==null||ge.setModel(A),m&&((re=G.current)==null||re.restoreViewState(wa.get(l))))},[l],T),rn(()=>{var A;(A=G.current)==null||A.updateOptions(d)},[d],T),rn(()=>{!G.current||r===void 0||(G.current.getOption(J.current.editor.EditorOption.readOnly)?G.current.setValue(r):r!==G.current.getValue()&&($.current=!0,G.current.executeEdits("",[{range:G.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),G.current.pushUndoStop(),$.current=!1))},[r],T),rn(()=>{var I,se;let A=(I=G.current)==null?void 0:I.getModel();A&&s&&((se=J.current)==null||se.editor.setModelLanguage(A,s))},[s],T),rn(()=>{var A;c!==void 0&&((A=G.current)==null||A.revealLine(c))},[c],T),rn(()=>{var A;(A=J.current)==null||A.editor.setTheme(a)},[a],T);let ee=P.useCallback(()=>{var A;if(!(!te.current||!J.current)&&!pe.current){ce.current(J.current);let I=l||t,se=ns(J.current,r||n||"",e||s||"",I||"");G.current=(A=J.current)==null?void 0:A.editor.create(te.current,{model:se,automaticLayout:!0,...d},p),m&&G.current.restoreViewState(wa.get(I)),J.current.editor.setTheme(a),c!==void 0&&G.current.revealLine(c),F(!0),pe.current=!0}},[n,e,t,r,s,l,d,p,m,a,c]);P.useEffect(()=>{T&&ne.current(G.current,J.current)},[T]),P.useEffect(()=>{!z&&!T&&ee()},[z,T,ee]),q.current=r,P.useEffect(()=>{var A,I;T&&B&&((A=he.current)==null||A.dispose(),he.current=(I=G.current)==null?void 0:I.onDidChangeModelContent(se=>{$.current||B(G.current.getValue(),se)}))},[T,B]),P.useEffect(()=>{if(T){let A=J.current.editor.onDidChangeMarkers(I=>{var ge;let se=(ge=G.current.getModel())==null?void 0:ge.uri;if(se&&I.find(re=>re.path===se.path)){let re=J.current.editor.getModelMarkers({resource:se});_==null||_(re)}});return()=>{A==null||A.dispose()}}return()=>{}},[T,_]);function X(){var A,I;(A=he.current)==null||A.dispose(),v?m&&wa.set(l,G.current.saveViewState()):(I=G.current.getModel())==null||I.dispose(),G.current.dispose()}return Ze.createElement(Zy,{width:x,height:k,isEditorReady:T,loading:h,_ref:te,className:S,wrapperProps:b})}var fO=hO,dO=P.memo(fO),pO=dO;let of=[],tv=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?tv:of).push(t=t+n[e])})();function gO(n){if(n<768)return!1;for(let e=0,t=of.length;;){let r=e+t>>1;if(n<of[r])t=r;else if(n>=tv[r])e=r+1;else return!0;if(e==t)return!1}}function Hm(n){return n>=127462&&n<=127487}const Wm=8205;function mO(n,e,t=!0,r=!0){return(t?nv:yO)(n,e,r)}function nv(n,e,t){if(e==n.length)return e;e&&rv(n.charCodeAt(e))&&iv(n.charCodeAt(e-1))&&e--;let r=Dh(n,e);for(e+=Qm(r);e<n.length;){let s=Dh(n,e);if(r==Wm||s==Wm||t&&gO(s))e+=Qm(s),r=s;else if(Hm(s)){let l=0,a=e-2;for(;a>=0&&Hm(Dh(n,a));)l++,a-=2;if(l%2==0)break;e+=2}else break}return e}function yO(n,e,t){for(;e>0;){let r=nv(n,e-2,t);if(r<e)return r;e--}return 0}function Dh(n,e){let t=n.charCodeAt(e);if(!iv(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return rv(r)?(t-55296<<10)+(r-56320)+65536:t}function rv(n){return n>=56320&&n<57344}function iv(n){return n>=55296&&n<56320}function Qm(n){return n<65536?1:2}class Ee{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=fs(this,e,t);let s=[];return this.decompose(0,e,s,2),r.length&&r.decompose(0,r.length,s,3),this.decompose(t,this.length,s,1),Kn.from(s,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=fs(this,e,t);let r=[];return this.decompose(e,t,r,0),Kn.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),s=new Mo(this),l=new Mo(e);for(let a=t,c=t;;){if(s.next(a),l.next(a),a=0,s.lineBreak!=l.lineBreak||s.done!=l.done||s.value!=l.value)return!1;if(c+=s.value.length,s.done||c>=r)return!0}}iter(e=1){return new Mo(this,e)}iterRange(e,t=this.length){return new sv(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;r=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new ov(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?Ee.empty:e.length<=32?new Ge(e):Kn.from(Ge.split(e,[]))}}class Ge extends Ee{constructor(e,t=vO(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,s){for(let l=0;;l++){let a=this.text[l],c=s+a.length;if((t?r:c)>=e)return new xO(s,c,r,a);s=c+1,r++}}decompose(e,t,r,s){let l=e<=0&&t>=this.length?this:new Ge($m(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let a=r.pop(),c=Ha(l.text,a.text.slice(),0,l.length);if(c.length<=32)r.push(new Ge(c,a.length+l.length));else{let h=c.length>>1;r.push(new Ge(c.slice(0,h)),new Ge(c.slice(h)))}}else r.push(l)}replace(e,t,r){if(!(r instanceof Ge))return super.replace(e,t,r);[e,t]=fs(this,e,t);let s=Ha(this.text,Ha(r.text,$m(this.text,0,e)),t),l=this.length+r.length-(t-e);return s.length<=32?new Ge(s,l):Kn.from(Ge.split(s,[]),l)}sliceString(e,t=this.length,r=`
`){[e,t]=fs(this,e,t);let s="";for(let l=0,a=0;l<=t&&a<this.text.length;a++){let c=this.text[a],h=l+c.length;l>e&&a&&(s+=r),e<h&&t>l&&(s+=c.slice(Math.max(0,e-l),t-l)),l=h+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],s=-1;for(let l of e)r.push(l),s+=l.length+1,r.length==32&&(t.push(new Ge(r,s)),r=[],s=-1);return s>-1&&t.push(new Ge(r,s)),t}}class Kn extends Ee{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,s){for(let l=0;;l++){let a=this.children[l],c=s+a.length,h=r+a.lines-1;if((t?h:c)>=e)return a.lineInner(e,t,r,s);s=c+1,r=h+1}}decompose(e,t,r,s){for(let l=0,a=0;a<=t&&l<this.children.length;l++){let c=this.children[l],h=a+c.length;if(e<=h&&t>=a){let d=s&((a<=e?1:0)|(h>=t?2:0));a>=e&&h<=t&&!d?r.push(c):c.decompose(e-a,t-a,r,d)}a=h+1}}replace(e,t,r){if([e,t]=fs(this,e,t),r.lines<this.lines)for(let s=0,l=0;s<this.children.length;s++){let a=this.children[s],c=l+a.length;if(e>=l&&t<=c){let h=a.replace(e-l,t-l,r),d=this.lines-a.lines+h.lines;if(h.lines<d>>4&&h.lines>d>>6){let p=this.children.slice();return p[s]=h,new Kn(p,this.length-(t-e)+r.length)}return super.replace(l,c,h)}l=c+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=fs(this,e,t);let s="";for(let l=0,a=0;l<this.children.length&&a<=t;l++){let c=this.children[l],h=a+c.length;a>e&&l&&(s+=r),e<h&&t>a&&(s+=c.sliceString(e-a,t-a,r)),a=h+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof Kn))return 0;let r=0,[s,l,a,c]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,l+=t){if(s==a||l==c)return r;let h=this.children[s],d=e.children[l];if(h!=d)return r+h.scanIdentical(d,t);r+=h.length+1}}static from(e,t=e.reduce((r,s)=>r+s.length+1,-1)){let r=0;for(let x of e)r+=x.lines;if(r<32){let x=[];for(let k of e)k.flatten(x);return new Ge(x,t)}let s=Math.max(32,r>>5),l=s<<1,a=s>>1,c=[],h=0,d=-1,p=[];function m(x){let k;if(x.lines>l&&x instanceof Kn)for(let S of x.children)m(S);else x.lines>a&&(h>a||!h)?(v(),c.push(x)):x instanceof Ge&&h&&(k=p[p.length-1])instanceof Ge&&x.lines+k.lines<=32?(h+=x.lines,d+=x.length+1,p[p.length-1]=new Ge(k.text.concat(x.text),k.length+1+x.length)):(h+x.lines>s&&v(),h+=x.lines,d+=x.length+1,p.push(x))}function v(){h!=0&&(c.push(p.length==1?p[0]:Kn.from(p,d)),d=-1,h=p.length=0)}for(let x of e)m(x);return v(),c.length==1?c[0]:new Kn(c,t)}}Ee.empty=new Ge([""],0);function vO(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Ha(n,e,t=0,r=1e9){for(let s=0,l=0,a=!0;l<n.length&&s<=r;l++){let c=n[l],h=s+c.length;h>=t&&(h>r&&(c=c.slice(0,r-s)),s<t&&(c=c.slice(t-s)),a?(e[e.length-1]+=c,a=!1):e.push(c)),s=h+1}return e}function $m(n,e,t){return Ha(n,[""],e,t)}class Mo{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof Ge?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,s=this.nodes[r],l=this.offsets[r],a=l>>1,c=s instanceof Ge?s.text.length:s.children.length;if(a==(t>0?c:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof Ge){let h=s.text[a+(t<0?-1:0)];if(this.offsets[r]+=t,h.length>Math.max(0,e))return this.value=e==0?h:t>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=s.children[a+(t<0?-1:0)];e>h.length?(e-=h.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(h),this.offsets.push(t>0?1:(h instanceof Ge?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class sv{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Mo(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=r?s:t<0?s.slice(s.length-r):s.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class ov{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(Ee.prototype[Symbol.iterator]=function(){return this.iter()},Mo.prototype[Symbol.iterator]=sv.prototype[Symbol.iterator]=ov.prototype[Symbol.iterator]=function(){return this});class xO{constructor(e,t,r,s){this.from=e,this.to=t,this.number=r,this.text=s}get length(){return this.to-this.from}}function fs(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function Lt(n,e,t=!0,r=!0){return mO(n,e,t,r)}function wO(n){return n>=56320&&n<57344}function kO(n){return n>=55296&&n<56320}function SO(n,e){let t=n.charCodeAt(e);if(!kO(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return wO(r)?(t-55296<<10)+(r-56320)+65536:t}function bO(n){return n<65536?1:2}const lf=/\r\n?|\n/;var sn=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(sn||(sn={}));class mr{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,s=0;t<this.sections.length;){let l=this.sections[t++],a=this.sections[t++];a<0?(e(r,s,l),s+=l):s+=a,r+=l}}iterChangedRanges(e,t=!1){af(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];s<0?e.push(r,s):e.push(s,r)}return new mr(e)}composeDesc(e){return this.empty?e:e.empty?this:lv(this,e)}mapDesc(e,t=!1){return e.empty?this:uf(this,e,t)}mapPos(e,t=-1,r=sn.Simple){let s=0,l=0;for(let a=0;a<this.sections.length;){let c=this.sections[a++],h=this.sections[a++],d=s+c;if(h<0){if(d>e)return l+(e-s);l+=c}else{if(r!=sn.Simple&&d>=e&&(r==sn.TrackDel&&s<e&&d>e||r==sn.TrackBefore&&s<e||r==sn.TrackAfter&&d>e))return null;if(d>e||d==e&&t<0&&!c)return e==s||t<0?l:l+h;l+=h}s=d}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return l}touchesRange(e,t=e){for(let r=0,s=0;r<this.sections.length&&s<=t;){let l=this.sections[r++],a=this.sections[r++],c=s+l;if(a>=0&&s<=t&&c>=e)return s<e&&c>t?"cover":!0;s=c}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+r+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new mr(e)}static create(e){return new mr(e)}}class ct extends mr{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return af(this,(t,r,s,l,a)=>e=e.replace(s,s+(r-t),a),!1),e}mapDesc(e,t=!1){return uf(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let s=0,l=0;s<t.length;s+=2){let a=t[s],c=t[s+1];if(c>=0){t[s]=c,t[s+1]=a;let h=s>>1;for(;r.length<h;)r.push(Ee.empty);r.push(a?e.slice(l,l+a):Ee.empty)}l+=a}return new ct(t,r)}compose(e){return this.empty?e:e.empty?this:lv(this,e,!0)}map(e,t=!1){return e.empty?this:uf(this,e,t,!0)}iterChanges(e,t=!1){af(this,e,t)}get desc(){return mr.create(this.sections)}filter(e){let t=[],r=[],s=[],l=new jo(this);e:for(let a=0,c=0;;){let h=a==e.length?1e9:e[a++];for(;c<h||c==h&&l.len==0;){if(l.done)break e;let p=Math.min(l.len,h-c);Pt(s,p,-1);let m=l.ins==-1?-1:l.off==0?l.ins:0;Pt(t,p,m),m>0&&Xr(r,t,l.text),l.forward(p),c+=p}let d=e[a++];for(;c<d;){if(l.done)break e;let p=Math.min(l.len,d-c);Pt(t,p,-1),Pt(s,p,l.ins==-1?-1:l.off==0?l.ins:0),l.forward(p),c+=p}}return{changes:new ct(t,r),filtered:mr.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],s=this.sections[t+1];s<0?e.push(r):s==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let s=[],l=[],a=0,c=null;function h(p=!1){if(!p&&!s.length)return;a<t&&Pt(s,t-a,-1);let m=new ct(s,l);c=c?c.compose(m.map(c)):m,s=[],l=[],a=0}function d(p){if(Array.isArray(p))for(let m of p)d(m);else if(p instanceof ct){if(p.length!=t)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${t})`);h(),c=c?c.compose(p.map(c)):p}else{let{from:m,to:v=m,insert:x}=p;if(m>v||m<0||v>t)throw new RangeError(`Invalid change range ${m} to ${v} (in doc of length ${t})`);let k=x?typeof x=="string"?Ee.of(x.split(r||lf)):x:Ee.empty,S=k.length;if(m==v&&S==0)return;m<a&&h(),m>a&&Pt(s,m-a,-1),Pt(s,v-m,S),Xr(l,s,k),a=v}}return d(e),h(!c),c}static empty(e){return new ct(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")t.push(l,-1);else{if(!Array.isArray(l)||typeof l[0]!="number"||l.some((a,c)=>c&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(l.length==1)t.push(l[0],0);else{for(;r.length<s;)r.push(Ee.empty);r[s]=Ee.of(l.slice(1)),t.push(l[0],r[s].length)}}}return new ct(t,r)}static createSet(e,t){return new ct(e,t)}}function Pt(n,e,t,r=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:s>=0&&e==0&&n[s]==0?n[s+1]+=t:r?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function Xr(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(Ee.empty);n.push(t)}}function af(n,e,t){let r=n.inserted;for(let s=0,l=0,a=0;a<n.sections.length;){let c=n.sections[a++],h=n.sections[a++];if(h<0)s+=c,l+=c;else{let d=s,p=l,m=Ee.empty;for(;d+=c,p+=h,h&&r&&(m=m.append(r[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)c=n.sections[a++],h=n.sections[a++];e(s,d,l,p,m),s=d,l=p}}}function uf(n,e,t,r=!1){let s=[],l=r?[]:null,a=new jo(n),c=new jo(e);for(let h=-1;;){if(a.done&&c.len||c.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&c.ins==-1){let d=Math.min(a.len,c.len);Pt(s,d,-1),a.forward(d),c.forward(d)}else if(c.ins>=0&&(a.ins<0||h==a.i||a.off==0&&(c.len<a.len||c.len==a.len&&!t))){let d=c.len;for(Pt(s,c.ins,-1);d;){let p=Math.min(a.len,d);a.ins>=0&&h<a.i&&a.len<=p&&(Pt(s,0,a.ins),l&&Xr(l,s,a.text),h=a.i),a.forward(p),d-=p}c.next()}else if(a.ins>=0){let d=0,p=a.len;for(;p;)if(c.ins==-1){let m=Math.min(p,c.len);d+=m,p-=m,c.forward(m)}else if(c.ins==0&&c.len<p)p-=c.len,c.next();else break;Pt(s,d,h<a.i?a.ins:0),l&&h<a.i&&Xr(l,s,a.text),h=a.i,a.forward(a.len-p)}else{if(a.done&&c.done)return l?ct.createSet(s,l):mr.create(s);throw new Error("Mismatched change set lengths")}}}function lv(n,e,t=!1){let r=[],s=t?[]:null,l=new jo(n),a=new jo(e);for(let c=!1;;){if(l.done&&a.done)return s?ct.createSet(r,s):mr.create(r);if(l.ins==0)Pt(r,l.len,0,c),l.next();else if(a.len==0&&!a.done)Pt(r,0,a.ins,c),s&&Xr(s,r,a.text),a.next();else{if(l.done||a.done)throw new Error("Mismatched change set lengths");{let h=Math.min(l.len2,a.len),d=r.length;if(l.ins==-1){let p=a.ins==-1?-1:a.off?0:a.ins;Pt(r,h,p,c),s&&p&&Xr(s,r,a.text)}else a.ins==-1?(Pt(r,l.off?0:l.len,h,c),s&&Xr(s,r,l.textBit(h))):(Pt(r,l.off?0:l.len,a.off?0:a.ins,c),s&&!a.off&&Xr(s,r,a.text));c=(l.ins>h||a.ins>=0&&a.len>h)&&(c||r.length>d),l.forward2(h),a.forward(h)}}}}class jo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?Ee.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?Ee.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Si{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,s;return this.empty?r=s=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),r==this.from&&s==this.to?this:new Si(r,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return Z.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return Z.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return Z.range(e.anchor,e.head)}static create(e,t,r){return new Si(e,t,r)}}class Z{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:Z.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new Z([this.main],0)}addRange(e,t=!0){return Z.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,Z.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new Z(e.ranges.map(t=>Si.fromJSON(t)),e.main)}static single(e,t=e){return new Z([Z.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,s=0;s<e.length;s++){let l=e[s];if(l.empty?l.from<=r:l.from<r)return Z.normalized(e.slice(),t);r=l.to}return new Z(e,t)}static cursor(e,t=0,r,s){return Si.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(s??16777215)<<6)}static range(e,t,r,s){let l=(r??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?Si.create(t,e,48|l):Si.create(e,t,(t>e?8:0)|l)}static normalized(e,t=0){let r=e[t];e.sort((s,l)=>s.from-l.from),t=e.indexOf(r);for(let s=1;s<e.length;s++){let l=e[s],a=e[s-1];if(l.empty?l.from<=a.to:l.from<a.to){let c=a.from,h=Math.max(l.to,a.to);s<=t&&t--,e.splice(--s,2,l.anchor>l.head?Z.range(h,c):Z.range(c,h))}}return new Z(e,t)}}function av(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let dd=0;class ye{constructor(e,t,r,s,l){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=s,this.id=dd++,this.default=e([]),this.extensions=typeof l=="function"?l(this):l}get reader(){return this}static define(e={}){return new ye(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:pd),!!e.static,e.enables)}of(e){return new Wa([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Wa(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Wa(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function pd(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class Wa{constructor(e,t,r,s){this.dependencies=e,this.facet=t,this.type=r,this.value=s,this.id=dd++}dynamicSlot(e){var t;let r=this.value,s=this.facet.compareInput,l=this.id,a=e[l]>>1,c=this.type==2,h=!1,d=!1,p=[];for(let m of this.dependencies)m=="doc"?h=!0:m=="selection"?d=!0:(((t=e[m.id])!==null&&t!==void 0?t:1)&1)==0&&p.push(e[m.id]);return{create(m){return m.values[a]=r(m),1},update(m,v){if(h&&v.docChanged||d&&(v.docChanged||v.selection)||cf(m,p)){let x=r(m);if(c?!Um(x,m.values[a],s):!s(x,m.values[a]))return m.values[a]=x,1}return 0},reconfigure:(m,v)=>{let x,k=v.config.address[l];if(k!=null){let S=lu(v,k);if(this.dependencies.every(b=>b instanceof ye?v.facet(b)===m.facet(b):b instanceof Ei?v.field(b,!1)==m.field(b,!1):!0)||(c?Um(x=r(m),S,s):s(x=r(m),S)))return m.values[a]=S,0}else x=r(m);return m.values[a]=x,1}}}}function Um(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function cf(n,e){let t=!1;for(let r of e)Eo(n,r)&1&&(t=!0);return t}function OO(n,e,t){let r=t.map(h=>n[h.id]),s=t.map(h=>h.type),l=r.filter(h=>!(h&1)),a=n[e.id]>>1;function c(h){let d=[];for(let p=0;p<r.length;p++){let m=lu(h,r[p]);if(s[p]==2)for(let v of m)d.push(v);else d.push(m)}return e.combine(d)}return{create(h){for(let d of r)Eo(h,d);return h.values[a]=c(h),1},update(h,d){if(!cf(h,l))return 0;let p=c(h);return e.compare(p,h.values[a])?0:(h.values[a]=p,1)},reconfigure(h,d){let p=cf(h,r),m=d.config.facets[e.id],v=d.facet(e);if(m&&!p&&pd(t,m))return h.values[a]=v,0;let x=c(h);return e.compare(x,v)?(h.values[a]=v,0):(h.values[a]=x,1)}}}const ka=ye.define({static:!0});class Ei{constructor(e,t,r,s,l){this.id=e,this.createF=t,this.updateF=r,this.compareF=s,this.spec=l,this.provides=void 0}static define(e){let t=new Ei(dd++,e.create,e.update,e.compare||((r,s)=>r===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(ka).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,s)=>{let l=r.values[t],a=this.updateF(l,s);return this.compareF(l,a)?0:(r.values[t]=a,1)},reconfigure:(r,s)=>{let l=r.facet(ka),a=s.facet(ka),c;return(c=l.find(h=>h.field==this))&&c!=a.find(h=>h.field==this)?(r.values[t]=c.create(r),1):s.config.address[this.id]!=null?(r.values[t]=s.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,ka.of({field:this,create:e})]}get extension(){return this}}const wi={lowest:4,low:3,default:2,high:1,highest:0};function po(n){return e=>new uv(e,n)}const Au={highest:po(wi.highest),high:po(wi.high),default:po(wi.default),low:po(wi.low),lowest:po(wi.lowest)};class uv{constructor(e,t){this.inner=e,this.prec=t}}class Jo{of(e){return new hf(this,e)}reconfigure(e){return Jo.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class hf{constructor(e,t){this.compartment=e,this.inner=t}}class ou{constructor(e,t,r,s,l,a){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=s,this.staticValues=l,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let s=[],l=Object.create(null),a=new Map;for(let v of CO(e,t,a))v instanceof Ei?s.push(v):(l[v.facet.id]||(l[v.facet.id]=[])).push(v);let c=Object.create(null),h=[],d=[];for(let v of s)c[v.id]=d.length<<1,d.push(x=>v.slot(x));let p=r==null?void 0:r.config.facets;for(let v in l){let x=l[v],k=x[0].facet,S=p&&p[v]||[];if(x.every(b=>b.type==0))if(c[k.id]=h.length<<1|1,pd(S,x))h.push(r.facet(k));else{let b=k.combine(x.map(C=>C.value));h.push(r&&k.compare(b,r.facet(k))?r.facet(k):b)}else{for(let b of x)b.type==0?(c[b.id]=h.length<<1|1,h.push(b.value)):(c[b.id]=d.length<<1,d.push(C=>b.dynamicSlot(C)));c[k.id]=d.length<<1,d.push(b=>OO(b,k,x))}}let m=d.map(v=>v(c));return new ou(e,a,m,c,h,l)}}function CO(n,e,t){let r=[[],[],[],[],[]],s=new Map;function l(a,c){let h=s.get(a);if(h!=null){if(h<=c)return;let d=r[h].indexOf(a);d>-1&&r[h].splice(d,1),a instanceof hf&&t.delete(a.compartment)}if(s.set(a,c),Array.isArray(a))for(let d of a)l(d,c);else if(a instanceof hf){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(a.compartment)||a.inner;t.set(a.compartment,d),l(d,c)}else if(a instanceof uv)l(a.inner,a.prec);else if(a instanceof Ei)r[c].push(a),a.provides&&l(a.provides,c);else if(a instanceof Wa)r[c].push(a),a.facet.extensions&&l(a.facet.extensions,wi.default);else{let d=a.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(d,c)}}return l(n,wi.default),r.reduce((a,c)=>a.concat(c))}function Eo(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function lu(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const cv=ye.define(),ff=ye.define({combine:n=>n.some(e=>e),static:!0}),hv=ye.define({combine:n=>n.length?n[0]:void 0,static:!0}),fv=ye.define(),dv=ye.define(),pv=ye.define(),gv=ye.define({combine:n=>n.length?n[0]:!1});class bs{constructor(e,t){this.type=e,this.value=t}static define(){return new PO}}class PO{of(e){return new bs(this,e)}}class AO{constructor(e){this.map=e}of(e){return new st(this,e)}}class st{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new st(this.type,t)}is(e){return this.type==e}static define(e={}){return new AO(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let s of e){let l=s.map(t);l&&r.push(l)}return r}}st.reconfigure=st.define();st.appendConfig=st.define();class Mt{constructor(e,t,r,s,l,a){this.startState=e,this.changes=t,this.selection=r,this.effects=s,this.annotations=l,this.scrollIntoView=a,this._doc=null,this._state=null,r&&av(r,t.newLength),l.some(c=>c.type==Mt.time)||(this.annotations=l.concat(Mt.time.of(Date.now())))}static create(e,t,r,s,l,a){return new Mt(e,t,r,s,l,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Mt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Mt.time=bs.define();Mt.userEvent=bs.define();Mt.addToHistory=bs.define();Mt.remote=bs.define();function MO(n,e){let t=[];for(let r=0,s=0;;){let l,a;if(r<n.length&&(s==e.length||e[s]>=n[r]))l=n[r++],a=n[r++];else if(s<e.length)l=e[s++],a=e[s++];else return t;!t.length||t[t.length-1]<l?t.push(l,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function mv(n,e,t){var r;let s,l,a;return t?(s=e.changes,l=ct.empty(e.changes.length),a=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),l=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(s)),{changes:a,selection:e.selection?e.selection.map(l):(r=n.selection)===null||r===void 0?void 0:r.map(s),effects:st.mapEffects(n.effects,s).concat(st.mapEffects(e.effects,l)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function df(n,e,t){let r=e.selection,s=as(e.annotations);return e.userEvent&&(s=s.concat(Mt.userEvent.of(e.userEvent))),{changes:e.changes instanceof ct?e.changes:ct.of(e.changes||[],t,n.facet(hv)),selection:r&&(r instanceof Z?r:Z.single(r.anchor,r.head)),effects:as(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function yv(n,e,t){let r=df(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let l=1;l<e.length;l++){e[l].filter===!1&&(t=!1);let a=!!e[l].sequential;r=mv(r,df(n,e[l],a?r.changes.newLength:n.doc.length),a)}let s=Mt.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return DO(t?EO(s):s)}function EO(n){let e=n.startState,t=!0;for(let s of e.facet(fv)){let l=s(n);if(l===!1){t=!1;break}Array.isArray(l)&&(t=t===!0?l:MO(t,l))}if(t!==!0){let s,l;if(t===!1)l=n.changes.invertedDesc,s=ct.empty(e.doc.length);else{let a=n.changes.filter(t);s=a.changes,l=a.filtered.mapDesc(a.changes).invertedDesc}n=Mt.create(e,s,n.selection&&n.selection.map(l),st.mapEffects(n.effects,l),n.annotations,n.scrollIntoView)}let r=e.facet(dv);for(let s=r.length-1;s>=0;s--){let l=r[s](n);l instanceof Mt?n=l:Array.isArray(l)&&l.length==1&&l[0]instanceof Mt?n=l[0]:n=yv(e,as(l),!1)}return n}function DO(n){let e=n.startState,t=e.facet(pv),r=n;for(let s=t.length-1;s>=0;s--){let l=t[s](n);l&&Object.keys(l).length&&(r=mv(r,df(e,l,n.changes.newLength),!0))}return r==n?n:Mt.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const RO=[];function as(n){return n==null?RO:Array.isArray(n)?n:[n]}var gr=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(gr||(gr={}));const TO=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let pf;try{pf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function NO(n){if(pf)return pf.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||TO.test(t)))return!0}return!1}function LO(n){return e=>{if(!/\S/.test(e))return gr.Space;if(NO(e))return gr.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return gr.Word;return gr.Other}}class Te{constructor(e,t,r,s,l,a){this.config=e,this.doc=t,this.selection=r,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=l,a&&(a._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)Eo(this,c<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return Eo(this,r),lu(this,r)}update(...e){return yv(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:s}=t;for(let c of e.effects)c.is(Jo.reconfigure)?(t&&(s=new Map,t.compartments.forEach((h,d)=>s.set(d,h)),t=null),s.set(c.value.compartment,c.value.extension)):c.is(st.reconfigure)?(t=null,r=c.value):c.is(st.appendConfig)&&(t=null,r=as(r).concat(c.value));let l;t?l=e.startState.values.slice():(t=ou.resolve(r,s,this),l=new Te(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(h,d)=>d.reconfigure(h,this),null).values);let a=e.startState.facet(ff)?e.newSelection:e.newSelection.asSingle();new Te(t,e.newDoc,a,l,(c,h)=>h.update(c,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:Z.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),s=this.changes(r.changes),l=[r.range],a=as(r.effects);for(let c=1;c<t.ranges.length;c++){let h=e(t.ranges[c]),d=this.changes(h.changes),p=d.map(s);for(let v=0;v<c;v++)l[v]=l[v].map(p);let m=s.mapDesc(d,!0);l.push(h.range.map(m)),s=s.compose(p),a=st.mapEffects(a,p).concat(st.mapEffects(as(h.effects),m))}return{changes:s,selection:Z.create(l,t.mainIndex),effects:a}}changes(e=[]){return e instanceof ct?e:ct.of(e,this.doc.length,this.facet(Te.lineSeparator))}toText(e){return Ee.of(e.split(this.facet(Te.lineSeparator)||lf))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Eo(this,t),lu(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let s=e[r];s instanceof Ei&&this.config.address[s.id]!=null&&(t[r]=s.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(r){for(let l in r)if(Object.prototype.hasOwnProperty.call(e,l)){let a=r[l],c=e[l];s.push(a.init(h=>a.spec.fromJSON(c,h)))}}return Te.create({doc:e.doc,selection:Z.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=ou.resolve(e.extensions||[],new Map),r=e.doc instanceof Ee?e.doc:Ee.of((e.doc||"").split(t.staticFacet(Te.lineSeparator)||lf)),s=e.selection?e.selection instanceof Z?e.selection:Z.single(e.selection.anchor,e.selection.head):Z.single(0);return av(s,r.length),t.staticFacet(ff)||(s=s.asSingle()),new Te(t,r,s,t.dynamicSlots.map(()=>null),(l,a)=>a.create(l),null)}get tabSize(){return this.facet(Te.tabSize)}get lineBreak(){return this.facet(Te.lineSeparator)||`
`}get readOnly(){return this.facet(gv)}phrase(e,...t){for(let r of this.facet(Te.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,s)=>{if(s=="$")return"$";let l=+(s||1);return!l||l>t.length?r:t[l-1]})),e}languageDataAt(e,t,r=-1){let s=[];for(let l of this.facet(cv))for(let a of l(this,t,r))Object.prototype.hasOwnProperty.call(a,e)&&s.push(a[e]);return s}charCategorizer(e){return LO(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:s}=this.doc.lineAt(e),l=this.charCategorizer(e),a=e-r,c=e-r;for(;a>0;){let h=Lt(t,a,!1);if(l(t.slice(h,a))!=gr.Word)break;a=h}for(;c<s;){let h=Lt(t,c);if(l(t.slice(c,h))!=gr.Word)break;c=h}return a==c?null:Z.range(a+r,c+r)}}Te.allowMultipleSelections=ff;Te.tabSize=ye.define({combine:n=>n.length?n[0]:4});Te.lineSeparator=hv;Te.readOnly=gv;Te.phrases=ye.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(s=>n[s]==e[s])}});Te.languageData=cv;Te.changeFilter=fv;Te.transactionFilter=dv;Te.transactionExtender=pv;Jo.reconfigure=st.define();function vv(n,e,t={}){let r={};for(let s of n)for(let l of Object.keys(s)){let a=s[l],c=r[l];if(c===void 0)r[l]=a;else if(!(c===a||a===void 0))if(Object.hasOwnProperty.call(t,l))r[l]=t[l](c,a);else throw new Error("Config merge conflict for field "+l)}for(let s in e)r[s]===void 0&&(r[s]=e[s]);return r}class ds{eq(e){return this==e}range(e,t=e){return gf.create(e,t,this)}}ds.prototype.startSide=ds.prototype.endSide=0;ds.prototype.point=!1;ds.prototype.mapMode=sn.TrackDel;let gf=class xv{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new xv(e,t,r)}};function mf(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class gd{constructor(e,t,r,s){this.from=e,this.to=t,this.value=r,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,s=0){let l=r?this.to:this.from;for(let a=s,c=l.length;;){if(a==c)return a;let h=a+c>>1,d=l[h]-e||(r?this.value[h].endSide:this.value[h].startSide)-t;if(h==a)return d>=0?a:c;d>=0?c=h:a=h+1}}between(e,t,r,s){for(let l=this.findIndex(t,-1e9,!0),a=this.findIndex(r,1e9,!1,l);l<a;l++)if(s(this.from[l]+e,this.to[l]+e,this.value[l])===!1)return!1}map(e,t){let r=[],s=[],l=[],a=-1,c=-1;for(let h=0;h<this.value.length;h++){let d=this.value[h],p=this.from[h]+e,m=this.to[h]+e,v,x;if(p==m){let k=t.mapPos(p,d.startSide,d.mapMode);if(k==null||(v=x=k,d.startSide!=d.endSide&&(x=t.mapPos(p,d.endSide),x<v)))continue}else if(v=t.mapPos(p,d.startSide),x=t.mapPos(m,d.endSide),v>x||v==x&&d.startSide>0&&d.endSide<=0)continue;(x-v||d.endSide-d.startSide)<0||(a<0&&(a=v),d.point&&(c=Math.max(c,x-v)),r.push(d),s.push(v-a),l.push(x-a))}return{mapped:r.length?new gd(s,l,r,c):null,pos:a}}}class Ne{constructor(e,t,r,s){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=s}static create(e,t,r,s){return new Ne(e,t,r,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:s=0,filterTo:l=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(r&&(t=t.slice().sort(mf)),this.isEmpty)return t.length?Ne.of(t):this;let c=new wv(this,null,-1).goto(0),h=0,d=[],p=new Fo;for(;c.value||h<t.length;)if(h<t.length&&(c.from-t[h].from||c.startSide-t[h].value.startSide)>=0){let m=t[h++];p.addInner(m.from,m.to,m.value)||d.push(m)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(h==t.length||this.chunkEnd(c.chunkIndex)<t[h].from)&&(!a||s>this.chunkEnd(c.chunkIndex)||l<this.chunkPos[c.chunkIndex])&&p.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!a||s>c.to||l<c.from||a(c.from,c.to,c.value))&&(p.addInner(c.from,c.to,c.value)||d.push(gf.create(c.from,c.to,c.value))),c.next());return p.finishInner(this.nextLayer.isEmpty&&!d.length?Ne.empty:this.nextLayer.update({add:d,filter:a,filterFrom:s,filterTo:l}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],s=-1;for(let a=0;a<this.chunk.length;a++){let c=this.chunkPos[a],h=this.chunk[a],d=e.touchesRange(c,c+h.length);if(d===!1)s=Math.max(s,h.maxPoint),t.push(h),r.push(e.mapPos(c));else if(d===!0){let{mapped:p,pos:m}=h.map(c,e);p&&(s=Math.max(s,p.maxPoint),t.push(p),r.push(m))}}let l=this.nextLayer.map(e);return t.length==0?l:new Ne(r,t,l||Ne.empty,s)}between(e,t,r){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],a=this.chunk[s];if(t>=l&&e<=l+a.length&&a.between(l,e-l,t-l,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return _o.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return _o.from(e).goto(t)}static compare(e,t,r,s,l=-1){let a=e.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=l),c=t.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=l),h=Xm(a,c,r),d=new go(a,h,l),p=new go(c,h,l);r.iterGaps((m,v,x)=>Km(d,m,p,v,x,s)),r.empty&&r.length==0&&Km(d,0,p,0,0,s)}static eq(e,t,r=0,s){s==null&&(s=999999999);let l=e.filter(p=>!p.isEmpty&&t.indexOf(p)<0),a=t.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(l.length!=a.length)return!1;if(!l.length)return!0;let c=Xm(l,a),h=new go(l,c,0).goto(r),d=new go(a,c,0).goto(r);for(;;){if(h.to!=d.to||!yf(h.active,d.active)||h.point&&(!d.point||!h.point.eq(d.point)))return!1;if(h.to>s)return!0;h.next(),d.next()}}static spans(e,t,r,s,l=-1){let a=new go(e,null,l).goto(t),c=t,h=a.openStart;for(;;){let d=Math.min(a.to,r);if(a.point){let p=a.activeForPoint(a.to),m=a.pointFrom<t?p.length+1:a.point.startSide<0?p.length:Math.min(p.length,h);s.point(c,d,a.point,p,m,a.pointRank),h=Math.min(a.openEnd(d),p.length)}else d>c&&(s.span(c,d,a.active,h),h=a.openEnd(d));if(a.to>r)return h+(a.point&&a.to>r?1:0);c=a.to,a.next()}}static of(e,t=!1){let r=new Fo;for(let s of e instanceof gf?[e]:t?IO(e):e)r.add(s.from,s.to,s.value);return r.finish()}static join(e){if(!e.length)return Ne.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let s=e[r];s!=Ne.empty;s=s.nextLayer)t=new Ne(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}Ne.empty=new Ne([],[],null,-1);function IO(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(mf(e,r)>0)return n.slice().sort(mf);e=r}return n}Ne.empty.nextLayer=Ne.empty;class Fo{finishChunk(e){this.chunks.push(new gd(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new Fo)).add(e,t,r)}addInner(e,t,r){let s=e-this.lastTo||r.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Ne.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ne.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Xm(n,e,t){let r=new Map;for(let l of n)for(let a=0;a<l.chunk.length;a++)l.chunk[a].maxPoint<=0&&r.set(l.chunk[a],l.chunkPos[a]);let s=new Set;for(let l of e)for(let a=0;a<l.chunk.length;a++){let c=r.get(l.chunk[a]);c!=null&&(t?t.mapPos(c):c)==l.chunkPos[a]&&!(t!=null&&t.touchesRange(c,c+l.chunk[a].length))&&s.add(l.chunk[a])}return s}class wv{constructor(e,t,r,s=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class _o{constructor(e){this.heap=e}static from(e,t=null,r=-1){let s=[];for(let l=0;l<e.length;l++)for(let a=e[l];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&s.push(new wv(a,t,r,l));return s.length==1?s[0]:new _o(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)Rh(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)Rh(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Rh(this.heap,0)}}}function Rh(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let s=n[r];if(r+1<n.length&&s.compare(n[r+1])>=0&&(s=n[r+1],r++),t.compare(s)<0)break;n[r]=t,n[e]=s,e=r}}class go{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=_o.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Sa(this.active,e),Sa(this.activeTo,e),Sa(this.activeRank,e),this.minActive=qm(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:s,rank:l}=this.cursor;for(;t<this.activeRank.length&&(l-this.activeRank[t]||s-this.activeTo[t])>0;)t++;ba(this.active,t,r),ba(this.activeTo,t,s),ba(this.activeRank,t,l),e&&ba(e,t,this.cursor.from),this.minActive=qm(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),r&&Sa(r,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let s=r.length-1;s>=0&&r[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function Km(n,e,t,r,s,l){n.goto(e),t.goto(r);let a=r+s,c=r,h=r-e;for(;;){let d=n.to+h-t.to,p=d||n.endSide-t.endSide,m=p<0?n.to+h:t.to,v=Math.min(m,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&yf(n.activeForPoint(n.to),t.activeForPoint(t.to))||l.comparePoint(c,v,n.point,t.point):v>c&&!yf(n.active,t.active)&&l.compareRange(c,v,n.active,t.active),m>a)break;(d||n.openEnd!=t.openEnd)&&l.boundChange&&l.boundChange(m),c=m,p<=0&&n.next(),p>=0&&t.next()}}function yf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Sa(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function ba(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function qm(n,e){let t=-1,r=1e9;for(let s=0;s<e.length;s++)(e[s]-r||n[s].endSide-n[t].endSide)<0&&(t=s,r=e[s]);return t}function Mu(n,e,t=n.length){let r=0;for(let s=0;s<t&&s<n.length;)n.charCodeAt(s)==9?(r+=e-r%e,s++):(r++,s=Lt(n,s));return r}function BO(n,e,t,r){for(let s=0,l=0;;){if(l>=e)return s;if(s==n.length)break;l+=n.charCodeAt(s)==9?t-l%t:1,s=Lt(n,s)}return n.length}const vf="",Ym=typeof Symbol>"u"?"__"+vf:Symbol.for(vf),xf=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),Gm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class Zr{constructor(e,t){this.rules=[];let{finish:r}=t||{};function s(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function l(a,c,h,d){let p=[],m=/^@(\w+)\b/.exec(a[0]),v=m&&m[1]=="keyframes";if(m&&c==null)return h.push(a[0]+";");for(let x in c){let k=c[x];if(/&/.test(x))l(x.split(/,\s*/).map(S=>a.map(b=>S.replace(/&/,b))).reduce((S,b)=>S.concat(b)),k,h);else if(k&&typeof k=="object"){if(!m)throw new RangeError("The value of a property ("+x+") should be a primitive value.");l(s(x),k,p,v)}else k!=null&&p.push(x.replace(/_.*/,"").replace(/[A-Z]/g,S=>"-"+S.toLowerCase())+": "+k+";")}(p.length||v)&&h.push((r&&!m&&!d?a.map(r):a).join(", ")+" {"+p.join(" ")+"}")}for(let a in e)l(s(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=Gm[Ym]||1;return Gm[Ym]=e+1,vf+e.toString(36)}static mount(e,t,r){let s=e[xf],l=r&&r.nonce;s?l&&s.setNonce(l):s=new zO(e,l),s.mount(Array.isArray(t)?t:[t],e)}}let Zm=new Map;class zO{constructor(e,t){let r=e.ownerDocument||e,s=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let l=Zm.get(r);if(l)return e[xf]=l;this.sheet=new s.CSSStyleSheet,Zm.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[xf]=this}mount(e,t){let r=this.sheet,s=0,l=0;for(let a=0;a<e.length;a++){let c=e[a],h=this.modules.indexOf(c);if(h<l&&h>-1&&(this.modules.splice(h,1),l--,h=-1),h==-1){if(this.modules.splice(l++,0,c),r)for(let d=0;d<c.rules.length;d++)r.insertRule(c.rules[d],s++)}else{for(;l<h;)s+=this.modules[l++].rules.length;s+=c.rules.length,l++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let h=0;h<this.modules.length;h++)a+=this.modules[h].getRules()+`
`;this.styleTag.textContent=a;let c=t.head||t;this.styleTag.parentNode!=c&&c.insertBefore(this.styleTag,c.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var Jr={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Vo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},jO=typeof navigator<"u"&&/Mac/.test(navigator.platform),FO=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var mt=0;mt<10;mt++)Jr[48+mt]=Jr[96+mt]=String(mt);for(var mt=1;mt<=24;mt++)Jr[mt+111]="F"+mt;for(var mt=65;mt<=90;mt++)Jr[mt]=String.fromCharCode(mt+32),Vo[mt]=String.fromCharCode(mt);for(var Th in Jr)Vo.hasOwnProperty(Th)||(Vo[Th]=Jr[Th]);function _O(n){var e=jO&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||FO&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Vo:Jr)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}let Nt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},wf=typeof document<"u"?document:{documentElement:{style:{}}};const kf=/Edge\/(\d+)/.exec(Nt.userAgent),kv=/MSIE \d/.test(Nt.userAgent),Sf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Nt.userAgent),Eu=!!(kv||Sf||kf),Jm=!Eu&&/gecko\/(\d+)/i.test(Nt.userAgent),Nh=!Eu&&/Chrome\/(\d+)/.exec(Nt.userAgent),VO="webkitFontSmoothing"in wf.documentElement.style,bf=!Eu&&/Apple Computer/.test(Nt.vendor),e0=bf&&(/Mobile\/\w+/.test(Nt.userAgent)||Nt.maxTouchPoints>2);var oe={mac:e0||/Mac/.test(Nt.platform),windows:/Win/.test(Nt.platform),linux:/Linux|X11/.test(Nt.platform),ie:Eu,ie_version:kv?wf.documentMode||6:Sf?+Sf[1]:kf?+kf[1]:0,gecko:Jm,gecko_version:Jm?+(/Firefox\/(\d+)/.exec(Nt.userAgent)||[0,0])[1]:0,chrome:!!Nh,chrome_version:Nh?+Nh[1]:0,ios:e0,android:/Android\b/.test(Nt.userAgent),webkit_version:VO?+(/\bAppleWebKit\/(\d+)/.exec(Nt.userAgent)||[0,0])[1]:0,safari:bf,safari_version:bf?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Nt.userAgent)||[0,0])[1]:0,tabSize:wf.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Ho(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Of(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Qa(n,e){if(!e.anchorNode)return!1;try{return Of(n,e.anchorNode)}catch{return!1}}function Wo(n){return n.nodeType==3?Pi(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Do(n,e,t,r){return t?t0(n,e,t,r,-1)||t0(n,e,t,r,1):!1}function Ci(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function au(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function t0(n,e,t,r,s){for(;;){if(n==t&&e==r)return!0;if(e==(s<0?0:Zn(n))){if(n.nodeName=="DIV")return!1;let l=n.parentNode;if(!l||l.nodeType!=1)return!1;e=Ci(n)+(s<0?0:1),n=l}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?Zn(n):0}else return!1}}function Zn(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Du(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function HO(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Sv(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function WO(n,e,t,r,s,l,a,c){let h=n.ownerDocument,d=h.defaultView||window;for(let p=n,m=!1;p&&!m;)if(p.nodeType==1){let v,x=p==h.body,k=1,S=1;if(x)v=HO(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(m=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let D=p.getBoundingClientRect();({scaleX:k,scaleY:S}=Sv(p,D)),v={left:D.left,right:D.left+p.clientWidth*k,top:D.top,bottom:D.top+p.clientHeight*S}}let b=0,C=0;if(s=="nearest")e.top<v.top?(C=e.top-(v.top+a),t>0&&e.bottom>v.bottom+C&&(C=e.bottom-v.bottom+a)):e.bottom>v.bottom&&(C=e.bottom-v.bottom+a,t<0&&e.top-C<v.top&&(C=e.top-(v.top+a)));else{let D=e.bottom-e.top,B=v.bottom-v.top;C=(s=="center"&&D<=B?e.top+D/2-B/2:s=="start"||s=="center"&&t<0?e.top-a:e.bottom-B+a)-v.top}if(r=="nearest"?e.left<v.left?(b=e.left-(v.left+l),t>0&&e.right>v.right+b&&(b=e.right-v.right+l)):e.right>v.right&&(b=e.right-v.right+l,t<0&&e.left<v.left+b&&(b=e.left-(v.left+l))):b=(r=="center"?e.left+(e.right-e.left)/2-(v.right-v.left)/2:r=="start"==c?e.left-l:e.right-(v.right-v.left)+l)-v.left,b||C)if(x)d.scrollBy(b,C);else{let D=0,B=0;if(C){let _=p.scrollTop;p.scrollTop+=C/S,B=(p.scrollTop-_)*S}if(b){let _=p.scrollLeft;p.scrollLeft+=b/k,D=(p.scrollLeft-_)*k}e={left:e.left-D,top:e.top-B,right:e.right-D,bottom:e.bottom-B},D&&Math.abs(D-b)<1&&(r="nearest"),B&&Math.abs(B-C)<1&&(s="nearest")}if(x)break;(e.top<v.top||e.bottom>v.bottom||e.left<v.left||e.right>v.right)&&(e={left:Math.max(e.left,v.left),right:Math.min(e.right,v.right),top:Math.max(e.top,v.top),bottom:Math.min(e.bottom,v.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function QO(n){let e=n.ownerDocument,t,r;for(let s=n.parentNode;s&&!(s==e.body||t&&r);)if(s.nodeType==1)!r&&s.scrollHeight>s.clientHeight&&(r=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:r}}class $O{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?Zn(t):0),r,Math.min(e.focusOffset,r?Zn(r):0))}set(e,t,r,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=s}}let xi=null;oe.safari&&oe.safari_version>=26&&(xi=!1);function bv(n){if(n.setActive)return n.setActive();if(xi)return n.focus(xi);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(xi==null?{get preventScroll(){return xi={preventScroll:!0},!0}}:void 0),!xi){xi=!1;for(let t=0;t<e.length;){let r=e[t++],s=e[t++],l=e[t++];r.scrollTop!=s&&(r.scrollTop=s),r.scrollLeft!=l&&(r.scrollLeft=l)}}}let n0;function Pi(n,e,t=e){let r=n0||(n0=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function us(n,e,t,r){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=r);let l=new KeyboardEvent("keydown",s);l.synthetic=!0,n.dispatchEvent(l);let a=new KeyboardEvent("keyup",s);return a.synthetic=!0,n.dispatchEvent(a),l.defaultPrevented||a.defaultPrevented}function UO(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Ov(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function XO(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,Zn(t));;)if(r){if(t.nodeType!=1)return!1;let s=t.childNodes[r-1];s.contentEditable=="false"?r--:(t=s,r=Zn(t))}else{if(t==n)return!0;r=Ci(t),t=t.parentNode}}function Cv(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Pv(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=Zn(t)}else if(t.parentNode&&!au(t))r=Ci(t),t=t.parentNode;else return null}}function Av(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!au(t))r=Ci(t)+1,t=t.parentNode;else return null}}class At{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new At(e.parentNode,Ci(e),t)}static after(e,t){return new At(e.parentNode,Ci(e)+1,t)}}const md=[];class Ie{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,s=null,l;for(let a of this.children){if(a.flags&7){if(!a.dom&&(l=s?s.nextSibling:r.firstChild)){let c=Ie.get(l);(!c||!c.parent&&c.canReuseDOM(a))&&a.reuseDOM(l)}a.sync(e,t),a.flags&=-8}if(l=s?s.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&l!=a.dom&&(t.written=!0),a.dom.parentNode==r)for(;l&&l!=a.dom;)l=r0(l);else r.insertBefore(a.dom,l);s=a.dom}for(l=s?s.nextSibling:r.firstChild,l&&t&&t.node==r&&(t.written=!0);l;)l=r0(l)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let s=Zn(e)==0?0:t==0?-1:1;for(;;){let l=e.parentNode;if(l==this.dom)break;s==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?s=-1:s=1),e=l}s<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!Ie.get(r);)r=r.nextSibling;if(!r)return this.length;for(let s=0,l=0;;s++){let a=this.children[s];if(a.dom==r)return l;l+=a.length+a.breakAfter}}domBoundsAround(e,t,r=0){let s=-1,l=-1,a=-1,c=-1;for(let h=0,d=r,p=r;h<this.children.length;h++){let m=this.children[h],v=d+m.length;if(d<e&&v>t)return m.domBoundsAround(e,t,d);if(v>=e&&s==-1&&(s=h,l=d),d>t&&m.dom.parentNode==this.dom){a=h,c=p;break}p=v,d=v+m.breakAfter}return{from:l,to:c<0?r+this.length:c,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=md){this.markDirty();for(let s=e;s<t;s++){let l=this.children[s];l.parent==this&&r.indexOf(l)<0&&l.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let s=0;s<r.length;s++)r[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Mv(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,s,l,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}Ie.prototype.breakAfter=0;function r0(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Mv{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function Ev(n,e,t,r,s,l,a,c,h){let{children:d}=n,p=d.length?d[e]:null,m=l.length?l[l.length-1]:null,v=m?m.breakAfter:a;if(!(e==r&&p&&!a&&!v&&l.length<2&&p.merge(t,s,l.length?m:null,t==0,c,h))){if(r<d.length){let x=d[r];x&&(s<x.length||x.breakAfter&&(m!=null&&m.breakAfter))?(e==r&&(x=x.split(s),s=0),!v&&m&&x.merge(0,s,m,!0,0,h)?l[l.length-1]=x:((s||x.children.length&&!x.children[0].length)&&x.merge(0,s,null,!1,0,h),l.push(x))):x!=null&&x.breakAfter&&(m?m.breakAfter=1:a=1),r++}for(p&&(p.breakAfter=a,t>0&&(!a&&l.length&&p.merge(t,p.length,l[0],!1,c,0)?p.breakAfter=l.shift().breakAfter:(t<p.length||p.children.length&&p.children[p.children.length-1].length==0)&&p.merge(t,p.length,null,!1,c,0),e++));e<r&&l.length;)if(d[r-1].become(l[l.length-1]))r--,l.pop(),h=l.length?0:c;else if(d[e].become(l[0]))e++,l.shift(),c=l.length?0:h;else break;!l.length&&e&&r<d.length&&!d[e-1].breakAfter&&d[r].merge(0,0,d[e-1],!1,c,h)&&e--,(e<r||l.length)&&n.replaceChildren(e,r,l)}}function Dv(n,e,t,r,s,l){let a=n.childCursor(),{i:c,off:h}=a.findPos(t,1),{i:d,off:p}=a.findPos(e,-1),m=e-t;for(let v of r)m+=v.length;n.length+=m,Ev(n,d,p,c,h,r,0,s,l)}const KO=256;class Tn extends Ie{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof Tn)||this.length-(t-e)+r.length>KO||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new Tn(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new At(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return qO(this.dom,e,t)}}class vr extends Ie{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let s of t)s.setParent(this)}setAttrs(e){if(Ov(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,s,l,a){return r&&(!(r instanceof vr&&r.mark.eq(this.mark))||e&&l<=0||t<this.length&&a<=0)?!1:(Dv(this,e,t,r?r.children.slice():[],l-1,a-1),this.markDirty(),!0)}split(e){let t=[],r=0,s=-1,l=0;for(let c of this.children){let h=r+c.length;h>e&&t.push(r<e?c.split(e-r):c),s<0&&r>=e&&(s=l),r=h,l++}let a=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new vr(this.mark,t,a)}domAtPos(e){return Rv(this,e)}coordsAt(e,t){return Nv(this,e,t)}}function qO(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let s=e,l=e,a=0;e==0&&t<0||e==r&&t>=0?oe.chrome||oe.gecko||(e?(s--,a=1):l<r&&(l++,a=-1)):t<0?s--:l<r&&l++;let c=Pi(n,s,l).getClientRects();if(!c.length)return null;let h=c[(a?a<0:t>=0)?0:c.length-1];return oe.safari&&!a&&h.width==0&&(h=Array.prototype.find.call(c,d=>d.width)||h),a?Du(h,a<0):h||null}class Kr extends Ie{static create(e,t,r){return new Kr(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=Kr.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,s,l,a){return r&&(!(r instanceof Kr)||!this.widget.compare(r.widget)||e>0&&l<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof Kr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return Ee.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,s=this.posAtStart;return r?r.slice(s,s+this.length):Ee.empty}domAtPos(e){return(this.length?e==0:this.side>0)?At.before(this.dom):At.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let s=this.dom.getClientRects(),l=null;if(!s.length)return null;let a=this.side?this.side<0:e>0;for(let c=a?s.length-1:0;l=s[c],!(e>0?c==0:c==s.length-1||l.top<l.bottom);c+=a?-1:1);return Du(l,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ps extends Ie{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ps&&e.side==this.side}split(){return new ps(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?At.before(this.dom):At.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return Ee.empty}get isHidden(){return!0}}Tn.prototype.children=Kr.prototype.children=ps.prototype.children=md;function Rv(n,e){let t=n.dom,{children:r}=n,s=0;for(let l=0;s<r.length;s++){let a=r[s],c=l+a.length;if(!(c==l&&a.getSide()<=0)){if(e>l&&e<c&&a.dom.parentNode==t)return a.domAtPos(e-l);if(e<=l)break;l=c}}for(let l=s;l>0;l--){let a=r[l-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let l=s;l<r.length;l++){let a=r[l];if(a.dom.parentNode==t)return a.domAtPos(0)}return new At(t,0)}function Tv(n,e,t){let r,{children:s}=n;t>0&&e instanceof vr&&s.length&&(r=s[s.length-1])instanceof vr&&r.mark.eq(e.mark)?Tv(r,e.children[0],t-1):(s.push(e),e.setParent(n)),n.length+=e.length}function Nv(n,e,t){let r=null,s=-1,l=null,a=-1;function c(d,p){for(let m=0,v=0;m<d.children.length&&v<=p;m++){let x=d.children[m],k=v+x.length;k>=p&&(x.children.length?c(x,p-v):(!l||l.isHidden&&(t>0||GO(l,x)))&&(k>p||v==k&&x.getSide()>0)?(l=x,a=p-v):(v<p||v==k&&x.getSide()<0&&!x.isHidden)&&(r=x,s=p-v)),v=k}}c(n,e);let h=(t<0?r:l)||r||l;return h?h.coordsAt(Math.max(0,h==r?s:a),t):YO(n)}function YO(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Wo(e);return t[t.length-1]||null}function GO(n,e){let t=n.coordsAt(0,1),r=e.coordsAt(0,1);return t&&r&&r.top<t.bottom}function Cf(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const i0=Object.create(null);function uu(n,e,t){if(n==e)return!0;n||(n=i0),e||(e=i0);let r=Object.keys(n),s=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let l of r)if(l!=t&&(s.indexOf(l)==-1||n[l]!==e[l]))return!1;return!0}function Pf(n,e,t){let r=!1;if(e)for(let s in e)t&&s in t||(r=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(r=!0,s=="style"?n.style.cssText=t[s]:n.setAttribute(s,t[s]));return r}function ZO(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class el{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var It=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(It||(It={}));class Ke extends ds{constructor(e,t,r,s){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=s}get heightRelevant(){return!1}static mark(e){return new tl(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new ei(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,s;if(e.isBlockGap)r=-5e8,s=4e8;else{let{start:l,end:a}=Lv(e,t);r=(l?t?-3e8:-1:5e8)-1,s=(a?t?2e8:1:-6e8)+1}return new ei(e,r,s,t,e.widget||null,!0)}static line(e){return new nl(e)}static set(e,t=!1){return Ne.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}Ke.none=Ne.empty;class tl extends Ke{constructor(e){let{start:t,end:r}=Lv(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof tl&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&uu(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}tl.prototype.point=!1;class nl extends Ke{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof nl&&this.spec.class==e.spec.class&&uu(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}nl.prototype.mapMode=sn.TrackBefore;nl.prototype.point=!0;class ei extends Ke{constructor(e,t,r,s,l,a){super(t,r,l,e),this.block=s,this.isReplace=a,this.mapMode=s?t<=0?sn.TrackBefore:sn.TrackAfter:sn.TrackDel}get type(){return this.startSide!=this.endSide?It.WidgetRange:this.startSide<=0?It.WidgetBefore:It.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ei&&JO(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}ei.prototype.point=!0;function Lv(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function JO(n,e){return n==e||!!(n&&e&&n.compare(e))}function $a(n,e,t,r=0){let s=t.length-1;s>=0&&t[s]+r>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class et extends Ie{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,s,l,a){if(r){if(!(r instanceof et))return!1;this.dom||r.transferDOM(this)}return s&&this.setDeco(r?r.attrs:null),Dv(this,e,t,r?r.children.slice():[],l,a),!0}split(e){let t=new et;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:s}=this.childPos(e);s&&(t.append(this.children[r].split(s),0),this.children[r].merge(s,this.children[r].length,null,!1,0,0),r++);for(let l=r;l<this.children.length;l++)t.append(this.children[l],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){uu(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Tv(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=Cf(t,this.attrs||{})),r&&(this.attrs=Cf({class:r},this.attrs||{}))}domAtPos(e){return Rv(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(Ov(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Pf(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&Ie.get(s)instanceof vr;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((r=Ie.get(s))===null||r===void 0?void 0:r.isEditable)==!1&&(!oe.ios||!this.children.some(l=>l instanceof Tn))){let l=document.createElement("BR");l.cmIgnore=!0,this.dom.appendChild(l)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof Tn)||/[^ -~]/.test(r.text))return null;let s=Wo(r.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=Nv(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:s}=this.parent.view.viewState,l=r.bottom-r.top;if(Math.abs(l-s.lineHeight)<2&&s.textHeight<l){let a=(l-s.textHeight)/2;return{top:r.top+a,bottom:r.bottom-a,left:r.left,right:r.left}}}return r}become(e){return e instanceof et&&this.children.length==0&&e.children.length==0&&uu(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,s=0;r<e.children.length;r++){let l=e.children[r],a=s+l.length;if(a>=t){if(l instanceof et)return l;if(a>t)break}s=a+l.breakAfter}return null}}class yr extends Ie{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,s,l,a){return r&&(!(r instanceof yr)||!this.widget.compare(r.widget)||e>0&&l<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?At.before(this.dom):At.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new yr(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return md}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):Ee.empty}domBoundsAround(){return null}become(e){return e instanceof yr&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof Af?null:Du(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class Af extends el{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Ro{constructor(e,t,r,s){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof yr&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new et),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Oa(new ps(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof yr)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:c,done:h}=this.cursor.next(this.skip);if(this.skip=0,h)throw new Error("Ran out of text content when drawing inline views");if(c){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e),l=Math.min(s,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(Oa(new Tn(this.text.slice(this.textOff,this.textOff+l)),t),r),this.atCursorPos=!0,this.textOff+=l,e-=l,r=s<=l?0:t.length}}span(e,t,r,s){this.buildText(t-e,r,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,r,s,l,a){if(this.disallowBlockEffectsFor[a]&&r instanceof ei){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let c=t-e;if(r instanceof ei)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new yr(r.widget||gs.block,c,r));else{let h=Kr.create(r.widget||gs.inline,c,c?0:r.startSide),d=this.atCursorPos&&!h.isEditable&&l<=s.length&&(e<t||r.startSide>0),p=!h.isEditable&&(e<t||l>s.length||r.startSide<=0),m=this.getLine();this.pendingBuffer==2&&!d&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),d&&(m.append(Oa(new ps(1),s),l),l=s.length+Math.max(0,l-s.length)),m.append(Oa(h,s),l),this.atCursorPos=p,this.pendingBuffer=p?e<t||l>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);c&&(this.textOff+c<=this.text.length?this.textOff+=c:(this.skip+=c-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=l)}static build(e,t,r,s,l){let a=new Ro(e,t,r,l);return a.openEnd=Ne.spans(s,t,r,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function Oa(n,e){for(let t of e)n=new vr(t,[n],n.length);return n}class gs extends el{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}gs.inline=new gs("span");gs.block=new gs("div");var Xe=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(Xe||(Xe={}));const Ai=Xe.LTR,yd=Xe.RTL;function Iv(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const eC=Iv("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),tC=Iv("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Mf=Object.create(null),Qn=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Mf[e]=t,Mf[t]=-e}function Bv(n){return n<=247?eC[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?tC[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const nC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class qr{get dir(){return this.level%2?yd:Ai}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,s){let l=-1;for(let a=0;a<e.length;a++){let c=e[a];if(c.from<=t&&c.to>=t){if(c.level==r)return a;(l<0||(s!=0?s<0?c.from<t:c.to>t:e[l].level>c.level))&&(l=a)}}if(l<0)throw new RangeError("Index out of range");return l}}function zv(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],s=e[t];if(r.from!=s.from||r.to!=s.to||r.direction!=s.direction||!zv(r.inner,s.inner))return!1}return!0}const Be=[];function rC(n,e,t,r,s){for(let l=0;l<=r.length;l++){let a=l?r[l-1].to:e,c=l<r.length?r[l].from:t,h=l?256:s;for(let d=a,p=h,m=h;d<c;d++){let v=Bv(n.charCodeAt(d));v==512?v=p:v==8&&m==4&&(v=16),Be[d]=v==4?2:v,v&7&&(m=v),p=v}for(let d=a,p=h,m=h;d<c;d++){let v=Be[d];if(v==128)d<c-1&&p==Be[d+1]&&p&24?v=Be[d]=p:Be[d]=256;else if(v==64){let x=d+1;for(;x<c&&Be[x]==64;)x++;let k=d&&p==8||x<t&&Be[x]==8?m==1?1:8:256;for(let S=d;S<x;S++)Be[S]=k;d=x-1}else v==8&&m==1&&(Be[d]=1);p=v,v&7&&(m=v)}}}function iC(n,e,t,r,s){let l=s==1?2:1;for(let a=0,c=0,h=0;a<=r.length;a++){let d=a?r[a-1].to:e,p=a<r.length?r[a].from:t;for(let m=d,v,x,k;m<p;m++)if(x=Mf[v=n.charCodeAt(m)])if(x<0){for(let S=c-3;S>=0;S-=3)if(Qn[S+1]==-x){let b=Qn[S+2],C=b&2?s:b&4?b&1?l:s:0;C&&(Be[m]=Be[Qn[S]]=C),c=S;break}}else{if(Qn.length==189)break;Qn[c++]=m,Qn[c++]=v,Qn[c++]=h}else if((k=Be[m])==2||k==1){let S=k==s;h=S?0:1;for(let b=c-3;b>=0;b-=3){let C=Qn[b+2];if(C&2)break;if(S)Qn[b+2]|=2;else{if(C&4)break;Qn[b+2]|=4}}}}}function sC(n,e,t,r){for(let s=0,l=r;s<=t.length;s++){let a=s?t[s-1].to:n,c=s<t.length?t[s].from:e;for(let h=a;h<c;){let d=Be[h];if(d==256){let p=h+1;for(;;)if(p==c){if(s==t.length)break;p=t[s++].to,c=s<t.length?t[s].from:e}else if(Be[p]==256)p++;else break;let m=l==1,v=(p<e?Be[p]:r)==1,x=m==v?m?1:2:r;for(let k=p,S=s,b=S?t[S-1].to:n;k>h;)k==b&&(k=t[--S].from,b=S?t[S-1].to:n),Be[--k]=x;h=p}else l=d,h++}}}function Ef(n,e,t,r,s,l,a){let c=r%2?2:1;if(r%2==s%2)for(let h=e,d=0;h<t;){let p=!0,m=!1;if(d==l.length||h<l[d].from){let S=Be[h];S!=c&&(p=!1,m=S==16)}let v=!p&&c==1?[]:null,x=p?r:r+1,k=h;e:for(;;)if(d<l.length&&k==l[d].from){if(m)break e;let S=l[d];if(!p)for(let b=S.to,C=d+1;;){if(b==t)break e;if(C<l.length&&l[C].from==b)b=l[C++].to;else{if(Be[b]==c)break e;break}}if(d++,v)v.push(S);else{S.from>h&&a.push(new qr(h,S.from,x));let b=S.direction==Ai!=!(x%2);Df(n,b?r+1:r,s,S.inner,S.from,S.to,a),h=S.to}k=S.to}else{if(k==t||(p?Be[k]!=c:Be[k]==c))break;k++}v?Ef(n,h,k,r+1,s,v,a):h<k&&a.push(new qr(h,k,x)),h=k}else for(let h=t,d=l.length;h>e;){let p=!0,m=!1;if(!d||h>l[d-1].to){let S=Be[h-1];S!=c&&(p=!1,m=S==16)}let v=!p&&c==1?[]:null,x=p?r:r+1,k=h;e:for(;;)if(d&&k==l[d-1].to){if(m)break e;let S=l[--d];if(!p)for(let b=S.from,C=d;;){if(b==e)break e;if(C&&l[C-1].to==b)b=l[--C].from;else{if(Be[b-1]==c)break e;break}}if(v)v.push(S);else{S.to<h&&a.push(new qr(S.to,h,x));let b=S.direction==Ai!=!(x%2);Df(n,b?r+1:r,s,S.inner,S.from,S.to,a),h=S.from}k=S.from}else{if(k==e||(p?Be[k-1]!=c:Be[k-1]==c))break;k--}v?Ef(n,k,h,r+1,s,v,a):k<h&&a.push(new qr(k,h,x)),h=k}}function Df(n,e,t,r,s,l,a){let c=e%2?2:1;rC(n,s,l,r,c),iC(n,s,l,r,c),sC(s,l,r,c),Ef(n,s,l,e,t,r,a)}function oC(n,e,t){if(!n)return[new qr(0,0,e==yd?1:0)];if(e==Ai&&!t.length&&!nC.test(n))return jv(n.length);if(t.length)for(;n.length>Be.length;)Be[Be.length]=256;let r=[],s=e==Ai?0:1;return Df(n,s,s,t,0,n.length,r),r}function jv(n){return[new qr(0,n,0)]}let Fv="";function lC(n,e,t,r,s){var l;let a=r.head-n.from,c=qr.find(e,a,(l=r.bidiLevel)!==null&&l!==void 0?l:-1,r.assoc),h=e[c],d=h.side(s,t);if(a==d){let v=c+=s?1:-1;if(v<0||v>=e.length)return null;h=e[c=v],a=h.side(!s,t),d=h.side(s,t)}let p=Lt(n.text,a,h.forward(s,t));(p<h.from||p>h.to)&&(p=d),Fv=n.text.slice(Math.min(a,p),Math.max(a,p));let m=c==(s?e.length-1:0)?null:e[c+(s?1:-1)];return m&&p==d&&m.level+(s?0:1)<h.level?Z.cursor(m.side(!s,t)+n.from,m.forward(s,t)?1:-1,m.level):Z.cursor(p+n.from,h.forward(s,t)?-1:1,h.level)}function aC(n,e,t){for(let r=e;r<t;r++){let s=Bv(n.charCodeAt(r));if(s==1)return Ai;if(s==2||s==4)return yd}return Ai}const _v=ye.define(),Vv=ye.define(),Hv=ye.define(),Wv=ye.define(),Rf=ye.define(),Qv=ye.define(),$v=ye.define(),vd=ye.define(),xd=ye.define(),Uv=ye.define({combine:n=>n.some(e=>e)}),Xv=ye.define({combine:n=>n.some(e=>e)}),Kv=ye.define();class cs{constructor(e,t="nearest",r="nearest",s=5,l=5,a=!1){this.range=e,this.y=t,this.x=r,this.yMargin=s,this.xMargin=l,this.isSnapshot=a}map(e){return e.empty?this:new cs(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new cs(Z.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ca=st.define({map:(n,e)=>n.map(e)}),qv=st.define();function Yn(n,e,t){let r=n.facet(Wv);r.length?r[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const pr=ye.define({combine:n=>n.length?n[0]:!0});let uC=0;const rs=ye.define({combine(n){return n.filter((e,t)=>{for(let r=0;r<t;r++)if(n[r].plugin==e.plugin)return!1;return!0})}});class Nn{constructor(e,t,r,s,l){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=s,this.baseExtensions=l(this),this.extension=this.baseExtensions.concat(rs.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(rs.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:r,eventObservers:s,provide:l,decorations:a}=t||{};return new Nn(uC++,e,r,s,c=>{let h=[];return a&&h.push(Qo.of(d=>{let p=d.plugin(c);return p?a(p):Ke.none})),l&&h.push(l(c)),h})}static fromClass(e,t){return Nn.define((r,s)=>new e(r,s),t)}}class Lh{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(Yn(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){Yn(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){Yn(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Yv=ye.define(),wd=ye.define(),Qo=ye.define(),Gv=ye.define(),rl=ye.define(),Zv=ye.define();function s0(n,e){let t=n.state.facet(Zv);if(!t.length)return t;let r=t.map(l=>l instanceof Function?l(n):l),s=[];return Ne.spans(r,e.from,e.to,{point(){},span(l,a,c,h){let d=l-e.from,p=a-e.from,m=s;for(let v=c.length-1;v>=0;v--,h--){let x=c[v].spec.bidiIsolate,k;if(x==null&&(x=aC(e.text,d,p)),h>0&&m.length&&(k=m[m.length-1]).to==d&&k.direction==x)k.to=p,m=k.inner;else{let S={from:d,to:p,direction:x,inner:[]};m.push(S),m=S.inner}}}}),s}const Jv=ye.define();function e1(n){let e=0,t=0,r=0,s=0;for(let l of n.state.facet(Jv)){let a=l(n);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(r=Math.max(r,a.top)),a.bottom!=null&&(s=Math.max(s,a.bottom)))}return{left:e,right:t,top:r,bottom:s}}const ko=ye.define();class pn{constructor(e,t,r,s){this.fromA=e,this.toA=t,this.fromB=r,this.toB=s}join(e){return new pn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>r.toA)){if(s.toA<r.fromA)break;r=r.join(s),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let s=0,l=0,a=0,c=0;;s++){let h=s==e.length?null:e[s],d=a-c,p=h?h.fromB:1e9;for(;l<t.length&&t[l]<p;){let m=t[l],v=t[l+1],x=Math.max(c,m),k=Math.min(p,v);if(x<=k&&new pn(x+d,k+d,x,k).addToSet(r),v>p)break;l+=2}if(!h)return r;new pn(h.fromA,h.toA,h.fromB,h.toB).addToSet(r),a=h.toA,c=h.toB}}}class cu{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=ct.empty(this.startState.doc.length);for(let l of r)this.changes=this.changes.compose(l.changes);let s=[];this.changes.iterChangedRanges((l,a,c,h)=>s.push(new pn(l,a,c,h))),this.changedRanges=s}static create(e,t,r){return new cu(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class o0 extends Ie{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Ke.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new et],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new pn(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:d,toA:p})=>p<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!mC(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let l=s>-1?hC(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:p}=this.hasComposition;r=new pn(d,p,e.changes.mapPos(d,-1),e.changes.mapPos(p,1)).addToSet(r.slice())}this.hasComposition=l?{from:l.range.fromB,to:l.range.toB}:null,(oe.ie||oe.chrome)&&!l&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,c=this.updateDeco(),h=pC(a,c,e.changes);return r=pn.extendWithRanges(r,h),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,l),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=oe.chrome||oe.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||s.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let l=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof yr&&a.widget instanceof Af&&l.push(a.dom);s.updateGaps(l)}updateChildren(e,t,r){let s=r?r.range.addToSet(e.slice()):e,l=this.childCursor(t);for(let a=s.length-1;;a--){let c=a>=0?s[a]:null;if(!c)break;let{fromA:h,toA:d,fromB:p,toB:m}=c,v,x,k,S;if(r&&r.range.fromB<m&&r.range.toB>p){let _=Ro.build(this.view.state.doc,p,r.range.fromB,this.decorations,this.dynamicDecorationMap),T=Ro.build(this.view.state.doc,r.range.toB,m,this.decorations,this.dynamicDecorationMap);x=_.breakAtStart,k=_.openStart,S=T.openEnd;let F=this.compositionView(r);T.breakAtStart?F.breakAfter=1:T.content.length&&F.merge(F.length,F.length,T.content[0],!1,T.openStart,0)&&(F.breakAfter=T.content[0].breakAfter,T.content.shift()),_.content.length&&F.merge(0,0,_.content[_.content.length-1],!0,0,_.openEnd)&&_.content.pop(),v=_.content.concat(F).concat(T.content)}else({content:v,breakAtStart:x,openStart:k,openEnd:S}=Ro.build(this.view.state.doc,p,m,this.decorations,this.dynamicDecorationMap));let{i:b,off:C}=l.findPos(d,1),{i:D,off:B}=l.findPos(h,-1);Ev(this,D,B,b,C,v,x,k,S)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(qv)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new Tn(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new vr(s,[t],t.length);let r=new et;return r.append(t,0),r}fixCompositionDOM(e){let t=(l,a)=>{a.flags|=8|(a.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(a);let c=Ie.get(l);c&&c!=a&&(c.dom=null),a.setDOM(l)},r=this.childPos(e.range.fromB,1),s=this.children[r.i];t(e.line,s);for(let l=e.marks.length-1;l>=-1;l--)r=s.childPos(r.off,1),s=s.children[r.i],t(l>=0?e.marks[l].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,s=r==this.dom,l=!s&&!(this.view.state.facet(pr)||this.dom.tabIndex>-1)&&Qa(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(s||t||l))return;let a=this.forceSelection;this.forceSelection=!1;let c=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(c.anchor)),d=c.empty?h:this.moveToLine(this.domAtPos(c.head));if(oe.gecko&&c.empty&&!this.hasComposition&&cC(h)){let m=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(m,h.node.childNodes[h.offset]||null)),h=d=new At(m,0),a=!0}let p=this.view.observer.selectionRange;(a||!p.focusNode||(!Do(h.node,h.offset,p.anchorNode,p.anchorOffset)||!Do(d.node,d.offset,p.focusNode,p.focusOffset))&&!this.suppressWidgetCursorChange(p,c))&&(this.view.observer.ignore(()=>{oe.android&&oe.chrome&&this.dom.contains(p.focusNode)&&gC(p.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let m=Ho(this.view.root);if(m)if(c.empty){if(oe.gecko){let v=fC(h.node,h.offset);if(v&&v!=3){let x=(v==1?Pv:Av)(h.node,h.offset);x&&(h=new At(x.node,x.offset))}}m.collapse(h.node,h.offset),c.bidiLevel!=null&&m.caretBidiLevel!==void 0&&(m.caretBidiLevel=c.bidiLevel)}else if(m.extend){m.collapse(h.node,h.offset);try{m.extend(d.node,d.offset)}catch{}}else{let v=document.createRange();c.anchor>c.head&&([h,d]=[d,h]),v.setEnd(d.node,d.offset),v.setStart(h.node,h.offset),m.removeAllRanges(),m.addRange(v)}l&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(h,d)),this.impreciseAnchor=h.precise?null:new At(p.anchorNode,p.anchorOffset),this.impreciseHead=d.precise?null:new At(p.focusNode,p.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Do(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=Ho(e.root),{anchorNode:s,anchorOffset:l}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let a=et.find(this,t.head);if(!a)return;let c=a.posAtStart;if(t.head==c||t.head==c+a.length)return;let h=this.coordsAt(t.head,-1),d=this.coordsAt(t.head,1);if(!h||!d||h.bottom>d.top)return;let p=this.domAtPos(t.head+t.assoc);r.collapse(p.node,p.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let m=e.observer.selectionRange;e.docView.posFromDOM(m.anchorNode,m.anchorOffset)!=t.from&&r.collapse(s,l)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let s=e.offset;!r&&s<t.childNodes.length;s++){let l=Ie.get(t.childNodes[s]);l instanceof et&&(r=l.domAtPos(0))}for(let s=e.offset-1;!r&&s>=0;s--){let l=Ie.get(t.childNodes[s]);l instanceof et&&(r=l.domAtPos(l.length))}return r?new At(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=Ie.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(r<s.length||s instanceof et)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,s=0;for(let l=this.length,a=this.children.length-1;a>=0;a--){let c=this.children[a],h=l-c.breakAfter,d=h-c.length;if(h<e)break;if(d<=e&&(d<e||c.covers(-1))&&(h>e||c.covers(1))&&(!r||c instanceof et&&!(r instanceof et&&t>=0)))r=c,s=d;else if(r&&d==e&&h==e&&c instanceof yr&&Math.abs(t)<2){if(c.deco.startSide<0)break;a&&(r=null)}l=d}return r?r.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),s=this.children[t];if(!(s instanceof et))return null;for(;s.children.length;){let{i:c,off:h}=s.childPos(r,1);for(;;c++){if(c==s.children.length)return null;if((s=s.children[c]).length)break}r=h}if(!(s instanceof Tn))return null;let l=Lt(s.text,r);if(l==r)return null;let a=Pi(s.dom,r,l).getClientRects();for(let c=0;c<a.length;c++){let h=a[c];if(c==a.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:s}=e,l=this.view.contentDOM.clientWidth,a=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,h=this.view.textDirection==Xe.LTR;for(let d=0,p=0;p<this.children.length;p++){let m=this.children[p],v=d+m.length;if(v>s)break;if(d>=r){let x=m.dom.getBoundingClientRect();if(t.push(x.height),a){let k=m.dom.lastChild,S=k?Wo(k):[];if(S.length){let b=S[S.length-1],C=h?b.right-x.left:x.right-b.left;C>c&&(c=C,this.minWidth=l,this.minWidthFrom=d,this.minWidthTo=v)}}}d=v+m.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Xe.RTL:Xe.LTR}measureTextSize(){for(let l of this.children)if(l instanceof et){let a=l.measureTextSize();if(a)return a}let e=document.createElement("div"),t,r,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let l=Wo(e.firstChild)[0];t=e.getBoundingClientRect().height,r=l?l.width/27:7,s=l?l.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Mv(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,s=0;;s++){let l=s==t.viewports.length?null:t.viewports[s],a=l?l.from-1:this.length;if(a>r){let c=(t.lineBlockAt(a).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(Ke.replace({widget:new Af(c),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!l)break;r=l.to+1}return Ke.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Qo).map(l=>(this.dynamicDecorationMap[e++]=typeof l=="function")?l(this.view):l),r=!1,s=this.view.state.facet(Gv).map((l,a)=>{let c=typeof l=="function";return c&&(r=!0),c?l(this.view):l});for(s.length&&(this.dynamicDecorationMap[e++]=r,t.push(Ne.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(Kv))try{if(d(this.view,e.range,e))return!0}catch(p){Yn(this.view.state,p,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!r)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,s.left),top:Math.min(r.top,s.top),right:Math.max(r.right,s.right),bottom:Math.max(r.bottom,s.bottom)});let l=e1(this.view),a={left:r.left-l.left,top:r.top-l.top,right:r.right+l.right,bottom:r.bottom+l.bottom},{offsetWidth:c,offsetHeight:h}=this.view.scrollDOM;WO(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,c),-c),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==Xe.LTR)}lineHasWidget(e){let{i:t}=this.childCursor().findPos(e);if(t==this.children.length)return!1;let r=s=>s instanceof Kr||s.children.some(r);return r(this.children[t])}}function cC(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function t1(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=Pv(t.focusNode,t.focusOffset),s=Av(t.focusNode,t.focusOffset),l=r||s;if(s&&r&&s.node!=r.node){let c=Ie.get(s.node);if(!c||c instanceof Tn&&c.text!=s.node.nodeValue)l=s;else if(n.docView.lastCompositionAfterCursor){let h=Ie.get(r.node);!h||h instanceof Tn&&h.text!=r.node.nodeValue||(l=s)}}if(n.docView.lastCompositionAfterCursor=l!=r,!l)return null;let a=e-l.offset;return{from:a,to:a+l.node.nodeValue.length,node:l.node}}function hC(n,e,t){let r=t1(n,t);if(!r)return null;let{node:s,from:l,to:a}=r,c=s.nodeValue;if(/[\n\r]/.test(c)||n.state.doc.sliceString(r.from,r.to)!=c)return null;let h=e.invertedDesc,d=new pn(h.mapPos(l),h.mapPos(a),l,a),p=[];for(let m=s.parentNode;;m=m.parentNode){let v=Ie.get(m);if(v instanceof vr)p.push({node:m,deco:v.mark});else{if(v instanceof et||m.nodeName=="DIV"&&m.parentNode==n.contentDOM)return{range:d,text:s,marks:p,line:m};if(m!=n.contentDOM)p.push({node:m,deco:new tl({inclusive:!0,attributes:ZO(m),tagName:m.tagName.toLowerCase()})});else return null}}}function fC(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let dC=class{constructor(){this.changes=[]}compareRange(e,t){$a(e,t,this.changes)}comparePoint(e,t){$a(e,t,this.changes)}boundChange(e){$a(e,e,this.changes)}};function pC(n,e,t){let r=new dC;return Ne.compare(n,e,t,r),r.changes}function gC(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function mC(n,e){let t=!1;return e&&n.iterChangedRanges((r,s)=>{r<e.to&&s>e.from&&(t=!0)}),t}function yC(n,e,t=1){let r=n.charCategorizer(e),s=n.doc.lineAt(e),l=e-s.from;if(s.length==0)return Z.cursor(e);l==0?t=1:l==s.length&&(t=-1);let a=l,c=l;t<0?a=Lt(s.text,l,!1):c=Lt(s.text,l);let h=r(s.text.slice(a,c));for(;a>0;){let d=Lt(s.text,a,!1);if(r(s.text.slice(d,a))!=h)break;a=d}for(;c<s.length;){let d=Lt(s.text,c);if(r(s.text.slice(c,d))!=h)break;c=d}return Z.range(a+s.from,c+s.from)}function vC(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function xC(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function Ih(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function l0(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function a0(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function Tf(n,e,t){let r,s,l,a,c=!1,h,d,p,m;for(let k=n.firstChild;k;k=k.nextSibling){let S=Wo(k);for(let b=0;b<S.length;b++){let C=S[b];s&&Ih(s,C)&&(C=l0(a0(C,s.bottom),s.top));let D=vC(e,C),B=xC(t,C);if(D==0&&B==0)return k.nodeType==3?u0(k,e,t):Tf(k,e,t);(!r||a>B||a==B&&l>D)&&(r=k,s=C,l=D,a=B,c=D?e<C.left?b>0:b<S.length-1:!0),D==0?t>C.bottom&&(!p||p.bottom<C.bottom)?(h=k,p=C):t<C.top&&(!m||m.top>C.top)&&(d=k,m=C):p&&Ih(p,C)?p=a0(p,C.bottom):m&&Ih(m,C)&&(m=l0(m,C.top))}}if(p&&p.bottom>=t?(r=h,s=p):m&&m.top<=t&&(r=d,s=m),!r)return{node:n,offset:0};let v=Math.max(s.left,Math.min(s.right,e));if(r.nodeType==3)return u0(r,v,t);if(c&&r.contentEditable!="false")return Tf(r,v,t);let x=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:x}}function u0(n,e,t){let r=n.nodeValue.length,s=-1,l=1e9,a=0;for(let c=0;c<r;c++){let h=Pi(n,c,c+1).getClientRects();for(let d=0;d<h.length;d++){let p=h[d];if(p.top==p.bottom)continue;a||(a=e-p.left);let m=(p.top>t?p.top-t:t-p.bottom)-1;if(p.left-1<=e&&p.right+1>=e&&m<l){let v=e>=(p.left+p.right)/2,x=v;if(oe.chrome||oe.gecko){let k=Pi(n,c).getBoundingClientRect();Math.abs(k.left-p.right)<.1&&(x=!v)}if(m<=0)return{node:n,offset:c+(x?1:0)};s=c+(x?1:0),l=m}}}return{node:n,offset:s>-1?s:a>0?n.nodeValue.length:0}}function n1(n,e,t,r=-1){var s,l;let a=n.contentDOM.getBoundingClientRect(),c=a.top+n.viewState.paddingTop,h,{docHeight:d}=n.viewState,{x:p,y:m}=e,v=m-c;if(v<0)return 0;if(v>d)return n.state.doc.length;for(let _=n.viewState.heightOracle.textHeight/2,T=!1;h=n.elementAtHeight(v),h.type!=It.Text;)for(;v=r>0?h.bottom+_:h.top-_,!(v>=0&&v<=d);){if(T)return t?null:0;T=!0,r=-r}m=c+v;let x=h.from;if(x<n.viewport.from)return n.viewport.from==0?0:t?null:c0(n,a,h,p,m);if(x>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:c0(n,a,h,p,m);let k=n.dom.ownerDocument,S=n.root.elementFromPoint?n.root:k,b=S.elementFromPoint(p,m);b&&!n.contentDOM.contains(b)&&(b=null),b||(p=Math.max(a.left+1,Math.min(a.right-1,p)),b=S.elementFromPoint(p,m),b&&!n.contentDOM.contains(b)&&(b=null));let C,D=-1;if(b&&((s=n.docView.nearest(b))===null||s===void 0?void 0:s.isEditable)!=!1){if(k.caretPositionFromPoint){let _=k.caretPositionFromPoint(p,m);_&&({offsetNode:C,offset:D}=_)}else if(k.caretRangeFromPoint){let _=k.caretRangeFromPoint(p,m);_&&({startContainer:C,startOffset:D}=_)}C&&(!n.contentDOM.contains(C)||oe.safari&&wC(C,D,p)||oe.chrome&&kC(C,D,p))&&(C=void 0),C&&(D=Math.min(Zn(C),D))}if(!C||!n.docView.dom.contains(C)){let _=et.find(n.docView,x);if(!_)return v>h.top+h.height/2?h.to:h.from;({node:C,offset:D}=Tf(_.dom,p,m))}let B=n.docView.nearest(C);if(!B)return null;if(B.isWidget&&((l=B.dom)===null||l===void 0?void 0:l.nodeType)==1){let _=B.dom.getBoundingClientRect();return e.y<_.top||e.y<=_.bottom&&e.x<=(_.left+_.right)/2?B.posAtStart:B.posAtEnd}else return B.localPosFromDOM(C,D)+B.posAtStart}function c0(n,e,t,r,s){let l=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let c=n.viewState.heightOracle.textHeight,h=Math.floor((s-t.top-(n.defaultLineHeight-c)*.5)/c);l+=h*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(t.from,t.to);return t.from+BO(a,l,n.state.tabSize)}function r1(n,e,t){let r,s=n;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(;;){let l=s.nextSibling;if(l){if(l.nodeName=="BR")break;return!1}else{let a=s.parentNode;if(!a||a.nodeName=="DIV")break;s=a}}return Pi(n,r-1,r).getBoundingClientRect().right>t}function wC(n,e,t){return r1(n,e,t)}function kC(n,e,t){if(e!=0)return r1(n,e,t);for(let s=n;;){let l=s.parentNode;if(!l||l.nodeType!=1||l.firstChild!=s)return!1;if(l.classList.contains("cm-line"))break;s=l}let r=n.nodeType==1?n.getBoundingClientRect():Pi(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function Nf(n,e,t){let r=n.lineBlockAt(e);if(Array.isArray(r.type)){let s;for(let l of r.type){if(l.from>e)break;if(!(l.to<e)){if(l.from<e&&l.to>e)return l;(!s||l.type==It.Text&&(s.type!=l.type||(t<0?l.from<e:l.to>e)))&&(s=l)}}return s||r}return r}function SC(n,e,t,r){let s=Nf(n,e.head,e.assoc||-1),l=!r||s.type!=It.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(l){let a=n.dom.getBoundingClientRect(),c=n.textDirectionAt(s.from),h=n.posAtCoords({x:t==(c==Xe.LTR)?a.right-1:a.left+1,y:(l.top+l.bottom)/2});if(h!=null)return Z.cursor(h,t?-1:1)}return Z.cursor(t?s.to:s.from,t?-1:1)}function h0(n,e,t,r){let s=n.state.doc.lineAt(e.head),l=n.bidiSpans(s),a=n.textDirectionAt(s.from);for(let c=e,h=null;;){let d=lC(s,l,a,c,t),p=Fv;if(!d){if(s.number==(t?n.state.doc.lines:1))return c;p=`
`,s=n.state.doc.line(s.number+(t?1:-1)),l=n.bidiSpans(s),d=n.visualLineSide(s,!t)}if(h){if(!h(p))return c}else{if(!r)return d;h=r(p)}c=d}}function bC(n,e,t){let r=n.state.charCategorizer(e),s=r(t);return l=>{let a=r(l);return s==gr.Space&&(s=a),s==a}}function OC(n,e,t,r){let s=e.head,l=t?1:-1;if(s==(t?n.state.doc.length:0))return Z.cursor(s,e.assoc);let a=e.goalColumn,c,h=n.contentDOM.getBoundingClientRect(),d=n.coordsAtPos(s,e.assoc||-1),p=n.documentTop;if(d)a==null&&(a=d.left-h.left),c=l<0?d.top:d.bottom;else{let x=n.viewState.lineBlockAt(s);a==null&&(a=Math.min(h.right-h.left,n.defaultCharacterWidth*(s-x.from))),c=(l<0?x.top:x.bottom)+p}let m=h.left+a,v=r??n.viewState.heightOracle.textHeight>>1;for(let x=0;;x+=10){let k=c+(v+x)*l,S=n1(n,{x:m,y:k},!1,l);if(k<h.top||k>h.bottom||(l<0?S<s:S>s)){let b=n.docView.coordsForChar(S),C=!b||k<b.top?-1:1;return Z.cursor(S,C,void 0,a)}}}function To(n,e,t){for(;;){let r=0;for(let s of n)s.between(e-1,e+1,(l,a,c)=>{if(e>l&&e<a){let h=r||t||(e-l<a-e?-1:1);e=h<0?l:a,r=h}});if(!r)return e}}function i1(n,e){let t=null;for(let r=0;r<e.ranges.length;r++){let s=e.ranges[r],l=null;if(s.empty){let a=To(n,s.from,0);a!=s.from&&(l=Z.cursor(a,-1))}else{let a=To(n,s.from,-1),c=To(n,s.to,1);(a!=s.from||c!=s.to)&&(l=Z.range(s.from==s.anchor?a:c,s.from==s.head?a:c))}l&&(t||(t=e.ranges.slice()),t[r]=l)}return t?Z.create(t,e.mainIndex):e}function Bh(n,e,t){let r=To(n.state.facet(rl).map(s=>s(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:Z.cursor(r,r<t.from?1:-1)}const So="";class CC{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Te.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=So}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let s=e;;){this.findPointBefore(r,s);let l=this.text.length;this.readNode(s);let a=s.nextSibling;if(a==t)break;let c=Ie.get(s),h=Ie.get(a);(c&&h?c.breakAfter:(c?c.breakAfter:au(s))||au(a)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>l)&&!AC(a,t)&&this.lineBreak(),s=a}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,a=1,c;if(this.lineSeparator?(l=t.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(c=s.exec(t))&&(l=c.index,a=c[0].length),this.append(t.slice(r,l<0?t.length:l)),l<0)break;if(this.lineBreak(),a>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=a-1);r=l+a}}readNode(e){if(e.cmIgnore)return;let t=Ie.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let s=r.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(PC(e,r.node,r.offset)?t:0))}}function PC(n,e,t){for(;;){if(!e||t<Zn(e))return!1;if(e==n)return!0;t=Ci(e)+1,e=e.parentNode}}function AC(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let r=Ie.get(n);if(!(r!=null&&r.isWidget||n.cmIgnore))return!1;r&&(t||(t=[])).push(r)}if(t)for(let r of t){let s=r.overrideDOMText;if(s!=null&&s.length)return!1}return!0}class f0{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class MC{constructor(e,t,r,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:l,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let c=l||a?[]:DC(e),h=new CC(c,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=RC(c,this.bounds.from)}else{let c=e.observer.selectionRange,h=l&&l.node==c.focusNode&&l.offset==c.focusOffset||!Of(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),d=a&&a.node==c.anchorNode&&a.offset==c.anchorOffset||!Of(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset),p=e.viewport;if((oe.ios||oe.chrome)&&e.state.selection.main.empty&&h!=d&&(p.from>0||p.to<e.state.doc.length)){let m=Math.min(h,d),v=Math.max(h,d),x=p.from-m,k=p.to-v;(x==0||x==1||m==0)&&(k==0||k==-1||v==e.state.doc.length)&&(h=0,d=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(Z.range(d,h)):this.newSel=Z.single(d,h)}}}function s1(n,e){let t,{newSel:r}=e,s=n.state.selection.main,l=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:c}=e.bounds,h=s.from,d=null;(l===8||oe.android&&e.text.length<c-a)&&(h=s.to,d="end");let p=o1(n.state.doc.sliceString(a,c,So),e.text,h-a,d);p&&(oe.chrome&&l==13&&p.toB==p.from+2&&e.text.slice(p.from,p.toB)==So+So&&p.toB--,t={from:a+p.from,to:a+p.toA,insert:Ee.of(e.text.slice(p.from,p.toB).split(So))})}else r&&(!n.hasFocus&&n.state.facet(pr)||r.main.eq(s))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!s.empty&&r&&r.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:(oe.mac||oe.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=Z.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:Ee.of([t.insert.toString().replace("."," ")])}):t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:n.state.doc.lineAt(s.from).to<s.to&&n.docView.lineHasWidget(s.to)&&n.inputState.insertingTextAt>Date.now()-50?t={from:s.from,to:s.to,insert:n.state.toText(n.inputState.insertingText)}:oe.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=Z.single(r.main.anchor-1,r.main.head-1)),t={from:s.from,to:s.to,insert:Ee.of([" "])}),t)return kd(n,t,r,l);if(r&&!r.main.eq(s)){let a=!1,c="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),c=n.inputState.lastSelectionOrigin,c=="select.pointer"&&(r=i1(n.state.facet(rl).map(h=>h(n)),r))),n.dispatch({selection:r,scrollIntoView:a,userEvent:c}),!0}else return!1}function kd(n,e,t,r=-1){if(oe.ios&&n.inputState.flushIOSKey(e))return!0;let s=n.state.selection.main;if(oe.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&n.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&us(n.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&us(n.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&us(n.contentDOM,"Delete",46)))return!0;let l=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let a,c=()=>a||(a=EC(n,e,t));return n.state.facet(Qv).some(h=>h(n,e.from,e.to,l,c))||n.dispatch(c()),!0}function EC(n,e,t){let r,s=n.state,l=s.selection.main,a=-1;if(e.from==e.to&&e.from<l.from||e.from>l.to){let h=e.from<l.from?-1:1,d=h<0?l.from:l.to,p=To(s.facet(rl).map(m=>m(n)),d,h);e.from==p&&(a=p)}if(a>-1)r={changes:e,selection:Z.cursor(e.from+e.insert.length,-1)};else if(e.from>=l.from&&e.to<=l.to&&e.to-e.from>=(l.to-l.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let h=l.from<e.from?s.sliceDoc(l.from,e.from):"",d=l.to>e.to?s.sliceDoc(e.to,l.to):"";r=s.replaceSelection(n.state.toText(h+e.insert.sliceString(0,void 0,n.state.lineBreak)+d))}else{let h=s.changes(e),d=t&&t.main.to<=h.newLength?t.main:void 0;if(s.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&e.to<=l.to+10&&e.to>=l.to-10){let p=n.state.sliceDoc(e.from,e.to),m,v=t&&t1(n,t.main.head);if(v){let k=e.insert.length-(e.to-e.from);m={from:v.from,to:v.to-k}}else m=n.state.doc.lineAt(l.head);let x=l.to-e.to;r=s.changeByRange(k=>{if(k.from==l.from&&k.to==l.to)return{changes:h,range:d||k.map(h)};let S=k.to-x,b=S-p.length;if(n.state.sliceDoc(b,S)!=p||S>=m.from&&b<=m.to)return{range:k};let C=s.changes({from:b,to:S,insert:e.insert}),D=k.to-l.to;return{changes:C,range:d?Z.range(Math.max(0,d.anchor+D),Math.max(0,d.head+D)):k.map(C)}})}else r={changes:h,selection:d&&s.selection.replaceRange(d)}}let c="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,c+=".compose",n.inputState.compositionFirstChange&&(c+=".start",n.inputState.compositionFirstChange=!1)),s.update(r,{userEvent:c,scrollIntoView:!0})}function o1(n,e,t,r){let s=Math.min(n.length,e.length),l=0;for(;l<s&&n.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==s&&n.length==e.length)return null;let a=n.length,c=e.length;for(;a>0&&c>0&&n.charCodeAt(a-1)==e.charCodeAt(c-1);)a--,c--;if(r=="end"){let h=Math.max(0,l-Math.min(a,c));t-=a+h-l}if(a<l&&n.length<e.length){let h=t<=l&&t>=a?l-t:0;l-=h,c=l+(c-a),a=l}else if(c<l){let h=t<=l&&t>=c?l-t:0;l-=h,a=l+(a-c),c=l}return{from:l,toA:a,toB:c}}function DC(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:l}=n.observer.selectionRange;return t&&(e.push(new f0(t,r)),(s!=t||l!=r)&&e.push(new f0(s,l))),e}function RC(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?Z.single(t+e,r+e):null}class TC{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,oe.safari&&e.contentDOM.addEventListener("input",()=>null),oe.gecko&&KC(e.contentDOM.ownerDocument)}handleEvent(e){!_C(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let s of r.observers)s(this.view,t);for(let s of r.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=NC(e),r=this.handlers,s=this.view.contentDOM;for(let l in t)if(l!="scroll"){let a=!t[l].handlers.length,c=r[l];c&&a!=!c.handlers.length&&(s.removeEventListener(l,this.handleEvent),c=null),c||s.addEventListener(l,this.handleEvent,{passive:a})}for(let l in r)l!="scroll"&&!t[l]&&s.removeEventListener(l,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&a1.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),oe.android&&oe.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return oe.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=l1.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||LC.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,us(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:oe.safari&&!oe.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function d0(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(s){Yn(t.state,s)}}}function NC(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let s=r.spec,l=s&&s.plugin.domEventHandlers,a=s&&s.plugin.domEventObservers;if(l)for(let c in l){let h=l[c];h&&t(c).handlers.push(d0(r.value,h))}if(a)for(let c in a){let h=a[c];h&&t(c).observers.push(d0(r.value,h))}}for(let r in Ln)t(r).handlers.push(Ln[r]);for(let r in mn)t(r).observers.push(mn[r]);return e}const l1=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],LC="dthko",a1=[16,17,18,20,91,92,224,225],Pa=6;function Aa(n){return Math.max(0,n)*.7+8}function IC(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class BC{constructor(e,t,r,s){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=QO(e.contentDOM),this.atoms=e.state.facet(rl).map(a=>a(e));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Te.allowMultipleSelections)&&zC(e,t),this.dragging=FC(e,t)&&h1(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&IC(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,s=0,l=0,a=this.view.win.innerWidth,c=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:l,bottom:c}=this.scrollParents.y.getBoundingClientRect());let h=e1(this.view);e.clientX-h.left<=s+Pa?t=-Aa(s-e.clientX):e.clientX+h.right>=a-Pa&&(t=Aa(e.clientX-a)),e.clientY-h.top<=l+Pa?r=-Aa(l-e.clientY):e.clientY+h.bottom>=c-Pa&&(r=Aa(e.clientY-c)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,r=i1(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function zC(n,e){let t=n.state.facet(_v);return t.length?t[0](e):oe.mac?e.metaKey:e.ctrlKey}function jC(n,e){let t=n.state.facet(Vv);return t.length?t[0](e):oe.mac?!e.altKey:!e.ctrlKey}function FC(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=Ho(n.root);if(!r||r.rangeCount==0)return!0;let s=r.getRangeAt(0).getClientRects();for(let l=0;l<s.length;l++){let a=s[l];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function _C(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=Ie.get(t))&&r.ignoreEvent(e))return!1;return!0}const Ln=Object.create(null),mn=Object.create(null),u1=oe.ie&&oe.ie_version<15||oe.ios&&oe.webkit_version<604;function VC(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),c1(n,t.value)},50)}function Ru(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function c1(n,e){e=Ru(n.state,vd,e);let{state:t}=n,r,s=1,l=t.toText(e),a=l.lines==t.selection.ranges.length;if(Lf!=null&&t.selection.ranges.every(h=>h.empty)&&Lf==l.toString()){let h=-1;r=t.changeByRange(d=>{let p=t.doc.lineAt(d.from);if(p.from==h)return{range:d};h=p.from;let m=t.toText((a?l.line(s++).text:e)+t.lineBreak);return{changes:{from:p.from,insert:m},range:Z.cursor(d.from+m.length)}})}else a?r=t.changeByRange(h=>{let d=l.line(s++);return{changes:{from:h.from,to:h.to,insert:d.text},range:Z.cursor(h.from+d.length)}}):r=t.replaceSelection(l);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}mn.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Ln.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);mn.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};mn.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Ln.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(Hv))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=QC(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new BC(n,e,t,r)),r&&n.observer.ignore(()=>{bv(n.contentDOM);let l=n.root.activeElement;l&&!l.contains(n.contentDOM)&&l.blur()});let s=n.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function p0(n,e,t,r){if(r==1)return Z.cursor(e,t);if(r==2)return yC(n.state,e,t);{let s=et.find(n.docView,e),l=n.state.doc.lineAt(s?s.posAtEnd:e),a=s?s.posAtStart:l.from,c=s?s.posAtEnd:l.to;return c<n.state.doc.length&&c==l.to&&c++,Z.range(a,c)}}let g0=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function HC(n,e,t,r){let s=et.find(n.docView,e);if(!s)return 1;let l=e-s.posAtStart;if(l==0)return 1;if(l==s.length)return-1;let a=s.coordsAt(l,-1);if(a&&g0(t,r,a))return-1;let c=s.coordsAt(l,1);return c&&g0(t,r,c)?1:a&&a.bottom>=r?-1:1}function m0(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:HC(n,t,e.clientX,e.clientY)}}const WC=oe.ie&&oe.ie_version<=11;let y0=null,v0=0,x0=0;function h1(n){if(!WC)return n.detail;let e=y0,t=x0;return y0=n,x0=Date.now(),v0=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(v0+1)%3:1}function QC(n,e){let t=m0(n,e),r=h1(e),s=n.state.selection;return{update(l){l.docChanged&&(t.pos=l.changes.mapPos(t.pos),s=s.map(l.changes))},get(l,a,c){let h=m0(n,l),d,p=p0(n,h.pos,h.bias,r);if(t.pos!=h.pos&&!a){let m=p0(n,t.pos,t.bias,r),v=Math.min(m.from,p.from),x=Math.max(m.to,p.to);p=v<p.from?Z.range(v,x):Z.range(x,v)}return a?s.replaceRange(s.main.extend(p.from,p.to)):c&&r==1&&s.ranges.length>1&&(d=$C(s,h.pos))?d:c?s.addRange(p):Z.create([p])}}}function $C(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:s}=n.ranges[t];if(r<=e&&s>=e)return Z.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Ln.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let s=n.docView.nearest(e.target);if(s&&s.isWidget){let l=s.posAtStart,a=l+s.length;(l>=t.to||a<=t.from)&&(t=Z.range(l,a))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Ru(n.state,xd,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Ln.dragend=n=>(n.inputState.draggedContent=null,!1);function w0(n,e,t,r){if(t=Ru(n.state,vd,t),!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:l}=n.inputState,a=r&&l&&jC(n,e)?{from:l.from,to:l.to}:null,c={from:s,insert:t},h=n.state.changes(a?[a,c]:c);n.focus(),n.dispatch({changes:h,selection:{anchor:h.mapPos(s,-1),head:h.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Ln.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),s=0,l=()=>{++s==t.length&&w0(n,e,r.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let c=new FileReader;c.onerror=l,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(r[a]=c.result),l()},c.readAsText(t[a])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return w0(n,e,r,!0),!0}return!1};Ln.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=u1?null:e.clipboardData;return t?(c1(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(VC(n),!1)};function UC(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function XC(n){let e=[],t=[],r=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:l}of n.selection.ranges){let a=n.doc.lineAt(l);a.number>s&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),s=a.number}r=!0}return{text:Ru(n,xd,e.join(n.lineBreak)),ranges:t,linewise:r}}let Lf=null;Ln.copy=Ln.cut=(n,e)=>{let{text:t,ranges:r,linewise:s}=XC(n.state);if(!t&&!s)return!1;Lf=s?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let l=u1?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",t),!0):(UC(n,t),!1)};const f1=bs.define();function d1(n,e){let t=[];for(let r of n.facet($v)){let s=r(n,e);s&&t.push(s)}return t.length?n.update({effects:t,annotations:f1.of(!0)}):null}function p1(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=d1(n.state,e);t?n.dispatch(t):n.update([])}},10)}mn.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),p1(n)};mn.blur=n=>{n.observer.clearSelectionRange(),p1(n)};mn.compositionstart=mn.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};mn.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,oe.chrome&&oe.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};mn.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Ln.beforeinput=(n,e)=>{var t,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let l=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),a=e.getTargetRanges();if(l&&a.length){let c=a[0],h=n.posAtDOM(c.startContainer,c.startOffset),d=n.posAtDOM(c.endContainer,c.endOffset);return kd(n,{from:h,to:d,insert:n.state.toText(l)},null),!0}}let s;if(oe.chrome&&oe.android&&(s=l1.find(l=>l.inputType==e.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let l=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>l+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return oe.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),oe.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>mn.compositionend(n,e),20),!1};const k0=new Set;function KC(n){k0.has(n)||(k0.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const S0=["pre-wrap","normal","pre-line","break-spaces"];let ms=!1;function b0(){ms=!1}class qC{constructor(e){this.lineWrapping=e,this.doc=Ee.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return S0.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let s=e[r];s<0?r++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,r,s,l,a){let c=S0.indexOf(e)>-1,h=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=c;if(this.lineWrapping=c,this.lineHeight=t,this.charWidth=r,this.textHeight=s,this.lineLength=l,h){this.heightSamples={};for(let d=0;d<a.length;d++){let p=a[d];p<0?d++:this.heightSamples[Math.floor(p*10)]=!0}}return h}}class YC{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class qn{constructor(e,t,r,s,l){this.from=e,this.length=t,this.top=r,this.height=s,this._content=l}get type(){return typeof this._content=="number"?It.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ei?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new qn(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var _e=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(_e||(_e={}));const Ua=.001;class Bt{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ua&&(ms=!0),this.height=e)}replace(e,t,r){return Bt.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,s){let l=this,a=r.doc;for(let c=s.length-1;c>=0;c--){let{fromA:h,toA:d,fromB:p,toB:m}=s[c],v=l.lineAt(h,_e.ByPosNoHeight,r.setDoc(t),0,0),x=v.to>=d?v:l.lineAt(d,_e.ByPosNoHeight,r,0,0);for(m+=x.to-d,d=x.to;c>0&&v.from<=s[c-1].toA;)h=s[c-1].fromA,p=s[c-1].fromB,c--,h<v.from&&(v=l.lineAt(h,_e.ByPosNoHeight,r,0,0));p+=v.from-h,h=v.from;let k=Sd.build(r.setDoc(a),e,p,m);l=hu(l,l.replace(h,d,k))}return l.updateHeight(r,0)}static empty(){return new nn(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,s=0,l=0;for(;;)if(t==r)if(s>l*2){let c=e[t-1];c.break?e.splice(--t,1,c.left,null,c.right):e.splice(--t,1,c.left,c.right),r+=1+c.break,s-=c.size}else if(l>s*2){let c=e[r];c.break?e.splice(r,1,c.left,null,c.right):e.splice(r,1,c.left,c.right),r+=2+c.break,l-=c.size}else break;else if(s<l){let c=e[t++];c&&(s+=c.size)}else{let c=e[--r];c&&(l+=c.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,r++),new GC(Bt.of(e.slice(0,t)),a,Bt.of(e.slice(r)))}}function hu(n,e){return n==e?n:(n.constructor!=e.constructor&&(ms=!0),e)}Bt.prototype.size=1;class g1 extends Bt{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,s){return new qn(s,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,s,l){return this.blockAt(0,r,s,l)}forEachLine(e,t,r,s,l,a){e<=l+this.length&&t>=l&&a(this.blockAt(0,r,s,l))}updateHeight(e,t=0,r=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class nn extends g1{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,s){return new qn(s,this.length,r,this.height,this.breaks)}replace(e,t,r){let s=r[0];return r.length==1&&(s instanceof nn||s instanceof gt&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof gt?s=new nn(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):Bt.of(r)}updateHeight(e,t=0,r=!1,s){return s&&s.from<=t&&s.more?this.setHeight(s.heights[s.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class gt extends Bt{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,l=s-r+1,a,c=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*l);a=h/l,this.length>l+1&&(c=(this.height-h)/(this.length-l-1))}else a=this.height/l;return{firstLine:r,lastLine:s,perLine:a,perChar:c}}blockAt(e,t,r,s){let{firstLine:l,lastLine:a,perLine:c,perChar:h}=this.heightMetrics(t,s);if(t.lineWrapping){let d=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),p=t.doc.lineAt(d),m=c+p.length*h,v=Math.max(r,e-m/2);return new qn(p.from,p.length,v,m,0)}else{let d=Math.max(0,Math.min(a-l,Math.floor((e-r)/c))),{from:p,length:m}=t.doc.line(l+d);return new qn(p,m,r+c*d,c,0)}}lineAt(e,t,r,s,l){if(t==_e.ByHeight)return this.blockAt(e,r,s,l);if(t==_e.ByPosNoHeight){let{from:x,to:k}=r.doc.lineAt(e);return new qn(x,k-x,0,0,0)}let{firstLine:a,perLine:c,perChar:h}=this.heightMetrics(r,l),d=r.doc.lineAt(e),p=c+d.length*h,m=d.number-a,v=s+c*m+h*(d.from-l-m);return new qn(d.from,d.length,Math.max(s,Math.min(v,s+this.height-p)),p,0)}forEachLine(e,t,r,s,l,a){e=Math.max(e,l),t=Math.min(t,l+this.length);let{firstLine:c,perLine:h,perChar:d}=this.heightMetrics(r,l);for(let p=e,m=s;p<=t;){let v=r.doc.lineAt(p);if(p==e){let k=v.number-c;m+=h*k+d*(e-l-k)}let x=h+d*v.length;a(new qn(v.from,v.length,m,x,0)),m+=x,p=v.to+1}}replace(e,t,r){let s=this.length-t;if(s>0){let l=r[r.length-1];l instanceof gt?r[r.length-1]=new gt(l.length+s):r.push(null,new gt(s-1))}if(e>0){let l=r[0];l instanceof gt?r[0]=new gt(e+l.length):r.unshift(new gt(e-1),null)}return Bt.of(r)}decomposeLeft(e,t){t.push(new gt(e-1),null)}decomposeRight(e,t){t.push(null,new gt(this.length-e-1))}updateHeight(e,t=0,r=!1,s){let l=t+this.length;if(s&&s.from<=t+this.length&&s.more){let a=[],c=Math.max(t,s.from),h=-1;for(s.from>t&&a.push(new gt(s.from-t-1).updateHeight(e,t));c<=l&&s.more;){let p=e.doc.lineAt(c).length;a.length&&a.push(null);let m=s.heights[s.index++];h==-1?h=m:Math.abs(m-h)>=Ua&&(h=-2);let v=new nn(p,m);v.outdated=!1,a.push(v),c+=p+1}c<=l&&a.push(null,new gt(l-c).updateHeight(e,c));let d=Bt.of(a);return(h<0||Math.abs(d.height-this.height)>=Ua||Math.abs(h-this.heightMetrics(e,t).perLine)>=Ua)&&(ms=!0),hu(this,d)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class GC extends Bt{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,s){let l=r+this.left.height;return e<l?this.left.blockAt(e,t,r,s):this.right.blockAt(e,t,l,s+this.left.length+this.break)}lineAt(e,t,r,s,l){let a=s+this.left.height,c=l+this.left.length+this.break,h=t==_e.ByHeight?e<a:e<c,d=h?this.left.lineAt(e,t,r,s,l):this.right.lineAt(e,t,r,a,c);if(this.break||(h?d.to<c:d.from>c))return d;let p=t==_e.ByPosNoHeight?_e.ByPosNoHeight:_e.ByPos;return h?d.join(this.right.lineAt(c,p,r,a,c)):this.left.lineAt(c,p,r,s,l).join(d)}forEachLine(e,t,r,s,l,a){let c=s+this.left.height,h=l+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,t,r,s,l,a),t>=h&&this.right.forEachLine(e,t,r,c,h,a);else{let d=this.lineAt(h,_e.ByPos,r,s,l);e<d.from&&this.left.forEachLine(e,d.from-1,r,s,l,a),d.to>=e&&d.from<=t&&a(d),t>d.to&&this.right.forEachLine(d.to+1,t,r,c,h,a)}}replace(e,t,r){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,r));let l=[];e>0&&this.decomposeLeft(e,l);let a=l.length;for(let c of r)l.push(c);if(e>0&&O0(l,a-1),t<this.length){let c=l.length;this.decomposeRight(t,l),O0(l,c)}return Bt.of(l)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,s=r+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Bt.of(this.break?[e,null,t]:[e,t]):(this.left=hu(this.left,e),this.right=hu(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,s){let{left:l,right:a}=this,c=t+l.length+this.break,h=null;return s&&s.from<=t+l.length&&s.more?h=l=l.updateHeight(e,t,r,s):l.updateHeight(e,t,r),s&&s.from<=c+a.length&&s.more?h=a=a.updateHeight(e,c,r,s):a.updateHeight(e,c,r),h?this.balanced(l,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function O0(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof gt&&(r=n[e+1])instanceof gt&&n.splice(e-1,3,new gt(t.length+1+r.length))}const ZC=5;class Sd{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof nn?s.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new nn(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let s=r.widget?r.widget.estimatedHeight:0,l=r.widget?r.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let a=t-e;r.block?this.addBlock(new g1(a,s,r)):(a||l||s>=ZC)&&this.addLineDeco(s,l,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new nn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new gt(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof nn)return e;let t=new nn(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let s=this.ensureLine();s.length+=r,s.collapsed+=r,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof nn)&&!this.isCovered?this.nodes.push(new nn(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let s of this.nodes)s instanceof nn&&s.updateHeight(this.oracle,r),r+=s?s.length:1;return this.nodes}static build(e,t,r,s){let l=new Sd(r,e);return Ne.spans(t,r,s,l,0),l.finish(r)}}function JC(n,e,t){let r=new e2;return Ne.compare(n,e,t,r,0),r.changes}class e2{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,s){(e<t||r&&r.heightRelevant||s&&s.heightRelevant)&&$a(e,t,this.changes,5)}}function t2(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,s=r.defaultView||window,l=Math.max(0,t.left),a=Math.min(s.innerWidth,t.right),c=Math.max(0,t.top),h=Math.min(s.innerHeight,t.bottom);for(let d=n.parentNode;d&&d!=r.body;)if(d.nodeType==1){let p=d,m=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&m.overflow!="visible"){let v=p.getBoundingClientRect();l=Math.max(l,v.left),a=Math.min(a,v.right),c=Math.max(c,v.top),h=Math.min(d==n.parentNode?s.innerHeight:h,v.bottom)}d=m.position=="absolute"||m.position=="fixed"?p.offsetParent:p.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:l-t.left,right:Math.max(l,a)-t.left,top:c-(t.top+e),bottom:Math.max(c,h)-(t.top+e)}}function n2(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function r2(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class zh{constructor(e,t,r,s){this.from=e,this.to=t,this.size=r,this.displaySize=s}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let s=e[r],l=t[r];if(s.from!=l.from||s.to!=l.to||s.size!=l.size)return!1}return!0}draw(e,t){return Ke.replace({widget:new i2(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class i2 extends el{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class C0{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=P0,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Xe.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(wd).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new qC(t),this.stateDeco=e.facet(Qo).filter(r=>typeof r!="function"),this.heightMap=Bt.empty().applyChanges(this.stateDeco,Ee.empty,this.heightOracle.setDoc(e.doc),[new pn(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Ke.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let s=r?t.head:t.anchor;if(!e.some(({from:l,to:a})=>s>=l&&s<=a)){let{from:l,to:a}=this.lineBlockAt(s);e.push(new Ma(l,a))}}return this.viewports=e.sort((r,s)=>r.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?P0:new bd(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(bo(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Qo).filter(p=>typeof p!="function");let s=e.changedRanges,l=pn.extendWithRanges(s,JC(r,this.stateDeco,e?e.changes:ct.empty(this.state.doc.length))),a=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);b0(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),(this.heightMap.height!=a||ms)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let h=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<h.from||t.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t));let d=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Xv)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),s=this.heightOracle,l=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Xe.RTL:Xe.LTR;let a=this.heightOracle.mustRefreshForWrapping(l),c=t.getBoundingClientRect(),h=a||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let d=0,p=0;if(c.width&&c.height){let{scaleX:_,scaleY:T}=Sv(t,c);(_>.005&&Math.abs(this.scaleX-_)>.005||T>.005&&Math.abs(this.scaleY-T)>.005)&&(this.scaleX=_,this.scaleY=T,d|=16,a=h=!0)}let m=(parseInt(r.paddingTop)||0)*this.scaleY,v=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=m||this.paddingBottom!=v)&&(this.paddingTop=m,this.paddingBottom=v,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let x=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=x&&(this.scrollAnchorHeight=-1,this.scrollTop=x),this.scrolledToBottom=Cv(e.scrollDOM);let k=(this.printing?r2:t2)(t,this.paddingTop),S=k.top-this.pixelViewport.top,b=k.bottom-this.pixelViewport.bottom;this.pixelViewport=k;let C=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(C!=this.inView&&(this.inView=C,C&&(h=!0)),!this.inView&&!this.scrollTarget&&!n2(e.dom))return 0;let D=c.width;if((this.contentDOMWidth!=D||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),h){let _=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(_)&&(a=!0),a||s.lineWrapping&&Math.abs(D-this.contentDOMWidth)>s.charWidth){let{lineHeight:T,charWidth:F,textHeight:z}=e.docView.measureTextSize();a=T>0&&s.refresh(l,T,F,z,Math.max(5,D/F),_),a&&(e.docView.minWidth=0,d|=16)}S>0&&b>0?p=Math.max(S,b):S<0&&b<0&&(p=Math.min(S,b)),b0();for(let T of this.viewports){let F=T.from==this.viewport.from?_:e.docView.measureVisibleLineHeights(T);this.heightMap=(a?Bt.empty().applyChanges(this.stateDeco,Ee.empty,this.heightOracle,[new pn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,a,new YC(T.from,F))}ms&&(d|=2)}let B=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return B&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),d|=this.updateForViewport()),(d&2||B)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,l=this.heightOracle,{visibleTop:a,visibleBottom:c}=this,h=new Ma(s.lineAt(a-r*1e3,_e.ByHeight,l,0,0).from,s.lineAt(c+(1-r)*1e3,_e.ByHeight,l,0,0).to);if(t){let{head:d}=t.range;if(d<h.from||d>h.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),m=s.lineAt(d,_e.ByPos,l,0,0),v;t.y=="center"?v=(m.top+m.bottom)/2-p/2:t.y=="start"||t.y=="nearest"&&d<h.from?v=m.top:v=m.bottom-p,h=new Ma(s.lineAt(v-1e3/2,_e.ByHeight,l,0,0).from,s.lineAt(v+p+1e3/2,_e.ByHeight,l,0,0).to)}}return h}mapViewport(e,t){let r=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new Ma(this.heightMap.lineAt(r,_e.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,_e.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,_e.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(t,_e.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:c}=this;return(e==0||s<=a-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||l>=c+Math.max(10,Math.min(r,250)))&&s>a-2*1e3&&l<c+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let s of e)t.touchesRange(s.from,s.to)||r.push(new zh(t.mapPos(s.from),t.mapPos(s.to),s.size,s.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,s=r?1e4:2e3,l=s>>1,a=s<<1;if(this.defaultTextDirection!=Xe.LTR&&!r)return[];let c=[],h=(p,m,v,x)=>{if(m-p<l)return;let k=this.state.selection.main,S=[k.from];k.empty||S.push(k.to);for(let C of S)if(C>p&&C<m){h(p,C-10,v,x),h(C+10,m,v,x);return}let b=o2(e,C=>C.from>=v.from&&C.to<=v.to&&Math.abs(C.from-p)<l&&Math.abs(C.to-m)<l&&!S.some(D=>C.from<D&&C.to>D));if(!b){if(m<v.to&&t&&r&&t.visibleRanges.some(B=>B.from<=m&&B.to>=m)){let B=t.moveToLineBoundary(Z.cursor(m),!1,!0).head;B>p&&(m=B)}let C=this.gapSize(v,p,m,x),D=r||C<2e6?C:2e6;b=new zh(p,m,C,D)}c.push(b)},d=p=>{if(p.length<a||p.type!=It.Text)return;let m=s2(p.from,p.to,this.stateDeco);if(m.total<a)return;let v=this.scrollTarget?this.scrollTarget.range.head:null,x,k;if(r){let S=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,b,C;if(v!=null){let D=Da(m,v),B=((this.visibleBottom-this.visibleTop)/2+S)/p.height;b=D-B,C=D+B}else b=(this.visibleTop-p.top-S)/p.height,C=(this.visibleBottom-p.top+S)/p.height;x=Ea(m,b),k=Ea(m,C)}else{let S=m.total*this.heightOracle.charWidth,b=s*this.heightOracle.charWidth,C=0;if(S>2e6)for(let F of e)F.from>=p.from&&F.from<p.to&&F.size!=F.displaySize&&F.from*this.heightOracle.charWidth+C<this.pixelViewport.left&&(C=F.size-F.displaySize);let D=this.pixelViewport.left+C,B=this.pixelViewport.right+C,_,T;if(v!=null){let F=Da(m,v),z=((B-D)/2+b)/S;_=F-z,T=F+z}else _=(D-b)/S,T=(B+b)/S;x=Ea(m,_),k=Ea(m,T)}x>p.from&&h(p.from,x,p,m),k<p.to&&h(k,p.to,p,m)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(d):d(p);return c}gapSize(e,t,r,s){let l=Da(s,r)-Da(s,t);return this.heightOracle.lineWrapping?e.height*l:s.total*this.heightOracle.charWidth*l}updateLineGaps(e){zh.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Ke.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];Ne.spans(t,this.viewport.from,this.viewport.to,{span(l,a){r.push({from:l,to:a})},point(){}},20);let s=0;if(r.length!=this.visibleRanges.length)s=12;else for(let l=0;l<r.length&&!(s&8);l++){let a=this.visibleRanges[l],c=r[l];(a.from!=c.from||a.to!=c.to)&&(s|=4,e&&e.mapPos(a.from,-1)==c.from&&e.mapPos(a.to,1)==c.to||(s|=8))}return this.visibleRanges=r,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||bo(this.heightMap.lineAt(e,_e.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||bo(this.heightMap.lineAt(this.scaler.fromDOM(e),_e.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return bo(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ma{constructor(e,t){this.from=e,this.to=t}}function s2(n,e,t){let r=[],s=n,l=0;return Ne.spans(t,n,e,{span(){},point(a,c){a>s&&(r.push({from:s,to:a}),l+=a-s),s=c}},20),s<e&&(r.push({from:s,to:e}),l+=e-s),{total:l,ranges:r}}function Ea({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let s=0;;s++){let{from:l,to:a}=e[s],c=a-l;if(r<=c)return l+r;r-=c}}function Da(n,e){let t=0;for(let{from:r,to:s}of n.ranges){if(e<=s){t+=e-r;break}t+=s-r}return t/n.total}function o2(n,e){for(let t of n)if(e(t))return t}const P0={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class bd{constructor(e,t,r){let s=0,l=0,a=0;this.viewports=r.map(({from:c,to:h})=>{let d=t.lineAt(c,_e.ByPos,e,0,0).top,p=t.lineAt(h,_e.ByPos,e,0,0).bottom;return s+=p-d,{from:c,to:h,top:d,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let c of this.viewports)c.domTop=a+(c.top-l)*this.scale,a=c.domBottom=c.domTop+(c.bottom-c.top),l=c.bottom}toDOM(e){for(let t=0,r=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.top)return s+(e-r)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);r=l.bottom,s=l.domBottom}}fromDOM(e){for(let t=0,r=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.domTop)return r+(e-s)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);r=l.bottom,s=l.domBottom}}eq(e){return e instanceof bd?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function bo(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new qn(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(s=>bo(s,e)):n._content)}const Ra=ye.define({combine:n=>n.join(" ")}),If=ye.define({combine:n=>n.indexOf(!0)>-1}),Bf=Zr.newName(),m1=Zr.newName(),y1=Zr.newName(),v1={"&light":"."+m1,"&dark":"."+y1};function zf(n,e,t){return new Zr(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+r}})}const l2=zf("."+Bf,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},v1),a2={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},jh=oe.ie&&oe.ie_version<=11;class u2{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new $O,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(oe.ie&&oe.ie_version<=11||oe.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&oe.android&&e.constructor.EDIT_CONTEXT!==!1&&!(oe.chrome&&oe.chrome_version<126)&&(this.editContext=new h2(e),e.state.facet(pr)&&(e.contentDOM.editContext=this.editContext.editContext)),jh&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,s=this.selectionRange;if(r.state.facet(pr)?r.root.activeElement!=this.dom:!Qa(this.dom,s))return;let l=s.anchorNode&&r.docView.nearest(s.anchorNode);if(l&&l.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(oe.ie&&oe.ie_version<=11||oe.android&&oe.chrome)&&!r.state.selection.main.empty&&s.focusNode&&Do(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Ho(e.root);if(!t)return!1;let r=oe.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&c2(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let s=Qa(this.dom,r);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&XO(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,a2),jh&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),jh&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let s=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=l.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&l.force&&us(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,s=!1;for(let l of e){let a=this.readMutation(l);a&&(a.typeOver&&(s=!0),t==-1?{from:t,to:r}=a:(t=Math.min(a.from,t),r=Math.max(a.to,r)))}return{from:t,to:r,typeOver:s}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),s=this.selectionChanged&&Qa(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let l=new MC(this.view,e,t,r);return this.view.docView.domChanged={newSel:l.newSel?l.newSel.main:null},l}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,s=s1(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=A0(t,e.previousSibling||e.target.previousSibling,-1),s=A0(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(pr)!=e.state.facet(pr)&&(e.view.contentDOM.editContext=e.state.facet(pr)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function A0(n,e,t){for(;e;){let r=Ie.get(e);if(r&&r.parent==n)return r;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function M0(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,l=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return Do(a.node,a.offset,s,l)&&([t,r,s,l]=[s,l,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:l}}function c2(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return M0(n,s)}let t=null;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?M0(n,t):null}class h2{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let s=e.state.selection.main,{anchor:l,head:a}=s,c=this.toEditorPos(r.updateRangeStart),h=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:c,drifted:!1});let d=h-c>r.text.length;c==this.from&&l<this.from?c=l:h==this.to&&l>this.to&&(h=l);let p=o1(e.state.sliceDoc(c,h),r.text,(d?s.from:s.to)-c,d?"end":null);if(!p){let v=Z.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));v.main.eq(s)||e.dispatch({selection:v,userEvent:"select"});return}let m={from:p.from+c,to:p.toA+c,insert:Ee.of(r.text.slice(p.from,p.toB).split(`
`))};if((oe.mac||oe.android)&&m.from==a-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(m={from:c,to:h,insert:Ee.of([r.text.replace("."," ")])}),this.pendingContextChange=m,!e.state.readOnly){let v=this.to-this.from+(m.to-m.from+m.insert.length);kd(e,m,Z.single(this.toEditorPos(r.selectionStart,v),this.toEditorPos(r.selectionEnd,v)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),m.from<m.to&&!m.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(t.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let s=[],l=null;for(let a=this.toEditorPos(r.rangeStart),c=this.toEditorPos(r.rangeEnd);a<c;a++){let h=e.coordsForChar(a);l=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||l||new DOMRect,s.push(l)}t.updateCharacterBounds(r.rangeStart,s)},this.handlers.textformatupdate=r=>{let s=[];for(let l of r.getTextFormats()){let a=l.underlineStyle,c=l.underlineThickness;if(!/none/i.test(a)&&!/none/i.test(c)){let h=this.toEditorPos(l.rangeStart),d=this.toEditorPos(l.rangeEnd);if(h<d){let p=`text-decoration: underline ${/^[a-z]/.test(a)?a+" ":a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${/thin/i.test(c)?1:2}px`;s.push(Ke.mark({attributes:{style:p}}).range(h,d))}}}e.dispatch({effects:qv.of(Ke.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let s=Ho(r.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,s=this.pendingContextChange;return e.changes.iterChanges((l,a,c,h,d)=>{if(r)return;let p=d.length-(a-l);if(s&&a>=s.to)if(s.from==l&&s.to==a&&s.insert.eq(d)){s=this.pendingContextChange=null,t+=p,this.to+=p;return}else s=null,this.revertPending(e.state);if(l+=t,a+=t,a<=this.from)this.from+=p,this.to+=p;else if(l<this.to){if(l<this.from||a>this.to||this.to-this.from+d.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(l),this.toContextPos(a),d.toString()),this.to+=p}t+=p}),s&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(r,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Oe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(s=>s.forEach(l=>r(l,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||UO(e.parent)||document,this.viewState=new C0(e.state||Te.create(e)),e.scrollTo&&e.scrollTo.is(Ca)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(rs).map(s=>new Lh(s));for(let s of this.plugins)s.update(this);this.observer=new u2(this),this.inputState=new TC(this),this.inputState.ensureHandlers(this.plugins),this.docView=new o0(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Mt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,s,l=this.state;for(let v of e){if(v.startState!=l)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");l=v.state}if(this.destroyed){this.viewState.state=l;return}let a=this.hasFocus,c=0,h=null;e.some(v=>v.annotation(f1))?(this.inputState.notifiedFocused=a,c=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,h=d1(l,a),h||(c=1));let d=this.observer.delayedAndroidKey,p=null;if(d?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(l.doc)||!this.state.selection.eq(l.selection))&&(p=null)):this.observer.clear(),l.facet(Te.phrases)!=this.state.facet(Te.phrases))return this.setState(l);s=cu.create(this,l,e),s.flags|=c;let m=this.viewState.scrollTarget;try{this.updateState=2;for(let v of e){if(m&&(m=m.map(v.changes)),v.scrollIntoView){let{main:x}=v.state.selection;m=new cs(x.empty?x:Z.cursor(x.head,x.head>x.anchor?-1:1))}for(let x of v.effects)x.is(Ca)&&(m=x.value.clip(this.state))}this.viewState.update(s,m),this.bidiCache=fu.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(ko)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(v=>v.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Ra)!=s.state.facet(Ra)&&(this.viewState.mustMeasureContent=!0),(t||r||m||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let v of this.state.facet(Rf))try{v(s)}catch(x){Yn(this.state,x,"update listener")}(h||p)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),p&&!s1(this,p)&&d.force&&us(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new C0(e),this.plugins=e.facet(rs).map(r=>new Lh(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new o0(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(rs),r=e.state.facet(rs);if(t!=r){let s=[];for(let l of r){let a=t.indexOf(l);if(a<0)s.push(new Lh(l));else{let c=this.plugins[a];c.mustUpdate=e,s.push(c)}}for(let l of this.plugins)l.mustUpdate!=e&&l.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){Yn(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,s=r.scrollTop*this.scaleY,{scrollAnchorPos:l,scrollAnchorHeight:a}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(a<0)if(Cv(r))l=-1,a=this.viewState.heightMap.height;else{let x=this.viewState.scrollAnchorAt(s);l=x.from,a=x.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];h&4||([this.measureRequests,d]=[d,this.measureRequests]);let p=d.map(x=>{try{return x.read(this)}catch(k){return Yn(this.state,k),E0}}),m=cu.create(this,this.state,[]),v=!1;m.flags|=h,t?t.flags|=h:t=m,this.updateState=2,m.empty||(this.updatePlugins(m),this.inputState.update(m),this.updateAttrs(),v=this.docView.update(m),v&&this.docViewUpdate());for(let x=0;x<d.length;x++)if(p[x]!=E0)try{let k=d[x];k.write&&k.write(p[x],this)}catch(k){Yn(this.state,k)}if(v&&this.docView.updateSelection(!0),!m.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let k=(l<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(l).top)-a;if(k>1||k<-1){s=s+k,r.scrollTop=s/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let c of this.state.facet(Rf))c(t)}get themeClasses(){return Bf+" "+(this.state.facet(If)?y1:m1)+" "+this.state.facet(Ra)}updateAttrs(){let e=D0(this,Yv,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(pr)?"true":"false",class:"cm-content",style:`${oe.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),D0(this,wd,t);let r=this.observer.ignore(()=>{let s=Pf(this.contentDOM,this.contentAttrs,t),l=Pf(this.dom,this.editorAttrs,e);return s||l});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let s of r.effects)if(s.is(Oe.announce)){t&&(this.announceDOM.textContent=""),t=!1;let l=this.announceDOM.appendChild(document.createElement("div"));l.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(ko);let e=this.state.facet(Oe.cspNonce);Zr.mount(this.root,this.styleModules.concat(l2).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return Bh(this,e,h0(this,e,t,r))}moveByGroup(e,t){return Bh(this,e,h0(this,e,t,r=>bC(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),s=this.textDirectionAt(e.from),l=r[t?r.length-1:0];return Z.cursor(l.side(t,s)+e.from,l.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,r=!0){return SC(this,e,t,r)}moveVertically(e,t,r){return Bh(this,e,OC(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),n1(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let s=this.state.doc.lineAt(e),l=this.bidiSpans(s),a=l[qr.find(l,e-s.from,-1,t)];return Du(r,a.dir==Xe.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(Uv)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>f2)return jv(e.length);let t=this.textDirectionAt(e.from),r;for(let l of this.bidiCache)if(l.from==e.from&&l.dir==t&&(l.fresh||zv(l.isolates,r=s0(this,e))))return l.order;r||(r=s0(this,e));let s=oC(e.text,t,r);return this.bidiCache.push(new fu(e.from,e.to,t,r,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||oe.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{bv(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Ca.of(new cs(typeof e=="number"?Z.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Ca.of(new cs(Z.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Nn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Nn.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=Zr.newName(),s=[Ra.of(r),ko.of(zf(`.${r}`,e))];return t&&t.dark&&s.push(If.of(!0)),s}static baseTheme(e){return Au.lowest(ko.of(zf("."+Bf,e,v1)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),s=r&&Ie.get(r)||Ie.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}Oe.styleModule=ko;Oe.inputHandler=Qv;Oe.clipboardInputFilter=vd;Oe.clipboardOutputFilter=xd;Oe.scrollHandler=Kv;Oe.focusChangeEffect=$v;Oe.perLineTextDirection=Uv;Oe.exceptionSink=Wv;Oe.updateListener=Rf;Oe.editable=pr;Oe.mouseSelectionStyle=Hv;Oe.dragMovesSelection=Vv;Oe.clickAddsSelectionRange=_v;Oe.decorations=Qo;Oe.outerDecorations=Gv;Oe.atomicRanges=rl;Oe.bidiIsolatedRanges=Zv;Oe.scrollMargins=Jv;Oe.darkTheme=If;Oe.cspNonce=ye.define({combine:n=>n.length?n[0]:""});Oe.contentAttributes=wd;Oe.editorAttributes=Yv;Oe.lineWrapping=Oe.contentAttributes.of({class:"cm-lineWrapping"});Oe.announce=st.define();const f2=4096,E0={};class fu{constructor(e,t,r,s,l,a){this.from=e,this.to=t,this.dir=r,this.isolates=s,this.fresh=l,this.order=a}static update(e,t){if(t.empty&&!e.some(l=>l.fresh))return e;let r=[],s=e.length?e[e.length-1].dir:Xe.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let a=e[l];a.dir==s&&!t.touchesRange(a.from,a.to)&&r.push(new fu(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return r}}function D0(n,e,t){for(let r=n.state.facet(e),s=r.length-1;s>=0;s--){let l=r[s],a=typeof l=="function"?l(n):l;a&&Cf(a,t)}return t}const d2=oe.mac?"mac":oe.windows?"win":oe.linux?"linux":"key";function p2(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let s,l,a,c;for(let h=0;h<t.length-1;++h){const d=t[h];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))a=!0;else if(/^mod$/i.test(d))e=="mac"?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(r="Alt-"+r),l&&(r="Ctrl-"+r),c&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function Ta(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const g2=Au.default(Oe.domEventHandlers({keydown(n,e){return x2(m2(e.state),n,e,"editor")}})),Od=ye.define({enables:g2}),R0=new WeakMap;function m2(n){let e=n.facet(Od),t=R0.get(e);return t||R0.set(e,t=v2(e.reduce((r,s)=>r.concat(s),[]))),t}let Ur=null;const y2=4e3;function v2(n,e=d2){let t=Object.create(null),r=Object.create(null),s=(a,c)=>{let h=r[a];if(h==null)r[a]=c;else if(h!=c)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},l=(a,c,h,d,p)=>{var m,v;let x=t[a]||(t[a]=Object.create(null)),k=c.split(/ (?!$)/).map(C=>p2(C,e));for(let C=1;C<k.length;C++){let D=k.slice(0,C).join(" ");s(D,!0),x[D]||(x[D]={preventDefault:!0,stopPropagation:!1,run:[B=>{let _=Ur={view:B,prefix:D,scope:a};return setTimeout(()=>{Ur==_&&(Ur=null)},y2),!0}]})}let S=k.join(" ");s(S,!1);let b=x[S]||(x[S]={preventDefault:!1,stopPropagation:!1,run:((v=(m=x._any)===null||m===void 0?void 0:m.run)===null||v===void 0?void 0:v.slice())||[]});h&&b.run.push(h),d&&(b.preventDefault=!0),p&&(b.stopPropagation=!0)};for(let a of n){let c=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let d of c){let p=t[d]||(t[d]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:m}=a;for(let v in p)p[v].run.push(x=>m(x,jf))}let h=a[e]||a.key;if(h)for(let d of c)l(d,h,a.run,a.preventDefault,a.stopPropagation),a.shift&&l(d,"Shift-"+h,a.shift,a.preventDefault,a.stopPropagation)}return t}let jf=null;function x2(n,e,t,r){jf=e;let s=_O(e),l=SO(s,0),a=bO(l)==s.length&&s!=" ",c="",h=!1,d=!1,p=!1;Ur&&Ur.view==t&&Ur.scope==r&&(c=Ur.prefix+" ",a1.indexOf(e.keyCode)<0&&(d=!0,Ur=null));let m=new Set,v=b=>{if(b){for(let C of b.run)if(!m.has(C)&&(m.add(C),C(t)))return b.stopPropagation&&(p=!0),!0;b.preventDefault&&(b.stopPropagation&&(p=!0),d=!0)}return!1},x=n[r],k,S;return x&&(v(x[c+Ta(s,e,!a)])?h=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(oe.windows&&e.ctrlKey&&e.altKey)&&!(oe.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(k=Jr[e.keyCode])&&k!=s?(v(x[c+Ta(k,e,!0)])||e.shiftKey&&(S=Vo[e.keyCode])!=s&&S!=k&&v(x[c+Ta(S,e,!1)]))&&(h=!0):a&&e.shiftKey&&v(x[c+Ta(s,e,!0)])&&(h=!0),!h&&v(x._any)&&(h=!0)),d&&(h=!0),h&&p&&e.stopPropagation(),jf=null,h}class il{constructor(e,t,r,s,l){this.className=e,this.left=t,this.top=r,this.width=s,this.height=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let s=e.coordsAtPos(r.head,r.assoc||1);if(!s)return[];let l=x1(e);return[new il(t,s.left-l.left,s.top-l.top,null,s.bottom-s.top)]}else return w2(e,t,r)}}function x1(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Xe.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function T0(n,e,t,r){let s=n.coordsAtPos(e,t*2);if(!s)return r;let l=n.dom.getBoundingClientRect(),a=(s.top+s.bottom)/2,c=n.posAtCoords({x:l.left+1,y:a}),h=n.posAtCoords({x:l.right-1,y:a});return c==null||h==null?r:{from:Math.max(r.from,Math.min(c,h)),to:Math.min(r.to,Math.max(c,h))}}function w2(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),l=n.textDirection==Xe.LTR,a=n.contentDOM,c=a.getBoundingClientRect(),h=x1(n),d=a.querySelector(".cm-line"),p=d&&window.getComputedStyle(d),m=c.left+(p?parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)):0),v=c.right-(p?parseInt(p.paddingRight):0),x=Nf(n,r,1),k=Nf(n,s,-1),S=x.type==It.Text?x:null,b=k.type==It.Text?k:null;if(S&&(n.lineWrapping||x.widgetLineBreaks)&&(S=T0(n,r,1,S)),b&&(n.lineWrapping||k.widgetLineBreaks)&&(b=T0(n,s,-1,b)),S&&b&&S.from==b.from&&S.to==b.to)return D(B(t.from,t.to,S));{let T=S?B(t.from,null,S):_(x,!1),F=b?B(null,t.to,b):_(k,!0),z=[];return(S||x).to<(b||k).from-(S&&b?1:0)||x.widgetLineBreaks>1&&T.bottom+n.defaultLineHeight/2<F.top?z.push(C(m,T.bottom,v,F.top)):T.bottom<F.top&&n.elementAtHeight((T.bottom+F.top)/2).type==It.Text&&(T.bottom=F.top=(T.bottom+F.top)/2),D(T).concat(z).concat(D(F))}function C(T,F,z,K){return new il(e,T-h.left,F-h.top,z-T,K-F)}function D({top:T,bottom:F,horizontal:z}){let K=[];for(let J=0;J<z.length;J+=2)K.push(C(z[J],T,z[J+1],F));return K}function B(T,F,z){let K=1e9,J=-1e9,G=[];function te(he,q,fe,pe,$){let ee=n.coordsAtPos(he,he==z.to?-2:2),X=n.coordsAtPos(fe,fe==z.from?2:-2);!ee||!X||(K=Math.min(ee.top,X.top,K),J=Math.max(ee.bottom,X.bottom,J),$==Xe.LTR?G.push(l&&q?m:ee.left,l&&pe?v:X.right):G.push(!l&&pe?m:X.left,!l&&q?v:ee.right))}let ne=T??z.from,ce=F??z.to;for(let he of n.visibleRanges)if(he.to>ne&&he.from<ce)for(let q=Math.max(he.from,ne),fe=Math.min(he.to,ce);;){let pe=n.state.doc.lineAt(q);for(let $ of n.bidiSpans(pe)){let ee=$.from+pe.from,X=$.to+pe.from;if(ee>=fe)break;X>q&&te(Math.max(ee,q),T==null&&ee<=ne,Math.min(X,fe),F==null&&X>=ce,$.dir)}if(q=pe.to+1,q>=fe)break}return G.length==0&&te(ne,T==null,ce,F==null,n.textDirection),{top:K,bottom:J,horizontal:G}}function _(T,F){let z=c.top+(F?T.top:T.bottom);return{top:z,bottom:z,horizontal:[]}}}function k2(n,e){return n.constructor==e.constructor&&n.eq(e)}class S2{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Xa)!=e.state.facet(Xa)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(Xa);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!k2(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[r].constructor&&s.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e,oe.safari&&oe.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Xa=ye.define();function w1(n){return[Nn.define(e=>new S2(e,n)),Xa.of(n)]}const $o=ye.define({combine(n){return vv(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function b2(n={}){return[$o.of(n),O2,C2,P2,Xv.of(!0)]}function k1(n){return n.startState.facet($o)!=n.state.facet($o)}const O2=w1({above:!0,markers(n){let{state:e}=n,t=e.facet($o),r=[];for(let s of e.selection.ranges){let l=s==e.selection.main;if(s.empty||t.drawRangeCursor){let a=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=s.empty?s:Z.cursor(s.head,s.head>s.anchor?-1:1);for(let h of il.forRange(n,a,c))r.push(h)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=k1(n);return t&&N0(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){N0(e.state,n)},class:"cm-cursorLayer"});function N0(n,e){e.style.animationDuration=n.facet($o).cursorBlinkRate+"ms"}const C2=w1({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:il.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||k1(n)},class:"cm-selectionLayer"}),P2=Au.highest(Oe.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function A2(){return E2}const M2=Ke.line({class:"cm-activeLine"}),E2=Nn.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let s=n.lineBlockAt(r.head);s.from>e&&(t.push(M2.range(s.from)),e=s.from)}return Ke.set(t)}},{decorations:n=>n.decorations});class ti extends ds{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ti.prototype.elementClass="";ti.prototype.toDOM=void 0;ti.prototype.mapMode=sn.TrackBefore;ti.prototype.startSide=ti.prototype.endSide=-1;ti.prototype.point=!0;const Ka=ye.define(),D2=ye.define(),qa=ye.define(),L0=ye.define({combine:n=>n.some(e=>e)});function R2(n){return[T2]}const T2=Nn.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(qa).map(e=>new B0(n,e)),this.fixed=!n.state.facet(L0);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(L0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Ne.iter(this.view.state.facet(Ka),this.view.viewport.from),r=[],s=this.gutters.map(l=>new N2(l,this.view.viewport,-this.view.documentPadding.top));for(let l of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(l.type)){let a=!0;for(let c of l.type)if(c.type==It.Text&&a){Ff(t,r,c.from);for(let h of s)h.line(this.view,c,r);a=!1}else if(c.widget)for(let h of s)h.widget(this.view,c)}else if(l.type==It.Text){Ff(t,r,l.from);for(let a of s)a.line(this.view,l,r)}else if(l.widget)for(let a of s)a.widget(this.view,l);for(let l of s)l.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(qa),t=n.state.facet(qa),r=n.docChanged||n.heightChanged||n.viewportChanged||!Ne.eq(n.startState.facet(Ka),n.state.facet(Ka),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(r=!0);else{r=!0;let s=[];for(let l of t){let a=e.indexOf(l);a<0?s.push(new B0(this.view,l)):(this.gutters[a].update(n),s.push(this.gutters[a]))}for(let l of this.gutters)l.dom.remove(),s.indexOf(l)<0&&l.destroy();for(let l of s)l.config.side=="after"?this.getDOMAfter().appendChild(l.dom):this.dom.appendChild(l.dom);this.gutters=s}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Oe.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let r=t.dom.offsetWidth*e.scaleX,s=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Xe.LTR?{left:r,right:s}:{right:r,left:s}})});function I0(n){return Array.isArray(n)?n:[n]}function Ff(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class N2{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Ne.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:s}=this,l=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==s.elements.length){let c=new S1(e,a,l,r);s.elements.push(c),s.dom.appendChild(c.dom)}else s.elements[this.i].update(e,a,l,r);this.height=t.bottom,this.i++}line(e,t,r){let s=[];Ff(this.cursor,s,t.from),r.length&&(s=s.concat(r));let l=this.gutter.config.lineMarker(e,t,s);l&&s.unshift(l);let a=this.gutter;s.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),s=r?[r]:null;for(let l of e.state.facet(D2)){let a=l(e,t.widget,t);a&&(s||(s=[])).push(a)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class B0{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,s=>{let l=s.target,a;if(l!=this.dom&&this.dom.contains(l)){for(;l.parentNode!=this.dom;)l=l.parentNode;let h=l.getBoundingClientRect();a=(h.top+h.bottom)/2}else a=s.clientY;let c=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[r](e,c,s)&&s.preventDefault()});this.markers=I0(t.markers(e)),t.initialSpacer&&(this.spacer=new S1(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=I0(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let r=e.view.viewport;return!Ne.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class S1{constructor(e,t,r,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,s)}update(e,t,r,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),L2(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let r="cm-gutterElement",s=this.dom.firstChild;for(let l=0,a=0;;){let c=a,h=l<t.length?t[l++]:null,d=!1;if(h){let p=h.elementClass;p&&(r+=" "+p);for(let m=a;m<this.markers.length;m++)if(this.markers[m].compare(h)){c=m,d=!0;break}}else c=this.markers.length;for(;a<c;){let p=this.markers[a++];if(p.toDOM){p.destroy(s);let m=s.nextSibling;s.remove(),s=m}}if(!h)break;h.toDOM&&(d?s=s.nextSibling:this.dom.insertBefore(h.toDOM(e),s)),d&&a++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function L2(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const I2=ye.define(),B2=ye.define(),is=ye.define({combine(n){return vv(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let s in t){let l=r[s],a=t[s];r[s]=l?(c,h,d)=>l(c,h,d)||a(c,h,d):a}return r}})}});class Fh extends ti{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function _h(n,e){return n.state.facet(is).formatNumber(e,n.state)}const z2=qa.compute([is],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(I2)},lineMarker(e,t,r){return r.some(s=>s.toDOM)?null:new Fh(_h(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let s of e.state.facet(B2)){let l=s(e,t,r);if(l)return l}return null},lineMarkerChange:e=>e.startState.facet(is)!=e.state.facet(is),initialSpacer(e){return new Fh(_h(e,z0(e.state.doc.lines)))},updateSpacer(e,t){let r=_h(t.view,z0(t.view.state.doc.lines));return r==e.number?e:new Fh(r)},domEventHandlers:n.facet(is).domEventHandlers,side:"before"}));function j2(n={}){return[is.of(n),R2(),z2]}function z0(n){let e=9;for(;e<n;)e=e*10+9;return e}const F2=new class extends ti{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},_2=Ka.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let s=n.doc.lineAt(r.head).from;s>t&&(t=s,e.push(F2.range(s)))}return Ne.of(e)});function V2(){return _2}const b1=1024;let H2=0;class Vh{constructor(e,t){this.from=e,this.to=t}}class Ae{constructor(e={}){this.id=H2++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=Ut.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Ae.closedBy=new Ae({deserialize:n=>n.split(" ")});Ae.openedBy=new Ae({deserialize:n=>n.split(" ")});Ae.group=new Ae({deserialize:n=>n.split(" ")});Ae.isolate=new Ae({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Ae.contextHash=new Ae({perNode:!0});Ae.lookAhead=new Ae({perNode:!0});Ae.mounted=new Ae({perNode:!0});class du{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Ae.mounted.id]}}const W2=Object.create(null);class Ut{constructor(e,t,r,s=0){this.name=e,this.props=t,this.id=r,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):W2,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new Ut(e.name||"",t,e.id,r);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(s)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[l[0].id]=l[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ae.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let s of r.split(" "))t[s]=e[r];return r=>{for(let s=r.prop(Ae.group),l=-1;l<(s?s.length:0);l++){let a=t[l<0?r.name:s[l]];if(a)return a}}}}Ut.none=new Ut("",Object.create(null),0,8);class Cd{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let s=null;for(let l of e){let a=l(r);if(a){s||(s=Object.assign({},r.props));let c=a[1],h=a[0];h.combine&&h.id in s&&(c=h.combine(s[h.id],c)),s[h.id]=c}}t.push(s?new Ut(r.name,s,r.id,r.flags):r)}return new Cd(t)}}const Na=new WeakMap,j0=new WeakMap;var ht;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(ht||(ht={}));class tt{constructor(e,t,r,s,l){if(this.type=e,this.children=t,this.positions=r,this.length=s,this.props=null,l&&l.length){this.props=Object.create(null);for(let[a,c]of l)this.props[typeof a=="number"?a:a.id]=c}}toString(){let e=du.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let s=r.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Vf(this.topNode,e)}cursorAt(e,t=0,r=0){let s=Na.get(this)||this.topNode,l=new Vf(s);return l.moveTo(e,t),Na.set(this,l._tree),l}get topNode(){return new gn(this,0,0,null)}resolve(e,t=0){let r=Uo(Na.get(this)||this.topNode,e,t,!1);return Na.set(this,r),r}resolveInner(e,t=0){let r=Uo(j0.get(this)||this.topNode,e,t,!0);return j0.set(this,r),r}resolveStack(e,t=0){return U2(this,e,t)}iterate(e){let{enter:t,leave:r,from:s=0,to:l=this.length}=e,a=e.mode||0,c=(a&ht.IncludeAnonymous)>0;for(let h=this.cursor(a|ht.IncludeAnonymous);;){let d=!1;if(h.from<=l&&h.to>=s&&(!c&&h.type.isAnonymous||t(h)!==!1)){if(h.firstChild())continue;d=!0}for(;d&&r&&(c||!h.type.isAnonymous)&&r(h),!h.nextSibling();){if(!h.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Md(Ut.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,s)=>new tt(this.type,t,r,s,this.propValues),e.makeTree||((t,r,s)=>new tt(Ut.none,t,r,s)))}static build(e){return X2(e)}}tt.empty=new tt(Ut.none,[],[],0);class Pd{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Pd(this.buffer,this.index)}}class ni{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return Ut.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],s=this.set.types[t],l=s.name;if(/\W/.test(l)&&!s.isError&&(l=JSON.stringify(l)),e+=4,r==e)return l;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return l+"("+a.join(",")+")"}findChild(e,t,r,s,l){let{buffer:a}=this,c=-1;for(let h=e;h!=t&&!(O1(l,s,a[h+1],a[h+2])&&(c=h,r>0));h=a[h+3]);return c}slice(e,t,r){let s=this.buffer,l=new Uint16Array(t-e),a=0;for(let c=e,h=0;c<t;){l[h++]=s[c++],l[h++]=s[c++]-r;let d=l[h++]=s[c++]-r;l[h++]=s[c++]-e,a=Math.max(a,d)}return new ni(l,a,this.set)}}function O1(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function Uo(n,e,t,r){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!r&&n instanceof gn&&n.index<0?null:n.parent;if(!a)return n;n=a}let l=r?0:ht.IgnoreOverlays;if(r)for(let a=n,c=a.parent;c;a=c,c=a.parent)a instanceof gn&&a.index<0&&((s=c.enter(e,t,l))===null||s===void 0?void 0:s.from)!=a.from&&(n=c);for(;;){let a=n.enter(e,t,l);if(!a)return n;n=a}}class C1{cursor(e=0){return new Vf(this,e)}getChild(e,t=null,r=null){let s=F0(this,e,t,r);return s.length?s[0]:null}getChildren(e,t=null,r=null){return F0(this,e,t,r)}resolve(e,t=0){return Uo(this,e,t,!1)}resolveInner(e,t=0){return Uo(this,e,t,!0)}matchContext(e){return _f(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(r=t,t=s.prevSibling):t=s}return r}get node(){return this}get next(){return this.parent}}class gn extends C1{constructor(e,t,r,s){super(),this._tree=e,this.from=t,this.index=r,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,s,l=0){for(let a=this;;){for(let{children:c,positions:h}=a._tree,d=t>0?c.length:-1;e!=d;e+=t){let p=c[e],m=h[e]+a.from;if(O1(s,r,m,m+p.length)){if(p instanceof ni){if(l&ht.ExcludeBuffers)continue;let v=p.findChild(0,p.buffer.length,t,r-m,s);if(v>-1)return new Yr(new Q2(a,p,e,m),null,v)}else if(l&ht.IncludeAnonymous||!p.type.isAnonymous||Ad(p)){let v;if(!(l&ht.IgnoreMounts)&&(v=du.get(p))&&!v.overlay)return new gn(v.tree,m,e,a);let x=new gn(p,m,e,a);return l&ht.IncludeAnonymous||!x.type.isAnonymous?x:x.nextChild(t<0?p.children.length-1:0,t,r,s)}}}if(l&ht.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let s;if(!(r&ht.IgnoreOverlays)&&(s=du.get(this._tree))&&s.overlay){let l=e-this.from;for(let{from:a,to:c}of s.overlay)if((t>0?a<=l:a<l)&&(t<0?c>=l:c>l))return new gn(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function F0(n,e,t,r){let s=n.cursor(),l=[];if(!s.firstChild())return l;if(t!=null){for(let a=!1;!a;)if(a=s.type.is(t),!s.nextSibling())return l}for(;;){if(r!=null&&s.type.is(r))return l;if(s.type.is(e)&&l.push(s.node),!s.nextSibling())return r==null?l:[]}}function _f(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class Q2{constructor(e,t,r,s){this.parent=e,this.buffer=t,this.index=r,this.start=s}}class Yr extends C1{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,r);return l<0?null:new Yr(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&ht.ExcludeBuffers)return null;let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return l<0?null:new Yr(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new Yr(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new Yr(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,s=this.index+4,l=r.buffer[this.index+3];if(l>s){let a=r.buffer[this.index+1];e.push(r.slice(s,l,a)),t.push(0)}return new tt(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function P1(n){if(!n.length)return null;let e=0,t=n[0];for(let l=1;l<n.length;l++){let a=n[l];(a.from>t.from||a.to<t.to)&&(t=a,e=l)}let r=t instanceof gn&&t.index<0?null:t.parent,s=n.slice();return r?s[e]=r:s.splice(e,1),new $2(s,t)}class $2{constructor(e,t){this.heads=e,this.node=t}get next(){return P1(this.heads)}}function U2(n,e,t){let r=n.resolveInner(e,t),s=null;for(let l=r instanceof gn?r:r.context.parent;l;l=l.parent)if(l.index<0){let a=l.parent;(s||(s=[r])).push(a.resolve(e,t)),l=a}else{let a=du.get(l.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let c=new gn(a.tree,a.overlay[0].from+l.from,-1,l);(s||(s=[r])).push(Uo(c,e,t,!1))}}return s?P1(s):r}class Vf{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof gn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=r+s.buffer[e+1],this.to=r+s.buffer[e+2],!0}yield(e){return e?e instanceof gn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:s}=this.buffer,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,r);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&ht.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&ht.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&ht.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let s=r<0?0:this.stack[r]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(s)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(s.buffer.buffer[l+3]<this.index)return!1;({index:t,parent:r}=s)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let l=t+e,a=e<0?-1:r._tree.children.length;l!=a;l+=e){let c=r._tree.children[l];if(this.mode&ht.IncludeAnonymous||c instanceof ni||!c.type.isAnonymous||Ad(c))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let s=this.index,l=this.stack.length;l>=0;){for(let a=e;a;a=a._parent)if(a.index==s){if(s==this.index)return a;t=a,r=l+1;break e}s=this.stack[--l]}for(let s=r;s<this.stack.length;s++)t=new Yr(this.buffer,t,this.stack[s]);return this.bufferNode=new Yr(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&t&&t(this),s=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,s=!0}}}matchContext(e){if(!this.buffer)return _f(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let s=e.length-1,l=this.stack.length-1;s>=0;l--){if(l<0)return _f(this._tree,e,s);let a=r[t.buffer[this.stack[l]]];if(!a.isAnonymous){if(e[s]&&e[s]!=a.name)return!1;s--}}return!0}}function Ad(n){return n.children.some(e=>e instanceof ni||!e.type.isAnonymous||Ad(e))}function X2(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:s=b1,reused:l=[],minRepeatType:a=r.types.length}=n,c=Array.isArray(t)?new Pd(t,t.length):t,h=r.types,d=0,p=0;function m(T,F,z,K,J,G){let{id:te,start:ne,end:ce,size:he}=c,q=p,fe=d;if(he<0)if(c.next(),he==-1){let A=l[te];z.push(A),K.push(ne-T);return}else if(he==-3){d=te;return}else if(he==-4){p=te;return}else throw new RangeError(`Unrecognized record size: ${he}`);let pe=h[te],$,ee,X=ne-T;if(ce-ne<=s&&(ee=b(c.pos-F,J))){let A=new Uint16Array(ee.size-ee.skip),I=c.pos-ee.size,se=A.length;for(;c.pos>I;)se=C(ee.start,A,se);$=new ni(A,ce-ee.start,r),X=ee.start-T}else{let A=c.pos-he;c.next();let I=[],se=[],ge=te>=a?te:-1,re=0,W=ce;for(;c.pos>A;)ge>=0&&c.id==ge&&c.size>=0?(c.end<=W-s&&(k(I,se,ne,re,c.end,W,ge,q,fe),re=I.length,W=c.end),c.next()):G>2500?v(ne,A,I,se):m(ne,A,I,se,ge,G+1);if(ge>=0&&re>0&&re<I.length&&k(I,se,ne,re,ne,W,ge,q,fe),I.reverse(),se.reverse(),ge>-1&&re>0){let ke=x(pe,fe);$=Md(pe,I,se,0,I.length,0,ce-ne,ke,ke)}else $=S(pe,I,se,ce-ne,q-ce,fe)}z.push($),K.push(X)}function v(T,F,z,K){let J=[],G=0,te=-1;for(;c.pos>F;){let{id:ne,start:ce,end:he,size:q}=c;if(q>4)c.next();else{if(te>-1&&ce<te)break;te<0&&(te=he-s),J.push(ne,ce,he),G++,c.next()}}if(G){let ne=new Uint16Array(G*4),ce=J[J.length-2];for(let he=J.length-3,q=0;he>=0;he-=3)ne[q++]=J[he],ne[q++]=J[he+1]-ce,ne[q++]=J[he+2]-ce,ne[q++]=q;z.push(new ni(ne,J[2]-ce,r)),K.push(ce-T)}}function x(T,F){return(z,K,J)=>{let G=0,te=z.length-1,ne,ce;if(te>=0&&(ne=z[te])instanceof tt){if(!te&&ne.type==T&&ne.length==J)return ne;(ce=ne.prop(Ae.lookAhead))&&(G=K[te]+ne.length+ce)}return S(T,z,K,J,G,F)}}function k(T,F,z,K,J,G,te,ne,ce){let he=[],q=[];for(;T.length>K;)he.push(T.pop()),q.push(F.pop()+z-J);T.push(S(r.types[te],he,q,G-J,ne-G,ce)),F.push(J-z)}function S(T,F,z,K,J,G,te){if(G){let ne=[Ae.contextHash,G];te=te?[ne].concat(te):[ne]}if(J>25){let ne=[Ae.lookAhead,J];te=te?[ne].concat(te):[ne]}return new tt(T,F,z,K,te)}function b(T,F){let z=c.fork(),K=0,J=0,G=0,te=z.end-s,ne={size:0,start:0,skip:0};e:for(let ce=z.pos-T;z.pos>ce;){let he=z.size;if(z.id==F&&he>=0){ne.size=K,ne.start=J,ne.skip=G,G+=4,K+=4,z.next();continue}let q=z.pos-he;if(he<0||q<ce||z.start<te)break;let fe=z.id>=a?4:0,pe=z.start;for(z.next();z.pos>q;){if(z.size<0)if(z.size==-3)fe+=4;else break e;else z.id>=a&&(fe+=4);z.next()}J=pe,K+=he,G+=fe}return(F<0||K==T)&&(ne.size=K,ne.start=J,ne.skip=G),ne.size>4?ne:void 0}function C(T,F,z){let{id:K,start:J,end:G,size:te}=c;if(c.next(),te>=0&&K<a){let ne=z;if(te>4){let ce=c.pos-(te-4);for(;c.pos>ce;)z=C(T,F,z)}F[--z]=ne,F[--z]=G-T,F[--z]=J-T,F[--z]=K}else te==-3?d=K:te==-4&&(p=K);return z}let D=[],B=[];for(;c.pos>0;)m(n.start||0,n.bufferStart||0,D,B,-1,0);let _=(e=n.length)!==null&&e!==void 0?e:D.length?B[0]+D[0].length:0;return new tt(h[n.topID],D.reverse(),B.reverse(),_)}const _0=new WeakMap;function Ya(n,e){if(!n.isAnonymous||e instanceof ni||e.type!=n)return 1;let t=_0.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof tt)){t=1;break}t+=Ya(n,r)}_0.set(e,t)}return t}function Md(n,e,t,r,s,l,a,c,h){let d=0;for(let k=r;k<s;k++)d+=Ya(n,e[k]);let p=Math.ceil(d*1.5/8),m=[],v=[];function x(k,S,b,C,D){for(let B=b;B<C;){let _=B,T=S[B],F=Ya(n,k[B]);for(B++;B<C;B++){let z=Ya(n,k[B]);if(F+z>=p)break;F+=z}if(B==_+1){if(F>p){let z=k[_];x(z.children,z.positions,0,z.children.length,S[_]+D);continue}m.push(k[_])}else{let z=S[B-1]+k[B-1].length-T;m.push(Md(n,k,S,_,B,T,z,null,h))}v.push(T+D-l)}}return x(e,t,r,s,0),(c||h)(m,v,a)}class Oi{constructor(e,t,r,s,l=!1,a=!1){this.from=e,this.to=t,this.tree=r,this.offset=s,this.open=(l?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let s=[new Oi(0,e.length,e,0,!1,r)];for(let l of t)l.to>e.length&&s.push(l);return s}static applyChanges(e,t,r=128){if(!t.length)return e;let s=[],l=1,a=e.length?e[0]:null;for(let c=0,h=0,d=0;;c++){let p=c<t.length?t[c]:null,m=p?p.fromA:1e9;if(m-h>=r)for(;a&&a.from<m;){let v=a;if(h>=v.from||m<=v.to||d){let x=Math.max(v.from,h)-d,k=Math.min(v.to,m)-d;v=x>=k?null:new Oi(x,k,v.tree,v.offset+d,c>0,!!p)}if(v&&s.push(v),a.to>m)break;a=l<e.length?e[l++]:null}if(!p)break;h=p.toA,d=p.toA-p.toB}return s}}let A1=class{startParse(e,t,r){return typeof e=="string"&&(e=new K2(e)),r=r?r.length?r.map(s=>new Vh(s.from,s.to)):[new Vh(0,0)]:[new Vh(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let s=this.startParse(e,t,r);for(;;){let l=s.advance();if(l)return l}}};class K2{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Ae({perNode:!0});var V0={};class pu{constructor(e,t,r,s,l,a,c,h,d,p=0,m){this.p=e,this.stack=t,this.state=r,this.reducePos=s,this.pos=l,this.score=a,this.buffer=c,this.bufferBase=h,this.curContext=d,this.lookAhead=p,this.parent=m}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let s=e.parser.context;return new pu(e,[],t,r,r,0,[],0,s?new H0(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,s=e&65535,{parser:l}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let c=l.dynamicPrecedence(s);if(c&&(this.score+=c),r==0){this.pushState(l.getGoto(this.state,s,!0),this.reducePos),s<l.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(s,this.reducePos);return}let h=this.stack.length-(r-1)*3-(e&262144?6:0),d=h?this.stack[h-2]:this.p.ranges[0].from,p=this.reducePos-d;p>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(d==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=d,this.p.lastBigReductionSize=p));let m=h?this.stack[h-1]:0,v=this.bufferBase+this.buffer.length-m;if(s<l.minRepeatTerm||e&131072){let x=l.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,d,x,v+4,!0)}if(e&262144)this.state=this.stack[h];else{let x=this.stack[h-3];this.state=l.getGoto(x,s,!0)}for(;this.stack.length>h;)this.stack.pop();this.reduceContext(s,d)}storeNode(e,t,r,s=4,l=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,c=this.buffer.length;if(c==0&&a.parent&&(c=a.bufferBase-a.parent.bufferBase,a=a.parent),c>0&&a.buffer[c-4]==0&&a.buffer[c-1]>-1){if(t==r)return;if(a.buffer[c-2]>=t){a.buffer[c-2]=r;return}}}if(!l||this.pos==r)this.buffer.push(e,t,r,s);else{let a=this.buffer.length;if(a>0&&(this.buffer[a-4]!=0||this.buffer[a-1]<0)){let c=!1;for(let h=a;h>0&&this.buffer[h-2]>r;h-=4)if(this.buffer[h-1]>=0){c=!0;break}if(c)for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4)}this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=r,this.buffer[a+3]=s}}shift(e,t,r,s){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let l=e,{parser:a}=this.p;(s>this.pos||t<=a.maxNode)&&(this.pos=s,a.stateFlag(l,1)||(this.reducePos=s)),this.pushState(l,r),this.shiftContext(t,r),t<=a.maxNode&&this.buffer.push(t,r,s,4)}else this.pos=s,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,s,4)}apply(e,t,r,s){e&65536?this.reduce(e):this.shift(e,t,r,s)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(r,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new pu(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new q2(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if((r&65536)==0)return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let l=0,a;l<t.length;l+=2)(a=t[l+1])!=this.state&&this.p.parser.hasAction(a,e)&&s.push(t[l],a);if(this.stack.length<120)for(let l=0;s.length<8&&l<t.length;l+=2){let a=t[l+1];s.some((c,h)=>h&1&&c==a)||s.push(t[l],a)}t=s}let r=[];for(let s=0;s<t.length&&r.length<4;s+=2){let l=t[s+1];if(l==this.state)continue;let a=this.split();a.pushState(l,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[s],this.pos),a.reducePos=this.pos,a.score-=200,r.push(a)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let r=t>>19,s=t&65535,l=this.stack.length-r*3;if(l<0||e.getGoto(this.stack[l],s,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;t=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(s,l)=>{if(!t.includes(s))return t.push(s),e.allActions(s,a=>{if(!(a&393216))if(a&65536){let c=(a>>19)-l;if(c>1){let h=a&65535,d=this.stack.length-c*3;if(d>=0&&e.getGoto(this.stack[d],h,!1)>=0)return c<<19|65536|h}}else{let c=r(a,l+1);if(c!=null)return c}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new H0(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class H0{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class q2{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class gu{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new gu(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new gu(this.stack,this.pos,this.index)}}function La(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,s=0;r<n.length;){let l=0;for(;;){let a=n.charCodeAt(r++),c=!1;if(a==126){l=65535;break}a>=92&&a--,a>=34&&a--;let h=a-32;if(h>=46&&(h-=46,c=!0),l+=h,c)break;l*=46}t?t[s++]=l:t=new e(l)}return t}class Ga{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const W0=new Ga;class Y2{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=W0,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,s=this.rangeIndex,l=this.pos+e;for(;l<r.from;){if(!s)return null;let a=this.ranges[--s];l-=r.from-a.to,r=a}for(;t<0?l>r.to:l>=r.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];l+=a.from-r.to,r=a}return l}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,s;if(t>=0&&t<this.chunk.length)r=this.pos+e,s=this.chunk.charCodeAt(t);else{let l=this.resolveOffset(e,1);if(l==null)return-1;if(r=l,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let a=this.rangeIndex,c=this.range;for(;c.to<=r;)c=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>c.to&&(this.chunk2=this.chunk2.slice(0,c.to-r)),s=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),s}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=W0,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(r+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return r}}class hs{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;G2(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}hs.prototype.contextual=hs.prototype.fallback=hs.prototype.extend=!1;hs.prototype.fallback=hs.prototype.extend=!1;class Tu{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function G2(n,e,t,r,s,l){let a=0,c=1<<r,{dialect:h}=t.p.parser;e:for(;(c&n[a])!=0;){let d=n[a+1];for(let x=a+3;x<d;x+=2)if((n[x+1]&c)>0){let k=n[x];if(h.allows(k)&&(e.token.value==-1||e.token.value==k||Z2(k,e.token.value,s,l))){e.acceptToken(k);break}}let p=e.next,m=0,v=n[a+2];if(e.next<0&&v>m&&n[d+v*3-3]==65535){a=n[d+v*3-1];continue e}for(;m<v;){let x=m+v>>1,k=d+x+(x<<1),S=n[k],b=n[k+1]||65536;if(p<S)v=x;else if(p>=b)m=x+1;else{a=n[k+2],e.advance();continue e}}break}}function Q0(n,e,t){for(let r=e,s;(s=n[r])!=65535;r++)if(s==t)return r-e;return-1}function Z2(n,e,t,r){let s=Q0(t,r,e);return s<0||Q0(t,r,n)<s}const tn=typeof process<"u"&&V0&&/\bparse\b/.test(V0.LOG);let Hh=null;function $0(n,e,t){let r=n.cursor(ht.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class J2{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?$0(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?$0(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],s=this.index[t];if(s==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let l=r.children[s],a=this.start[t]+r.positions[s];if(a>e)return this.nextStart=a,null;if(l instanceof tt){if(a==e){if(a<this.safeFrom)return null;let c=a+l.length;if(c<=this.safeTo){let h=l.prop(Ae.lookAhead);if(!h||c+h<this.fragment.to)return l}}this.index[t]++,a+l.length>=Math.max(this.safeFrom,e)&&(this.trees.push(l),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+l.length}}}class eP{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new Ga)}getActions(e){let t=0,r=null,{parser:s}=e.p,{tokenizers:l}=s,a=s.stateSlot(e.state,3),c=e.curContext?e.curContext.hash:0,h=0;for(let d=0;d<l.length;d++){if((1<<d&a)==0)continue;let p=l[d],m=this.tokens[d];if(!(r&&!p.fallback)&&((p.contextual||m.start!=e.pos||m.mask!=a||m.context!=c)&&(this.updateCachedToken(m,p,e),m.mask=a,m.context=c),m.lookAhead>m.end+25&&(h=Math.max(m.lookAhead,h)),m.value!=0)){let v=t;if(m.extended>-1&&(t=this.addActions(e,m.extended,m.end,t)),t=this.addActions(e,m.value,m.end,t),!p.extend&&(r=m,t>v))break}}for(;this.actions.length>t;)this.actions.pop();return h&&e.setLookAhead(h),!r&&e.pos==this.stream.end&&(r=new Ga,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new Ga,{pos:r,p:s}=e;return t.start=r,t.end=Math.min(r+1,s.stream.end),t.value=r==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,r){let s=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(s,e),r),e.value>-1){let{parser:l}=r.p;for(let a=0;a<l.specialized.length;a++)if(l.specialized[a]==e.value){let c=l.specializers[a](this.stream.read(e.start,e.end),r);if(c>=0&&r.p.parser.dialect.allows(c>>1)){(c&1)==0?e.value=c>>1:e.extended=c>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,r,s){for(let l=0;l<s;l+=3)if(this.actions[l]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=r,s}addActions(e,t,r,s){let{state:l}=e,{parser:a}=e.p,{data:c}=a;for(let h=0;h<2;h++)for(let d=a.stateSlot(l,h?2:1);;d+=3){if(c[d]==65535)if(c[d+1]==1)d=fr(c,d+2);else{s==0&&c[d+1]==2&&(s=this.putAction(fr(c,d+2),t,r,s));break}c[d]==t&&(s=this.putAction(fr(c,d+1),t,r,s))}return s}}class tP{constructor(e,t,r,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new Y2(t,s),this.tokens=new eP(e,this.stream),this.topTerm=e.top[1];let{from:l}=s[0];this.stacks=[pu.start(this,e.top[0],l)],this.fragments=r.length&&this.stream.end-l>e.bufferLength*4?new J2(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],s,l;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let c=e[a];for(;;){if(this.tokens.mainToken=null,c.pos>t)r.push(c);else{if(this.advanceStack(c,r,e))continue;{s||(s=[],l=[]),s.push(c);let h=this.tokens.getMainToken(c);l.push(h.value,h.end)}}break}}if(!r.length){let a=s&&iP(s);if(a)return tn&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw tn&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let a=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,l,r);if(a)return tn&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(r.length>a)for(r.sort((c,h)=>h.score-c.score);r.length>a;)r.pop();r.some(c=>c.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let a=0;a<r.length-1;a++){let c=r[a];for(let h=a+1;h<r.length;h++){let d=r[h];if(c.sameState(d)||c.buffer.length>500&&d.buffer.length>500)if((c.score-d.score||c.buffer.length-d.buffer.length)>0)r.splice(h--,1);else{r.splice(a--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let s=e.pos,{parser:l}=this,a=tn?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,p=d?e.curContext.hash:0;for(let m=this.fragments.nodeAt(s);m;){let v=this.parser.nodeSet.types[m.type.id]==m.type?l.getGoto(e.state,m.type.id):-1;if(v>-1&&m.length&&(!d||(m.prop(Ae.contextHash)||0)==p))return e.useNode(m,v),tn&&console.log(a+this.stackID(e)+` (via reuse of ${l.getName(m.type.id)})`),!0;if(!(m instanceof tt)||m.children.length==0||m.positions[0]>0)break;let x=m.children[0];if(x instanceof tt&&m.positions[0]==0)m=x;else break}}let c=l.stateSlot(e.state,4);if(c>0)return e.reduce(c),tn&&console.log(a+this.stackID(e)+` (via always-reduce ${l.getName(c&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let d=0;d<h.length;){let p=h[d++],m=h[d++],v=h[d++],x=d==h.length||!r,k=x?e:e.split(),S=this.tokens.mainToken;if(k.apply(p,m,S?S.start:k.pos,v),tn&&console.log(a+this.stackID(k)+` (via ${(p&65536)==0?"shift":`reduce of ${l.getName(p&65535)}`} for ${l.getName(m)} @ ${s}${k==e?"":", split"})`),x)return!0;k.pos>s?t.push(k):r.push(k)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return U0(e,t),!0}}runRecovery(e,t,r){let s=null,l=!1;for(let a=0;a<e.length;a++){let c=e[a],h=t[a<<1],d=t[(a<<1)+1],p=tn?this.stackID(c)+" -> ":"";if(c.deadEnd&&(l||(l=!0,c.restart(),tn&&console.log(p+this.stackID(c)+" (restarted)"),this.advanceFully(c,r))))continue;let m=c.split(),v=p;for(let x=0;x<10&&m.forceReduce()&&(tn&&console.log(v+this.stackID(m)+" (via force-reduce)"),!this.advanceFully(m,r));x++)tn&&(v=this.stackID(m)+" -> ");for(let x of c.recoverByInsert(h))tn&&console.log(p+this.stackID(x)+" (via recover-insert)"),this.advanceFully(x,r);this.stream.end>c.pos?(d==c.pos&&(d++,h=0),c.recoverByDelete(h,d),tn&&console.log(p+this.stackID(c)+` (via recover-delete ${this.parser.getName(h)})`),U0(c,r)):(!s||s.score<c.score)&&(s=c)}return s}stackToTree(e){return e.close(),tt.build({buffer:gu.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Hh||(Hh=new WeakMap)).get(e);return t||Hh.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function U0(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class nP{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const Wh=n=>n;class rP{constructor(e){this.start=e.start,this.shift=e.shift||Wh,this.reduce=e.reduce||Wh,this.reuse=e.reuse||Wh,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class mu extends A1{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let c=0;c<e.repeatNodeCount;c++)t.push("");let r=Object.keys(e.topRules).map(c=>e.topRules[c][1]),s=[];for(let c=0;c<t.length;c++)s.push([]);function l(c,h,d){s[c].push([h,h.deserialize(String(d))])}if(e.nodeProps)for(let c of e.nodeProps){let h=c[0];typeof h=="string"&&(h=Ae[h]);for(let d=1;d<c.length;){let p=c[d++];if(p>=0)l(p,h,c[d++]);else{let m=c[d+-p];for(let v=-p;v>0;v--)l(c[d++],h,m);d++}}}this.nodeSet=new Cd(t.map((c,h)=>Ut.define({name:h>=this.minRepeatTerm?void 0:c,id:h,props:s[h],top:r.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=b1;let a=La(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let c=0;c<this.specializerSpecs.length;c++)this.specialized[c]=this.specializerSpecs[c].term;this.specializers=this.specializerSpecs.map(X0),this.states=La(e.states,Uint32Array),this.data=La(e.stateData),this.goto=La(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(c=>typeof c=="number"?new hs(a,c):c),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let s=new tP(this,e,t,r);for(let l of this.wrappers)s=l(s,e,t,r);return s}getGoto(e,t,r=!1){let s=this.goto;if(t>=s[0])return-1;for(let l=s[t+1];;){let a=s[l++],c=a&1,h=s[l++];if(c&&r)return h;for(let d=l+(a>>1);l<d;l++)if(s[l]==e)return h;if(c)return-1}}hasAction(e,t){let r=this.data;for(let s=0;s<2;s++)for(let l=this.stateSlot(e,s?2:1),a;;l+=3){if((a=r[l])==65535)if(r[l+1]==1)a=r[l=fr(r,l+2)];else{if(r[l+1]==2)return fr(r,l+2);break}if(a==t||a==0)return fr(r,l+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t?!0:null)}allActions(e,t){let r=this.stateSlot(e,4),s=r?t(r):void 0;for(let l=this.stateSlot(e,1);s==null;l+=3){if(this.data[l]==65535)if(this.data[l+1]==1)l=fr(this.data,l+2);else break;s=t(fr(this.data,l+1))}return s}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=fr(this.data,r+2);else break;if((this.data[r+2]&1)==0){let s=this.data[r+1];t.some((l,a)=>a&1&&l==s)||t.push(this.data[r],s)}}return t}configure(e){let t=Object.assign(Object.create(mu.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let s=e.tokenizers.find(l=>l.from==r);return s?s.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,s)=>{let l=e.specializers.find(c=>c.from==r.external);if(!l)return r;let a=Object.assign(Object.assign({},r),{external:l.to});return t.specializers[s]=X0(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let l of e.split(" ")){let a=t.indexOf(l);a>=0&&(r[a]=!0)}let s=null;for(let l=0;l<t.length;l++)if(!r[l])for(let a=this.dialects[t[l]],c;(c=this.data[a++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[c]=1;return new nP(e,r,s)}static deserialize(e){return new mu(e)}}function fr(n,e){return n[e]|n[e+1]<<16}function iP(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function X0(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}let sP=0,dr=class Hf{constructor(e,t,r,s){this.name=e,this.set=t,this.base=r,this.modified=s,this.id=sP++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof Hf&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let s=new Hf(r,[],null,[]);if(s.set.push(s),t)for(let l of t.set)s.set.push(l);return s}static defineModifier(e){let t=new yu(e);return r=>r.modified.indexOf(t)>-1?r:yu.get(r.base||r,r.modified.concat(t).sort((s,l)=>s.id-l.id))}},oP=0;class yu{constructor(e){this.name=e,this.instances=[],this.id=oP++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(c=>c.base==e&&lP(t,c.modified));if(r)return r;let s=[],l=new dr(e.name,s,e,t);for(let c of t)c.instances.push(l);let a=aP(t);for(let c of e.set)if(!c.modified.length)for(let h of a)s.push(yu.get(c,h));return l}}function lP(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function aP(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,s=e.length;r<s;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function M1(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let s of t.split(" "))if(s){let l=[],a=2,c=s;for(let m=0;;){if(c=="..."&&m>0&&m+3==s.length){a=1;break}let v=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!v)throw new RangeError("Invalid path: "+s);if(l.push(v[0]=="*"?"":v[0][0]=='"'?JSON.parse(v[0]):v[0]),m+=v[0].length,m==s.length)break;let x=s[m++];if(m==s.length&&x=="!"){a=0;break}if(x!="/")throw new RangeError("Invalid path: "+s);c=s.slice(m)}let h=l.length-1,d=l[h];if(!d)throw new RangeError("Invalid path: "+s);let p=new Xo(r,a,h>0?l.slice(0,h):null);e[d]=p.sort(e[d])}}return E1.add(e)}const E1=new Ae({combine(n,e){let t,r,s;for(;n||e;){if(!n||e&&n.depth>=e.depth?(s=e,e=e.next):(s=n,n=n.next),t&&t.mode==s.mode&&!s.context&&!t.context)continue;let l=new Xo(s.tags,s.mode,s.context);t?t.next=l:r=l,t=l}return r}});class Xo{constructor(e,t,r,s){this.tags=e,this.mode=t,this.context=r,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Xo.empty=new Xo([],2,null);function D1(n,e){let t=Object.create(null);for(let l of n)if(!Array.isArray(l.tag))t[l.tag.id]=l.class;else for(let a of l.tag)t[a.id]=l.class;let{scope:r,all:s=null}=e||{};return{style:l=>{let a=s;for(let c of l)for(let h of c.set){let d=t[h.id];if(d){a=a?a+" "+d:d;break}}return a},scope:r}}function uP(n,e){let t=null;for(let r of n){let s=r.style(e);s&&(t=t?t+" "+s:s)}return t}function cP(n,e,t,r=0,s=n.length){let l=new hP(r,Array.isArray(e)?e:[e],t);l.highlightRange(n.cursor(),r,s,"",l.highlighters),l.flush(s)}class hP{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,s,l){let{type:a,from:c,to:h}=e;if(c>=r||h<=t)return;a.isTop&&(l=this.highlighters.filter(x=>!x.scope||x.scope(a)));let d=s,p=fP(e)||Xo.empty,m=uP(l,p.tags);if(m&&(d&&(d+=" "),d+=m,p.mode==1&&(s+=(s?" ":"")+m)),this.startSpan(Math.max(t,c),d),p.opaque)return;let v=e.tree&&e.tree.prop(Ae.mounted);if(v&&v.overlay){let x=e.node.enter(v.overlay[0].from+c,1),k=this.highlighters.filter(b=>!b.scope||b.scope(v.tree.type)),S=e.firstChild();for(let b=0,C=c;;b++){let D=b<v.overlay.length?v.overlay[b]:null,B=D?D.from+c:h,_=Math.max(t,C),T=Math.min(r,B);if(_<T&&S)for(;e.from<T&&(this.highlightRange(e,_,T,s,l),this.startSpan(Math.min(T,e.to),d),!(e.to>=B||!e.nextSibling())););if(!D||B>r)break;C=D.to+c,C>t&&(this.highlightRange(x.cursor(),Math.max(t,D.from+c),Math.min(r,C),"",k),this.startSpan(Math.min(r,C),d))}S&&e.parent()}else if(e.firstChild()){v&&(s="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,s,l),this.startSpan(Math.min(r,e.to),d)}while(e.nextSibling());e.parent()}}}function fP(n){let e=n.type.prop(E1);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const ie=dr.define,Ia=ie(),Qr=ie(),K0=ie(Qr),q0=ie(Qr),$r=ie(),Ba=ie($r),Qh=ie($r),Xn=ie(),vi=ie(Xn),$n=ie(),Un=ie(),Wf=ie(),mo=ie(Wf),za=ie(),V={comment:Ia,lineComment:ie(Ia),blockComment:ie(Ia),docComment:ie(Ia),name:Qr,variableName:ie(Qr),typeName:K0,tagName:ie(K0),propertyName:q0,attributeName:ie(q0),className:ie(Qr),labelName:ie(Qr),namespace:ie(Qr),macroName:ie(Qr),literal:$r,string:Ba,docString:ie(Ba),character:ie(Ba),attributeValue:ie(Ba),number:Qh,integer:ie(Qh),float:ie(Qh),bool:ie($r),regexp:ie($r),escape:ie($r),color:ie($r),url:ie($r),keyword:$n,self:ie($n),null:ie($n),atom:ie($n),unit:ie($n),modifier:ie($n),operatorKeyword:ie($n),controlKeyword:ie($n),definitionKeyword:ie($n),moduleKeyword:ie($n),operator:Un,derefOperator:ie(Un),arithmeticOperator:ie(Un),logicOperator:ie(Un),bitwiseOperator:ie(Un),compareOperator:ie(Un),updateOperator:ie(Un),definitionOperator:ie(Un),typeOperator:ie(Un),controlOperator:ie(Un),punctuation:Wf,separator:ie(Wf),bracket:mo,angleBracket:ie(mo),squareBracket:ie(mo),paren:ie(mo),brace:ie(mo),content:Xn,heading:vi,heading1:ie(vi),heading2:ie(vi),heading3:ie(vi),heading4:ie(vi),heading5:ie(vi),heading6:ie(vi),contentSeparator:ie(Xn),list:ie(Xn),quote:ie(Xn),emphasis:ie(Xn),strong:ie(Xn),link:ie(Xn),monospace:ie(Xn),strikethrough:ie(Xn),inserted:ie(),deleted:ie(),changed:ie(),invalid:ie(),meta:za,documentMeta:ie(za),annotation:ie(za),processingInstruction:ie(za),definition:dr.defineModifier("definition"),constant:dr.defineModifier("constant"),function:dr.defineModifier("function"),standard:dr.defineModifier("standard"),local:dr.defineModifier("local"),special:dr.defineModifier("special")};for(let n in V){let e=V[n];e instanceof dr&&(e.name=n)}D1([{tag:V.link,class:"tok-link"},{tag:V.heading,class:"tok-heading"},{tag:V.emphasis,class:"tok-emphasis"},{tag:V.strong,class:"tok-strong"},{tag:V.keyword,class:"tok-keyword"},{tag:V.atom,class:"tok-atom"},{tag:V.bool,class:"tok-bool"},{tag:V.url,class:"tok-url"},{tag:V.labelName,class:"tok-labelName"},{tag:V.inserted,class:"tok-inserted"},{tag:V.deleted,class:"tok-deleted"},{tag:V.literal,class:"tok-literal"},{tag:V.string,class:"tok-string"},{tag:V.number,class:"tok-number"},{tag:[V.regexp,V.escape,V.special(V.string)],class:"tok-string2"},{tag:V.variableName,class:"tok-variableName"},{tag:V.local(V.variableName),class:"tok-variableName tok-local"},{tag:V.definition(V.variableName),class:"tok-variableName tok-definition"},{tag:V.special(V.variableName),class:"tok-variableName2"},{tag:V.definition(V.propertyName),class:"tok-propertyName tok-definition"},{tag:V.typeName,class:"tok-typeName"},{tag:V.namespace,class:"tok-namespace"},{tag:V.className,class:"tok-className"},{tag:V.macroName,class:"tok-macroName"},{tag:V.propertyName,class:"tok-propertyName"},{tag:V.operator,class:"tok-operator"},{tag:V.comment,class:"tok-comment"},{tag:V.meta,class:"tok-meta"},{tag:V.invalid,class:"tok-invalid"},{tag:V.punctuation,class:"tok-punctuation"}]);const ts=63,Y0=64,dP=1,pP=2,R1=3,gP=4,T1=5,mP=6,yP=7,N1=65,vP=66,xP=8,wP=9,kP=10,SP=11,bP=12,L1=13,OP=19,CP=20,PP=29,AP=33,MP=34,EP=47,DP=0,Ed=1,Qf=2,Ko=3,$f=4;class ki{constructor(e,t,r){this.parent=e,this.depth=t,this.type=r,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+r}}ki.top=new ki(null,-1,DP);function No(n,e){for(let t=0,r=e-n.pos-1;;r--,t++){let s=n.peek(r);if(xr(s)||s==-1)return t}}function Uf(n){return n==32||n==9}function xr(n){return n==10||n==13}function I1(n){return Uf(n)||xr(n)}function bi(n){return n<0||I1(n)}const RP=new rP({start:ki.top,reduce(n,e){return n.type==Ko&&(e==CP||e==MP)?n.parent:n},shift(n,e,t,r){if(e==R1)return new ki(n,No(r,r.pos),Ed);if(e==N1||e==T1)return new ki(n,No(r,r.pos),Qf);if(e==ts)return n.parent;if(e==OP||e==AP)return new ki(n,0,Ko);if(e==L1&&n.type==$f)return n.parent;if(e==EP){let s=/[1-9]/.exec(r.read(r.pos,t.pos));if(s)return new ki(n,n.depth+ +s[0],$f)}return n},hash(n){return n.hash}});function ys(n,e,t=0){return n.peek(t)==e&&n.peek(t+1)==e&&n.peek(t+2)==e&&bi(n.peek(t+3))}const TP=new Tu((n,e)=>{if(n.next==-1&&e.canShift(Y0))return n.acceptToken(Y0);let t=n.peek(-1);if((xr(t)||t<0)&&e.context.type!=Ko){if(ys(n,45))if(e.canShift(ts))n.acceptToken(ts);else return n.acceptToken(dP,3);if(ys(n,46))if(e.canShift(ts))n.acceptToken(ts);else return n.acceptToken(pP,3);let r=0;for(;n.next==32;)r++,n.advance();(r<e.context.depth||r==e.context.depth&&e.context.type==Ed&&(n.next!=45||!bi(n.peek(1))))&&n.next!=-1&&!xr(n.next)&&n.next!=35&&n.acceptToken(ts,-r)}},{contextual:!0}),NP=new Tu((n,e)=>{if(e.context.type==Ko){n.next==63&&(n.advance(),bi(n.next)&&n.acceptToken(yP));return}if(n.next==45)n.advance(),bi(n.next)&&n.acceptToken(e.context.type==Ed&&e.context.depth==No(n,n.pos-1)?gP:R1);else if(n.next==63)n.advance(),bi(n.next)&&n.acceptToken(e.context.type==Qf&&e.context.depth==No(n,n.pos-1)?mP:T1);else{let t=n.pos;for(;;)if(Uf(n.next)){if(n.pos==t)return;n.advance()}else if(n.next==33)B1(n);else if(n.next==38)Xf(n);else if(n.next==42){Xf(n);break}else if(n.next==39||n.next==34){if(Dd(n,!0))break;return}else if(n.next==91||n.next==123){if(!IP(n))return;break}else{z1(n,!0,!1,0);break}for(;Uf(n.next);)n.advance();if(n.next==58){if(n.pos==t&&e.canShift(PP))return;let r=n.peek(1);bi(r)&&n.acceptTokenTo(e.context.type==Qf&&e.context.depth==No(n,t)?vP:N1,t)}}},{contextual:!0});function LP(n){return n>32&&n<127&&n!=34&&n!=37&&n!=44&&n!=60&&n!=62&&n!=92&&n!=94&&n!=96&&n!=123&&n!=124&&n!=125}function G0(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function Z0(n,e){return n.next==37?(n.advance(),G0(n.next)&&n.advance(),G0(n.next)&&n.advance(),!0):LP(n.next)||e&&n.next==44?(n.advance(),!0):!1}function B1(n){if(n.advance(),n.next==60){for(n.advance();;)if(!Z0(n,!0)){n.next==62&&n.advance();break}}else for(;Z0(n,!1););}function Xf(n){for(n.advance();!bi(n.next)&&vu(n.tag)!="f";)n.advance()}function Dd(n,e){let t=n.next,r=!1,s=n.pos;for(n.advance();;){let l=n.next;if(l<0)break;if(n.advance(),l==t)if(l==39)if(n.next==39)n.advance();else break;else break;else if(l==92&&t==34)n.next>=0&&n.advance();else if(xr(l)){if(e)return!1;r=!0}else if(e&&n.pos>=s+1024)return!1}return!r}function IP(n){for(let e=[],t=n.pos+1024;;)if(n.next==91||n.next==123)e.push(n.next),n.advance();else if(n.next==39||n.next==34){if(!Dd(n,!0))return!1}else if(n.next==93||n.next==125){if(e[e.length-1]!=n.next-2)return!1;if(e.pop(),n.advance(),!e.length)return!0}else{if(n.next<0||n.pos>t||xr(n.next))return!1;n.advance()}}const BP="iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif";function vu(n){return n<33?"u":n>125?"s":BP[n-33]}function $h(n,e){let t=vu(n);return t!="u"&&!(e&&t=="f")}function z1(n,e,t,r){if(vu(n.next)=="s"||(n.next==63||n.next==58||n.next==45)&&$h(n.peek(1),t))n.advance();else return!1;let s=n.pos;for(;;){let l=n.next,a=0,c=r+1;for(;I1(l);){if(xr(l)){if(e)return!1;c=0}else c++;l=n.peek(++a)}if(!(l>=0&&(l==58?$h(n.peek(a+1),t):l==35?n.peek(a-1)!=32:$h(l,t)))||!t&&c<=r||c==0&&!t&&(ys(n,45,a)||ys(n,46,a)))break;if(e&&vu(l)=="f")return!1;for(let d=a;d>=0;d--)n.advance();if(e&&n.pos>s+1024)return!1}return!0}const zP=new Tu((n,e)=>{if(n.next==33)B1(n),n.acceptToken(bP);else if(n.next==38||n.next==42){let t=n.next==38?kP:SP;Xf(n),n.acceptToken(t)}else n.next==39||n.next==34?(Dd(n,!1),n.acceptToken(wP)):z1(n,!1,e.context.type==Ko,e.context.depth)&&n.acceptToken(xP)}),jP=new Tu((n,e)=>{let t=e.context.type==$f?e.context.depth:-1,r=n.pos;e:for(;;){let s=0,l=n.next;for(;l==32;)l=n.peek(++s);if(!s&&(ys(n,45,s)||ys(n,46,s))||!xr(l)&&(t<0&&(t=Math.max(e.context.depth+1,s)),s<t))break;for(;;){if(n.next<0)break e;let a=xr(n.next);if(n.advance(),a)continue e;r=n.pos}}n.acceptTokenTo(L1,r)}),FP=M1({DirectiveName:V.keyword,DirectiveContent:V.attributeValue,"DirectiveEnd DocEnd":V.meta,QuotedLiteral:V.string,BlockLiteralHeader:V.special(V.string),BlockLiteralContent:V.content,Literal:V.content,"Key/Literal Key/QuotedLiteral":V.definition(V.propertyName),"Anchor Alias":V.labelName,Tag:V.typeName,Comment:V.lineComment,": , -":V.separator,"?":V.punctuation,"[ ]":V.squareBracket,"{ }":V.brace}),_P=mu.deserialize({version:14,states:"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y",stateData:";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O",goto:",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv",nodeNames:" DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document",maxTerm:74,context:RP,nodeProps:[["isolate",-3,8,9,14,""],["openedBy",18,"[",32,"{"],["closedBy",19,"]",33,"}"]],propSources:[FP],skippedNodes:[0],repeatNodeCount:6,tokenData:"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P",tokenizers:[TP,NP,zP,jP,0,1],topRules:{Stream:[0,15]},tokenPrec:0});var Uh;const ss=new Ae;function VP(n){return ye.define({combine:n?e=>e.concat(n):void 0})}const HP=new Ae;class Dn{constructor(e,t,r=[],s=""){this.data=e,this.name=s,Te.prototype.hasOwnProperty("tree")||Object.defineProperty(Te.prototype,"tree",{get(){return Jn(this)}}),this.parser=t,this.extension=[xs.of(this),Te.languageData.of((l,a,c)=>{let h=J0(l,a,c),d=h.type.prop(ss);if(!d)return[];let p=l.facet(d),m=h.type.prop(HP);if(m){let v=h.resolve(a-h.from,c);for(let x of m)if(x.test(v,l)){let k=l.facet(x.facet);return x.type=="replace"?k:k.concat(p)}}return p})].concat(r)}isActiveAt(e,t,r=-1){return J0(e,t,r).type.prop(ss)==this.data}findRegions(e){let t=e.facet(xs);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],s=(l,a)=>{if(l.prop(ss)==this.data){r.push({from:a,to:a+l.length});return}let c=l.prop(Ae.mounted);if(c){if(c.tree.prop(ss)==this.data){if(c.overlay)for(let h of c.overlay)r.push({from:h.from+a,to:h.to+a});else r.push({from:a,to:a+l.length});return}else if(c.overlay){let h=r.length;if(s(c.tree,c.overlay[0].from+a),r.length>h)return}}for(let h=0;h<l.children.length;h++){let d=l.children[h];d instanceof tt&&s(d,l.positions[h]+a)}};return s(Jn(e),0),r}get allowsNesting(){return!0}}Dn.setState=st.define();function J0(n,e,t){let r=n.facet(xs),s=Jn(n).topNode;if(!r||r.allowsNesting)for(let l=s;l;l=l.enter(e,t,ht.ExcludeBuffers))l.type.isTop&&(s=l);return s}class xu extends Dn{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=VP(e.languageData);return new xu(t,e.parser.configure({props:[ss.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new xu(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Jn(n){let e=n.field(Dn.state,!1);return e?e.tree:tt.empty}class WP{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let yo=null;class wu{constructor(e,t,r=[],s,l,a,c,h){this.parser=e,this.state=t,this.fragments=r,this.tree=s,this.treeLen=l,this.viewport=a,this.skipped=c,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new wu(e,t,[],tt.empty,0,r,[],null)}startParse(){return this.parser.startParse(new WP(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=tt.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Oi.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Oi.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=yo;yo=this;try{return e()}finally{yo=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=ey(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:s,treeLen:l,viewport:a,skipped:c}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((d,p,m,v)=>h.push({fromA:d,toA:p,fromB:m,toB:v})),r=Oi.applyChanges(r,h),s=tt.empty,l=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){c=[];for(let d of this.skipped){let p=e.mapPos(d.from,1),m=e.mapPos(d.to,-1);p<m&&c.push({from:p,to:m})}}}return new wu(this.parser,t,r,s,l,a,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:s,to:l}=this.skipped[r];s<e.to&&l>e.from&&(this.fragments=ey(this.fragments,s,l),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends A1{createParse(t,r,s){let l=s[0].from,a=s[s.length-1].to;return{parsedPos:l,advance(){let h=yo;if(h){for(let d of s)h.tempSkipped.push(d);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=a,new tt(Ut.none,[],[],a-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return yo}}function ey(n,e,t){return Oi.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class vs{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new vs(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=wu.create(e.facet(xs).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new vs(r)}}Dn.state=Ei.define({create:vs.init,update(n,e){for(let t of e.effects)if(t.is(Dn.setState))return t.value;return e.startState.facet(xs)!=e.state.facet(xs)?vs.init(e.state):n.apply(e)}});let j1=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(j1=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Xh=typeof navigator<"u"&&(!((Uh=navigator.scheduling)===null||Uh===void 0)&&Uh.isInputPending)?()=>navigator.scheduling.isInputPending():null,QP=Nn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Dn.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Dn.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=j1(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:s}}=this.view,l=r.field(Dn.state);if(l.tree==l.context.tree&&l.context.isDone(s+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!Xh?Math.max(25,e.timeRemaining()-5):1e9),c=l.context.treeLen<s&&r.doc.length>s+1e3,h=l.context.work(()=>Xh&&Xh()||Date.now()>a,s+(c?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:Dn.setState.of(new vs(l.context))})),this.chunkBudget>0&&!(h&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>Yn(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),xs=ye.define({combine(n){return n.length?n[0]:null},enables:n=>[Dn.state,QP,Oe.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class $P{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const UP=ye.define(),Rd=ye.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function ku(n){let e=n.facet(Rd);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Su(n,e){let t="",r=n.tabSize,s=n.facet(Rd)[0];if(s=="	"){for(;e>=r;)t+="	",e-=r;s=" "}for(let l=0;l<e;l++)t+=s;return t}function F1(n,e){n instanceof Te&&(n=new Nu(n));for(let r of n.state.facet(UP)){let s=r(n,e);if(s!==void 0)return s}let t=Jn(n.state);return t.length>=e?XP(n,t,e):null}class Nu{constructor(e,t={}){this.state=e,this.options=t,this.unit=ku(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:l}=this.options;return s!=null&&s>=r.from&&s<=r.to?l&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:r.text.slice(s-r.from),from:s}:{text:r.text.slice(0,s-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:s}=this.lineAt(e,t);return r.slice(e-s,Math.min(r.length,e+100-s))}column(e,t=1){let{text:r,from:s}=this.lineAt(e,t),l=this.countColumn(r,e-s),a=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return a>-1&&(l+=a-this.countColumn(r,r.search(/\S|$/))),l}countColumn(e,t=e.length){return Mu(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:s}=this.lineAt(e,t),l=this.options.overrideIndentation;if(l){let a=l(s);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const _1=new Ae;function XP(n,e,t){let r=e.resolveStack(t),s=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(s!=r.node){let l=[];for(let a=s;a&&!(a.from<r.node.from||a.to>r.node.to||a.from==r.node.from&&a.type==r.node.type);a=a.parent)l.push(a);for(let a=l.length-1;a>=0;a--)r={node:l[a],next:r}}return V1(r,n,t)}function V1(n,e,t){for(let r=n;r;r=r.next){let s=qP(r.node);if(s)return s(Td.create(e,t,r))}return 0}function KP(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function qP(n){let e=n.type.prop(_1);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Ae.closedBy))){let s=n.lastChild,l=s&&r.indexOf(s.name)>-1;return a=>H1(a,!0,1,void 0,l&&!KP(a)?s.from:void 0)}return n.parent==null?YP:null}function YP(){return 0}class Td extends Nu{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new Td(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(GP(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return V1(this.context.next,this.base,this.pos)}}function GP(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function ZP(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,l=n.state.doc.lineAt(t.from),a=s==null||s<=l.from?l.to:Math.min(l.to,s);for(let c=t.to;;){let h=e.childAfter(c);if(!h||h==r)return null;if(!h.type.isSkipped){if(h.from>=a)return null;let d=/^ */.exec(l.text.slice(t.to-l.from))[0].length;return{from:t.from,to:t.to+d}}c=h.to}}function ty({closing:n,align:e=!0,units:t=1}){return r=>H1(r,e,t,n)}function H1(n,e,t,r,s){let l=n.textAfter,a=l.match(/^\s*/)[0].length,c=r&&l.slice(a,a+r.length)==r||s==n.pos+a,h=e?ZP(n):null;return h?c?n.column(h.from):n.column(h.to):n.baseIndent+(c?0:n.unit*t)}const JP=new Ae;function eA(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}class Lu{constructor(e,t){this.specs=e;let r;function s(c){let h=Zr.newName();return(r||(r=Object.create(null)))["."+h]=c,h}const l=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,a=t.scope;this.scope=a instanceof Dn?c=>c.prop(ss)==a.data:a?c=>c==a:void 0,this.style=D1(e.map(c=>({tag:c.tag,class:c.class||s(Object.assign({},c,{tag:null}))})),{all:l}).style,this.module=r?new Zr(r):null,this.themeType=t.themeType}static define(e,t){return new Lu(e,t||{})}}const Kf=ye.define(),tA=ye.define({combine(n){return n.length?[n[0]]:null}});function Kh(n){let e=n.facet(Kf);return e.length?e:n.facet(tA)}function nA(n,e){let t=[iA],r;return n instanceof Lu&&(n.module&&t.push(Oe.styleModule.of(n.module)),r=n.themeType),r?t.push(Kf.computeN([Oe.darkTheme],s=>s.facet(Oe.darkTheme)==(r=="dark")?[n]:[])):t.push(Kf.of(n)),t}class rA{constructor(e){this.markCache=Object.create(null),this.tree=Jn(e.state),this.decorations=this.buildDeco(e,Kh(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Jn(e.state),r=Kh(e.state),s=r!=Kh(e.startState),{viewport:l}=e.view,a=e.changes.mapPos(this.decoratedTo,1);t.length<l.to&&!s&&t.type==this.tree.type&&a>=l.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=l.to)}buildDeco(e,t){if(!t||!this.tree.length)return Ke.none;let r=new Fo;for(let{from:s,to:l}of e.visibleRanges)cP(this.tree,t,(a,c,h)=>{r.add(a,c,this.markCache[h]||(this.markCache[h]=Ke.mark({class:h})))},s,l);return r.finish()}}const iA=Au.high(Nn.fromClass(rA,{decorations:n=>n.decorations})),sA=1e4,oA="()[]{}",lA=new Ae;function qf(n,e,t){let r=n.prop(e<0?Ae.openedBy:Ae.closedBy);if(r)return r;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function Yf(n){let e=n.type.prop(lA);return e?e(n.node):n}function os(n,e,t,r={}){let s=r.maxScanDistance||sA,l=r.brackets||oA,a=Jn(n),c=a.resolveInner(e,t);for(let h=c;h;h=h.parent){let d=qf(h.type,t,l);if(d&&h.from<h.to){let p=Yf(h);if(p&&(t>0?e>=p.from&&e<p.to:e>p.from&&e<=p.to))return aA(n,e,t,h,p,d,l)}}return uA(n,e,t,a,c.type,s,l)}function aA(n,e,t,r,s,l,a){let c=r.parent,h={from:s.from,to:s.to},d=0,p=c==null?void 0:c.cursor();if(p&&(t<0?p.childBefore(r.from):p.childAfter(r.to)))do if(t<0?p.to<=r.from:p.from>=r.to){if(d==0&&l.indexOf(p.type.name)>-1&&p.from<p.to){let m=Yf(p);return{start:h,end:m?{from:m.from,to:m.to}:void 0,matched:!0}}else if(qf(p.type,t,a))d++;else if(qf(p.type,-t,a)){if(d==0){let m=Yf(p);return{start:h,end:m&&m.from<m.to?{from:m.from,to:m.to}:void 0,matched:!1}}d--}}while(t<0?p.prevSibling():p.nextSibling());return{start:h,matched:!1}}function uA(n,e,t,r,s,l,a){let c=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),h=a.indexOf(c);if(h<0||h%2==0!=t>0)return null;let d={from:t<0?e-1:e,to:t>0?e+1:e},p=n.doc.iterRange(e,t>0?n.doc.length:0),m=0;for(let v=0;!p.next().done&&v<=l;){let x=p.value;t<0&&(v+=x.length);let k=e+v*t;for(let S=t>0?0:x.length-1,b=t>0?x.length:-1;S!=b;S+=t){let C=a.indexOf(x[S]);if(!(C<0||r.resolveInner(k+S,1).type!=s))if(C%2==0==t>0)m++;else{if(m==1)return{start:d,end:{from:k+S,to:k+S+1},matched:C>>1==h>>1};m--}}t>0&&(v+=x.length)}return p.done?{start:d,matched:!1}:null}const cA=Object.create(null),ny=[Ut.none],ry=[],iy=Object.create(null),hA=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])hA[n]=fA(cA,e);function qh(n,e){ry.indexOf(n)>-1||(ry.push(n),console.warn(e))}function fA(n,e){let t=[];for(let c of e.split(" ")){let h=[];for(let d of c.split(".")){let p=n[d]||V[d];p?typeof p=="function"?h.length?h=h.map(p):qh(d,`Modifier ${d} used at start of tag`):h.length?qh(d,`Tag ${d} used as modifier`):h=Array.isArray(p)?p:[p]:qh(d,`Unknown highlighting tag ${d}`)}for(let d of h)t.push(d)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),s=r+" "+t.map(c=>c.id),l=iy[s];if(l)return l.id;let a=iy[s]=Ut.define({id:ny.length,name:r,props:[M1({[r]:t})]});return ny.push(a),a.id}Xe.RTL,Xe.LTR;const dA=xu.define({name:"yaml",parser:_P.configure({props:[_1.add({Stream:n=>{for(let e=n.node.resolve(n.pos,-1);e&&e.to>=n.pos;e=e.parent){if(e.name=="BlockLiteralContent"&&e.from<e.to)return n.baseIndentFor(e);if(e.name=="BlockLiteral")return n.baseIndentFor(e)+n.unit;if(e.name=="BlockSequence"||e.name=="BlockMapping")return n.column(e.from,1);if(e.name=="QuotedLiteral")return null;if(e.name=="Literal"){let t=n.column(e.from,1);if(t==n.lineIndent(e.from,1))return t;if(e.to>n.pos)return null}}return null},FlowMapping:ty({closing:"}"}),FlowSequence:ty({closing:"]"})}),JP.add({"FlowMapping FlowSequence":eA,"Item Pair BlockLiteral":(n,e)=>({from:e.doc.lineAt(n.from).to,to:n.to})})]}),languageData:{commentTokens:{line:"#"},indentOnInput:/^\s*[\]\}]$/}});function pA(){return new $P(dA)}const gA="#e5c07b",sy="#e06c75",mA="#56b6c2",yA="#ffffff",Za="#abb2bf",Gf="#7d8799",vA="#61afef",xA="#98c379",oy="#d19a66",wA="#c678dd",kA="#21252b",ly="#2c313a",ay="#282c34",Yh="#353a42",SA="#3E4451",uy="#528bff",bA=Oe.theme({"&":{color:Za,backgroundColor:ay},".cm-content":{caretColor:uy},".cm-cursor, .cm-dropCursor":{borderLeftColor:uy},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:SA},".cm-panels":{backgroundColor:kA,color:Za},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:ay,color:Gf,border:"none"},".cm-activeLineGutter":{backgroundColor:ly},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Yh},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Yh,borderBottomColor:Yh},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:ly,color:Za}}},{dark:!0}),OA=Lu.define([{tag:V.keyword,color:wA},{tag:[V.name,V.deleted,V.character,V.propertyName,V.macroName],color:sy},{tag:[V.function(V.variableName),V.labelName],color:vA},{tag:[V.color,V.constant(V.name),V.standard(V.name)],color:oy},{tag:[V.definition(V.name),V.separator],color:Za},{tag:[V.typeName,V.className,V.number,V.changed,V.annotation,V.modifier,V.self,V.namespace],color:gA},{tag:[V.operator,V.operatorKeyword,V.url,V.escape,V.regexp,V.link,V.special(V.string)],color:mA},{tag:[V.meta,V.comment],color:Gf},{tag:V.strong,fontWeight:"bold"},{tag:V.emphasis,fontStyle:"italic"},{tag:V.strikethrough,textDecoration:"line-through"},{tag:V.link,color:Gf,textDecoration:"underline"},{tag:V.heading,fontWeight:"bold",color:sy},{tag:[V.atom,V.bool,V.special(V.variableName)],color:oy},{tag:[V.processingInstruction,V.string,V.inserted],color:xA},{tag:V.invalid,color:yA}]),CA=[bA,nA(OA)],PA=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=Ld(n.state,t.from);return r.line?AA(n):r.block?EA(n):!1};function Nd(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(r(t.update(s)),!0):!1}}const AA=Nd(TA,0),MA=Nd(W1,0),EA=Nd((n,e)=>W1(n,e,RA(e)),0);function Ld(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const vo=50;function DA(n,{open:e,close:t},r,s){let l=n.sliceDoc(r-vo,r),a=n.sliceDoc(s,s+vo),c=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(a)[0].length,d=l.length-c;if(l.slice(d-e.length,d)==e&&a.slice(h,h+t.length)==t)return{open:{pos:r-c,margin:c&&1},close:{pos:s+h,margin:h&&1}};let p,m;s-r<=2*vo?p=m=n.sliceDoc(r,s):(p=n.sliceDoc(r,r+vo),m=n.sliceDoc(s-vo,s));let v=/^\s*/.exec(p)[0].length,x=/\s*$/.exec(m)[0].length,k=m.length-x-t.length;return p.slice(v,v+e.length)==e&&m.slice(k,k+t.length)==t?{open:{pos:r+v+e.length,margin:/\s/.test(p.charAt(v+e.length))?1:0},close:{pos:s-x-t.length,margin:/\s/.test(m.charAt(k-1))?1:0}}:null}function RA(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),s=t.to<=r.to?r:n.doc.lineAt(t.to);s.from>r.from&&s.from==t.to&&(s=t.to==r.to+1?r:n.doc.lineAt(t.to-1));let l=e.length-1;l>=0&&e[l].to>r.from?e[l].to=s.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:s.to})}return e}function W1(n,e,t=e.selection.ranges){let r=t.map(l=>Ld(e,l.from).block);if(!r.every(l=>l))return null;let s=t.map((l,a)=>DA(e,r[a],l.from,l.to));if(n!=2&&!s.every(l=>l))return{changes:e.changes(t.map((l,a)=>s[a]?[]:[{from:l.from,insert:r[a].open+" "},{from:l.to,insert:" "+r[a].close}]))};if(n!=1&&s.some(l=>l)){let l=[];for(let a=0,c;a<s.length;a++)if(c=s[a]){let h=r[a],{open:d,close:p}=c;l.push({from:d.pos-h.open.length,to:d.pos+d.margin},{from:p.pos-p.margin,to:p.pos+h.close.length})}return{changes:l}}return null}function TA(n,e,t=e.selection.ranges){let r=[],s=-1;for(let{from:l,to:a}of t){let c=r.length,h=1e9,d=Ld(e,l).line;if(d){for(let p=l;p<=a;){let m=e.doc.lineAt(p);if(m.from>s&&(l==a||a>m.from)){s=m.from;let v=/^\s*/.exec(m.text)[0].length,x=v==m.length,k=m.text.slice(v,v+d.length)==d?v:-1;v<m.text.length&&v<h&&(h=v),r.push({line:m,comment:k,token:d,indent:v,empty:x,single:!1})}p=m.to+1}if(h<1e9)for(let p=c;p<r.length;p++)r[p].indent<r[p].line.text.length&&(r[p].indent=h);r.length==c+1&&(r[c].single=!0)}}if(n!=2&&r.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:c,token:h,indent:d,empty:p,single:m}of r)(m||!p)&&l.push({from:c.from+d,insert:h+" "});let a=e.changes(l);return{changes:a,selection:e.selection.map(a,1)}}else if(n!=1&&r.some(l=>l.comment>=0)){let l=[];for(let{line:a,comment:c,token:h}of r)if(c>=0){let d=a.from+c,p=d+h.length;a.text[p-a.from]==" "&&p++,l.push({from:d,to:p})}return{changes:l}}return null}function Os(n,e){return Z.create(n.ranges.map(e),n.mainIndex)}function In(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Bn({state:n,dispatch:e},t){let r=Os(n.selection,t);return r.eq(n.selection,!0)?!1:(e(In(n,r)),!0)}function Iu(n,e){return Z.cursor(e?n.to:n.from)}function Q1(n,e){return Bn(n,t=>t.empty?n.moveByChar(t,e):Iu(t,e))}function Et(n){return n.textDirectionAt(n.state.selection.main.head)==Xe.LTR}const $1=n=>Q1(n,!Et(n)),U1=n=>Q1(n,Et(n));function X1(n,e){return Bn(n,t=>t.empty?n.moveByGroup(t,e):Iu(t,e))}const NA=n=>X1(n,!Et(n)),LA=n=>X1(n,Et(n));function IA(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Bu(n,e,t){let r=Jn(n).resolveInner(e.head),s=t?Ae.closedBy:Ae.openedBy;for(let h=e.head;;){let d=t?r.childAfter(h):r.childBefore(h);if(!d)break;IA(n,d,s)?r=d:h=t?d.to:d.from}let l=r.type.prop(s),a,c;return l&&(a=t?os(n,r.from,1):os(n,r.to,-1))&&a.matched?c=t?a.end.to:a.end.from:c=t?r.to:r.from,Z.cursor(c,t?-1:1)}const BA=n=>Bn(n,e=>Bu(n.state,e,!Et(n))),zA=n=>Bn(n,e=>Bu(n.state,e,Et(n)));function K1(n,e){return Bn(n,t=>{if(!t.empty)return Iu(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const q1=n=>K1(n,!1),Y1=n=>K1(n,!0);function G1(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,s;if(e){for(let l of n.state.facet(Oe.scrollMargins)){let a=l(n);a!=null&&a.top&&(t=Math.max(a==null?void 0:a.top,t)),a!=null&&a.bottom&&(r=Math.max(a==null?void 0:a.bottom,r))}s=n.scrollDOM.clientHeight-t-r}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function Z1(n,e){let t=G1(n),{state:r}=n,s=Os(r.selection,a=>a.empty?n.moveVertically(a,e,t.height):Iu(a,e));if(s.eq(r.selection))return!1;let l;if(t.selfScroll){let a=n.coordsAtPos(r.selection.main.head),c=n.scrollDOM.getBoundingClientRect(),h=c.top+t.marginTop,d=c.bottom-t.marginBottom;a&&a.top>h&&a.bottom<d&&(l=Oe.scrollIntoView(s.main.head,{y:"start",yMargin:a.top-h}))}return n.dispatch(In(r,s),{effects:l}),!0}const cy=n=>Z1(n,!1),Zf=n=>Z1(n,!0);function ri(n,e,t){let r=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?r.to:r.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==r.from&&r.length){let l=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;l&&e.head!=r.from+l&&(s=Z.cursor(r.from+l))}return s}const jA=n=>Bn(n,e=>ri(n,e,!0)),FA=n=>Bn(n,e=>ri(n,e,!1)),_A=n=>Bn(n,e=>ri(n,e,!Et(n))),VA=n=>Bn(n,e=>ri(n,e,Et(n))),HA=n=>Bn(n,e=>Z.cursor(n.lineBlockAt(e.head).from,1)),WA=n=>Bn(n,e=>Z.cursor(n.lineBlockAt(e.head).to,-1));function QA(n,e,t){let r=!1,s=Os(n.selection,l=>{let a=os(n,l.head,-1)||os(n,l.head,1)||l.head>0&&os(n,l.head-1,1)||l.head<n.doc.length&&os(n,l.head+1,-1);if(!a||!a.end)return l;r=!0;let c=a.start.from==l.head?a.end.to:a.end.from;return Z.cursor(c)});return r?(e(In(n,s)),!0):!1}const $A=({state:n,dispatch:e})=>QA(n,e);function yn(n,e){let t=Os(n.state.selection,r=>{let s=e(r);return Z.range(r.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(In(n.state,t)),!0)}function J1(n,e){return yn(n,t=>n.moveByChar(t,e))}const ex=n=>J1(n,!Et(n)),tx=n=>J1(n,Et(n));function nx(n,e){return yn(n,t=>n.moveByGroup(t,e))}const UA=n=>nx(n,!Et(n)),XA=n=>nx(n,Et(n)),KA=n=>yn(n,e=>Bu(n.state,e,!Et(n))),qA=n=>yn(n,e=>Bu(n.state,e,Et(n)));function rx(n,e){return yn(n,t=>n.moveVertically(t,e))}const ix=n=>rx(n,!1),sx=n=>rx(n,!0);function ox(n,e){return yn(n,t=>n.moveVertically(t,e,G1(n).height))}const hy=n=>ox(n,!1),fy=n=>ox(n,!0),YA=n=>yn(n,e=>ri(n,e,!0)),GA=n=>yn(n,e=>ri(n,e,!1)),ZA=n=>yn(n,e=>ri(n,e,!Et(n))),JA=n=>yn(n,e=>ri(n,e,Et(n))),eM=n=>yn(n,e=>Z.cursor(n.lineBlockAt(e.head).from)),tM=n=>yn(n,e=>Z.cursor(n.lineBlockAt(e.head).to)),dy=({state:n,dispatch:e})=>(e(In(n,{anchor:0})),!0),py=({state:n,dispatch:e})=>(e(In(n,{anchor:n.doc.length})),!0),gy=({state:n,dispatch:e})=>(e(In(n,{anchor:n.selection.main.anchor,head:0})),!0),my=({state:n,dispatch:e})=>(e(In(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),nM=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),rM=({state:n,dispatch:e})=>{let t=zu(n).map(({from:r,to:s})=>Z.range(r,Math.min(s+1,n.doc.length)));return e(n.update({selection:Z.create(t),userEvent:"select"})),!0},iM=({state:n,dispatch:e})=>{let t=Os(n.selection,r=>{let s=Jn(n),l=s.resolveStack(r.from,1);if(r.empty){let a=s.resolveStack(r.from,-1);a.node.from>=l.node.from&&a.node.to<=l.node.to&&(l=a)}for(let a=l;a;a=a.next){let{node:c}=a;if((c.from<r.from&&c.to>=r.to||c.to>r.to&&c.from<=r.from)&&a.next)return Z.range(c.to,c.from)}return r});return t.eq(n.selection)?!1:(e(In(n,t)),!0)};function lx(n,e){let{state:t}=n,r=t.selection,s=t.selection.ranges.slice();for(let l of t.selection.ranges){let a=t.doc.lineAt(l.head);if(e?a.to<n.state.doc.length:a.from>0)for(let c=l;;){let h=n.moveVertically(c,e);if(h.head<a.from||h.head>a.to){s.some(d=>d.head==h.head)||s.push(h);break}else{if(h.head==c.head)break;c=h}}}return s.length==r.ranges.length?!1:(n.dispatch(In(t,Z.create(s,s.length-1))),!0)}const sM=n=>lx(n,!1),oM=n=>lx(n,!0),lM=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=Z.create([t.main]):t.main.empty||(r=Z.create([Z.cursor(t.main.head)])),r?(e(In(n,r)),!0):!1};function sl(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,s=r.changeByRange(l=>{let{from:a,to:c}=l;if(a==c){let h=e(l);h<a?(t="delete.backward",h=ja(n,h,!1)):h>a&&(t="delete.forward",h=ja(n,h,!0)),a=Math.min(a,h),c=Math.max(c,h)}else a=ja(n,a,!1),c=ja(n,c,!0);return a==c?{range:l}:{changes:{from:a,to:c},range:Z.cursor(a,a<l.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(r.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Oe.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function ja(n,e,t){if(n instanceof Oe)for(let r of n.state.facet(Oe.atomicRanges).map(s=>s(n)))r.between(e,e,(s,l)=>{s<e&&l>e&&(e=t?l:s)});return e}const ax=(n,e,t)=>sl(n,r=>{let s=r.from,{state:l}=n,a=l.doc.lineAt(s),c,h;if(t&&!e&&s>a.from&&s<a.from+200&&!/[^ \t]/.test(c=a.text.slice(0,s-a.from))){if(c[c.length-1]=="	")return s-1;let d=Mu(c,l.tabSize),p=d%ku(l)||ku(l);for(let m=0;m<p&&c[c.length-1-m]==" ";m++)s--;h=s}else h=Lt(a.text,s-a.from,e,e)+a.from,h==s&&a.number!=(e?l.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(h-a.from,s-a.from))&&(h=Lt(a.text,h-a.from,!1,!1)+a.from);return h}),Jf=n=>ax(n,!1,!0),ux=n=>ax(n,!0,!1),cx=(n,e)=>sl(n,t=>{let r=t.head,{state:s}=n,l=s.doc.lineAt(r),a=s.charCategorizer(r);for(let c=null;;){if(r==(e?l.to:l.from)){r==t.head&&l.number!=(e?s.doc.lines:1)&&(r+=e?1:-1);break}let h=Lt(l.text,r-l.from,e)+l.from,d=l.text.slice(Math.min(r,h)-l.from,Math.max(r,h)-l.from),p=a(d);if(c!=null&&p!=c)break;(d!=" "||r!=t.head)&&(c=p),r=h}return r}),hx=n=>cx(n,!1),aM=n=>cx(n,!0),uM=n=>sl(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),cM=n=>sl(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),hM=n=>sl(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),fM=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:Ee.of(["",""])},range:Z.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},dM=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let s=r.from,l=n.doc.lineAt(s),a=s==l.from?s-1:Lt(l.text,s-l.from,!1)+l.from,c=s==l.to?s+1:Lt(l.text,s-l.from,!0)+l.from;return{changes:{from:a,to:c,insert:n.doc.slice(s,c).append(n.doc.slice(a,s))},range:Z.cursor(c)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function zu(n){let e=[],t=-1;for(let r of n.selection.ranges){let s=n.doc.lineAt(r.from),l=n.doc.lineAt(r.to);if(!r.empty&&r.to==l.from&&(l=n.doc.lineAt(r.to-1)),t>=s.number){let a=e[e.length-1];a.to=l.to,a.ranges.push(r)}else e.push({from:s.from,to:l.to,ranges:[r]});t=l.number+1}return e}function fx(n,e,t){if(n.readOnly)return!1;let r=[],s=[];for(let l of zu(n)){if(t?l.to==n.doc.length:l.from==0)continue;let a=n.doc.lineAt(t?l.to+1:l.from-1),c=a.length+1;if(t){r.push({from:l.to,to:a.to},{from:l.from,insert:a.text+n.lineBreak});for(let h of l.ranges)s.push(Z.range(Math.min(n.doc.length,h.anchor+c),Math.min(n.doc.length,h.head+c)))}else{r.push({from:a.from,to:l.from},{from:l.to,insert:n.lineBreak+a.text});for(let h of l.ranges)s.push(Z.range(h.anchor-c,h.head-c))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:Z.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const pM=({state:n,dispatch:e})=>fx(n,e,!1),gM=({state:n,dispatch:e})=>fx(n,e,!0);function dx(n,e,t){if(n.readOnly)return!1;let r=[];for(let s of zu(n))t?r.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):r.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const mM=({state:n,dispatch:e})=>dx(n,e,!1),yM=({state:n,dispatch:e})=>dx(n,e,!0),vM=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(zu(e).map(({from:s,to:l})=>(s>0?s--:l<e.doc.length&&l++,{from:s,to:l}))),r=Os(e.selection,s=>{let l;if(n.lineWrapping){let a=n.lineBlockAt(s.head),c=n.coordsAtPos(s.head,s.assoc||1);c&&(l=a.bottom+n.documentTop-c.bottom+n.defaultLineHeight/2)}return n.moveVertically(s,!0,l)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function xM(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=Jn(n).resolveInner(e),r=t.childBefore(e),s=t.childAfter(e),l;return r&&s&&r.to<=e&&s.from>=e&&(l=r.type.prop(Ae.closedBy))&&l.indexOf(s.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(r.to,s.from))?{from:r.to,to:s.from}:null}const yy=px(!1),wM=px(!0);function px(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(s=>{let{from:l,to:a}=s,c=e.doc.lineAt(l),h=!n&&l==a&&xM(e,l);n&&(l=a=(a<=c.to?c:e.doc.lineAt(a)).to);let d=new Nu(e,{simulateBreak:l,simulateDoubleBreak:!!h}),p=F1(d,l);for(p==null&&(p=Mu(/^\s*/.exec(e.doc.lineAt(l).text)[0],e.tabSize));a<c.to&&/\s/.test(c.text[a-c.from]);)a++;h?{from:l,to:a}=h:l>c.from&&l<c.from+100&&!/\S/.test(c.text.slice(0,l))&&(l=c.from);let m=["",Su(e,p)];return h&&m.push(Su(e,d.lineIndent(c.from,-1))),{changes:{from:l,to:a,insert:Ee.of(m)},range:Z.cursor(l+1+m[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Id(n,e){let t=-1;return n.changeByRange(r=>{let s=[];for(let a=r.from;a<=r.to;){let c=n.doc.lineAt(a);c.number>t&&(r.empty||r.to>c.from)&&(e(c,s,r),t=c.number),a=c.to+1}let l=n.changes(s);return{changes:s,range:Z.range(l.mapPos(r.anchor,1),l.mapPos(r.head,1))}})}const kM=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new Nu(n,{overrideIndentation:l=>{let a=t[l];return a??-1}}),s=Id(n,(l,a,c)=>{let h=F1(r,l.from);if(h==null)return;/\S/.test(l.text)||(h=0);let d=/^\s*/.exec(l.text)[0],p=Su(n,h);(d!=p||c.from<l.from+d.length)&&(t[l.from]=h,a.push({from:l.from,to:l.from+d.length,insert:p}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},SM=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Id(n,(t,r)=>{r.push({from:t.from,insert:n.facet(Rd)})}),{userEvent:"input.indent"})),!0),bM=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Id(n,(t,r)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let l=Mu(s,n.tabSize),a=0,c=Su(n,Math.max(0,l-ku(n)));for(;a<s.length&&a<c.length&&s.charCodeAt(a)==c.charCodeAt(a);)a++;r.push({from:t.from+a,to:t.from+s.length,insert:c.slice(a)})}),{userEvent:"delete.dedent"})),!0),OM=n=>(n.setTabFocusMode(),!0),CM=[{key:"Ctrl-b",run:$1,shift:ex,preventDefault:!0},{key:"Ctrl-f",run:U1,shift:tx},{key:"Ctrl-p",run:q1,shift:ix},{key:"Ctrl-n",run:Y1,shift:sx},{key:"Ctrl-a",run:HA,shift:eM},{key:"Ctrl-e",run:WA,shift:tM},{key:"Ctrl-d",run:ux},{key:"Ctrl-h",run:Jf},{key:"Ctrl-k",run:uM},{key:"Ctrl-Alt-h",run:hx},{key:"Ctrl-o",run:fM},{key:"Ctrl-t",run:dM},{key:"Ctrl-v",run:Zf}],PM=[{key:"ArrowLeft",run:$1,shift:ex,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:NA,shift:UA,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:_A,shift:ZA,preventDefault:!0},{key:"ArrowRight",run:U1,shift:tx,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:LA,shift:XA,preventDefault:!0},{mac:"Cmd-ArrowRight",run:VA,shift:JA,preventDefault:!0},{key:"ArrowUp",run:q1,shift:ix,preventDefault:!0},{mac:"Cmd-ArrowUp",run:dy,shift:gy},{mac:"Ctrl-ArrowUp",run:cy,shift:hy},{key:"ArrowDown",run:Y1,shift:sx,preventDefault:!0},{mac:"Cmd-ArrowDown",run:py,shift:my},{mac:"Ctrl-ArrowDown",run:Zf,shift:fy},{key:"PageUp",run:cy,shift:hy},{key:"PageDown",run:Zf,shift:fy},{key:"Home",run:FA,shift:GA,preventDefault:!0},{key:"Mod-Home",run:dy,shift:gy},{key:"End",run:jA,shift:YA,preventDefault:!0},{key:"Mod-End",run:py,shift:my},{key:"Enter",run:yy,shift:yy},{key:"Mod-a",run:nM},{key:"Backspace",run:Jf,shift:Jf,preventDefault:!0},{key:"Delete",run:ux,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:hx,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:aM,preventDefault:!0},{mac:"Mod-Backspace",run:cM,preventDefault:!0},{mac:"Mod-Delete",run:hM,preventDefault:!0}].concat(CM.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),AM=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:BA,shift:KA},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:zA,shift:qA},{key:"Alt-ArrowUp",run:pM},{key:"Shift-Alt-ArrowUp",run:mM},{key:"Alt-ArrowDown",run:gM},{key:"Shift-Alt-ArrowDown",run:yM},{key:"Mod-Alt-ArrowUp",run:sM},{key:"Mod-Alt-ArrowDown",run:oM},{key:"Escape",run:lM},{key:"Mod-Enter",run:wM},{key:"Alt-l",mac:"Ctrl-l",run:rM},{key:"Mod-i",run:iM,preventDefault:!0},{key:"Mod-[",run:bM},{key:"Mod-]",run:SM},{key:"Mod-Alt-\\",run:kM},{key:"Shift-Mod-k",run:vM},{key:"Shift-Mod-\\",run:$A},{key:"Mod-/",run:PA},{key:"Alt-A",run:MA},{key:"Ctrl-m",mac:"Shift-Alt-m",run:OM}].concat(PM),MM=n=>{const{state:e}=n,t=e.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:"	"},range:Z.cursor(r.from+1)}));return n.dispatch(t),!0},EM=Od.of([{key:"Tab",run:MM}]);class DM extends el{toDOM(){const e=document.createElement("span");return e.className="cm-space-dot",e.textContent="",e}}class RM extends el{toDOM(){const e=document.createElement("span");return e.className="cm-tab-arrow",e.textContent="",e}}const TM=Nn.fromClass(class{constructor(n){dm(this,"decorations");this.decorations=this.buildDecorations(n)}update(n){(n.docChanged||n.viewportChanged)&&(this.decorations=this.buildDecorations(n.view))}buildDecorations(n){const e=[];for(const{from:t,to:r}of n.visibleRanges){const s=n.state.doc.sliceString(t,r);for(let l=0;l<s.length;l++){const a=s[l],c=t+l;a===" "?e.push({from:c,to:c+1,decoration:Ke.replace({widget:new DM})}):a==="	"&&e.push({from:c,to:c+1,decoration:Ke.replace({widget:new RM})})}}return Ke.set(e.map(t=>t.decoration.range(t.from,t.to)))}},{decorations:n=>n.decorations}),NM=Oe.theme({"&":{backgroundColor:"#ffffff",color:"#000000"},".cm-content":{caretColor:"#000000"},".cm-gutters":{backgroundColor:"#f5f5f5",color:"#999999",border:"none"},".cm-activeLineGutter":{backgroundColor:"#e8e8e8"},".cm-activeLine":{backgroundColor:"#f0f0f0"},".cm-space-dot":{color:"#999999"},".cm-tab-arrow":{color:"#999999",display:"inline-block",width:"calc(4ch)",textAlign:"left"}}),LM=Oe.theme({"&":{backgroundColor:"#000000",color:"#ffffff"},".cm-content":{caretColor:"#ffffff"},".cm-gutters":{backgroundColor:"#000000",color:"#ffffff",border:"none"},".cm-activeLineGutter":{backgroundColor:"#333333"},".cm-activeLine":{backgroundColor:"#222222"},".cm-space-dot":{color:"#ffff00"},".cm-tab-arrow":{color:"#ffff00",display:"inline-block",width:"calc(4ch)",textAlign:"left"}}),IM=Oe.theme({".cm-space-dot":{color:"#666666"},".cm-tab-arrow":{color:"#666666",display:"inline-block",width:"calc(4ch)",textAlign:"left"}});function vy(n){switch(n){case"light":return[NM];case"high-contrast":return[LM];case"dark":default:return[CA,IM]}}const BM=P.forwardRef(function({value:e,onChange:t,colorScheme:r},s){const l=P.useRef(null),a=P.useRef(null),c=P.useRef(new Jo);P.useImperativeHandle(s,()=>({focus:()=>{var d;(d=a.current)==null||d.focus()},blur:()=>{var d;(d=a.current)==null||d.contentDOM.blur()}}),[]),P.useEffect(()=>{if(!l.current||a.current)return;const d=Te.create({doc:e,extensions:[j2(),V2(),A2(),b2(),pA(),EM,Od.of(AM),Te.tabSize.of(4),TM,Oe.updateListener.of(p=>{p.docChanged&&t(p.state.doc.toString())}),c.current.of(vy(r)),Oe.lineWrapping]});return a.current=new Oe({state:d,parent:l.current}),()=>{var p;(p=a.current)==null||p.destroy(),a.current=null}},[]);const h=P.useCallback(d=>{const p=a.current;if(!p)return;const m=p.state.doc.toString();m!==d&&p.dispatch({changes:{from:0,to:m.length,insert:d}})},[]);return P.useEffect(()=>{h(e)},[e,h]),P.useEffect(()=>{const d=a.current;d&&d.dispatch({effects:c.current.reconfigure(vy(r))})},[r]),L.jsx("div",{ref:l,className:"h-full w-full overflow-auto [&_.cm-editor]:h-full [&_.cm-scroller]:overflow-auto",style:{fontSize:"14px"}})});let Fa=null,Gh=null;async function zM(){return Fa||(Gh||(Gh=(async()=>{const n=await fetch("/testsuite/tests.json");if(!n.ok)throw new Error(`Failed to load test suite: ${n.status}`);return Fa=await n.json(),Fa})()),Gh)}function jM({isOpen:n,onClose:e,onSelect:t}){const[r,s]=P.useState([]),[l,a]=P.useState([]),[c,h]=P.useState(""),[d,p]=P.useState(!1),[m,v]=P.useState(null),[x,k]=P.useState(null),S=P.useRef(null);P.useEffect(()=>{n&&r.length===0&&!d&&(p(!0),zM().then(C=>{s(C.tests),a(C.tests),p(!1)}).catch(C=>{v(C.message),p(!1)}))},[n,r.length,d]),P.useEffect(()=>{n&&setTimeout(()=>{var C;return(C=S.current)==null?void 0:C.focus()},100)},[n]),P.useEffect(()=>{if(!c){a(r),k(null);return}try{const C=new RegExp(c,"i");k(null),a(r.filter(D=>C.test(D.id)||C.test(D.name)))}catch{k("Invalid regex"),a([])}},[c,r]),P.useEffect(()=>{const C=D=>{D.key==="Escape"&&n&&e()};return document.addEventListener("keydown",C),()=>document.removeEventListener("keydown",C)},[n,e]);const b=C=>{t(C.yaml),e(),h("")};return n?L.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:L.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl w-[600px] max-h-[80vh] flex flex-col",children:[L.jsxs("div",{className:"px-4 py-3 border-b border-gray-700 flex items-center justify-between",children:[L.jsxs("h2",{className:"text-lg font-semibold text-white",children:["Search"," ",L.jsx("a",{href:"https://github.com/yaml/yaml-test-suite/tree/data",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:"YAML Test Suite"})]}),L.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white transition-colors",children:"X"})]}),L.jsxs("div",{className:"p-4 border-b border-gray-700",children:[L.jsx("input",{ref:S,type:"text",placeholder:"Search by regex (e.g., 'block.*map' or 'spec example')",value:c,onChange:C=>h(C.target.value),className:"w-full px-3 py-2 bg-gray-900 text-white rounded border border-gray-600 focus:border-blue-500 focus:outline-none"}),x&&L.jsx("div",{className:"mt-1 text-red-400 text-sm",children:x})]}),L.jsxs("div",{className:"flex-1 overflow-y-auto",children:[d&&L.jsx("div",{className:"p-8 text-center text-gray-400",children:"Loading tests..."}),m&&L.jsx("div",{className:"p-8 text-center text-red-400",children:m}),!d&&!m&&l.map(C=>L.jsxs("button",{onClick:()=>b(C),className:"w-full px-4 py-3 text-left hover:bg-gray-700 transition-colors border-b border-gray-700 last:border-b-0",children:[L.jsx("span",{className:`font-mono ${C.error?"text-red-400":"text-blue-400"}`,children:C.id}),L.jsx("span",{className:"text-gray-400 mx-2",children:"-"}),L.jsx("span",{className:"text-gray-200",children:C.name})]},C.id)),!d&&!m&&l.length===0&&c&&!x&&L.jsx("div",{className:"p-8 text-center text-gray-400",children:"No tests match your search"})]}),L.jsxs("div",{className:"px-4 py-2 border-t border-gray-700 text-sm text-gray-500 flex justify-between",children:[L.jsxs("span",{children:[l.length," of ",r.length," tests"]}),L.jsx("span",{children:"(E) = expected parse error"})]})]})}):null}const FM={dark:"vs-dark",light:"light","high-contrast":"hc-black"},Ja=`# Edit this YAML and see how
# different parsers handle it.

# Green = matches reference parser
# Red = differs or errored

name: YAML Parser Playground

url: https://play.yaml.com/
repo:
  https://github.com/yaml/yaml-play

current parsers: 17
actively maintained: true

features:
- Compare outputs from multiple
  YAML parsers
- Search and load tests from the
  YAML Test Suite
- Select and drag output panes
- Click Help for shortcut keys
`,xy=200,wy=800,_M=P.forwardRef(function({value:e,onChange:t,width:r,onWidthChange:s,colorScheme:l,editorType:a,showBorder:c=!0,heightMode:h="full"},d){const p=P.useRef(!1),m=P.useRef(0),v=P.useRef(0),x=P.useRef(null),k=P.useRef(null),[S,b]=P.useState(!1);P.useImperativeHandle(d,()=>({focus:()=>{var T,F;a==="codemirror"?(T=k.current)==null||T.focus():(F=x.current)==null||F.focus()},blur:()=>{var T,F,z;a==="codemirror"?(T=k.current)==null||T.blur():(F=x.current)!=null&&F.getDomNode()&&((z=document.activeElement)==null||z.blur())}}),[a]);const C=P.useCallback(T=>{x.current=T;const F=T.getModel();F&&F.updateOptions({tabSize:4,insertSpaces:!1})},[]),D=P.useCallback(T=>{p.current=!0,m.current=T.clientX,v.current=r,document.body.style.cursor="col-resize",document.body.style.userSelect="none";const F=K=>{if(!p.current)return;const J=K.clientX-m.current,G=Math.min(wy,Math.max(xy,v.current+J));s(G)},z=()=>{p.current=!1,document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",F),document.removeEventListener("mouseup",z)};document.addEventListener("mousemove",F),document.addEventListener("mouseup",z)},[r,s]),B=h==="full"?"h-full":"h-full overflow-hidden",_=c?"border-r border-gray-700":"";return L.jsxs("div",{className:`flex flex-col ${B} ${_} relative`,style:{width:`${r}px`,minWidth:`${xy}px`,maxWidth:`${wy}px`},children:[L.jsxs("div",{className:"bg-gray-800 px-4 py-2 border-b border-gray-700 flex items-center justify-between",children:[L.jsx("h2",{className:"text-white font-semibold",children:"YAML Input Editor"}),L.jsx("button",{onClick:()=>b(!0),className:"px-2 py-1 text-xs bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors",children:"Test Suite"})]}),L.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:a==="codemirror"?L.jsx(BM,{ref:k,value:e,onChange:t,colorScheme:l}):L.jsx(pO,{height:"100%",defaultLanguage:"yaml",defaultValue:Ja,value:e,onChange:T=>t(T||""),theme:FM[l],onMount:C,options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",renderWhitespace:"all",tabSize:4,insertSpaces:!1,detectIndentation:!1,useTabStops:!1,scrollBeyondLastLine:!1,wordWrap:"on",automaticLayout:!0}})}),L.jsx("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-blue-500 transition-colors",onMouseDown:D}),L.jsx(jM,{isOpen:S,onClose:()=>b(!1),onSelect:t})]})});function VM({parser:n,matches:e,loading:t,onClose:r,isDraggable:s=!0}){const{attributes:l,listeners:a,setNodeRef:c,transform:h,transition:d,isDragging:p}=ib({id:n.id,disabled:!s}),m={transform:Io.Transform.toString(h),transition:d,opacity:p?.5:1},v=t||e===void 0?"bg-gray-700":e?"bg-green-700":"bg-red-700",x=`${n.name} v${n.version} (${n.language})`;return L.jsxs("div",{ref:c,style:m,className:`${v} px-3 py-2 flex items-center justify-between cursor-grab active:cursor-grabbing select-none`,...l,...a,children:[n.repo?L.jsx("a",{href:n.repo,target:"_blank",rel:"noopener noreferrer",className:"text-white font-semibold hover:underline",onClick:k=>k.stopPropagation(),title:x,children:n.name}):L.jsx("span",{className:"text-white font-semibold",title:x,children:n.name}),L.jsxs("div",{className:"flex items-center gap-2",children:[t&&L.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),r&&L.jsx("button",{onClick:k=>{k.stopPropagation(),r()},className:"text-white hover:text-gray-300 text-lg leading-none px-1",title:"Close pane",children:""})]})]})}function HM(n){return["Failed to fetch","NetworkError","network error","ERR_CONNECTION_REFUSED","ECONNREFUSED","fetch failed","Load failed","HTTP 500","HTTP 502","HTTP 503","HTTP 504","Internal Server Error"].some(t=>n.toLowerCase().includes(t.toLowerCase()))}function ky({parser:n,result:e,onClose:t,isDraggable:r=!0}){const s=n.id!=="refparse",l=s&&(e==null?void 0:e.versionMismatch),a=s&&!l&&(e==null?void 0:e.status)===-1&&(e==null?void 0:e.output)&&HM(e.output);return L.jsxs("div",{className:"flex flex-col h-full min-h-[200px] bg-gray-900",children:[L.jsx(VM,{parser:n,matches:e==null?void 0:e.matches,loading:e==null?void 0:e.loading,onClose:t,isDraggable:r}),L.jsx("div",{className:"flex-1 bg-gray-900 overflow-auto",children:e!=null&&e.error?L.jsxs("pre",{className:"p-3 text-red-400 text-sm font-mono whitespace-pre-wrap",children:["Error: ",e.error]}):l?L.jsxs("div",{className:"p-3 text-sm",children:[L.jsxs("p",{className:"text-yellow-400 mb-2",children:["Wrong sandbox version (",e.versionMismatch.found,") found. Requires ",e.versionMismatch.required,"."]}),L.jsxs("p",{className:"text-gray-400",children:['Click the "',L.jsx("span",{className:"text-white font-medium",children:"Setup"}),'" button for instructions.']})]}):a?L.jsxs("div",{className:"p-3 text-sm",children:[L.jsx("p",{className:"text-gray-300 mb-2",children:"Can't connect to a local YAML parser sandbox server."}),L.jsxs("p",{className:"text-gray-400",children:['Click the "',L.jsx("span",{className:"text-white font-medium",children:"Setup"}),'" button for instructions.']})]}):e!=null&&e.loading?L.jsx("div",{className:"p-3 text-gray-500 text-sm",children:"Running parser..."}):L.jsx("pre",{className:"p-3 text-gray-200 text-sm font-mono whitespace-pre-wrap",children:(e==null?void 0:e.output)||"No output yet"})})]})}function WM({total:n,disagreeing:e,disagreeingNames:t,loading:r,sandboxAvailable:s=!0}){if(!s)return null;if(r)return L.jsx("div",{className:"bg-gray-800 border-t border-gray-700 px-4 py-2",children:L.jsx("span",{className:"text-gray-400 font-semibold",children:"Running parsers..."})});const l=e===0;return L.jsx("div",{className:"bg-gray-800 border-t border-gray-700 px-4 py-2",children:l?L.jsxs("span",{className:"text-green-400 font-semibold",children:["All ",n," parsers agree with the Reference Parser"]}):L.jsxs("span",{className:"text-red-400 font-semibold",children:[e,"/",n," parsers disagree with the Reference Parser: ",t.join(", ")]})})}const Mi=[{id:"refparse",name:"Reference Parser",version:"f003194",repo:"https://github.com/yaml/yaml-reference-parser",language:"JavaScript",isJavaScript:!0},{id:"npmyaml",name:"eemeli/yaml",version:"2.8.1",repo:"https://github.com/eemeli/yaml",language:"JavaScript",isJavaScript:!0},{id:"libyaml",name:"libyaml",version:"0.2.5",repo:"https://github.com/yaml/libyaml",language:"C"},{id:"pyyaml",name:"PyYAML",version:"6.0.3",language:"Python"},{id:"ruamel",name:"ruamel.yaml",version:"0.18.16",language:"Python"},{id:"goyaml",name:"go-yaml",version:"94c6e9d",repo:"https://github.com/pantoniou/yaml",language:"Go"},{id:"libfyaml",name:"libfyaml",version:"0.9",repo:"https://github.com/pantoniou/libfyaml",language:"C"},{id:"rapid",name:"rapidyaml",version:"0.10.0",repo:"https://github.com/biojppm/rapidyaml",language:"C++"},{id:"rustyaml",name:"serde-yaml",version:"0.9.34",repo:"https://github.com/dtolnay/serde-yaml",language:"Rust"},{id:"snake",name:"SnakeYAML",version:"2.5",repo:"https://bitbucket.org/snakeyaml/snakeyaml",language:"Java"},{id:"snakeeng",name:"SnakeYAML Engine",version:"3.0.1",repo:"https://bitbucket.org/snakeyaml/snakeyaml-engine",language:"Java"},{id:"dotnet",name:"YamlDotNet",version:"11.2.1",repo:"https://github.com/aaubry/YamlDotNet",language:"C#"},{id:"luayaml",name:"lyaml",version:"6.2.8",repo:"https://github.com/gvvaughan/lyaml",language:"Lua"},{id:"nimyaml",name:"NimYAML",version:"1.0.0",repo:"https://github.com/flyx/NimYAML",language:"Nim"},{id:"ppyaml",name:"YAML::PP",version:"0.039",language:"Perl"},{id:"hsyaml",name:"HsYAML",version:"0.2.1.1",repo:"https://github.com/haskell-hvr/HsYAML",language:"Haskell"},{id:"refhs",name:"yamlreference",version:"bf471f8",repo:"https://github.com/orenbenkiki/yamlreference",language:"Haskell"}],ed=n=>Mi.find(e=>e.id===n),QM=()=>["refparse","pyyaml","libyaml","goyaml"],$M=[{id:"dark",label:"Dark"},{id:"light",label:"Light"},{id:"high-contrast",label:"High Contrast"}],UM=[{id:"monaco",label:"Monaco"},{id:"codemirror",label:"CodeMirror"}];function XM({isOpen:n,onClose:e,paneStates:t,onToggleVisibility:r,onReset:s,colorScheme:l,onColorSchemeChange:a,editorType:c,onEditorTypeChange:h}){if(P.useEffect(()=>{if(!n)return;const m=v=>{v.key==="Escape"&&e()};return document.addEventListener("keydown",m),()=>document.removeEventListener("keydown",m)},[n,e]),!n)return null;const d=new Map(t.map(m=>[m.id,m])),p=[...Mi].filter(m=>m.id!=="refparse").sort((m,v)=>m.id.localeCompare(v.id));return L.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:L.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl max-w-sm w-full mx-4 max-h-[80vh] overflow-hidden",onClick:m=>m.stopPropagation(),children:[L.jsxs("div",{className:"px-4 py-3 border-b border-gray-700 flex items-center justify-between",children:[L.jsx("h2",{className:"text-lg font-semibold text-white",children:"Preferences"}),L.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]}),L.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:[L.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-2 uppercase",children:"Editor"}),L.jsx("div",{className:"flex gap-2 mb-4",children:UM.map(m=>L.jsx("button",{onClick:()=>h(m.id),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${c===m.id?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:m.label},m.id))}),L.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-2 uppercase",children:"Color Scheme"}),L.jsx("div",{className:"flex gap-2 mb-4",children:$M.map(m=>L.jsx("button",{onClick:()=>a(m.id),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${l===m.id?"bg-blue-600 text-white":"bg-gray-700 text-gray-300 hover:bg-gray-600"}`,children:m.label},m.id))}),L.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-2 uppercase",children:"Options"}),L.jsx("button",{onClick:s,className:"w-full text-left py-2 px-2 rounded text-red-500 hover:bg-gray-700 transition-colors",children:"Click here to clear all settings"}),L.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-2 mt-4 uppercase",children:"Parser Panes"}),p.map(m=>{const v=d.get(m.id),x=(v==null?void 0:v.visible)??!1,k=/^\d+(\.\d+)+$/.test(m.version);return L.jsxs("label",{className:"flex items-center gap-3 py-2 px-2 rounded cursor-pointer hover:bg-gray-700",children:[L.jsx("input",{type:"checkbox",checked:x,onChange:S=>r(m.id,S.target.checked),className:"w-4 h-4 rounded border-gray-600 bg-gray-700 text-blue-600 focus:ring-blue-500"}),L.jsx("span",{className:"text-white font-medium",children:m.name}),L.jsx("span",{className:"text-xs text-gray-400",children:m.language}),k&&L.jsx("span",{className:"text-xs text-blue-400",children:m.version})]},m.id)})]})]})})}function KM({isOpen:n,onClose:e}){return P.useEffect(()=>{if(!n)return;const t=r=>{r.key==="Escape"&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[n,e]),n?L.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:L.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-hidden",onClick:t=>t.stopPropagation(),children:[L.jsxs("div",{className:"px-4 py-3 border-b border-gray-700 flex items-center justify-between",children:[L.jsx("h2",{className:"text-lg font-semibold text-white",children:"Help"}),L.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]}),L.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh] space-y-6",children:[L.jsxs("section",{children:[L.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-2 uppercase",children:"Keyboard Shortcuts"}),L.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-sm",children:[L.jsx("kbd",{className:"bg-gray-900 px-2 py-1 rounded text-gray-200 font-mono",children:"Esc"}),L.jsx("span",{className:"text-gray-300 self-center",children:"Unfocus input pane / Close modal"}),L.jsx("kbd",{className:"bg-gray-900 px-2 py-1 rounded text-gray-200 font-mono",children:"I"}),L.jsx("span",{className:"text-gray-300 self-center",children:"Focus input pane"}),L.jsx("kbd",{className:"bg-gray-900 px-2 py-1 rounded text-gray-200 font-mono",children:"A"}),L.jsx("span",{className:"text-gray-300 self-center",children:"Show all panes"}),L.jsx("kbd",{className:"bg-gray-900 px-2 py-1 rounded text-gray-200 font-mono",children:"N"}),L.jsx("span",{className:"text-gray-300 self-center",children:"Hide all panes"}),L.jsx("kbd",{className:"bg-gray-900 px-2 py-1 rounded text-gray-200 font-mono",children:"D"}),L.jsx("span",{className:"text-gray-300 self-center",children:"Show differing panes"}),L.jsx("kbd",{className:"bg-gray-900 px-2 py-1 rounded text-gray-200 font-mono",children:"S"}),L.jsx("span",{className:"text-gray-300 self-center",children:"Show your selected panes"}),L.jsx("kbd",{className:"bg-gray-900 px-2 py-1 rounded text-gray-200 font-mono",children:"P"}),L.jsx("span",{className:"text-gray-300 self-center",children:"Open Preferences"}),L.jsx("kbd",{className:"bg-gray-900 px-2 py-1 rounded text-gray-200 font-mono",children:"H"}),L.jsx("span",{className:"text-gray-300 self-center",children:"Open Help"})]})]}),L.jsxs("section",{children:[L.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-2 uppercase",children:"About"}),L.jsx("p",{className:"text-gray-300 text-sm",children:"The YAML Parser Playground compares output from multiple YAML parser implementations. The Reference Parser is used as the baseline. Green headers indicate matching output and red ones indicate differences."}),L.jsx("br",{}),L.jsxs("p",{className:"text-gray-300 text-sm",children:[`The output format is a DSL for YAML parser "events", which are the data structures most YAML parsers create internally. A YAML "parser" is just one of many stages in a YAML "loader"'s stack, but it is the most difficult and important one to get right. This DSL is the one used by the `,L.jsx("a",{href:"https://github.com/yaml/yaml-test-suite",children:"YAML Test Suite"}),"."]}),L.jsx("br",{}),L.jsx("p",{className:"text-gray-300 text-sm",children:"Note: The S key will restore your selected panes after using A, N, or D to show all, none, or differing panes."}),L.jsx("br",{}),L.jsx("p",{className:"text-gray-300 text-sm",children:"This site turns your input into sharable URLs. This can be very useful when discussing particular YAML issues or reporting bugs."})]})]})]})}):null}const gx="https://localhost:7481",eu="0.1.34";function qM(){return eu}async function YM(){try{return(await fetch(`${gx}/`,{method:"HEAD"})).ok}catch{return!1}}async function GM(n,e,t){const r=`${gx}/?version=${encodeURIComponent(eu)}&parser=yaml-test-parse-${n}`;try{const s=new URLSearchParams;s.append("text",e);const l=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!l.ok){const h=(await l.text()).match(/Requires sandbox version (\S+)/);if(h)return{status:-1,output:`Version mismatch: sandbox is ${h[1]}, but frontend requires ${eu}`,versionMismatch:{required:eu,found:h[1]}};throw new Error(`HTTP ${l.status}: ${l.statusText}`)}const a=await l.json();return{status:a.status,output:a.output}}catch(s){return s&&typeof s=="object"&&"versionMismatch"in s?s:{status:-1,output:s instanceof Error?s.message:"Unknown error"}}}const mx=qM(),Zh=`docker run --rm -d -p 7481:7481 yamlio/yaml-play-sandbox:${mx} 7481`;function ZM({isOpen:n,onClose:e}){const[t,r]=P.useState(!1),s=async()=>{try{await navigator.clipboard.writeText(Zh),r(!0),setTimeout(()=>r(!1),2e3)}catch{const l=document.createElement("textarea");l.value=Zh,document.body.appendChild(l),l.select(),document.execCommand("copy"),document.body.removeChild(l),r(!0),setTimeout(()=>r(!1),2e3)}};return P.useEffect(()=>{if(!n)return;const l=a=>{a.key==="Escape"&&e()};return document.addEventListener("keydown",l),()=>document.removeEventListener("keydown",l)},[n,e]),n?L.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:L.jsxs("div",{className:"bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-hidden",onClick:l=>l.stopPropagation(),children:[L.jsxs("div",{className:"px-4 py-3 border-b border-gray-700 flex items-center justify-between",children:[L.jsx("h2",{className:"text-lg font-semibold text-white",children:"Sandbox Setup"}),L.jsx("button",{onClick:e,className:"text-gray-400 hover:text-white text-2xl leading-none",children:""})]}),L.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh] space-y-6",children:[L.jsxs("section",{children:[L.jsxs("h3",{className:"text-sm font-semibold text-gray-400 mb-2 uppercase",children:["Start the Sandbox Server (version ",mx,")"]}),L.jsx("p",{className:"text-gray-300 text-sm mb-2",children:"Most of these parsers run in a Docker container that you need to start on your machine. If you see connection errors, start the sandbox by running this command in a terminal:"}),L.jsxs("div",{className:"relative",children:[L.jsx("pre",{className:"bg-gray-900 p-3 pr-16 rounded text-sm text-green-400 font-mono overflow-x-auto",children:Zh}),L.jsx("button",{onClick:s,className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-700 hover:bg-gray-600 text-gray-300 rounded transition-colors",children:t?"Copied!":"Copy"})]}),L.jsx("br",{}),L.jsx("p",{className:"text-gray-400 text-sm mt-2",children:"Note: If a different version of the sandbox server Docker container is already running, you'll need to kill that first."})]}),L.jsxs("section",{children:[L.jsx("h3",{className:"text-sm font-semibold text-gray-400 mb-2 uppercase",children:"HTTPS Certificate (if needed)"}),L.jsx("p",{className:"text-gray-300 text-sm mb-2",children:"If you are still getting connection errors, you may need to accept the unsigned HTTPS certificate:"}),L.jsxs("ol",{className:"text-gray-300 text-sm list-decimal list-inside space-y-1",children:[L.jsxs("li",{children:["Click here:"," ",L.jsx("a",{href:"https://localhost:7481",target:"_blank",rel:"noopener noreferrer",className:"text-blue-400 hover:text-blue-300 underline",children:"https://localhost:7481"})," ","(opens in a new tab)"]}),L.jsx("li",{children:"Accept the security warning / proceed anyway"}),L.jsx("li",{children:"Return to this page and refresh"})]})]})]})]})}):null}const Jh="yaml-play-layout";function Sy(){const n=QM();return{panes:Mi.map(t=>{const r=n.indexOf(t.id);return{id:t.id,visible:r>=0,order:r>=0?r:1e3+Mi.findIndex(s=>s.id===t.id)}}),selectedPaneIds:n}}function JM(){const[n,e]=P.useState(()=>{try{const x=localStorage.getItem(Jh);if(x){const k=JSON.parse(x),S=new Set(k.panes.map(C=>C.id)),b=Mi.filter(C=>!S.has(C.id)).map((C,D)=>({id:C.id,visible:!1,order:k.panes.length+D}));return{...k,panes:[...k.panes,...b]}}}catch{}return Sy()});P.useEffect(()=>{localStorage.setItem(Jh,JSON.stringify(n))},[n]);const t=P.useCallback((x,k)=>{e(S=>{let b;if(k){const D=Math.max(...S.panes.map(B=>B.order));b=S.panes.map(B=>B.id===x?{...B,visible:k,order:D+1}:B)}else b=S.panes.map(D=>D.id===x?{...D,visible:k}:D);const C=b.filter(D=>D.visible).map(D=>D.id);return{...S,panes:b,selectedPaneIds:C}})},[]),r=P.useCallback((x,k)=>{e(S=>{const b=[...S.panes],C=b.findIndex(_=>_.id===x),D=b.findIndex(_=>_.id===k);if(C===-1||D===-1)return S;const[B]=b.splice(C,1);return b.splice(D,0,B),{panes:b.map((_,T)=>({..._,order:T}))}})},[]),s=P.useCallback(()=>{localStorage.removeItem(Jh),e(Sy())},[]),l=P.useCallback(()=>{e(x=>{const k=x.panes.filter(D=>D.visible),S=k.length>0?Math.max(...k.map(D=>D.order)):-1,b=x.panes.filter(D=>!D.visible&&D.id!=="refparse").sort((D,B)=>D.id.localeCompare(B.id)),C=new Map;return b.forEach((D,B)=>{C.set(D.id,S+1+B)}),{...x,panes:x.panes.map(D=>({...D,visible:!0,order:C.has(D.id)?C.get(D.id):D.order}))}})},[]),a=P.useCallback(()=>{e(x=>({...x,panes:x.panes.map(k=>k.id==="refparse"?k:{...k,visible:!1})}))},[]),c=P.useCallback(()=>{e(x=>{const k=new Set(x.selectedPaneIds??[]);return k.size===0?x:{...x,panes:x.panes.map(S=>({...S,visible:k.has(S.id)}))}})},[]),h=P.useCallback(x=>{e(k=>{const S=new Set(x);if(k.panes.filter(B=>!B.visible&&S.has(B.id)).length===0)return k;let D=Math.max(...k.panes.filter(B=>B.visible).map(B=>B.order),-1)+1;return{...k,panes:k.panes.map(B=>!B.visible&&S.has(B.id)?{...B,visible:!0,order:D++}:B)}})},[]),d=P.useCallback(x=>{e(k=>({...k,inputPaneWidth:x}))},[]),p=P.useCallback(x=>{e(k=>({...k,colorScheme:x}))},[]),m=P.useCallback(x=>{e(k=>({...k,editorType:x}))},[]),v=P.useCallback(()=>n.panes.filter(x=>x.visible).sort((x,k)=>x.order-k.order),[n.panes]);return{layout:n,updatePaneVisibility:t,reorderPanes:r,resetLayout:s,showAllPanes:l,hideAllPanes:a,showSelectedPanes:c,showErrorPanes:h,getVisiblePanes:v,inputPaneWidth:n.inputPaneWidth??400,setInputPaneWidth:d,colorScheme:n.colorScheme??"dark",setColorScheme:p,editorType:n.editorType??"monaco",setEditorType:m}}let td=null,nd=null,by=!1;async function eE(){if(by)return;const[n,e,t,r,s]=await Promise.all([fetch("/refparse/prelude.js").then(a=>a.text()),fetch("/refparse/grammar.js").then(a=>a.text()),fetch("/refparse/parser.js").then(a=>a.text()),fetch("/refparse/receiver.js").then(a=>a.text()),fetch("/refparse/test-receiver.js").then(a=>a.text())]),l=eval;window.global=window,l(n),l(e),l(t),l(r),l(s),td=window.Parser,nd=window.TestReceiver,by=!0}async function tE(n){try{if(await eE(),!nd)return{status:1,output:"TestReceiverClass not loaded"};if(!td)return{status:1,output:"Parser not loaded"};const e=new nd,t=new td(e);return t.parse(n),{status:0,output:t.receiver.output().replace(/\n$/,"")||"(empty output)"}}catch(e){return{status:1,output:e instanceof Error?e.message:String(e)}}}function Oy(n){return n.replace(/\s+(\{\}|\[\])$/mg,"").replace(/^=COMMENT .*\n?/mg,"").replace(/^[^+\-=].*\n?/gm,"").trim()}function nE(n,e,t){let r=Oy(n),s=Oy(e);if(t==="rustyaml"&&(s=s.replace(/<Tag\("!!", "(.*?)"\)>/g,"<tag:yaml.org,2002:$1>").replace(/<Tag\("!", "(.*?)"\)>/g,"<!$1>").replace(/<Tag\("", "!"\)>/g,"<!>").replace(/<Tag\("", "(tag:.*?)"\)>/g,"<$1>").replace(/<Tag\("", "(!.*?)"\)>/g,"<$1>"),r=r.replace(/^\+DOC ---/gm,"+DOC").replace(/^-DOC \.\.\./gm,"-DOC").replace(/^=VAL :$/gm,"=VAL :~").replace(/^\+MAP \{\}( ?)/gm,"+MAP$1").replace(/^\+SEQ \[\]( ?)/gm,"+SEQ$1"),s.match(/&1/))){let l=1,a;for(;a=r.match(/&([a-zA-Z]\S*)/);){const c=a[1];r=r.replace(new RegExp(`([&*])${c}`,"g"),`$1${l}`),l++}}if(t==="goyaml"){const l=r.split(`
`),a=s.split(`
`);l.length===a.length&&(s=a.map((h,d)=>l[d]==="+DOC"&&h==="+DOC ---"?"+DOC":h).join(`
`))}return r===s}const _a=Mi.filter(n=>n.id!=="refparse").map(n=>n.id);function rE(){const[n,e]=P.useState(new Map),[t,r]=P.useState(""),s=P.useRef(null),l=P.useCallback(async(h,d)=>{s.current&&s.current.abort(),s.current=new AbortController,e(x=>{const k=new Map(x);return k.set("refparse",{parserId:"refparse",output:"",status:0,loading:!0}),_a.forEach(S=>{k.set(S,{parserId:S,output:"",status:0,loading:!0})}),k});const p=await tE(h),m=p.output,v=p.status;r(m),e(x=>{const k=new Map(x);return k.set("refparse",{parserId:"refparse",output:p.output,status:p.status,loading:!1,matches:p.status===0,agrees:!0}),k}),await Promise.all(_a.map(async x=>{const k=Mi.find(D=>D.id===x);if(!k)return;const S=await GM(x,h,k.version);let b,C;if(S.status===-1)b=!1,C=!1;else if(x==="refhs"){const D=v===0,B=S.status===0;b=D===B,C=v===0&&b}else v!==0?(b=S.status!==0,C=!1):(b=S.status===0&&nE(m,S.output,x),C=b);e(D=>{const B=new Map(D);return B.set(x,{parserId:x,output:S.output,status:S.status,loading:!1,matches:C,agrees:b,versionMismatch:S.versionMismatch}),B})}))},[]),a=P.useCallback(h=>n.get(h),[n]),c=P.useCallback(()=>{const h=[];let d=0;return _a.forEach(p=>{const m=n.get(p);if(!m||m.loading)d++;else if(!m.agrees){const v=ed(p);h.push((v==null?void 0:v.name)||p)}}),{total:_a.length,disagreeing:h.length,disagreeingNames:h,loading:d>0}},[n]);return{results:n,refOutput:t,runAllParsers:l,getResult:a,getAgreementCount:c}}function iE(){const n=window.location.hash.slice(1);if(!n)return null;try{return atob(n)}catch{return null}}function sE(n){const e=btoa(n);window.history.replaceState(null,"",`#${e}`)}function oE(){const[n,e]=P.useState(()=>iE()||Ja),[t,r]=P.useState(!1),[s,l]=P.useState(!1),[a,c]=P.useState(!1),[h,d]=P.useState(!0),p=P.useRef(null),m=P.useRef(""),{layout:v,updatePaneVisibility:x,reorderPanes:k,resetLayout:S,showAllPanes:b,hideAllPanes:C,showSelectedPanes:D,showErrorPanes:B,getVisiblePanes:_,inputPaneWidth:T,setInputPaneWidth:F,colorScheme:z,setColorScheme:K,editorType:J,setEditorType:G}=JM(),{results:te,runAllParsers:ne,getResult:ce,getAgreementCount:he}=rE(),q=_(),{total:fe,disagreeing:pe,disagreeingNames:$,loading:ee}=he(),X=q.map(re=>re.id).join(","),A=P.useRef({input:"",panes:""}),I=Array.from(te.values()).some(re=>re.versionMismatch);P.useEffect(()=>{const re=async()=>{const ke=await YM();d(ke)};re();const W=setInterval(re,1e4);return()=>clearInterval(W)},[]),P.useEffect(()=>{const re=v.panes.find(W=>W.id==="refparse");re&&!re.visible&&x("refparse",!0)},[v.panes,x]),P.useEffect(()=>{const re=setTimeout(()=>{sE(n)},1e3);return()=>clearTimeout(re)},[n]),P.useEffect(()=>{if(A.current.input===n&&A.current.panes===X)return;const re=setTimeout(()=>{const W=X.split(",").filter(Boolean);W.length>0&&(A.current={input:n,panes:X},ne(n,W))},500);return()=>clearTimeout(re)},[n,X,ne]),P.useEffect(()=>{const re=W=>{var Se,Kt;const ke=W.target,we=ke.tagName==="INPUT"||ke.tagName==="TEXTAREA"||ke.closest(".monaco-editor")||ke.closest(".cm-editor");if(W.key==="Escape"&&we){W.preventDefault(),(Se=p.current)==null||Se.blur();return}if(we)return;const Ce=W.key.toUpperCase();if(Ce==="I"&&!W.ctrlKey&&!W.metaKey&&!W.altKey&&(W.preventDefault(),(Kt=p.current)==null||Kt.focus()),Ce==="H"&&!W.ctrlKey&&!W.metaKey&&!W.altKey&&(W.preventDefault(),l(!0)),Ce==="P"&&!W.ctrlKey&&!W.metaKey&&!W.altKey&&(W.preventDefault(),r(!0)),Ce==="A"&&!W.ctrlKey&&!W.metaKey&&!W.altKey&&(W.preventDefault(),b()),Ce==="N"&&!W.ctrlKey&&!W.metaKey&&!W.altKey&&(W.preventDefault(),C()),Ce==="S"&&!W.ctrlKey&&!W.metaKey&&!W.altKey&&(W.preventDefault(),D()),Ce==="D"&&!W.ctrlKey&&!W.metaKey&&!W.altKey){W.preventDefault();const ft=[];te.forEach((qt,yt)=>{yt!=="refparse"&&qt.agrees===!1&&ft.push(yt)}),ft.length>0&&B(ft)}Ce==="X"&&!W.ctrlKey&&!W.metaKey&&!W.altKey?(m.current+="X",m.current==="XXX"&&(W.preventDefault(),S(),e(Ja),m.current="")):m.current=""};return document.addEventListener("keydown",re),()=>document.removeEventListener("keydown",re)},[b,C,D,B,te,S]);const se=Lk(Om(fd,{activationConstraint:{distance:8}}),Om(cd)),ge=P.useCallback(re=>{const{active:W,over:ke}=re;if(ke&&W.id!==ke.id){if(W.id==="refparse")return;k(W.id,ke.id)}},[k]);return L.jsxs("div",{className:"h-screen flex flex-col bg-gray-900",children:[L.jsxs("header",{className:"bg-gray-800 px-4 py-3 border-b border-gray-700 flex items-center justify-between",children:[L.jsx("h1",{className:"text-xl font-bold text-white",children:"YAML Parser Playground"}),L.jsxs("div",{className:"flex items-center gap-2",children:[(!h||I)&&L.jsx("button",{onClick:()=>c(!0),className:"px-3 py-1.5 bg-yellow-500 text-black font-semibold rounded hover:bg-yellow-400 transition-colors text-sm",children:"Setup"}),L.jsx("button",{onClick:()=>r(!0),className:"px-3 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-500 transition-colors text-sm",children:"Preferences"}),L.jsx("button",{onClick:()=>l(!0),className:"px-3 py-1.5 bg-blue-600 text-white rounded hover:bg-blue-500 transition-colors text-sm",children:"Help"})]})]}),L.jsx("div",{className:"flex-1 flex overflow-hidden",children:(()=>{const re=q.length>8,W=ed("refparse"),ke=re?q.filter(we=>we.id!=="refparse"):q;return L.jsxs(L.Fragment,{children:[L.jsxs("div",{className:`${re?"grid grid-rows-2":"flex flex-col"} h-full border-r border-gray-700`,style:{width:`${T}px`,minWidth:"200px",maxWidth:"800px"},children:[L.jsx(_M,{ref:p,value:n,onChange:e,width:T,onWidthChange:F,colorScheme:z,editorType:J,showBorder:!1,heightMode:re?"half":"full"}),re&&W&&L.jsx("div",{className:"h-full overflow-hidden border-t border-gray-700",children:L.jsx(ky,{parser:W,result:ce("refparse"),isDraggable:!1},"refparse-sidebar")})]},re?"left-col-split":"left-col-full"),L.jsx("div",{className:"flex-1 grid grid-cols-4 overflow-y-auto pane-container gap-px bg-gray-700 auto-rows-fr",children:L.jsx(jS,{sensors:se,collisionDetection:Fk,onDragEnd:ge,children:L.jsx(GS,{items:ke.map(we=>we.id),strategy:qS,children:ke.map(we=>{const Ce=ed(we.id);if(!Ce)return null;const Se=we.id==="refparse";return L.jsx(ky,{parser:Ce,result:ce(we.id),onClose:Se?void 0:()=>x(we.id,!1),isDraggable:!Se},we.id)})})})})]})})()}),L.jsx(WM,{total:fe,disagreeing:pe,disagreeingNames:$,loading:ee,sandboxAvailable:h}),L.jsx(XM,{isOpen:t,onClose:()=>r(!1),paneStates:v.panes,onToggleVisibility:x,onReset:()=>{S(),e(Ja)},colorScheme:z,onColorSchemeChange:K,editorType:J,onEditorTypeChange:G}),L.jsx(KM,{isOpen:s,onClose:()=>l(!1)}),L.jsx(ZM,{isOpen:a,onClose:()=>{c(!1);const re=X.split(",").filter(Boolean);re.length>0&&ne(n,re)}})]})}xk.createRoot(document.getElementById("root")).render(L.jsx(Ze.StrictMode,{children:L.jsx(oE,{})}));
//# sourceMappingURL=index-BUe7BsTP.js.map

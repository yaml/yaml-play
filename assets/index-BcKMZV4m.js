var Iw=Object.defineProperty;var Bw=(n,e,t)=>e in n?Iw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var Sm=(n,e,t)=>Bw(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function $y(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var Sh={exports:{}},wo={},Oh={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om;function zw(){if(Om)return Ae;Om=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),p=Symbol.for("react.lazy"),m=Symbol.iterator;function x(A){return A===null||typeof A!="object"?null:(A=m&&A[m]||A["@@iterator"],typeof A=="function"?A:null)}var k={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,O={};function C(A,z,ue){this.props=A,this.context=z,this.refs=O,this.updater=ue||k}C.prototype.isReactComponent={},C.prototype.setState=function(A,z){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,z,"setState")},C.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function P(){}P.prototype=C.prototype;function M(A,z,ue){this.props=A,this.context=z,this.refs=O,this.updater=ue||k}var L=M.prototype=new P;L.constructor=M,b(L,C.prototype),L.isPureReactComponent=!0;var B=Array.isArray,R=Object.prototype.hasOwnProperty,j={current:null},D={key:!0,ref:!0,__self:!0,__source:!0};function V(A,z,ue){var pe,te={},H=null,ae=null;if(z!=null)for(pe in z.ref!==void 0&&(ae=z.ref),z.key!==void 0&&(H=""+z.key),z)R.call(z,pe)&&!D.hasOwnProperty(pe)&&(te[pe]=z[pe]);var we=arguments.length-2;if(we===1)te.children=ue;else if(1<we){for(var ye=Array(we),me=0;me<we;me++)ye[me]=arguments[me+2];te.children=ye}if(A&&A.defaultProps)for(pe in we=A.defaultProps,we)te[pe]===void 0&&(te[pe]=we[pe]);return{$$typeof:n,type:A,key:H,ref:ae,props:te,_owner:j.current}}function $(A,z){return{$$typeof:n,type:A.type,key:z,ref:A.ref,props:A.props,_owner:A._owner}}function U(A){return typeof A=="object"&&A!==null&&A.$$typeof===n}function J(A){var z={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(ue){return z[ue]})}var Q=/\/+/g;function Z(A,z){return typeof A=="object"&&A!==null&&A.key!=null?J(""+A.key):z.toString(36)}function he(A,z,ue,pe,te){var H=typeof A;(H==="undefined"||H==="boolean")&&(A=null);var ae=!1;if(A===null)ae=!0;else switch(H){case"string":case"number":ae=!0;break;case"object":switch(A.$$typeof){case n:case e:ae=!0}}if(ae)return ae=A,te=te(ae),A=pe===""?"."+Z(ae,0):pe,B(te)?(ue="",A!=null&&(ue=A.replace(Q,"$&/")+"/"),he(te,z,ue,"",function(me){return me})):te!=null&&(U(te)&&(te=$(te,ue+(!te.key||ae&&ae.key===te.key?"":(""+te.key).replace(Q,"$&/")+"/")+A)),z.push(te)),1;if(ae=0,pe=pe===""?".":pe+":",B(A))for(var we=0;we<A.length;we++){H=A[we];var ye=pe+Z(H,we);ae+=he(H,z,ue,ye,te)}else if(ye=x(A),typeof ye=="function")for(A=ye.call(A),we=0;!(H=A.next()).done;)H=H.value,ye=pe+Z(H,we++),ae+=he(H,z,ue,ye,te);else if(H==="object")throw z=String(A),Error("Objects are not valid as a React child (found: "+(z==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":z)+"). If you meant to render a collection of children, use an array instead.");return ae}function K(A,z,ue){if(A==null)return A;var pe=[],te=0;return he(A,pe,"","",function(H){return z.call(ue,H,te++)}),pe}function G(A){if(A._status===-1){var z=A._result;z=z(),z.then(function(ue){(A._status===0||A._status===-1)&&(A._status=1,A._result=ue)},function(ue){(A._status===0||A._status===-1)&&(A._status=2,A._result=ue)}),A._status===-1&&(A._status=0,A._result=z)}if(A._status===1)return A._result.default;throw A._result}var oe={current:null},W={transition:null},re={ReactCurrentDispatcher:oe,ReactCurrentBatchConfig:W,ReactCurrentOwner:j};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:K,forEach:function(A,z,ue){K(A,function(){z.apply(this,arguments)},ue)},count:function(A){var z=0;return K(A,function(){z++}),z},toArray:function(A){return K(A,function(z){return z})||[]},only:function(A){if(!U(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Ae.Component=C,Ae.Fragment=t,Ae.Profiler=s,Ae.PureComponent=M,Ae.StrictMode=r,Ae.Suspense=h,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Ae.act=ee,Ae.cloneElement=function(A,z,ue){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var pe=b({},A.props),te=A.key,H=A.ref,ae=A._owner;if(z!=null){if(z.ref!==void 0&&(H=z.ref,ae=j.current),z.key!==void 0&&(te=""+z.key),A.type&&A.type.defaultProps)var we=A.type.defaultProps;for(ye in z)R.call(z,ye)&&!D.hasOwnProperty(ye)&&(pe[ye]=z[ye]===void 0&&we!==void 0?we[ye]:z[ye])}var ye=arguments.length-2;if(ye===1)pe.children=ue;else if(1<ye){we=Array(ye);for(var me=0;me<ye;me++)we[me]=arguments[me+2];pe.children=we}return{$$typeof:n,type:A.type,key:te,ref:H,props:pe,_owner:ae}},Ae.createContext=function(A){return A={$$typeof:a,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:l,_context:A},A.Consumer=A},Ae.createElement=V,Ae.createFactory=function(A){var z=V.bind(null,A);return z.type=A,z},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(A){return{$$typeof:c,render:A}},Ae.isValidElement=U,Ae.lazy=function(A){return{$$typeof:p,_payload:{_status:-1,_result:A},_init:G}},Ae.memo=function(A,z){return{$$typeof:d,type:A,compare:z===void 0?null:z}},Ae.startTransition=function(A){var z=W.transition;W.transition={};try{A()}finally{W.transition=z}},Ae.unstable_act=ee,Ae.useCallback=function(A,z){return oe.current.useCallback(A,z)},Ae.useContext=function(A){return oe.current.useContext(A)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(A){return oe.current.useDeferredValue(A)},Ae.useEffect=function(A,z){return oe.current.useEffect(A,z)},Ae.useId=function(){return oe.current.useId()},Ae.useImperativeHandle=function(A,z,ue){return oe.current.useImperativeHandle(A,z,ue)},Ae.useInsertionEffect=function(A,z){return oe.current.useInsertionEffect(A,z)},Ae.useLayoutEffect=function(A,z){return oe.current.useLayoutEffect(A,z)},Ae.useMemo=function(A,z){return oe.current.useMemo(A,z)},Ae.useReducer=function(A,z,ue){return oe.current.useReducer(A,z,ue)},Ae.useRef=function(A){return oe.current.useRef(A)},Ae.useState=function(A){return oe.current.useState(A)},Ae.useSyncExternalStore=function(A,z,ue){return oe.current.useSyncExternalStore(A,z,ue)},Ae.useTransition=function(){return oe.current.useTransition()},Ae.version="18.3.1",Ae}var Cm;function ud(){return Cm||(Cm=1,Oh.exports=zw()),Oh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Pm;function Fw(){if(Pm)return wo;Pm=1;var n=ud(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function a(c,h,d){var p,m={},x=null,k=null;d!==void 0&&(x=""+d),h.key!==void 0&&(x=""+h.key),h.ref!==void 0&&(k=h.ref);for(p in h)r.call(h,p)&&!l.hasOwnProperty(p)&&(m[p]=h[p]);if(c&&c.defaultProps)for(p in h=c.defaultProps,h)m[p]===void 0&&(m[p]=h[p]);return{$$typeof:e,type:c,key:x,ref:k,props:m,_owner:s.current}}return wo.Fragment=t,wo.jsx=a,wo.jsxs=a,wo}var Nm;function _w(){return Nm||(Nm=1,Sh.exports=Fw()),Sh.exports}var v=_w(),S=ud();const ot=$y(S);var ba={},Ch={exports:{}},Zt={},Ph={exports:{}},Nh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Am;function Hw(){return Am||(Am=1,(function(n){function e(W,re){var ee=W.length;W.push(re);e:for(;0<ee;){var A=ee-1>>>1,z=W[A];if(0<s(z,re))W[A]=re,W[ee]=z,ee=A;else break e}}function t(W){return W.length===0?null:W[0]}function r(W){if(W.length===0)return null;var re=W[0],ee=W.pop();if(ee!==re){W[0]=ee;e:for(var A=0,z=W.length,ue=z>>>1;A<ue;){var pe=2*(A+1)-1,te=W[pe],H=pe+1,ae=W[H];if(0>s(te,ee))H<z&&0>s(ae,te)?(W[A]=ae,W[H]=ee,A=H):(W[A]=te,W[pe]=ee,A=pe);else if(H<z&&0>s(ae,ee))W[A]=ae,W[H]=ee,A=H;else break e}}return re}function s(W,re){var ee=W.sortIndex-re.sortIndex;return ee!==0?ee:W.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var h=[],d=[],p=1,m=null,x=3,k=!1,b=!1,O=!1,C=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,M=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(W){for(var re=t(d);re!==null;){if(re.callback===null)r(d);else if(re.startTime<=W)r(d),re.sortIndex=re.expirationTime,e(h,re);else break;re=t(d)}}function B(W){if(O=!1,L(W),!b)if(t(h)!==null)b=!0,G(R);else{var re=t(d);re!==null&&oe(B,re.startTime-W)}}function R(W,re){b=!1,O&&(O=!1,P(V),V=-1),k=!0;var ee=x;try{for(L(re),m=t(h);m!==null&&(!(m.expirationTime>re)||W&&!J());){var A=m.callback;if(typeof A=="function"){m.callback=null,x=m.priorityLevel;var z=A(m.expirationTime<=re);re=n.unstable_now(),typeof z=="function"?m.callback=z:m===t(h)&&r(h),L(re)}else r(h);m=t(h)}if(m!==null)var ue=!0;else{var pe=t(d);pe!==null&&oe(B,pe.startTime-re),ue=!1}return ue}finally{m=null,x=ee,k=!1}}var j=!1,D=null,V=-1,$=5,U=-1;function J(){return!(n.unstable_now()-U<$)}function Q(){if(D!==null){var W=n.unstable_now();U=W;var re=!0;try{re=D(!0,W)}finally{re?Z():(j=!1,D=null)}}else j=!1}var Z;if(typeof M=="function")Z=function(){M(Q)};else if(typeof MessageChannel<"u"){var he=new MessageChannel,K=he.port2;he.port1.onmessage=Q,Z=function(){K.postMessage(null)}}else Z=function(){C(Q,0)};function G(W){D=W,j||(j=!0,Z())}function oe(W,re){V=C(function(){W(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){b||k||(b=!0,G(R))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):$=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return x},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(W){switch(x){case 1:case 2:case 3:var re=3;break;default:re=x}var ee=x;x=re;try{return W()}finally{x=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,re){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var ee=x;x=W;try{return re()}finally{x=ee}},n.unstable_scheduleCallback=function(W,re,ee){var A=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?A+ee:A):ee=A,W){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=ee+z,W={id:p++,callback:re,priorityLevel:W,startTime:ee,expirationTime:z,sortIndex:-1},ee>A?(W.sortIndex=ee,e(d,W),t(h)===null&&W===t(d)&&(O?(P(V),V=-1):O=!0,oe(B,ee-A))):(W.sortIndex=z,e(h,W),b||k||(b=!0,G(R))),W},n.unstable_shouldYield=J,n.unstable_wrapCallback=function(W){var re=x;return function(){var ee=x;x=re;try{return W.apply(this,arguments)}finally{x=ee}}}})(Nh)),Nh}var Em;function Vw(){return Em||(Em=1,Ph.exports=Hw()),Ph.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mm;function Ww(){if(Mm)return Zt;Mm=1;var n=ud(),e=Vw();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function l(i,o){a(i,o),a(i+"Capture",o)}function a(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,d=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,p={},m={};function x(i){return h.call(m,i)?!0:h.call(p,i)?!1:d.test(i)?m[i]=!0:(p[i]=!0,!1)}function k(i,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function b(i,o,u,f){if(o===null||typeof o>"u"||k(i,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function O(i,o,u,f,g,y,w){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=w}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new O(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];C[o]=new O(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new O(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new O(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new O(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new O(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new O(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new O(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new O(i,5,!1,i.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function M(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(P,M);C[o]=new O(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(P,M);C[o]=new O(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(P,M);C[o]=new O(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new O(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new O("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new O(i,1,!1,i.toLowerCase(),null,!0,!0)});function L(i,o,u,f){var g=C.hasOwnProperty(o)?C[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(b(o,u,g,f)&&(u=null),f||g===null?x(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):g.mustUseProperty?i[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,f=g.attributeNamespace,u===null?i.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?i.setAttributeNS(f,o,u):i.setAttribute(o,u))))}var B=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,R=Symbol.for("react.element"),j=Symbol.for("react.portal"),D=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),$=Symbol.for("react.profiler"),U=Symbol.for("react.provider"),J=Symbol.for("react.context"),Q=Symbol.for("react.forward_ref"),Z=Symbol.for("react.suspense"),he=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),G=Symbol.for("react.lazy"),oe=Symbol.for("react.offscreen"),W=Symbol.iterator;function re(i){return i===null||typeof i!="object"?null:(i=W&&i[W]||i["@@iterator"],typeof i=="function"?i:null)}var ee=Object.assign,A;function z(i){if(A===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);A=o&&o[1]||""}return`
`+A+i}var ue=!1;function pe(i,o){if(!i||ue)return"";ue=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(_){var f=_}Reflect.construct(i,[],o)}else{try{o.call()}catch(_){f=_}i.call(o.prototype)}else{try{throw Error()}catch(_){f=_}i()}}catch(_){if(_&&f&&typeof _.stack=="string"){for(var g=_.stack.split(`
`),y=f.stack.split(`
`),w=g.length-1,N=y.length-1;1<=w&&0<=N&&g[w]!==y[N];)N--;for(;1<=w&&0<=N;w--,N--)if(g[w]!==y[N]){if(w!==1||N!==1)do if(w--,N--,0>N||g[w]!==y[N]){var E=`
`+g[w].replace(" at new "," at ");return i.displayName&&E.includes("<anonymous>")&&(E=E.replace("<anonymous>",i.displayName)),E}while(1<=w&&0<=N);break}}}finally{ue=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?z(i):""}function te(i){switch(i.tag){case 5:return z(i.type);case 16:return z("Lazy");case 13:return z("Suspense");case 19:return z("SuspenseList");case 0:case 2:case 15:return i=pe(i.type,!1),i;case 11:return i=pe(i.type.render,!1),i;case 1:return i=pe(i.type,!0),i;default:return""}}function H(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case D:return"Fragment";case j:return"Portal";case $:return"Profiler";case V:return"StrictMode";case Z:return"Suspense";case he:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case J:return(i.displayName||"Context")+".Consumer";case U:return(i._context.displayName||"Context")+".Provider";case Q:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case K:return o=i.displayName||null,o!==null?o:H(i.type)||"Memo";case G:o=i._payload,i=i._init;try{return H(i(o))}catch{}}return null}function ae(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return H(o);case 8:return o===V?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function we(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function ye(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function me(i){var o=ye(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(w){f=""+w,y.call(this,w)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(w){f=""+w},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Ne(i){i._valueTracker||(i._valueTracker=me(i))}function Fe(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return i&&(f=ye(i)?i.checked?"true":"false":i.value),i=f,i!==u?(o.setValue(i),!0):!1}function Ve(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ke(i,o){var u=o.checked;return ee({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function Ct(i,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=we(o.value!=null?o.value:u),i._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function Cn(i,o){o=o.checked,o!=null&&L(i,"checked",o,!1)}function Ar(i,o){Cn(i,o);var u=we(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?Nn(i,o.type,u):o.hasOwnProperty("defaultValue")&&Nn(i,o.type,we(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function Pn(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function Nn(i,o,u){(o!=="number"||Ve(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var Pt=Array.isArray;function nn(i,o,u,f){if(i=i.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=o.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&f&&(i[u].defaultSelected=!0)}else{for(u=""+we(u),o=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function $n(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ee({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Un(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(Pt(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:we(u)}}function Er(i,o){var u=we(o.value),f=we(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),f!=null&&(i.defaultValue=""+f)}function di(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function Me(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function le(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?Me(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Re,Ut=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,g){MSApp.execUnsafeLocalFunction(function(){return i(o,u,f,g)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Re=Re||document.createElement("div"),Re.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Re.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function _e(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var lt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},pi=["Webkit","ms","Moz","O"];Object.keys(lt).forEach(function(i){pi.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),lt[o]=lt[i]})});function gi(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||lt.hasOwnProperty(i)&&lt[i]?(""+o).trim():o+"px"}function Mr(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=gi(u,o[u],f);u==="float"&&(u="cssFloat"),f?i.setProperty(u,g):i[u]=g}}var mi=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ur(i,o){if(o){if(mi[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Bs(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hi=null;function zs(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var Fs=null,Rr=null,Ge=null;function Nt(i){if(i=so(i)){if(typeof Fs!="function")throw Error(t(280));var o=i.stateNode;o&&(o=Bl(o),Fs(i.stateNode,i.type,o))}}function At(i){Rr?Ge?Ge.push(i):Ge=[i]:Rr=i}function An(){if(Rr){var i=Rr,o=Ge;if(Ge=Rr=null,Nt(i),o)for(i=0;i<o.length;i++)Nt(o[i])}}function Ft(i,o){return i(o)}function Et(){}var Xt=!1;function cr(i,o,u){if(Xt)return i(o,u);Xt=!0;try{return Ft(i,o,u)}finally{Xt=!1,(Rr!==null||Ge!==null)&&(Et(),An())}}function Ye(i,o){var u=i.stateNode;if(u===null)return null;var f=Bl(u);if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var dn=!1;if(c)try{var Mt={};Object.defineProperty(Mt,"passive",{get:function(){dn=!0}}),window.addEventListener("test",Mt,Mt),window.removeEventListener("test",Mt,Mt)}catch{dn=!1}function En(i,o,u,f,g,y,w,N,E){var _=Array.prototype.slice.call(arguments,3);try{o.apply(u,_)}catch(Y){this.onError(Y)}}var Mn=!1,Xn=null,rn=!1,hr=null,_s={onError:function(i){Mn=!0,Xn=i}};function Q1(i,o,u,f,g,y,w,N,E){Mn=!1,Xn=null,En.apply(_s,arguments)}function $1(i,o,u,f,g,y,w,N,E){if(Q1.apply(this,arguments),Mn){if(Mn){var _=Xn;Mn=!1,Xn=null}else throw Error(t(198));rn||(rn=!0,hr=_)}}function yi(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function Ud(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Xd(i){if(yi(i)!==i)throw Error(t(188))}function U1(i){var o=i.alternate;if(!o){if(o=yi(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,f=o;;){var g=u.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===u)return Xd(g),i;if(y===f)return Xd(g),o;y=y.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=y;else{for(var w=!1,N=g.child;N;){if(N===u){w=!0,u=g,f=y;break}if(N===f){w=!0,f=g,u=y;break}N=N.sibling}if(!w){for(N=y.child;N;){if(N===u){w=!0,u=y,f=g;break}if(N===f){w=!0,f=y,u=g;break}N=N.sibling}if(!w)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Kd(i){return i=U1(i),i!==null?qd(i):null}function qd(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=qd(i);if(o!==null)return o;i=i.sibling}return null}var Gd=e.unstable_scheduleCallback,Yd=e.unstable_cancelCallback,X1=e.unstable_shouldYield,K1=e.unstable_requestPaint,rt=e.unstable_now,q1=e.unstable_getCurrentPriorityLevel,Wu=e.unstable_ImmediatePriority,Jd=e.unstable_UserBlockingPriority,yl=e.unstable_NormalPriority,G1=e.unstable_LowPriority,Zd=e.unstable_IdlePriority,xl=null,Kn=null;function Y1(i){if(Kn&&typeof Kn.onCommitFiberRoot=="function")try{Kn.onCommitFiberRoot(xl,i,void 0,(i.current.flags&128)===128)}catch{}}var Rn=Math.clz32?Math.clz32:ek,J1=Math.log,Z1=Math.LN2;function ek(i){return i>>>=0,i===0?32:31-(J1(i)/Z1|0)|0}var vl=64,kl=4194304;function Hs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function wl(i,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,g=i.suspendedLanes,y=i.pingedLanes,w=u&268435455;if(w!==0){var N=w&~g;N!==0?f=Hs(N):(y&=w,y!==0&&(f=Hs(y)))}else w=u&~g,w!==0?f=Hs(w):y!==0&&(f=Hs(y));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,y=o&-o,g>=y||g===16&&(y&4194240)!==0))return o;if((f&4)!==0&&(f|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=f;0<o;)u=31-Rn(o),g=1<<u,f|=i[u],o&=~g;return f}function tk(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function nk(i,o){for(var u=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes;0<y;){var w=31-Rn(y),N=1<<w,E=g[w];E===-1?((N&u)===0||(N&f)!==0)&&(g[w]=tk(N,o)):E<=o&&(i.expiredLanes|=N),y&=~N}}function Qu(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function ep(){var i=vl;return vl<<=1,(vl&4194240)===0&&(vl=64),i}function $u(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function Vs(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Rn(o),i[o]=u}function rk(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<u;){var g=31-Rn(u),y=1<<g;o[g]=0,f[g]=-1,i[g]=-1,u&=~y}}function Uu(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var f=31-Rn(u),g=1<<f;g&o|i[f]&o&&(i[f]|=o),u&=~g}}var ze=0;function tp(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var np,Xu,rp,ip,sp,Ku=!1,bl=[],Tr=null,Dr=null,jr=null,Ws=new Map,Qs=new Map,Lr=[],ik="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function op(i,o){switch(i){case"focusin":case"focusout":Tr=null;break;case"dragenter":case"dragleave":Dr=null;break;case"mouseover":case"mouseout":jr=null;break;case"pointerover":case"pointerout":Ws.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qs.delete(o.pointerId)}}function $s(i,o,u,f,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},o!==null&&(o=so(o),o!==null&&Xu(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function sk(i,o,u,f,g){switch(o){case"focusin":return Tr=$s(Tr,i,o,u,f,g),!0;case"dragenter":return Dr=$s(Dr,i,o,u,f,g),!0;case"mouseover":return jr=$s(jr,i,o,u,f,g),!0;case"pointerover":var y=g.pointerId;return Ws.set(y,$s(Ws.get(y)||null,i,o,u,f,g)),!0;case"gotpointercapture":return y=g.pointerId,Qs.set(y,$s(Qs.get(y)||null,i,o,u,f,g)),!0}return!1}function lp(i){var o=xi(i.target);if(o!==null){var u=yi(o);if(u!==null){if(o=u.tag,o===13){if(o=Ud(u),o!==null){i.blockedOn=o,sp(i.priority,function(){rp(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function Sl(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Gu(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);Hi=f,u.target.dispatchEvent(f),Hi=null}else return o=so(u),o!==null&&Xu(o),i.blockedOn=u,!1;o.shift()}return!0}function ap(i,o,u){Sl(i)&&u.delete(o)}function ok(){Ku=!1,Tr!==null&&Sl(Tr)&&(Tr=null),Dr!==null&&Sl(Dr)&&(Dr=null),jr!==null&&Sl(jr)&&(jr=null),Ws.forEach(ap),Qs.forEach(ap)}function Us(i,o){i.blockedOn===o&&(i.blockedOn=null,Ku||(Ku=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,ok)))}function Xs(i){function o(g){return Us(g,i)}if(0<bl.length){Us(bl[0],i);for(var u=1;u<bl.length;u++){var f=bl[u];f.blockedOn===i&&(f.blockedOn=null)}}for(Tr!==null&&Us(Tr,i),Dr!==null&&Us(Dr,i),jr!==null&&Us(jr,i),Ws.forEach(o),Qs.forEach(o),u=0;u<Lr.length;u++)f=Lr[u],f.blockedOn===i&&(f.blockedOn=null);for(;0<Lr.length&&(u=Lr[0],u.blockedOn===null);)lp(u),u.blockedOn===null&&Lr.shift()}var Vi=B.ReactCurrentBatchConfig,Ol=!0;function lk(i,o,u,f){var g=ze,y=Vi.transition;Vi.transition=null;try{ze=1,qu(i,o,u,f)}finally{ze=g,Vi.transition=y}}function ak(i,o,u,f){var g=ze,y=Vi.transition;Vi.transition=null;try{ze=4,qu(i,o,u,f)}finally{ze=g,Vi.transition=y}}function qu(i,o,u,f){if(Ol){var g=Gu(i,o,u,f);if(g===null)dc(i,o,f,Cl,u),op(i,f);else if(sk(g,i,o,u,f))f.stopPropagation();else if(op(i,f),o&4&&-1<ik.indexOf(i)){for(;g!==null;){var y=so(g);if(y!==null&&np(y),y=Gu(i,o,u,f),y===null&&dc(i,o,f,Cl,u),y===g)break;g=y}g!==null&&f.stopPropagation()}else dc(i,o,f,null,u)}}var Cl=null;function Gu(i,o,u,f){if(Cl=null,i=zs(f),i=xi(i),i!==null)if(o=yi(i),o===null)i=null;else if(u=o.tag,u===13){if(i=Ud(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Cl=i,null}function up(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(q1()){case Wu:return 1;case Jd:return 4;case yl:case G1:return 16;case Zd:return 536870912;default:return 16}default:return 16}}var Ir=null,Yu=null,Pl=null;function cp(){if(Pl)return Pl;var i,o=Yu,u=o.length,f,g="value"in Ir?Ir.value:Ir.textContent,y=g.length;for(i=0;i<u&&o[i]===g[i];i++);var w=u-i;for(f=1;f<=w&&o[u-f]===g[y-f];f++);return Pl=g.slice(i,1<f?1-f:void 0)}function Nl(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Al(){return!0}function hp(){return!1}function sn(i){function o(u,f,g,y,w){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=w,this.currentTarget=null;for(var N in i)i.hasOwnProperty(N)&&(u=i[N],this[N]=u?u(y):y[N]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Al:hp,this.isPropagationStopped=hp,this}return ee(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Al)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Al)},persist:function(){},isPersistent:Al}),o}var Wi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ju=sn(Wi),Ks=ee({},Wi,{view:0,detail:0}),uk=sn(Ks),Zu,ec,qs,El=ee({},Ks,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:nc,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==qs&&(qs&&i.type==="mousemove"?(Zu=i.screenX-qs.screenX,ec=i.screenY-qs.screenY):ec=Zu=0,qs=i),Zu)},movementY:function(i){return"movementY"in i?i.movementY:ec}}),fp=sn(El),ck=ee({},El,{dataTransfer:0}),hk=sn(ck),fk=ee({},Ks,{relatedTarget:0}),tc=sn(fk),dk=ee({},Wi,{animationName:0,elapsedTime:0,pseudoElement:0}),pk=sn(dk),gk=ee({},Wi,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),mk=sn(gk),yk=ee({},Wi,{data:0}),dp=sn(yk),xk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},vk={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},kk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function wk(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=kk[i])?!!o[i]:!1}function nc(){return wk}var bk=ee({},Ks,{key:function(i){if(i.key){var o=xk[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Nl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?vk[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:nc,charCode:function(i){return i.type==="keypress"?Nl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Nl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),Sk=sn(bk),Ok=ee({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),pp=sn(Ok),Ck=ee({},Ks,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:nc}),Pk=sn(Ck),Nk=ee({},Wi,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ak=sn(Nk),Ek=ee({},El,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),Mk=sn(Ek),Rk=[9,13,27,32],rc=c&&"CompositionEvent"in window,Gs=null;c&&"documentMode"in document&&(Gs=document.documentMode);var Tk=c&&"TextEvent"in window&&!Gs,gp=c&&(!rc||Gs&&8<Gs&&11>=Gs),mp=" ",yp=!1;function xp(i,o){switch(i){case"keyup":return Rk.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function vp(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Qi=!1;function Dk(i,o){switch(i){case"compositionend":return vp(o);case"keypress":return o.which!==32?null:(yp=!0,mp);case"textInput":return i=o.data,i===mp&&yp?null:i;default:return null}}function jk(i,o){if(Qi)return i==="compositionend"||!rc&&xp(i,o)?(i=cp(),Pl=Yu=Ir=null,Qi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return gp&&o.locale!=="ko"?null:o.data;default:return null}}var Lk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function kp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!Lk[i.type]:o==="textarea"}function wp(i,o,u,f){At(f),o=jl(o,"onChange"),0<o.length&&(u=new Ju("onChange","change",null,u,f),i.push({event:u,listeners:o}))}var Ys=null,Js=null;function Ik(i){Fp(i,0)}function Ml(i){var o=qi(i);if(Fe(o))return i}function Bk(i,o){if(i==="change")return o}var bp=!1;if(c){var ic;if(c){var sc="oninput"in document;if(!sc){var Sp=document.createElement("div");Sp.setAttribute("oninput","return;"),sc=typeof Sp.oninput=="function"}ic=sc}else ic=!1;bp=ic&&(!document.documentMode||9<document.documentMode)}function Op(){Ys&&(Ys.detachEvent("onpropertychange",Cp),Js=Ys=null)}function Cp(i){if(i.propertyName==="value"&&Ml(Js)){var o=[];wp(o,Js,i,zs(i)),cr(Ik,o)}}function zk(i,o,u){i==="focusin"?(Op(),Ys=o,Js=u,Ys.attachEvent("onpropertychange",Cp)):i==="focusout"&&Op()}function Fk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Ml(Js)}function _k(i,o){if(i==="click")return Ml(o)}function Hk(i,o){if(i==="input"||i==="change")return Ml(o)}function Vk(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Tn=typeof Object.is=="function"?Object.is:Vk;function Zs(i,o){if(Tn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!h.call(o,g)||!Tn(i[g],o[g]))return!1}return!0}function Pp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function Np(i,o){var u=Pp(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=o&&f>=o)return{node:u,offset:o-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=Pp(u)}}function Ap(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?Ap(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Ep(){for(var i=window,o=Ve();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=Ve(i.document)}return o}function oc(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Wk(i){var o=Ep(),u=i.focusedElem,f=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&Ap(u.ownerDocument.documentElement,u)){if(f!==null&&oc(u)){if(o=f.start,i=f.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=u.textContent.length,y=Math.min(f.start,g);f=f.end===void 0?y:Math.min(f.end,g),!i.extend&&y>f&&(g=f,f=y,y=g),g=Np(u,y);var w=Np(u,f);g&&w&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==w.node||i.focusOffset!==w.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),y>f?(i.addRange(o),i.extend(w.node,w.offset)):(o.setEnd(w.node,w.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Qk=c&&"documentMode"in document&&11>=document.documentMode,$i=null,lc=null,eo=null,ac=!1;function Mp(i,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;ac||$i==null||$i!==Ve(f)||(f=$i,"selectionStart"in f&&oc(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),eo&&Zs(eo,f)||(eo=f,f=jl(lc,"onSelect"),0<f.length&&(o=new Ju("onSelect","select",null,o,u),i.push({event:o,listeners:f}),o.target=$i)))}function Rl(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Ui={animationend:Rl("Animation","AnimationEnd"),animationiteration:Rl("Animation","AnimationIteration"),animationstart:Rl("Animation","AnimationStart"),transitionend:Rl("Transition","TransitionEnd")},uc={},Rp={};c&&(Rp=document.createElement("div").style,"AnimationEvent"in window||(delete Ui.animationend.animation,delete Ui.animationiteration.animation,delete Ui.animationstart.animation),"TransitionEvent"in window||delete Ui.transitionend.transition);function Tl(i){if(uc[i])return uc[i];if(!Ui[i])return i;var o=Ui[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Rp)return uc[i]=o[u];return i}var Tp=Tl("animationend"),Dp=Tl("animationiteration"),jp=Tl("animationstart"),Lp=Tl("transitionend"),Ip=new Map,Bp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Br(i,o){Ip.set(i,o),l(o,[i])}for(var cc=0;cc<Bp.length;cc++){var hc=Bp[cc],$k=hc.toLowerCase(),Uk=hc[0].toUpperCase()+hc.slice(1);Br($k,"on"+Uk)}Br(Tp,"onAnimationEnd"),Br(Dp,"onAnimationIteration"),Br(jp,"onAnimationStart"),Br("dblclick","onDoubleClick"),Br("focusin","onFocus"),Br("focusout","onBlur"),Br(Lp,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var to="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xk=new Set("cancel close invalid load scroll toggle".split(" ").concat(to));function zp(i,o,u){var f=i.type||"unknown-event";i.currentTarget=u,$1(f,o,void 0,i),i.currentTarget=null}function Fp(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],g=f.event;f=f.listeners;e:{var y=void 0;if(o)for(var w=f.length-1;0<=w;w--){var N=f[w],E=N.instance,_=N.currentTarget;if(N=N.listener,E!==y&&g.isPropagationStopped())break e;zp(g,N,_),y=E}else for(w=0;w<f.length;w++){if(N=f[w],E=N.instance,_=N.currentTarget,N=N.listener,E!==y&&g.isPropagationStopped())break e;zp(g,N,_),y=E}}}if(rn)throw i=hr,rn=!1,hr=null,i}function $e(i,o){var u=o[vc];u===void 0&&(u=o[vc]=new Set);var f=i+"__bubble";u.has(f)||(_p(o,i,2,!1),u.add(f))}function fc(i,o,u){var f=0;o&&(f|=4),_p(u,i,f,o)}var Dl="_reactListening"+Math.random().toString(36).slice(2);function no(i){if(!i[Dl]){i[Dl]=!0,r.forEach(function(u){u!=="selectionchange"&&(Xk.has(u)||fc(u,!1,i),fc(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Dl]||(o[Dl]=!0,fc("selectionchange",!1,o))}}function _p(i,o,u,f){switch(up(o)){case 1:var g=lk;break;case 4:g=ak;break;default:g=qu}u=g.bind(null,o,u,i),g=void 0,!dn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(o,u,{capture:!0,passive:g}):i.addEventListener(o,u,!0):g!==void 0?i.addEventListener(o,u,{passive:g}):i.addEventListener(o,u,!1)}function dc(i,o,u,f,g){var y=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var w=f.tag;if(w===3||w===4){var N=f.stateNode.containerInfo;if(N===g||N.nodeType===8&&N.parentNode===g)break;if(w===4)for(w=f.return;w!==null;){var E=w.tag;if((E===3||E===4)&&(E=w.stateNode.containerInfo,E===g||E.nodeType===8&&E.parentNode===g))return;w=w.return}for(;N!==null;){if(w=xi(N),w===null)return;if(E=w.tag,E===5||E===6){f=y=w;continue e}N=N.parentNode}}f=f.return}cr(function(){var _=y,Y=zs(u),ne=[];e:{var q=Ip.get(i);if(q!==void 0){var de=Ju,xe=i;switch(i){case"keypress":if(Nl(u)===0)break e;case"keydown":case"keyup":de=Sk;break;case"focusin":xe="focus",de=tc;break;case"focusout":xe="blur",de=tc;break;case"beforeblur":case"afterblur":de=tc;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":de=fp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":de=hk;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":de=Pk;break;case Tp:case Dp:case jp:de=pk;break;case Lp:de=Ak;break;case"scroll":de=uk;break;case"wheel":de=Mk;break;case"copy":case"cut":case"paste":de=mk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":de=pp}var ve=(o&4)!==0,it=!ve&&i==="scroll",I=ve?q!==null?q+"Capture":null:q;ve=[];for(var T=_,F;T!==null;){F=T;var ie=F.stateNode;if(F.tag===5&&ie!==null&&(F=ie,I!==null&&(ie=Ye(T,I),ie!=null&&ve.push(ro(T,ie,F)))),it)break;T=T.return}0<ve.length&&(q=new de(q,xe,null,u,Y),ne.push({event:q,listeners:ve}))}}if((o&7)===0){e:{if(q=i==="mouseover"||i==="pointerover",de=i==="mouseout"||i==="pointerout",q&&u!==Hi&&(xe=u.relatedTarget||u.fromElement)&&(xi(xe)||xe[fr]))break e;if((de||q)&&(q=Y.window===Y?Y:(q=Y.ownerDocument)?q.defaultView||q.parentWindow:window,de?(xe=u.relatedTarget||u.toElement,de=_,xe=xe?xi(xe):null,xe!==null&&(it=yi(xe),xe!==it||xe.tag!==5&&xe.tag!==6)&&(xe=null)):(de=null,xe=_),de!==xe)){if(ve=fp,ie="onMouseLeave",I="onMouseEnter",T="mouse",(i==="pointerout"||i==="pointerover")&&(ve=pp,ie="onPointerLeave",I="onPointerEnter",T="pointer"),it=de==null?q:qi(de),F=xe==null?q:qi(xe),q=new ve(ie,T+"leave",de,u,Y),q.target=it,q.relatedTarget=F,ie=null,xi(Y)===_&&(ve=new ve(I,T+"enter",xe,u,Y),ve.target=F,ve.relatedTarget=it,ie=ve),it=ie,de&&xe)t:{for(ve=de,I=xe,T=0,F=ve;F;F=Xi(F))T++;for(F=0,ie=I;ie;ie=Xi(ie))F++;for(;0<T-F;)ve=Xi(ve),T--;for(;0<F-T;)I=Xi(I),F--;for(;T--;){if(ve===I||I!==null&&ve===I.alternate)break t;ve=Xi(ve),I=Xi(I)}ve=null}else ve=null;de!==null&&Hp(ne,q,de,ve,!1),xe!==null&&it!==null&&Hp(ne,it,xe,ve,!0)}}e:{if(q=_?qi(_):window,de=q.nodeName&&q.nodeName.toLowerCase(),de==="select"||de==="input"&&q.type==="file")var ke=Bk;else if(kp(q))if(bp)ke=Hk;else{ke=Fk;var Se=zk}else(de=q.nodeName)&&de.toLowerCase()==="input"&&(q.type==="checkbox"||q.type==="radio")&&(ke=_k);if(ke&&(ke=ke(i,_))){wp(ne,ke,u,Y);break e}Se&&Se(i,q,_),i==="focusout"&&(Se=q._wrapperState)&&Se.controlled&&q.type==="number"&&Nn(q,"number",q.value)}switch(Se=_?qi(_):window,i){case"focusin":(kp(Se)||Se.contentEditable==="true")&&($i=Se,lc=_,eo=null);break;case"focusout":eo=lc=$i=null;break;case"mousedown":ac=!0;break;case"contextmenu":case"mouseup":case"dragend":ac=!1,Mp(ne,u,Y);break;case"selectionchange":if(Qk)break;case"keydown":case"keyup":Mp(ne,u,Y)}var Oe;if(rc)e:{switch(i){case"compositionstart":var Ce="onCompositionStart";break e;case"compositionend":Ce="onCompositionEnd";break e;case"compositionupdate":Ce="onCompositionUpdate";break e}Ce=void 0}else Qi?xp(i,u)&&(Ce="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Ce="onCompositionStart");Ce&&(gp&&u.locale!=="ko"&&(Qi||Ce!=="onCompositionStart"?Ce==="onCompositionEnd"&&Qi&&(Oe=cp()):(Ir=Y,Yu="value"in Ir?Ir.value:Ir.textContent,Qi=!0)),Se=jl(_,Ce),0<Se.length&&(Ce=new dp(Ce,i,null,u,Y),ne.push({event:Ce,listeners:Se}),Oe?Ce.data=Oe:(Oe=vp(u),Oe!==null&&(Ce.data=Oe)))),(Oe=Tk?Dk(i,u):jk(i,u))&&(_=jl(_,"onBeforeInput"),0<_.length&&(Y=new dp("onBeforeInput","beforeinput",null,u,Y),ne.push({event:Y,listeners:_}),Y.data=Oe))}Fp(ne,o)})}function ro(i,o,u){return{instance:i,listener:o,currentTarget:u}}function jl(i,o){for(var u=o+"Capture",f=[];i!==null;){var g=i,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=Ye(i,u),y!=null&&f.unshift(ro(i,y,g)),y=Ye(i,o),y!=null&&f.push(ro(i,y,g))),i=i.return}return f}function Xi(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function Hp(i,o,u,f,g){for(var y=o._reactName,w=[];u!==null&&u!==f;){var N=u,E=N.alternate,_=N.stateNode;if(E!==null&&E===f)break;N.tag===5&&_!==null&&(N=_,g?(E=Ye(u,y),E!=null&&w.unshift(ro(u,E,N))):g||(E=Ye(u,y),E!=null&&w.push(ro(u,E,N)))),u=u.return}w.length!==0&&i.push({event:o,listeners:w})}var Kk=/\r\n?/g,qk=/\u0000|\uFFFD/g;function Vp(i){return(typeof i=="string"?i:""+i).replace(Kk,`
`).replace(qk,"")}function Ll(i,o,u){if(o=Vp(o),Vp(i)!==o&&u)throw Error(t(425))}function Il(){}var pc=null,gc=null;function mc(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var yc=typeof setTimeout=="function"?setTimeout:void 0,Gk=typeof clearTimeout=="function"?clearTimeout:void 0,Wp=typeof Promise=="function"?Promise:void 0,Yk=typeof queueMicrotask=="function"?queueMicrotask:typeof Wp<"u"?function(i){return Wp.resolve(null).then(i).catch(Jk)}:yc;function Jk(i){setTimeout(function(){throw i})}function xc(i,o){var u=o,f=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){i.removeChild(g),Xs(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);Xs(o)}function zr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function Qp(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var Ki=Math.random().toString(36).slice(2),qn="__reactFiber$"+Ki,io="__reactProps$"+Ki,fr="__reactContainer$"+Ki,vc="__reactEvents$"+Ki,Zk="__reactListeners$"+Ki,ew="__reactHandles$"+Ki;function xi(i){var o=i[qn];if(o)return o;for(var u=i.parentNode;u;){if(o=u[fr]||u[qn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=Qp(i);i!==null;){if(u=i[qn])return u;i=Qp(i)}return o}i=u,u=i.parentNode}return null}function so(i){return i=i[qn]||i[fr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function qi(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function Bl(i){return i[io]||null}var kc=[],Gi=-1;function Fr(i){return{current:i}}function Ue(i){0>Gi||(i.current=kc[Gi],kc[Gi]=null,Gi--)}function Qe(i,o){Gi++,kc[Gi]=i.current,i.current=o}var _r={},Rt=Fr(_r),Kt=Fr(!1),vi=_r;function Yi(i,o){var u=i.type.contextTypes;if(!u)return _r;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in u)g[y]=o[y];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function qt(i){return i=i.childContextTypes,i!=null}function zl(){Ue(Kt),Ue(Rt)}function $p(i,o,u){if(Rt.current!==_r)throw Error(t(168));Qe(Rt,o),Qe(Kt,u)}function Up(i,o,u){var f=i.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(t(108,ae(i)||"Unknown",g));return ee({},u,f)}function Fl(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||_r,vi=Rt.current,Qe(Rt,i),Qe(Kt,Kt.current),!0}function Xp(i,o,u){var f=i.stateNode;if(!f)throw Error(t(169));u?(i=Up(i,o,vi),f.__reactInternalMemoizedMergedChildContext=i,Ue(Kt),Ue(Rt),Qe(Rt,i)):Ue(Kt),Qe(Kt,u)}var dr=null,_l=!1,wc=!1;function Kp(i){dr===null?dr=[i]:dr.push(i)}function tw(i){_l=!0,Kp(i)}function Hr(){if(!wc&&dr!==null){wc=!0;var i=0,o=ze;try{var u=dr;for(ze=1;i<u.length;i++){var f=u[i];do f=f(!0);while(f!==null)}dr=null,_l=!1}catch(g){throw dr!==null&&(dr=dr.slice(i+1)),Gd(Wu,Hr),g}finally{ze=o,wc=!1}}return null}var Ji=[],Zi=0,Hl=null,Vl=0,pn=[],gn=0,ki=null,pr=1,gr="";function wi(i,o){Ji[Zi++]=Vl,Ji[Zi++]=Hl,Hl=i,Vl=o}function qp(i,o,u){pn[gn++]=pr,pn[gn++]=gr,pn[gn++]=ki,ki=i;var f=pr;i=gr;var g=32-Rn(f)-1;f&=~(1<<g),u+=1;var y=32-Rn(o)+g;if(30<y){var w=g-g%5;y=(f&(1<<w)-1).toString(32),f>>=w,g-=w,pr=1<<32-Rn(o)+g|u<<g|f,gr=y+i}else pr=1<<y|u<<g|f,gr=i}function bc(i){i.return!==null&&(wi(i,1),qp(i,1,0))}function Sc(i){for(;i===Hl;)Hl=Ji[--Zi],Ji[Zi]=null,Vl=Ji[--Zi],Ji[Zi]=null;for(;i===ki;)ki=pn[--gn],pn[gn]=null,gr=pn[--gn],pn[gn]=null,pr=pn[--gn],pn[gn]=null}var on=null,ln=null,qe=!1,Dn=null;function Gp(i,o){var u=vn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function Yp(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,on=i,ln=zr(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,on=i,ln=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=ki!==null?{id:pr,overflow:gr}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=vn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,on=i,ln=null,!0):!1;default:return!1}}function Oc(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Cc(i){if(qe){var o=ln;if(o){var u=o;if(!Yp(i,o)){if(Oc(i))throw Error(t(418));o=zr(u.nextSibling);var f=on;o&&Yp(i,o)?Gp(f,u):(i.flags=i.flags&-4097|2,qe=!1,on=i)}}else{if(Oc(i))throw Error(t(418));i.flags=i.flags&-4097|2,qe=!1,on=i}}}function Jp(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;on=i}function Wl(i){if(i!==on)return!1;if(!qe)return Jp(i),qe=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!mc(i.type,i.memoizedProps)),o&&(o=ln)){if(Oc(i))throw Zp(),Error(t(418));for(;o;)Gp(i,o),o=zr(o.nextSibling)}if(Jp(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){ln=zr(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}ln=null}}else ln=on?zr(i.stateNode.nextSibling):null;return!0}function Zp(){for(var i=ln;i;)i=zr(i.nextSibling)}function es(){ln=on=null,qe=!1}function Pc(i){Dn===null?Dn=[i]:Dn.push(i)}var nw=B.ReactCurrentBatchConfig;function oo(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,i));var g=f,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(w){var N=g.refs;w===null?delete N[y]:N[y]=w},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Ql(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function eg(i){var o=i._init;return o(i._payload)}function tg(i){function o(I,T){if(i){var F=I.deletions;F===null?(I.deletions=[T],I.flags|=16):F.push(T)}}function u(I,T){if(!i)return null;for(;T!==null;)o(I,T),T=T.sibling;return null}function f(I,T){for(I=new Map;T!==null;)T.key!==null?I.set(T.key,T):I.set(T.index,T),T=T.sibling;return I}function g(I,T){return I=qr(I,T),I.index=0,I.sibling=null,I}function y(I,T,F){return I.index=F,i?(F=I.alternate,F!==null?(F=F.index,F<T?(I.flags|=2,T):F):(I.flags|=2,T)):(I.flags|=1048576,T)}function w(I){return i&&I.alternate===null&&(I.flags|=2),I}function N(I,T,F,ie){return T===null||T.tag!==6?(T=yh(F,I.mode,ie),T.return=I,T):(T=g(T,F),T.return=I,T)}function E(I,T,F,ie){var ke=F.type;return ke===D?Y(I,T,F.props.children,ie,F.key):T!==null&&(T.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===G&&eg(ke)===T.type)?(ie=g(T,F.props),ie.ref=oo(I,T,F),ie.return=I,ie):(ie=pa(F.type,F.key,F.props,null,I.mode,ie),ie.ref=oo(I,T,F),ie.return=I,ie)}function _(I,T,F,ie){return T===null||T.tag!==4||T.stateNode.containerInfo!==F.containerInfo||T.stateNode.implementation!==F.implementation?(T=xh(F,I.mode,ie),T.return=I,T):(T=g(T,F.children||[]),T.return=I,T)}function Y(I,T,F,ie,ke){return T===null||T.tag!==7?(T=Ei(F,I.mode,ie,ke),T.return=I,T):(T=g(T,F),T.return=I,T)}function ne(I,T,F){if(typeof T=="string"&&T!==""||typeof T=="number")return T=yh(""+T,I.mode,F),T.return=I,T;if(typeof T=="object"&&T!==null){switch(T.$$typeof){case R:return F=pa(T.type,T.key,T.props,null,I.mode,F),F.ref=oo(I,null,T),F.return=I,F;case j:return T=xh(T,I.mode,F),T.return=I,T;case G:var ie=T._init;return ne(I,ie(T._payload),F)}if(Pt(T)||re(T))return T=Ei(T,I.mode,F,null),T.return=I,T;Ql(I,T)}return null}function q(I,T,F,ie){var ke=T!==null?T.key:null;if(typeof F=="string"&&F!==""||typeof F=="number")return ke!==null?null:N(I,T,""+F,ie);if(typeof F=="object"&&F!==null){switch(F.$$typeof){case R:return F.key===ke?E(I,T,F,ie):null;case j:return F.key===ke?_(I,T,F,ie):null;case G:return ke=F._init,q(I,T,ke(F._payload),ie)}if(Pt(F)||re(F))return ke!==null?null:Y(I,T,F,ie,null);Ql(I,F)}return null}function de(I,T,F,ie,ke){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return I=I.get(F)||null,N(T,I,""+ie,ke);if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case R:return I=I.get(ie.key===null?F:ie.key)||null,E(T,I,ie,ke);case j:return I=I.get(ie.key===null?F:ie.key)||null,_(T,I,ie,ke);case G:var Se=ie._init;return de(I,T,F,Se(ie._payload),ke)}if(Pt(ie)||re(ie))return I=I.get(F)||null,Y(T,I,ie,ke,null);Ql(T,ie)}return null}function xe(I,T,F,ie){for(var ke=null,Se=null,Oe=T,Ce=T=0,yt=null;Oe!==null&&Ce<F.length;Ce++){Oe.index>Ce?(yt=Oe,Oe=null):yt=Oe.sibling;var je=q(I,Oe,F[Ce],ie);if(je===null){Oe===null&&(Oe=yt);break}i&&Oe&&je.alternate===null&&o(I,Oe),T=y(je,T,Ce),Se===null?ke=je:Se.sibling=je,Se=je,Oe=yt}if(Ce===F.length)return u(I,Oe),qe&&wi(I,Ce),ke;if(Oe===null){for(;Ce<F.length;Ce++)Oe=ne(I,F[Ce],ie),Oe!==null&&(T=y(Oe,T,Ce),Se===null?ke=Oe:Se.sibling=Oe,Se=Oe);return qe&&wi(I,Ce),ke}for(Oe=f(I,Oe);Ce<F.length;Ce++)yt=de(Oe,I,Ce,F[Ce],ie),yt!==null&&(i&&yt.alternate!==null&&Oe.delete(yt.key===null?Ce:yt.key),T=y(yt,T,Ce),Se===null?ke=yt:Se.sibling=yt,Se=yt);return i&&Oe.forEach(function(Gr){return o(I,Gr)}),qe&&wi(I,Ce),ke}function ve(I,T,F,ie){var ke=re(F);if(typeof ke!="function")throw Error(t(150));if(F=ke.call(F),F==null)throw Error(t(151));for(var Se=ke=null,Oe=T,Ce=T=0,yt=null,je=F.next();Oe!==null&&!je.done;Ce++,je=F.next()){Oe.index>Ce?(yt=Oe,Oe=null):yt=Oe.sibling;var Gr=q(I,Oe,je.value,ie);if(Gr===null){Oe===null&&(Oe=yt);break}i&&Oe&&Gr.alternate===null&&o(I,Oe),T=y(Gr,T,Ce),Se===null?ke=Gr:Se.sibling=Gr,Se=Gr,Oe=yt}if(je.done)return u(I,Oe),qe&&wi(I,Ce),ke;if(Oe===null){for(;!je.done;Ce++,je=F.next())je=ne(I,je.value,ie),je!==null&&(T=y(je,T,Ce),Se===null?ke=je:Se.sibling=je,Se=je);return qe&&wi(I,Ce),ke}for(Oe=f(I,Oe);!je.done;Ce++,je=F.next())je=de(Oe,I,Ce,je.value,ie),je!==null&&(i&&je.alternate!==null&&Oe.delete(je.key===null?Ce:je.key),T=y(je,T,Ce),Se===null?ke=je:Se.sibling=je,Se=je);return i&&Oe.forEach(function(Lw){return o(I,Lw)}),qe&&wi(I,Ce),ke}function it(I,T,F,ie){if(typeof F=="object"&&F!==null&&F.type===D&&F.key===null&&(F=F.props.children),typeof F=="object"&&F!==null){switch(F.$$typeof){case R:e:{for(var ke=F.key,Se=T;Se!==null;){if(Se.key===ke){if(ke=F.type,ke===D){if(Se.tag===7){u(I,Se.sibling),T=g(Se,F.props.children),T.return=I,I=T;break e}}else if(Se.elementType===ke||typeof ke=="object"&&ke!==null&&ke.$$typeof===G&&eg(ke)===Se.type){u(I,Se.sibling),T=g(Se,F.props),T.ref=oo(I,Se,F),T.return=I,I=T;break e}u(I,Se);break}else o(I,Se);Se=Se.sibling}F.type===D?(T=Ei(F.props.children,I.mode,ie,F.key),T.return=I,I=T):(ie=pa(F.type,F.key,F.props,null,I.mode,ie),ie.ref=oo(I,T,F),ie.return=I,I=ie)}return w(I);case j:e:{for(Se=F.key;T!==null;){if(T.key===Se)if(T.tag===4&&T.stateNode.containerInfo===F.containerInfo&&T.stateNode.implementation===F.implementation){u(I,T.sibling),T=g(T,F.children||[]),T.return=I,I=T;break e}else{u(I,T);break}else o(I,T);T=T.sibling}T=xh(F,I.mode,ie),T.return=I,I=T}return w(I);case G:return Se=F._init,it(I,T,Se(F._payload),ie)}if(Pt(F))return xe(I,T,F,ie);if(re(F))return ve(I,T,F,ie);Ql(I,F)}return typeof F=="string"&&F!==""||typeof F=="number"?(F=""+F,T!==null&&T.tag===6?(u(I,T.sibling),T=g(T,F),T.return=I,I=T):(u(I,T),T=yh(F,I.mode,ie),T.return=I,I=T),w(I)):u(I,T)}return it}var ts=tg(!0),ng=tg(!1),$l=Fr(null),Ul=null,ns=null,Nc=null;function Ac(){Nc=ns=Ul=null}function Ec(i){var o=$l.current;Ue($l),i._currentValue=o}function Mc(i,o,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===u)break;i=i.return}}function rs(i,o){Ul=i,Nc=ns=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(Gt=!0),i.firstContext=null)}function mn(i){var o=i._currentValue;if(Nc!==i)if(i={context:i,memoizedValue:o,next:null},ns===null){if(Ul===null)throw Error(t(308));ns=i,Ul.dependencies={lanes:0,firstContext:i}}else ns=ns.next=i;return o}var bi=null;function Rc(i){bi===null?bi=[i]:bi.push(i)}function rg(i,o,u,f){var g=o.interleaved;return g===null?(u.next=u,Rc(o)):(u.next=g.next,g.next=u),o.interleaved=u,mr(i,f)}function mr(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Vr=!1;function Tc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ig(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function yr(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function Wr(i,o,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Te&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,mr(i,u)}return g=f.interleaved,g===null?(o.next=o,Rc(f)):(o.next=g.next,g.next=o),f.interleaved=o,mr(i,u)}function Xl(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,Uu(i,u)}}function sg(i,o){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var w={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?g=y=w:y=y.next=w,u=u.next}while(u!==null);y===null?g=y=o:y=y.next=o}else g=y=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,effects:f.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function Kl(i,o,u,f){var g=i.updateQueue;Vr=!1;var y=g.firstBaseUpdate,w=g.lastBaseUpdate,N=g.shared.pending;if(N!==null){g.shared.pending=null;var E=N,_=E.next;E.next=null,w===null?y=_:w.next=_,w=E;var Y=i.alternate;Y!==null&&(Y=Y.updateQueue,N=Y.lastBaseUpdate,N!==w&&(N===null?Y.firstBaseUpdate=_:N.next=_,Y.lastBaseUpdate=E))}if(y!==null){var ne=g.baseState;w=0,Y=_=E=null,N=y;do{var q=N.lane,de=N.eventTime;if((f&q)===q){Y!==null&&(Y=Y.next={eventTime:de,lane:0,tag:N.tag,payload:N.payload,callback:N.callback,next:null});e:{var xe=i,ve=N;switch(q=o,de=u,ve.tag){case 1:if(xe=ve.payload,typeof xe=="function"){ne=xe.call(de,ne,q);break e}ne=xe;break e;case 3:xe.flags=xe.flags&-65537|128;case 0:if(xe=ve.payload,q=typeof xe=="function"?xe.call(de,ne,q):xe,q==null)break e;ne=ee({},ne,q);break e;case 2:Vr=!0}}N.callback!==null&&N.lane!==0&&(i.flags|=64,q=g.effects,q===null?g.effects=[N]:q.push(N))}else de={eventTime:de,lane:q,tag:N.tag,payload:N.payload,callback:N.callback,next:null},Y===null?(_=Y=de,E=ne):Y=Y.next=de,w|=q;if(N=N.next,N===null){if(N=g.shared.pending,N===null)break;q=N,N=q.next,q.next=null,g.lastBaseUpdate=q,g.shared.pending=null}}while(!0);if(Y===null&&(E=ne),g.baseState=E,g.firstBaseUpdate=_,g.lastBaseUpdate=Y,o=g.shared.interleaved,o!==null){g=o;do w|=g.lane,g=g.next;while(g!==o)}else y===null&&(g.shared.lanes=0);Ci|=w,i.lanes=w,i.memoizedState=ne}}function og(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var f=i[o],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var lo={},Gn=Fr(lo),ao=Fr(lo),uo=Fr(lo);function Si(i){if(i===lo)throw Error(t(174));return i}function Dc(i,o){switch(Qe(uo,o),Qe(ao,i),Qe(Gn,lo),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:le(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=le(o,i)}Ue(Gn),Qe(Gn,o)}function is(){Ue(Gn),Ue(ao),Ue(uo)}function lg(i){Si(uo.current);var o=Si(Gn.current),u=le(o,i.type);o!==u&&(Qe(ao,i),Qe(Gn,u))}function jc(i){ao.current===i&&(Ue(Gn),Ue(ao))}var Je=Fr(0);function ql(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Lc=[];function Ic(){for(var i=0;i<Lc.length;i++)Lc[i]._workInProgressVersionPrimary=null;Lc.length=0}var Gl=B.ReactCurrentDispatcher,Bc=B.ReactCurrentBatchConfig,Oi=0,Ze=null,ht=null,gt=null,Yl=!1,co=!1,ho=0,rw=0;function Tt(){throw Error(t(321))}function zc(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Tn(i[u],o[u]))return!1;return!0}function Fc(i,o,u,f,g,y){if(Oi=y,Ze=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Gl.current=i===null||i.memoizedState===null?lw:aw,i=u(f,g),co){y=0;do{if(co=!1,ho=0,25<=y)throw Error(t(301));y+=1,gt=ht=null,o.updateQueue=null,Gl.current=uw,i=u(f,g)}while(co)}if(Gl.current=ea,o=ht!==null&&ht.next!==null,Oi=0,gt=ht=Ze=null,Yl=!1,o)throw Error(t(300));return i}function _c(){var i=ho!==0;return ho=0,i}function Yn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gt===null?Ze.memoizedState=gt=i:gt=gt.next=i,gt}function yn(){if(ht===null){var i=Ze.alternate;i=i!==null?i.memoizedState:null}else i=ht.next;var o=gt===null?Ze.memoizedState:gt.next;if(o!==null)gt=o,ht=i;else{if(i===null)throw Error(t(310));ht=i,i={memoizedState:ht.memoizedState,baseState:ht.baseState,baseQueue:ht.baseQueue,queue:ht.queue,next:null},gt===null?Ze.memoizedState=gt=i:gt=gt.next=i}return gt}function fo(i,o){return typeof o=="function"?o(i):o}function Hc(i){var o=yn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=ht,g=f.baseQueue,y=u.pending;if(y!==null){if(g!==null){var w=g.next;g.next=y.next,y.next=w}f.baseQueue=g=y,u.pending=null}if(g!==null){y=g.next,f=f.baseState;var N=w=null,E=null,_=y;do{var Y=_.lane;if((Oi&Y)===Y)E!==null&&(E=E.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),f=_.hasEagerState?_.eagerState:i(f,_.action);else{var ne={lane:Y,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};E===null?(N=E=ne,w=f):E=E.next=ne,Ze.lanes|=Y,Ci|=Y}_=_.next}while(_!==null&&_!==y);E===null?w=f:E.next=N,Tn(f,o.memoizedState)||(Gt=!0),o.memoizedState=f,o.baseState=w,o.baseQueue=E,u.lastRenderedState=f}if(i=u.interleaved,i!==null){g=i;do y=g.lane,Ze.lanes|=y,Ci|=y,g=g.next;while(g!==i)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function Vc(i){var o=yn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=u.dispatch,g=u.pending,y=o.memoizedState;if(g!==null){u.pending=null;var w=g=g.next;do y=i(y,w.action),w=w.next;while(w!==g);Tn(y,o.memoizedState)||(Gt=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,f]}function ag(){}function ug(i,o){var u=Ze,f=yn(),g=o(),y=!Tn(f.memoizedState,g);if(y&&(f.memoizedState=g,Gt=!0),f=f.queue,Wc(fg.bind(null,u,f,i),[i]),f.getSnapshot!==o||y||gt!==null&&gt.memoizedState.tag&1){if(u.flags|=2048,po(9,hg.bind(null,u,f,g,o),void 0,null),mt===null)throw Error(t(349));(Oi&30)!==0||cg(u,o,g)}return g}function cg(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Ze.updateQueue,o===null?(o={lastEffect:null,stores:null},Ze.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function hg(i,o,u,f){o.value=u,o.getSnapshot=f,dg(o)&&pg(i)}function fg(i,o,u){return u(function(){dg(o)&&pg(i)})}function dg(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Tn(i,u)}catch{return!0}}function pg(i){var o=mr(i,1);o!==null&&Bn(o,i,1,-1)}function gg(i){var o=Yn();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:fo,lastRenderedState:i},o.queue=i,i=i.dispatch=ow.bind(null,Ze,i),[o.memoizedState,i]}function po(i,o,u,f){return i={tag:i,create:o,destroy:u,deps:f,next:null},o=Ze.updateQueue,o===null?(o={lastEffect:null,stores:null},Ze.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,o.lastEffect=i)),i}function mg(){return yn().memoizedState}function Jl(i,o,u,f){var g=Yn();Ze.flags|=i,g.memoizedState=po(1|o,u,void 0,f===void 0?null:f)}function Zl(i,o,u,f){var g=yn();f=f===void 0?null:f;var y=void 0;if(ht!==null){var w=ht.memoizedState;if(y=w.destroy,f!==null&&zc(f,w.deps)){g.memoizedState=po(o,u,y,f);return}}Ze.flags|=i,g.memoizedState=po(1|o,u,y,f)}function yg(i,o){return Jl(8390656,8,i,o)}function Wc(i,o){return Zl(2048,8,i,o)}function xg(i,o){return Zl(4,2,i,o)}function vg(i,o){return Zl(4,4,i,o)}function kg(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function wg(i,o,u){return u=u!=null?u.concat([i]):null,Zl(4,4,kg.bind(null,o,i),u)}function Qc(){}function bg(i,o){var u=yn();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&zc(o,f[1])?f[0]:(u.memoizedState=[i,o],i)}function Sg(i,o){var u=yn();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&zc(o,f[1])?f[0]:(i=i(),u.memoizedState=[i,o],i)}function Og(i,o,u){return(Oi&21)===0?(i.baseState&&(i.baseState=!1,Gt=!0),i.memoizedState=u):(Tn(u,o)||(u=ep(),Ze.lanes|=u,Ci|=u,i.baseState=!0),o)}function iw(i,o){var u=ze;ze=u!==0&&4>u?u:4,i(!0);var f=Bc.transition;Bc.transition={};try{i(!1),o()}finally{ze=u,Bc.transition=f}}function Cg(){return yn().memoizedState}function sw(i,o,u){var f=Xr(i);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},Pg(i))Ng(o,u);else if(u=rg(i,o,u,f),u!==null){var g=Ht();Bn(u,i,f,g),Ag(u,o,f)}}function ow(i,o,u){var f=Xr(i),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(Pg(i))Ng(o,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var w=o.lastRenderedState,N=y(w,u);if(g.hasEagerState=!0,g.eagerState=N,Tn(N,w)){var E=o.interleaved;E===null?(g.next=g,Rc(o)):(g.next=E.next,E.next=g),o.interleaved=g;return}}catch{}finally{}u=rg(i,o,g,f),u!==null&&(g=Ht(),Bn(u,i,f,g),Ag(u,o,f))}}function Pg(i){var o=i.alternate;return i===Ze||o!==null&&o===Ze}function Ng(i,o){co=Yl=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function Ag(i,o,u){if((u&4194240)!==0){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,Uu(i,u)}}var ea={readContext:mn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},lw={readContext:mn,useCallback:function(i,o){return Yn().memoizedState=[i,o===void 0?null:o],i},useContext:mn,useEffect:yg,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Jl(4194308,4,kg.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Jl(4194308,4,i,o)},useInsertionEffect:function(i,o){return Jl(4,2,i,o)},useMemo:function(i,o){var u=Yn();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var f=Yn();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},f.queue=i,i=i.dispatch=sw.bind(null,Ze,i),[f.memoizedState,i]},useRef:function(i){var o=Yn();return i={current:i},o.memoizedState=i},useState:gg,useDebugValue:Qc,useDeferredValue:function(i){return Yn().memoizedState=i},useTransition:function(){var i=gg(!1),o=i[0];return i=iw.bind(null,i[1]),Yn().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var f=Ze,g=Yn();if(qe){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),mt===null)throw Error(t(349));(Oi&30)!==0||cg(f,o,u)}g.memoizedState=u;var y={value:u,getSnapshot:o};return g.queue=y,yg(fg.bind(null,f,y,i),[i]),f.flags|=2048,po(9,hg.bind(null,f,y,u,o),void 0,null),u},useId:function(){var i=Yn(),o=mt.identifierPrefix;if(qe){var u=gr,f=pr;u=(f&~(1<<32-Rn(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=ho++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=rw++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},aw={readContext:mn,useCallback:bg,useContext:mn,useEffect:Wc,useImperativeHandle:wg,useInsertionEffect:xg,useLayoutEffect:vg,useMemo:Sg,useReducer:Hc,useRef:mg,useState:function(){return Hc(fo)},useDebugValue:Qc,useDeferredValue:function(i){var o=yn();return Og(o,ht.memoizedState,i)},useTransition:function(){var i=Hc(fo)[0],o=yn().memoizedState;return[i,o]},useMutableSource:ag,useSyncExternalStore:ug,useId:Cg,unstable_isNewReconciler:!1},uw={readContext:mn,useCallback:bg,useContext:mn,useEffect:Wc,useImperativeHandle:wg,useInsertionEffect:xg,useLayoutEffect:vg,useMemo:Sg,useReducer:Vc,useRef:mg,useState:function(){return Vc(fo)},useDebugValue:Qc,useDeferredValue:function(i){var o=yn();return ht===null?o.memoizedState=i:Og(o,ht.memoizedState,i)},useTransition:function(){var i=Vc(fo)[0],o=yn().memoizedState;return[i,o]},useMutableSource:ag,useSyncExternalStore:ug,useId:Cg,unstable_isNewReconciler:!1};function jn(i,o){if(i&&i.defaultProps){o=ee({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function $c(i,o,u,f){o=i.memoizedState,u=u(f,o),u=u==null?o:ee({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var ta={isMounted:function(i){return(i=i._reactInternals)?yi(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var f=Ht(),g=Xr(i),y=yr(f,g);y.payload=o,u!=null&&(y.callback=u),o=Wr(i,y,g),o!==null&&(Bn(o,i,g,f),Xl(o,i,g))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var f=Ht(),g=Xr(i),y=yr(f,g);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=Wr(i,y,g),o!==null&&(Bn(o,i,g,f),Xl(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Ht(),f=Xr(i),g=yr(u,f);g.tag=2,o!=null&&(g.callback=o),o=Wr(i,g,f),o!==null&&(Bn(o,i,f,u),Xl(o,i,f))}};function Eg(i,o,u,f,g,y,w){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,y,w):o.prototype&&o.prototype.isPureReactComponent?!Zs(u,f)||!Zs(g,y):!0}function Mg(i,o,u){var f=!1,g=_r,y=o.contextType;return typeof y=="object"&&y!==null?y=mn(y):(g=qt(o)?vi:Rt.current,f=o.contextTypes,y=(f=f!=null)?Yi(i,g):_r),o=new o(u,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=ta,i.stateNode=o,o._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=y),o}function Rg(i,o,u,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==i&&ta.enqueueReplaceState(o,o.state,null)}function Uc(i,o,u,f){var g=i.stateNode;g.props=u,g.state=i.memoizedState,g.refs={},Tc(i);var y=o.contextType;typeof y=="object"&&y!==null?g.context=mn(y):(y=qt(o)?vi:Rt.current,g.context=Yi(i,y)),g.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&($c(i,o,y,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&ta.enqueueReplaceState(g,g.state,null),Kl(i,u,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function ss(i,o){try{var u="",f=o;do u+=te(f),f=f.return;while(f);var g=u}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:g,digest:null}}function Xc(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Kc(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var cw=typeof WeakMap=="function"?WeakMap:Map;function Tg(i,o,u){u=yr(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){aa||(aa=!0,uh=f),Kc(i,o)},u}function Dg(i,o,u){u=yr(-1,u),u.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;u.payload=function(){return f(g)},u.callback=function(){Kc(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){Kc(i,o),typeof f!="function"&&($r===null?$r=new Set([this]):$r.add(this));var w=o.stack;this.componentDidCatch(o.value,{componentStack:w!==null?w:""})}),u}function jg(i,o,u){var f=i.pingCache;if(f===null){f=i.pingCache=new cw;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(g.add(u),i=Ow.bind(null,i,o,u),o.then(i,i))}function Lg(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Ig(i,o,u,f,g){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=yr(-1,1),o.tag=2,Wr(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var hw=B.ReactCurrentOwner,Gt=!1;function _t(i,o,u,f){o.child=i===null?ng(o,null,u,f):ts(o,i.child,u,f)}function Bg(i,o,u,f,g){u=u.render;var y=o.ref;return rs(o,g),f=Fc(i,o,u,f,y,g),u=_c(),i!==null&&!Gt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,xr(i,o,g)):(qe&&u&&bc(o),o.flags|=1,_t(i,o,f,g),o.child)}function zg(i,o,u,f,g){if(i===null){var y=u.type;return typeof y=="function"&&!mh(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=y,Fg(i,o,y,f,g)):(i=pa(u.type,null,f,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&g)===0){var w=y.memoizedProps;if(u=u.compare,u=u!==null?u:Zs,u(w,f)&&i.ref===o.ref)return xr(i,o,g)}return o.flags|=1,i=qr(y,f),i.ref=o.ref,i.return=o,o.child=i}function Fg(i,o,u,f,g){if(i!==null){var y=i.memoizedProps;if(Zs(y,f)&&i.ref===o.ref)if(Gt=!1,o.pendingProps=f=y,(i.lanes&g)!==0)(i.flags&131072)!==0&&(Gt=!0);else return o.lanes=i.lanes,xr(i,o,g)}return qc(i,o,u,f,g)}function _g(i,o,u){var f=o.pendingProps,g=f.children,y=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qe(ls,an),an|=u;else{if((u&1073741824)===0)return i=y!==null?y.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,Qe(ls,an),an|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=y!==null?y.baseLanes:u,Qe(ls,an),an|=f}else y!==null?(f=y.baseLanes|u,o.memoizedState=null):f=u,Qe(ls,an),an|=f;return _t(i,o,g,u),o.child}function Hg(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function qc(i,o,u,f,g){var y=qt(u)?vi:Rt.current;return y=Yi(o,y),rs(o,g),u=Fc(i,o,u,f,y,g),f=_c(),i!==null&&!Gt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,xr(i,o,g)):(qe&&f&&bc(o),o.flags|=1,_t(i,o,u,g),o.child)}function Vg(i,o,u,f,g){if(qt(u)){var y=!0;Fl(o)}else y=!1;if(rs(o,g),o.stateNode===null)ra(i,o),Mg(o,u,f),Uc(o,u,f,g),f=!0;else if(i===null){var w=o.stateNode,N=o.memoizedProps;w.props=N;var E=w.context,_=u.contextType;typeof _=="object"&&_!==null?_=mn(_):(_=qt(u)?vi:Rt.current,_=Yi(o,_));var Y=u.getDerivedStateFromProps,ne=typeof Y=="function"||typeof w.getSnapshotBeforeUpdate=="function";ne||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==f||E!==_)&&Rg(o,w,f,_),Vr=!1;var q=o.memoizedState;w.state=q,Kl(o,f,w,g),E=o.memoizedState,N!==f||q!==E||Kt.current||Vr?(typeof Y=="function"&&($c(o,u,Y,f),E=o.memoizedState),(N=Vr||Eg(o,u,N,f,q,E,_))?(ne||typeof w.UNSAFE_componentWillMount!="function"&&typeof w.componentWillMount!="function"||(typeof w.componentWillMount=="function"&&w.componentWillMount(),typeof w.UNSAFE_componentWillMount=="function"&&w.UNSAFE_componentWillMount()),typeof w.componentDidMount=="function"&&(o.flags|=4194308)):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=E),w.props=f,w.state=E,w.context=_,f=N):(typeof w.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{w=o.stateNode,ig(i,o),N=o.memoizedProps,_=o.type===o.elementType?N:jn(o.type,N),w.props=_,ne=o.pendingProps,q=w.context,E=u.contextType,typeof E=="object"&&E!==null?E=mn(E):(E=qt(u)?vi:Rt.current,E=Yi(o,E));var de=u.getDerivedStateFromProps;(Y=typeof de=="function"||typeof w.getSnapshotBeforeUpdate=="function")||typeof w.UNSAFE_componentWillReceiveProps!="function"&&typeof w.componentWillReceiveProps!="function"||(N!==ne||q!==E)&&Rg(o,w,f,E),Vr=!1,q=o.memoizedState,w.state=q,Kl(o,f,w,g);var xe=o.memoizedState;N!==ne||q!==xe||Kt.current||Vr?(typeof de=="function"&&($c(o,u,de,f),xe=o.memoizedState),(_=Vr||Eg(o,u,_,f,q,xe,E)||!1)?(Y||typeof w.UNSAFE_componentWillUpdate!="function"&&typeof w.componentWillUpdate!="function"||(typeof w.componentWillUpdate=="function"&&w.componentWillUpdate(f,xe,E),typeof w.UNSAFE_componentWillUpdate=="function"&&w.UNSAFE_componentWillUpdate(f,xe,E)),typeof w.componentDidUpdate=="function"&&(o.flags|=4),typeof w.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof w.componentDidUpdate!="function"||N===i.memoizedProps&&q===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&q===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=xe),w.props=f,w.state=xe,w.context=E,f=_):(typeof w.componentDidUpdate!="function"||N===i.memoizedProps&&q===i.memoizedState||(o.flags|=4),typeof w.getSnapshotBeforeUpdate!="function"||N===i.memoizedProps&&q===i.memoizedState||(o.flags|=1024),f=!1)}return Gc(i,o,u,f,y,g)}function Gc(i,o,u,f,g,y){Hg(i,o);var w=(o.flags&128)!==0;if(!f&&!w)return g&&Xp(o,u,!1),xr(i,o,y);f=o.stateNode,hw.current=o;var N=w&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,i!==null&&w?(o.child=ts(o,i.child,null,y),o.child=ts(o,null,N,y)):_t(i,o,N,y),o.memoizedState=f.state,g&&Xp(o,u,!0),o.child}function Wg(i){var o=i.stateNode;o.pendingContext?$p(i,o.pendingContext,o.pendingContext!==o.context):o.context&&$p(i,o.context,!1),Dc(i,o.containerInfo)}function Qg(i,o,u,f,g){return es(),Pc(g),o.flags|=256,_t(i,o,u,f),o.child}var Yc={dehydrated:null,treeContext:null,retryLane:0};function Jc(i){return{baseLanes:i,cachePool:null,transitions:null}}function $g(i,o,u){var f=o.pendingProps,g=Je.current,y=!1,w=(o.flags&128)!==0,N;if((N=w)||(N=i!==null&&i.memoizedState===null?!1:(g&2)!==0),N?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),Qe(Je,g&1),i===null)return Cc(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(w=f.children,i=f.fallback,y?(f=o.mode,y=o.child,w={mode:"hidden",children:w},(f&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=w):y=ga(w,f,0,null),i=Ei(i,f,u,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Jc(u),o.memoizedState=Yc,i):Zc(o,w));if(g=i.memoizedState,g!==null&&(N=g.dehydrated,N!==null))return fw(i,o,w,f,N,g,u);if(y){y=f.fallback,w=o.mode,g=i.child,N=g.sibling;var E={mode:"hidden",children:f.children};return(w&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=E,o.deletions=null):(f=qr(g,E),f.subtreeFlags=g.subtreeFlags&14680064),N!==null?y=qr(N,y):(y=Ei(y,w,u,null),y.flags|=2),y.return=o,f.return=o,f.sibling=y,o.child=f,f=y,y=o.child,w=i.child.memoizedState,w=w===null?Jc(u):{baseLanes:w.baseLanes|u,cachePool:null,transitions:w.transitions},y.memoizedState=w,y.childLanes=i.childLanes&~u,o.memoizedState=Yc,f}return y=i.child,i=y.sibling,f=qr(y,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=u),f.return=o,f.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=f,o.memoizedState=null,f}function Zc(i,o){return o=ga({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function na(i,o,u,f){return f!==null&&Pc(f),ts(o,i.child,null,u),i=Zc(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function fw(i,o,u,f,g,y,w){if(u)return o.flags&256?(o.flags&=-257,f=Xc(Error(t(422))),na(i,o,w,f)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=f.fallback,g=o.mode,f=ga({mode:"visible",children:f.children},g,0,null),y=Ei(y,g,w,null),y.flags|=2,f.return=o,y.return=o,f.sibling=y,o.child=f,(o.mode&1)!==0&&ts(o,i.child,null,w),o.child.memoizedState=Jc(w),o.memoizedState=Yc,y);if((o.mode&1)===0)return na(i,o,w,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var N=f.dgst;return f=N,y=Error(t(419)),f=Xc(y,f,void 0),na(i,o,w,f)}if(N=(w&i.childLanes)!==0,Gt||N){if(f=mt,f!==null){switch(w&-w){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|w))!==0?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,mr(i,g),Bn(f,i,g,-1))}return gh(),f=Xc(Error(t(421))),na(i,o,w,f)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=Cw.bind(null,i),g._reactRetry=o,null):(i=y.treeContext,ln=zr(g.nextSibling),on=o,qe=!0,Dn=null,i!==null&&(pn[gn++]=pr,pn[gn++]=gr,pn[gn++]=ki,pr=i.id,gr=i.overflow,ki=o),o=Zc(o,f.children),o.flags|=4096,o)}function Ug(i,o,u){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),Mc(i.return,o,u)}function eh(i,o,u,f,g){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=u,y.tailMode=g)}function Xg(i,o,u){var f=o.pendingProps,g=f.revealOrder,y=f.tail;if(_t(i,o,f.children,u),f=Je.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&Ug(i,u,o);else if(i.tag===19)Ug(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(Qe(Je,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)i=u.alternate,i!==null&&ql(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),eh(o,!1,g,u,y);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&ql(i)===null){o.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}eh(o,!0,u,null,y);break;case"together":eh(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ra(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function xr(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),Ci|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=qr(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=qr(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function dw(i,o,u){switch(o.tag){case 3:Wg(o),es();break;case 5:lg(o);break;case 1:qt(o.type)&&Fl(o);break;case 4:Dc(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;Qe($l,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(Qe(Je,Je.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?$g(i,o,u):(Qe(Je,Je.current&1),i=xr(i,o,u),i!==null?i.sibling:null);Qe(Je,Je.current&1);break;case 19:if(f=(u&o.childLanes)!==0,(i.flags&128)!==0){if(f)return Xg(i,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),Qe(Je,Je.current),f)break;return null;case 22:case 23:return o.lanes=0,_g(i,o,u)}return xr(i,o,u)}var Kg,th,qg,Gg;Kg=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},th=function(){},qg=function(i,o,u,f){var g=i.memoizedProps;if(g!==f){i=o.stateNode,Si(Gn.current);var y=null;switch(u){case"input":g=Ke(i,g),f=Ke(i,f),y=[];break;case"select":g=ee({},g,{value:void 0}),f=ee({},f,{value:void 0}),y=[];break;case"textarea":g=$n(i,g),f=$n(i,f),y=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Il)}ur(u,f);var w;u=null;for(_ in g)if(!f.hasOwnProperty(_)&&g.hasOwnProperty(_)&&g[_]!=null)if(_==="style"){var N=g[_];for(w in N)N.hasOwnProperty(w)&&(u||(u={}),u[w]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?y||(y=[]):(y=y||[]).push(_,null));for(_ in f){var E=f[_];if(N=g!=null?g[_]:void 0,f.hasOwnProperty(_)&&E!==N&&(E!=null||N!=null))if(_==="style")if(N){for(w in N)!N.hasOwnProperty(w)||E&&E.hasOwnProperty(w)||(u||(u={}),u[w]="");for(w in E)E.hasOwnProperty(w)&&N[w]!==E[w]&&(u||(u={}),u[w]=E[w])}else u||(y||(y=[]),y.push(_,u)),u=E;else _==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,N=N?N.__html:void 0,E!=null&&N!==E&&(y=y||[]).push(_,E)):_==="children"?typeof E!="string"&&typeof E!="number"||(y=y||[]).push(_,""+E):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(s.hasOwnProperty(_)?(E!=null&&_==="onScroll"&&$e("scroll",i),y||N===E||(y=[])):(y=y||[]).push(_,E))}u&&(y=y||[]).push("style",u);var _=y;(o.updateQueue=_)&&(o.flags|=4)}},Gg=function(i,o,u,f){u!==f&&(o.flags|=4)};function go(i,o){if(!qe)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Dt(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(o)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=u,o}function pw(i,o,u){var f=o.pendingProps;switch(Sc(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Dt(o),null;case 1:return qt(o.type)&&zl(),Dt(o),null;case 3:return f=o.stateNode,is(),Ue(Kt),Ue(Rt),Ic(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Wl(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Dn!==null&&(fh(Dn),Dn=null))),th(i,o),Dt(o),null;case 5:jc(o);var g=Si(uo.current);if(u=o.type,i!==null&&o.stateNode!=null)qg(i,o,u,f,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return Dt(o),null}if(i=Si(Gn.current),Wl(o)){f=o.stateNode,u=o.type;var y=o.memoizedProps;switch(f[qn]=o,f[io]=y,i=(o.mode&1)!==0,u){case"dialog":$e("cancel",f),$e("close",f);break;case"iframe":case"object":case"embed":$e("load",f);break;case"video":case"audio":for(g=0;g<to.length;g++)$e(to[g],f);break;case"source":$e("error",f);break;case"img":case"image":case"link":$e("error",f),$e("load",f);break;case"details":$e("toggle",f);break;case"input":Ct(f,y),$e("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!y.multiple},$e("invalid",f);break;case"textarea":Un(f,y),$e("invalid",f)}ur(u,y),g=null;for(var w in y)if(y.hasOwnProperty(w)){var N=y[w];w==="children"?typeof N=="string"?f.textContent!==N&&(y.suppressHydrationWarning!==!0&&Ll(f.textContent,N,i),g=["children",N]):typeof N=="number"&&f.textContent!==""+N&&(y.suppressHydrationWarning!==!0&&Ll(f.textContent,N,i),g=["children",""+N]):s.hasOwnProperty(w)&&N!=null&&w==="onScroll"&&$e("scroll",f)}switch(u){case"input":Ne(f),Pn(f,y,!0);break;case"textarea":Ne(f),di(f);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(f.onclick=Il)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{w=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=Me(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=w.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=w.createElement(u,{is:f.is}):(i=w.createElement(u),u==="select"&&(w=i,f.multiple?w.multiple=!0:f.size&&(w.size=f.size))):i=w.createElementNS(i,u),i[qn]=o,i[io]=f,Kg(i,o,!1,!1),o.stateNode=i;e:{switch(w=Bs(u,f),u){case"dialog":$e("cancel",i),$e("close",i),g=f;break;case"iframe":case"object":case"embed":$e("load",i),g=f;break;case"video":case"audio":for(g=0;g<to.length;g++)$e(to[g],i);g=f;break;case"source":$e("error",i),g=f;break;case"img":case"image":case"link":$e("error",i),$e("load",i),g=f;break;case"details":$e("toggle",i),g=f;break;case"input":Ct(i,f),g=Ke(i,f),$e("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=ee({},f,{value:void 0}),$e("invalid",i);break;case"textarea":Un(i,f),g=$n(i,f),$e("invalid",i);break;default:g=f}ur(u,g),N=g;for(y in N)if(N.hasOwnProperty(y)){var E=N[y];y==="style"?Mr(i,E):y==="dangerouslySetInnerHTML"?(E=E?E.__html:void 0,E!=null&&Ut(i,E)):y==="children"?typeof E=="string"?(u!=="textarea"||E!=="")&&_e(i,E):typeof E=="number"&&_e(i,""+E):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?E!=null&&y==="onScroll"&&$e("scroll",i):E!=null&&L(i,y,E,w))}switch(u){case"input":Ne(i),Pn(i,f,!1);break;case"textarea":Ne(i),di(i);break;case"option":f.value!=null&&i.setAttribute("value",""+we(f.value));break;case"select":i.multiple=!!f.multiple,y=f.value,y!=null?nn(i,!!f.multiple,y,!1):f.defaultValue!=null&&nn(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Il)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Dt(o),null;case 6:if(i&&o.stateNode!=null)Gg(i,o,i.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(u=Si(uo.current),Si(Gn.current),Wl(o)){if(f=o.stateNode,u=o.memoizedProps,f[qn]=o,(y=f.nodeValue!==u)&&(i=on,i!==null))switch(i.tag){case 3:Ll(f.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Ll(f.nodeValue,u,(i.mode&1)!==0)}y&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[qn]=o,o.stateNode=f}return Dt(o),null;case 13:if(Ue(Je),f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(qe&&ln!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Zp(),es(),o.flags|=98560,y=!1;else if(y=Wl(o),f!==null&&f.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[qn]=o}else es(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Dt(o),y=!1}else Dn!==null&&(fh(Dn),Dn=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(Je.current&1)!==0?ft===0&&(ft=3):gh())),o.updateQueue!==null&&(o.flags|=4),Dt(o),null);case 4:return is(),th(i,o),i===null&&no(o.stateNode.containerInfo),Dt(o),null;case 10:return Ec(o.type._context),Dt(o),null;case 17:return qt(o.type)&&zl(),Dt(o),null;case 19:if(Ue(Je),y=o.memoizedState,y===null)return Dt(o),null;if(f=(o.flags&128)!==0,w=y.rendering,w===null)if(f)go(y,!1);else{if(ft!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(w=ql(i),w!==null){for(o.flags|=128,go(y,!1),f=w.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)y=u,i=f,y.flags&=14680066,w=y.alternate,w===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=w.childLanes,y.lanes=w.lanes,y.child=w.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=w.memoizedProps,y.memoizedState=w.memoizedState,y.updateQueue=w.updateQueue,y.type=w.type,i=w.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return Qe(Je,Je.current&1|2),o.child}i=i.sibling}y.tail!==null&&rt()>as&&(o.flags|=128,f=!0,go(y,!1),o.lanes=4194304)}else{if(!f)if(i=ql(w),i!==null){if(o.flags|=128,f=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),go(y,!0),y.tail===null&&y.tailMode==="hidden"&&!w.alternate&&!qe)return Dt(o),null}else 2*rt()-y.renderingStartTime>as&&u!==1073741824&&(o.flags|=128,f=!0,go(y,!1),o.lanes=4194304);y.isBackwards?(w.sibling=o.child,o.child=w):(u=y.last,u!==null?u.sibling=w:o.child=w,y.last=w)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=rt(),o.sibling=null,u=Je.current,Qe(Je,f?u&1|2:u&1),o):(Dt(o),null);case 22:case 23:return ph(),f=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(an&1073741824)!==0&&(Dt(o),o.subtreeFlags&6&&(o.flags|=8192)):Dt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function gw(i,o){switch(Sc(o),o.tag){case 1:return qt(o.type)&&zl(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return is(),Ue(Kt),Ue(Rt),Ic(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return jc(o),null;case 13:if(Ue(Je),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));es()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Ue(Je),null;case 4:return is(),null;case 10:return Ec(o.type._context),null;case 22:case 23:return ph(),null;case 24:return null;default:return null}}var ia=!1,jt=!1,mw=typeof WeakSet=="function"?WeakSet:Set,ge=null;function os(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){et(i,o,f)}else u.current=null}function nh(i,o,u){try{u()}catch(f){et(i,o,f)}}var Yg=!1;function yw(i,o){if(pc=Ol,i=Ep(),oc(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var w=0,N=-1,E=-1,_=0,Y=0,ne=i,q=null;t:for(;;){for(var de;ne!==u||g!==0&&ne.nodeType!==3||(N=w+g),ne!==y||f!==0&&ne.nodeType!==3||(E=w+f),ne.nodeType===3&&(w+=ne.nodeValue.length),(de=ne.firstChild)!==null;)q=ne,ne=de;for(;;){if(ne===i)break t;if(q===u&&++_===g&&(N=w),q===y&&++Y===f&&(E=w),(de=ne.nextSibling)!==null)break;ne=q,q=ne.parentNode}ne=de}u=N===-1||E===-1?null:{start:N,end:E}}else u=null}u=u||{start:0,end:0}}else u=null;for(gc={focusedElem:i,selectionRange:u},Ol=!1,ge=o;ge!==null;)if(o=ge,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,ge=i;else for(;ge!==null;){o=ge;try{var xe=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(xe!==null){var ve=xe.memoizedProps,it=xe.memoizedState,I=o.stateNode,T=I.getSnapshotBeforeUpdate(o.elementType===o.type?ve:jn(o.type,ve),it);I.__reactInternalSnapshotBeforeUpdate=T}break;case 3:var F=o.stateNode.containerInfo;F.nodeType===1?F.textContent="":F.nodeType===9&&F.documentElement&&F.removeChild(F.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ie){et(o,o.return,ie)}if(i=o.sibling,i!==null){i.return=o.return,ge=i;break}ge=o.return}return xe=Yg,Yg=!1,xe}function mo(i,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var y=g.destroy;g.destroy=void 0,y!==void 0&&nh(o,u,y)}g=g.next}while(g!==f)}}function sa(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function rh(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function Jg(i){var o=i.alternate;o!==null&&(i.alternate=null,Jg(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[qn],delete o[io],delete o[vc],delete o[Zk],delete o[ew])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Zg(i){return i.tag===5||i.tag===3||i.tag===4}function em(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Zg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function ih(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Il));else if(f!==4&&(i=i.child,i!==null))for(ih(i,o,u),i=i.sibling;i!==null;)ih(i,o,u),i=i.sibling}function sh(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(sh(i,o,u),i=i.sibling;i!==null;)sh(i,o,u),i=i.sibling}var wt=null,Ln=!1;function Qr(i,o,u){for(u=u.child;u!==null;)tm(i,o,u),u=u.sibling}function tm(i,o,u){if(Kn&&typeof Kn.onCommitFiberUnmount=="function")try{Kn.onCommitFiberUnmount(xl,u)}catch{}switch(u.tag){case 5:jt||os(u,o);case 6:var f=wt,g=Ln;wt=null,Qr(i,o,u),wt=f,Ln=g,wt!==null&&(Ln?(i=wt,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):wt.removeChild(u.stateNode));break;case 18:wt!==null&&(Ln?(i=wt,u=u.stateNode,i.nodeType===8?xc(i.parentNode,u):i.nodeType===1&&xc(i,u),Xs(i)):xc(wt,u.stateNode));break;case 4:f=wt,g=Ln,wt=u.stateNode.containerInfo,Ln=!0,Qr(i,o,u),wt=f,Ln=g;break;case 0:case 11:case 14:case 15:if(!jt&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var y=g,w=y.destroy;y=y.tag,w!==void 0&&((y&2)!==0||(y&4)!==0)&&nh(u,o,w),g=g.next}while(g!==f)}Qr(i,o,u);break;case 1:if(!jt&&(os(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(N){et(u,o,N)}Qr(i,o,u);break;case 21:Qr(i,o,u);break;case 22:u.mode&1?(jt=(f=jt)||u.memoizedState!==null,Qr(i,o,u),jt=f):Qr(i,o,u);break;default:Qr(i,o,u)}}function nm(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new mw),o.forEach(function(f){var g=Pw.bind(null,i,f);u.has(f)||(u.add(f),f.then(g,g))})}}function In(i,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var y=i,w=o,N=w;e:for(;N!==null;){switch(N.tag){case 5:wt=N.stateNode,Ln=!1;break e;case 3:wt=N.stateNode.containerInfo,Ln=!0;break e;case 4:wt=N.stateNode.containerInfo,Ln=!0;break e}N=N.return}if(wt===null)throw Error(t(160));tm(y,w,g),wt=null,Ln=!1;var E=g.alternate;E!==null&&(E.return=null),g.return=null}catch(_){et(g,o,_)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)rm(o,i),o=o.sibling}function rm(i,o){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(In(o,i),Jn(i),f&4){try{mo(3,i,i.return),sa(3,i)}catch(ve){et(i,i.return,ve)}try{mo(5,i,i.return)}catch(ve){et(i,i.return,ve)}}break;case 1:In(o,i),Jn(i),f&512&&u!==null&&os(u,u.return);break;case 5:if(In(o,i),Jn(i),f&512&&u!==null&&os(u,u.return),i.flags&32){var g=i.stateNode;try{_e(g,"")}catch(ve){et(i,i.return,ve)}}if(f&4&&(g=i.stateNode,g!=null)){var y=i.memoizedProps,w=u!==null?u.memoizedProps:y,N=i.type,E=i.updateQueue;if(i.updateQueue=null,E!==null)try{N==="input"&&y.type==="radio"&&y.name!=null&&Cn(g,y),Bs(N,w);var _=Bs(N,y);for(w=0;w<E.length;w+=2){var Y=E[w],ne=E[w+1];Y==="style"?Mr(g,ne):Y==="dangerouslySetInnerHTML"?Ut(g,ne):Y==="children"?_e(g,ne):L(g,Y,ne,_)}switch(N){case"input":Ar(g,y);break;case"textarea":Er(g,y);break;case"select":var q=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var de=y.value;de!=null?nn(g,!!y.multiple,de,!1):q!==!!y.multiple&&(y.defaultValue!=null?nn(g,!!y.multiple,y.defaultValue,!0):nn(g,!!y.multiple,y.multiple?[]:"",!1))}g[io]=y}catch(ve){et(i,i.return,ve)}}break;case 6:if(In(o,i),Jn(i),f&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,y=i.memoizedProps;try{g.nodeValue=y}catch(ve){et(i,i.return,ve)}}break;case 3:if(In(o,i),Jn(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Xs(o.containerInfo)}catch(ve){et(i,i.return,ve)}break;case 4:In(o,i),Jn(i);break;case 13:In(o,i),Jn(i),g=i.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(ah=rt())),f&4&&nm(i);break;case 22:if(Y=u!==null&&u.memoizedState!==null,i.mode&1?(jt=(_=jt)||Y,In(o,i),jt=_):In(o,i),Jn(i),f&8192){if(_=i.memoizedState!==null,(i.stateNode.isHidden=_)&&!Y&&(i.mode&1)!==0)for(ge=i,Y=i.child;Y!==null;){for(ne=ge=Y;ge!==null;){switch(q=ge,de=q.child,q.tag){case 0:case 11:case 14:case 15:mo(4,q,q.return);break;case 1:os(q,q.return);var xe=q.stateNode;if(typeof xe.componentWillUnmount=="function"){f=q,u=q.return;try{o=f,xe.props=o.memoizedProps,xe.state=o.memoizedState,xe.componentWillUnmount()}catch(ve){et(f,u,ve)}}break;case 5:os(q,q.return);break;case 22:if(q.memoizedState!==null){om(ne);continue}}de!==null?(de.return=q,ge=de):om(ne)}Y=Y.sibling}e:for(Y=null,ne=i;;){if(ne.tag===5){if(Y===null){Y=ne;try{g=ne.stateNode,_?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(N=ne.stateNode,E=ne.memoizedProps.style,w=E!=null&&E.hasOwnProperty("display")?E.display:null,N.style.display=gi("display",w))}catch(ve){et(i,i.return,ve)}}}else if(ne.tag===6){if(Y===null)try{ne.stateNode.nodeValue=_?"":ne.memoizedProps}catch(ve){et(i,i.return,ve)}}else if((ne.tag!==22&&ne.tag!==23||ne.memoizedState===null||ne===i)&&ne.child!==null){ne.child.return=ne,ne=ne.child;continue}if(ne===i)break e;for(;ne.sibling===null;){if(ne.return===null||ne.return===i)break e;Y===ne&&(Y=null),ne=ne.return}Y===ne&&(Y=null),ne.sibling.return=ne.return,ne=ne.sibling}}break;case 19:In(o,i),Jn(i),f&4&&nm(i);break;case 21:break;default:In(o,i),Jn(i)}}function Jn(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(Zg(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&(_e(g,""),f.flags&=-33);var y=em(i);sh(i,y,g);break;case 3:case 4:var w=f.stateNode.containerInfo,N=em(i);ih(i,N,w);break;default:throw Error(t(161))}}catch(E){et(i,i.return,E)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function xw(i,o,u){ge=i,im(i)}function im(i,o,u){for(var f=(i.mode&1)!==0;ge!==null;){var g=ge,y=g.child;if(g.tag===22&&f){var w=g.memoizedState!==null||ia;if(!w){var N=g.alternate,E=N!==null&&N.memoizedState!==null||jt;N=ia;var _=jt;if(ia=w,(jt=E)&&!_)for(ge=g;ge!==null;)w=ge,E=w.child,w.tag===22&&w.memoizedState!==null?lm(g):E!==null?(E.return=w,ge=E):lm(g);for(;y!==null;)ge=y,im(y),y=y.sibling;ge=g,ia=N,jt=_}sm(i)}else(g.subtreeFlags&8772)!==0&&y!==null?(y.return=g,ge=y):sm(i)}}function sm(i){for(;ge!==null;){var o=ge;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:jt||sa(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!jt)if(u===null)f.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:jn(o.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&og(o,y,f);break;case 3:var w=o.updateQueue;if(w!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}og(o,w,u)}break;case 5:var N=o.stateNode;if(u===null&&o.flags&4){u=N;var E=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":E.autoFocus&&u.focus();break;case"img":E.src&&(u.src=E.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var _=o.alternate;if(_!==null){var Y=_.memoizedState;if(Y!==null){var ne=Y.dehydrated;ne!==null&&Xs(ne)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}jt||o.flags&512&&rh(o)}catch(q){et(o,o.return,q)}}if(o===i){ge=null;break}if(u=o.sibling,u!==null){u.return=o.return,ge=u;break}ge=o.return}}function om(i){for(;ge!==null;){var o=ge;if(o===i){ge=null;break}var u=o.sibling;if(u!==null){u.return=o.return,ge=u;break}ge=o.return}}function lm(i){for(;ge!==null;){var o=ge;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{sa(4,o)}catch(E){et(o,u,E)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(E){et(o,g,E)}}var y=o.return;try{rh(o)}catch(E){et(o,y,E)}break;case 5:var w=o.return;try{rh(o)}catch(E){et(o,w,E)}}}catch(E){et(o,o.return,E)}if(o===i){ge=null;break}var N=o.sibling;if(N!==null){N.return=o.return,ge=N;break}ge=o.return}}var vw=Math.ceil,oa=B.ReactCurrentDispatcher,oh=B.ReactCurrentOwner,xn=B.ReactCurrentBatchConfig,Te=0,mt=null,at=null,bt=0,an=0,ls=Fr(0),ft=0,yo=null,Ci=0,la=0,lh=0,xo=null,Yt=null,ah=0,as=1/0,vr=null,aa=!1,uh=null,$r=null,ua=!1,Ur=null,ca=0,vo=0,ch=null,ha=-1,fa=0;function Ht(){return(Te&6)!==0?rt():ha!==-1?ha:ha=rt()}function Xr(i){return(i.mode&1)===0?1:(Te&2)!==0&&bt!==0?bt&-bt:nw.transition!==null?(fa===0&&(fa=ep()),fa):(i=ze,i!==0||(i=window.event,i=i===void 0?16:up(i.type)),i)}function Bn(i,o,u,f){if(50<vo)throw vo=0,ch=null,Error(t(185));Vs(i,u,f),((Te&2)===0||i!==mt)&&(i===mt&&((Te&2)===0&&(la|=u),ft===4&&Kr(i,bt)),Jt(i,f),u===1&&Te===0&&(o.mode&1)===0&&(as=rt()+500,_l&&Hr()))}function Jt(i,o){var u=i.callbackNode;nk(i,o);var f=wl(i,i===mt?bt:0);if(f===0)u!==null&&Yd(u),i.callbackNode=null,i.callbackPriority=0;else if(o=f&-f,i.callbackPriority!==o){if(u!=null&&Yd(u),o===1)i.tag===0?tw(um.bind(null,i)):Kp(um.bind(null,i)),Yk(function(){(Te&6)===0&&Hr()}),u=null;else{switch(tp(f)){case 1:u=Wu;break;case 4:u=Jd;break;case 16:u=yl;break;case 536870912:u=Zd;break;default:u=yl}u=ym(u,am.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function am(i,o){if(ha=-1,fa=0,(Te&6)!==0)throw Error(t(327));var u=i.callbackNode;if(us()&&i.callbackNode!==u)return null;var f=wl(i,i===mt?bt:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||o)o=da(i,f);else{o=f;var g=Te;Te|=2;var y=hm();(mt!==i||bt!==o)&&(vr=null,as=rt()+500,Ni(i,o));do try{bw();break}catch(N){cm(i,N)}while(!0);Ac(),oa.current=y,Te=g,at!==null?o=0:(mt=null,bt=0,o=ft)}if(o!==0){if(o===2&&(g=Qu(i),g!==0&&(f=g,o=hh(i,g))),o===1)throw u=yo,Ni(i,0),Kr(i,f),Jt(i,rt()),u;if(o===6)Kr(i,f);else{if(g=i.current.alternate,(f&30)===0&&!kw(g)&&(o=da(i,f),o===2&&(y=Qu(i),y!==0&&(f=y,o=hh(i,y))),o===1))throw u=yo,Ni(i,0),Kr(i,f),Jt(i,rt()),u;switch(i.finishedWork=g,i.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:Ai(i,Yt,vr);break;case 3:if(Kr(i,f),(f&130023424)===f&&(o=ah+500-rt(),10<o)){if(wl(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){Ht(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=yc(Ai.bind(null,i,Yt,vr),o);break}Ai(i,Yt,vr);break;case 4:if(Kr(i,f),(f&4194240)===f)break;for(o=i.eventTimes,g=-1;0<f;){var w=31-Rn(f);y=1<<w,w=o[w],w>g&&(g=w),f&=~y}if(f=g,f=rt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*vw(f/1960))-f,10<f){i.timeoutHandle=yc(Ai.bind(null,i,Yt,vr),f);break}Ai(i,Yt,vr);break;case 5:Ai(i,Yt,vr);break;default:throw Error(t(329))}}}return Jt(i,rt()),i.callbackNode===u?am.bind(null,i):null}function hh(i,o){var u=xo;return i.current.memoizedState.isDehydrated&&(Ni(i,o).flags|=256),i=da(i,o),i!==2&&(o=Yt,Yt=u,o!==null&&fh(o)),i}function fh(i){Yt===null?Yt=i:Yt.push.apply(Yt,i)}function kw(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],y=g.getSnapshot;g=g.value;try{if(!Tn(y(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function Kr(i,o){for(o&=~lh,o&=~la,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-Rn(o),f=1<<u;i[u]=-1,o&=~f}}function um(i){if((Te&6)!==0)throw Error(t(327));us();var o=wl(i,0);if((o&1)===0)return Jt(i,rt()),null;var u=da(i,o);if(i.tag!==0&&u===2){var f=Qu(i);f!==0&&(o=f,u=hh(i,f))}if(u===1)throw u=yo,Ni(i,0),Kr(i,o),Jt(i,rt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Ai(i,Yt,vr),Jt(i,rt()),null}function dh(i,o){var u=Te;Te|=1;try{return i(o)}finally{Te=u,Te===0&&(as=rt()+500,_l&&Hr())}}function Pi(i){Ur!==null&&Ur.tag===0&&(Te&6)===0&&us();var o=Te;Te|=1;var u=xn.transition,f=ze;try{if(xn.transition=null,ze=1,i)return i()}finally{ze=f,xn.transition=u,Te=o,(Te&6)===0&&Hr()}}function ph(){an=ls.current,Ue(ls)}function Ni(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,Gk(u)),at!==null)for(u=at.return;u!==null;){var f=u;switch(Sc(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&zl();break;case 3:is(),Ue(Kt),Ue(Rt),Ic();break;case 5:jc(f);break;case 4:is();break;case 13:Ue(Je);break;case 19:Ue(Je);break;case 10:Ec(f.type._context);break;case 22:case 23:ph()}u=u.return}if(mt=i,at=i=qr(i.current,null),bt=an=o,ft=0,yo=null,lh=la=Ci=0,Yt=xo=null,bi!==null){for(o=0;o<bi.length;o++)if(u=bi[o],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,y=u.pending;if(y!==null){var w=y.next;y.next=g,f.next=w}u.pending=f}bi=null}return i}function cm(i,o){do{var u=at;try{if(Ac(),Gl.current=ea,Yl){for(var f=Ze.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}Yl=!1}if(Oi=0,gt=ht=Ze=null,co=!1,ho=0,oh.current=null,u===null||u.return===null){ft=1,yo=o,at=null;break}e:{var y=i,w=u.return,N=u,E=o;if(o=bt,N.flags|=32768,E!==null&&typeof E=="object"&&typeof E.then=="function"){var _=E,Y=N,ne=Y.tag;if((Y.mode&1)===0&&(ne===0||ne===11||ne===15)){var q=Y.alternate;q?(Y.updateQueue=q.updateQueue,Y.memoizedState=q.memoizedState,Y.lanes=q.lanes):(Y.updateQueue=null,Y.memoizedState=null)}var de=Lg(w);if(de!==null){de.flags&=-257,Ig(de,w,N,y,o),de.mode&1&&jg(y,_,o),o=de,E=_;var xe=o.updateQueue;if(xe===null){var ve=new Set;ve.add(E),o.updateQueue=ve}else xe.add(E);break e}else{if((o&1)===0){jg(y,_,o),gh();break e}E=Error(t(426))}}else if(qe&&N.mode&1){var it=Lg(w);if(it!==null){(it.flags&65536)===0&&(it.flags|=256),Ig(it,w,N,y,o),Pc(ss(E,N));break e}}y=E=ss(E,N),ft!==4&&(ft=2),xo===null?xo=[y]:xo.push(y),y=w;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var I=Tg(y,E,o);sg(y,I);break e;case 1:N=E;var T=y.type,F=y.stateNode;if((y.flags&128)===0&&(typeof T.getDerivedStateFromError=="function"||F!==null&&typeof F.componentDidCatch=="function"&&($r===null||!$r.has(F)))){y.flags|=65536,o&=-o,y.lanes|=o;var ie=Dg(y,N,o);sg(y,ie);break e}}y=y.return}while(y!==null)}dm(u)}catch(ke){o=ke,at===u&&u!==null&&(at=u=u.return);continue}break}while(!0)}function hm(){var i=oa.current;return oa.current=ea,i===null?ea:i}function gh(){(ft===0||ft===3||ft===2)&&(ft=4),mt===null||(Ci&268435455)===0&&(la&268435455)===0||Kr(mt,bt)}function da(i,o){var u=Te;Te|=2;var f=hm();(mt!==i||bt!==o)&&(vr=null,Ni(i,o));do try{ww();break}catch(g){cm(i,g)}while(!0);if(Ac(),Te=u,oa.current=f,at!==null)throw Error(t(261));return mt=null,bt=0,ft}function ww(){for(;at!==null;)fm(at)}function bw(){for(;at!==null&&!X1();)fm(at)}function fm(i){var o=mm(i.alternate,i,an);i.memoizedProps=i.pendingProps,o===null?dm(i):at=o,oh.current=null}function dm(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=pw(u,o,an),u!==null){at=u;return}}else{if(u=gw(u,o),u!==null){u.flags&=32767,at=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{ft=6,at=null;return}}if(o=o.sibling,o!==null){at=o;return}at=o=i}while(o!==null);ft===0&&(ft=5)}function Ai(i,o,u){var f=ze,g=xn.transition;try{xn.transition=null,ze=1,Sw(i,o,u,f)}finally{xn.transition=g,ze=f}return null}function Sw(i,o,u,f){do us();while(Ur!==null);if((Te&6)!==0)throw Error(t(327));u=i.finishedWork;var g=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=u.lanes|u.childLanes;if(rk(i,y),i===mt&&(at=mt=null,bt=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||ua||(ua=!0,ym(yl,function(){return us(),null})),y=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||y){y=xn.transition,xn.transition=null;var w=ze;ze=1;var N=Te;Te|=4,oh.current=null,yw(i,u),rm(u,i),Wk(gc),Ol=!!pc,gc=pc=null,i.current=u,xw(u),K1(),Te=N,ze=w,xn.transition=y}else i.current=u;if(ua&&(ua=!1,Ur=i,ca=g),y=i.pendingLanes,y===0&&($r=null),Y1(u.stateNode),Jt(i,rt()),o!==null)for(f=i.onRecoverableError,u=0;u<o.length;u++)g=o[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(aa)throw aa=!1,i=uh,uh=null,i;return(ca&1)!==0&&i.tag!==0&&us(),y=i.pendingLanes,(y&1)!==0?i===ch?vo++:(vo=0,ch=i):vo=0,Hr(),null}function us(){if(Ur!==null){var i=tp(ca),o=xn.transition,u=ze;try{if(xn.transition=null,ze=16>i?16:i,Ur===null)var f=!1;else{if(i=Ur,Ur=null,ca=0,(Te&6)!==0)throw Error(t(331));var g=Te;for(Te|=4,ge=i.current;ge!==null;){var y=ge,w=y.child;if((ge.flags&16)!==0){var N=y.deletions;if(N!==null){for(var E=0;E<N.length;E++){var _=N[E];for(ge=_;ge!==null;){var Y=ge;switch(Y.tag){case 0:case 11:case 15:mo(8,Y,y)}var ne=Y.child;if(ne!==null)ne.return=Y,ge=ne;else for(;ge!==null;){Y=ge;var q=Y.sibling,de=Y.return;if(Jg(Y),Y===_){ge=null;break}if(q!==null){q.return=de,ge=q;break}ge=de}}}var xe=y.alternate;if(xe!==null){var ve=xe.child;if(ve!==null){xe.child=null;do{var it=ve.sibling;ve.sibling=null,ve=it}while(ve!==null)}}ge=y}}if((y.subtreeFlags&2064)!==0&&w!==null)w.return=y,ge=w;else e:for(;ge!==null;){if(y=ge,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:mo(9,y,y.return)}var I=y.sibling;if(I!==null){I.return=y.return,ge=I;break e}ge=y.return}}var T=i.current;for(ge=T;ge!==null;){w=ge;var F=w.child;if((w.subtreeFlags&2064)!==0&&F!==null)F.return=w,ge=F;else e:for(w=T;ge!==null;){if(N=ge,(N.flags&2048)!==0)try{switch(N.tag){case 0:case 11:case 15:sa(9,N)}}catch(ke){et(N,N.return,ke)}if(N===w){ge=null;break e}var ie=N.sibling;if(ie!==null){ie.return=N.return,ge=ie;break e}ge=N.return}}if(Te=g,Hr(),Kn&&typeof Kn.onPostCommitFiberRoot=="function")try{Kn.onPostCommitFiberRoot(xl,i)}catch{}f=!0}return f}finally{ze=u,xn.transition=o}}return!1}function pm(i,o,u){o=ss(u,o),o=Tg(i,o,1),i=Wr(i,o,1),o=Ht(),i!==null&&(Vs(i,1,o),Jt(i,o))}function et(i,o,u){if(i.tag===3)pm(i,i,u);else for(;o!==null;){if(o.tag===3){pm(o,i,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&($r===null||!$r.has(f))){i=ss(u,i),i=Dg(o,i,1),o=Wr(o,i,1),i=Ht(),o!==null&&(Vs(o,1,i),Jt(o,i));break}}o=o.return}}function Ow(i,o,u){var f=i.pingCache;f!==null&&f.delete(o),o=Ht(),i.pingedLanes|=i.suspendedLanes&u,mt===i&&(bt&u)===u&&(ft===4||ft===3&&(bt&130023424)===bt&&500>rt()-ah?Ni(i,0):lh|=u),Jt(i,o)}function gm(i,o){o===0&&((i.mode&1)===0?o=1:(o=kl,kl<<=1,(kl&130023424)===0&&(kl=4194304)));var u=Ht();i=mr(i,o),i!==null&&(Vs(i,o,u),Jt(i,u))}function Cw(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),gm(i,u)}function Pw(i,o){var u=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),gm(i,u)}var mm;mm=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||Kt.current)Gt=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return Gt=!1,dw(i,o,u);Gt=(i.flags&131072)!==0}else Gt=!1,qe&&(o.flags&1048576)!==0&&qp(o,Vl,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;ra(i,o),i=o.pendingProps;var g=Yi(o,Rt.current);rs(o,u),g=Fc(null,o,f,i,g,u);var y=_c();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,qt(f)?(y=!0,Fl(o)):y=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Tc(o),g.updater=ta,o.stateNode=g,g._reactInternals=o,Uc(o,f,i,u),o=Gc(null,o,f,!0,y,u)):(o.tag=0,qe&&y&&bc(o),_t(null,o,g,u),o=o.child),o;case 16:f=o.elementType;e:{switch(ra(i,o),i=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=Aw(f),i=jn(f,i),g){case 0:o=qc(null,o,f,i,u);break e;case 1:o=Vg(null,o,f,i,u);break e;case 11:o=Bg(null,o,f,i,u);break e;case 14:o=zg(null,o,f,jn(f.type,i),u);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:jn(f,g),qc(i,o,f,g,u);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:jn(f,g),Vg(i,o,f,g,u);case 3:e:{if(Wg(o),i===null)throw Error(t(387));f=o.pendingProps,y=o.memoizedState,g=y.element,ig(i,o),Kl(o,f,null,u);var w=o.memoizedState;if(f=w.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:w.cache,pendingSuspenseBoundaries:w.pendingSuspenseBoundaries,transitions:w.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){g=ss(Error(t(423)),o),o=Qg(i,o,f,u,g);break e}else if(f!==g){g=ss(Error(t(424)),o),o=Qg(i,o,f,u,g);break e}else for(ln=zr(o.stateNode.containerInfo.firstChild),on=o,qe=!0,Dn=null,u=ng(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(es(),f===g){o=xr(i,o,u);break e}_t(i,o,f,u)}o=o.child}return o;case 5:return lg(o),i===null&&Cc(o),f=o.type,g=o.pendingProps,y=i!==null?i.memoizedProps:null,w=g.children,mc(f,g)?w=null:y!==null&&mc(f,y)&&(o.flags|=32),Hg(i,o),_t(i,o,w,u),o.child;case 6:return i===null&&Cc(o),null;case 13:return $g(i,o,u);case 4:return Dc(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=ts(o,null,f,u):_t(i,o,f,u),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:jn(f,g),Bg(i,o,f,g,u);case 7:return _t(i,o,o.pendingProps,u),o.child;case 8:return _t(i,o,o.pendingProps.children,u),o.child;case 12:return _t(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,y=o.memoizedProps,w=g.value,Qe($l,f._currentValue),f._currentValue=w,y!==null)if(Tn(y.value,w)){if(y.children===g.children&&!Kt.current){o=xr(i,o,u);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var N=y.dependencies;if(N!==null){w=y.child;for(var E=N.firstContext;E!==null;){if(E.context===f){if(y.tag===1){E=yr(-1,u&-u),E.tag=2;var _=y.updateQueue;if(_!==null){_=_.shared;var Y=_.pending;Y===null?E.next=E:(E.next=Y.next,Y.next=E),_.pending=E}}y.lanes|=u,E=y.alternate,E!==null&&(E.lanes|=u),Mc(y.return,u,o),N.lanes|=u;break}E=E.next}}else if(y.tag===10)w=y.type===o.type?null:y.child;else if(y.tag===18){if(w=y.return,w===null)throw Error(t(341));w.lanes|=u,N=w.alternate,N!==null&&(N.lanes|=u),Mc(w,u,o),w=y.sibling}else w=y.child;if(w!==null)w.return=y;else for(w=y;w!==null;){if(w===o){w=null;break}if(y=w.sibling,y!==null){y.return=w.return,w=y;break}w=w.return}y=w}_t(i,o,g.children,u),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,rs(o,u),g=mn(g),f=f(g),o.flags|=1,_t(i,o,f,u),o.child;case 14:return f=o.type,g=jn(f,o.pendingProps),g=jn(f.type,g),zg(i,o,f,g,u);case 15:return Fg(i,o,o.type,o.pendingProps,u);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:jn(f,g),ra(i,o),o.tag=1,qt(f)?(i=!0,Fl(o)):i=!1,rs(o,u),Mg(o,f,g),Uc(o,f,g,u),Gc(null,o,f,!0,i,u);case 19:return Xg(i,o,u);case 22:return _g(i,o,u)}throw Error(t(156,o.tag))};function ym(i,o){return Gd(i,o)}function Nw(i,o,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function vn(i,o,u,f){return new Nw(i,o,u,f)}function mh(i){return i=i.prototype,!(!i||!i.isReactComponent)}function Aw(i){if(typeof i=="function")return mh(i)?1:0;if(i!=null){if(i=i.$$typeof,i===Q)return 11;if(i===K)return 14}return 2}function qr(i,o){var u=i.alternate;return u===null?(u=vn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function pa(i,o,u,f,g,y){var w=2;if(f=i,typeof i=="function")mh(i)&&(w=1);else if(typeof i=="string")w=5;else e:switch(i){case D:return Ei(u.children,g,y,o);case V:w=8,g|=8;break;case $:return i=vn(12,u,o,g|2),i.elementType=$,i.lanes=y,i;case Z:return i=vn(13,u,o,g),i.elementType=Z,i.lanes=y,i;case he:return i=vn(19,u,o,g),i.elementType=he,i.lanes=y,i;case oe:return ga(u,g,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case U:w=10;break e;case J:w=9;break e;case Q:w=11;break e;case K:w=14;break e;case G:w=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=vn(w,u,o,g),o.elementType=i,o.type=f,o.lanes=y,o}function Ei(i,o,u,f){return i=vn(7,i,f,o),i.lanes=u,i}function ga(i,o,u,f){return i=vn(22,i,f,o),i.elementType=oe,i.lanes=u,i.stateNode={isHidden:!1},i}function yh(i,o,u){return i=vn(6,i,null,o),i.lanes=u,i}function xh(i,o,u){return o=vn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function Ew(i,o,u,f,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$u(0),this.expirationTimes=$u(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$u(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function vh(i,o,u,f,g,y,w,N,E){return i=new Ew(i,o,u,N,E),o===1?(o=1,y===!0&&(o|=8)):o=0,y=vn(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Tc(y),i}function Mw(i,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:j,key:f==null?null:""+f,children:i,containerInfo:o,implementation:u}}function xm(i){if(!i)return _r;i=i._reactInternals;e:{if(yi(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(qt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(qt(u))return Up(i,u,o)}return o}function vm(i,o,u,f,g,y,w,N,E){return i=vh(u,f,!0,i,g,y,w,N,E),i.context=xm(null),u=i.current,f=Ht(),g=Xr(u),y=yr(f,g),y.callback=o??null,Wr(u,y,g),i.current.lanes=g,Vs(i,g,f),Jt(i,f),i}function ma(i,o,u,f){var g=o.current,y=Ht(),w=Xr(g);return u=xm(u),o.context===null?o.context=u:o.pendingContext=u,o=yr(y,w),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=Wr(g,o,w),i!==null&&(Bn(i,g,w,y),Xl(i,g,w)),w}function ya(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function km(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function kh(i,o){km(i,o),(i=i.alternate)&&km(i,o)}function Rw(){return null}var wm=typeof reportError=="function"?reportError:function(i){console.error(i)};function wh(i){this._internalRoot=i}xa.prototype.render=wh.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));ma(i,o,null,null)},xa.prototype.unmount=wh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;Pi(function(){ma(null,i,null,null)}),o[fr]=null}};function xa(i){this._internalRoot=i}xa.prototype.unstable_scheduleHydration=function(i){if(i){var o=ip();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Lr.length&&o!==0&&o<Lr[u].priority;u++);Lr.splice(u,0,i),u===0&&lp(i)}};function bh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function va(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function bm(){}function Tw(i,o,u,f,g){if(g){if(typeof f=="function"){var y=f;f=function(){var _=ya(w);y.call(_)}}var w=vm(o,f,i,0,null,!1,!1,"",bm);return i._reactRootContainer=w,i[fr]=w.current,no(i.nodeType===8?i.parentNode:i),Pi(),w}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var N=f;f=function(){var _=ya(E);N.call(_)}}var E=vh(i,0,!1,null,null,!1,!1,"",bm);return i._reactRootContainer=E,i[fr]=E.current,no(i.nodeType===8?i.parentNode:i),Pi(function(){ma(o,E,u,f)}),E}function ka(i,o,u,f,g){var y=u._reactRootContainer;if(y){var w=y;if(typeof g=="function"){var N=g;g=function(){var E=ya(w);N.call(E)}}ma(o,w,i,g)}else w=Tw(u,o,i,g,f);return ya(w)}np=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Hs(o.pendingLanes);u!==0&&(Uu(o,u|1),Jt(o,rt()),(Te&6)===0&&(as=rt()+500,Hr()))}break;case 13:Pi(function(){var f=mr(i,1);if(f!==null){var g=Ht();Bn(f,i,1,g)}}),kh(i,1)}},Xu=function(i){if(i.tag===13){var o=mr(i,134217728);if(o!==null){var u=Ht();Bn(o,i,134217728,u)}kh(i,134217728)}},rp=function(i){if(i.tag===13){var o=Xr(i),u=mr(i,o);if(u!==null){var f=Ht();Bn(u,i,o,f)}kh(i,o)}},ip=function(){return ze},sp=function(i,o){var u=ze;try{return ze=i,o()}finally{ze=u}},Fs=function(i,o,u){switch(o){case"input":if(Ar(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==i&&f.form===i.form){var g=Bl(f);if(!g)throw Error(t(90));Fe(f),Ar(f,g)}}}break;case"textarea":Er(i,u);break;case"select":o=u.value,o!=null&&nn(i,!!u.multiple,o,!1)}},Ft=dh,Et=Pi;var Dw={usingClientEntryPoint:!1,Events:[so,qi,Bl,At,An,dh]},ko={findFiberByHostInstance:xi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},jw={bundleType:ko.bundleType,version:ko.version,rendererPackageName:ko.rendererPackageName,rendererConfig:ko.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Kd(i),i===null?null:i.stateNode},findFiberByHostInstance:ko.findFiberByHostInstance||Rw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wa.isDisabled&&wa.supportsFiber)try{xl=wa.inject(jw),Kn=wa}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Dw,Zt.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!bh(o))throw Error(t(200));return Mw(i,o,null,u)},Zt.createRoot=function(i,o){if(!bh(i))throw Error(t(299));var u=!1,f="",g=wm;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=vh(i,1,!1,null,null,u,!1,f,g),i[fr]=o.current,no(i.nodeType===8?i.parentNode:i),new wh(o)},Zt.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Kd(o),i=i===null?null:i.stateNode,i},Zt.flushSync=function(i){return Pi(i)},Zt.hydrate=function(i,o,u){if(!va(o))throw Error(t(200));return ka(null,i,o,!0,u)},Zt.hydrateRoot=function(i,o,u){if(!bh(i))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,y="",w=wm;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(w=u.onRecoverableError)),o=vm(o,null,i,1,u??null,g,!1,y,w),i[fr]=o.current,no(i),f)for(i=0;i<f.length;i++)u=f[i],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new xa(o)},Zt.render=function(i,o,u){if(!va(o))throw Error(t(200));return ka(null,i,o,!1,u)},Zt.unmountComponentAtNode=function(i){if(!va(i))throw Error(t(40));return i._reactRootContainer?(Pi(function(){ka(null,null,i,!1,function(){i._reactRootContainer=null,i[fr]=null})}),!0):!1},Zt.unstable_batchedUpdates=dh,Zt.unstable_renderSubtreeIntoContainer=function(i,o,u,f){if(!va(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return ka(i,o,u,!1,f)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var Rm;function Uy(){if(Rm)return Ch.exports;Rm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Ch.exports=Ww(),Ch.exports}var Tm;function Qw(){if(Tm)return ba;Tm=1;var n=Uy();return ba.createRoot=n.createRoot,ba.hydrateRoot=n.hydrateRoot,ba}var $w=Qw();const Uw=$y($w);var No=Uy();function Xw(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return S.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Au=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Ts(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function cd(n){return"nodeType"in n}function tn(n){var e,t;return n?Ts(n)?n:cd(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function hd(n){const{Document:e}=tn(n);return n instanceof e}function sl(n){return Ts(n)?!1:n instanceof tn(n).HTMLElement}function Xy(n){return n instanceof tn(n).SVGElement}function Ds(n){return n?Ts(n)?n.document:cd(n)?hd(n)?n:sl(n)||Xy(n)?n.ownerDocument:document:document:document}const or=Au?S.useLayoutEffect:S.useEffect;function fd(n){const e=S.useRef(n);return or(()=>{e.current=n}),S.useCallback(function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function Kw(){const n=S.useRef(null),e=S.useCallback((r,s)=>{n.current=setInterval(r,s)},[]),t=S.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function Qo(n,e){e===void 0&&(e=[n]);const t=S.useRef(n);return or(()=>{t.current!==n&&(t.current=n)},e),t}function ol(n,e){const t=S.useRef();return S.useMemo(()=>{const r=n(t.current);return t.current=r,r},[...e])}function ou(n){const e=fd(n),t=S.useRef(null),r=S.useCallback(s=>{s!==t.current&&(e==null||e(s,t.current)),t.current=s},[]);return[t,r]}function lf(n){const e=S.useRef();return S.useEffect(()=>{e.current=n},[n]),e.current}let Ah={};function ll(n,e){return S.useMemo(()=>{if(e)return e;const t=Ah[n]==null?0:Ah[n]+1;return Ah[n]=t,n+"-"+t},[n,e])}function Ky(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const c=Object.entries(a);for(const[h,d]of c){const p=l[h];p!=null&&(l[h]=p+n*d)}return l},{...e})}}const ys=Ky(1),lu=Ky(-1);function qw(n){return"clientX"in n&&"clientY"in n}function dd(n){if(!n)return!1;const{KeyboardEvent:e}=tn(n.target);return e&&n instanceof e}function Gw(n){if(!n)return!1;const{TouchEvent:e}=tn(n.target);return e&&n instanceof e}function af(n){if(Gw(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return qw(n)?{x:n.clientX,y:n.clientY}:null}const $o=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[$o.Translate.toString(n),$o.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:r}=n;return e+" "+t+"ms "+r}}}),Dm="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function Yw(n){return n.matches(Dm)?n:n.querySelector(Dm)}const Jw={display:"none"};function Zw(n){let{id:e,value:t}=n;return ot.createElement("div",{id:e,style:Jw},t)}function eb(n){let{id:e,announcement:t,ariaLiveType:r="assertive"}=n;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return ot.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},t)}function tb(){const[n,e]=S.useState("");return{announce:S.useCallback(r=>{r!=null&&e(r)},[]),announcement:n}}const qy=S.createContext(null);function nb(n){const e=S.useContext(qy);S.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function rb(){const[n]=S.useState(()=>new Set),e=S.useCallback(r=>(n.add(r),()=>n.delete(r)),[n]);return[S.useCallback(r=>{let{type:s,event:l}=r;n.forEach(a=>{var c;return(c=a[s])==null?void 0:c.call(a,l)})},[n]),e]}const ib={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},sb={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function ob(n){let{announcements:e=sb,container:t,hiddenTextDescribedById:r,screenReaderInstructions:s=ib}=n;const{announce:l,announcement:a}=tb(),c=ll("DndLiveRegion"),[h,d]=S.useState(!1);if(S.useEffect(()=>{d(!0)},[]),nb(S.useMemo(()=>({onDragStart(m){let{active:x}=m;l(e.onDragStart({active:x}))},onDragMove(m){let{active:x,over:k}=m;e.onDragMove&&l(e.onDragMove({active:x,over:k}))},onDragOver(m){let{active:x,over:k}=m;l(e.onDragOver({active:x,over:k}))},onDragEnd(m){let{active:x,over:k}=m;l(e.onDragEnd({active:x,over:k}))},onDragCancel(m){let{active:x,over:k}=m;l(e.onDragCancel({active:x,over:k}))}}),[l,e])),!h)return null;const p=ot.createElement(ot.Fragment,null,ot.createElement(Zw,{id:r,value:s.draggable}),ot.createElement(eb,{id:c,announcement:a}));return t?No.createPortal(p,t):p}var dt;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(dt||(dt={}));function au(){}function jm(n,e){return S.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function lb(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return S.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Fn=Object.freeze({x:0,y:0});function ab(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function ub(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return t-r}function cb(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return r-t}function hb(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function Lm(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const fb=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=Lm(e,e.left,e.top),l=[];for(const a of r){const{id:c}=a,h=t.get(c);if(h){const d=ab(Lm(h),s);l.push({id:c,data:{droppableContainer:a,value:d}})}}return l.sort(ub)};function db(n,e){const t=Math.max(e.top,n.top),r=Math.max(e.left,n.left),s=Math.min(e.left+e.width,n.left+n.width),l=Math.min(e.top+e.height,n.top+n.height),a=s-r,c=l-t;if(r<s&&t<l){const h=e.width*e.height,d=n.width*n.height,p=a*c,m=p/(h+d-p);return Number(m.toFixed(4))}return 0}const pb=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=[];for(const l of r){const{id:a}=l,c=t.get(a);if(c){const h=db(c,e);h>0&&s.push({id:a,data:{droppableContainer:l,value:h}})}}return s.sort(cb)};function gb(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function Gy(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Fn}function mb(n){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,c)=>({...a,top:a.top+n*c.y,bottom:a.bottom+n*c.y,left:a.left+n*c.x,right:a.right+n*c.x}),{...t})}}const yb=mb(1);function xb(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function vb(n,e,t){const r=xb(e);if(!r)return n;const{scaleX:s,scaleY:l,x:a,y:c}=r,h=n.left-a-(1-s)*parseFloat(t),d=n.top-c-(1-l)*parseFloat(t.slice(t.indexOf(" ")+1)),p=s?n.width/s:n.width,m=l?n.height/l:n.height;return{width:p,height:m,top:d,right:h+p,bottom:d+m,left:h}}const kb={ignoreTransform:!1};function js(n,e){e===void 0&&(e=kb);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:d,transformOrigin:p}=tn(n).getComputedStyle(n);d&&(t=vb(t,d,p))}const{top:r,left:s,width:l,height:a,bottom:c,right:h}=t;return{top:r,left:s,width:l,height:a,bottom:c,right:h}}function Im(n){return js(n,{ignoreTransform:!0})}function wb(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function bb(n,e){return e===void 0&&(e=tn(n).getComputedStyle(n)),e.position==="fixed"}function Sb(n,e){e===void 0&&(e=tn(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=e[s];return typeof l=="string"?t.test(l):!1})}function pd(n,e){const t=[];function r(s){if(e!=null&&t.length>=e||!s)return t;if(hd(s)&&s.scrollingElement!=null&&!t.includes(s.scrollingElement))return t.push(s.scrollingElement),t;if(!sl(s)||Xy(s)||t.includes(s))return t;const l=tn(n).getComputedStyle(s);return s!==n&&Sb(s,l)&&t.push(s),bb(s,l)?t:r(s.parentNode)}return n?r(n):t}function Yy(n){const[e]=pd(n,1);return e??null}function Eh(n){return!Au||!n?null:Ts(n)?n:cd(n)?hd(n)||n===Ds(n).scrollingElement?window:sl(n)?n:null:null}function Jy(n){return Ts(n)?n.scrollX:n.scrollLeft}function Zy(n){return Ts(n)?n.scrollY:n.scrollTop}function uf(n){return{x:Jy(n),y:Zy(n)}}var xt;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(xt||(xt={}));function ex(n){return!Au||!n?!1:n===document.scrollingElement}function tx(n){const e={x:0,y:0},t=ex(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},r={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},s=n.scrollTop<=e.y,l=n.scrollLeft<=e.x,a=n.scrollTop>=r.y,c=n.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:c,maxScroll:r,minScroll:e}}const Ob={x:.2,y:.2};function Cb(n,e,t,r,s){let{top:l,left:a,right:c,bottom:h}=t;r===void 0&&(r=10),s===void 0&&(s=Ob);const{isTop:d,isBottom:p,isLeft:m,isRight:x}=tx(n),k={x:0,y:0},b={x:0,y:0},O={height:e.height*s.y,width:e.width*s.x};return!d&&l<=e.top+O.height?(k.y=xt.Backward,b.y=r*Math.abs((e.top+O.height-l)/O.height)):!p&&h>=e.bottom-O.height&&(k.y=xt.Forward,b.y=r*Math.abs((e.bottom-O.height-h)/O.height)),!x&&c>=e.right-O.width?(k.x=xt.Forward,b.x=r*Math.abs((e.right-O.width-c)/O.width)):!m&&a<=e.left+O.width&&(k.x=xt.Backward,b.x=r*Math.abs((e.left+O.width-a)/O.width)),{direction:k,speed:b}}function Pb(n){if(n===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:e,left:t,right:r,bottom:s}=n.getBoundingClientRect();return{top:e,left:t,right:r,bottom:s,width:n.clientWidth,height:n.clientHeight}}function nx(n){return n.reduce((e,t)=>ys(e,uf(t)),Fn)}function Nb(n){return n.reduce((e,t)=>e+Jy(t),0)}function Ab(n){return n.reduce((e,t)=>e+Zy(t),0)}function Eb(n,e){if(e===void 0&&(e=js),!n)return;const{top:t,left:r,bottom:s,right:l}=e(n);Yy(n)&&(s<=0||l<=0||t>=window.innerHeight||r>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const Mb=[["x",["left","right"],Nb],["y",["top","bottom"],Ab]];class gd{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=pd(t),s=nx(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,a,c]of Mb)for(const h of a)Object.defineProperty(this,h,{get:()=>{const d=c(r),p=s[l]-d;return this.rect[h]+p},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Do{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var s;(s=this.target)==null||s.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function Rb(n){const{EventTarget:e}=tn(n);return n instanceof e?n:Ds(n)}function Mh(n,e){const t=Math.abs(n.x),r=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var kn;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(kn||(kn={}));function Bm(n){n.preventDefault()}function Tb(n){n.stopPropagation()}var Le;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Le||(Le={}));const rx={start:[Le.Space,Le.Enter],cancel:[Le.Esc],end:[Le.Space,Le.Enter,Le.Tab]},Db=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Le.Right:return{...t,x:t.x+25};case Le.Left:return{...t,x:t.x-25};case Le.Down:return{...t,y:t.y+25};case Le.Up:return{...t,y:t.y-25}}};class md{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Do(Ds(t)),this.windowListeners=new Do(tn(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(kn.Resize,this.handleCancel),this.windowListeners.add(kn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(kn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&Eb(r),t(Fn)}handleKeyDown(e){if(dd(e)){const{active:t,context:r,options:s}=this.props,{keyboardCodes:l=rx,coordinateGetter:a=Db,scrollBehavior:c="smooth"}=s,{code:h}=e;if(l.end.includes(h)){this.handleEnd(e);return}if(l.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:d}=r.current,p=d?{x:d.left,y:d.top}:Fn;this.referenceCoordinates||(this.referenceCoordinates=p);const m=a(e,{active:t,context:r.current,currentCoordinates:p});if(m){const x=lu(m,p),k={x:0,y:0},{scrollableAncestors:b}=r.current;for(const O of b){const C=e.code,{isTop:P,isRight:M,isLeft:L,isBottom:B,maxScroll:R,minScroll:j}=tx(O),D=Pb(O),V={x:Math.min(C===Le.Right?D.right-D.width/2:D.right,Math.max(C===Le.Right?D.left:D.left+D.width/2,m.x)),y:Math.min(C===Le.Down?D.bottom-D.height/2:D.bottom,Math.max(C===Le.Down?D.top:D.top+D.height/2,m.y))},$=C===Le.Right&&!M||C===Le.Left&&!L,U=C===Le.Down&&!B||C===Le.Up&&!P;if($&&V.x!==m.x){const J=O.scrollLeft+x.x,Q=C===Le.Right&&J<=R.x||C===Le.Left&&J>=j.x;if(Q&&!x.y){O.scrollTo({left:J,behavior:c});return}Q?k.x=O.scrollLeft-J:k.x=C===Le.Right?O.scrollLeft-R.x:O.scrollLeft-j.x,k.x&&O.scrollBy({left:-k.x,behavior:c});break}else if(U&&V.y!==m.y){const J=O.scrollTop+x.y,Q=C===Le.Down&&J<=R.y||C===Le.Up&&J>=j.y;if(Q&&!x.x){O.scrollTo({top:J,behavior:c});return}Q?k.y=O.scrollTop-J:k.y=C===Le.Down?O.scrollTop-R.y:O.scrollTop-j.y,k.y&&O.scrollBy({top:-k.y,behavior:c});break}}this.handleMove(e,ys(lu(m,this.referenceCoordinates),k))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}md.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:r=rx,onActivation:s}=e,{active:l}=t;const{code:a}=n.nativeEvent;if(r.start.includes(a)){const c=l.activatorNode.current;return c&&n.target!==c?!1:(n.preventDefault(),s==null||s({event:n.nativeEvent}),!0)}return!1}}];function zm(n){return!!(n&&"distance"in n)}function Fm(n){return!!(n&&"delay"in n)}class yd{constructor(e,t,r){var s;r===void 0&&(r=Rb(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:a}=l;this.props=e,this.events=t,this.document=Ds(a),this.documentListeners=new Do(this.document),this.listeners=new Do(r),this.windowListeners=new Do(tn(a)),this.initialCoordinates=(s=af(l))!=null?s:Fn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(kn.Resize,this.handleCancel),this.windowListeners.add(kn.DragStart,Bm),this.windowListeners.add(kn.VisibilityChange,this.handleCancel),this.windowListeners.add(kn.ContextMenu,Bm),this.documentListeners.add(kn.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Fm(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(zm(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(kn.Click,Tb,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(kn.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:c}}=l;if(!s)return;const h=(t=af(e))!=null?t:Fn,d=lu(s,h);if(!r&&c){if(zm(c)){if(c.tolerance!=null&&Mh(d,c.tolerance))return this.handleCancel();if(Mh(d,c.distance))return this.handleStart()}if(Fm(c)&&Mh(d,c.tolerance))return this.handleCancel();this.handlePending(c,d);return}e.cancelable&&e.preventDefault(),a(h)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Le.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const jb={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class xd extends yd{constructor(e){const{event:t}=e,r=Ds(t.target);super(e,jb,r)}}xd.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r==null||r({event:t}),!0)}}];const Lb={move:{name:"mousemove"},end:{name:"mouseup"}};var cf;(function(n){n[n.RightClick=2]="RightClick"})(cf||(cf={}));class Ib extends yd{constructor(e){super(e,Lb,Ds(e.event.target))}}Ib.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return t.button===cf.RightClick?!1:(r==null||r({event:t}),!0)}}];const Rh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Bb extends yd{constructor(e){super(e,Rh)}static setup(){return window.addEventListener(Rh.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Rh.move.name,e)};function e(){}}}Bb.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;const{touches:s}=t;return s.length>1?!1:(r==null||r({event:t}),!0)}}];var jo;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(jo||(jo={}));var uu;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(uu||(uu={}));function zb(n){let{acceleration:e,activator:t=jo.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:c=uu.TreeOrder,pointerCoordinates:h,scrollableAncestors:d,scrollableAncestorRects:p,delta:m,threshold:x}=n;const k=_b({delta:m,disabled:!l}),[b,O]=Kw(),C=S.useRef({x:0,y:0}),P=S.useRef({x:0,y:0}),M=S.useMemo(()=>{switch(t){case jo.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case jo.DraggableRect:return s}},[t,s,h]),L=S.useRef(null),B=S.useCallback(()=>{const j=L.current;if(!j)return;const D=C.current.x*P.current.x,V=C.current.y*P.current.y;j.scrollBy(D,V)},[]),R=S.useMemo(()=>c===uu.TreeOrder?[...d].reverse():d,[c,d]);S.useEffect(()=>{if(!l||!d.length||!M){O();return}for(const j of R){if((r==null?void 0:r(j))===!1)continue;const D=d.indexOf(j),V=p[D];if(!V)continue;const{direction:$,speed:U}=Cb(j,V,M,e,x);for(const J of["x","y"])k[J][$[J]]||(U[J]=0,$[J]=0);if(U.x>0||U.y>0){O(),L.current=j,b(B,a),C.current=U,P.current=$;return}}C.current={x:0,y:0},P.current={x:0,y:0},O()},[e,B,r,O,l,a,JSON.stringify(M),JSON.stringify(k),b,d,R,p,JSON.stringify(x)])}const Fb={x:{[xt.Backward]:!1,[xt.Forward]:!1},y:{[xt.Backward]:!1,[xt.Forward]:!1}};function _b(n){let{delta:e,disabled:t}=n;const r=lf(e);return ol(s=>{if(t||!r||!s)return Fb;const l={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[xt.Backward]:s.x[xt.Backward]||l.x===-1,[xt.Forward]:s.x[xt.Forward]||l.x===1},y:{[xt.Backward]:s.y[xt.Backward]||l.y===-1,[xt.Forward]:s.y[xt.Forward]||l.y===1}}},[t,e,r])}function Hb(n,e){const t=e!=null?n.get(e):void 0,r=t?t.node.current:null;return ol(s=>{var l;return e==null?null:(l=r??s)!=null?l:null},[r,e])}function Vb(n,e){return S.useMemo(()=>n.reduce((t,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...t,...l]},[]),[n,e])}var Uo;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(Uo||(Uo={}));var hf;(function(n){n.Optimized="optimized"})(hf||(hf={}));const _m=new Map;function Wb(n,e){let{dragging:t,dependencies:r,config:s}=e;const[l,a]=S.useState(null),{frequency:c,measure:h,strategy:d}=s,p=S.useRef(n),m=C(),x=Qo(m),k=S.useCallback(function(P){P===void 0&&(P=[]),!x.current&&a(M=>M===null?P:M.concat(P.filter(L=>!M.includes(L))))},[x]),b=S.useRef(null),O=ol(P=>{if(m&&!t)return _m;if(!P||P===_m||p.current!==n||l!=null){const M=new Map;for(let L of n){if(!L)continue;if(l&&l.length>0&&!l.includes(L.id)&&L.rect.current){M.set(L.id,L.rect.current);continue}const B=L.node.current,R=B?new gd(h(B),B):null;L.rect.current=R,R&&M.set(L.id,R)}return M}return P},[n,l,t,m,h]);return S.useEffect(()=>{p.current=n},[n]),S.useEffect(()=>{m||k()},[t,m]),S.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),S.useEffect(()=>{m||typeof c!="number"||b.current!==null||(b.current=setTimeout(()=>{k(),b.current=null},c))},[c,m,k,...r]),{droppableRects:O,measureDroppableContainers:k,measuringScheduled:l!=null};function C(){switch(d){case Uo.Always:return!1;case Uo.BeforeDragging:return t;default:return!t}}}function ix(n,e){return ol(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function Qb(n,e){return ix(n,e)}function $b(n){let{callback:e,disabled:t}=n;const r=fd(e),s=S.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(r)},[r,t]);return S.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Eu(n){let{callback:e,disabled:t}=n;const r=fd(e),s=S.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(r)},[t]);return S.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Ub(n){return new gd(js(n),n)}function Hm(n,e,t){e===void 0&&(e=Ub);const[r,s]=S.useState(null);function l(){s(h=>{if(!n)return null;if(n.isConnected===!1){var d;return(d=h??t)!=null?d:null}const p=e(n);return JSON.stringify(h)===JSON.stringify(p)?h:p})}const a=$b({callback(h){if(n)for(const d of h){const{type:p,target:m}=d;if(p==="childList"&&m instanceof HTMLElement&&m.contains(n)){l();break}}}}),c=Eu({callback:l});return or(()=>{l(),n?(c==null||c.observe(n),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),a==null||a.disconnect())},[n]),r}function Xb(n){const e=ix(n);return Gy(n,e)}const Vm=[];function Kb(n){const e=S.useRef(n),t=ol(r=>n?r&&r!==Vm&&n&&e.current&&n.parentNode===e.current.parentNode?r:pd(n):Vm,[n]);return S.useEffect(()=>{e.current=n},[n]),t}function qb(n){const[e,t]=S.useState(null),r=S.useRef(n),s=S.useCallback(l=>{const a=Eh(l.target);a&&t(c=>c?(c.set(a,uf(a)),new Map(c)):null)},[]);return S.useEffect(()=>{const l=r.current;if(n!==l){a(l);const c=n.map(h=>{const d=Eh(h);return d?(d.addEventListener("scroll",s,{passive:!0}),[d,uf(d)]):null}).filter(h=>h!=null);t(c.length?new Map(c):null),r.current=n}return()=>{a(n),a(l)};function a(c){c.forEach(h=>{const d=Eh(h);d==null||d.removeEventListener("scroll",s)})}},[s,n]),S.useMemo(()=>n.length?e?Array.from(e.values()).reduce((l,a)=>ys(l,a),Fn):nx(n):Fn,[n,e])}function Wm(n,e){e===void 0&&(e=[]);const t=S.useRef(null);return S.useEffect(()=>{t.current=null},e),S.useEffect(()=>{const r=n!==Fn;r&&!t.current&&(t.current=n),!r&&t.current&&(t.current=null)},[n]),t.current?lu(n,t.current):Fn}function Gb(n){S.useEffect(()=>{if(!Au)return;const e=n.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t==null||t()}},n.map(e=>{let{sensor:t}=e;return t}))}function Yb(n,e){return S.useMemo(()=>n.reduce((t,r)=>{let{eventName:s,handler:l}=r;return t[s]=a=>{l(a,e)},t},{}),[n,e])}function sx(n){return S.useMemo(()=>n?wb(n):null,[n])}const Qm=[];function Jb(n,e){e===void 0&&(e=js);const[t]=n,r=sx(t?tn(t):null),[s,l]=S.useState(Qm);function a(){l(()=>n.length?n.map(h=>ex(h)?r:new gd(e(h),h)):Qm)}const c=Eu({callback:a});return or(()=>{c==null||c.disconnect(),a(),n.forEach(h=>c==null?void 0:c.observe(h))},[n]),s}function Zb(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return sl(e)?e:n}function eS(n){let{measure:e}=n;const[t,r]=S.useState(null),s=S.useCallback(d=>{for(const{target:p}of d)if(sl(p)){r(m=>{const x=e(p);return m?{...m,width:x.width,height:x.height}:x});break}},[e]),l=Eu({callback:s}),a=S.useCallback(d=>{const p=Zb(d);l==null||l.disconnect(),p&&(l==null||l.observe(p)),r(p?e(p):null)},[e,l]),[c,h]=ou(a);return S.useMemo(()=>({nodeRef:c,rect:t,setRef:h}),[t,c,h])}const tS=[{sensor:xd,options:{}},{sensor:md,options:{}}],nS={current:{}},Xa={draggable:{measure:Im},droppable:{measure:Im,strategy:Uo.WhileDragging,frequency:hf.Optimized},dragOverlay:{measure:js}};class Lo extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const rS={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Lo,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:au},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Xa,measureDroppableContainers:au,windowRect:null,measuringScheduled:!1},iS={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:au,draggableNodes:new Map,over:null,measureDroppableContainers:au},Mu=S.createContext(iS),ox=S.createContext(rS);function sS(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Lo}}}function oS(n,e){switch(e.type){case dt.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case dt.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case dt.DragEnd:case dt.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case dt.RegisterDroppable:{const{element:t}=e,{id:r}=t,s=new Lo(n.droppable.containers);return s.set(r,t),{...n,droppable:{...n.droppable,containers:s}}}case dt.SetDroppableDisabled:{const{id:t,key:r,disabled:s}=e,l=n.droppable.containers.get(t);if(!l||r!==l.key)return n;const a=new Lo(n.droppable.containers);return a.set(t,{...l,disabled:s}),{...n,droppable:{...n.droppable,containers:a}}}case dt.UnregisterDroppable:{const{id:t,key:r}=e,s=n.droppable.containers.get(t);if(!s||r!==s.key)return n;const l=new Lo(n.droppable.containers);return l.delete(t),{...n,droppable:{...n.droppable,containers:l}}}default:return n}}function lS(n){let{disabled:e}=n;const{active:t,activatorEvent:r,draggableNodes:s}=S.useContext(Mu),l=lf(r),a=lf(t==null?void 0:t.id);return S.useEffect(()=>{if(!e&&!r&&l&&a!=null){if(!dd(l)||document.activeElement===l.target)return;const c=s.get(a);if(!c)return;const{activatorNode:h,node:d}=c;if(!h.current&&!d.current)return;requestAnimationFrame(()=>{for(const p of[h.current,d.current]){if(!p)continue;const m=Yw(p);if(m){m.focus();break}}})}},[r,e,s,a,l]),null}function aS(n,e){let{transform:t,...r}=e;return n!=null&&n.length?n.reduce((s,l)=>l({transform:s,...r}),t):t}function uS(n){return S.useMemo(()=>({draggable:{...Xa.draggable,...n==null?void 0:n.draggable},droppable:{...Xa.droppable,...n==null?void 0:n.droppable},dragOverlay:{...Xa.dragOverlay,...n==null?void 0:n.dragOverlay}}),[n==null?void 0:n.draggable,n==null?void 0:n.droppable,n==null?void 0:n.dragOverlay])}function cS(n){let{activeNode:e,measure:t,initialRect:r,config:s=!0}=n;const l=S.useRef(!1),{x:a,y:c}=typeof s=="boolean"?{x:s,y:s}:s;or(()=>{if(!a&&!c||!e){l.current=!1;return}if(l.current||!r)return;const d=e==null?void 0:e.node.current;if(!d||d.isConnected===!1)return;const p=t(d),m=Gy(p,r);if(a||(m.x=0),c||(m.y=0),l.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const x=Yy(d);x&&x.scrollBy({top:m.y,left:m.x})}},[e,a,c,r,t])}const lx=S.createContext({...Fn,scaleX:1,scaleY:1});var Yr;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Yr||(Yr={}));const hS=S.memo(function(e){var t,r,s,l;let{id:a,accessibility:c,autoScroll:h=!0,children:d,sensors:p=tS,collisionDetection:m=pb,measuring:x,modifiers:k,...b}=e;const O=S.useReducer(oS,void 0,sS),[C,P]=O,[M,L]=rb(),[B,R]=S.useState(Yr.Uninitialized),j=B===Yr.Initialized,{draggable:{active:D,nodes:V,translate:$},droppable:{containers:U}}=C,J=D!=null?V.get(D):null,Q=S.useRef({initial:null,translated:null}),Z=S.useMemo(()=>{var Ge;return D!=null?{id:D,data:(Ge=J==null?void 0:J.data)!=null?Ge:nS,rect:Q}:null},[D,J]),he=S.useRef(null),[K,G]=S.useState(null),[oe,W]=S.useState(null),re=Qo(b,Object.values(b)),ee=ll("DndDescribedBy",a),A=S.useMemo(()=>U.getEnabled(),[U]),z=uS(x),{droppableRects:ue,measureDroppableContainers:pe,measuringScheduled:te}=Wb(A,{dragging:j,dependencies:[$.x,$.y],config:z.droppable}),H=Hb(V,D),ae=S.useMemo(()=>oe?af(oe):null,[oe]),we=Rr(),ye=Qb(H,z.draggable.measure);cS({activeNode:D!=null?V.get(D):null,config:we.layoutShiftCompensation,initialRect:ye,measure:z.draggable.measure});const me=Hm(H,z.draggable.measure,ye),Ne=Hm(H?H.parentElement:null),Fe=S.useRef({activatorEvent:null,active:null,activeNode:H,collisionRect:null,collisions:null,droppableRects:ue,draggableNodes:V,draggingNode:null,draggingNodeRect:null,droppableContainers:U,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),Ve=U.getNodeFor((t=Fe.current.over)==null?void 0:t.id),Ke=eS({measure:z.dragOverlay.measure}),Ct=(r=Ke.nodeRef.current)!=null?r:H,Cn=j?(s=Ke.rect)!=null?s:me:null,Ar=!!(Ke.nodeRef.current&&Ke.rect),Pn=Xb(Ar?null:me),Nn=sx(Ct?tn(Ct):null),Pt=Kb(j?Ve??H:null),nn=Jb(Pt),$n=aS(k,{transform:{x:$.x-Pn.x,y:$.y-Pn.y,scaleX:1,scaleY:1},activatorEvent:oe,active:Z,activeNodeRect:me,containerNodeRect:Ne,draggingNodeRect:Cn,over:Fe.current.over,overlayNodeRect:Ke.rect,scrollableAncestors:Pt,scrollableAncestorRects:nn,windowRect:Nn}),Un=ae?ys(ae,$):null,Er=qb(Pt),di=Wm(Er),Me=Wm(Er,[me]),le=ys($n,di),Re=Cn?yb(Cn,$n):null,Ut=Z&&Re?m({active:Z,collisionRect:Re,droppableRects:ue,droppableContainers:A,pointerCoordinates:Un}):null,_e=hb(Ut,"id"),[lt,pi]=S.useState(null),gi=Ar?$n:ys($n,Me),Mr=gb(gi,(l=lt==null?void 0:lt.rect)!=null?l:null,me),mi=S.useRef(null),ur=S.useCallback((Ge,Nt)=>{let{sensor:At,options:An}=Nt;if(he.current==null)return;const Ft=V.get(he.current);if(!Ft)return;const Et=Ge.nativeEvent,Xt=new At({active:he.current,activeNode:Ft,event:Et,options:An,context:Fe,onAbort(Ye){if(!V.get(Ye))return;const{onDragAbort:Mt}=re.current,En={id:Ye};Mt==null||Mt(En),M({type:"onDragAbort",event:En})},onPending(Ye,dn,Mt,En){if(!V.get(Ye))return;const{onDragPending:Xn}=re.current,rn={id:Ye,constraint:dn,initialCoordinates:Mt,offset:En};Xn==null||Xn(rn),M({type:"onDragPending",event:rn})},onStart(Ye){const dn=he.current;if(dn==null)return;const Mt=V.get(dn);if(!Mt)return;const{onDragStart:En}=re.current,Mn={activatorEvent:Et,active:{id:dn,data:Mt.data,rect:Q}};No.unstable_batchedUpdates(()=>{En==null||En(Mn),R(Yr.Initializing),P({type:dt.DragStart,initialCoordinates:Ye,active:dn}),M({type:"onDragStart",event:Mn}),G(mi.current),W(Et)})},onMove(Ye){P({type:dt.DragMove,coordinates:Ye})},onEnd:cr(dt.DragEnd),onCancel:cr(dt.DragCancel)});mi.current=Xt;function cr(Ye){return async function(){const{active:Mt,collisions:En,over:Mn,scrollAdjustedTranslate:Xn}=Fe.current;let rn=null;if(Mt&&Xn){const{cancelDrop:hr}=re.current;rn={activatorEvent:Et,active:Mt,collisions:En,delta:Xn,over:Mn},Ye===dt.DragEnd&&typeof hr=="function"&&await Promise.resolve(hr(rn))&&(Ye=dt.DragCancel)}he.current=null,No.unstable_batchedUpdates(()=>{P({type:Ye}),R(Yr.Uninitialized),pi(null),G(null),W(null),mi.current=null;const hr=Ye===dt.DragEnd?"onDragEnd":"onDragCancel";if(rn){const _s=re.current[hr];_s==null||_s(rn),M({type:hr,event:rn})}})}}},[V]),Bs=S.useCallback((Ge,Nt)=>(At,An)=>{const Ft=At.nativeEvent,Et=V.get(An);if(he.current!==null||!Et||Ft.dndKit||Ft.defaultPrevented)return;const Xt={active:Et};Ge(At,Nt.options,Xt)===!0&&(Ft.dndKit={capturedBy:Nt.sensor},he.current=An,ur(At,Nt))},[V,ur]),Hi=Vb(p,Bs);Gb(p),or(()=>{me&&B===Yr.Initializing&&R(Yr.Initialized)},[me,B]),S.useEffect(()=>{const{onDragMove:Ge}=re.current,{active:Nt,activatorEvent:At,collisions:An,over:Ft}=Fe.current;if(!Nt||!At)return;const Et={active:Nt,activatorEvent:At,collisions:An,delta:{x:le.x,y:le.y},over:Ft};No.unstable_batchedUpdates(()=>{Ge==null||Ge(Et),M({type:"onDragMove",event:Et})})},[le.x,le.y]),S.useEffect(()=>{const{active:Ge,activatorEvent:Nt,collisions:At,droppableContainers:An,scrollAdjustedTranslate:Ft}=Fe.current;if(!Ge||he.current==null||!Nt||!Ft)return;const{onDragOver:Et}=re.current,Xt=An.get(_e),cr=Xt&&Xt.rect.current?{id:Xt.id,rect:Xt.rect.current,data:Xt.data,disabled:Xt.disabled}:null,Ye={active:Ge,activatorEvent:Nt,collisions:At,delta:{x:Ft.x,y:Ft.y},over:cr};No.unstable_batchedUpdates(()=>{pi(cr),Et==null||Et(Ye),M({type:"onDragOver",event:Ye})})},[_e]),or(()=>{Fe.current={activatorEvent:oe,active:Z,activeNode:H,collisionRect:Re,collisions:Ut,droppableRects:ue,draggableNodes:V,draggingNode:Ct,draggingNodeRect:Cn,droppableContainers:U,over:lt,scrollableAncestors:Pt,scrollAdjustedTranslate:le},Q.current={initial:Cn,translated:Re}},[Z,H,Ut,Re,V,Ct,Cn,ue,U,lt,Pt,le]),zb({...we,delta:$,draggingRect:Re,pointerCoordinates:Un,scrollableAncestors:Pt,scrollableAncestorRects:nn});const zs=S.useMemo(()=>({active:Z,activeNode:H,activeNodeRect:me,activatorEvent:oe,collisions:Ut,containerNodeRect:Ne,dragOverlay:Ke,draggableNodes:V,droppableContainers:U,droppableRects:ue,over:lt,measureDroppableContainers:pe,scrollableAncestors:Pt,scrollableAncestorRects:nn,measuringConfiguration:z,measuringScheduled:te,windowRect:Nn}),[Z,H,me,oe,Ut,Ne,Ke,V,U,ue,lt,pe,Pt,nn,z,te,Nn]),Fs=S.useMemo(()=>({activatorEvent:oe,activators:Hi,active:Z,activeNodeRect:me,ariaDescribedById:{draggable:ee},dispatch:P,draggableNodes:V,over:lt,measureDroppableContainers:pe}),[oe,Hi,Z,me,P,ee,V,lt,pe]);return ot.createElement(qy.Provider,{value:L},ot.createElement(Mu.Provider,{value:Fs},ot.createElement(ox.Provider,{value:zs},ot.createElement(lx.Provider,{value:Mr},d)),ot.createElement(lS,{disabled:(c==null?void 0:c.restoreFocus)===!1})),ot.createElement(ob,{...c,hiddenTextDescribedById:ee}));function Rr(){const Ge=(K==null?void 0:K.autoScrollEnabled)===!1,Nt=typeof h=="object"?h.enabled===!1:h===!1,At=j&&!Ge&&!Nt;return typeof h=="object"?{...h,enabled:At}:{enabled:At}}}),fS=S.createContext(null),$m="button",dS="Draggable";function pS(n){let{id:e,data:t,disabled:r=!1,attributes:s}=n;const l=ll(dS),{activators:a,activatorEvent:c,active:h,activeNodeRect:d,ariaDescribedById:p,draggableNodes:m,over:x}=S.useContext(Mu),{role:k=$m,roleDescription:b="draggable",tabIndex:O=0}=s??{},C=(h==null?void 0:h.id)===e,P=S.useContext(C?lx:fS),[M,L]=ou(),[B,R]=ou(),j=Yb(a,e),D=Qo(t);or(()=>(m.set(e,{id:e,key:l,node:M,activatorNode:B,data:D}),()=>{const $=m.get(e);$&&$.key===l&&m.delete(e)}),[m,e]);const V=S.useMemo(()=>({role:k,tabIndex:O,"aria-disabled":r,"aria-pressed":C&&k===$m?!0:void 0,"aria-roledescription":b,"aria-describedby":p.draggable}),[r,k,O,C,b,p.draggable]);return{active:h,activatorEvent:c,activeNodeRect:d,attributes:V,isDragging:C,listeners:r?void 0:j,node:M,over:x,setNodeRef:L,setActivatorNodeRef:R,transform:P}}function gS(){return S.useContext(ox)}const mS="Droppable",yS={timeout:25};function xS(n){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:s}=n;const l=ll(mS),{active:a,dispatch:c,over:h,measureDroppableContainers:d}=S.useContext(Mu),p=S.useRef({disabled:t}),m=S.useRef(!1),x=S.useRef(null),k=S.useRef(null),{disabled:b,updateMeasurementsFor:O,timeout:C}={...yS,...s},P=Qo(O??r),M=S.useCallback(()=>{if(!m.current){m.current=!0;return}k.current!=null&&clearTimeout(k.current),k.current=setTimeout(()=>{d(Array.isArray(P.current)?P.current:[P.current]),k.current=null},C)},[C]),L=Eu({callback:M,disabled:b||!a}),B=S.useCallback((V,$)=>{L&&($&&(L.unobserve($),m.current=!1),V&&L.observe(V))},[L]),[R,j]=ou(B),D=Qo(e);return S.useEffect(()=>{!L||!R.current||(L.disconnect(),m.current=!1,L.observe(R.current))},[R,L]),S.useEffect(()=>(c({type:dt.RegisterDroppable,element:{id:r,key:l,disabled:t,node:R,rect:x,data:D}}),()=>c({type:dt.UnregisterDroppable,key:l,id:r})),[r]),S.useEffect(()=>{t!==p.current.disabled&&(c({type:dt.SetDroppableDisabled,id:r,key:l,disabled:t}),p.current.disabled=t)},[r,l,t,c]),{active:a,rect:x,isOver:(h==null?void 0:h.id)===r,node:R,over:h,setNodeRef:j}}function ax(n,e,t){const r=n.slice();return r.splice(t<0?r.length+t:t,0,r.splice(e,1)[0]),r}function vS(n,e){return n.reduce((t,r,s)=>{const l=e.get(r);return l&&(t[s]=l),t},Array(n.length))}function Sa(n){return n!==null&&n>=0}function kS(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function wS(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const Oa={scaleX:1,scaleY:1},bS=n=>{var e;let{rects:t,activeNodeRect:r,activeIndex:s,overIndex:l,index:a}=n;const c=(e=t[s])!=null?e:r;if(!c)return null;const h=SS(t,a,s);if(a===s){const d=t[l];return d?{x:s<l?d.left+d.width-(c.left+c.width):d.left-c.left,y:0,...Oa}:null}return a>s&&a<=l?{x:-c.width-h,y:0,...Oa}:a<s&&a>=l?{x:c.width+h,y:0,...Oa}:{x:0,y:0,...Oa}};function SS(n,e,t){const r=n[e],s=n[e-1],l=n[e+1];return!r||!s&&!l?0:t<e?s?r.left-(s.left+s.width):l.left-(r.left+r.width):l?l.left-(r.left+r.width):r.left-(s.left+s.width)}const ux=n=>{let{rects:e,activeIndex:t,overIndex:r,index:s}=n;const l=ax(e,r,t),a=e[s],c=l[s];return!c||!a?null:{x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height}},cx="Sortable",hx=ot.createContext({activeIndex:-1,containerId:cx,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:ux,disabled:{draggable:!1,droppable:!1}});function OS(n){let{children:e,id:t,items:r,strategy:s=ux,disabled:l=!1}=n;const{active:a,dragOverlay:c,droppableRects:h,over:d,measureDroppableContainers:p}=gS(),m=ll(cx,t),x=c.rect!==null,k=S.useMemo(()=>r.map(j=>typeof j=="object"&&"id"in j?j.id:j),[r]),b=a!=null,O=a?k.indexOf(a.id):-1,C=d?k.indexOf(d.id):-1,P=S.useRef(k),M=!kS(k,P.current),L=C!==-1&&O===-1||M,B=wS(l);or(()=>{M&&b&&p(k)},[M,k,b,p]),S.useEffect(()=>{P.current=k},[k]);const R=S.useMemo(()=>({activeIndex:O,containerId:m,disabled:B,disableTransforms:L,items:k,overIndex:C,useDragOverlay:x,sortedRects:vS(k,h),strategy:s}),[O,m,B.draggable,B.droppable,L,k,C,h,x,s]);return ot.createElement(hx.Provider,{value:R},e)}const CS=n=>{let{id:e,items:t,activeIndex:r,overIndex:s}=n;return ax(t,r,s).indexOf(e)},PS=n=>{let{containerId:e,isSorting:t,wasDragging:r,index:s,items:l,newIndex:a,previousItems:c,previousContainerId:h,transition:d}=n;return!d||!r||c!==l&&s===a?!1:t?!0:a!==s&&e===h},NS={duration:200,easing:"ease"},fx="transform",AS=$o.Transition.toString({property:fx,duration:0,easing:"linear"}),ES={roleDescription:"sortable"};function MS(n){let{disabled:e,index:t,node:r,rect:s}=n;const[l,a]=S.useState(null),c=S.useRef(t);return or(()=>{if(!e&&t!==c.current&&r.current){const h=s.current;if(h){const d=js(r.current,{ignoreTransform:!0}),p={x:h.left-d.left,y:h.top-d.top,scaleX:h.width/d.width,scaleY:h.height/d.height};(p.x||p.y)&&a(p)}}t!==c.current&&(c.current=t)},[e,t,r,s]),S.useEffect(()=>{l&&a(null)},[l]),l}function RS(n){let{animateLayoutChanges:e=PS,attributes:t,disabled:r,data:s,getNewIndex:l=CS,id:a,strategy:c,resizeObserverConfig:h,transition:d=NS}=n;const{items:p,containerId:m,activeIndex:x,disabled:k,disableTransforms:b,sortedRects:O,overIndex:C,useDragOverlay:P,strategy:M}=S.useContext(hx),L=TS(r,k),B=p.indexOf(a),R=S.useMemo(()=>({sortable:{containerId:m,index:B,items:p},...s}),[m,s,B,p]),j=S.useMemo(()=>p.slice(p.indexOf(a)),[p,a]),{rect:D,node:V,isOver:$,setNodeRef:U}=xS({id:a,data:R,disabled:L.droppable,resizeObserverConfig:{updateMeasurementsFor:j,...h}}),{active:J,activatorEvent:Q,activeNodeRect:Z,attributes:he,setNodeRef:K,listeners:G,isDragging:oe,over:W,setActivatorNodeRef:re,transform:ee}=pS({id:a,data:R,attributes:{...ES,...t},disabled:L.draggable}),A=Xw(U,K),z=!!J,ue=z&&!b&&Sa(x)&&Sa(C),pe=!P&&oe,te=pe&&ue?ee:null,ae=ue?te??(c??M)({rects:O,activeNodeRect:Z,activeIndex:x,overIndex:C,index:B}):null,we=Sa(x)&&Sa(C)?l({id:a,items:p,activeIndex:x,overIndex:C}):B,ye=J==null?void 0:J.id,me=S.useRef({activeId:ye,items:p,newIndex:we,containerId:m}),Ne=p!==me.current.items,Fe=e({active:J,containerId:m,isDragging:oe,isSorting:z,id:a,index:B,items:p,newIndex:me.current.newIndex,previousItems:me.current.items,previousContainerId:me.current.containerId,transition:d,wasDragging:me.current.activeId!=null}),Ve=MS({disabled:!Fe,index:B,node:V,rect:D});return S.useEffect(()=>{z&&me.current.newIndex!==we&&(me.current.newIndex=we),m!==me.current.containerId&&(me.current.containerId=m),p!==me.current.items&&(me.current.items=p)},[z,we,m,p]),S.useEffect(()=>{if(ye===me.current.activeId)return;if(ye!=null&&me.current.activeId==null){me.current.activeId=ye;return}const Ct=setTimeout(()=>{me.current.activeId=ye},50);return()=>clearTimeout(Ct)},[ye]),{active:J,activeIndex:x,attributes:he,data:R,rect:D,index:B,newIndex:we,items:p,isOver:$,isSorting:z,isDragging:oe,listeners:G,node:V,overIndex:C,over:W,setNodeRef:A,setActivatorNodeRef:re,setDroppableNodeRef:U,setDraggableNodeRef:K,transform:Ve??ae,transition:Ke()};function Ke(){if(Ve||Ne&&me.current.newIndex===B)return AS;if(!(pe&&!dd(Q)||!d)&&(z||Fe))return $o.Transition.toString({...d,property:fx})}}function TS(n,e){var t,r;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n==null?void 0:n.draggable)!=null?t:e.draggable,droppable:(r=n==null?void 0:n.droppable)!=null?r:e.droppable}}Le.Down,Le.Right,Le.Up,Le.Left;function Um(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function DS(n){if(Array.isArray(n))return n}function jS(n,e,t){return(e=HS(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function LS(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,l,a,c=[],h=!0,d=!1;try{if(l=(t=t.call(n)).next,e!==0)for(;!(h=(r=l.call(t)).done)&&(c.push(r.value),c.length!==e);h=!0);}catch(p){d=!0,s=p}finally{try{if(!h&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(d)throw s}}return c}}function IS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Xm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Km(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Xm(Object(t),!0).forEach(function(r){jS(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Xm(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function BS(n,e){if(n==null)return{};var t,r,s=zS(n,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(r=0;r<l.length;r++)t=l[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}function zS(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function FS(n,e){return DS(n)||LS(n,e)||VS(n,e)||IS()}function _S(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function HS(n){var e=_S(n,"string");return typeof e=="symbol"?e:e+""}function VS(n,e){if(n){if(typeof n=="string")return Um(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Um(n,e):void 0}}function WS(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function qm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Gm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?qm(Object(t),!0).forEach(function(r){WS(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):qm(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function QS(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){return e.reduceRight(function(s,l){return l(s)},r)}}function Ao(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return s.length>=n.length?n.apply(this,s):function(){for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];return e.apply(t,[].concat(s,c))}}}function cu(n){return{}.toString.call(n).includes("Object")}function $S(n){return!Object.keys(n).length}function Xo(n){return typeof n=="function"}function US(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function XS(n,e){return cu(e)||oi("changeType"),Object.keys(e).some(function(t){return!US(n,t)})&&oi("changeField"),e}function KS(n){Xo(n)||oi("selectorType")}function qS(n){Xo(n)||cu(n)||oi("handlerType"),cu(n)&&Object.values(n).some(function(e){return!Xo(e)})&&oi("handlersType")}function GS(n){n||oi("initialIsRequired"),cu(n)||oi("initialType"),$S(n)&&oi("initialContent")}function YS(n,e){throw new Error(n[e]||n.default)}var JS={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},oi=Ao(YS)(JS),Ca={changes:XS,selector:KS,handler:qS,initial:GS};function ZS(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Ca.initial(n),Ca.handler(e);var t={current:n},r=Ao(n2)(t,e),s=Ao(t2)(t),l=Ao(Ca.changes)(n),a=Ao(e2)(t);function c(){var d=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(p){return p};return Ca.selector(d),d(t.current)}function h(d){QS(r,s,l,a)(d)}return[c,h]}function e2(n,e){return Xo(e)?e(n.current):e}function t2(n,e){return n.current=Gm(Gm({},n.current),e),e}function n2(n,e,t){return Xo(e)?e(n.current):Object.keys(t).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,n.current[r])}),t}var r2={create:ZS},i2={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function s2(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return s.length>=n.length?n.apply(this,s):function(){for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];return e.apply(t,[].concat(s,c))}}}function o2(n){return{}.toString.call(n).includes("Object")}function l2(n){return n||Ym("configIsRequired"),o2(n)||Ym("configType"),n.urls?(a2(),{paths:{vs:n.urls.monacoBase}}):n}function a2(){console.warn(dx.deprecation)}function u2(n,e){throw new Error(n[e]||n.default)}var dx={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},Ym=s2(u2)(dx),c2={config:l2},h2=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return t.reduceRight(function(l,a){return a(l)},s)}};function px(n,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&n[t]&&Object.assign(e[t],px(n[t],e[t]))}),Km(Km({},n),e)}var f2={type:"cancelation",msg:"operation is manually canceled"};function Th(n){var e=!1,t=new Promise(function(r,s){n.then(function(l){return e?s(f2):r(l)}),n.catch(s)});return t.cancel=function(){return e=!0},t}var d2=["monaco"],p2=r2.create({config:i2,isInitialized:!1,resolve:null,reject:null,monaco:null}),gx=FS(p2,2),al=gx[0],Ru=gx[1];function g2(n){var e=c2.config(n),t=e.monaco,r=BS(e,d2);Ru(function(s){return{config:px(s.config,r),monaco:t}})}function m2(){var n=al(function(e){var t=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:t,isInitialized:r,resolve:s}});if(!n.isInitialized){if(Ru({isInitialized:!0}),n.monaco)return n.resolve(n.monaco),Th(Dh);if(window.monaco&&window.monaco.editor)return mx(window.monaco),n.resolve(window.monaco),Th(Dh);h2(y2,v2)(k2)}return Th(Dh)}function y2(n){return document.body.appendChild(n)}function x2(n){var e=document.createElement("script");return n&&(e.src=n),e}function v2(n){var e=al(function(r){var s=r.config,l=r.reject;return{config:s,reject:l}}),t=x2("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return n()},t.onerror=e.reject,t}function k2(){var n=al(function(t){var r=t.config,s=t.resolve,l=t.reject;return{config:r,resolve:s,reject:l}}),e=window.require;e.config(n.config),e(["vs/editor/editor.main"],function(t){var r=t.m||t;mx(r),n.resolve(r)},function(t){n.reject(t)})}function mx(n){al().monaco||Ru({monaco:n})}function w2(){return al(function(n){var e=n.monaco;return e})}var Dh=new Promise(function(n,e){return Ru({resolve:n,reject:e})}),yx={config:g2,init:m2,__getMonacoInstance:w2},b2={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},jh=b2,S2={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},O2=S2;function C2({children:n}){return ot.createElement("div",{style:O2.container},n)}var P2=C2,N2=P2;function A2({width:n,height:e,isEditorReady:t,loading:r,_ref:s,className:l,wrapperProps:a}){return ot.createElement("section",{style:{...jh.wrapper,width:n,height:e},...a},!t&&ot.createElement(N2,null,r),ot.createElement("div",{ref:s,style:{...jh.fullWidth,...!t&&jh.hide},className:l}))}var E2=A2,xx=S.memo(E2);function M2(n){S.useEffect(n,[])}var vx=M2;function R2(n,e,t=!0){let r=S.useRef(!0);S.useEffect(r.current||!t?()=>{r.current=!1}:n,e)}var hn=R2;function Io(){}function hs(n,e,t,r){return T2(n,r)||D2(n,e,t,r)}function T2(n,e){return n.editor.getModel(kx(n,e))}function D2(n,e,t,r){return n.editor.createModel(e,t,r?kx(n,r):void 0)}function kx(n,e){return n.Uri.parse(e)}function j2({original:n,modified:e,language:t,originalLanguage:r,modifiedLanguage:s,originalModelPath:l,modifiedModelPath:a,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:h=!1,theme:d="light",loading:p="Loading...",options:m={},height:x="100%",width:k="100%",className:b,wrapperProps:O={},beforeMount:C=Io,onMount:P=Io}){let[M,L]=S.useState(!1),[B,R]=S.useState(!0),j=S.useRef(null),D=S.useRef(null),V=S.useRef(null),$=S.useRef(P),U=S.useRef(C),J=S.useRef(!1);vx(()=>{let K=yx.init();return K.then(G=>(D.current=G)&&R(!1)).catch(G=>(G==null?void 0:G.type)!=="cancelation"&&console.error("Monaco initialization: error:",G)),()=>j.current?he():K.cancel()}),hn(()=>{if(j.current&&D.current){let K=j.current.getOriginalEditor(),G=hs(D.current,n||"",r||t||"text",l||"");G!==K.getModel()&&K.setModel(G)}},[l],M),hn(()=>{if(j.current&&D.current){let K=j.current.getModifiedEditor(),G=hs(D.current,e||"",s||t||"text",a||"");G!==K.getModel()&&K.setModel(G)}},[a],M),hn(()=>{let K=j.current.getModifiedEditor();K.getOption(D.current.editor.EditorOption.readOnly)?K.setValue(e||""):e!==K.getValue()&&(K.executeEdits("",[{range:K.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),K.pushUndoStop())},[e],M),hn(()=>{var K,G;(G=(K=j.current)==null?void 0:K.getModel())==null||G.original.setValue(n||"")},[n],M),hn(()=>{let{original:K,modified:G}=j.current.getModel();D.current.editor.setModelLanguage(K,r||t||"text"),D.current.editor.setModelLanguage(G,s||t||"text")},[t,r,s],M),hn(()=>{var K;(K=D.current)==null||K.editor.setTheme(d)},[d],M),hn(()=>{var K;(K=j.current)==null||K.updateOptions(m)},[m],M);let Q=S.useCallback(()=>{var oe;if(!D.current)return;U.current(D.current);let K=hs(D.current,n||"",r||t||"text",l||""),G=hs(D.current,e||"",s||t||"text",a||"");(oe=j.current)==null||oe.setModel({original:K,modified:G})},[t,e,s,n,r,l,a]),Z=S.useCallback(()=>{var K;!J.current&&V.current&&(j.current=D.current.editor.createDiffEditor(V.current,{automaticLayout:!0,...m}),Q(),(K=D.current)==null||K.editor.setTheme(d),L(!0),J.current=!0)},[m,d,Q]);S.useEffect(()=>{M&&$.current(j.current,D.current)},[M]),S.useEffect(()=>{!B&&!M&&Z()},[B,M,Z]);function he(){var G,oe,W,re;let K=(G=j.current)==null?void 0:G.getModel();c||((oe=K==null?void 0:K.original)==null||oe.dispose()),h||((W=K==null?void 0:K.modified)==null||W.dispose()),(re=j.current)==null||re.dispose()}return ot.createElement(xx,{width:k,height:x,isEditorReady:M,loading:p,_ref:V,className:b,wrapperProps:O})}var L2=j2;S.memo(L2);function I2(n){let e=S.useRef();return S.useEffect(()=>{e.current=n},[n]),e.current}var B2=I2,Pa=new Map;function z2({defaultValue:n,defaultLanguage:e,defaultPath:t,value:r,language:s,path:l,theme:a="light",line:c,loading:h="Loading...",options:d={},overrideServices:p={},saveViewState:m=!0,keepCurrentModel:x=!1,width:k="100%",height:b="100%",className:O,wrapperProps:C={},beforeMount:P=Io,onMount:M=Io,onChange:L,onValidate:B=Io}){let[R,j]=S.useState(!1),[D,V]=S.useState(!0),$=S.useRef(null),U=S.useRef(null),J=S.useRef(null),Q=S.useRef(M),Z=S.useRef(P),he=S.useRef(),K=S.useRef(r),G=B2(l),oe=S.useRef(!1),W=S.useRef(!1);vx(()=>{let A=yx.init();return A.then(z=>($.current=z)&&V(!1)).catch(z=>(z==null?void 0:z.type)!=="cancelation"&&console.error("Monaco initialization: error:",z)),()=>U.current?ee():A.cancel()}),hn(()=>{var z,ue,pe,te;let A=hs($.current,n||r||"",e||s||"",l||t||"");A!==((z=U.current)==null?void 0:z.getModel())&&(m&&Pa.set(G,(ue=U.current)==null?void 0:ue.saveViewState()),(pe=U.current)==null||pe.setModel(A),m&&((te=U.current)==null||te.restoreViewState(Pa.get(l))))},[l],R),hn(()=>{var A;(A=U.current)==null||A.updateOptions(d)},[d],R),hn(()=>{!U.current||r===void 0||(U.current.getOption($.current.editor.EditorOption.readOnly)?U.current.setValue(r):r!==U.current.getValue()&&(W.current=!0,U.current.executeEdits("",[{range:U.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),U.current.pushUndoStop(),W.current=!1))},[r],R),hn(()=>{var z,ue;let A=(z=U.current)==null?void 0:z.getModel();A&&s&&((ue=$.current)==null||ue.editor.setModelLanguage(A,s))},[s],R),hn(()=>{var A;c!==void 0&&((A=U.current)==null||A.revealLine(c))},[c],R),hn(()=>{var A;(A=$.current)==null||A.editor.setTheme(a)},[a],R);let re=S.useCallback(()=>{var A;if(!(!J.current||!$.current)&&!oe.current){Z.current($.current);let z=l||t,ue=hs($.current,r||n||"",e||s||"",z||"");U.current=(A=$.current)==null?void 0:A.editor.create(J.current,{model:ue,automaticLayout:!0,...d},p),m&&U.current.restoreViewState(Pa.get(z)),$.current.editor.setTheme(a),c!==void 0&&U.current.revealLine(c),j(!0),oe.current=!0}},[n,e,t,r,s,l,d,p,m,a,c]);S.useEffect(()=>{R&&Q.current(U.current,$.current)},[R]),S.useEffect(()=>{!D&&!R&&re()},[D,R,re]),K.current=r,S.useEffect(()=>{var A,z;R&&L&&((A=he.current)==null||A.dispose(),he.current=(z=U.current)==null?void 0:z.onDidChangeModelContent(ue=>{W.current||L(U.current.getValue(),ue)}))},[R,L]),S.useEffect(()=>{if(R){let A=$.current.editor.onDidChangeMarkers(z=>{var pe;let ue=(pe=U.current.getModel())==null?void 0:pe.uri;if(ue&&z.find(te=>te.path===ue.path)){let te=$.current.editor.getModelMarkers({resource:ue});B==null||B(te)}});return()=>{A==null||A.dispose()}}return()=>{}},[R,B]);function ee(){var A,z;(A=he.current)==null||A.dispose(),x?m&&Pa.set(l,U.current.saveViewState()):(z=U.current.getModel())==null||z.dispose(),U.current.dispose()}return ot.createElement(xx,{width:k,height:b,isEditorReady:R,loading:h,_ref:J,className:O,wrapperProps:C})}var F2=z2,_2=S.memo(F2),H2=_2;let ff=[],wx=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?wx:ff).push(t=t+n[e])})();function V2(n){if(n<768)return!1;for(let e=0,t=ff.length;;){let r=e+t>>1;if(n<ff[r])t=r;else if(n>=wx[r])e=r+1;else return!0;if(e==t)return!1}}function Jm(n){return n>=127462&&n<=127487}const Zm=8205;function W2(n,e,t=!0,r=!0){return(t?bx:Q2)(n,e,r)}function bx(n,e,t){if(e==n.length)return e;e&&Sx(n.charCodeAt(e))&&Ox(n.charCodeAt(e-1))&&e--;let r=Lh(n,e);for(e+=e0(r);e<n.length;){let s=Lh(n,e);if(r==Zm||s==Zm||t&&V2(s))e+=e0(s),r=s;else if(Jm(s)){let l=0,a=e-2;for(;a>=0&&Jm(Lh(n,a));)l++,a-=2;if(l%2==0)break;e+=2}else break}return e}function Q2(n,e,t){for(;e>0;){let r=bx(n,e-2,t);if(r<e)return r;e--}return 0}function Lh(n,e){let t=n.charCodeAt(e);if(!Ox(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return Sx(r)?(t-55296<<10)+(r-56320)+65536:t}function Sx(n){return n>=56320&&n<57344}function Ox(n){return n>=55296&&n<56320}function e0(n){return n<65536?1:2}class De{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=bs(this,e,t);let s=[];return this.decompose(0,e,s,2),r.length&&r.decompose(0,r.length,s,3),this.decompose(t,this.length,s,1),rr.from(s,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=bs(this,e,t);let r=[];return this.decompose(e,t,r,0),rr.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),s=new Bo(this),l=new Bo(e);for(let a=t,c=t;;){if(s.next(a),l.next(a),a=0,s.lineBreak!=l.lineBreak||s.done!=l.done||s.value!=l.value)return!1;if(c+=s.value.length,s.done||c>=r)return!0}}iter(e=1){return new Bo(this,e)}iterRange(e,t=this.length){return new Cx(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;r=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Px(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?De.empty:e.length<=32?new st(e):rr.from(st.split(e,[]))}}class st extends De{constructor(e,t=$2(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,s){for(let l=0;;l++){let a=this.text[l],c=s+a.length;if((t?r:c)>=e)return new U2(s,c,r,a);s=c+1,r++}}decompose(e,t,r,s){let l=e<=0&&t>=this.length?this:new st(t0(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let a=r.pop(),c=Ka(l.text,a.text.slice(),0,l.length);if(c.length<=32)r.push(new st(c,a.length+l.length));else{let h=c.length>>1;r.push(new st(c.slice(0,h)),new st(c.slice(h)))}}else r.push(l)}replace(e,t,r){if(!(r instanceof st))return super.replace(e,t,r);[e,t]=bs(this,e,t);let s=Ka(this.text,Ka(r.text,t0(this.text,0,e)),t),l=this.length+r.length-(t-e);return s.length<=32?new st(s,l):rr.from(st.split(s,[]),l)}sliceString(e,t=this.length,r=`
`){[e,t]=bs(this,e,t);let s="";for(let l=0,a=0;l<=t&&a<this.text.length;a++){let c=this.text[a],h=l+c.length;l>e&&a&&(s+=r),e<h&&t>l&&(s+=c.slice(Math.max(0,e-l),t-l)),l=h+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],s=-1;for(let l of e)r.push(l),s+=l.length+1,r.length==32&&(t.push(new st(r,s)),r=[],s=-1);return s>-1&&t.push(new st(r,s)),t}}class rr extends De{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,s){for(let l=0;;l++){let a=this.children[l],c=s+a.length,h=r+a.lines-1;if((t?h:c)>=e)return a.lineInner(e,t,r,s);s=c+1,r=h+1}}decompose(e,t,r,s){for(let l=0,a=0;a<=t&&l<this.children.length;l++){let c=this.children[l],h=a+c.length;if(e<=h&&t>=a){let d=s&((a<=e?1:0)|(h>=t?2:0));a>=e&&h<=t&&!d?r.push(c):c.decompose(e-a,t-a,r,d)}a=h+1}}replace(e,t,r){if([e,t]=bs(this,e,t),r.lines<this.lines)for(let s=0,l=0;s<this.children.length;s++){let a=this.children[s],c=l+a.length;if(e>=l&&t<=c){let h=a.replace(e-l,t-l,r),d=this.lines-a.lines+h.lines;if(h.lines<d>>4&&h.lines>d>>6){let p=this.children.slice();return p[s]=h,new rr(p,this.length-(t-e)+r.length)}return super.replace(l,c,h)}l=c+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=bs(this,e,t);let s="";for(let l=0,a=0;l<this.children.length&&a<=t;l++){let c=this.children[l],h=a+c.length;a>e&&l&&(s+=r),e<h&&t>a&&(s+=c.sliceString(e-a,t-a,r)),a=h+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof rr))return 0;let r=0,[s,l,a,c]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,l+=t){if(s==a||l==c)return r;let h=this.children[s],d=e.children[l];if(h!=d)return r+h.scanIdentical(d,t);r+=h.length+1}}static from(e,t=e.reduce((r,s)=>r+s.length+1,-1)){let r=0;for(let k of e)r+=k.lines;if(r<32){let k=[];for(let b of e)b.flatten(k);return new st(k,t)}let s=Math.max(32,r>>5),l=s<<1,a=s>>1,c=[],h=0,d=-1,p=[];function m(k){let b;if(k.lines>l&&k instanceof rr)for(let O of k.children)m(O);else k.lines>a&&(h>a||!h)?(x(),c.push(k)):k instanceof st&&h&&(b=p[p.length-1])instanceof st&&k.lines+b.lines<=32?(h+=k.lines,d+=k.length+1,p[p.length-1]=new st(b.text.concat(k.text),b.length+1+k.length)):(h+k.lines>s&&x(),h+=k.lines,d+=k.length+1,p.push(k))}function x(){h!=0&&(c.push(p.length==1?p[0]:rr.from(p,d)),d=-1,h=p.length=0)}for(let k of e)m(k);return x(),c.length==1?c[0]:new rr(c,t)}}De.empty=new st([""],0);function $2(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Ka(n,e,t=0,r=1e9){for(let s=0,l=0,a=!0;l<n.length&&s<=r;l++){let c=n[l],h=s+c.length;h>=t&&(h>r&&(c=c.slice(0,r-s)),s<t&&(c=c.slice(t-s)),a?(e[e.length-1]+=c,a=!1):e.push(c)),s=h+1}return e}function t0(n,e,t){return Ka(n,[""],e,t)}class Bo{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof st?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,s=this.nodes[r],l=this.offsets[r],a=l>>1,c=s instanceof st?s.text.length:s.children.length;if(a==(t>0?c:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof st){let h=s.text[a+(t<0?-1:0)];if(this.offsets[r]+=t,h.length>Math.max(0,e))return this.value=e==0?h:t>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=s.children[a+(t<0?-1:0)];e>h.length?(e-=h.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(h),this.offsets.push(t>0?1:(h instanceof st?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Cx{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new Bo(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=r?s:t<0?s.slice(s.length-r):s.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class Px{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(De.prototype[Symbol.iterator]=function(){return this.iter()},Bo.prototype[Symbol.iterator]=Cx.prototype[Symbol.iterator]=Px.prototype[Symbol.iterator]=function(){return this});class U2{constructor(e,t,r,s){this.from=e,this.to=t,this.number=r,this.text=s}get length(){return this.to-this.from}}function bs(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function Wt(n,e,t=!0,r=!0){return W2(n,e,t,r)}function X2(n){return n>=56320&&n<57344}function K2(n){return n>=55296&&n<56320}function q2(n,e){let t=n.charCodeAt(e);if(!K2(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return X2(r)?(t-55296<<10)+(r-56320)+65536:t}function G2(n){return n<65536?1:2}const df=/\r\n?|\n/;var fn=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(fn||(fn={}));class Or{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,s=0;t<this.sections.length;){let l=this.sections[t++],a=this.sections[t++];a<0?(e(r,s,l),s+=l):s+=a,r+=l}}iterChangedRanges(e,t=!1){pf(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];s<0?e.push(r,s):e.push(s,r)}return new Or(e)}composeDesc(e){return this.empty?e:e.empty?this:Nx(this,e)}mapDesc(e,t=!1){return e.empty?this:gf(this,e,t)}mapPos(e,t=-1,r=fn.Simple){let s=0,l=0;for(let a=0;a<this.sections.length;){let c=this.sections[a++],h=this.sections[a++],d=s+c;if(h<0){if(d>e)return l+(e-s);l+=c}else{if(r!=fn.Simple&&d>=e&&(r==fn.TrackDel&&s<e&&d>e||r==fn.TrackBefore&&s<e||r==fn.TrackAfter&&d>e))return null;if(d>e||d==e&&t<0&&!c)return e==s||t<0?l:l+h;l+=h}s=d}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return l}touchesRange(e,t=e){for(let r=0,s=0;r<this.sections.length&&s<=t;){let l=this.sections[r++],a=this.sections[r++],c=s+l;if(a>=0&&s<=t&&c>=e)return s<e&&c>t?"cover":!0;s=c}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+r+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Or(e)}static create(e){return new Or(e)}}class vt extends Or{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return pf(this,(t,r,s,l,a)=>e=e.replace(s,s+(r-t),a),!1),e}mapDesc(e,t=!1){return gf(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let s=0,l=0;s<t.length;s+=2){let a=t[s],c=t[s+1];if(c>=0){t[s]=c,t[s+1]=a;let h=s>>1;for(;r.length<h;)r.push(De.empty);r.push(a?e.slice(l,l+a):De.empty)}l+=a}return new vt(t,r)}compose(e){return this.empty?e:e.empty?this:Nx(this,e,!0)}map(e,t=!1){return e.empty?this:gf(this,e,t,!0)}iterChanges(e,t=!1){pf(this,e,t)}get desc(){return Or.create(this.sections)}filter(e){let t=[],r=[],s=[],l=new Ko(this);e:for(let a=0,c=0;;){let h=a==e.length?1e9:e[a++];for(;c<h||c==h&&l.len==0;){if(l.done)break e;let p=Math.min(l.len,h-c);Lt(s,p,-1);let m=l.ins==-1?-1:l.off==0?l.ins:0;Lt(t,p,m),m>0&&ti(r,t,l.text),l.forward(p),c+=p}let d=e[a++];for(;c<d;){if(l.done)break e;let p=Math.min(l.len,d-c);Lt(t,p,-1),Lt(s,p,l.ins==-1?-1:l.off==0?l.ins:0),l.forward(p),c+=p}}return{changes:new vt(t,r),filtered:Or.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],s=this.sections[t+1];s<0?e.push(r):s==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let s=[],l=[],a=0,c=null;function h(p=!1){if(!p&&!s.length)return;a<t&&Lt(s,t-a,-1);let m=new vt(s,l);c=c?c.compose(m.map(c)):m,s=[],l=[],a=0}function d(p){if(Array.isArray(p))for(let m of p)d(m);else if(p instanceof vt){if(p.length!=t)throw new RangeError(`Mismatched change set length (got ${p.length}, expected ${t})`);h(),c=c?c.compose(p.map(c)):p}else{let{from:m,to:x=m,insert:k}=p;if(m>x||m<0||x>t)throw new RangeError(`Invalid change range ${m} to ${x} (in doc of length ${t})`);let b=k?typeof k=="string"?De.of(k.split(r||df)):k:De.empty,O=b.length;if(m==x&&O==0)return;m<a&&h(),m>a&&Lt(s,m-a,-1),Lt(s,x-m,O),ti(l,s,b),a=x}}return d(e),h(!c),c}static empty(e){return new vt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")t.push(l,-1);else{if(!Array.isArray(l)||typeof l[0]!="number"||l.some((a,c)=>c&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(l.length==1)t.push(l[0],0);else{for(;r.length<s;)r.push(De.empty);r[s]=De.of(l.slice(1)),t.push(l[0],r[s].length)}}}return new vt(t,r)}static createSet(e,t){return new vt(e,t)}}function Lt(n,e,t,r=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:s>=0&&e==0&&n[s]==0?n[s+1]+=t:r?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function ti(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(De.empty);n.push(t)}}function pf(n,e,t){let r=n.inserted;for(let s=0,l=0,a=0;a<n.sections.length;){let c=n.sections[a++],h=n.sections[a++];if(h<0)s+=c,l+=c;else{let d=s,p=l,m=De.empty;for(;d+=c,p+=h,h&&r&&(m=m.append(r[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)c=n.sections[a++],h=n.sections[a++];e(s,d,l,p,m),s=d,l=p}}}function gf(n,e,t,r=!1){let s=[],l=r?[]:null,a=new Ko(n),c=new Ko(e);for(let h=-1;;){if(a.done&&c.len||c.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&c.ins==-1){let d=Math.min(a.len,c.len);Lt(s,d,-1),a.forward(d),c.forward(d)}else if(c.ins>=0&&(a.ins<0||h==a.i||a.off==0&&(c.len<a.len||c.len==a.len&&!t))){let d=c.len;for(Lt(s,c.ins,-1);d;){let p=Math.min(a.len,d);a.ins>=0&&h<a.i&&a.len<=p&&(Lt(s,0,a.ins),l&&ti(l,s,a.text),h=a.i),a.forward(p),d-=p}c.next()}else if(a.ins>=0){let d=0,p=a.len;for(;p;)if(c.ins==-1){let m=Math.min(p,c.len);d+=m,p-=m,c.forward(m)}else if(c.ins==0&&c.len<p)p-=c.len,c.next();else break;Lt(s,d,h<a.i?a.ins:0),l&&h<a.i&&ti(l,s,a.text),h=a.i,a.forward(a.len-p)}else{if(a.done&&c.done)return l?vt.createSet(s,l):Or.create(s);throw new Error("Mismatched change set lengths")}}}function Nx(n,e,t=!1){let r=[],s=t?[]:null,l=new Ko(n),a=new Ko(e);for(let c=!1;;){if(l.done&&a.done)return s?vt.createSet(r,s):Or.create(r);if(l.ins==0)Lt(r,l.len,0,c),l.next();else if(a.len==0&&!a.done)Lt(r,0,a.ins,c),s&&ti(s,r,a.text),a.next();else{if(l.done||a.done)throw new Error("Mismatched change set lengths");{let h=Math.min(l.len2,a.len),d=r.length;if(l.ins==-1){let p=a.ins==-1?-1:a.off?0:a.ins;Lt(r,h,p,c),s&&p&&ti(s,r,a.text)}else a.ins==-1?(Lt(r,l.off?0:l.len,h,c),s&&ti(s,r,l.textBit(h))):(Lt(r,l.off?0:l.len,a.off?0:a.ins,c),s&&!a.off&&ti(s,r,a.text));c=(l.ins>h||a.ins>=0&&a.len>h)&&(c||r.length>d),l.forward2(h),a.forward(h)}}}}class Ko{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?De.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?De.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class ji{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,s;return this.empty?r=s=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),r==this.from&&s==this.to?this:new ji(r,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return se.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return se.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return se.range(e.anchor,e.head)}static create(e,t,r){return new ji(e,t,r)}}class se{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:se.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new se([this.main],0)}addRange(e,t=!0){return se.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,se.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new se(e.ranges.map(t=>ji.fromJSON(t)),e.main)}static single(e,t=e){return new se([se.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,s=0;s<e.length;s++){let l=e[s];if(l.empty?l.from<=r:l.from<r)return se.normalized(e.slice(),t);r=l.to}return new se(e,t)}static cursor(e,t=0,r,s){return ji.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(s??16777215)<<6)}static range(e,t,r,s){let l=(r??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?ji.create(t,e,48|l):ji.create(e,t,(t>e?8:0)|l)}static normalized(e,t=0){let r=e[t];e.sort((s,l)=>s.from-l.from),t=e.indexOf(r);for(let s=1;s<e.length;s++){let l=e[s],a=e[s-1];if(l.empty?l.from<=a.to:l.from<a.to){let c=a.from,h=Math.max(l.to,a.to);s<=t&&t--,e.splice(--s,2,l.anchor>l.head?se.range(h,c):se.range(c,h))}}return new se(e,t)}}function Ax(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let vd=0;class be{constructor(e,t,r,s,l){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=s,this.id=vd++,this.default=e([]),this.extensions=typeof l=="function"?l(this):l}get reader(){return this}static define(e={}){return new be(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:kd),!!e.static,e.enables)}of(e){return new qa([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new qa(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new qa(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function kd(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class qa{constructor(e,t,r,s){this.dependencies=e,this.facet=t,this.type=r,this.value=s,this.id=vd++}dynamicSlot(e){var t;let r=this.value,s=this.facet.compareInput,l=this.id,a=e[l]>>1,c=this.type==2,h=!1,d=!1,p=[];for(let m of this.dependencies)m=="doc"?h=!0:m=="selection"?d=!0:(((t=e[m.id])!==null&&t!==void 0?t:1)&1)==0&&p.push(e[m.id]);return{create(m){return m.values[a]=r(m),1},update(m,x){if(h&&x.docChanged||d&&(x.docChanged||x.selection)||mf(m,p)){let k=r(m);if(c?!n0(k,m.values[a],s):!s(k,m.values[a]))return m.values[a]=k,1}return 0},reconfigure:(m,x)=>{let k,b=x.config.address[l];if(b!=null){let O=fu(x,b);if(this.dependencies.every(C=>C instanceof be?x.facet(C)===m.facet(C):C instanceof _i?x.field(C,!1)==m.field(C,!1):!0)||(c?n0(k=r(m),O,s):s(k=r(m),O)))return m.values[a]=O,0}else k=r(m);return m.values[a]=k,1}}}}function n0(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function mf(n,e){let t=!1;for(let r of e)zo(n,r)&1&&(t=!0);return t}function Y2(n,e,t){let r=t.map(h=>n[h.id]),s=t.map(h=>h.type),l=r.filter(h=>!(h&1)),a=n[e.id]>>1;function c(h){let d=[];for(let p=0;p<r.length;p++){let m=fu(h,r[p]);if(s[p]==2)for(let x of m)d.push(x);else d.push(m)}return e.combine(d)}return{create(h){for(let d of r)zo(h,d);return h.values[a]=c(h),1},update(h,d){if(!mf(h,l))return 0;let p=c(h);return e.compare(p,h.values[a])?0:(h.values[a]=p,1)},reconfigure(h,d){let p=mf(h,r),m=d.config.facets[e.id],x=d.facet(e);if(m&&!p&&kd(t,m))return h.values[a]=x,0;let k=c(h);return e.compare(k,x)?(h.values[a]=x,0):(h.values[a]=k,1)}}}const Na=be.define({static:!0});class _i{constructor(e,t,r,s,l){this.id=e,this.createF=t,this.updateF=r,this.compareF=s,this.spec=l,this.provides=void 0}static define(e){let t=new _i(vd++,e.create,e.update,e.compare||((r,s)=>r===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Na).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,s)=>{let l=r.values[t],a=this.updateF(l,s);return this.compareF(l,a)?0:(r.values[t]=a,1)},reconfigure:(r,s)=>{let l=r.facet(Na),a=s.facet(Na),c;return(c=l.find(h=>h.field==this))&&c!=a.find(h=>h.field==this)?(r.values[t]=c.create(r),1):s.config.address[this.id]!=null?(r.values[t]=s.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,Na.of({field:this,create:e})]}get extension(){return this}}const Ti={lowest:4,low:3,default:2,high:1,highest:0};function bo(n){return e=>new Ex(e,n)}const Tu={highest:bo(Ti.highest),high:bo(Ti.high),default:bo(Ti.default),low:bo(Ti.low),lowest:bo(Ti.lowest)};class Ex{constructor(e,t){this.inner=e,this.prec=t}}class ul{of(e){return new yf(this,e)}reconfigure(e){return ul.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class yf{constructor(e,t){this.compartment=e,this.inner=t}}class hu{constructor(e,t,r,s,l,a){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=s,this.staticValues=l,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let s=[],l=Object.create(null),a=new Map;for(let x of J2(e,t,a))x instanceof _i?s.push(x):(l[x.facet.id]||(l[x.facet.id]=[])).push(x);let c=Object.create(null),h=[],d=[];for(let x of s)c[x.id]=d.length<<1,d.push(k=>x.slot(k));let p=r==null?void 0:r.config.facets;for(let x in l){let k=l[x],b=k[0].facet,O=p&&p[x]||[];if(k.every(C=>C.type==0))if(c[b.id]=h.length<<1|1,kd(O,k))h.push(r.facet(b));else{let C=b.combine(k.map(P=>P.value));h.push(r&&b.compare(C,r.facet(b))?r.facet(b):C)}else{for(let C of k)C.type==0?(c[C.id]=h.length<<1|1,h.push(C.value)):(c[C.id]=d.length<<1,d.push(P=>C.dynamicSlot(P)));c[b.id]=d.length<<1,d.push(C=>Y2(C,b,k))}}let m=d.map(x=>x(c));return new hu(e,a,m,c,h,l)}}function J2(n,e,t){let r=[[],[],[],[],[]],s=new Map;function l(a,c){let h=s.get(a);if(h!=null){if(h<=c)return;let d=r[h].indexOf(a);d>-1&&r[h].splice(d,1),a instanceof yf&&t.delete(a.compartment)}if(s.set(a,c),Array.isArray(a))for(let d of a)l(d,c);else if(a instanceof yf){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let d=e.get(a.compartment)||a.inner;t.set(a.compartment,d),l(d,c)}else if(a instanceof Ex)l(a.inner,a.prec);else if(a instanceof _i)r[c].push(a),a.provides&&l(a.provides,c);else if(a instanceof qa)r[c].push(a),a.facet.extensions&&l(a.facet.extensions,Ti.default);else{let d=a.extension;if(!d)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(d,c)}}return l(n,Ti.default),r.reduce((a,c)=>a.concat(c))}function zo(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function fu(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const Mx=be.define(),xf=be.define({combine:n=>n.some(e=>e),static:!0}),Rx=be.define({combine:n=>n.length?n[0]:void 0,static:!0}),Tx=be.define(),Dx=be.define(),jx=be.define(),Lx=be.define({combine:n=>n.length?n[0]:!1});class Ls{constructor(e,t){this.type=e,this.value=t}static define(){return new Z2}}class Z2{of(e){return new Ls(this,e)}}class eO{constructor(e){this.map=e}of(e){return new pt(this,e)}}class pt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new pt(this.type,t)}is(e){return this.type==e}static define(e={}){return new eO(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let s of e){let l=s.map(t);l&&r.push(l)}return r}}pt.reconfigure=pt.define();pt.appendConfig=pt.define();class Bt{constructor(e,t,r,s,l,a){this.startState=e,this.changes=t,this.selection=r,this.effects=s,this.annotations=l,this.scrollIntoView=a,this._doc=null,this._state=null,r&&Ax(r,t.newLength),l.some(c=>c.type==Bt.time)||(this.annotations=l.concat(Bt.time.of(Date.now())))}static create(e,t,r,s,l,a){return new Bt(e,t,r,s,l,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Bt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Bt.time=Ls.define();Bt.userEvent=Ls.define();Bt.addToHistory=Ls.define();Bt.remote=Ls.define();function tO(n,e){let t=[];for(let r=0,s=0;;){let l,a;if(r<n.length&&(s==e.length||e[s]>=n[r]))l=n[r++],a=n[r++];else if(s<e.length)l=e[s++],a=e[s++];else return t;!t.length||t[t.length-1]<l?t.push(l,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function Ix(n,e,t){var r;let s,l,a;return t?(s=e.changes,l=vt.empty(e.changes.length),a=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),l=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(s)),{changes:a,selection:e.selection?e.selection.map(l):(r=n.selection)===null||r===void 0?void 0:r.map(s),effects:pt.mapEffects(n.effects,s).concat(pt.mapEffects(e.effects,l)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function vf(n,e,t){let r=e.selection,s=xs(e.annotations);return e.userEvent&&(s=s.concat(Bt.userEvent.of(e.userEvent))),{changes:e.changes instanceof vt?e.changes:vt.of(e.changes||[],t,n.facet(Rx)),selection:r&&(r instanceof se?r:se.single(r.anchor,r.head)),effects:xs(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function Bx(n,e,t){let r=vf(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let l=1;l<e.length;l++){e[l].filter===!1&&(t=!1);let a=!!e[l].sequential;r=Ix(r,vf(n,e[l],a?r.changes.newLength:n.doc.length),a)}let s=Bt.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return rO(t?nO(s):s)}function nO(n){let e=n.startState,t=!0;for(let s of e.facet(Tx)){let l=s(n);if(l===!1){t=!1;break}Array.isArray(l)&&(t=t===!0?l:tO(t,l))}if(t!==!0){let s,l;if(t===!1)l=n.changes.invertedDesc,s=vt.empty(e.doc.length);else{let a=n.changes.filter(t);s=a.changes,l=a.filtered.mapDesc(a.changes).invertedDesc}n=Bt.create(e,s,n.selection&&n.selection.map(l),pt.mapEffects(n.effects,l),n.annotations,n.scrollIntoView)}let r=e.facet(Dx);for(let s=r.length-1;s>=0;s--){let l=r[s](n);l instanceof Bt?n=l:Array.isArray(l)&&l.length==1&&l[0]instanceof Bt?n=l[0]:n=Bx(e,xs(l),!1)}return n}function rO(n){let e=n.startState,t=e.facet(jx),r=n;for(let s=t.length-1;s>=0;s--){let l=t[s](n);l&&Object.keys(l).length&&(r=Ix(r,vf(e,l,n.changes.newLength),!0))}return r==n?n:Bt.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const iO=[];function xs(n){return n==null?iO:Array.isArray(n)?n:[n]}var Sr=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(Sr||(Sr={}));const sO=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let kf;try{kf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function oO(n){if(kf)return kf.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||sO.test(t)))return!0}return!1}function lO(n){return e=>{if(!/\S/.test(e))return Sr.Space;if(oO(e))return Sr.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return Sr.Word;return Sr.Other}}class Ie{constructor(e,t,r,s,l,a){this.config=e,this.doc=t,this.selection=r,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=l,a&&(a._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)zo(this,c<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return zo(this,r),fu(this,r)}update(...e){return Bx(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:s}=t;for(let c of e.effects)c.is(ul.reconfigure)?(t&&(s=new Map,t.compartments.forEach((h,d)=>s.set(d,h)),t=null),s.set(c.value.compartment,c.value.extension)):c.is(pt.reconfigure)?(t=null,r=c.value):c.is(pt.appendConfig)&&(t=null,r=xs(r).concat(c.value));let l;t?l=e.startState.values.slice():(t=hu.resolve(r,s,this),l=new Ie(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(h,d)=>d.reconfigure(h,this),null).values);let a=e.startState.facet(xf)?e.newSelection:e.newSelection.asSingle();new Ie(t,e.newDoc,a,l,(c,h)=>h.update(c,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:se.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),s=this.changes(r.changes),l=[r.range],a=xs(r.effects);for(let c=1;c<t.ranges.length;c++){let h=e(t.ranges[c]),d=this.changes(h.changes),p=d.map(s);for(let x=0;x<c;x++)l[x]=l[x].map(p);let m=s.mapDesc(d,!0);l.push(h.range.map(m)),s=s.compose(p),a=pt.mapEffects(a,p).concat(pt.mapEffects(xs(h.effects),m))}return{changes:s,selection:se.create(l,t.mainIndex),effects:a}}changes(e=[]){return e instanceof vt?e:vt.of(e,this.doc.length,this.facet(Ie.lineSeparator))}toText(e){return De.of(e.split(this.facet(Ie.lineSeparator)||df))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(zo(this,t),fu(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let s=e[r];s instanceof _i&&this.config.address[s.id]!=null&&(t[r]=s.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(r){for(let l in r)if(Object.prototype.hasOwnProperty.call(e,l)){let a=r[l],c=e[l];s.push(a.init(h=>a.spec.fromJSON(c,h)))}}return Ie.create({doc:e.doc,selection:se.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=hu.resolve(e.extensions||[],new Map),r=e.doc instanceof De?e.doc:De.of((e.doc||"").split(t.staticFacet(Ie.lineSeparator)||df)),s=e.selection?e.selection instanceof se?e.selection:se.single(e.selection.anchor,e.selection.head):se.single(0);return Ax(s,r.length),t.staticFacet(xf)||(s=s.asSingle()),new Ie(t,r,s,t.dynamicSlots.map(()=>null),(l,a)=>a.create(l),null)}get tabSize(){return this.facet(Ie.tabSize)}get lineBreak(){return this.facet(Ie.lineSeparator)||`
`}get readOnly(){return this.facet(Lx)}phrase(e,...t){for(let r of this.facet(Ie.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,s)=>{if(s=="$")return"$";let l=+(s||1);return!l||l>t.length?r:t[l-1]})),e}languageDataAt(e,t,r=-1){let s=[];for(let l of this.facet(Mx))for(let a of l(this,t,r))Object.prototype.hasOwnProperty.call(a,e)&&s.push(a[e]);return s}charCategorizer(e){return lO(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:s}=this.doc.lineAt(e),l=this.charCategorizer(e),a=e-r,c=e-r;for(;a>0;){let h=Wt(t,a,!1);if(l(t.slice(h,a))!=Sr.Word)break;a=h}for(;c<s;){let h=Wt(t,c);if(l(t.slice(c,h))!=Sr.Word)break;c=h}return a==c?null:se.range(a+r,c+r)}}Ie.allowMultipleSelections=xf;Ie.tabSize=be.define({combine:n=>n.length?n[0]:4});Ie.lineSeparator=Rx;Ie.readOnly=Lx;Ie.phrases=be.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(s=>n[s]==e[s])}});Ie.languageData=Mx;Ie.changeFilter=Tx;Ie.transactionFilter=Dx;Ie.transactionExtender=jx;ul.reconfigure=pt.define();function zx(n,e,t={}){let r={};for(let s of n)for(let l of Object.keys(s)){let a=s[l],c=r[l];if(c===void 0)r[l]=a;else if(!(c===a||a===void 0))if(Object.hasOwnProperty.call(t,l))r[l]=t[l](c,a);else throw new Error("Config merge conflict for field "+l)}for(let s in e)r[s]===void 0&&(r[s]=e[s]);return r}class Ss{eq(e){return this==e}range(e,t=e){return wf.create(e,t,this)}}Ss.prototype.startSide=Ss.prototype.endSide=0;Ss.prototype.point=!1;Ss.prototype.mapMode=fn.TrackDel;let wf=class Fx{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new Fx(e,t,r)}};function bf(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class wd{constructor(e,t,r,s){this.from=e,this.to=t,this.value=r,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,s=0){let l=r?this.to:this.from;for(let a=s,c=l.length;;){if(a==c)return a;let h=a+c>>1,d=l[h]-e||(r?this.value[h].endSide:this.value[h].startSide)-t;if(h==a)return d>=0?a:c;d>=0?c=h:a=h+1}}between(e,t,r,s){for(let l=this.findIndex(t,-1e9,!0),a=this.findIndex(r,1e9,!1,l);l<a;l++)if(s(this.from[l]+e,this.to[l]+e,this.value[l])===!1)return!1}map(e,t){let r=[],s=[],l=[],a=-1,c=-1;for(let h=0;h<this.value.length;h++){let d=this.value[h],p=this.from[h]+e,m=this.to[h]+e,x,k;if(p==m){let b=t.mapPos(p,d.startSide,d.mapMode);if(b==null||(x=k=b,d.startSide!=d.endSide&&(k=t.mapPos(p,d.endSide),k<x)))continue}else if(x=t.mapPos(p,d.startSide),k=t.mapPos(m,d.endSide),x>k||x==k&&d.startSide>0&&d.endSide<=0)continue;(k-x||d.endSide-d.startSide)<0||(a<0&&(a=x),d.point&&(c=Math.max(c,k-x)),r.push(d),s.push(x-a),l.push(k-a))}return{mapped:r.length?new wd(s,l,r,c):null,pos:a}}}class Be{constructor(e,t,r,s){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=s}static create(e,t,r,s){return new Be(e,t,r,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:s=0,filterTo:l=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(r&&(t=t.slice().sort(bf)),this.isEmpty)return t.length?Be.of(t):this;let c=new _x(this,null,-1).goto(0),h=0,d=[],p=new qo;for(;c.value||h<t.length;)if(h<t.length&&(c.from-t[h].from||c.startSide-t[h].value.startSide)>=0){let m=t[h++];p.addInner(m.from,m.to,m.value)||d.push(m)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(h==t.length||this.chunkEnd(c.chunkIndex)<t[h].from)&&(!a||s>this.chunkEnd(c.chunkIndex)||l<this.chunkPos[c.chunkIndex])&&p.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!a||s>c.to||l<c.from||a(c.from,c.to,c.value))&&(p.addInner(c.from,c.to,c.value)||d.push(wf.create(c.from,c.to,c.value))),c.next());return p.finishInner(this.nextLayer.isEmpty&&!d.length?Be.empty:this.nextLayer.update({add:d,filter:a,filterFrom:s,filterTo:l}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],s=-1;for(let a=0;a<this.chunk.length;a++){let c=this.chunkPos[a],h=this.chunk[a],d=e.touchesRange(c,c+h.length);if(d===!1)s=Math.max(s,h.maxPoint),t.push(h),r.push(e.mapPos(c));else if(d===!0){let{mapped:p,pos:m}=h.map(c,e);p&&(s=Math.max(s,p.maxPoint),t.push(p),r.push(m))}}let l=this.nextLayer.map(e);return t.length==0?l:new Be(r,t,l||Be.empty,s)}between(e,t,r){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],a=this.chunk[s];if(t>=l&&e<=l+a.length&&a.between(l,e-l,t-l,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Go.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Go.from(e).goto(t)}static compare(e,t,r,s,l=-1){let a=e.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=l),c=t.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=l),h=r0(a,c,r),d=new So(a,h,l),p=new So(c,h,l);r.iterGaps((m,x,k)=>i0(d,m,p,x,k,s)),r.empty&&r.length==0&&i0(d,0,p,0,0,s)}static eq(e,t,r=0,s){s==null&&(s=999999999);let l=e.filter(p=>!p.isEmpty&&t.indexOf(p)<0),a=t.filter(p=>!p.isEmpty&&e.indexOf(p)<0);if(l.length!=a.length)return!1;if(!l.length)return!0;let c=r0(l,a),h=new So(l,c,0).goto(r),d=new So(a,c,0).goto(r);for(;;){if(h.to!=d.to||!Sf(h.active,d.active)||h.point&&(!d.point||!h.point.eq(d.point)))return!1;if(h.to>s)return!0;h.next(),d.next()}}static spans(e,t,r,s,l=-1){let a=new So(e,null,l).goto(t),c=t,h=a.openStart;for(;;){let d=Math.min(a.to,r);if(a.point){let p=a.activeForPoint(a.to),m=a.pointFrom<t?p.length+1:a.point.startSide<0?p.length:Math.min(p.length,h);s.point(c,d,a.point,p,m,a.pointRank),h=Math.min(a.openEnd(d),p.length)}else d>c&&(s.span(c,d,a.active,h),h=a.openEnd(d));if(a.to>r)return h+(a.point&&a.to>r?1:0);c=a.to,a.next()}}static of(e,t=!1){let r=new qo;for(let s of e instanceof wf?[e]:t?aO(e):e)r.add(s.from,s.to,s.value);return r.finish()}static join(e){if(!e.length)return Be.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let s=e[r];s!=Be.empty;s=s.nextLayer)t=new Be(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}Be.empty=new Be([],[],null,-1);function aO(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(bf(e,r)>0)return n.slice().sort(bf);e=r}return n}Be.empty.nextLayer=Be.empty;class qo{finishChunk(e){this.chunks.push(new wd(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new qo)).add(e,t,r)}addInner(e,t,r){let s=e-this.lastTo||r.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Be.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Be.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function r0(n,e,t){let r=new Map;for(let l of n)for(let a=0;a<l.chunk.length;a++)l.chunk[a].maxPoint<=0&&r.set(l.chunk[a],l.chunkPos[a]);let s=new Set;for(let l of e)for(let a=0;a<l.chunk.length;a++){let c=r.get(l.chunk[a]);c!=null&&(t?t.mapPos(c):c)==l.chunkPos[a]&&!(t!=null&&t.touchesRange(c,c+l.chunk[a].length))&&s.add(l.chunk[a])}return s}class _x{constructor(e,t,r,s=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Go{constructor(e){this.heap=e}static from(e,t=null,r=-1){let s=[];for(let l=0;l<e.length;l++)for(let a=e[l];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&s.push(new _x(a,t,r,l));return s.length==1?s[0]:new Go(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)Ih(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)Ih(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Ih(this.heap,0)}}}function Ih(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let s=n[r];if(r+1<n.length&&s.compare(n[r+1])>=0&&(s=n[r+1],r++),t.compare(s)<0)break;n[r]=t,n[e]=s,e=r}}class So{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Go.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Aa(this.active,e),Aa(this.activeTo,e),Aa(this.activeRank,e),this.minActive=s0(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:s,rank:l}=this.cursor;for(;t<this.activeRank.length&&(l-this.activeRank[t]||s-this.activeTo[t])>0;)t++;Ea(this.active,t,r),Ea(this.activeTo,t,s),Ea(this.activeRank,t,l),e&&Ea(e,t,this.cursor.from),this.minActive=s0(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),r&&Aa(r,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let s=r.length-1;s>=0&&r[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function i0(n,e,t,r,s,l){n.goto(e),t.goto(r);let a=r+s,c=r,h=r-e;for(;;){let d=n.to+h-t.to,p=d||n.endSide-t.endSide,m=p<0?n.to+h:t.to,x=Math.min(m,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&Sf(n.activeForPoint(n.to),t.activeForPoint(t.to))||l.comparePoint(c,x,n.point,t.point):x>c&&!Sf(n.active,t.active)&&l.compareRange(c,x,n.active,t.active),m>a)break;(d||n.openEnd!=t.openEnd)&&l.boundChange&&l.boundChange(m),c=m,p<=0&&n.next(),p>=0&&t.next()}}function Sf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Aa(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function Ea(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function s0(n,e){let t=-1,r=1e9;for(let s=0;s<e.length;s++)(e[s]-r||n[s].endSide-n[t].endSide)<0&&(t=s,r=e[s]);return t}function Du(n,e,t=n.length){let r=0;for(let s=0;s<t&&s<n.length;)n.charCodeAt(s)==9?(r+=e-r%e,s++):(r++,s=Wt(n,s));return r}function uO(n,e,t,r){for(let s=0,l=0;;){if(l>=e)return s;if(s==n.length)break;l+=n.charCodeAt(s)==9?t-l%t:1,s=Wt(n,s)}return n.length}const Of="",o0=typeof Symbol>"u"?"__"+Of:Symbol.for(Of),Cf=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),l0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class li{constructor(e,t){this.rules=[];let{finish:r}=t||{};function s(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function l(a,c,h,d){let p=[],m=/^@(\w+)\b/.exec(a[0]),x=m&&m[1]=="keyframes";if(m&&c==null)return h.push(a[0]+";");for(let k in c){let b=c[k];if(/&/.test(k))l(k.split(/,\s*/).map(O=>a.map(C=>O.replace(/&/,C))).reduce((O,C)=>O.concat(C)),b,h);else if(b&&typeof b=="object"){if(!m)throw new RangeError("The value of a property ("+k+") should be a primitive value.");l(s(k),b,p,x)}else b!=null&&p.push(k.replace(/_.*/,"").replace(/[A-Z]/g,O=>"-"+O.toLowerCase())+": "+b+";")}(p.length||x)&&h.push((r&&!m&&!d?a.map(r):a).join(", ")+" {"+p.join(" ")+"}")}for(let a in e)l(s(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=l0[o0]||1;return l0[o0]=e+1,Of+e.toString(36)}static mount(e,t,r){let s=e[Cf],l=r&&r.nonce;s?l&&s.setNonce(l):s=new cO(e,l),s.mount(Array.isArray(t)?t:[t],e)}}let a0=new Map;class cO{constructor(e,t){let r=e.ownerDocument||e,s=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let l=a0.get(r);if(l)return e[Cf]=l;this.sheet=new s.CSSStyleSheet,a0.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[Cf]=this}mount(e,t){let r=this.sheet,s=0,l=0;for(let a=0;a<e.length;a++){let c=e[a],h=this.modules.indexOf(c);if(h<l&&h>-1&&(this.modules.splice(h,1),l--,h=-1),h==-1){if(this.modules.splice(l++,0,c),r)for(let d=0;d<c.rules.length;d++)r.insertRule(c.rules[d],s++)}else{for(;l<h;)s+=this.modules[l++].rules.length;s+=c.rules.length,l++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let h=0;h<this.modules.length;h++)a+=this.modules[h].getRules()+`
`;this.styleTag.textContent=a;let c=t.head||t;this.styleTag.parentNode!=c&&c.insertBefore(this.styleTag,c.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var ai={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Yo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},hO=typeof navigator<"u"&&/Mac/.test(navigator.platform),fO=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Ot=0;Ot<10;Ot++)ai[48+Ot]=ai[96+Ot]=String(Ot);for(var Ot=1;Ot<=24;Ot++)ai[Ot+111]="F"+Ot;for(var Ot=65;Ot<=90;Ot++)ai[Ot]=String.fromCharCode(Ot+32),Yo[Ot]=String.fromCharCode(Ot);for(var Bh in ai)Yo.hasOwnProperty(Bh)||(Yo[Bh]=ai[Bh]);function dO(n){var e=hO&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||fO&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Yo:ai)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}let Vt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Pf=typeof document<"u"?document:{documentElement:{style:{}}};const Nf=/Edge\/(\d+)/.exec(Vt.userAgent),Hx=/MSIE \d/.test(Vt.userAgent),Af=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Vt.userAgent),ju=!!(Hx||Af||Nf),u0=!ju&&/gecko\/(\d+)/i.test(Vt.userAgent),zh=!ju&&/Chrome\/(\d+)/.exec(Vt.userAgent),pO="webkitFontSmoothing"in Pf.documentElement.style,Ef=!ju&&/Apple Computer/.test(Vt.vendor),c0=Ef&&(/Mobile\/\w+/.test(Vt.userAgent)||Vt.maxTouchPoints>2);var fe={mac:c0||/Mac/.test(Vt.platform),windows:/Win/.test(Vt.platform),linux:/Linux|X11/.test(Vt.platform),ie:ju,ie_version:Hx?Pf.documentMode||6:Af?+Af[1]:Nf?+Nf[1]:0,gecko:u0,gecko_version:u0?+(/Firefox\/(\d+)/.exec(Vt.userAgent)||[0,0])[1]:0,chrome:!!zh,chrome_version:zh?+zh[1]:0,ios:c0,android:/Android\b/.test(Vt.userAgent),webkit_version:pO?+(/\bAppleWebKit\/(\d+)/.exec(Vt.userAgent)||[0,0])[1]:0,safari:Ef,safari_version:Ef?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Vt.userAgent)||[0,0])[1]:0,tabSize:Pf.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Jo(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Mf(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Ga(n,e){if(!e.anchorNode)return!1;try{return Mf(n,e.anchorNode)}catch{return!1}}function Zo(n){return n.nodeType==3?zi(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function Fo(n,e,t,r){return t?h0(n,e,t,r,-1)||h0(n,e,t,r,1):!1}function Bi(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function du(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function h0(n,e,t,r,s){for(;;){if(n==t&&e==r)return!0;if(e==(s<0?0:lr(n))){if(n.nodeName=="DIV")return!1;let l=n.parentNode;if(!l||l.nodeType!=1)return!1;e=Bi(n)+(s<0?0:1),n=l}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?lr(n):0}else return!1}}function lr(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Lu(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function gO(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Vx(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function mO(n,e,t,r,s,l,a,c){let h=n.ownerDocument,d=h.defaultView||window;for(let p=n,m=!1;p&&!m;)if(p.nodeType==1){let x,k=p==h.body,b=1,O=1;if(k)x=gO(d);else{if(/^(fixed|sticky)$/.test(getComputedStyle(p).position)&&(m=!0),p.scrollHeight<=p.clientHeight&&p.scrollWidth<=p.clientWidth){p=p.assignedSlot||p.parentNode;continue}let M=p.getBoundingClientRect();({scaleX:b,scaleY:O}=Vx(p,M)),x={left:M.left,right:M.left+p.clientWidth*b,top:M.top,bottom:M.top+p.clientHeight*O}}let C=0,P=0;if(s=="nearest")e.top<x.top?(P=e.top-(x.top+a),t>0&&e.bottom>x.bottom+P&&(P=e.bottom-x.bottom+a)):e.bottom>x.bottom&&(P=e.bottom-x.bottom+a,t<0&&e.top-P<x.top&&(P=e.top-(x.top+a)));else{let M=e.bottom-e.top,L=x.bottom-x.top;P=(s=="center"&&M<=L?e.top+M/2-L/2:s=="start"||s=="center"&&t<0?e.top-a:e.bottom-L+a)-x.top}if(r=="nearest"?e.left<x.left?(C=e.left-(x.left+l),t>0&&e.right>x.right+C&&(C=e.right-x.right+l)):e.right>x.right&&(C=e.right-x.right+l,t<0&&e.left<x.left+C&&(C=e.left-(x.left+l))):C=(r=="center"?e.left+(e.right-e.left)/2-(x.right-x.left)/2:r=="start"==c?e.left-l:e.right-(x.right-x.left)+l)-x.left,C||P)if(k)d.scrollBy(C,P);else{let M=0,L=0;if(P){let B=p.scrollTop;p.scrollTop+=P/O,L=(p.scrollTop-B)*O}if(C){let B=p.scrollLeft;p.scrollLeft+=C/b,M=(p.scrollLeft-B)*b}e={left:e.left-M,top:e.top-L,right:e.right-M,bottom:e.bottom-L},M&&Math.abs(M-C)<1&&(r="nearest"),L&&Math.abs(L-P)<1&&(s="nearest")}if(k)break;(e.top<x.top||e.bottom>x.bottom||e.left<x.left||e.right>x.right)&&(e={left:Math.max(e.left,x.left),right:Math.min(e.right,x.right),top:Math.max(e.top,x.top),bottom:Math.min(e.bottom,x.bottom)}),p=p.assignedSlot||p.parentNode}else if(p.nodeType==11)p=p.host;else break}function yO(n){let e=n.ownerDocument,t,r;for(let s=n.parentNode;s&&!(s==e.body||t&&r);)if(s.nodeType==1)!r&&s.scrollHeight>s.clientHeight&&(r=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:r}}class xO{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?lr(t):0),r,Math.min(e.focusOffset,r?lr(r):0))}set(e,t,r,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=s}}let Ri=null;fe.safari&&fe.safari_version>=26&&(Ri=!1);function Wx(n){if(n.setActive)return n.setActive();if(Ri)return n.focus(Ri);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Ri==null?{get preventScroll(){return Ri={preventScroll:!0},!0}}:void 0),!Ri){Ri=!1;for(let t=0;t<e.length;){let r=e[t++],s=e[t++],l=e[t++];r.scrollTop!=s&&(r.scrollTop=s),r.scrollLeft!=l&&(r.scrollLeft=l)}}}let f0;function zi(n,e,t=e){let r=f0||(f0=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function vs(n,e,t,r){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=r);let l=new KeyboardEvent("keydown",s);l.synthetic=!0,n.dispatchEvent(l);let a=new KeyboardEvent("keyup",s);return a.synthetic=!0,n.dispatchEvent(a),l.defaultPrevented||a.defaultPrevented}function vO(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Qx(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function kO(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,lr(t));;)if(r){if(t.nodeType!=1)return!1;let s=t.childNodes[r-1];s.contentEditable=="false"?r--:(t=s,r=lr(t))}else{if(t==n)return!0;r=Bi(t),t=t.parentNode}}function $x(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Ux(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=lr(t)}else if(t.parentNode&&!du(t))r=Bi(t),t=t.parentNode;else return null}}function Xx(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!du(t))r=Bi(t)+1,t=t.parentNode;else return null}}class It{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new It(e.parentNode,Bi(e),t)}static after(e,t){return new It(e.parentNode,Bi(e)+1,t)}}const bd=[];class He{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,s=null,l;for(let a of this.children){if(a.flags&7){if(!a.dom&&(l=s?s.nextSibling:r.firstChild)){let c=He.get(l);(!c||!c.parent&&c.canReuseDOM(a))&&a.reuseDOM(l)}a.sync(e,t),a.flags&=-8}if(l=s?s.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&l!=a.dom&&(t.written=!0),a.dom.parentNode==r)for(;l&&l!=a.dom;)l=d0(l);else r.insertBefore(a.dom,l);s=a.dom}for(l=s?s.nextSibling:r.firstChild,l&&t&&t.node==r&&(t.written=!0);l;)l=d0(l)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let s=lr(e)==0?0:t==0?-1:1;for(;;){let l=e.parentNode;if(l==this.dom)break;s==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?s=-1:s=1),e=l}s<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!He.get(r);)r=r.nextSibling;if(!r)return this.length;for(let s=0,l=0;;s++){let a=this.children[s];if(a.dom==r)return l;l+=a.length+a.breakAfter}}domBoundsAround(e,t,r=0){let s=-1,l=-1,a=-1,c=-1;for(let h=0,d=r,p=r;h<this.children.length;h++){let m=this.children[h],x=d+m.length;if(d<e&&x>t)return m.domBoundsAround(e,t,d);if(x>=e&&s==-1&&(s=h,l=d),d>t&&m.dom.parentNode==this.dom){a=h,c=p;break}p=x,d=x+m.breakAfter}return{from:l,to:c<0?r+this.length:c,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=bd){this.markDirty();for(let s=e;s<t;s++){let l=this.children[s];l.parent==this&&r.indexOf(l)<0&&l.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let s=0;s<r.length;s++)r[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Kx(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,s,l,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}He.prototype.breakAfter=0;function d0(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Kx{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function qx(n,e,t,r,s,l,a,c,h){let{children:d}=n,p=d.length?d[e]:null,m=l.length?l[l.length-1]:null,x=m?m.breakAfter:a;if(!(e==r&&p&&!a&&!x&&l.length<2&&p.merge(t,s,l.length?m:null,t==0,c,h))){if(r<d.length){let k=d[r];k&&(s<k.length||k.breakAfter&&(m!=null&&m.breakAfter))?(e==r&&(k=k.split(s),s=0),!x&&m&&k.merge(0,s,m,!0,0,h)?l[l.length-1]=k:((s||k.children.length&&!k.children[0].length)&&k.merge(0,s,null,!1,0,h),l.push(k))):k!=null&&k.breakAfter&&(m?m.breakAfter=1:a=1),r++}for(p&&(p.breakAfter=a,t>0&&(!a&&l.length&&p.merge(t,p.length,l[0],!1,c,0)?p.breakAfter=l.shift().breakAfter:(t<p.length||p.children.length&&p.children[p.children.length-1].length==0)&&p.merge(t,p.length,null,!1,c,0),e++));e<r&&l.length;)if(d[r-1].become(l[l.length-1]))r--,l.pop(),h=l.length?0:c;else if(d[e].become(l[0]))e++,l.shift(),c=l.length?0:h;else break;!l.length&&e&&r<d.length&&!d[e-1].breakAfter&&d[r].merge(0,0,d[e-1],!1,c,h)&&e--,(e<r||l.length)&&n.replaceChildren(e,r,l)}}function Gx(n,e,t,r,s,l){let a=n.childCursor(),{i:c,off:h}=a.findPos(t,1),{i:d,off:p}=a.findPos(e,-1),m=e-t;for(let x of r)m+=x.length;n.length+=m,qx(n,d,p,c,h,r,0,s,l)}const wO=256;class _n extends He{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof _n)||this.length-(t-e)+r.length>wO||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new _n(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new It(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return bO(this.dom,e,t)}}class Pr extends He{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let s of t)s.setParent(this)}setAttrs(e){if(Qx(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,s,l,a){return r&&(!(r instanceof Pr&&r.mark.eq(this.mark))||e&&l<=0||t<this.length&&a<=0)?!1:(Gx(this,e,t,r?r.children.slice():[],l-1,a-1),this.markDirty(),!0)}split(e){let t=[],r=0,s=-1,l=0;for(let c of this.children){let h=r+c.length;h>e&&t.push(r<e?c.split(e-r):c),s<0&&r>=e&&(s=l),r=h,l++}let a=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new Pr(this.mark,t,a)}domAtPos(e){return Yx(this,e)}coordsAt(e,t){return Zx(this,e,t)}}function bO(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let s=e,l=e,a=0;e==0&&t<0||e==r&&t>=0?fe.chrome||fe.gecko||(e?(s--,a=1):l<r&&(l++,a=-1)):t<0?s--:l<r&&l++;let c=zi(n,s,l).getClientRects();if(!c.length)return null;let h=c[(a?a<0:t>=0)?0:c.length-1];return fe.safari&&!a&&h.width==0&&(h=Array.prototype.find.call(c,d=>d.width)||h),a?Lu(h,a<0):h||null}class ni extends He{static create(e,t,r){return new ni(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=ni.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,s,l,a){return r&&(!(r instanceof ni)||!this.widget.compare(r.widget)||e>0&&l<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof ni&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return De.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,s=this.posAtStart;return r?r.slice(s,s+this.length):De.empty}domAtPos(e){return(this.length?e==0:this.side>0)?It.before(this.dom):It.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let s=this.dom.getClientRects(),l=null;if(!s.length)return null;let a=this.side?this.side<0:e>0;for(let c=a?s.length-1:0;l=s[c],!(e>0?c==0:c==s.length-1||l.top<l.bottom);c+=a?-1:1);return Lu(l,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class Os extends He{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof Os&&e.side==this.side}split(){return new Os(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?It.before(this.dom):It.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return De.empty}get isHidden(){return!0}}_n.prototype.children=ni.prototype.children=Os.prototype.children=bd;function Yx(n,e){let t=n.dom,{children:r}=n,s=0;for(let l=0;s<r.length;s++){let a=r[s],c=l+a.length;if(!(c==l&&a.getSide()<=0)){if(e>l&&e<c&&a.dom.parentNode==t)return a.domAtPos(e-l);if(e<=l)break;l=c}}for(let l=s;l>0;l--){let a=r[l-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let l=s;l<r.length;l++){let a=r[l];if(a.dom.parentNode==t)return a.domAtPos(0)}return new It(t,0)}function Jx(n,e,t){let r,{children:s}=n;t>0&&e instanceof Pr&&s.length&&(r=s[s.length-1])instanceof Pr&&r.mark.eq(e.mark)?Jx(r,e.children[0],t-1):(s.push(e),e.setParent(n)),n.length+=e.length}function Zx(n,e,t){let r=null,s=-1,l=null,a=-1;function c(d,p){for(let m=0,x=0;m<d.children.length&&x<=p;m++){let k=d.children[m],b=x+k.length;b>=p&&(k.children.length?c(k,p-x):(!l||l.isHidden&&(t>0||OO(l,k)))&&(b>p||x==b&&k.getSide()>0)?(l=k,a=p-x):(x<p||x==b&&k.getSide()<0&&!k.isHidden)&&(r=k,s=p-x)),x=b}}c(n,e);let h=(t<0?r:l)||r||l;return h?h.coordsAt(Math.max(0,h==r?s:a),t):SO(n)}function SO(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=Zo(e);return t[t.length-1]||null}function OO(n,e){let t=n.coordsAt(0,1),r=e.coordsAt(0,1);return t&&r&&r.top<t.bottom}function Rf(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const p0=Object.create(null);function pu(n,e,t){if(n==e)return!0;n||(n=p0),e||(e=p0);let r=Object.keys(n),s=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let l of r)if(l!=t&&(s.indexOf(l)==-1||n[l]!==e[l]))return!1;return!0}function Tf(n,e,t){let r=!1;if(e)for(let s in e)t&&s in t||(r=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(r=!0,s=="style"?n.style.cssText=t[s]:n.setAttribute(s,t[s]));return r}function CO(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class cl{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Qt=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Qt||(Qt={}));class nt extends Ss{constructor(e,t,r,s){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=s}get heightRelevant(){return!1}static mark(e){return new hl(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new ui(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,s;if(e.isBlockGap)r=-5e8,s=4e8;else{let{start:l,end:a}=ev(e,t);r=(l?t?-3e8:-1:5e8)-1,s=(a?t?2e8:1:-6e8)+1}return new ui(e,r,s,t,e.widget||null,!0)}static line(e){return new fl(e)}static set(e,t=!1){return Be.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}nt.none=Be.empty;class hl extends nt{constructor(e){let{start:t,end:r}=ev(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof hl&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&pu(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}hl.prototype.point=!1;class fl extends nt{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof fl&&this.spec.class==e.spec.class&&pu(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}fl.prototype.mapMode=fn.TrackBefore;fl.prototype.point=!0;class ui extends nt{constructor(e,t,r,s,l,a){super(t,r,l,e),this.block=s,this.isReplace=a,this.mapMode=s?t<=0?fn.TrackBefore:fn.TrackAfter:fn.TrackDel}get type(){return this.startSide!=this.endSide?Qt.WidgetRange:this.startSide<=0?Qt.WidgetBefore:Qt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof ui&&PO(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}ui.prototype.point=!0;function ev(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function PO(n,e){return n==e||!!(n&&e&&n.compare(e))}function Ya(n,e,t,r=0){let s=t.length-1;s>=0&&t[s]+r>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class ut extends He{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,s,l,a){if(r){if(!(r instanceof ut))return!1;this.dom||r.transferDOM(this)}return s&&this.setDeco(r?r.attrs:null),Gx(this,e,t,r?r.children.slice():[],l,a),!0}split(e){let t=new ut;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:s}=this.childPos(e);s&&(t.append(this.children[r].split(s),0),this.children[r].merge(s,this.children[r].length,null,!1,0,0),r++);for(let l=r;l<this.children.length;l++)t.append(this.children[l],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){pu(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Jx(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=Rf(t,this.attrs||{})),r&&(this.attrs=Rf({class:r},this.attrs||{}))}domAtPos(e){return Yx(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(Qx(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Tf(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&He.get(s)instanceof Pr;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((r=He.get(s))===null||r===void 0?void 0:r.isEditable)==!1&&(!fe.ios||!this.children.some(l=>l instanceof _n))){let l=document.createElement("BR");l.cmIgnore=!0,this.dom.appendChild(l)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof _n)||/[^ -~]/.test(r.text))return null;let s=Zo(r.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=Zx(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:s}=this.parent.view.viewState,l=r.bottom-r.top;if(Math.abs(l-s.lineHeight)<2&&s.textHeight<l){let a=(l-s.textHeight)/2;return{top:r.top+a,bottom:r.bottom-a,left:r.left,right:r.left}}}return r}become(e){return e instanceof ut&&this.children.length==0&&e.children.length==0&&pu(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,s=0;r<e.children.length;r++){let l=e.children[r],a=s+l.length;if(a>=t){if(l instanceof ut)return l;if(a>t)break}s=a+l.breakAfter}return null}}class Cr extends He{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,s,l,a){return r&&(!(r instanceof Cr)||!this.widget.compare(r.widget)||e>0&&l<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?It.before(this.dom):It.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new Cr(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return bd}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):De.empty}domBoundsAround(){return null}become(e){return e instanceof Cr&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof Df?null:Lu(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class Df extends cl{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class _o{constructor(e,t,r,s){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Cr&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new ut),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Ma(new Os(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Cr)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:c,done:h}=this.cursor.next(this.skip);if(this.skip=0,h)throw new Error("Ran out of text content when drawing inline views");if(c){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e),l=Math.min(s,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(Ma(new _n(this.text.slice(this.textOff,this.textOff+l)),t),r),this.atCursorPos=!0,this.textOff+=l,e-=l,r=s<=l?0:t.length}}span(e,t,r,s){this.buildText(t-e,r,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,r,s,l,a){if(this.disallowBlockEffectsFor[a]&&r instanceof ui){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let c=t-e;if(r instanceof ui)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Cr(r.widget||Cs.block,c,r));else{let h=ni.create(r.widget||Cs.inline,c,c?0:r.startSide),d=this.atCursorPos&&!h.isEditable&&l<=s.length&&(e<t||r.startSide>0),p=!h.isEditable&&(e<t||l>s.length||r.startSide<=0),m=this.getLine();this.pendingBuffer==2&&!d&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),d&&(m.append(Ma(new Os(1),s),l),l=s.length+Math.max(0,l-s.length)),m.append(Ma(h,s),l),this.atCursorPos=p,this.pendingBuffer=p?e<t||l>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);c&&(this.textOff+c<=this.text.length?this.textOff+=c:(this.skip+=c-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=l)}static build(e,t,r,s,l){let a=new _o(e,t,r,l);return a.openEnd=Be.spans(s,t,r,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function Ma(n,e){for(let t of e)n=new Pr(t,[n],n.length);return n}class Cs extends cl{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Cs.inline=new Cs("span");Cs.block=new Cs("div");var tt=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(tt||(tt={}));const Fi=tt.LTR,Sd=tt.RTL;function tv(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const NO=tv("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),AO=tv("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),jf=Object.create(null),Zn=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);jf[e]=t,jf[t]=-e}function nv(n){return n<=247?NO[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?AO[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const EO=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ri{get dir(){return this.level%2?Sd:Fi}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,s){let l=-1;for(let a=0;a<e.length;a++){let c=e[a];if(c.from<=t&&c.to>=t){if(c.level==r)return a;(l<0||(s!=0?s<0?c.from<t:c.to>t:e[l].level>c.level))&&(l=a)}}if(l<0)throw new RangeError("Index out of range");return l}}function rv(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],s=e[t];if(r.from!=s.from||r.to!=s.to||r.direction!=s.direction||!rv(r.inner,s.inner))return!1}return!0}const We=[];function MO(n,e,t,r,s){for(let l=0;l<=r.length;l++){let a=l?r[l-1].to:e,c=l<r.length?r[l].from:t,h=l?256:s;for(let d=a,p=h,m=h;d<c;d++){let x=nv(n.charCodeAt(d));x==512?x=p:x==8&&m==4&&(x=16),We[d]=x==4?2:x,x&7&&(m=x),p=x}for(let d=a,p=h,m=h;d<c;d++){let x=We[d];if(x==128)d<c-1&&p==We[d+1]&&p&24?x=We[d]=p:We[d]=256;else if(x==64){let k=d+1;for(;k<c&&We[k]==64;)k++;let b=d&&p==8||k<t&&We[k]==8?m==1?1:8:256;for(let O=d;O<k;O++)We[O]=b;d=k-1}else x==8&&m==1&&(We[d]=1);p=x,x&7&&(m=x)}}}function RO(n,e,t,r,s){let l=s==1?2:1;for(let a=0,c=0,h=0;a<=r.length;a++){let d=a?r[a-1].to:e,p=a<r.length?r[a].from:t;for(let m=d,x,k,b;m<p;m++)if(k=jf[x=n.charCodeAt(m)])if(k<0){for(let O=c-3;O>=0;O-=3)if(Zn[O+1]==-k){let C=Zn[O+2],P=C&2?s:C&4?C&1?l:s:0;P&&(We[m]=We[Zn[O]]=P),c=O;break}}else{if(Zn.length==189)break;Zn[c++]=m,Zn[c++]=x,Zn[c++]=h}else if((b=We[m])==2||b==1){let O=b==s;h=O?0:1;for(let C=c-3;C>=0;C-=3){let P=Zn[C+2];if(P&2)break;if(O)Zn[C+2]|=2;else{if(P&4)break;Zn[C+2]|=4}}}}}function TO(n,e,t,r){for(let s=0,l=r;s<=t.length;s++){let a=s?t[s-1].to:n,c=s<t.length?t[s].from:e;for(let h=a;h<c;){let d=We[h];if(d==256){let p=h+1;for(;;)if(p==c){if(s==t.length)break;p=t[s++].to,c=s<t.length?t[s].from:e}else if(We[p]==256)p++;else break;let m=l==1,x=(p<e?We[p]:r)==1,k=m==x?m?1:2:r;for(let b=p,O=s,C=O?t[O-1].to:n;b>h;)b==C&&(b=t[--O].from,C=O?t[O-1].to:n),We[--b]=k;h=p}else l=d,h++}}}function Lf(n,e,t,r,s,l,a){let c=r%2?2:1;if(r%2==s%2)for(let h=e,d=0;h<t;){let p=!0,m=!1;if(d==l.length||h<l[d].from){let O=We[h];O!=c&&(p=!1,m=O==16)}let x=!p&&c==1?[]:null,k=p?r:r+1,b=h;e:for(;;)if(d<l.length&&b==l[d].from){if(m)break e;let O=l[d];if(!p)for(let C=O.to,P=d+1;;){if(C==t)break e;if(P<l.length&&l[P].from==C)C=l[P++].to;else{if(We[C]==c)break e;break}}if(d++,x)x.push(O);else{O.from>h&&a.push(new ri(h,O.from,k));let C=O.direction==Fi!=!(k%2);If(n,C?r+1:r,s,O.inner,O.from,O.to,a),h=O.to}b=O.to}else{if(b==t||(p?We[b]!=c:We[b]==c))break;b++}x?Lf(n,h,b,r+1,s,x,a):h<b&&a.push(new ri(h,b,k)),h=b}else for(let h=t,d=l.length;h>e;){let p=!0,m=!1;if(!d||h>l[d-1].to){let O=We[h-1];O!=c&&(p=!1,m=O==16)}let x=!p&&c==1?[]:null,k=p?r:r+1,b=h;e:for(;;)if(d&&b==l[d-1].to){if(m)break e;let O=l[--d];if(!p)for(let C=O.from,P=d;;){if(C==e)break e;if(P&&l[P-1].to==C)C=l[--P].from;else{if(We[C-1]==c)break e;break}}if(x)x.push(O);else{O.to<h&&a.push(new ri(O.to,h,k));let C=O.direction==Fi!=!(k%2);If(n,C?r+1:r,s,O.inner,O.from,O.to,a),h=O.from}b=O.from}else{if(b==e||(p?We[b-1]!=c:We[b-1]==c))break;b--}x?Lf(n,b,h,r+1,s,x,a):b<h&&a.push(new ri(b,h,k)),h=b}}function If(n,e,t,r,s,l,a){let c=e%2?2:1;MO(n,s,l,r,c),RO(n,s,l,r,c),TO(s,l,r,c),Lf(n,s,l,e,t,r,a)}function DO(n,e,t){if(!n)return[new ri(0,0,e==Sd?1:0)];if(e==Fi&&!t.length&&!EO.test(n))return iv(n.length);if(t.length)for(;n.length>We.length;)We[We.length]=256;let r=[],s=e==Fi?0:1;return If(n,s,s,t,0,n.length,r),r}function iv(n){return[new ri(0,n,0)]}let sv="";function jO(n,e,t,r,s){var l;let a=r.head-n.from,c=ri.find(e,a,(l=r.bidiLevel)!==null&&l!==void 0?l:-1,r.assoc),h=e[c],d=h.side(s,t);if(a==d){let x=c+=s?1:-1;if(x<0||x>=e.length)return null;h=e[c=x],a=h.side(!s,t),d=h.side(s,t)}let p=Wt(n.text,a,h.forward(s,t));(p<h.from||p>h.to)&&(p=d),sv=n.text.slice(Math.min(a,p),Math.max(a,p));let m=c==(s?e.length-1:0)?null:e[c+(s?1:-1)];return m&&p==d&&m.level+(s?0:1)<h.level?se.cursor(m.side(!s,t)+n.from,m.forward(s,t)?1:-1,m.level):se.cursor(p+n.from,h.forward(s,t)?-1:1,h.level)}function LO(n,e,t){for(let r=e;r<t;r++){let s=nv(n.charCodeAt(r));if(s==1)return Fi;if(s==2||s==4)return Sd}return Fi}const ov=be.define(),lv=be.define(),av=be.define(),uv=be.define(),Bf=be.define(),cv=be.define(),hv=be.define(),Od=be.define(),Cd=be.define(),fv=be.define({combine:n=>n.some(e=>e)}),dv=be.define({combine:n=>n.some(e=>e)}),pv=be.define();class ks{constructor(e,t="nearest",r="nearest",s=5,l=5,a=!1){this.range=e,this.y=t,this.x=r,this.yMargin=s,this.xMargin=l,this.isSnapshot=a}map(e){return e.empty?this:new ks(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ks(se.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ra=pt.define({map:(n,e)=>n.map(e)}),gv=pt.define();function sr(n,e,t){let r=n.facet(uv);r.length?r[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const br=be.define({combine:n=>n.length?n[0]:!0});let IO=0;const fs=be.define({combine(n){return n.filter((e,t)=>{for(let r=0;r<t;r++)if(n[r].plugin==e.plugin)return!1;return!0})}});class Hn{constructor(e,t,r,s,l){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=s,this.baseExtensions=l(this),this.extension=this.baseExtensions.concat(fs.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(fs.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:r,eventObservers:s,provide:l,decorations:a}=t||{};return new Hn(IO++,e,r,s,c=>{let h=[];return a&&h.push(el.of(d=>{let p=d.plugin(c);return p?a(p):nt.none})),l&&h.push(l(c)),h})}static fromClass(e,t){return Hn.define((r,s)=>new e(r,s),t)}}class Fh{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(sr(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){sr(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){sr(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const mv=be.define(),Pd=be.define(),el=be.define(),yv=be.define(),dl=be.define(),xv=be.define();function g0(n,e){let t=n.state.facet(xv);if(!t.length)return t;let r=t.map(l=>l instanceof Function?l(n):l),s=[];return Be.spans(r,e.from,e.to,{point(){},span(l,a,c,h){let d=l-e.from,p=a-e.from,m=s;for(let x=c.length-1;x>=0;x--,h--){let k=c[x].spec.bidiIsolate,b;if(k==null&&(k=LO(e.text,d,p)),h>0&&m.length&&(b=m[m.length-1]).to==d&&b.direction==k)b.to=p,m=b.inner;else{let O={from:d,to:p,direction:k,inner:[]};m.push(O),m=O.inner}}}}),s}const vv=be.define();function kv(n){let e=0,t=0,r=0,s=0;for(let l of n.state.facet(vv)){let a=l(n);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(r=Math.max(r,a.top)),a.bottom!=null&&(s=Math.max(s,a.bottom)))}return{left:e,right:t,top:r,bottom:s}}const Eo=be.define();class wn{constructor(e,t,r,s){this.fromA=e,this.toA=t,this.fromB=r,this.toB=s}join(e){return new wn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>r.toA)){if(s.toA<r.fromA)break;r=r.join(s),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let s=0,l=0,a=0,c=0;;s++){let h=s==e.length?null:e[s],d=a-c,p=h?h.fromB:1e9;for(;l<t.length&&t[l]<p;){let m=t[l],x=t[l+1],k=Math.max(c,m),b=Math.min(p,x);if(k<=b&&new wn(k+d,b+d,k,b).addToSet(r),x>p)break;l+=2}if(!h)return r;new wn(h.fromA,h.toA,h.fromB,h.toB).addToSet(r),a=h.toA,c=h.toB}}}class gu{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=vt.empty(this.startState.doc.length);for(let l of r)this.changes=this.changes.compose(l.changes);let s=[];this.changes.iterChangedRanges((l,a,c,h)=>s.push(new wn(l,a,c,h))),this.changedRanges=s}static create(e,t,r){return new gu(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class m0 extends He{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=nt.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new ut],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new wn(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:d,toA:p})=>p<this.minWidthFrom||d>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!WO(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let l=s>-1?zO(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:d,to:p}=this.hasComposition;r=new wn(d,p,e.changes.mapPos(d,-1),e.changes.mapPos(p,1)).addToSet(r.slice())}this.hasComposition=l?{from:l.range.fromB,to:l.range.toB}:null,(fe.ie||fe.chrome)&&!l&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,c=this.updateDeco(),h=HO(a,c,e.changes);return r=wn.extendWithRanges(r,h),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,l),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=fe.chrome||fe.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||s.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let l=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof Cr&&a.widget instanceof Df&&l.push(a.dom);s.updateGaps(l)}updateChildren(e,t,r){let s=r?r.range.addToSet(e.slice()):e,l=this.childCursor(t);for(let a=s.length-1;;a--){let c=a>=0?s[a]:null;if(!c)break;let{fromA:h,toA:d,fromB:p,toB:m}=c,x,k,b,O;if(r&&r.range.fromB<m&&r.range.toB>p){let B=_o.build(this.view.state.doc,p,r.range.fromB,this.decorations,this.dynamicDecorationMap),R=_o.build(this.view.state.doc,r.range.toB,m,this.decorations,this.dynamicDecorationMap);k=B.breakAtStart,b=B.openStart,O=R.openEnd;let j=this.compositionView(r);R.breakAtStart?j.breakAfter=1:R.content.length&&j.merge(j.length,j.length,R.content[0],!1,R.openStart,0)&&(j.breakAfter=R.content[0].breakAfter,R.content.shift()),B.content.length&&j.merge(0,0,B.content[B.content.length-1],!0,0,B.openEnd)&&B.content.pop(),x=B.content.concat(j).concat(R.content)}else({content:x,breakAtStart:k,openStart:b,openEnd:O}=_o.build(this.view.state.doc,p,m,this.decorations,this.dynamicDecorationMap));let{i:C,off:P}=l.findPos(d,1),{i:M,off:L}=l.findPos(h,-1);qx(this,M,L,C,P,x,k,b,O)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(gv)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new _n(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new Pr(s,[t],t.length);let r=new ut;return r.append(t,0),r}fixCompositionDOM(e){let t=(l,a)=>{a.flags|=8|(a.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(a);let c=He.get(l);c&&c!=a&&(c.dom=null),a.setDOM(l)},r=this.childPos(e.range.fromB,1),s=this.children[r.i];t(e.line,s);for(let l=e.marks.length-1;l>=-1;l--)r=s.childPos(r.off,1),s=s.children[r.i],t(l>=0?e.marks[l].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,s=r==this.dom,l=!s&&!(this.view.state.facet(br)||this.dom.tabIndex>-1)&&Ga(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(s||t||l))return;let a=this.forceSelection;this.forceSelection=!1;let c=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(c.anchor)),d=c.empty?h:this.moveToLine(this.domAtPos(c.head));if(fe.gecko&&c.empty&&!this.hasComposition&&BO(h)){let m=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(m,h.node.childNodes[h.offset]||null)),h=d=new It(m,0),a=!0}let p=this.view.observer.selectionRange;(a||!p.focusNode||(!Fo(h.node,h.offset,p.anchorNode,p.anchorOffset)||!Fo(d.node,d.offset,p.focusNode,p.focusOffset))&&!this.suppressWidgetCursorChange(p,c))&&(this.view.observer.ignore(()=>{fe.android&&fe.chrome&&this.dom.contains(p.focusNode)&&VO(p.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let m=Jo(this.view.root);if(m)if(c.empty){if(fe.gecko){let x=FO(h.node,h.offset);if(x&&x!=3){let k=(x==1?Ux:Xx)(h.node,h.offset);k&&(h=new It(k.node,k.offset))}}m.collapse(h.node,h.offset),c.bidiLevel!=null&&m.caretBidiLevel!==void 0&&(m.caretBidiLevel=c.bidiLevel)}else if(m.extend){m.collapse(h.node,h.offset);try{m.extend(d.node,d.offset)}catch{}}else{let x=document.createRange();c.anchor>c.head&&([h,d]=[d,h]),x.setEnd(d.node,d.offset),x.setStart(h.node,h.offset),m.removeAllRanges(),m.addRange(x)}l&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(h,d)),this.impreciseAnchor=h.precise?null:new It(p.anchorNode,p.anchorOffset),this.impreciseHead=d.precise?null:new It(p.focusNode,p.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Fo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=Jo(e.root),{anchorNode:s,anchorOffset:l}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let a=ut.find(this,t.head);if(!a)return;let c=a.posAtStart;if(t.head==c||t.head==c+a.length)return;let h=this.coordsAt(t.head,-1),d=this.coordsAt(t.head,1);if(!h||!d||h.bottom>d.top)return;let p=this.domAtPos(t.head+t.assoc);r.collapse(p.node,p.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let m=e.observer.selectionRange;e.docView.posFromDOM(m.anchorNode,m.anchorOffset)!=t.from&&r.collapse(s,l)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let s=e.offset;!r&&s<t.childNodes.length;s++){let l=He.get(t.childNodes[s]);l instanceof ut&&(r=l.domAtPos(0))}for(let s=e.offset-1;!r&&s>=0;s--){let l=He.get(t.childNodes[s]);l instanceof ut&&(r=l.domAtPos(l.length))}return r?new It(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=He.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(r<s.length||s instanceof ut)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,s=0;for(let l=this.length,a=this.children.length-1;a>=0;a--){let c=this.children[a],h=l-c.breakAfter,d=h-c.length;if(h<e)break;if(d<=e&&(d<e||c.covers(-1))&&(h>e||c.covers(1))&&(!r||c instanceof ut&&!(r instanceof ut&&t>=0)))r=c,s=d;else if(r&&d==e&&h==e&&c instanceof Cr&&Math.abs(t)<2){if(c.deco.startSide<0)break;a&&(r=null)}l=d}return r?r.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),s=this.children[t];if(!(s instanceof ut))return null;for(;s.children.length;){let{i:c,off:h}=s.childPos(r,1);for(;;c++){if(c==s.children.length)return null;if((s=s.children[c]).length)break}r=h}if(!(s instanceof _n))return null;let l=Wt(s.text,r);if(l==r)return null;let a=zi(s.dom,r,l).getClientRects();for(let c=0;c<a.length;c++){let h=a[c];if(c==a.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:s}=e,l=this.view.contentDOM.clientWidth,a=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,h=this.view.textDirection==tt.LTR;for(let d=0,p=0;p<this.children.length;p++){let m=this.children[p],x=d+m.length;if(x>s)break;if(d>=r){let k=m.dom.getBoundingClientRect();if(t.push(k.height),a){let b=m.dom.lastChild,O=b?Zo(b):[];if(O.length){let C=O[O.length-1],P=h?C.right-k.left:k.right-C.left;P>c&&(c=P,this.minWidth=l,this.minWidthFrom=d,this.minWidthTo=x)}}}d=x+m.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?tt.RTL:tt.LTR}measureTextSize(){for(let l of this.children)if(l instanceof ut){let a=l.measureTextSize();if(a)return a}let e=document.createElement("div"),t,r,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let l=Zo(e.firstChild)[0];t=e.getBoundingClientRect().height,r=l?l.width/27:7,s=l?l.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Kx(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,s=0;;s++){let l=s==t.viewports.length?null:t.viewports[s],a=l?l.from-1:this.length;if(a>r){let c=(t.lineBlockAt(a).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(nt.replace({widget:new Df(c),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!l)break;r=l.to+1}return nt.set(e)}updateDeco(){let e=1,t=this.view.state.facet(el).map(l=>(this.dynamicDecorationMap[e++]=typeof l=="function")?l(this.view):l),r=!1,s=this.view.state.facet(yv).map((l,a)=>{let c=typeof l=="function";return c&&(r=!0),c?l(this.view):l});for(s.length&&(this.dynamicDecorationMap[e++]=r,t.push(Be.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let d=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=d.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let d of this.view.state.facet(pv))try{if(d(this.view,e.range,e))return!0}catch(p){sr(this.view.state,p,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!r)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,s.left),top:Math.min(r.top,s.top),right:Math.max(r.right,s.right),bottom:Math.max(r.bottom,s.bottom)});let l=kv(this.view),a={left:r.left-l.left,top:r.top-l.top,right:r.right+l.right,bottom:r.bottom+l.bottom},{offsetWidth:c,offsetHeight:h}=this.view.scrollDOM;mO(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,c),-c),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==tt.LTR)}lineHasWidget(e){let{i:t}=this.childCursor().findPos(e);if(t==this.children.length)return!1;let r=s=>s instanceof ni||s.children.some(r);return r(this.children[t])}}function BO(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function wv(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=Ux(t.focusNode,t.focusOffset),s=Xx(t.focusNode,t.focusOffset),l=r||s;if(s&&r&&s.node!=r.node){let c=He.get(s.node);if(!c||c instanceof _n&&c.text!=s.node.nodeValue)l=s;else if(n.docView.lastCompositionAfterCursor){let h=He.get(r.node);!h||h instanceof _n&&h.text!=r.node.nodeValue||(l=s)}}if(n.docView.lastCompositionAfterCursor=l!=r,!l)return null;let a=e-l.offset;return{from:a,to:a+l.node.nodeValue.length,node:l.node}}function zO(n,e,t){let r=wv(n,t);if(!r)return null;let{node:s,from:l,to:a}=r,c=s.nodeValue;if(/[\n\r]/.test(c)||n.state.doc.sliceString(r.from,r.to)!=c)return null;let h=e.invertedDesc,d=new wn(h.mapPos(l),h.mapPos(a),l,a),p=[];for(let m=s.parentNode;;m=m.parentNode){let x=He.get(m);if(x instanceof Pr)p.push({node:m,deco:x.mark});else{if(x instanceof ut||m.nodeName=="DIV"&&m.parentNode==n.contentDOM)return{range:d,text:s,marks:p,line:m};if(m!=n.contentDOM)p.push({node:m,deco:new hl({inclusive:!0,attributes:CO(m),tagName:m.tagName.toLowerCase()})});else return null}}}function FO(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let _O=class{constructor(){this.changes=[]}compareRange(e,t){Ya(e,t,this.changes)}comparePoint(e,t){Ya(e,t,this.changes)}boundChange(e){Ya(e,e,this.changes)}};function HO(n,e,t){let r=new _O;return Be.compare(n,e,t,r),r.changes}function VO(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function WO(n,e){let t=!1;return e&&n.iterChangedRanges((r,s)=>{r<e.to&&s>e.from&&(t=!0)}),t}function QO(n,e,t=1){let r=n.charCategorizer(e),s=n.doc.lineAt(e),l=e-s.from;if(s.length==0)return se.cursor(e);l==0?t=1:l==s.length&&(t=-1);let a=l,c=l;t<0?a=Wt(s.text,l,!1):c=Wt(s.text,l);let h=r(s.text.slice(a,c));for(;a>0;){let d=Wt(s.text,a,!1);if(r(s.text.slice(d,a))!=h)break;a=d}for(;c<s.length;){let d=Wt(s.text,c);if(r(s.text.slice(c,d))!=h)break;c=d}return se.range(a+s.from,c+s.from)}function $O(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function UO(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function _h(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function y0(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function x0(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function zf(n,e,t){let r,s,l,a,c=!1,h,d,p,m;for(let b=n.firstChild;b;b=b.nextSibling){let O=Zo(b);for(let C=0;C<O.length;C++){let P=O[C];s&&_h(s,P)&&(P=y0(x0(P,s.bottom),s.top));let M=$O(e,P),L=UO(t,P);if(M==0&&L==0)return b.nodeType==3?v0(b,e,t):zf(b,e,t);(!r||a>L||a==L&&l>M)&&(r=b,s=P,l=M,a=L,c=M?e<P.left?C>0:C<O.length-1:!0),M==0?t>P.bottom&&(!p||p.bottom<P.bottom)?(h=b,p=P):t<P.top&&(!m||m.top>P.top)&&(d=b,m=P):p&&_h(p,P)?p=x0(p,P.bottom):m&&_h(m,P)&&(m=y0(m,P.top))}}if(p&&p.bottom>=t?(r=h,s=p):m&&m.top<=t&&(r=d,s=m),!r)return{node:n,offset:0};let x=Math.max(s.left,Math.min(s.right,e));if(r.nodeType==3)return v0(r,x,t);if(c&&r.contentEditable!="false")return zf(r,x,t);let k=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:k}}function v0(n,e,t){let r=n.nodeValue.length,s=-1,l=1e9,a=0;for(let c=0;c<r;c++){let h=zi(n,c,c+1).getClientRects();for(let d=0;d<h.length;d++){let p=h[d];if(p.top==p.bottom)continue;a||(a=e-p.left);let m=(p.top>t?p.top-t:t-p.bottom)-1;if(p.left-1<=e&&p.right+1>=e&&m<l){let x=e>=(p.left+p.right)/2,k=x;if(fe.chrome||fe.gecko){let b=zi(n,c).getBoundingClientRect();Math.abs(b.left-p.right)<.1&&(k=!x)}if(m<=0)return{node:n,offset:c+(k?1:0)};s=c+(k?1:0),l=m}}}return{node:n,offset:s>-1?s:a>0?n.nodeValue.length:0}}function bv(n,e,t,r=-1){var s,l;let a=n.contentDOM.getBoundingClientRect(),c=a.top+n.viewState.paddingTop,h,{docHeight:d}=n.viewState,{x:p,y:m}=e,x=m-c;if(x<0)return 0;if(x>d)return n.state.doc.length;for(let B=n.viewState.heightOracle.textHeight/2,R=!1;h=n.elementAtHeight(x),h.type!=Qt.Text;)for(;x=r>0?h.bottom+B:h.top-B,!(x>=0&&x<=d);){if(R)return t?null:0;R=!0,r=-r}m=c+x;let k=h.from;if(k<n.viewport.from)return n.viewport.from==0?0:t?null:k0(n,a,h,p,m);if(k>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:k0(n,a,h,p,m);let b=n.dom.ownerDocument,O=n.root.elementFromPoint?n.root:b,C=O.elementFromPoint(p,m);C&&!n.contentDOM.contains(C)&&(C=null),C||(p=Math.max(a.left+1,Math.min(a.right-1,p)),C=O.elementFromPoint(p,m),C&&!n.contentDOM.contains(C)&&(C=null));let P,M=-1;if(C&&((s=n.docView.nearest(C))===null||s===void 0?void 0:s.isEditable)!=!1){if(b.caretPositionFromPoint){let B=b.caretPositionFromPoint(p,m);B&&({offsetNode:P,offset:M}=B)}else if(b.caretRangeFromPoint){let B=b.caretRangeFromPoint(p,m);B&&({startContainer:P,startOffset:M}=B)}P&&(!n.contentDOM.contains(P)||fe.safari&&XO(P,M,p)||fe.chrome&&KO(P,M,p))&&(P=void 0),P&&(M=Math.min(lr(P),M))}if(!P||!n.docView.dom.contains(P)){let B=ut.find(n.docView,k);if(!B)return x>h.top+h.height/2?h.to:h.from;({node:P,offset:M}=zf(B.dom,p,m))}let L=n.docView.nearest(P);if(!L)return null;if(L.isWidget&&((l=L.dom)===null||l===void 0?void 0:l.nodeType)==1){let B=L.dom.getBoundingClientRect();return e.y<B.top||e.y<=B.bottom&&e.x<=(B.left+B.right)/2?L.posAtStart:L.posAtEnd}else return L.localPosFromDOM(P,M)+L.posAtStart}function k0(n,e,t,r,s){let l=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let c=n.viewState.heightOracle.textHeight,h=Math.floor((s-t.top-(n.defaultLineHeight-c)*.5)/c);l+=h*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(t.from,t.to);return t.from+uO(a,l,n.state.tabSize)}function Sv(n,e,t){let r,s=n;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(;;){let l=s.nextSibling;if(l){if(l.nodeName=="BR")break;return!1}else{let a=s.parentNode;if(!a||a.nodeName=="DIV")break;s=a}}return zi(n,r-1,r).getBoundingClientRect().right>t}function XO(n,e,t){return Sv(n,e,t)}function KO(n,e,t){if(e!=0)return Sv(n,e,t);for(let s=n;;){let l=s.parentNode;if(!l||l.nodeType!=1||l.firstChild!=s)return!1;if(l.classList.contains("cm-line"))break;s=l}let r=n.nodeType==1?n.getBoundingClientRect():zi(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function Ff(n,e,t){let r=n.lineBlockAt(e);if(Array.isArray(r.type)){let s;for(let l of r.type){if(l.from>e)break;if(!(l.to<e)){if(l.from<e&&l.to>e)return l;(!s||l.type==Qt.Text&&(s.type!=l.type||(t<0?l.from<e:l.to>e)))&&(s=l)}}return s||r}return r}function qO(n,e,t,r){let s=Ff(n,e.head,e.assoc||-1),l=!r||s.type!=Qt.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(l){let a=n.dom.getBoundingClientRect(),c=n.textDirectionAt(s.from),h=n.posAtCoords({x:t==(c==tt.LTR)?a.right-1:a.left+1,y:(l.top+l.bottom)/2});if(h!=null)return se.cursor(h,t?-1:1)}return se.cursor(t?s.to:s.from,t?-1:1)}function w0(n,e,t,r){let s=n.state.doc.lineAt(e.head),l=n.bidiSpans(s),a=n.textDirectionAt(s.from);for(let c=e,h=null;;){let d=jO(s,l,a,c,t),p=sv;if(!d){if(s.number==(t?n.state.doc.lines:1))return c;p=`
`,s=n.state.doc.line(s.number+(t?1:-1)),l=n.bidiSpans(s),d=n.visualLineSide(s,!t)}if(h){if(!h(p))return c}else{if(!r)return d;h=r(p)}c=d}}function GO(n,e,t){let r=n.state.charCategorizer(e),s=r(t);return l=>{let a=r(l);return s==Sr.Space&&(s=a),s==a}}function YO(n,e,t,r){let s=e.head,l=t?1:-1;if(s==(t?n.state.doc.length:0))return se.cursor(s,e.assoc);let a=e.goalColumn,c,h=n.contentDOM.getBoundingClientRect(),d=n.coordsAtPos(s,e.assoc||-1),p=n.documentTop;if(d)a==null&&(a=d.left-h.left),c=l<0?d.top:d.bottom;else{let k=n.viewState.lineBlockAt(s);a==null&&(a=Math.min(h.right-h.left,n.defaultCharacterWidth*(s-k.from))),c=(l<0?k.top:k.bottom)+p}let m=h.left+a,x=r??n.viewState.heightOracle.textHeight>>1;for(let k=0;;k+=10){let b=c+(x+k)*l,O=bv(n,{x:m,y:b},!1,l);if(b<h.top||b>h.bottom||(l<0?O<s:O>s)){let C=n.docView.coordsForChar(O),P=!C||b<C.top?-1:1;return se.cursor(O,P,void 0,a)}}}function Ho(n,e,t){for(;;){let r=0;for(let s of n)s.between(e-1,e+1,(l,a,c)=>{if(e>l&&e<a){let h=r||t||(e-l<a-e?-1:1);e=h<0?l:a,r=h}});if(!r)return e}}function Ov(n,e){let t=null;for(let r=0;r<e.ranges.length;r++){let s=e.ranges[r],l=null;if(s.empty){let a=Ho(n,s.from,0);a!=s.from&&(l=se.cursor(a,-1))}else{let a=Ho(n,s.from,-1),c=Ho(n,s.to,1);(a!=s.from||c!=s.to)&&(l=se.range(s.from==s.anchor?a:c,s.from==s.head?a:c))}l&&(t||(t=e.ranges.slice()),t[r]=l)}return t?se.create(t,e.mainIndex):e}function Hh(n,e,t){let r=Ho(n.state.facet(dl).map(s=>s(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:se.cursor(r,r<t.from?1:-1)}const Mo="";class JO{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Ie.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Mo}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let s=e;;){this.findPointBefore(r,s);let l=this.text.length;this.readNode(s);let a=s.nextSibling;if(a==t)break;let c=He.get(s),h=He.get(a);(c&&h?c.breakAfter:(c?c.breakAfter:du(s))||du(a)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>l)&&!eC(a,t)&&this.lineBreak(),s=a}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,a=1,c;if(this.lineSeparator?(l=t.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(c=s.exec(t))&&(l=c.index,a=c[0].length),this.append(t.slice(r,l<0?t.length:l)),l<0)break;if(this.lineBreak(),a>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=a-1);r=l+a}}readNode(e){if(e.cmIgnore)return;let t=He.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let s=r.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(ZO(e,r.node,r.offset)?t:0))}}function ZO(n,e,t){for(;;){if(!e||t<lr(e))return!1;if(e==n)return!0;t=Bi(e)+1,e=e.parentNode}}function eC(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let r=He.get(n);if(!(r!=null&&r.isWidget||n.cmIgnore))return!1;r&&(t||(t=[])).push(r)}if(t)for(let r of t){let s=r.overrideDOMText;if(s!=null&&s.length)return!1}return!0}class b0{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class tC{constructor(e,t,r,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:l,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let c=l||a?[]:rC(e),h=new JO(c,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=iC(c,this.bounds.from)}else{let c=e.observer.selectionRange,h=l&&l.node==c.focusNode&&l.offset==c.focusOffset||!Mf(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),d=a&&a.node==c.anchorNode&&a.offset==c.anchorOffset||!Mf(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset),p=e.viewport;if((fe.ios||fe.chrome)&&e.state.selection.main.empty&&h!=d&&(p.from>0||p.to<e.state.doc.length)){let m=Math.min(h,d),x=Math.max(h,d),k=p.from-m,b=p.to-x;(k==0||k==1||m==0)&&(b==0||b==-1||x==e.state.doc.length)&&(h=0,d=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(se.range(d,h)):this.newSel=se.single(d,h)}}}function Cv(n,e){let t,{newSel:r}=e,s=n.state.selection.main,l=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:c}=e.bounds,h=s.from,d=null;(l===8||fe.android&&e.text.length<c-a)&&(h=s.to,d="end");let p=Pv(n.state.doc.sliceString(a,c,Mo),e.text,h-a,d);p&&(fe.chrome&&l==13&&p.toB==p.from+2&&e.text.slice(p.from,p.toB)==Mo+Mo&&p.toB--,t={from:a+p.from,to:a+p.toA,insert:De.of(e.text.slice(p.from,p.toB).split(Mo))})}else r&&(!n.hasFocus&&n.state.facet(br)||r.main.eq(s))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!s.empty&&r&&r.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:(fe.mac||fe.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=se.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:De.of([t.insert.toString().replace("."," ")])}):t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:n.state.doc.lineAt(s.from).to<s.to&&n.docView.lineHasWidget(s.to)&&n.inputState.insertingTextAt>Date.now()-50?t={from:s.from,to:s.to,insert:n.state.toText(n.inputState.insertingText)}:fe.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=se.single(r.main.anchor-1,r.main.head-1)),t={from:s.from,to:s.to,insert:De.of([" "])}),t)return Nd(n,t,r,l);if(r&&!r.main.eq(s)){let a=!1,c="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),c=n.inputState.lastSelectionOrigin,c=="select.pointer"&&(r=Ov(n.state.facet(dl).map(h=>h(n)),r))),n.dispatch({selection:r,scrollIntoView:a,userEvent:c}),!0}else return!1}function Nd(n,e,t,r=-1){if(fe.ios&&n.inputState.flushIOSKey(e))return!0;let s=n.state.selection.main;if(fe.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&n.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&vs(n.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&vs(n.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&vs(n.contentDOM,"Delete",46)))return!0;let l=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let a,c=()=>a||(a=nC(n,e,t));return n.state.facet(cv).some(h=>h(n,e.from,e.to,l,c))||n.dispatch(c()),!0}function nC(n,e,t){let r,s=n.state,l=s.selection.main,a=-1;if(e.from==e.to&&e.from<l.from||e.from>l.to){let h=e.from<l.from?-1:1,d=h<0?l.from:l.to,p=Ho(s.facet(dl).map(m=>m(n)),d,h);e.from==p&&(a=p)}if(a>-1)r={changes:e,selection:se.cursor(e.from+e.insert.length,-1)};else if(e.from>=l.from&&e.to<=l.to&&e.to-e.from>=(l.to-l.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let h=l.from<e.from?s.sliceDoc(l.from,e.from):"",d=l.to>e.to?s.sliceDoc(e.to,l.to):"";r=s.replaceSelection(n.state.toText(h+e.insert.sliceString(0,void 0,n.state.lineBreak)+d))}else{let h=s.changes(e),d=t&&t.main.to<=h.newLength?t.main:void 0;if(s.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&e.to<=l.to+10&&e.to>=l.to-10){let p=n.state.sliceDoc(e.from,e.to),m,x=t&&wv(n,t.main.head);if(x){let b=e.insert.length-(e.to-e.from);m={from:x.from,to:x.to-b}}else m=n.state.doc.lineAt(l.head);let k=l.to-e.to;r=s.changeByRange(b=>{if(b.from==l.from&&b.to==l.to)return{changes:h,range:d||b.map(h)};let O=b.to-k,C=O-p.length;if(n.state.sliceDoc(C,O)!=p||O>=m.from&&C<=m.to)return{range:b};let P=s.changes({from:C,to:O,insert:e.insert}),M=b.to-l.to;return{changes:P,range:d?se.range(Math.max(0,d.anchor+M),Math.max(0,d.head+M)):b.map(P)}})}else r={changes:h,selection:d&&s.selection.replaceRange(d)}}let c="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,c+=".compose",n.inputState.compositionFirstChange&&(c+=".start",n.inputState.compositionFirstChange=!1)),s.update(r,{userEvent:c,scrollIntoView:!0})}function Pv(n,e,t,r){let s=Math.min(n.length,e.length),l=0;for(;l<s&&n.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==s&&n.length==e.length)return null;let a=n.length,c=e.length;for(;a>0&&c>0&&n.charCodeAt(a-1)==e.charCodeAt(c-1);)a--,c--;if(r=="end"){let h=Math.max(0,l-Math.min(a,c));t-=a+h-l}if(a<l&&n.length<e.length){let h=t<=l&&t>=a?l-t:0;l-=h,c=l+(c-a),a=l}else if(c<l){let h=t<=l&&t>=c?l-t:0;l-=h,a=l+(a-c),c=l}return{from:l,toA:a,toB:c}}function rC(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:l}=n.observer.selectionRange;return t&&(e.push(new b0(t,r)),(s!=t||l!=r)&&e.push(new b0(s,l))),e}function iC(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?se.single(t+e,r+e):null}class sC{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,fe.safari&&e.contentDOM.addEventListener("input",()=>null),fe.gecko&&wC(e.contentDOM.ownerDocument)}handleEvent(e){!dC(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let s of r.observers)s(this.view,t);for(let s of r.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=oC(e),r=this.handlers,s=this.view.contentDOM;for(let l in t)if(l!="scroll"){let a=!t[l].handlers.length,c=r[l];c&&a!=!c.handlers.length&&(s.removeEventListener(l,this.handleEvent),c=null),c||s.addEventListener(l,this.handleEvent,{passive:a})}for(let l in r)l!="scroll"&&!t[l]&&s.removeEventListener(l,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&Av.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),fe.android&&fe.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return fe.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=Nv.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||lC.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,vs(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:fe.safari&&!fe.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function S0(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(s){sr(t.state,s)}}}function oC(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let s=r.spec,l=s&&s.plugin.domEventHandlers,a=s&&s.plugin.domEventObservers;if(l)for(let c in l){let h=l[c];h&&t(c).handlers.push(S0(r.value,h))}if(a)for(let c in a){let h=a[c];h&&t(c).observers.push(S0(r.value,h))}}for(let r in Vn)t(r).handlers.push(Vn[r]);for(let r in Sn)t(r).observers.push(Sn[r]);return e}const Nv=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],lC="dthko",Av=[16,17,18,20,91,92,224,225],Ta=6;function Da(n){return Math.max(0,n)*.7+8}function aC(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class uC{constructor(e,t,r,s){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=yO(e.contentDOM),this.atoms=e.state.facet(dl).map(a=>a(e));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Ie.allowMultipleSelections)&&cC(e,t),this.dragging=fC(e,t)&&Rv(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&aC(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,s=0,l=0,a=this.view.win.innerWidth,c=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:l,bottom:c}=this.scrollParents.y.getBoundingClientRect());let h=kv(this.view);e.clientX-h.left<=s+Ta?t=-Da(s-e.clientX):e.clientX+h.right>=a-Ta&&(t=Da(e.clientX-a)),e.clientY-h.top<=l+Ta?r=-Da(l-e.clientY):e.clientY+h.bottom>=c-Ta&&(r=Da(e.clientY-c)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,r=Ov(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function cC(n,e){let t=n.state.facet(ov);return t.length?t[0](e):fe.mac?e.metaKey:e.ctrlKey}function hC(n,e){let t=n.state.facet(lv);return t.length?t[0](e):fe.mac?!e.altKey:!e.ctrlKey}function fC(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=Jo(n.root);if(!r||r.rangeCount==0)return!0;let s=r.getRangeAt(0).getClientRects();for(let l=0;l<s.length;l++){let a=s[l];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function dC(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=He.get(t))&&r.ignoreEvent(e))return!1;return!0}const Vn=Object.create(null),Sn=Object.create(null),Ev=fe.ie&&fe.ie_version<15||fe.ios&&fe.webkit_version<604;function pC(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),Mv(n,t.value)},50)}function Iu(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function Mv(n,e){e=Iu(n.state,Od,e);let{state:t}=n,r,s=1,l=t.toText(e),a=l.lines==t.selection.ranges.length;if(_f!=null&&t.selection.ranges.every(h=>h.empty)&&_f==l.toString()){let h=-1;r=t.changeByRange(d=>{let p=t.doc.lineAt(d.from);if(p.from==h)return{range:d};h=p.from;let m=t.toText((a?l.line(s++).text:e)+t.lineBreak);return{changes:{from:p.from,insert:m},range:se.cursor(d.from+m.length)}})}else a?r=t.changeByRange(h=>{let d=l.line(s++);return{changes:{from:h.from,to:h.to,insert:d.text},range:se.cursor(h.from+d.length)}}):r=t.replaceSelection(l);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Sn.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Vn.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Sn.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Sn.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Vn.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(av))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=yC(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new uC(n,e,t,r)),r&&n.observer.ignore(()=>{Wx(n.contentDOM);let l=n.root.activeElement;l&&!l.contains(n.contentDOM)&&l.blur()});let s=n.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function O0(n,e,t,r){if(r==1)return se.cursor(e,t);if(r==2)return QO(n.state,e,t);{let s=ut.find(n.docView,e),l=n.state.doc.lineAt(s?s.posAtEnd:e),a=s?s.posAtStart:l.from,c=s?s.posAtEnd:l.to;return c<n.state.doc.length&&c==l.to&&c++,se.range(a,c)}}let C0=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function gC(n,e,t,r){let s=ut.find(n.docView,e);if(!s)return 1;let l=e-s.posAtStart;if(l==0)return 1;if(l==s.length)return-1;let a=s.coordsAt(l,-1);if(a&&C0(t,r,a))return-1;let c=s.coordsAt(l,1);return c&&C0(t,r,c)?1:a&&a.bottom>=r?-1:1}function P0(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:gC(n,t,e.clientX,e.clientY)}}const mC=fe.ie&&fe.ie_version<=11;let N0=null,A0=0,E0=0;function Rv(n){if(!mC)return n.detail;let e=N0,t=E0;return N0=n,E0=Date.now(),A0=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(A0+1)%3:1}function yC(n,e){let t=P0(n,e),r=Rv(e),s=n.state.selection;return{update(l){l.docChanged&&(t.pos=l.changes.mapPos(t.pos),s=s.map(l.changes))},get(l,a,c){let h=P0(n,l),d,p=O0(n,h.pos,h.bias,r);if(t.pos!=h.pos&&!a){let m=O0(n,t.pos,t.bias,r),x=Math.min(m.from,p.from),k=Math.max(m.to,p.to);p=x<p.from?se.range(x,k):se.range(k,x)}return a?s.replaceRange(s.main.extend(p.from,p.to)):c&&r==1&&s.ranges.length>1&&(d=xC(s,h.pos))?d:c?s.addRange(p):se.create([p])}}}function xC(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:s}=n.ranges[t];if(r<=e&&s>=e)return se.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Vn.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let s=n.docView.nearest(e.target);if(s&&s.isWidget){let l=s.posAtStart,a=l+s.length;(l>=t.to||a<=t.from)&&(t=se.range(l,a))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Iu(n.state,Cd,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Vn.dragend=n=>(n.inputState.draggedContent=null,!1);function M0(n,e,t,r){if(t=Iu(n.state,Od,t),!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:l}=n.inputState,a=r&&l&&hC(n,e)?{from:l.from,to:l.to}:null,c={from:s,insert:t},h=n.state.changes(a?[a,c]:c);n.focus(),n.dispatch({changes:h,selection:{anchor:h.mapPos(s,-1),head:h.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Vn.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),s=0,l=()=>{++s==t.length&&M0(n,e,r.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let c=new FileReader;c.onerror=l,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(r[a]=c.result),l()},c.readAsText(t[a])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return M0(n,e,r,!0),!0}return!1};Vn.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=Ev?null:e.clipboardData;return t?(Mv(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(pC(n),!1)};function vC(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function kC(n){let e=[],t=[],r=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:l}of n.selection.ranges){let a=n.doc.lineAt(l);a.number>s&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),s=a.number}r=!0}return{text:Iu(n,Cd,e.join(n.lineBreak)),ranges:t,linewise:r}}let _f=null;Vn.copy=Vn.cut=(n,e)=>{let{text:t,ranges:r,linewise:s}=kC(n.state);if(!t&&!s)return!1;_f=s?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let l=Ev?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",t),!0):(vC(n,t),!1)};const Tv=Ls.define();function Dv(n,e){let t=[];for(let r of n.facet(hv)){let s=r(n,e);s&&t.push(s)}return t.length?n.update({effects:t,annotations:Tv.of(!0)}):null}function jv(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=Dv(n.state,e);t?n.dispatch(t):n.update([])}},10)}Sn.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),jv(n)};Sn.blur=n=>{n.observer.clearSelectionRange(),jv(n)};Sn.compositionstart=Sn.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Sn.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,fe.chrome&&fe.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Sn.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Vn.beforeinput=(n,e)=>{var t,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let l=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),a=e.getTargetRanges();if(l&&a.length){let c=a[0],h=n.posAtDOM(c.startContainer,c.startOffset),d=n.posAtDOM(c.endContainer,c.endOffset);return Nd(n,{from:h,to:d,insert:n.state.toText(l)},null),!0}}let s;if(fe.chrome&&fe.android&&(s=Nv.find(l=>l.inputType==e.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let l=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>l+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return fe.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),fe.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Sn.compositionend(n,e),20),!1};const R0=new Set;function wC(n){R0.has(n)||(R0.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const T0=["pre-wrap","normal","pre-line","break-spaces"];let Ps=!1;function D0(){Ps=!1}class bC{constructor(e){this.lineWrapping=e,this.doc=De.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return T0.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let s=e[r];s<0?r++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,r,s,l,a){let c=T0.indexOf(e)>-1,h=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=c;if(this.lineWrapping=c,this.lineHeight=t,this.charWidth=r,this.textHeight=s,this.lineLength=l,h){this.heightSamples={};for(let d=0;d<a.length;d++){let p=a[d];p<0?d++:this.heightSamples[Math.floor(p*10)]=!0}}return h}}class SC{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class ir{constructor(e,t,r,s,l){this.from=e,this.length=t,this.top=r,this.height=s,this._content=l}get type(){return typeof this._content=="number"?Qt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof ui?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new ir(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Xe=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})(Xe||(Xe={}));const Ja=.001;class $t{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ja&&(Ps=!0),this.height=e)}replace(e,t,r){return $t.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,s){let l=this,a=r.doc;for(let c=s.length-1;c>=0;c--){let{fromA:h,toA:d,fromB:p,toB:m}=s[c],x=l.lineAt(h,Xe.ByPosNoHeight,r.setDoc(t),0,0),k=x.to>=d?x:l.lineAt(d,Xe.ByPosNoHeight,r,0,0);for(m+=k.to-d,d=k.to;c>0&&x.from<=s[c-1].toA;)h=s[c-1].fromA,p=s[c-1].fromB,c--,h<x.from&&(x=l.lineAt(h,Xe.ByPosNoHeight,r,0,0));p+=x.from-h,h=x.from;let b=Ad.build(r.setDoc(a),e,p,m);l=mu(l,l.replace(h,d,b))}return l.updateHeight(r,0)}static empty(){return new cn(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,s=0,l=0;for(;;)if(t==r)if(s>l*2){let c=e[t-1];c.break?e.splice(--t,1,c.left,null,c.right):e.splice(--t,1,c.left,c.right),r+=1+c.break,s-=c.size}else if(l>s*2){let c=e[r];c.break?e.splice(r,1,c.left,null,c.right):e.splice(r,1,c.left,c.right),r+=2+c.break,l-=c.size}else break;else if(s<l){let c=e[t++];c&&(s+=c.size)}else{let c=e[--r];c&&(l+=c.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,r++),new OC($t.of(e.slice(0,t)),a,$t.of(e.slice(r)))}}function mu(n,e){return n==e?n:(n.constructor!=e.constructor&&(Ps=!0),e)}$t.prototype.size=1;class Lv extends $t{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,s){return new ir(s,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,s,l){return this.blockAt(0,r,s,l)}forEachLine(e,t,r,s,l,a){e<=l+this.length&&t>=l&&a(this.blockAt(0,r,s,l))}updateHeight(e,t=0,r=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class cn extends Lv{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,s){return new ir(s,this.length,r,this.height,this.breaks)}replace(e,t,r){let s=r[0];return r.length==1&&(s instanceof cn||s instanceof St&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof St?s=new cn(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):$t.of(r)}updateHeight(e,t=0,r=!1,s){return s&&s.from<=t&&s.more?this.setHeight(s.heights[s.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class St extends $t{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,l=s-r+1,a,c=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*l);a=h/l,this.length>l+1&&(c=(this.height-h)/(this.length-l-1))}else a=this.height/l;return{firstLine:r,lastLine:s,perLine:a,perChar:c}}blockAt(e,t,r,s){let{firstLine:l,lastLine:a,perLine:c,perChar:h}=this.heightMetrics(t,s);if(t.lineWrapping){let d=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),p=t.doc.lineAt(d),m=c+p.length*h,x=Math.max(r,e-m/2);return new ir(p.from,p.length,x,m,0)}else{let d=Math.max(0,Math.min(a-l,Math.floor((e-r)/c))),{from:p,length:m}=t.doc.line(l+d);return new ir(p,m,r+c*d,c,0)}}lineAt(e,t,r,s,l){if(t==Xe.ByHeight)return this.blockAt(e,r,s,l);if(t==Xe.ByPosNoHeight){let{from:k,to:b}=r.doc.lineAt(e);return new ir(k,b-k,0,0,0)}let{firstLine:a,perLine:c,perChar:h}=this.heightMetrics(r,l),d=r.doc.lineAt(e),p=c+d.length*h,m=d.number-a,x=s+c*m+h*(d.from-l-m);return new ir(d.from,d.length,Math.max(s,Math.min(x,s+this.height-p)),p,0)}forEachLine(e,t,r,s,l,a){e=Math.max(e,l),t=Math.min(t,l+this.length);let{firstLine:c,perLine:h,perChar:d}=this.heightMetrics(r,l);for(let p=e,m=s;p<=t;){let x=r.doc.lineAt(p);if(p==e){let b=x.number-c;m+=h*b+d*(e-l-b)}let k=h+d*x.length;a(new ir(x.from,x.length,m,k,0)),m+=k,p=x.to+1}}replace(e,t,r){let s=this.length-t;if(s>0){let l=r[r.length-1];l instanceof St?r[r.length-1]=new St(l.length+s):r.push(null,new St(s-1))}if(e>0){let l=r[0];l instanceof St?r[0]=new St(e+l.length):r.unshift(new St(e-1),null)}return $t.of(r)}decomposeLeft(e,t){t.push(new St(e-1),null)}decomposeRight(e,t){t.push(null,new St(this.length-e-1))}updateHeight(e,t=0,r=!1,s){let l=t+this.length;if(s&&s.from<=t+this.length&&s.more){let a=[],c=Math.max(t,s.from),h=-1;for(s.from>t&&a.push(new St(s.from-t-1).updateHeight(e,t));c<=l&&s.more;){let p=e.doc.lineAt(c).length;a.length&&a.push(null);let m=s.heights[s.index++];h==-1?h=m:Math.abs(m-h)>=Ja&&(h=-2);let x=new cn(p,m);x.outdated=!1,a.push(x),c+=p+1}c<=l&&a.push(null,new St(l-c).updateHeight(e,c));let d=$t.of(a);return(h<0||Math.abs(d.height-this.height)>=Ja||Math.abs(h-this.heightMetrics(e,t).perLine)>=Ja)&&(Ps=!0),mu(this,d)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class OC extends $t{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,s){let l=r+this.left.height;return e<l?this.left.blockAt(e,t,r,s):this.right.blockAt(e,t,l,s+this.left.length+this.break)}lineAt(e,t,r,s,l){let a=s+this.left.height,c=l+this.left.length+this.break,h=t==Xe.ByHeight?e<a:e<c,d=h?this.left.lineAt(e,t,r,s,l):this.right.lineAt(e,t,r,a,c);if(this.break||(h?d.to<c:d.from>c))return d;let p=t==Xe.ByPosNoHeight?Xe.ByPosNoHeight:Xe.ByPos;return h?d.join(this.right.lineAt(c,p,r,a,c)):this.left.lineAt(c,p,r,s,l).join(d)}forEachLine(e,t,r,s,l,a){let c=s+this.left.height,h=l+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,t,r,s,l,a),t>=h&&this.right.forEachLine(e,t,r,c,h,a);else{let d=this.lineAt(h,Xe.ByPos,r,s,l);e<d.from&&this.left.forEachLine(e,d.from-1,r,s,l,a),d.to>=e&&d.from<=t&&a(d),t>d.to&&this.right.forEachLine(d.to+1,t,r,c,h,a)}}replace(e,t,r){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,r));let l=[];e>0&&this.decomposeLeft(e,l);let a=l.length;for(let c of r)l.push(c);if(e>0&&j0(l,a-1),t<this.length){let c=l.length;this.decomposeRight(t,l),j0(l,c)}return $t.of(l)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,s=r+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?$t.of(this.break?[e,null,t]:[e,t]):(this.left=mu(this.left,e),this.right=mu(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,s){let{left:l,right:a}=this,c=t+l.length+this.break,h=null;return s&&s.from<=t+l.length&&s.more?h=l=l.updateHeight(e,t,r,s):l.updateHeight(e,t,r),s&&s.from<=c+a.length&&s.more?h=a=a.updateHeight(e,c,r,s):a.updateHeight(e,c,r),h?this.balanced(l,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function j0(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof St&&(r=n[e+1])instanceof St&&n.splice(e-1,3,new St(t.length+1+r.length))}const CC=5;class Ad{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof cn?s.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new cn(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let s=r.widget?r.widget.estimatedHeight:0,l=r.widget?r.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let a=t-e;r.block?this.addBlock(new Lv(a,s,r)):(a||l||s>=CC)&&this.addLineDeco(s,l,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new cn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new St(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof cn)return e;let t=new cn(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let s=this.ensureLine();s.length+=r,s.collapsed+=r,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof cn)&&!this.isCovered?this.nodes.push(new cn(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let s of this.nodes)s instanceof cn&&s.updateHeight(this.oracle,r),r+=s?s.length:1;return this.nodes}static build(e,t,r,s){let l=new Ad(r,e);return Be.spans(t,r,s,l,0),l.finish(r)}}function PC(n,e,t){let r=new NC;return Be.compare(n,e,t,r,0),r.changes}class NC{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,s){(e<t||r&&r.heightRelevant||s&&s.heightRelevant)&&Ya(e,t,this.changes,5)}}function AC(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,s=r.defaultView||window,l=Math.max(0,t.left),a=Math.min(s.innerWidth,t.right),c=Math.max(0,t.top),h=Math.min(s.innerHeight,t.bottom);for(let d=n.parentNode;d&&d!=r.body;)if(d.nodeType==1){let p=d,m=window.getComputedStyle(p);if((p.scrollHeight>p.clientHeight||p.scrollWidth>p.clientWidth)&&m.overflow!="visible"){let x=p.getBoundingClientRect();l=Math.max(l,x.left),a=Math.min(a,x.right),c=Math.max(c,x.top),h=Math.min(d==n.parentNode?s.innerHeight:h,x.bottom)}d=m.position=="absolute"||m.position=="fixed"?p.offsetParent:p.parentNode}else if(d.nodeType==11)d=d.host;else break;return{left:l-t.left,right:Math.max(l,a)-t.left,top:c-(t.top+e),bottom:Math.max(c,h)-(t.top+e)}}function EC(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function MC(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class Vh{constructor(e,t,r,s){this.from=e,this.to=t,this.size=r,this.displaySize=s}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let s=e[r],l=t[r];if(s.from!=l.from||s.to!=l.to||s.size!=l.size)return!1}return!0}draw(e,t){return nt.replace({widget:new RC(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class RC extends cl{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class L0{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=I0,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=tt.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Pd).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new bC(t),this.stateDeco=e.facet(el).filter(r=>typeof r!="function"),this.heightMap=$t.empty().applyChanges(this.stateDeco,De.empty,this.heightOracle.setDoc(e.doc),[new wn(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=nt.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let s=r?t.head:t.anchor;if(!e.some(({from:l,to:a})=>s>=l&&s<=a)){let{from:l,to:a}=this.lineBlockAt(s);e.push(new ja(l,a))}}return this.viewports=e.sort((r,s)=>r.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?I0:new Ed(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Ro(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(el).filter(p=>typeof p!="function");let s=e.changedRanges,l=wn.extendWithRanges(s,PC(r,this.stateDeco,e?e.changes:vt.empty(this.state.doc.length))),a=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);D0(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),(this.heightMap.height!=a||Ps)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let h=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<h.from||t.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t));let d=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(d||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(dv)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),s=this.heightOracle,l=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?tt.RTL:tt.LTR;let a=this.heightOracle.mustRefreshForWrapping(l),c=t.getBoundingClientRect(),h=a||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let d=0,p=0;if(c.width&&c.height){let{scaleX:B,scaleY:R}=Vx(t,c);(B>.005&&Math.abs(this.scaleX-B)>.005||R>.005&&Math.abs(this.scaleY-R)>.005)&&(this.scaleX=B,this.scaleY=R,d|=16,a=h=!0)}let m=(parseInt(r.paddingTop)||0)*this.scaleY,x=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=m||this.paddingBottom!=x)&&(this.paddingTop=m,this.paddingBottom=x,d|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,d|=16);let k=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=k&&(this.scrollAnchorHeight=-1,this.scrollTop=k),this.scrolledToBottom=$x(e.scrollDOM);let b=(this.printing?MC:AC)(t,this.paddingTop),O=b.top-this.pixelViewport.top,C=b.bottom-this.pixelViewport.bottom;this.pixelViewport=b;let P=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(P!=this.inView&&(this.inView=P,P&&(h=!0)),!this.inView&&!this.scrollTarget&&!EC(e.dom))return 0;let M=c.width;if((this.contentDOMWidth!=M||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,d|=16),h){let B=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(B)&&(a=!0),a||s.lineWrapping&&Math.abs(M-this.contentDOMWidth)>s.charWidth){let{lineHeight:R,charWidth:j,textHeight:D}=e.docView.measureTextSize();a=R>0&&s.refresh(l,R,j,D,Math.max(5,M/j),B),a&&(e.docView.minWidth=0,d|=16)}O>0&&C>0?p=Math.max(O,C):O<0&&C<0&&(p=Math.min(O,C)),D0();for(let R of this.viewports){let j=R.from==this.viewport.from?B:e.docView.measureVisibleLineHeights(R);this.heightMap=(a?$t.empty().applyChanges(this.stateDeco,De.empty,this.heightOracle,[new wn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,a,new SC(R.from,j))}Ps&&(d|=2)}let L=!this.viewportIsAppropriate(this.viewport,p)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return L&&(d&2&&(d|=this.updateScaler()),this.viewport=this.getViewport(p,this.scrollTarget),d|=this.updateForViewport()),(d&2||L)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),d|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),d}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,l=this.heightOracle,{visibleTop:a,visibleBottom:c}=this,h=new ja(s.lineAt(a-r*1e3,Xe.ByHeight,l,0,0).from,s.lineAt(c+(1-r)*1e3,Xe.ByHeight,l,0,0).to);if(t){let{head:d}=t.range;if(d<h.from||d>h.to){let p=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),m=s.lineAt(d,Xe.ByPos,l,0,0),x;t.y=="center"?x=(m.top+m.bottom)/2-p/2:t.y=="start"||t.y=="nearest"&&d<h.from?x=m.top:x=m.bottom-p,h=new ja(s.lineAt(x-1e3/2,Xe.ByHeight,l,0,0).from,s.lineAt(x+p+1e3/2,Xe.ByHeight,l,0,0).to)}}return h}mapViewport(e,t){let r=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new ja(this.heightMap.lineAt(r,Xe.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,Xe.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,Xe.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(t,Xe.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:c}=this;return(e==0||s<=a-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||l>=c+Math.max(10,Math.min(r,250)))&&s>a-2*1e3&&l<c+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let s of e)t.touchesRange(s.from,s.to)||r.push(new Vh(t.mapPos(s.from),t.mapPos(s.to),s.size,s.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,s=r?1e4:2e3,l=s>>1,a=s<<1;if(this.defaultTextDirection!=tt.LTR&&!r)return[];let c=[],h=(p,m,x,k)=>{if(m-p<l)return;let b=this.state.selection.main,O=[b.from];b.empty||O.push(b.to);for(let P of O)if(P>p&&P<m){h(p,P-10,x,k),h(P+10,m,x,k);return}let C=DC(e,P=>P.from>=x.from&&P.to<=x.to&&Math.abs(P.from-p)<l&&Math.abs(P.to-m)<l&&!O.some(M=>P.from<M&&P.to>M));if(!C){if(m<x.to&&t&&r&&t.visibleRanges.some(L=>L.from<=m&&L.to>=m)){let L=t.moveToLineBoundary(se.cursor(m),!1,!0).head;L>p&&(m=L)}let P=this.gapSize(x,p,m,k),M=r||P<2e6?P:2e6;C=new Vh(p,m,P,M)}c.push(C)},d=p=>{if(p.length<a||p.type!=Qt.Text)return;let m=TC(p.from,p.to,this.stateDeco);if(m.total<a)return;let x=this.scrollTarget?this.scrollTarget.range.head:null,k,b;if(r){let O=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,C,P;if(x!=null){let M=Ia(m,x),L=((this.visibleBottom-this.visibleTop)/2+O)/p.height;C=M-L,P=M+L}else C=(this.visibleTop-p.top-O)/p.height,P=(this.visibleBottom-p.top+O)/p.height;k=La(m,C),b=La(m,P)}else{let O=m.total*this.heightOracle.charWidth,C=s*this.heightOracle.charWidth,P=0;if(O>2e6)for(let j of e)j.from>=p.from&&j.from<p.to&&j.size!=j.displaySize&&j.from*this.heightOracle.charWidth+P<this.pixelViewport.left&&(P=j.size-j.displaySize);let M=this.pixelViewport.left+P,L=this.pixelViewport.right+P,B,R;if(x!=null){let j=Ia(m,x),D=((L-M)/2+C)/O;B=j-D,R=j+D}else B=(M-C)/O,R=(L+C)/O;k=La(m,B),b=La(m,R)}k>p.from&&h(p.from,k,p,m),b<p.to&&h(b,p.to,p,m)};for(let p of this.viewportLines)Array.isArray(p.type)?p.type.forEach(d):d(p);return c}gapSize(e,t,r,s){let l=Ia(s,r)-Ia(s,t);return this.heightOracle.lineWrapping?e.height*l:s.total*this.heightOracle.charWidth*l}updateLineGaps(e){Vh.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=nt.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];Be.spans(t,this.viewport.from,this.viewport.to,{span(l,a){r.push({from:l,to:a})},point(){}},20);let s=0;if(r.length!=this.visibleRanges.length)s=12;else for(let l=0;l<r.length&&!(s&8);l++){let a=this.visibleRanges[l],c=r[l];(a.from!=c.from||a.to!=c.to)&&(s|=4,e&&e.mapPos(a.from,-1)==c.from&&e.mapPos(a.to,1)==c.to||(s|=8))}return this.visibleRanges=r,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Ro(this.heightMap.lineAt(e,Xe.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Ro(this.heightMap.lineAt(this.scaler.fromDOM(e),Xe.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Ro(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class ja{constructor(e,t){this.from=e,this.to=t}}function TC(n,e,t){let r=[],s=n,l=0;return Be.spans(t,n,e,{span(){},point(a,c){a>s&&(r.push({from:s,to:a}),l+=a-s),s=c}},20),s<e&&(r.push({from:s,to:e}),l+=e-s),{total:l,ranges:r}}function La({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let s=0;;s++){let{from:l,to:a}=e[s],c=a-l;if(r<=c)return l+r;r-=c}}function Ia(n,e){let t=0;for(let{from:r,to:s}of n.ranges){if(e<=s){t+=e-r;break}t+=s-r}return t/n.total}function DC(n,e){for(let t of n)if(e(t))return t}const I0={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class Ed{constructor(e,t,r){let s=0,l=0,a=0;this.viewports=r.map(({from:c,to:h})=>{let d=t.lineAt(c,Xe.ByPos,e,0,0).top,p=t.lineAt(h,Xe.ByPos,e,0,0).bottom;return s+=p-d,{from:c,to:h,top:d,bottom:p,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let c of this.viewports)c.domTop=a+(c.top-l)*this.scale,a=c.domBottom=c.domTop+(c.bottom-c.top),l=c.bottom}toDOM(e){for(let t=0,r=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.top)return s+(e-r)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);r=l.bottom,s=l.domBottom}}fromDOM(e){for(let t=0,r=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.domTop)return r+(e-s)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);r=l.bottom,s=l.domBottom}}eq(e){return e instanceof Ed?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function Ro(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new ir(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(s=>Ro(s,e)):n._content)}const Ba=be.define({combine:n=>n.join(" ")}),Hf=be.define({combine:n=>n.indexOf(!0)>-1}),Vf=li.newName(),Iv=li.newName(),Bv=li.newName(),zv={"&light":"."+Iv,"&dark":"."+Bv};function Wf(n,e,t){return new li(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+r}})}const jC=Wf("."+Vf,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},zv),LC={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Wh=fe.ie&&fe.ie_version<=11;class IC{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new xO,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(fe.ie&&fe.ie_version<=11||fe.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&fe.android&&e.constructor.EDIT_CONTEXT!==!1&&!(fe.chrome&&fe.chrome_version<126)&&(this.editContext=new zC(e),e.state.facet(br)&&(e.contentDOM.editContext=this.editContext.editContext)),Wh&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,s=this.selectionRange;if(r.state.facet(br)?r.root.activeElement!=this.dom:!Ga(this.dom,s))return;let l=s.anchorNode&&r.docView.nearest(s.anchorNode);if(l&&l.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(fe.ie&&fe.ie_version<=11||fe.android&&fe.chrome)&&!r.state.selection.main.empty&&s.focusNode&&Fo(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Jo(e.root);if(!t)return!1;let r=fe.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&BC(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let s=Ga(this.dom,r);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&kO(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,LC),Wh&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Wh&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let s=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=l.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&l.force&&vs(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,s=!1;for(let l of e){let a=this.readMutation(l);a&&(a.typeOver&&(s=!0),t==-1?{from:t,to:r}=a:(t=Math.min(a.from,t),r=Math.max(a.to,r)))}return{from:t,to:r,typeOver:s}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),s=this.selectionChanged&&Ga(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let l=new tC(this.view,e,t,r);return this.view.docView.domChanged={newSel:l.newSel?l.newSel.main:null},l}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,s=Cv(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=B0(t,e.previousSibling||e.target.previousSibling,-1),s=B0(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(br)!=e.state.facet(br)&&(e.view.contentDOM.editContext=e.state.facet(br)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function B0(n,e,t){for(;e;){let r=He.get(e);if(r&&r.parent==n)return r;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function z0(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,l=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return Fo(a.node,a.offset,s,l)&&([t,r,s,l]=[s,l,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:l}}function BC(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return z0(n,s)}let t=null;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?z0(n,t):null}class zC{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let s=e.state.selection.main,{anchor:l,head:a}=s,c=this.toEditorPos(r.updateRangeStart),h=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:c,drifted:!1});let d=h-c>r.text.length;c==this.from&&l<this.from?c=l:h==this.to&&l>this.to&&(h=l);let p=Pv(e.state.sliceDoc(c,h),r.text,(d?s.from:s.to)-c,d?"end":null);if(!p){let x=se.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));x.main.eq(s)||e.dispatch({selection:x,userEvent:"select"});return}let m={from:p.from+c,to:p.toA+c,insert:De.of(r.text.slice(p.from,p.toB).split(`
`))};if((fe.mac||fe.android)&&m.from==a-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(m={from:c,to:h,insert:De.of([r.text.replace("."," ")])}),this.pendingContextChange=m,!e.state.readOnly){let x=this.to-this.from+(m.to-m.from+m.insert.length);Nd(e,m,se.single(this.toEditorPos(r.selectionStart,x),this.toEditorPos(r.selectionEnd,x)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),m.from<m.to&&!m.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(t.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let s=[],l=null;for(let a=this.toEditorPos(r.rangeStart),c=this.toEditorPos(r.rangeEnd);a<c;a++){let h=e.coordsForChar(a);l=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||l||new DOMRect,s.push(l)}t.updateCharacterBounds(r.rangeStart,s)},this.handlers.textformatupdate=r=>{let s=[];for(let l of r.getTextFormats()){let a=l.underlineStyle,c=l.underlineThickness;if(!/none/i.test(a)&&!/none/i.test(c)){let h=this.toEditorPos(l.rangeStart),d=this.toEditorPos(l.rangeEnd);if(h<d){let p=`text-decoration: underline ${/^[a-z]/.test(a)?a+" ":a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${/thin/i.test(c)?1:2}px`;s.push(nt.mark({attributes:{style:p}}).range(h,d))}}}e.dispatch({effects:gv.of(nt.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let s=Jo(r.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,s=this.pendingContextChange;return e.changes.iterChanges((l,a,c,h,d)=>{if(r)return;let p=d.length-(a-l);if(s&&a>=s.to)if(s.from==l&&s.to==a&&s.insert.eq(d)){s=this.pendingContextChange=null,t+=p,this.to+=p;return}else s=null,this.revertPending(e.state);if(l+=t,a+=t,a<=this.from)this.from+=p,this.to+=p;else if(l<this.to){if(l<this.from||a>this.to||this.to-this.from+d.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(l),this.toContextPos(a),d.toString()),this.to+=p}t+=p}),s&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(r,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Pe{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(s=>s.forEach(l=>r(l,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||vO(e.parent)||document,this.viewState=new L0(e.state||Ie.create(e)),e.scrollTo&&e.scrollTo.is(Ra)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(fs).map(s=>new Fh(s));for(let s of this.plugins)s.update(this);this.observer=new IC(this),this.inputState=new sC(this),this.inputState.ensureHandlers(this.plugins),this.docView=new m0(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Bt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,s,l=this.state;for(let x of e){if(x.startState!=l)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");l=x.state}if(this.destroyed){this.viewState.state=l;return}let a=this.hasFocus,c=0,h=null;e.some(x=>x.annotation(Tv))?(this.inputState.notifiedFocused=a,c=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,h=Dv(l,a),h||(c=1));let d=this.observer.delayedAndroidKey,p=null;if(d?(this.observer.clearDelayedAndroidKey(),p=this.observer.readChange(),(p&&!this.state.doc.eq(l.doc)||!this.state.selection.eq(l.selection))&&(p=null)):this.observer.clear(),l.facet(Ie.phrases)!=this.state.facet(Ie.phrases))return this.setState(l);s=gu.create(this,l,e),s.flags|=c;let m=this.viewState.scrollTarget;try{this.updateState=2;for(let x of e){if(m&&(m=m.map(x.changes)),x.scrollIntoView){let{main:k}=x.state.selection;m=new ks(k.empty?k:se.cursor(k.head,k.head>k.anchor?-1:1))}for(let k of x.effects)k.is(Ra)&&(m=k.value.clip(this.state))}this.viewState.update(s,m),this.bidiCache=yu.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(Eo)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(x=>x.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(Ba)!=s.state.facet(Ba)&&(this.viewState.mustMeasureContent=!0),(t||r||m||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let x of this.state.facet(Bf))try{x(s)}catch(k){sr(this.state,k,"update listener")}(h||p)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),p&&!Cv(this,p)&&d.force&&vs(this.contentDOM,d.key,d.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new L0(e),this.plugins=e.facet(fs).map(r=>new Fh(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new m0(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(fs),r=e.state.facet(fs);if(t!=r){let s=[];for(let l of r){let a=t.indexOf(l);if(a<0)s.push(new Fh(l));else{let c=this.plugins[a];c.mustUpdate=e,s.push(c)}}for(let l of this.plugins)l.mustUpdate!=e&&l.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){sr(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,s=r.scrollTop*this.scaleY,{scrollAnchorPos:l,scrollAnchorHeight:a}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(a<0)if($x(r))l=-1,a=this.viewState.heightMap.height;else{let k=this.viewState.scrollAnchorAt(s);l=k.from,a=k.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let d=[];h&4||([this.measureRequests,d]=[d,this.measureRequests]);let p=d.map(k=>{try{return k.read(this)}catch(b){return sr(this.state,b),F0}}),m=gu.create(this,this.state,[]),x=!1;m.flags|=h,t?t.flags|=h:t=m,this.updateState=2,m.empty||(this.updatePlugins(m),this.inputState.update(m),this.updateAttrs(),x=this.docView.update(m),x&&this.docViewUpdate());for(let k=0;k<d.length;k++)if(p[k]!=F0)try{let b=d[k];b.write&&b.write(p[k],this)}catch(b){sr(this.state,b)}if(x&&this.docView.updateSelection(!0),!m.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let b=(l<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(l).top)-a;if(b>1||b<-1){s=s+b,r.scrollTop=s/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let c of this.state.facet(Bf))c(t)}get themeClasses(){return Vf+" "+(this.state.facet(Hf)?Bv:Iv)+" "+this.state.facet(Ba)}updateAttrs(){let e=_0(this,mv,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(br)?"true":"false",class:"cm-content",style:`${fe.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),_0(this,Pd,t);let r=this.observer.ignore(()=>{let s=Tf(this.contentDOM,this.contentAttrs,t),l=Tf(this.dom,this.editorAttrs,e);return s||l});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let s of r.effects)if(s.is(Pe.announce)){t&&(this.announceDOM.textContent=""),t=!1;let l=this.announceDOM.appendChild(document.createElement("div"));l.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Eo);let e=this.state.facet(Pe.cspNonce);li.mount(this.root,this.styleModules.concat(jC).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return Hh(this,e,w0(this,e,t,r))}moveByGroup(e,t){return Hh(this,e,w0(this,e,t,r=>GO(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),s=this.textDirectionAt(e.from),l=r[t?r.length-1:0];return se.cursor(l.side(t,s)+e.from,l.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,r=!0){return qO(this,e,t,r)}moveVertically(e,t,r){return Hh(this,e,YO(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),bv(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let s=this.state.doc.lineAt(e),l=this.bidiSpans(s),a=l[ri.find(l,e-s.from,-1,t)];return Lu(r,a.dir==tt.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(fv)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>FC)return iv(e.length);let t=this.textDirectionAt(e.from),r;for(let l of this.bidiCache)if(l.from==e.from&&l.dir==t&&(l.fresh||rv(l.isolates,r=g0(this,e))))return l.order;r||(r=g0(this,e));let s=DO(e.text,t,r);return this.bidiCache.push(new yu(e.from,e.to,t,r,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||fe.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Wx(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Ra.of(new ks(typeof e=="number"?se.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Ra.of(new ks(se.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Hn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Hn.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=li.newName(),s=[Ba.of(r),Eo.of(Wf(`.${r}`,e))];return t&&t.dark&&s.push(Hf.of(!0)),s}static baseTheme(e){return Tu.lowest(Eo.of(Wf("."+Vf,e,zv)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),s=r&&He.get(r)||He.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}Pe.styleModule=Eo;Pe.inputHandler=cv;Pe.clipboardInputFilter=Od;Pe.clipboardOutputFilter=Cd;Pe.scrollHandler=pv;Pe.focusChangeEffect=hv;Pe.perLineTextDirection=fv;Pe.exceptionSink=uv;Pe.updateListener=Bf;Pe.editable=br;Pe.mouseSelectionStyle=av;Pe.dragMovesSelection=lv;Pe.clickAddsSelectionRange=ov;Pe.decorations=el;Pe.outerDecorations=yv;Pe.atomicRanges=dl;Pe.bidiIsolatedRanges=xv;Pe.scrollMargins=vv;Pe.darkTheme=Hf;Pe.cspNonce=be.define({combine:n=>n.length?n[0]:""});Pe.contentAttributes=Pd;Pe.editorAttributes=mv;Pe.lineWrapping=Pe.contentAttributes.of({class:"cm-lineWrapping"});Pe.announce=pt.define();const FC=4096,F0={};class yu{constructor(e,t,r,s,l,a){this.from=e,this.to=t,this.dir=r,this.isolates=s,this.fresh=l,this.order=a}static update(e,t){if(t.empty&&!e.some(l=>l.fresh))return e;let r=[],s=e.length?e[e.length-1].dir:tt.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let a=e[l];a.dir==s&&!t.touchesRange(a.from,a.to)&&r.push(new yu(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return r}}function _0(n,e,t){for(let r=n.state.facet(e),s=r.length-1;s>=0;s--){let l=r[s],a=typeof l=="function"?l(n):l;a&&Rf(a,t)}return t}const _C=fe.mac?"mac":fe.windows?"win":fe.linux?"linux":"key";function HC(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let s,l,a,c;for(let h=0;h<t.length-1;++h){const d=t[h];if(/^(cmd|meta|m)$/i.test(d))c=!0;else if(/^a(lt)?$/i.test(d))s=!0;else if(/^(c|ctrl|control)$/i.test(d))l=!0;else if(/^s(hift)?$/i.test(d))a=!0;else if(/^mod$/i.test(d))e=="mac"?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+d)}return s&&(r="Alt-"+r),l&&(r="Ctrl-"+r),c&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function za(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const VC=Tu.default(Pe.domEventHandlers({keydown(n,e){return UC(WC(e.state),n,e,"editor")}})),Md=be.define({enables:VC}),H0=new WeakMap;function WC(n){let e=n.facet(Md),t=H0.get(e);return t||H0.set(e,t=$C(e.reduce((r,s)=>r.concat(s),[]))),t}let ei=null;const QC=4e3;function $C(n,e=_C){let t=Object.create(null),r=Object.create(null),s=(a,c)=>{let h=r[a];if(h==null)r[a]=c;else if(h!=c)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},l=(a,c,h,d,p)=>{var m,x;let k=t[a]||(t[a]=Object.create(null)),b=c.split(/ (?!$)/).map(P=>HC(P,e));for(let P=1;P<b.length;P++){let M=b.slice(0,P).join(" ");s(M,!0),k[M]||(k[M]={preventDefault:!0,stopPropagation:!1,run:[L=>{let B=ei={view:L,prefix:M,scope:a};return setTimeout(()=>{ei==B&&(ei=null)},QC),!0}]})}let O=b.join(" ");s(O,!1);let C=k[O]||(k[O]={preventDefault:!1,stopPropagation:!1,run:((x=(m=k._any)===null||m===void 0?void 0:m.run)===null||x===void 0?void 0:x.slice())||[]});h&&C.run.push(h),d&&(C.preventDefault=!0),p&&(C.stopPropagation=!0)};for(let a of n){let c=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let d of c){let p=t[d]||(t[d]=Object.create(null));p._any||(p._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:m}=a;for(let x in p)p[x].run.push(k=>m(k,Qf))}let h=a[e]||a.key;if(h)for(let d of c)l(d,h,a.run,a.preventDefault,a.stopPropagation),a.shift&&l(d,"Shift-"+h,a.shift,a.preventDefault,a.stopPropagation)}return t}let Qf=null;function UC(n,e,t,r){Qf=e;let s=dO(e),l=q2(s,0),a=G2(l)==s.length&&s!=" ",c="",h=!1,d=!1,p=!1;ei&&ei.view==t&&ei.scope==r&&(c=ei.prefix+" ",Av.indexOf(e.keyCode)<0&&(d=!0,ei=null));let m=new Set,x=C=>{if(C){for(let P of C.run)if(!m.has(P)&&(m.add(P),P(t)))return C.stopPropagation&&(p=!0),!0;C.preventDefault&&(C.stopPropagation&&(p=!0),d=!0)}return!1},k=n[r],b,O;return k&&(x(k[c+za(s,e,!a)])?h=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(fe.windows&&e.ctrlKey&&e.altKey)&&!(fe.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(b=ai[e.keyCode])&&b!=s?(x(k[c+za(b,e,!0)])||e.shiftKey&&(O=Yo[e.keyCode])!=s&&O!=b&&x(k[c+za(O,e,!1)]))&&(h=!0):a&&e.shiftKey&&x(k[c+za(s,e,!0)])&&(h=!0),!h&&x(k._any)&&(h=!0)),d&&(h=!0),h&&p&&e.stopPropagation(),Qf=null,h}class pl{constructor(e,t,r,s,l){this.className=e,this.left=t,this.top=r,this.width=s,this.height=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let s=e.coordsAtPos(r.head,r.assoc||1);if(!s)return[];let l=Fv(e);return[new pl(t,s.left-l.left,s.top-l.top,null,s.bottom-s.top)]}else return XC(e,t,r)}}function Fv(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==tt.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function V0(n,e,t,r){let s=n.coordsAtPos(e,t*2);if(!s)return r;let l=n.dom.getBoundingClientRect(),a=(s.top+s.bottom)/2,c=n.posAtCoords({x:l.left+1,y:a}),h=n.posAtCoords({x:l.right-1,y:a});return c==null||h==null?r:{from:Math.max(r.from,Math.min(c,h)),to:Math.min(r.to,Math.max(c,h))}}function XC(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),l=n.textDirection==tt.LTR,a=n.contentDOM,c=a.getBoundingClientRect(),h=Fv(n),d=a.querySelector(".cm-line"),p=d&&window.getComputedStyle(d),m=c.left+(p?parseInt(p.paddingLeft)+Math.min(0,parseInt(p.textIndent)):0),x=c.right-(p?parseInt(p.paddingRight):0),k=Ff(n,r,1),b=Ff(n,s,-1),O=k.type==Qt.Text?k:null,C=b.type==Qt.Text?b:null;if(O&&(n.lineWrapping||k.widgetLineBreaks)&&(O=V0(n,r,1,O)),C&&(n.lineWrapping||b.widgetLineBreaks)&&(C=V0(n,s,-1,C)),O&&C&&O.from==C.from&&O.to==C.to)return M(L(t.from,t.to,O));{let R=O?L(t.from,null,O):B(k,!1),j=C?L(null,t.to,C):B(b,!0),D=[];return(O||k).to<(C||b).from-(O&&C?1:0)||k.widgetLineBreaks>1&&R.bottom+n.defaultLineHeight/2<j.top?D.push(P(m,R.bottom,x,j.top)):R.bottom<j.top&&n.elementAtHeight((R.bottom+j.top)/2).type==Qt.Text&&(R.bottom=j.top=(R.bottom+j.top)/2),M(R).concat(D).concat(M(j))}function P(R,j,D,V){return new pl(e,R-h.left,j-h.top,D-R,V-j)}function M({top:R,bottom:j,horizontal:D}){let V=[];for(let $=0;$<D.length;$+=2)V.push(P(D[$],R,D[$+1],j));return V}function L(R,j,D){let V=1e9,$=-1e9,U=[];function J(he,K,G,oe,W){let re=n.coordsAtPos(he,he==D.to?-2:2),ee=n.coordsAtPos(G,G==D.from?2:-2);!re||!ee||(V=Math.min(re.top,ee.top,V),$=Math.max(re.bottom,ee.bottom,$),W==tt.LTR?U.push(l&&K?m:re.left,l&&oe?x:ee.right):U.push(!l&&oe?m:ee.left,!l&&K?x:re.right))}let Q=R??D.from,Z=j??D.to;for(let he of n.visibleRanges)if(he.to>Q&&he.from<Z)for(let K=Math.max(he.from,Q),G=Math.min(he.to,Z);;){let oe=n.state.doc.lineAt(K);for(let W of n.bidiSpans(oe)){let re=W.from+oe.from,ee=W.to+oe.from;if(re>=G)break;ee>K&&J(Math.max(re,K),R==null&&re<=Q,Math.min(ee,G),j==null&&ee>=Z,W.dir)}if(K=oe.to+1,K>=G)break}return U.length==0&&J(Q,R==null,Z,j==null,n.textDirection),{top:V,bottom:$,horizontal:U}}function B(R,j){let D=c.top+(j?R.top:R.bottom);return{top:D,bottom:D,horizontal:[]}}}function KC(n,e){return n.constructor==e.constructor&&n.eq(e)}class qC{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Za)!=e.state.facet(Za)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(Za);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!KC(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[r].constructor&&s.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e,fe.safari&&fe.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Za=be.define();function _v(n){return[Hn.define(e=>new qC(e,n)),Za.of(n)]}const tl=be.define({combine(n){return zx(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function GC(n={}){return[tl.of(n),YC,JC,ZC,dv.of(!0)]}function Hv(n){return n.startState.facet(tl)!=n.state.facet(tl)}const YC=_v({above:!0,markers(n){let{state:e}=n,t=e.facet(tl),r=[];for(let s of e.selection.ranges){let l=s==e.selection.main;if(s.empty||t.drawRangeCursor){let a=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=s.empty?s:se.cursor(s.head,s.head>s.anchor?-1:1);for(let h of pl.forRange(n,a,c))r.push(h)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Hv(n);return t&&W0(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){W0(e.state,n)},class:"cm-cursorLayer"});function W0(n,e){e.style.animationDuration=n.facet(tl).cursorBlinkRate+"ms"}const JC=_v({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:pl.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Hv(n)},class:"cm-selectionLayer"}),ZC=Tu.highest(Pe.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function eP(){return nP}const tP=nt.line({class:"cm-activeLine"}),nP=Hn.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let s=n.lineBlockAt(r.head);s.from>e&&(t.push(tP.range(s.from)),e=s.from)}return nt.set(t)}},{decorations:n=>n.decorations});class ci extends Ss{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}ci.prototype.elementClass="";ci.prototype.toDOM=void 0;ci.prototype.mapMode=fn.TrackBefore;ci.prototype.startSide=ci.prototype.endSide=-1;ci.prototype.point=!0;const eu=be.define(),rP=be.define(),tu=be.define(),Q0=be.define({combine:n=>n.some(e=>e)});function iP(n){return[sP]}const sP=Hn.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(tu).map(e=>new U0(n,e)),this.fixed=!n.state.facet(Q0);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(Q0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Be.iter(this.view.state.facet(eu),this.view.viewport.from),r=[],s=this.gutters.map(l=>new oP(l,this.view.viewport,-this.view.documentPadding.top));for(let l of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(l.type)){let a=!0;for(let c of l.type)if(c.type==Qt.Text&&a){$f(t,r,c.from);for(let h of s)h.line(this.view,c,r);a=!1}else if(c.widget)for(let h of s)h.widget(this.view,c)}else if(l.type==Qt.Text){$f(t,r,l.from);for(let a of s)a.line(this.view,l,r)}else if(l.widget)for(let a of s)a.widget(this.view,l);for(let l of s)l.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(tu),t=n.state.facet(tu),r=n.docChanged||n.heightChanged||n.viewportChanged||!Be.eq(n.startState.facet(eu),n.state.facet(eu),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(r=!0);else{r=!0;let s=[];for(let l of t){let a=e.indexOf(l);a<0?s.push(new U0(this.view,l)):(this.gutters[a].update(n),s.push(this.gutters[a]))}for(let l of this.gutters)l.dom.remove(),s.indexOf(l)<0&&l.destroy();for(let l of s)l.config.side=="after"?this.getDOMAfter().appendChild(l.dom):this.dom.appendChild(l.dom);this.gutters=s}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Pe.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let r=t.dom.offsetWidth*e.scaleX,s=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==tt.LTR?{left:r,right:s}:{right:r,left:s}})});function $0(n){return Array.isArray(n)?n:[n]}function $f(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class oP{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Be.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:s}=this,l=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==s.elements.length){let c=new Vv(e,a,l,r);s.elements.push(c),s.dom.appendChild(c.dom)}else s.elements[this.i].update(e,a,l,r);this.height=t.bottom,this.i++}line(e,t,r){let s=[];$f(this.cursor,s,t.from),r.length&&(s=s.concat(r));let l=this.gutter.config.lineMarker(e,t,s);l&&s.unshift(l);let a=this.gutter;s.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),s=r?[r]:null;for(let l of e.state.facet(rP)){let a=l(e,t.widget,t);a&&(s||(s=[])).push(a)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class U0{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,s=>{let l=s.target,a;if(l!=this.dom&&this.dom.contains(l)){for(;l.parentNode!=this.dom;)l=l.parentNode;let h=l.getBoundingClientRect();a=(h.top+h.bottom)/2}else a=s.clientY;let c=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[r](e,c,s)&&s.preventDefault()});this.markers=$0(t.markers(e)),t.initialSpacer&&(this.spacer=new Vv(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=$0(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let r=e.view.viewport;return!Be.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Vv{constructor(e,t,r,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,s)}update(e,t,r,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),lP(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let r="cm-gutterElement",s=this.dom.firstChild;for(let l=0,a=0;;){let c=a,h=l<t.length?t[l++]:null,d=!1;if(h){let p=h.elementClass;p&&(r+=" "+p);for(let m=a;m<this.markers.length;m++)if(this.markers[m].compare(h)){c=m,d=!0;break}}else c=this.markers.length;for(;a<c;){let p=this.markers[a++];if(p.toDOM){p.destroy(s);let m=s.nextSibling;s.remove(),s=m}}if(!h)break;h.toDOM&&(d?s=s.nextSibling:this.dom.insertBefore(h.toDOM(e),s)),d&&a++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function lP(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const aP=be.define(),uP=be.define(),ds=be.define({combine(n){return zx(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let s in t){let l=r[s],a=t[s];r[s]=l?(c,h,d)=>l(c,h,d)||a(c,h,d):a}return r}})}});class Qh extends ci{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function $h(n,e){return n.state.facet(ds).formatNumber(e,n.state)}const cP=tu.compute([ds],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(aP)},lineMarker(e,t,r){return r.some(s=>s.toDOM)?null:new Qh($h(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let s of e.state.facet(uP)){let l=s(e,t,r);if(l)return l}return null},lineMarkerChange:e=>e.startState.facet(ds)!=e.state.facet(ds),initialSpacer(e){return new Qh($h(e,X0(e.state.doc.lines)))},updateSpacer(e,t){let r=$h(t.view,X0(t.view.state.doc.lines));return r==e.number?e:new Qh(r)},domEventHandlers:n.facet(ds).domEventHandlers,side:"before"}));function hP(n={}){return[ds.of(n),iP(),cP]}function X0(n){let e=9;for(;e<n;)e=e*10+9;return e}const fP=new class extends ci{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},dP=eu.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let s=n.doc.lineAt(r.head).from;s>t&&(t=s,e.push(fP.range(s)))}return Be.of(e)});function pP(){return dP}const Wv=1024;let gP=0;class Uh{constructor(e,t){this.from=e,this.to=t}}class Ee{constructor(e={}){this.id=gP++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=en.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Ee.closedBy=new Ee({deserialize:n=>n.split(" ")});Ee.openedBy=new Ee({deserialize:n=>n.split(" ")});Ee.group=new Ee({deserialize:n=>n.split(" ")});Ee.isolate=new Ee({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Ee.contextHash=new Ee({perNode:!0});Ee.lookAhead=new Ee({perNode:!0});Ee.mounted=new Ee({perNode:!0});class xu{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Ee.mounted.id]}}const mP=Object.create(null);class en{constructor(e,t,r,s=0){this.name=e,this.props=t,this.id=r,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):mP,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new en(e.name||"",t,e.id,r);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(s)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[l[0].id]=l[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Ee.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let s of r.split(" "))t[s]=e[r];return r=>{for(let s=r.prop(Ee.group),l=-1;l<(s?s.length:0);l++){let a=t[l<0?r.name:s[l]];if(a)return a}}}}en.none=new en("",Object.create(null),0,8);class Rd{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let s=null;for(let l of e){let a=l(r);if(a){s||(s=Object.assign({},r.props));let c=a[1],h=a[0];h.combine&&h.id in s&&(c=h.combine(s[h.id],c)),s[h.id]=c}}t.push(s?new en(r.name,s,r.id,r.flags):r)}return new Rd(t)}}const Fa=new WeakMap,K0=new WeakMap;var kt;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(kt||(kt={}));class ct{constructor(e,t,r,s,l){if(this.type=e,this.children=t,this.positions=r,this.length=s,this.props=null,l&&l.length){this.props=Object.create(null);for(let[a,c]of l)this.props[typeof a=="number"?a:a.id]=c}}toString(){let e=xu.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let s=r.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Xf(this.topNode,e)}cursorAt(e,t=0,r=0){let s=Fa.get(this)||this.topNode,l=new Xf(s);return l.moveTo(e,t),Fa.set(this,l._tree),l}get topNode(){return new bn(this,0,0,null)}resolve(e,t=0){let r=nl(Fa.get(this)||this.topNode,e,t,!1);return Fa.set(this,r),r}resolveInner(e,t=0){let r=nl(K0.get(this)||this.topNode,e,t,!0);return K0.set(this,r),r}resolveStack(e,t=0){return vP(this,e,t)}iterate(e){let{enter:t,leave:r,from:s=0,to:l=this.length}=e,a=e.mode||0,c=(a&kt.IncludeAnonymous)>0;for(let h=this.cursor(a|kt.IncludeAnonymous);;){let d=!1;if(h.from<=l&&h.to>=s&&(!c&&h.type.isAnonymous||t(h)!==!1)){if(h.firstChild())continue;d=!0}for(;d&&r&&(c||!h.type.isAnonymous)&&r(h),!h.nextSibling();){if(!h.parent())return;d=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:jd(en.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,s)=>new ct(this.type,t,r,s,this.propValues),e.makeTree||((t,r,s)=>new ct(en.none,t,r,s)))}static build(e){return kP(e)}}ct.empty=new ct(en.none,[],[],0);class Td{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Td(this.buffer,this.index)}}class hi{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return en.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],s=this.set.types[t],l=s.name;if(/\W/.test(l)&&!s.isError&&(l=JSON.stringify(l)),e+=4,r==e)return l;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return l+"("+a.join(",")+")"}findChild(e,t,r,s,l){let{buffer:a}=this,c=-1;for(let h=e;h!=t&&!(Qv(l,s,a[h+1],a[h+2])&&(c=h,r>0));h=a[h+3]);return c}slice(e,t,r){let s=this.buffer,l=new Uint16Array(t-e),a=0;for(let c=e,h=0;c<t;){l[h++]=s[c++],l[h++]=s[c++]-r;let d=l[h++]=s[c++]-r;l[h++]=s[c++]-e,a=Math.max(a,d)}return new hi(l,a,this.set)}}function Qv(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function nl(n,e,t,r){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!r&&n instanceof bn&&n.index<0?null:n.parent;if(!a)return n;n=a}let l=r?0:kt.IgnoreOverlays;if(r)for(let a=n,c=a.parent;c;a=c,c=a.parent)a instanceof bn&&a.index<0&&((s=c.enter(e,t,l))===null||s===void 0?void 0:s.from)!=a.from&&(n=c);for(;;){let a=n.enter(e,t,l);if(!a)return n;n=a}}class $v{cursor(e=0){return new Xf(this,e)}getChild(e,t=null,r=null){let s=q0(this,e,t,r);return s.length?s[0]:null}getChildren(e,t=null,r=null){return q0(this,e,t,r)}resolve(e,t=0){return nl(this,e,t,!1)}resolveInner(e,t=0){return nl(this,e,t,!0)}matchContext(e){return Uf(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(r=t,t=s.prevSibling):t=s}return r}get node(){return this}get next(){return this.parent}}class bn extends $v{constructor(e,t,r,s){super(),this._tree=e,this.from=t,this.index=r,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,s,l=0){for(let a=this;;){for(let{children:c,positions:h}=a._tree,d=t>0?c.length:-1;e!=d;e+=t){let p=c[e],m=h[e]+a.from;if(Qv(s,r,m,m+p.length)){if(p instanceof hi){if(l&kt.ExcludeBuffers)continue;let x=p.findChild(0,p.buffer.length,t,r-m,s);if(x>-1)return new ii(new yP(a,p,e,m),null,x)}else if(l&kt.IncludeAnonymous||!p.type.isAnonymous||Dd(p)){let x;if(!(l&kt.IgnoreMounts)&&(x=xu.get(p))&&!x.overlay)return new bn(x.tree,m,e,a);let k=new bn(p,m,e,a);return l&kt.IncludeAnonymous||!k.type.isAnonymous?k:k.nextChild(t<0?p.children.length-1:0,t,r,s)}}}if(l&kt.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let s;if(!(r&kt.IgnoreOverlays)&&(s=xu.get(this._tree))&&s.overlay){let l=e-this.from;for(let{from:a,to:c}of s.overlay)if((t>0?a<=l:a<l)&&(t<0?c>=l:c>l))return new bn(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function q0(n,e,t,r){let s=n.cursor(),l=[];if(!s.firstChild())return l;if(t!=null){for(let a=!1;!a;)if(a=s.type.is(t),!s.nextSibling())return l}for(;;){if(r!=null&&s.type.is(r))return l;if(s.type.is(e)&&l.push(s.node),!s.nextSibling())return r==null?l:[]}}function Uf(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class yP{constructor(e,t,r,s){this.parent=e,this.buffer=t,this.index=r,this.start=s}}class ii extends $v{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,r);return l<0?null:new ii(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&kt.ExcludeBuffers)return null;let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return l<0?null:new ii(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ii(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ii(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,s=this.index+4,l=r.buffer[this.index+3];if(l>s){let a=r.buffer[this.index+1];e.push(r.slice(s,l,a)),t.push(0)}return new ct(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Uv(n){if(!n.length)return null;let e=0,t=n[0];for(let l=1;l<n.length;l++){let a=n[l];(a.from>t.from||a.to<t.to)&&(t=a,e=l)}let r=t instanceof bn&&t.index<0?null:t.parent,s=n.slice();return r?s[e]=r:s.splice(e,1),new xP(s,t)}class xP{constructor(e,t){this.heads=e,this.node=t}get next(){return Uv(this.heads)}}function vP(n,e,t){let r=n.resolveInner(e,t),s=null;for(let l=r instanceof bn?r:r.context.parent;l;l=l.parent)if(l.index<0){let a=l.parent;(s||(s=[r])).push(a.resolve(e,t)),l=a}else{let a=xu.get(l.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let c=new bn(a.tree,a.overlay[0].from+l.from,-1,l);(s||(s=[r])).push(nl(c,e,t,!1))}}return s?Uv(s):r}class Xf{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof bn)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=r+s.buffer[e+1],this.to=r+s.buffer[e+2],!0}yield(e){return e?e instanceof bn?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:s}=this.buffer,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,r);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&kt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&kt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&kt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let s=r<0?0:this.stack[r]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(s)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(s.buffer.buffer[l+3]<this.index)return!1;({index:t,parent:r}=s)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let l=t+e,a=e<0?-1:r._tree.children.length;l!=a;l+=e){let c=r._tree.children[l];if(this.mode&kt.IncludeAnonymous||c instanceof hi||!c.type.isAnonymous||Dd(c))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let s=this.index,l=this.stack.length;l>=0;){for(let a=e;a;a=a._parent)if(a.index==s){if(s==this.index)return a;t=a,r=l+1;break e}s=this.stack[--l]}for(let s=r;s<this.stack.length;s++)t=new ii(this.buffer,t,this.stack[s]);return this.bufferNode=new ii(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&t&&t(this),s=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,s=!0}}}matchContext(e){if(!this.buffer)return Uf(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let s=e.length-1,l=this.stack.length-1;s>=0;l--){if(l<0)return Uf(this._tree,e,s);let a=r[t.buffer[this.stack[l]]];if(!a.isAnonymous){if(e[s]&&e[s]!=a.name)return!1;s--}}return!0}}function Dd(n){return n.children.some(e=>e instanceof hi||!e.type.isAnonymous||Dd(e))}function kP(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:s=Wv,reused:l=[],minRepeatType:a=r.types.length}=n,c=Array.isArray(t)?new Td(t,t.length):t,h=r.types,d=0,p=0;function m(R,j,D,V,$,U){let{id:J,start:Q,end:Z,size:he}=c,K=p,G=d;if(he<0)if(c.next(),he==-1){let A=l[J];D.push(A),V.push(Q-R);return}else if(he==-3){d=J;return}else if(he==-4){p=J;return}else throw new RangeError(`Unrecognized record size: ${he}`);let oe=h[J],W,re,ee=Q-R;if(Z-Q<=s&&(re=C(c.pos-j,$))){let A=new Uint16Array(re.size-re.skip),z=c.pos-re.size,ue=A.length;for(;c.pos>z;)ue=P(re.start,A,ue);W=new hi(A,Z-re.start,r),ee=re.start-R}else{let A=c.pos-he;c.next();let z=[],ue=[],pe=J>=a?J:-1,te=0,H=Z;for(;c.pos>A;)pe>=0&&c.id==pe&&c.size>=0?(c.end<=H-s&&(b(z,ue,Q,te,c.end,H,pe,K,G),te=z.length,H=c.end),c.next()):U>2500?x(Q,A,z,ue):m(Q,A,z,ue,pe,U+1);if(pe>=0&&te>0&&te<z.length&&b(z,ue,Q,te,Q,H,pe,K,G),z.reverse(),ue.reverse(),pe>-1&&te>0){let ae=k(oe,G);W=jd(oe,z,ue,0,z.length,0,Z-Q,ae,ae)}else W=O(oe,z,ue,Z-Q,K-Z,G)}D.push(W),V.push(ee)}function x(R,j,D,V){let $=[],U=0,J=-1;for(;c.pos>j;){let{id:Q,start:Z,end:he,size:K}=c;if(K>4)c.next();else{if(J>-1&&Z<J)break;J<0&&(J=he-s),$.push(Q,Z,he),U++,c.next()}}if(U){let Q=new Uint16Array(U*4),Z=$[$.length-2];for(let he=$.length-3,K=0;he>=0;he-=3)Q[K++]=$[he],Q[K++]=$[he+1]-Z,Q[K++]=$[he+2]-Z,Q[K++]=K;D.push(new hi(Q,$[2]-Z,r)),V.push(Z-R)}}function k(R,j){return(D,V,$)=>{let U=0,J=D.length-1,Q,Z;if(J>=0&&(Q=D[J])instanceof ct){if(!J&&Q.type==R&&Q.length==$)return Q;(Z=Q.prop(Ee.lookAhead))&&(U=V[J]+Q.length+Z)}return O(R,D,V,$,U,j)}}function b(R,j,D,V,$,U,J,Q,Z){let he=[],K=[];for(;R.length>V;)he.push(R.pop()),K.push(j.pop()+D-$);R.push(O(r.types[J],he,K,U-$,Q-U,Z)),j.push($-D)}function O(R,j,D,V,$,U,J){if(U){let Q=[Ee.contextHash,U];J=J?[Q].concat(J):[Q]}if($>25){let Q=[Ee.lookAhead,$];J=J?[Q].concat(J):[Q]}return new ct(R,j,D,V,J)}function C(R,j){let D=c.fork(),V=0,$=0,U=0,J=D.end-s,Q={size:0,start:0,skip:0};e:for(let Z=D.pos-R;D.pos>Z;){let he=D.size;if(D.id==j&&he>=0){Q.size=V,Q.start=$,Q.skip=U,U+=4,V+=4,D.next();continue}let K=D.pos-he;if(he<0||K<Z||D.start<J)break;let G=D.id>=a?4:0,oe=D.start;for(D.next();D.pos>K;){if(D.size<0)if(D.size==-3)G+=4;else break e;else D.id>=a&&(G+=4);D.next()}$=oe,V+=he,U+=G}return(j<0||V==R)&&(Q.size=V,Q.start=$,Q.skip=U),Q.size>4?Q:void 0}function P(R,j,D){let{id:V,start:$,end:U,size:J}=c;if(c.next(),J>=0&&V<a){let Q=D;if(J>4){let Z=c.pos-(J-4);for(;c.pos>Z;)D=P(R,j,D)}j[--D]=Q,j[--D]=U-R,j[--D]=$-R,j[--D]=V}else J==-3?d=V:J==-4&&(p=V);return D}let M=[],L=[];for(;c.pos>0;)m(n.start||0,n.bufferStart||0,M,L,-1,0);let B=(e=n.length)!==null&&e!==void 0?e:M.length?L[0]+M[0].length:0;return new ct(h[n.topID],M.reverse(),L.reverse(),B)}const G0=new WeakMap;function nu(n,e){if(!n.isAnonymous||e instanceof hi||e.type!=n)return 1;let t=G0.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof ct)){t=1;break}t+=nu(n,r)}G0.set(e,t)}return t}function jd(n,e,t,r,s,l,a,c,h){let d=0;for(let b=r;b<s;b++)d+=nu(n,e[b]);let p=Math.ceil(d*1.5/8),m=[],x=[];function k(b,O,C,P,M){for(let L=C;L<P;){let B=L,R=O[L],j=nu(n,b[L]);for(L++;L<P;L++){let D=nu(n,b[L]);if(j+D>=p)break;j+=D}if(L==B+1){if(j>p){let D=b[B];k(D.children,D.positions,0,D.children.length,O[B]+M);continue}m.push(b[B])}else{let D=O[L-1]+b[L-1].length-R;m.push(jd(n,b,O,B,L,R,D,null,h))}x.push(R+M-l)}}return k(e,t,r,s,0),(c||h)(m,x,a)}class Ii{constructor(e,t,r,s,l=!1,a=!1){this.from=e,this.to=t,this.tree=r,this.offset=s,this.open=(l?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let s=[new Ii(0,e.length,e,0,!1,r)];for(let l of t)l.to>e.length&&s.push(l);return s}static applyChanges(e,t,r=128){if(!t.length)return e;let s=[],l=1,a=e.length?e[0]:null;for(let c=0,h=0,d=0;;c++){let p=c<t.length?t[c]:null,m=p?p.fromA:1e9;if(m-h>=r)for(;a&&a.from<m;){let x=a;if(h>=x.from||m<=x.to||d){let k=Math.max(x.from,h)-d,b=Math.min(x.to,m)-d;x=k>=b?null:new Ii(k,b,x.tree,x.offset+d,c>0,!!p)}if(x&&s.push(x),a.to>m)break;a=l<e.length?e[l++]:null}if(!p)break;h=p.toA,d=p.toA-p.toB}return s}}let Xv=class{startParse(e,t,r){return typeof e=="string"&&(e=new wP(e)),r=r?r.length?r.map(s=>new Uh(s.from,s.to)):[new Uh(0,0)]:[new Uh(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let s=this.startParse(e,t,r);for(;;){let l=s.advance();if(l)return l}}};class wP{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Ee({perNode:!0});var Y0={};class vu{constructor(e,t,r,s,l,a,c,h,d,p=0,m){this.p=e,this.stack=t,this.state=r,this.reducePos=s,this.pos=l,this.score=a,this.buffer=c,this.bufferBase=h,this.curContext=d,this.lookAhead=p,this.parent=m}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let s=e.parser.context;return new vu(e,[],t,r,r,0,[],0,s?new J0(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,s=e&65535,{parser:l}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let c=l.dynamicPrecedence(s);if(c&&(this.score+=c),r==0){this.pushState(l.getGoto(this.state,s,!0),this.reducePos),s<l.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(s,this.reducePos);return}let h=this.stack.length-(r-1)*3-(e&262144?6:0),d=h?this.stack[h-2]:this.p.ranges[0].from,p=this.reducePos-d;p>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(d==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=p):this.p.lastBigReductionSize<p&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=d,this.p.lastBigReductionSize=p));let m=h?this.stack[h-1]:0,x=this.bufferBase+this.buffer.length-m;if(s<l.minRepeatTerm||e&131072){let k=l.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,d,k,x+4,!0)}if(e&262144)this.state=this.stack[h];else{let k=this.stack[h-3];this.state=l.getGoto(k,s,!0)}for(;this.stack.length>h;)this.stack.pop();this.reduceContext(s,d)}storeNode(e,t,r,s=4,l=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,c=this.buffer.length;if(c==0&&a.parent&&(c=a.bufferBase-a.parent.bufferBase,a=a.parent),c>0&&a.buffer[c-4]==0&&a.buffer[c-1]>-1){if(t==r)return;if(a.buffer[c-2]>=t){a.buffer[c-2]=r;return}}}if(!l||this.pos==r)this.buffer.push(e,t,r,s);else{let a=this.buffer.length;if(a>0&&(this.buffer[a-4]!=0||this.buffer[a-1]<0)){let c=!1;for(let h=a;h>0&&this.buffer[h-2]>r;h-=4)if(this.buffer[h-1]>=0){c=!0;break}if(c)for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4)}this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=r,this.buffer[a+3]=s}}shift(e,t,r,s){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let l=e,{parser:a}=this.p;(s>this.pos||t<=a.maxNode)&&(this.pos=s,a.stateFlag(l,1)||(this.reducePos=s)),this.pushState(l,r),this.shiftContext(t,r),t<=a.maxNode&&this.buffer.push(t,r,s,4)}else this.pos=s,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,s,4)}apply(e,t,r,s){e&65536?this.reduce(e):this.shift(e,t,r,s)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(r,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new vu(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new bP(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if((r&65536)==0)return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let l=0,a;l<t.length;l+=2)(a=t[l+1])!=this.state&&this.p.parser.hasAction(a,e)&&s.push(t[l],a);if(this.stack.length<120)for(let l=0;s.length<8&&l<t.length;l+=2){let a=t[l+1];s.some((c,h)=>h&1&&c==a)||s.push(t[l],a)}t=s}let r=[];for(let s=0;s<t.length&&r.length<4;s+=2){let l=t[s+1];if(l==this.state)continue;let a=this.split();a.pushState(l,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[s],this.pos),a.reducePos=this.pos,a.score-=200,r.push(a)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let r=t>>19,s=t&65535,l=this.stack.length-r*3;if(l<0||e.getGoto(this.stack[l],s,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;t=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(s,l)=>{if(!t.includes(s))return t.push(s),e.allActions(s,a=>{if(!(a&393216))if(a&65536){let c=(a>>19)-l;if(c>1){let h=a&65535,d=this.stack.length-c*3;if(d>=0&&e.getGoto(this.stack[d],h,!1)>=0)return c<<19|65536|h}}else{let c=r(a,l+1);if(c!=null)return c}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new J0(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class J0{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class bP{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class ku{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new ku(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new ku(this.stack,this.pos,this.index)}}function _a(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,s=0;r<n.length;){let l=0;for(;;){let a=n.charCodeAt(r++),c=!1;if(a==126){l=65535;break}a>=92&&a--,a>=34&&a--;let h=a-32;if(h>=46&&(h-=46,c=!0),l+=h,c)break;l*=46}t?t[s++]=l:t=new e(l)}return t}class ru{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const Z0=new ru;class SP{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=Z0,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,s=this.rangeIndex,l=this.pos+e;for(;l<r.from;){if(!s)return null;let a=this.ranges[--s];l-=r.from-a.to,r=a}for(;t<0?l>r.to:l>=r.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];l+=a.from-r.to,r=a}return l}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,s;if(t>=0&&t<this.chunk.length)r=this.pos+e,s=this.chunk.charCodeAt(t);else{let l=this.resolveOffset(e,1);if(l==null)return-1;if(r=l,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let a=this.rangeIndex,c=this.range;for(;c.to<=r;)c=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>c.to&&(this.chunk2=this.chunk2.slice(0,c.to-r)),s=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),s}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=Z0,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(r+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return r}}class ws{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;OP(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}ws.prototype.contextual=ws.prototype.fallback=ws.prototype.extend=!1;ws.prototype.fallback=ws.prototype.extend=!1;class Bu{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function OP(n,e,t,r,s,l){let a=0,c=1<<r,{dialect:h}=t.p.parser;e:for(;(c&n[a])!=0;){let d=n[a+1];for(let k=a+3;k<d;k+=2)if((n[k+1]&c)>0){let b=n[k];if(h.allows(b)&&(e.token.value==-1||e.token.value==b||CP(b,e.token.value,s,l))){e.acceptToken(b);break}}let p=e.next,m=0,x=n[a+2];if(e.next<0&&x>m&&n[d+x*3-3]==65535){a=n[d+x*3-1];continue e}for(;m<x;){let k=m+x>>1,b=d+k+(k<<1),O=n[b],C=n[b+1]||65536;if(p<O)x=k;else if(p>=C)m=k+1;else{a=n[b+2],e.advance();continue e}}break}}function ey(n,e,t){for(let r=e,s;(s=n[r])!=65535;r++)if(s==t)return r-e;return-1}function CP(n,e,t,r){let s=ey(t,r,e);return s<0||ey(t,r,n)<s}const un=typeof process<"u"&&Y0&&/\bparse\b/.test(Y0.LOG);let Xh=null;function ty(n,e,t){let r=n.cursor(kt.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class PP{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?ty(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?ty(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],s=this.index[t];if(s==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let l=r.children[s],a=this.start[t]+r.positions[s];if(a>e)return this.nextStart=a,null;if(l instanceof ct){if(a==e){if(a<this.safeFrom)return null;let c=a+l.length;if(c<=this.safeTo){let h=l.prop(Ee.lookAhead);if(!h||c+h<this.fragment.to)return l}}this.index[t]++,a+l.length>=Math.max(this.safeFrom,e)&&(this.trees.push(l),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+l.length}}}class NP{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new ru)}getActions(e){let t=0,r=null,{parser:s}=e.p,{tokenizers:l}=s,a=s.stateSlot(e.state,3),c=e.curContext?e.curContext.hash:0,h=0;for(let d=0;d<l.length;d++){if((1<<d&a)==0)continue;let p=l[d],m=this.tokens[d];if(!(r&&!p.fallback)&&((p.contextual||m.start!=e.pos||m.mask!=a||m.context!=c)&&(this.updateCachedToken(m,p,e),m.mask=a,m.context=c),m.lookAhead>m.end+25&&(h=Math.max(m.lookAhead,h)),m.value!=0)){let x=t;if(m.extended>-1&&(t=this.addActions(e,m.extended,m.end,t)),t=this.addActions(e,m.value,m.end,t),!p.extend&&(r=m,t>x))break}}for(;this.actions.length>t;)this.actions.pop();return h&&e.setLookAhead(h),!r&&e.pos==this.stream.end&&(r=new ru,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new ru,{pos:r,p:s}=e;return t.start=r,t.end=Math.min(r+1,s.stream.end),t.value=r==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,r){let s=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(s,e),r),e.value>-1){let{parser:l}=r.p;for(let a=0;a<l.specialized.length;a++)if(l.specialized[a]==e.value){let c=l.specializers[a](this.stream.read(e.start,e.end),r);if(c>=0&&r.p.parser.dialect.allows(c>>1)){(c&1)==0?e.value=c>>1:e.extended=c>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,r,s){for(let l=0;l<s;l+=3)if(this.actions[l]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=r,s}addActions(e,t,r,s){let{state:l}=e,{parser:a}=e.p,{data:c}=a;for(let h=0;h<2;h++)for(let d=a.stateSlot(l,h?2:1);;d+=3){if(c[d]==65535)if(c[d+1]==1)d=kr(c,d+2);else{s==0&&c[d+1]==2&&(s=this.putAction(kr(c,d+2),t,r,s));break}c[d]==t&&(s=this.putAction(kr(c,d+1),t,r,s))}return s}}class AP{constructor(e,t,r,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new SP(t,s),this.tokens=new NP(e,this.stream),this.topTerm=e.top[1];let{from:l}=s[0];this.stacks=[vu.start(this,e.top[0],l)],this.fragments=r.length&&this.stream.end-l>e.bufferLength*4?new PP(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],s,l;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let c=e[a];for(;;){if(this.tokens.mainToken=null,c.pos>t)r.push(c);else{if(this.advanceStack(c,r,e))continue;{s||(s=[],l=[]),s.push(c);let h=this.tokens.getMainToken(c);l.push(h.value,h.end)}}break}}if(!r.length){let a=s&&RP(s);if(a)return un&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw un&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let a=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,l,r);if(a)return un&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(r.length>a)for(r.sort((c,h)=>h.score-c.score);r.length>a;)r.pop();r.some(c=>c.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let a=0;a<r.length-1;a++){let c=r[a];for(let h=a+1;h<r.length;h++){let d=r[h];if(c.sameState(d)||c.buffer.length>500&&d.buffer.length>500)if((c.score-d.score||c.buffer.length-d.buffer.length)>0)r.splice(h--,1);else{r.splice(a--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let s=e.pos,{parser:l}=this,a=un?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let d=e.curContext&&e.curContext.tracker.strict,p=d?e.curContext.hash:0;for(let m=this.fragments.nodeAt(s);m;){let x=this.parser.nodeSet.types[m.type.id]==m.type?l.getGoto(e.state,m.type.id):-1;if(x>-1&&m.length&&(!d||(m.prop(Ee.contextHash)||0)==p))return e.useNode(m,x),un&&console.log(a+this.stackID(e)+` (via reuse of ${l.getName(m.type.id)})`),!0;if(!(m instanceof ct)||m.children.length==0||m.positions[0]>0)break;let k=m.children[0];if(k instanceof ct&&m.positions[0]==0)m=k;else break}}let c=l.stateSlot(e.state,4);if(c>0)return e.reduce(c),un&&console.log(a+this.stackID(e)+` (via always-reduce ${l.getName(c&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let d=0;d<h.length;){let p=h[d++],m=h[d++],x=h[d++],k=d==h.length||!r,b=k?e:e.split(),O=this.tokens.mainToken;if(b.apply(p,m,O?O.start:b.pos,x),un&&console.log(a+this.stackID(b)+` (via ${(p&65536)==0?"shift":`reduce of ${l.getName(p&65535)}`} for ${l.getName(m)} @ ${s}${b==e?"":", split"})`),k)return!0;b.pos>s?t.push(b):r.push(b)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return ny(e,t),!0}}runRecovery(e,t,r){let s=null,l=!1;for(let a=0;a<e.length;a++){let c=e[a],h=t[a<<1],d=t[(a<<1)+1],p=un?this.stackID(c)+" -> ":"";if(c.deadEnd&&(l||(l=!0,c.restart(),un&&console.log(p+this.stackID(c)+" (restarted)"),this.advanceFully(c,r))))continue;let m=c.split(),x=p;for(let k=0;k<10&&m.forceReduce()&&(un&&console.log(x+this.stackID(m)+" (via force-reduce)"),!this.advanceFully(m,r));k++)un&&(x=this.stackID(m)+" -> ");for(let k of c.recoverByInsert(h))un&&console.log(p+this.stackID(k)+" (via recover-insert)"),this.advanceFully(k,r);this.stream.end>c.pos?(d==c.pos&&(d++,h=0),c.recoverByDelete(h,d),un&&console.log(p+this.stackID(c)+` (via recover-delete ${this.parser.getName(h)})`),ny(c,r)):(!s||s.score<c.score)&&(s=c)}return s}stackToTree(e){return e.close(),ct.build({buffer:ku.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Xh||(Xh=new WeakMap)).get(e);return t||Xh.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function ny(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class EP{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const Kh=n=>n;class MP{constructor(e){this.start=e.start,this.shift=e.shift||Kh,this.reduce=e.reduce||Kh,this.reuse=e.reuse||Kh,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class wu extends Xv{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let c=0;c<e.repeatNodeCount;c++)t.push("");let r=Object.keys(e.topRules).map(c=>e.topRules[c][1]),s=[];for(let c=0;c<t.length;c++)s.push([]);function l(c,h,d){s[c].push([h,h.deserialize(String(d))])}if(e.nodeProps)for(let c of e.nodeProps){let h=c[0];typeof h=="string"&&(h=Ee[h]);for(let d=1;d<c.length;){let p=c[d++];if(p>=0)l(p,h,c[d++]);else{let m=c[d+-p];for(let x=-p;x>0;x--)l(c[d++],h,m);d++}}}this.nodeSet=new Rd(t.map((c,h)=>en.define({name:h>=this.minRepeatTerm?void 0:c,id:h,props:s[h],top:r.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Wv;let a=_a(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let c=0;c<this.specializerSpecs.length;c++)this.specialized[c]=this.specializerSpecs[c].term;this.specializers=this.specializerSpecs.map(ry),this.states=_a(e.states,Uint32Array),this.data=_a(e.stateData),this.goto=_a(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(c=>typeof c=="number"?new ws(a,c):c),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let s=new AP(this,e,t,r);for(let l of this.wrappers)s=l(s,e,t,r);return s}getGoto(e,t,r=!1){let s=this.goto;if(t>=s[0])return-1;for(let l=s[t+1];;){let a=s[l++],c=a&1,h=s[l++];if(c&&r)return h;for(let d=l+(a>>1);l<d;l++)if(s[l]==e)return h;if(c)return-1}}hasAction(e,t){let r=this.data;for(let s=0;s<2;s++)for(let l=this.stateSlot(e,s?2:1),a;;l+=3){if((a=r[l])==65535)if(r[l+1]==1)a=r[l=kr(r,l+2)];else{if(r[l+1]==2)return kr(r,l+2);break}if(a==t||a==0)return kr(r,l+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t?!0:null)}allActions(e,t){let r=this.stateSlot(e,4),s=r?t(r):void 0;for(let l=this.stateSlot(e,1);s==null;l+=3){if(this.data[l]==65535)if(this.data[l+1]==1)l=kr(this.data,l+2);else break;s=t(kr(this.data,l+1))}return s}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=kr(this.data,r+2);else break;if((this.data[r+2]&1)==0){let s=this.data[r+1];t.some((l,a)=>a&1&&l==s)||t.push(this.data[r],s)}}return t}configure(e){let t=Object.assign(Object.create(wu.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let s=e.tokenizers.find(l=>l.from==r);return s?s.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,s)=>{let l=e.specializers.find(c=>c.from==r.external);if(!l)return r;let a=Object.assign(Object.assign({},r),{external:l.to});return t.specializers[s]=ry(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let l of e.split(" ")){let a=t.indexOf(l);a>=0&&(r[a]=!0)}let s=null;for(let l=0;l<t.length;l++)if(!r[l])for(let a=this.dialects[t[l]],c;(c=this.data[a++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[c]=1;return new EP(e,r,s)}static deserialize(e){return new wu(e)}}function kr(n,e){return n[e]|n[e+1]<<16}function RP(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function ry(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}let TP=0,wr=class Kf{constructor(e,t,r,s){this.name=e,this.set=t,this.base=r,this.modified=s,this.id=TP++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof Kf&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let s=new Kf(r,[],null,[]);if(s.set.push(s),t)for(let l of t.set)s.set.push(l);return s}static defineModifier(e){let t=new bu(e);return r=>r.modified.indexOf(t)>-1?r:bu.get(r.base||r,r.modified.concat(t).sort((s,l)=>s.id-l.id))}},DP=0;class bu{constructor(e){this.name=e,this.instances=[],this.id=DP++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(c=>c.base==e&&jP(t,c.modified));if(r)return r;let s=[],l=new wr(e.name,s,e,t);for(let c of t)c.instances.push(l);let a=LP(t);for(let c of e.set)if(!c.modified.length)for(let h of a)s.push(bu.get(c,h));return l}}function jP(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function LP(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,s=e.length;r<s;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function Kv(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let s of t.split(" "))if(s){let l=[],a=2,c=s;for(let m=0;;){if(c=="..."&&m>0&&m+3==s.length){a=1;break}let x=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!x)throw new RangeError("Invalid path: "+s);if(l.push(x[0]=="*"?"":x[0][0]=='"'?JSON.parse(x[0]):x[0]),m+=x[0].length,m==s.length)break;let k=s[m++];if(m==s.length&&k=="!"){a=0;break}if(k!="/")throw new RangeError("Invalid path: "+s);c=s.slice(m)}let h=l.length-1,d=l[h];if(!d)throw new RangeError("Invalid path: "+s);let p=new rl(r,a,h>0?l.slice(0,h):null);e[d]=p.sort(e[d])}}return qv.add(e)}const qv=new Ee({combine(n,e){let t,r,s;for(;n||e;){if(!n||e&&n.depth>=e.depth?(s=e,e=e.next):(s=n,n=n.next),t&&t.mode==s.mode&&!s.context&&!t.context)continue;let l=new rl(s.tags,s.mode,s.context);t?t.next=l:r=l,t=l}return r}});class rl{constructor(e,t,r,s){this.tags=e,this.mode=t,this.context=r,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}rl.empty=new rl([],2,null);function Gv(n,e){let t=Object.create(null);for(let l of n)if(!Array.isArray(l.tag))t[l.tag.id]=l.class;else for(let a of l.tag)t[a.id]=l.class;let{scope:r,all:s=null}=e||{};return{style:l=>{let a=s;for(let c of l)for(let h of c.set){let d=t[h.id];if(d){a=a?a+" "+d:d;break}}return a},scope:r}}function IP(n,e){let t=null;for(let r of n){let s=r.style(e);s&&(t=t?t+" "+s:s)}return t}function BP(n,e,t,r=0,s=n.length){let l=new zP(r,Array.isArray(e)?e:[e],t);l.highlightRange(n.cursor(),r,s,"",l.highlighters),l.flush(s)}class zP{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,s,l){let{type:a,from:c,to:h}=e;if(c>=r||h<=t)return;a.isTop&&(l=this.highlighters.filter(k=>!k.scope||k.scope(a)));let d=s,p=FP(e)||rl.empty,m=IP(l,p.tags);if(m&&(d&&(d+=" "),d+=m,p.mode==1&&(s+=(s?" ":"")+m)),this.startSpan(Math.max(t,c),d),p.opaque)return;let x=e.tree&&e.tree.prop(Ee.mounted);if(x&&x.overlay){let k=e.node.enter(x.overlay[0].from+c,1),b=this.highlighters.filter(C=>!C.scope||C.scope(x.tree.type)),O=e.firstChild();for(let C=0,P=c;;C++){let M=C<x.overlay.length?x.overlay[C]:null,L=M?M.from+c:h,B=Math.max(t,P),R=Math.min(r,L);if(B<R&&O)for(;e.from<R&&(this.highlightRange(e,B,R,s,l),this.startSpan(Math.min(R,e.to),d),!(e.to>=L||!e.nextSibling())););if(!M||L>r)break;P=M.to+c,P>t&&(this.highlightRange(k.cursor(),Math.max(t,M.from+c),Math.min(r,P),"",b),this.startSpan(Math.min(r,P),d))}O&&e.parent()}else if(e.firstChild()){x&&(s="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,s,l),this.startSpan(Math.min(r,e.to),d)}while(e.nextSibling());e.parent()}}}function FP(n){let e=n.type.prop(qv);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const ce=wr.define,Ha=ce(),Jr=ce(),iy=ce(Jr),sy=ce(Jr),Zr=ce(),Va=ce(Zr),qh=ce(Zr),nr=ce(),Mi=ce(nr),er=ce(),tr=ce(),qf=ce(),Oo=ce(qf),Wa=ce(),X={comment:Ha,lineComment:ce(Ha),blockComment:ce(Ha),docComment:ce(Ha),name:Jr,variableName:ce(Jr),typeName:iy,tagName:ce(iy),propertyName:sy,attributeName:ce(sy),className:ce(Jr),labelName:ce(Jr),namespace:ce(Jr),macroName:ce(Jr),literal:Zr,string:Va,docString:ce(Va),character:ce(Va),attributeValue:ce(Va),number:qh,integer:ce(qh),float:ce(qh),bool:ce(Zr),regexp:ce(Zr),escape:ce(Zr),color:ce(Zr),url:ce(Zr),keyword:er,self:ce(er),null:ce(er),atom:ce(er),unit:ce(er),modifier:ce(er),operatorKeyword:ce(er),controlKeyword:ce(er),definitionKeyword:ce(er),moduleKeyword:ce(er),operator:tr,derefOperator:ce(tr),arithmeticOperator:ce(tr),logicOperator:ce(tr),bitwiseOperator:ce(tr),compareOperator:ce(tr),updateOperator:ce(tr),definitionOperator:ce(tr),typeOperator:ce(tr),controlOperator:ce(tr),punctuation:qf,separator:ce(qf),bracket:Oo,angleBracket:ce(Oo),squareBracket:ce(Oo),paren:ce(Oo),brace:ce(Oo),content:nr,heading:Mi,heading1:ce(Mi),heading2:ce(Mi),heading3:ce(Mi),heading4:ce(Mi),heading5:ce(Mi),heading6:ce(Mi),contentSeparator:ce(nr),list:ce(nr),quote:ce(nr),emphasis:ce(nr),strong:ce(nr),link:ce(nr),monospace:ce(nr),strikethrough:ce(nr),inserted:ce(),deleted:ce(),changed:ce(),invalid:ce(),meta:Wa,documentMeta:ce(Wa),annotation:ce(Wa),processingInstruction:ce(Wa),definition:wr.defineModifier("definition"),constant:wr.defineModifier("constant"),function:wr.defineModifier("function"),standard:wr.defineModifier("standard"),local:wr.defineModifier("local"),special:wr.defineModifier("special")};for(let n in X){let e=X[n];e instanceof wr&&(e.name=n)}Gv([{tag:X.link,class:"tok-link"},{tag:X.heading,class:"tok-heading"},{tag:X.emphasis,class:"tok-emphasis"},{tag:X.strong,class:"tok-strong"},{tag:X.keyword,class:"tok-keyword"},{tag:X.atom,class:"tok-atom"},{tag:X.bool,class:"tok-bool"},{tag:X.url,class:"tok-url"},{tag:X.labelName,class:"tok-labelName"},{tag:X.inserted,class:"tok-inserted"},{tag:X.deleted,class:"tok-deleted"},{tag:X.literal,class:"tok-literal"},{tag:X.string,class:"tok-string"},{tag:X.number,class:"tok-number"},{tag:[X.regexp,X.escape,X.special(X.string)],class:"tok-string2"},{tag:X.variableName,class:"tok-variableName"},{tag:X.local(X.variableName),class:"tok-variableName tok-local"},{tag:X.definition(X.variableName),class:"tok-variableName tok-definition"},{tag:X.special(X.variableName),class:"tok-variableName2"},{tag:X.definition(X.propertyName),class:"tok-propertyName tok-definition"},{tag:X.typeName,class:"tok-typeName"},{tag:X.namespace,class:"tok-namespace"},{tag:X.className,class:"tok-className"},{tag:X.macroName,class:"tok-macroName"},{tag:X.propertyName,class:"tok-propertyName"},{tag:X.operator,class:"tok-operator"},{tag:X.comment,class:"tok-comment"},{tag:X.meta,class:"tok-meta"},{tag:X.invalid,class:"tok-invalid"},{tag:X.punctuation,class:"tok-punctuation"}]);const cs=63,oy=64,_P=1,HP=2,Yv=3,VP=4,Jv=5,WP=6,QP=7,Zv=65,$P=66,UP=8,XP=9,KP=10,qP=11,GP=12,e1=13,YP=19,JP=20,ZP=29,eN=33,tN=34,nN=47,rN=0,Ld=1,Gf=2,il=3,Yf=4;class Di{constructor(e,t,r){this.parent=e,this.depth=t,this.type=r,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+r}}Di.top=new Di(null,-1,rN);function Vo(n,e){for(let t=0,r=e-n.pos-1;;r--,t++){let s=n.peek(r);if(Nr(s)||s==-1)return t}}function Jf(n){return n==32||n==9}function Nr(n){return n==10||n==13}function t1(n){return Jf(n)||Nr(n)}function Li(n){return n<0||t1(n)}const iN=new MP({start:Di.top,reduce(n,e){return n.type==il&&(e==JP||e==tN)?n.parent:n},shift(n,e,t,r){if(e==Yv)return new Di(n,Vo(r,r.pos),Ld);if(e==Zv||e==Jv)return new Di(n,Vo(r,r.pos),Gf);if(e==cs)return n.parent;if(e==YP||e==eN)return new Di(n,0,il);if(e==e1&&n.type==Yf)return n.parent;if(e==nN){let s=/[1-9]/.exec(r.read(r.pos,t.pos));if(s)return new Di(n,n.depth+ +s[0],Yf)}return n},hash(n){return n.hash}});function Ns(n,e,t=0){return n.peek(t)==e&&n.peek(t+1)==e&&n.peek(t+2)==e&&Li(n.peek(t+3))}const sN=new Bu((n,e)=>{if(n.next==-1&&e.canShift(oy))return n.acceptToken(oy);let t=n.peek(-1);if((Nr(t)||t<0)&&e.context.type!=il){if(Ns(n,45))if(e.canShift(cs))n.acceptToken(cs);else return n.acceptToken(_P,3);if(Ns(n,46))if(e.canShift(cs))n.acceptToken(cs);else return n.acceptToken(HP,3);let r=0;for(;n.next==32;)r++,n.advance();(r<e.context.depth||r==e.context.depth&&e.context.type==Ld&&(n.next!=45||!Li(n.peek(1))))&&n.next!=-1&&!Nr(n.next)&&n.next!=35&&n.acceptToken(cs,-r)}},{contextual:!0}),oN=new Bu((n,e)=>{if(e.context.type==il){n.next==63&&(n.advance(),Li(n.next)&&n.acceptToken(QP));return}if(n.next==45)n.advance(),Li(n.next)&&n.acceptToken(e.context.type==Ld&&e.context.depth==Vo(n,n.pos-1)?VP:Yv);else if(n.next==63)n.advance(),Li(n.next)&&n.acceptToken(e.context.type==Gf&&e.context.depth==Vo(n,n.pos-1)?WP:Jv);else{let t=n.pos;for(;;)if(Jf(n.next)){if(n.pos==t)return;n.advance()}else if(n.next==33)n1(n);else if(n.next==38)Zf(n);else if(n.next==42){Zf(n);break}else if(n.next==39||n.next==34){if(Id(n,!0))break;return}else if(n.next==91||n.next==123){if(!aN(n))return;break}else{r1(n,!0,!1,0);break}for(;Jf(n.next);)n.advance();if(n.next==58){if(n.pos==t&&e.canShift(ZP))return;let r=n.peek(1);Li(r)&&n.acceptTokenTo(e.context.type==Gf&&e.context.depth==Vo(n,t)?$P:Zv,t)}}},{contextual:!0});function lN(n){return n>32&&n<127&&n!=34&&n!=37&&n!=44&&n!=60&&n!=62&&n!=92&&n!=94&&n!=96&&n!=123&&n!=124&&n!=125}function ly(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function ay(n,e){return n.next==37?(n.advance(),ly(n.next)&&n.advance(),ly(n.next)&&n.advance(),!0):lN(n.next)||e&&n.next==44?(n.advance(),!0):!1}function n1(n){if(n.advance(),n.next==60){for(n.advance();;)if(!ay(n,!0)){n.next==62&&n.advance();break}}else for(;ay(n,!1););}function Zf(n){for(n.advance();!Li(n.next)&&Su(n.tag)!="f";)n.advance()}function Id(n,e){let t=n.next,r=!1,s=n.pos;for(n.advance();;){let l=n.next;if(l<0)break;if(n.advance(),l==t)if(l==39)if(n.next==39)n.advance();else break;else break;else if(l==92&&t==34)n.next>=0&&n.advance();else if(Nr(l)){if(e)return!1;r=!0}else if(e&&n.pos>=s+1024)return!1}return!r}function aN(n){for(let e=[],t=n.pos+1024;;)if(n.next==91||n.next==123)e.push(n.next),n.advance();else if(n.next==39||n.next==34){if(!Id(n,!0))return!1}else if(n.next==93||n.next==125){if(e[e.length-1]!=n.next-2)return!1;if(e.pop(),n.advance(),!e.length)return!0}else{if(n.next<0||n.pos>t||Nr(n.next))return!1;n.advance()}}const uN="iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif";function Su(n){return n<33?"u":n>125?"s":uN[n-33]}function Gh(n,e){let t=Su(n);return t!="u"&&!(e&&t=="f")}function r1(n,e,t,r){if(Su(n.next)=="s"||(n.next==63||n.next==58||n.next==45)&&Gh(n.peek(1),t))n.advance();else return!1;let s=n.pos;for(;;){let l=n.next,a=0,c=r+1;for(;t1(l);){if(Nr(l)){if(e)return!1;c=0}else c++;l=n.peek(++a)}if(!(l>=0&&(l==58?Gh(n.peek(a+1),t):l==35?n.peek(a-1)!=32:Gh(l,t)))||!t&&c<=r||c==0&&!t&&(Ns(n,45,a)||Ns(n,46,a)))break;if(e&&Su(l)=="f")return!1;for(let d=a;d>=0;d--)n.advance();if(e&&n.pos>s+1024)return!1}return!0}const cN=new Bu((n,e)=>{if(n.next==33)n1(n),n.acceptToken(GP);else if(n.next==38||n.next==42){let t=n.next==38?KP:qP;Zf(n),n.acceptToken(t)}else n.next==39||n.next==34?(Id(n,!1),n.acceptToken(XP)):r1(n,!1,e.context.type==il,e.context.depth)&&n.acceptToken(UP)}),hN=new Bu((n,e)=>{let t=e.context.type==Yf?e.context.depth:-1,r=n.pos;e:for(;;){let s=0,l=n.next;for(;l==32;)l=n.peek(++s);if(!s&&(Ns(n,45,s)||Ns(n,46,s))||!Nr(l)&&(t<0&&(t=Math.max(e.context.depth+1,s)),s<t))break;for(;;){if(n.next<0)break e;let a=Nr(n.next);if(n.advance(),a)continue e;r=n.pos}}n.acceptTokenTo(e1,r)}),fN=Kv({DirectiveName:X.keyword,DirectiveContent:X.attributeValue,"DirectiveEnd DocEnd":X.meta,QuotedLiteral:X.string,BlockLiteralHeader:X.special(X.string),BlockLiteralContent:X.content,Literal:X.content,"Key/Literal Key/QuotedLiteral":X.definition(X.propertyName),"Anchor Alias":X.labelName,Tag:X.typeName,Comment:X.lineComment,": , -":X.separator,"?":X.punctuation,"[ ]":X.squareBracket,"{ }":X.brace}),dN=wu.deserialize({version:14,states:"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y",stateData:";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O",goto:",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv",nodeNames:" DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document",maxTerm:74,context:iN,nodeProps:[["isolate",-3,8,9,14,""],["openedBy",18,"[",32,"{"],["closedBy",19,"]",33,"}"]],propSources:[fN],skippedNodes:[0],repeatNodeCount:6,tokenData:"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P",tokenizers:[sN,oN,cN,hN,0,1],topRules:{Stream:[0,15]},tokenPrec:0});var Yh;const ps=new Ee;function pN(n){return be.define({combine:n?e=>e.concat(n):void 0})}const gN=new Ee;class zn{constructor(e,t,r=[],s=""){this.data=e,this.name=s,Ie.prototype.hasOwnProperty("tree")||Object.defineProperty(Ie.prototype,"tree",{get(){return ar(this)}}),this.parser=t,this.extension=[Es.of(this),Ie.languageData.of((l,a,c)=>{let h=uy(l,a,c),d=h.type.prop(ps);if(!d)return[];let p=l.facet(d),m=h.type.prop(gN);if(m){let x=h.resolve(a-h.from,c);for(let k of m)if(k.test(x,l)){let b=l.facet(k.facet);return k.type=="replace"?b:b.concat(p)}}return p})].concat(r)}isActiveAt(e,t,r=-1){return uy(e,t,r).type.prop(ps)==this.data}findRegions(e){let t=e.facet(Es);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],s=(l,a)=>{if(l.prop(ps)==this.data){r.push({from:a,to:a+l.length});return}let c=l.prop(Ee.mounted);if(c){if(c.tree.prop(ps)==this.data){if(c.overlay)for(let h of c.overlay)r.push({from:h.from+a,to:h.to+a});else r.push({from:a,to:a+l.length});return}else if(c.overlay){let h=r.length;if(s(c.tree,c.overlay[0].from+a),r.length>h)return}}for(let h=0;h<l.children.length;h++){let d=l.children[h];d instanceof ct&&s(d,l.positions[h]+a)}};return s(ar(e),0),r}get allowsNesting(){return!0}}zn.setState=pt.define();function uy(n,e,t){let r=n.facet(Es),s=ar(n).topNode;if(!r||r.allowsNesting)for(let l=s;l;l=l.enter(e,t,kt.ExcludeBuffers))l.type.isTop&&(s=l);return s}class Ou extends zn{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=pN(e.languageData);return new Ou(t,e.parser.configure({props:[ps.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new Ou(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function ar(n){let e=n.field(zn.state,!1);return e?e.tree:ct.empty}class mN{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let Co=null;class Cu{constructor(e,t,r=[],s,l,a,c,h){this.parser=e,this.state=t,this.fragments=r,this.tree=s,this.treeLen=l,this.viewport=a,this.skipped=c,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Cu(e,t,[],ct.empty,0,r,[],null)}startParse(){return this.parser.startParse(new mN(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=ct.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Ii.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Ii.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Co;Co=this;try{return e()}finally{Co=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=cy(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:s,treeLen:l,viewport:a,skipped:c}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((d,p,m,x)=>h.push({fromA:d,toA:p,fromB:m,toB:x})),r=Ii.applyChanges(r,h),s=ct.empty,l=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){c=[];for(let d of this.skipped){let p=e.mapPos(d.from,1),m=e.mapPos(d.to,-1);p<m&&c.push({from:p,to:m})}}}return new Cu(this.parser,t,r,s,l,a,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:s,to:l}=this.skipped[r];s<e.to&&l>e.from&&(this.fragments=cy(this.fragments,s,l),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends Xv{createParse(t,r,s){let l=s[0].from,a=s[s.length-1].to;return{parsedPos:l,advance(){let h=Co;if(h){for(let d of s)h.tempSkipped.push(d);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=a,new ct(en.none,[],[],a-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return Co}}function cy(n,e,t){return Ii.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class As{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new As(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Cu.create(e.facet(Es).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new As(r)}}zn.state=_i.define({create:As.init,update(n,e){for(let t of e.effects)if(t.is(zn.setState))return t.value;return e.startState.facet(Es)!=e.state.facet(Es)?As.init(e.state):n.apply(e)}});let i1=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(i1=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Jh=typeof navigator<"u"&&(!((Yh=navigator.scheduling)===null||Yh===void 0)&&Yh.isInputPending)?()=>navigator.scheduling.isInputPending():null,yN=Hn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(zn.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(zn.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=i1(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:s}}=this.view,l=r.field(zn.state);if(l.tree==l.context.tree&&l.context.isDone(s+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!Jh?Math.max(25,e.timeRemaining()-5):1e9),c=l.context.treeLen<s&&r.doc.length>s+1e3,h=l.context.work(()=>Jh&&Jh()||Date.now()>a,s+(c?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:zn.setState.of(new As(l.context))})),this.chunkBudget>0&&!(h&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>sr(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Es=be.define({combine(n){return n.length?n[0]:null},enables:n=>[zn.state,yN,Pe.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class xN{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const vN=be.define(),Bd=be.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Pu(n){let e=n.facet(Bd);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Nu(n,e){let t="",r=n.tabSize,s=n.facet(Bd)[0];if(s=="	"){for(;e>=r;)t+="	",e-=r;s=" "}for(let l=0;l<e;l++)t+=s;return t}function s1(n,e){n instanceof Ie&&(n=new zu(n));for(let r of n.state.facet(vN)){let s=r(n,e);if(s!==void 0)return s}let t=ar(n.state);return t.length>=e?kN(n,t,e):null}class zu{constructor(e,t={}){this.state=e,this.options=t,this.unit=Pu(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:l}=this.options;return s!=null&&s>=r.from&&s<=r.to?l&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:r.text.slice(s-r.from),from:s}:{text:r.text.slice(0,s-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:s}=this.lineAt(e,t);return r.slice(e-s,Math.min(r.length,e+100-s))}column(e,t=1){let{text:r,from:s}=this.lineAt(e,t),l=this.countColumn(r,e-s),a=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return a>-1&&(l+=a-this.countColumn(r,r.search(/\S|$/))),l}countColumn(e,t=e.length){return Du(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:s}=this.lineAt(e,t),l=this.options.overrideIndentation;if(l){let a=l(s);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const o1=new Ee;function kN(n,e,t){let r=e.resolveStack(t),s=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(s!=r.node){let l=[];for(let a=s;a&&!(a.from<r.node.from||a.to>r.node.to||a.from==r.node.from&&a.type==r.node.type);a=a.parent)l.push(a);for(let a=l.length-1;a>=0;a--)r={node:l[a],next:r}}return l1(r,n,t)}function l1(n,e,t){for(let r=n;r;r=r.next){let s=bN(r.node);if(s)return s(zd.create(e,t,r))}return 0}function wN(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function bN(n){let e=n.type.prop(o1);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Ee.closedBy))){let s=n.lastChild,l=s&&r.indexOf(s.name)>-1;return a=>a1(a,!0,1,void 0,l&&!wN(a)?s.from:void 0)}return n.parent==null?SN:null}function SN(){return 0}class zd extends zu{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new zd(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(ON(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return l1(this.context.next,this.base,this.pos)}}function ON(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function CN(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,l=n.state.doc.lineAt(t.from),a=s==null||s<=l.from?l.to:Math.min(l.to,s);for(let c=t.to;;){let h=e.childAfter(c);if(!h||h==r)return null;if(!h.type.isSkipped){if(h.from>=a)return null;let d=/^ */.exec(l.text.slice(t.to-l.from))[0].length;return{from:t.from,to:t.to+d}}c=h.to}}function hy({closing:n,align:e=!0,units:t=1}){return r=>a1(r,e,t,n)}function a1(n,e,t,r,s){let l=n.textAfter,a=l.match(/^\s*/)[0].length,c=r&&l.slice(a,a+r.length)==r||s==n.pos+a,h=e?CN(n):null;return h?c?n.column(h.from):n.column(h.to):n.baseIndent+(c?0:n.unit*t)}const PN=new Ee;function NN(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}class Fu{constructor(e,t){this.specs=e;let r;function s(c){let h=li.newName();return(r||(r=Object.create(null)))["."+h]=c,h}const l=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,a=t.scope;this.scope=a instanceof zn?c=>c.prop(ps)==a.data:a?c=>c==a:void 0,this.style=Gv(e.map(c=>({tag:c.tag,class:c.class||s(Object.assign({},c,{tag:null}))})),{all:l}).style,this.module=r?new li(r):null,this.themeType=t.themeType}static define(e,t){return new Fu(e,t||{})}}const ed=be.define(),AN=be.define({combine(n){return n.length?[n[0]]:null}});function Zh(n){let e=n.facet(ed);return e.length?e:n.facet(AN)}function EN(n,e){let t=[RN],r;return n instanceof Fu&&(n.module&&t.push(Pe.styleModule.of(n.module)),r=n.themeType),r?t.push(ed.computeN([Pe.darkTheme],s=>s.facet(Pe.darkTheme)==(r=="dark")?[n]:[])):t.push(ed.of(n)),t}class MN{constructor(e){this.markCache=Object.create(null),this.tree=ar(e.state),this.decorations=this.buildDeco(e,Zh(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=ar(e.state),r=Zh(e.state),s=r!=Zh(e.startState),{viewport:l}=e.view,a=e.changes.mapPos(this.decoratedTo,1);t.length<l.to&&!s&&t.type==this.tree.type&&a>=l.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=l.to)}buildDeco(e,t){if(!t||!this.tree.length)return nt.none;let r=new qo;for(let{from:s,to:l}of e.visibleRanges)BP(this.tree,t,(a,c,h)=>{r.add(a,c,this.markCache[h]||(this.markCache[h]=nt.mark({class:h})))},s,l);return r.finish()}}const RN=Tu.high(Hn.fromClass(MN,{decorations:n=>n.decorations})),TN=1e4,DN="()[]{}",jN=new Ee;function td(n,e,t){let r=n.prop(e<0?Ee.openedBy:Ee.closedBy);if(r)return r;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function nd(n){let e=n.type.prop(jN);return e?e(n.node):n}function gs(n,e,t,r={}){let s=r.maxScanDistance||TN,l=r.brackets||DN,a=ar(n),c=a.resolveInner(e,t);for(let h=c;h;h=h.parent){let d=td(h.type,t,l);if(d&&h.from<h.to){let p=nd(h);if(p&&(t>0?e>=p.from&&e<p.to:e>p.from&&e<=p.to))return LN(n,e,t,h,p,d,l)}}return IN(n,e,t,a,c.type,s,l)}function LN(n,e,t,r,s,l,a){let c=r.parent,h={from:s.from,to:s.to},d=0,p=c==null?void 0:c.cursor();if(p&&(t<0?p.childBefore(r.from):p.childAfter(r.to)))do if(t<0?p.to<=r.from:p.from>=r.to){if(d==0&&l.indexOf(p.type.name)>-1&&p.from<p.to){let m=nd(p);return{start:h,end:m?{from:m.from,to:m.to}:void 0,matched:!0}}else if(td(p.type,t,a))d++;else if(td(p.type,-t,a)){if(d==0){let m=nd(p);return{start:h,end:m&&m.from<m.to?{from:m.from,to:m.to}:void 0,matched:!1}}d--}}while(t<0?p.prevSibling():p.nextSibling());return{start:h,matched:!1}}function IN(n,e,t,r,s,l,a){let c=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),h=a.indexOf(c);if(h<0||h%2==0!=t>0)return null;let d={from:t<0?e-1:e,to:t>0?e+1:e},p=n.doc.iterRange(e,t>0?n.doc.length:0),m=0;for(let x=0;!p.next().done&&x<=l;){let k=p.value;t<0&&(x+=k.length);let b=e+x*t;for(let O=t>0?0:k.length-1,C=t>0?k.length:-1;O!=C;O+=t){let P=a.indexOf(k[O]);if(!(P<0||r.resolveInner(b+O,1).type!=s))if(P%2==0==t>0)m++;else{if(m==1)return{start:d,end:{from:b+O,to:b+O+1},matched:P>>1==h>>1};m--}}t>0&&(x+=k.length)}return p.done?{start:d,matched:!1}:null}const BN=Object.create(null),fy=[en.none],dy=[],py=Object.create(null),zN=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])zN[n]=FN(BN,e);function ef(n,e){dy.indexOf(n)>-1||(dy.push(n),console.warn(e))}function FN(n,e){let t=[];for(let c of e.split(" ")){let h=[];for(let d of c.split(".")){let p=n[d]||X[d];p?typeof p=="function"?h.length?h=h.map(p):ef(d,`Modifier ${d} used at start of tag`):h.length?ef(d,`Tag ${d} used as modifier`):h=Array.isArray(p)?p:[p]:ef(d,`Unknown highlighting tag ${d}`)}for(let d of h)t.push(d)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),s=r+" "+t.map(c=>c.id),l=py[s];if(l)return l.id;let a=py[s]=en.define({id:fy.length,name:r,props:[Kv({[r]:t})]});return fy.push(a),a.id}tt.RTL,tt.LTR;const _N=Ou.define({name:"yaml",parser:dN.configure({props:[o1.add({Stream:n=>{for(let e=n.node.resolve(n.pos,-1);e&&e.to>=n.pos;e=e.parent){if(e.name=="BlockLiteralContent"&&e.from<e.to)return n.baseIndentFor(e);if(e.name=="BlockLiteral")return n.baseIndentFor(e)+n.unit;if(e.name=="BlockSequence"||e.name=="BlockMapping")return n.column(e.from,1);if(e.name=="QuotedLiteral")return null;if(e.name=="Literal"){let t=n.column(e.from,1);if(t==n.lineIndent(e.from,1))return t;if(e.to>n.pos)return null}}return null},FlowMapping:hy({closing:"}"}),FlowSequence:hy({closing:"]"})}),PN.add({"FlowMapping FlowSequence":NN,"Item Pair BlockLiteral":(n,e)=>({from:e.doc.lineAt(n.from).to,to:n.to})})]}),languageData:{commentTokens:{line:"#"},indentOnInput:/^\s*[\]\}]$/}});function HN(){return new xN(_N)}const VN="#e5c07b",gy="#e06c75",WN="#56b6c2",QN="#ffffff",iu="#abb2bf",rd="#7d8799",$N="#61afef",UN="#98c379",my="#d19a66",XN="#c678dd",KN="#21252b",yy="#2c313a",xy="#282c34",tf="#353a42",qN="#3E4451",vy="#528bff",GN=Pe.theme({"&":{color:iu,backgroundColor:xy},".cm-content":{caretColor:vy},".cm-cursor, .cm-dropCursor":{borderLeftColor:vy},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:qN},".cm-panels":{backgroundColor:KN,color:iu},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:xy,color:rd,border:"none"},".cm-activeLineGutter":{backgroundColor:yy},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:tf},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:tf,borderBottomColor:tf},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:yy,color:iu}}},{dark:!0}),YN=Fu.define([{tag:X.keyword,color:XN},{tag:[X.name,X.deleted,X.character,X.propertyName,X.macroName],color:gy},{tag:[X.function(X.variableName),X.labelName],color:$N},{tag:[X.color,X.constant(X.name),X.standard(X.name)],color:my},{tag:[X.definition(X.name),X.separator],color:iu},{tag:[X.typeName,X.className,X.number,X.changed,X.annotation,X.modifier,X.self,X.namespace],color:VN},{tag:[X.operator,X.operatorKeyword,X.url,X.escape,X.regexp,X.link,X.special(X.string)],color:WN},{tag:[X.meta,X.comment],color:rd},{tag:X.strong,fontWeight:"bold"},{tag:X.emphasis,fontStyle:"italic"},{tag:X.strikethrough,textDecoration:"line-through"},{tag:X.link,color:rd,textDecoration:"underline"},{tag:X.heading,fontWeight:"bold",color:gy},{tag:[X.atom,X.bool,X.special(X.variableName)],color:my},{tag:[X.processingInstruction,X.string,X.inserted],color:UN},{tag:X.invalid,color:QN}]),JN=[GN,EN(YN)],ZN=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=_d(n.state,t.from);return r.line?eA(n):r.block?nA(n):!1};function Fd(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(r(t.update(s)),!0):!1}}const eA=Fd(sA,0),tA=Fd(u1,0),nA=Fd((n,e)=>u1(n,e,iA(e)),0);function _d(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const Po=50;function rA(n,{open:e,close:t},r,s){let l=n.sliceDoc(r-Po,r),a=n.sliceDoc(s,s+Po),c=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(a)[0].length,d=l.length-c;if(l.slice(d-e.length,d)==e&&a.slice(h,h+t.length)==t)return{open:{pos:r-c,margin:c&&1},close:{pos:s+h,margin:h&&1}};let p,m;s-r<=2*Po?p=m=n.sliceDoc(r,s):(p=n.sliceDoc(r,r+Po),m=n.sliceDoc(s-Po,s));let x=/^\s*/.exec(p)[0].length,k=/\s*$/.exec(m)[0].length,b=m.length-k-t.length;return p.slice(x,x+e.length)==e&&m.slice(b,b+t.length)==t?{open:{pos:r+x+e.length,margin:/\s/.test(p.charAt(x+e.length))?1:0},close:{pos:s-k-t.length,margin:/\s/.test(m.charAt(b-1))?1:0}}:null}function iA(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),s=t.to<=r.to?r:n.doc.lineAt(t.to);s.from>r.from&&s.from==t.to&&(s=t.to==r.to+1?r:n.doc.lineAt(t.to-1));let l=e.length-1;l>=0&&e[l].to>r.from?e[l].to=s.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:s.to})}return e}function u1(n,e,t=e.selection.ranges){let r=t.map(l=>_d(e,l.from).block);if(!r.every(l=>l))return null;let s=t.map((l,a)=>rA(e,r[a],l.from,l.to));if(n!=2&&!s.every(l=>l))return{changes:e.changes(t.map((l,a)=>s[a]?[]:[{from:l.from,insert:r[a].open+" "},{from:l.to,insert:" "+r[a].close}]))};if(n!=1&&s.some(l=>l)){let l=[];for(let a=0,c;a<s.length;a++)if(c=s[a]){let h=r[a],{open:d,close:p}=c;l.push({from:d.pos-h.open.length,to:d.pos+d.margin},{from:p.pos-p.margin,to:p.pos+h.close.length})}return{changes:l}}return null}function sA(n,e,t=e.selection.ranges){let r=[],s=-1;for(let{from:l,to:a}of t){let c=r.length,h=1e9,d=_d(e,l).line;if(d){for(let p=l;p<=a;){let m=e.doc.lineAt(p);if(m.from>s&&(l==a||a>m.from)){s=m.from;let x=/^\s*/.exec(m.text)[0].length,k=x==m.length,b=m.text.slice(x,x+d.length)==d?x:-1;x<m.text.length&&x<h&&(h=x),r.push({line:m,comment:b,token:d,indent:x,empty:k,single:!1})}p=m.to+1}if(h<1e9)for(let p=c;p<r.length;p++)r[p].indent<r[p].line.text.length&&(r[p].indent=h);r.length==c+1&&(r[c].single=!0)}}if(n!=2&&r.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:c,token:h,indent:d,empty:p,single:m}of r)(m||!p)&&l.push({from:c.from+d,insert:h+" "});let a=e.changes(l);return{changes:a,selection:e.selection.map(a,1)}}else if(n!=1&&r.some(l=>l.comment>=0)){let l=[];for(let{line:a,comment:c,token:h}of r)if(c>=0){let d=a.from+c,p=d+h.length;a.text[p-a.from]==" "&&p++,l.push({from:d,to:p})}return{changes:l}}return null}function Is(n,e){return se.create(n.ranges.map(e),n.mainIndex)}function Wn(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Qn({state:n,dispatch:e},t){let r=Is(n.selection,t);return r.eq(n.selection,!0)?!1:(e(Wn(n,r)),!0)}function _u(n,e){return se.cursor(e?n.to:n.from)}function c1(n,e){return Qn(n,t=>t.empty?n.moveByChar(t,e):_u(t,e))}function zt(n){return n.textDirectionAt(n.state.selection.main.head)==tt.LTR}const h1=n=>c1(n,!zt(n)),f1=n=>c1(n,zt(n));function d1(n,e){return Qn(n,t=>t.empty?n.moveByGroup(t,e):_u(t,e))}const oA=n=>d1(n,!zt(n)),lA=n=>d1(n,zt(n));function aA(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Hu(n,e,t){let r=ar(n).resolveInner(e.head),s=t?Ee.closedBy:Ee.openedBy;for(let h=e.head;;){let d=t?r.childAfter(h):r.childBefore(h);if(!d)break;aA(n,d,s)?r=d:h=t?d.to:d.from}let l=r.type.prop(s),a,c;return l&&(a=t?gs(n,r.from,1):gs(n,r.to,-1))&&a.matched?c=t?a.end.to:a.end.from:c=t?r.to:r.from,se.cursor(c,t?-1:1)}const uA=n=>Qn(n,e=>Hu(n.state,e,!zt(n))),cA=n=>Qn(n,e=>Hu(n.state,e,zt(n)));function p1(n,e){return Qn(n,t=>{if(!t.empty)return _u(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const g1=n=>p1(n,!1),m1=n=>p1(n,!0);function y1(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,s;if(e){for(let l of n.state.facet(Pe.scrollMargins)){let a=l(n);a!=null&&a.top&&(t=Math.max(a==null?void 0:a.top,t)),a!=null&&a.bottom&&(r=Math.max(a==null?void 0:a.bottom,r))}s=n.scrollDOM.clientHeight-t-r}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function x1(n,e){let t=y1(n),{state:r}=n,s=Is(r.selection,a=>a.empty?n.moveVertically(a,e,t.height):_u(a,e));if(s.eq(r.selection))return!1;let l;if(t.selfScroll){let a=n.coordsAtPos(r.selection.main.head),c=n.scrollDOM.getBoundingClientRect(),h=c.top+t.marginTop,d=c.bottom-t.marginBottom;a&&a.top>h&&a.bottom<d&&(l=Pe.scrollIntoView(s.main.head,{y:"start",yMargin:a.top-h}))}return n.dispatch(Wn(r,s),{effects:l}),!0}const ky=n=>x1(n,!1),id=n=>x1(n,!0);function fi(n,e,t){let r=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?r.to:r.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==r.from&&r.length){let l=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;l&&e.head!=r.from+l&&(s=se.cursor(r.from+l))}return s}const hA=n=>Qn(n,e=>fi(n,e,!0)),fA=n=>Qn(n,e=>fi(n,e,!1)),dA=n=>Qn(n,e=>fi(n,e,!zt(n))),pA=n=>Qn(n,e=>fi(n,e,zt(n))),gA=n=>Qn(n,e=>se.cursor(n.lineBlockAt(e.head).from,1)),mA=n=>Qn(n,e=>se.cursor(n.lineBlockAt(e.head).to,-1));function yA(n,e,t){let r=!1,s=Is(n.selection,l=>{let a=gs(n,l.head,-1)||gs(n,l.head,1)||l.head>0&&gs(n,l.head-1,1)||l.head<n.doc.length&&gs(n,l.head+1,-1);if(!a||!a.end)return l;r=!0;let c=a.start.from==l.head?a.end.to:a.end.from;return se.cursor(c)});return r?(e(Wn(n,s)),!0):!1}const xA=({state:n,dispatch:e})=>yA(n,e);function On(n,e){let t=Is(n.state.selection,r=>{let s=e(r);return se.range(r.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Wn(n.state,t)),!0)}function v1(n,e){return On(n,t=>n.moveByChar(t,e))}const k1=n=>v1(n,!zt(n)),w1=n=>v1(n,zt(n));function b1(n,e){return On(n,t=>n.moveByGroup(t,e))}const vA=n=>b1(n,!zt(n)),kA=n=>b1(n,zt(n)),wA=n=>On(n,e=>Hu(n.state,e,!zt(n))),bA=n=>On(n,e=>Hu(n.state,e,zt(n)));function S1(n,e){return On(n,t=>n.moveVertically(t,e))}const O1=n=>S1(n,!1),C1=n=>S1(n,!0);function P1(n,e){return On(n,t=>n.moveVertically(t,e,y1(n).height))}const wy=n=>P1(n,!1),by=n=>P1(n,!0),SA=n=>On(n,e=>fi(n,e,!0)),OA=n=>On(n,e=>fi(n,e,!1)),CA=n=>On(n,e=>fi(n,e,!zt(n))),PA=n=>On(n,e=>fi(n,e,zt(n))),NA=n=>On(n,e=>se.cursor(n.lineBlockAt(e.head).from)),AA=n=>On(n,e=>se.cursor(n.lineBlockAt(e.head).to)),Sy=({state:n,dispatch:e})=>(e(Wn(n,{anchor:0})),!0),Oy=({state:n,dispatch:e})=>(e(Wn(n,{anchor:n.doc.length})),!0),Cy=({state:n,dispatch:e})=>(e(Wn(n,{anchor:n.selection.main.anchor,head:0})),!0),Py=({state:n,dispatch:e})=>(e(Wn(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),EA=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),MA=({state:n,dispatch:e})=>{let t=Vu(n).map(({from:r,to:s})=>se.range(r,Math.min(s+1,n.doc.length)));return e(n.update({selection:se.create(t),userEvent:"select"})),!0},RA=({state:n,dispatch:e})=>{let t=Is(n.selection,r=>{let s=ar(n),l=s.resolveStack(r.from,1);if(r.empty){let a=s.resolveStack(r.from,-1);a.node.from>=l.node.from&&a.node.to<=l.node.to&&(l=a)}for(let a=l;a;a=a.next){let{node:c}=a;if((c.from<r.from&&c.to>=r.to||c.to>r.to&&c.from<=r.from)&&a.next)return se.range(c.to,c.from)}return r});return t.eq(n.selection)?!1:(e(Wn(n,t)),!0)};function N1(n,e){let{state:t}=n,r=t.selection,s=t.selection.ranges.slice();for(let l of t.selection.ranges){let a=t.doc.lineAt(l.head);if(e?a.to<n.state.doc.length:a.from>0)for(let c=l;;){let h=n.moveVertically(c,e);if(h.head<a.from||h.head>a.to){s.some(d=>d.head==h.head)||s.push(h);break}else{if(h.head==c.head)break;c=h}}}return s.length==r.ranges.length?!1:(n.dispatch(Wn(t,se.create(s,s.length-1))),!0)}const TA=n=>N1(n,!1),DA=n=>N1(n,!0),jA=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=se.create([t.main]):t.main.empty||(r=se.create([se.cursor(t.main.head)])),r?(e(Wn(n,r)),!0):!1};function gl(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,s=r.changeByRange(l=>{let{from:a,to:c}=l;if(a==c){let h=e(l);h<a?(t="delete.backward",h=Qa(n,h,!1)):h>a&&(t="delete.forward",h=Qa(n,h,!0)),a=Math.min(a,h),c=Math.max(c,h)}else a=Qa(n,a,!1),c=Qa(n,c,!0);return a==c?{range:l}:{changes:{from:a,to:c},range:se.cursor(a,a<l.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(r.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Pe.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Qa(n,e,t){if(n instanceof Pe)for(let r of n.state.facet(Pe.atomicRanges).map(s=>s(n)))r.between(e,e,(s,l)=>{s<e&&l>e&&(e=t?l:s)});return e}const A1=(n,e,t)=>gl(n,r=>{let s=r.from,{state:l}=n,a=l.doc.lineAt(s),c,h;if(t&&!e&&s>a.from&&s<a.from+200&&!/[^ \t]/.test(c=a.text.slice(0,s-a.from))){if(c[c.length-1]=="	")return s-1;let d=Du(c,l.tabSize),p=d%Pu(l)||Pu(l);for(let m=0;m<p&&c[c.length-1-m]==" ";m++)s--;h=s}else h=Wt(a.text,s-a.from,e,e)+a.from,h==s&&a.number!=(e?l.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(h-a.from,s-a.from))&&(h=Wt(a.text,h-a.from,!1,!1)+a.from);return h}),sd=n=>A1(n,!1,!0),E1=n=>A1(n,!0,!1),M1=(n,e)=>gl(n,t=>{let r=t.head,{state:s}=n,l=s.doc.lineAt(r),a=s.charCategorizer(r);for(let c=null;;){if(r==(e?l.to:l.from)){r==t.head&&l.number!=(e?s.doc.lines:1)&&(r+=e?1:-1);break}let h=Wt(l.text,r-l.from,e)+l.from,d=l.text.slice(Math.min(r,h)-l.from,Math.max(r,h)-l.from),p=a(d);if(c!=null&&p!=c)break;(d!=" "||r!=t.head)&&(c=p),r=h}return r}),R1=n=>M1(n,!1),LA=n=>M1(n,!0),IA=n=>gl(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),BA=n=>gl(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),zA=n=>gl(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),FA=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:De.of(["",""])},range:se.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},_A=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let s=r.from,l=n.doc.lineAt(s),a=s==l.from?s-1:Wt(l.text,s-l.from,!1)+l.from,c=s==l.to?s+1:Wt(l.text,s-l.from,!0)+l.from;return{changes:{from:a,to:c,insert:n.doc.slice(s,c).append(n.doc.slice(a,s))},range:se.cursor(c)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function Vu(n){let e=[],t=-1;for(let r of n.selection.ranges){let s=n.doc.lineAt(r.from),l=n.doc.lineAt(r.to);if(!r.empty&&r.to==l.from&&(l=n.doc.lineAt(r.to-1)),t>=s.number){let a=e[e.length-1];a.to=l.to,a.ranges.push(r)}else e.push({from:s.from,to:l.to,ranges:[r]});t=l.number+1}return e}function T1(n,e,t){if(n.readOnly)return!1;let r=[],s=[];for(let l of Vu(n)){if(t?l.to==n.doc.length:l.from==0)continue;let a=n.doc.lineAt(t?l.to+1:l.from-1),c=a.length+1;if(t){r.push({from:l.to,to:a.to},{from:l.from,insert:a.text+n.lineBreak});for(let h of l.ranges)s.push(se.range(Math.min(n.doc.length,h.anchor+c),Math.min(n.doc.length,h.head+c)))}else{r.push({from:a.from,to:l.from},{from:l.to,insert:n.lineBreak+a.text});for(let h of l.ranges)s.push(se.range(h.anchor-c,h.head-c))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:se.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const HA=({state:n,dispatch:e})=>T1(n,e,!1),VA=({state:n,dispatch:e})=>T1(n,e,!0);function D1(n,e,t){if(n.readOnly)return!1;let r=[];for(let s of Vu(n))t?r.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):r.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const WA=({state:n,dispatch:e})=>D1(n,e,!1),QA=({state:n,dispatch:e})=>D1(n,e,!0),$A=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(Vu(e).map(({from:s,to:l})=>(s>0?s--:l<e.doc.length&&l++,{from:s,to:l}))),r=Is(e.selection,s=>{let l;if(n.lineWrapping){let a=n.lineBlockAt(s.head),c=n.coordsAtPos(s.head,s.assoc||1);c&&(l=a.bottom+n.documentTop-c.bottom+n.defaultLineHeight/2)}return n.moveVertically(s,!0,l)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function UA(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=ar(n).resolveInner(e),r=t.childBefore(e),s=t.childAfter(e),l;return r&&s&&r.to<=e&&s.from>=e&&(l=r.type.prop(Ee.closedBy))&&l.indexOf(s.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(r.to,s.from))?{from:r.to,to:s.from}:null}const Ny=j1(!1),XA=j1(!0);function j1(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(s=>{let{from:l,to:a}=s,c=e.doc.lineAt(l),h=!n&&l==a&&UA(e,l);n&&(l=a=(a<=c.to?c:e.doc.lineAt(a)).to);let d=new zu(e,{simulateBreak:l,simulateDoubleBreak:!!h}),p=s1(d,l);for(p==null&&(p=Du(/^\s*/.exec(e.doc.lineAt(l).text)[0],e.tabSize));a<c.to&&/\s/.test(c.text[a-c.from]);)a++;h?{from:l,to:a}=h:l>c.from&&l<c.from+100&&!/\S/.test(c.text.slice(0,l))&&(l=c.from);let m=["",Nu(e,p)];return h&&m.push(Nu(e,d.lineIndent(c.from,-1))),{changes:{from:l,to:a,insert:De.of(m)},range:se.cursor(l+1+m[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function Hd(n,e){let t=-1;return n.changeByRange(r=>{let s=[];for(let a=r.from;a<=r.to;){let c=n.doc.lineAt(a);c.number>t&&(r.empty||r.to>c.from)&&(e(c,s,r),t=c.number),a=c.to+1}let l=n.changes(s);return{changes:s,range:se.range(l.mapPos(r.anchor,1),l.mapPos(r.head,1))}})}const KA=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new zu(n,{overrideIndentation:l=>{let a=t[l];return a??-1}}),s=Hd(n,(l,a,c)=>{let h=s1(r,l.from);if(h==null)return;/\S/.test(l.text)||(h=0);let d=/^\s*/.exec(l.text)[0],p=Nu(n,h);(d!=p||c.from<l.from+d.length)&&(t[l.from]=h,a.push({from:l.from,to:l.from+d.length,insert:p}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},qA=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Hd(n,(t,r)=>{r.push({from:t.from,insert:n.facet(Bd)})}),{userEvent:"input.indent"})),!0),GA=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(Hd(n,(t,r)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let l=Du(s,n.tabSize),a=0,c=Nu(n,Math.max(0,l-Pu(n)));for(;a<s.length&&a<c.length&&s.charCodeAt(a)==c.charCodeAt(a);)a++;r.push({from:t.from+a,to:t.from+s.length,insert:c.slice(a)})}),{userEvent:"delete.dedent"})),!0),YA=n=>(n.setTabFocusMode(),!0),JA=[{key:"Ctrl-b",run:h1,shift:k1,preventDefault:!0},{key:"Ctrl-f",run:f1,shift:w1},{key:"Ctrl-p",run:g1,shift:O1},{key:"Ctrl-n",run:m1,shift:C1},{key:"Ctrl-a",run:gA,shift:NA},{key:"Ctrl-e",run:mA,shift:AA},{key:"Ctrl-d",run:E1},{key:"Ctrl-h",run:sd},{key:"Ctrl-k",run:IA},{key:"Ctrl-Alt-h",run:R1},{key:"Ctrl-o",run:FA},{key:"Ctrl-t",run:_A},{key:"Ctrl-v",run:id}],ZA=[{key:"ArrowLeft",run:h1,shift:k1,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:oA,shift:vA,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:dA,shift:CA,preventDefault:!0},{key:"ArrowRight",run:f1,shift:w1,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:lA,shift:kA,preventDefault:!0},{mac:"Cmd-ArrowRight",run:pA,shift:PA,preventDefault:!0},{key:"ArrowUp",run:g1,shift:O1,preventDefault:!0},{mac:"Cmd-ArrowUp",run:Sy,shift:Cy},{mac:"Ctrl-ArrowUp",run:ky,shift:wy},{key:"ArrowDown",run:m1,shift:C1,preventDefault:!0},{mac:"Cmd-ArrowDown",run:Oy,shift:Py},{mac:"Ctrl-ArrowDown",run:id,shift:by},{key:"PageUp",run:ky,shift:wy},{key:"PageDown",run:id,shift:by},{key:"Home",run:fA,shift:OA,preventDefault:!0},{key:"Mod-Home",run:Sy,shift:Cy},{key:"End",run:hA,shift:SA,preventDefault:!0},{key:"Mod-End",run:Oy,shift:Py},{key:"Enter",run:Ny,shift:Ny},{key:"Mod-a",run:EA},{key:"Backspace",run:sd,shift:sd,preventDefault:!0},{key:"Delete",run:E1,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:R1,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:LA,preventDefault:!0},{mac:"Mod-Backspace",run:BA,preventDefault:!0},{mac:"Mod-Delete",run:zA,preventDefault:!0}].concat(JA.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),eE=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:uA,shift:wA},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:cA,shift:bA},{key:"Alt-ArrowUp",run:HA},{key:"Shift-Alt-ArrowUp",run:WA},{key:"Alt-ArrowDown",run:VA},{key:"Shift-Alt-ArrowDown",run:QA},{key:"Mod-Alt-ArrowUp",run:TA},{key:"Mod-Alt-ArrowDown",run:DA},{key:"Escape",run:jA},{key:"Mod-Enter",run:XA},{key:"Alt-l",mac:"Ctrl-l",run:MA},{key:"Mod-i",run:RA,preventDefault:!0},{key:"Mod-[",run:GA},{key:"Mod-]",run:qA},{key:"Mod-Alt-\\",run:KA},{key:"Shift-Mod-k",run:$A},{key:"Shift-Mod-\\",run:xA},{key:"Mod-/",run:ZN},{key:"Alt-A",run:tA},{key:"Ctrl-m",mac:"Shift-Alt-m",run:YA}].concat(ZA),tE=n=>{const{state:e}=n,t=e.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:"	"},range:se.cursor(r.from+1)}));return n.dispatch(t),!0},nE=Md.of([{key:"Tab",run:tE}]);class rE extends cl{toDOM(){const e=document.createElement("span");return e.className="cm-space-dot",e.textContent="",e}}class iE extends cl{toDOM(){const e=document.createElement("span");return e.className="cm-tab-arrow",e.textContent="",e}}const sE=Hn.fromClass(class{constructor(n){Sm(this,"decorations");this.decorations=this.buildDecorations(n)}update(n){(n.docChanged||n.viewportChanged)&&(this.decorations=this.buildDecorations(n.view))}buildDecorations(n){const e=[];for(const{from:t,to:r}of n.visibleRanges){const s=n.state.doc.sliceString(t,r);for(let l=0;l<s.length;l++){const a=s[l],c=t+l;a===" "?e.push({from:c,to:c+1,decoration:nt.replace({widget:new rE})}):a==="	"&&e.push({from:c,to:c+1,decoration:nt.replace({widget:new iE})})}}return nt.set(e.map(t=>t.decoration.range(t.from,t.to)))}},{decorations:n=>n.decorations}),oE=Pe.theme({"&":{backgroundColor:"#ffffff",color:"#000000"},".cm-content":{caretColor:"#000000"},".cm-gutters":{backgroundColor:"#f5f5f5",color:"#999999",border:"none"},".cm-activeLineGutter":{backgroundColor:"#e8e8e8"},".cm-activeLine":{backgroundColor:"#f0f0f0"},".cm-space-dot":{color:"#999999"},".cm-tab-arrow":{color:"#999999",display:"inline-block",width:"calc(4ch)",textAlign:"left"}}),lE=Pe.theme({".cm-space-dot":{color:"#666666"},".cm-tab-arrow":{color:"#666666",display:"inline-block",width:"calc(4ch)",textAlign:"left"}});function Ay(n){switch(n){case"light":return[oE];case"dark":default:return[JN,lE]}}const aE=S.forwardRef(function({value:e,onChange:t,colorScheme:r,onFocusChange:s},l){const a=S.useRef(null),c=S.useRef(null),h=S.useRef(new ul),d=S.useRef(s);d.current=s,S.useImperativeHandle(l,()=>({focus:()=>{var m;(m=c.current)==null||m.focus()},blur:()=>{var m;(m=c.current)==null||m.contentDOM.blur()}}),[]),S.useEffect(()=>{if(!a.current||c.current)return;const m=Ie.create({doc:e,extensions:[hP(),pP(),eP(),GC(),HN(),nE,Md.of(eE),Ie.tabSize.of(4),sE,Pe.updateListener.of(x=>{var k;x.docChanged&&t(x.state.doc.toString()),x.focusChanged&&((k=d.current)==null||k.call(d,x.view.hasFocus))}),h.current.of(Ay(r)),Pe.lineWrapping]});return c.current=new Pe({state:m,parent:a.current}),()=>{var x;(x=c.current)==null||x.destroy(),c.current=null}},[]);const p=S.useCallback(m=>{const x=c.current;if(!x)return;const k=x.state.doc.toString();k!==m&&x.dispatch({changes:{from:0,to:k.length,insert:m}})},[]);return S.useEffect(()=>{p(e)},[e,p]),S.useEffect(()=>{const m=c.current;m&&m.dispatch({effects:h.current.reconfigure(Ay(r))})},[r]),v.jsx("div",{ref:a,className:"h-full w-full overflow-auto [&_.cm-editor]:h-full [&_.cm-scroller]:overflow-auto",style:{fontSize:"14px"}})});let $a=null,nf=null;async function L1(){return $a||(nf||(nf=(async()=>{const n=await fetch("/testsuite/tests.json");if(!n.ok)throw new Error(`Failed to load test suite: ${n.status}`);return $a=await n.json(),$a})()),nf)}function uE({isOpen:n,onClose:e,onSelect:t}){const[r,s]=S.useState([]),[l,a]=S.useState([]),[c,h]=S.useState(""),[d,p]=S.useState(!1),[m,x]=S.useState(null),[k,b]=S.useState(null),O=S.useRef(null);S.useEffect(()=>{n&&r.length===0&&!d&&(p(!0),L1().then(P=>{s(P.tests),a(P.tests),p(!1)}).catch(P=>{x(P.message),p(!1)}))},[n,r.length,d]),S.useEffect(()=>{n&&setTimeout(()=>{var P;return(P=O.current)==null?void 0:P.focus()},100)},[n]),S.useEffect(()=>{if(!c){a(r),b(null);return}try{const P=new RegExp(c,"i");b(null),a(r.filter(M=>P.test(M.id)||P.test(M.name)))}catch{b("Invalid regex"),a([])}},[c,r]),S.useEffect(()=>{const P=M=>{M.key==="Escape"&&n&&e()};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[n,e]);const C=P=>{t(P.yaml),e(),h("")};return n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-[600px] max-h-[80vh] flex flex-col",children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Search"," ",v.jsx("a",{href:"https://github.com/yaml/yaml-test-suite/tree/data",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 underline",children:"YAML Test Suite"})]}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white transition-colors",children:"X"})]}),v.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[v.jsx("input",{ref:O,type:"text",placeholder:"Search by regex (e.g., 'block.*map' or 'spec example')",value:c,onChange:P=>h(P.target.value),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white rounded border border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:outline-none"}),k&&v.jsx("div",{className:"mt-1 text-red-600 dark:text-red-400 text-sm",children:k})]}),v.jsxs("div",{className:"flex-1 overflow-y-auto",children:[d&&v.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Loading tests..."}),m&&v.jsx("div",{className:"p-8 text-center text-red-600 dark:text-red-400",children:m}),!d&&!m&&l.map(P=>v.jsxs("button",{onClick:()=>C(P),className:"w-full px-4 py-3 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[v.jsx("span",{className:`font-mono ${P.error?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:P.id}),v.jsx("span",{className:"text-gray-500 dark:text-gray-400 mx-2",children:"-"}),v.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:P.name})]},P.id)),!d&&!m&&l.length===0&&c&&!k&&v.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No tests match your search"})]}),v.jsxs("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700 text-sm text-gray-500 flex justify-between",children:[v.jsxs("span",{children:[l.length," of ",r.length," tests"]}),v.jsx("span",{children:"(E) = expected parse error"})]})]})}):null}const cE={dark:"vs-dark",light:"light"},Wo=`# Edit this YAML and see how
# different parsers handle it.

# Green = matches reference parser
# Red = differs or errored

name: YAML Parser Playground

url: https://play.yaml.com/
repo:
  https://github.com/yaml/yaml-play

current parsers: 17
actively maintained: true

features:
- Compare outputs from multiple
  YAML parsers
- Search and load tests from the
  YAML Test Suite
- Select and drag output panes
- Click Help for shortcut keys
`,Ey=200,My=800,Ry=S.forwardRef(function({value:e,onChange:t,width:r,onWidthChange:s,colorScheme:l,editorType:a,showBorder:c=!0,heightMode:h="full",isMobile:d=!1,onSubmitPR:p,onSignIn:m,isGitHubAuthenticated:x=!1},k){const b=S.useRef(!1),O=S.useRef(0),C=S.useRef(0),P=S.useRef(null),M=S.useRef(null),[L,B]=S.useState(!1),[R,j]=S.useState(!1),[D,V]=S.useState(!1),$=S.useRef(null);S.useEffect(()=>{if(!R)return;const G=W=>{$.current&&!$.current.contains(W.target)&&j(!1)},oe=W=>{W.key==="Escape"&&j(!1)};return document.addEventListener("mousedown",G),document.addEventListener("keydown",oe),()=>{document.removeEventListener("mousedown",G),document.removeEventListener("keydown",oe)}},[R]),S.useImperativeHandle(k,()=>({focus:()=>{var G,oe;a==="codemirror"?(G=M.current)==null||G.focus():(oe=P.current)==null||oe.focus()},blur:()=>{var G,oe,W;a==="codemirror"?(G=M.current)==null||G.blur():(oe=P.current)!=null&&oe.getDomNode()&&((W=document.activeElement)==null||W.blur())}}),[a]);const U=S.useCallback(G=>{P.current=G;const oe=G.getModel();oe&&oe.updateOptions({tabSize:4,insertSpaces:!1}),G.onDidFocusEditorText(()=>V(!0)),G.onDidBlurEditorText(()=>V(!1))},[]),J=S.useCallback(G=>{b.current=!0,O.current=G.clientX,C.current=r,document.body.style.cursor="col-resize",document.body.style.userSelect="none";const oe=re=>{if(!b.current)return;const ee=re.clientX-O.current,A=Math.min(My,Math.max(Ey,C.current+ee));s(A)},W=()=>{b.current=!1,document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",oe),document.removeEventListener("mouseup",W)};document.addEventListener("mousemove",oe),document.addEventListener("mouseup",W)},[r,s]),Q=h==="full"?"h-full":"h-full overflow-hidden",Z=c?"border-r border-gray-300 dark:border-gray-700":"",he=D?"ring-2 ring-blue-500 ring-inset":"",K=d?{}:{width:`${r}px`,minWidth:`${Ey}px`,maxWidth:`${My}px`};return v.jsxs("div",{className:`flex flex-col ${Q} ${d?"w-full border-b border-gray-300 dark:border-gray-700":Z} ${he} relative transition-shadow`,style:K,children:[v.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 py-2 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:`font-semibold transition-colors ${D?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-500"}`,children:D?"YAML Input Editor (editing)":"YAML Input Editor"}),v.jsxs("div",{className:"flex items-center gap-1",children:[!d&&(p||m)&&v.jsx("button",{onClick:()=>{x&&p?p():m&&m()},className:"text-gray-400 hover:text-gray-700 dark:hover:text-white p-1",title:"Submit to yaml-test-suite",children:v.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),v.jsx("button",{onClick:()=>navigator.clipboard.writeText(e),className:"text-gray-400 hover:text-gray-700 dark:hover:text-white p-1",title:"Copy YAML",children:v.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),v.jsxs("div",{className:"relative",ref:$,children:[v.jsx("button",{onClick:()=>j(!R),className:"text-gray-400 hover:text-gray-700 dark:hover:text-white p-1",title:"Menu",children:v.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),R&&v.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[v.jsx("button",{onClick:()=>{j(!1),B(!0)},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Search Test Suite"}),v.jsx("button",{onClick:()=>{var G,oe;j(!1),t(""),a==="codemirror"?(G=M.current)==null||G.focus():(oe=P.current)==null||oe.focus()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Clear"}),v.jsx("button",{onClick:()=>{j(!1),t(Wo)},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Default YAML"})]})]})]})]}),v.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:a==="codemirror"?v.jsx(aE,{ref:M,value:e,onChange:t,colorScheme:l,onFocusChange:V}):v.jsx(H2,{height:"100%",defaultLanguage:"yaml",defaultValue:Wo,value:e,onChange:G=>t(G||""),theme:cE[l],onMount:U,options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",renderWhitespace:"all",tabSize:4,insertSpaces:!1,detectIndentation:!1,useTabStops:!1,scrollBeyondLastLine:!1,wordWrap:"on",automaticLayout:!0}})}),!d&&v.jsx("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-blue-500 transition-colors",onMouseDown:J}),v.jsx(uE,{isOpen:L,onClose:()=>B(!1),onSelect:t})]})});function hE({parser:n,agrees:e,loading:t,onClose:r,onAddPane:s,isDraggable:l=!0,onInfoClick:a,onRunTestSuite:c,showTestSuite:h=!0,output:d,parseSuccess:p,isSelected:m=!1,onToggleSelection:x}){const[k,b]=S.useState(!1),O=S.useRef(null);S.useEffect(()=>{if(!k)return;const Z=K=>{O.current&&!O.current.contains(K.target)&&b(!1)},he=K=>{K.key==="Escape"&&b(!1)};return document.addEventListener("mousedown",Z),document.addEventListener("keydown",he),()=>{document.removeEventListener("mousedown",Z),document.removeEventListener("keydown",he)}},[k]);const{attributes:C,listeners:P,setNodeRef:M,transform:L,transition:B,isDragging:R}=RS({id:n.id,disabled:!l}),j={transform:$o.Transform.toString(L),transition:B,opacity:R?.5:1},D=t||p===void 0?"bg-gray-300":p?"bg-green-300":"bg-red-300",U=!(n.id==="refparse")&&!t&&e===!1?"border-red-600":t||p===void 0?"border-gray-300":p?"border-green-300":"border-red-300",J=`${n.name} v${n.version} (${n.language})`,Q=Z=>{Z.stopPropagation(),b(!k)};return v.jsxs("div",{ref:M,style:j,className:`${D} ${U} border-4 px-3 py-2 flex items-center justify-between cursor-grab active:cursor-grabbing select-none`,...C,...P,children:[v.jsxs("div",{className:"flex items-center gap-2 flex-1",children:[x&&v.jsx("input",{type:"checkbox",checked:m,onChange:Z=>{Z.stopPropagation(),x(),Z.currentTarget.blur()},onClick:Z=>Z.stopPropagation(),className:"w-4 h-4 text-blue-600 bg-white border-gray-500 rounded cursor-pointer",title:"Include in selected group (S)"}),v.jsx("span",{className:"text-gray-900 font-semibold",title:J,children:n.name})]}),v.jsxs("div",{className:"flex items-center gap-2",children:[t&&v.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-gray-700 border-t-transparent rounded-full"}),s&&v.jsx("button",{onClick:Z=>{Z.stopPropagation(),s()},className:"text-gray-700 hover:text-gray-500 p-1",title:"Add pane",children:v.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),r&&v.jsx("button",{onClick:Z=>{Z.stopPropagation(),r()},className:"text-gray-700 hover:text-gray-500 text-lg leading-none px-1",title:"Close pane",children:""}),d&&v.jsx("button",{onClick:Z=>{Z.stopPropagation(),navigator.clipboard.writeText(d)},className:"text-gray-700 hover:text-gray-500 p-1",title:"Copy output",children:v.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),v.jsxs("div",{className:"cursor-pointer relative",onClick:Q,ref:O,children:[v.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),k&&v.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[140px]",children:[h&&v.jsx("button",{onClick:Z=>{Z.stopPropagation(),b(!1),c==null||c()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Test Suite"}),v.jsx("button",{onClick:Z=>{Z.stopPropagation(),b(!1),a==null||a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Parser Info"})]})]})]})]})}function fE({isOpen:n,onClose:e,parser:t}){return S.useEffect(()=>{if(!n)return;const r=s=>{s.key==="Escape"&&e()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",onClick:r=>r.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsx("div",{className:"p-4 space-y-3",children:v.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-sm",children:[t.repo&&v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Repository"}),v.jsx("a",{href:t.repo,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline truncate",children:t.repo})]}),v.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Language"}),v.jsx("span",{className:"text-gray-900 dark:text-white",children:t.language}),v.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Version"}),v.jsx("span",{className:"text-gray-900 dark:text-white",children:t.version})]})})]})}):null}const ml="https://localhost:7481",I1="https://yaml-play-oauth.ingy.workers.dev",su="0.1.36";function dE(){return su}async function pE(){try{return(await fetch(`${ml}/`,{method:"HEAD"})).ok}catch{return!1}}async function B1(n,e,t){const r=`${ml}/?version=${encodeURIComponent(su)}&parser=yaml-test-parse-${n}`;try{const s=new URLSearchParams;s.append("text",e);const l=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!l.ok){const h=(await l.text()).match(/Requires sandbox version (\S+)/);if(h)return{status:-1,output:`Version mismatch: sandbox is ${h[1]}, but frontend requires ${su}`,versionMismatch:{required:su,found:h[1]}};throw new Error(`HTTP ${l.status}: ${l.statusText}`)}const a=await l.json();return{status:a.status,output:a.output}}catch(s){return s&&typeof s=="object"&&"versionMismatch"in s?s:{status:-1,output:s instanceof Error?s.message:"Unknown error"}}}async function Vd(n){const e=`${ml}/github-models`;try{const t=await fetch(e,{method:"GET",headers:{Authorization:`Bearer ${n}`}});if(!t.ok)throw new Error(`Failed to fetch GitHub models: ${t.statusText}`);return await t.json()}catch(t){return console.error("Error fetching GitHub models:",t),[]}}async function Ty(n){const e=`${ml}/preview-pr`,t=new URLSearchParams;t.append("yaml",n.yaml),t.append("events",n.events),t.append("isError",n.isError?"true":"false"),t.append("model",n.model),t.append("githubToken",n.githubToken),n.testName&&t.append("testName",n.testName),n.currentTags&&n.currentTags.length>0&&t.append("currentTags",JSON.stringify(n.currentTags));const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!r.ok)throw new Error(`Failed to preview PR: ${r.statusText}`);return await r.json()}async function gE(n){const e=`${ml}/submit-pr`,t=new URLSearchParams;t.append("token",n.token),t.append("testId",n.testId),t.append("testName",n.testName),t.append("yaml",n.yaml),t.append("events",n.events),t.append("isError",n.isError?"true":"false"),t.append("similarTests",JSON.stringify(n.similarTests)),t.append("tags",JSON.stringify(n.tags)),t.append("from",n.from);const r=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:t});if(!r.ok)throw new Error(`Failed to submit PR: ${r.statusText}`);return await r.json()}async function mE(n){const e=`${I1}/device/code`;new URLSearchParams;const t=await fetch(e,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:void 0});if(!t.ok)throw new Error(`Failed to request device code: ${t.statusText}`);return await t.json()}async function yE(n,e){const t=`${I1}/device/token`,r=new URLSearchParams;r.append("device_code",e);const s=await fetch(t,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:r});if(!s.ok)throw new Error(`Failed to poll for token: ${s.statusText}`);return await s.json()}let od=null,ld=null,Dy=!1;async function xE(){if(Dy)return;const[n,e,t,r,s]=await Promise.all([fetch("/refparse/prelude.js").then(a=>a.text()),fetch("/refparse/grammar.js").then(a=>a.text()),fetch("/refparse/parser.js").then(a=>a.text()),fetch("/refparse/receiver.js").then(a=>a.text()),fetch("/refparse/test-receiver.js").then(a=>a.text())]),l=eval;window.global=window,l(n),l(e),l(t),l(r),l(s),od=window.Parser,ld=window.TestReceiver,Dy=!0}async function z1(n){try{if(await xE(),!ld)return{status:1,output:"TestReceiverClass not loaded"};if(!od)return{status:1,output:"Parser not loaded"};const e=new ld,t=new od(e);return t.parse(n),{status:0,output:t.receiver.output().replace(/\n$/,"")||"(empty output)"}}catch(e){return{status:1,output:e instanceof Error?e.message:String(e)}}}function jy(n){return n.replace(/\s+(\{\}|\[\])$/mg,"").replace(/^=COMMENT .*\n?/mg,"").replace(/^[^+\-=].*\n?/gm,"").trim()}function F1(n,e,t){let r=jy(n),s=jy(e);if(t==="rustyaml"&&(s=s.replace(/<Tag\("!!", "(.*?)"\)>/g,"<tag:yaml.org,2002:$1>").replace(/<Tag\("!", "(.*?)"\)>/g,"<!$1>").replace(/<Tag\("", "!"\)>/g,"<!>").replace(/<Tag\("", "(tag:.*?)"\)>/g,"<$1>").replace(/<Tag\("", "(!.*?)"\)>/g,"<$1>"),r=r.replace(/^\+DOC ---/gm,"+DOC").replace(/^-DOC \.\.\./gm,"-DOC").replace(/^=VAL :$/gm,"=VAL :~").replace(/^\+MAP \{\}( ?)/gm,"+MAP$1").replace(/^\+SEQ \[\]( ?)/gm,"+SEQ$1"),s.match(/&1/))){let l=1,a;for(;a=r.match(/&([a-zA-Z]\S*)/);){const c=a[1];r=r.replace(new RegExp(`([&*])${c}`,"g"),`$1${l}`),l++}}if(t==="goyaml"){const l=r.split(`
`),a=s.split(`
`);l.length===a.length&&(s=a.map((h,d)=>l[d]==="+DOC"&&h==="+DOC ---"?"+DOC":h).join(`
`))}return r===s}const Ms="yaml-play-test-results-";function vE(n){try{const e=Ms+n,t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}}function kE(n,e){try{const t=Ms+n;localStorage.setItem(t,JSON.stringify(e))}catch{}}function To(n){try{const e=Ms+n;localStorage.removeItem(e)}catch{}}function wE(n,e,t){return n?n.parserVersion===e&&n.testSuiteVersion===t:!1}function bE(){try{const n=[];for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&t.startsWith(Ms)&&n.push(t)}n.forEach(e=>localStorage.removeItem(e))}catch{}}function SE(){const n=[];try{for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);if(t&&t.startsWith(Ms)){const r=t.substring(Ms.length),s=localStorage.getItem(t);if(s){const l=JSON.parse(s);n.push({parserId:r,cache:l})}}}}catch{}return n}const _1="yaml-play-test-sort";function Ly(){try{const n=localStorage.getItem(_1);if(n)return JSON.parse(n)}catch{}return{column:"id",direction:"asc"}}function OE(n){try{localStorage.setItem(_1,JSON.stringify(n))}catch{}}function ad({isOpen:n,onClose:e,parser:t,onSelectTest:r,forceRerun:s=!1,onCompare:l,onRunAgain:a,onClearCache:c}){const[h,d]=S.useState([]),[p,m]=S.useState([]),[x,k]=S.useState(!1),[b,O]=S.useState(null),[C,P]=S.useState(0),[M,L]=S.useState(Ly),[B,R]=S.useState(!1),[j,D]=S.useState(!1),V=S.useRef(!1),$=S.useRef(!1),U=S.useRef(0),J=S.useRef(null),Q=S.useRef(null),Z=S.useRef(null);S.useEffect(()=>{n&&(L(Ly()),R(!1))},[n]),S.useEffect(()=>{if(!B)return;const H=ae=>{Z.current&&!Z.current.contains(ae.target)&&R(!1)};return document.addEventListener("mousedown",H),()=>document.removeEventListener("mousedown",H)},[B]);const he=S.useCallback((H,ae)=>{const we=[...H];return we.sort((ye,me)=>{let Ne=0;switch(ae.column){case"ok":Ne=(ye.passed?1:0)-(me.passed?1:0);break;case"id":Ne=ye.testId.localeCompare(me.testId);break;case"description":Ne=ye.testName.localeCompare(me.testName);break}return ae.direction==="asc"?Ne:-Ne}),we},[]),K=H=>{const ae={column:H,direction:M.column===H&&M.direction==="asc"?"desc":"asc"};L(ae),OE(ae)},G=H=>M.column!==H?null:M.direction==="asc"?" ":" ",oe=x?p:he(p,M);S.useEffect(()=>{if(!n){$.current=!1,D(!1),Q.current&&(clearInterval(Q.current),Q.current=null);return}if(V.current=!1,O(null),m([]),P(0),d([]),!$.current)return $.current=!0,k(!0),D(!0),U.current=Date.now(),Q.current=window.setInterval(()=>{P(Date.now()-U.current)},10),()=>{V.current=!0,Q.current&&(clearInterval(Q.current),Q.current=null)}},[n,t.id,t.version,s]),S.useEffect(()=>{if(!j||!n)return;D(!1),(async()=>{try{const ae=await L1();if(V.current){k(!1),$.current=!1,Q.current&&(clearInterval(Q.current),Q.current=null);return}d(ae.tests);const we=vE(t.id);if(!s&&wE(we,t.version,ae.version)){const me=we.results.map(Ne=>{const Fe=ae.tests.find(Ve=>Ve.id===Ne.testId);return{testId:Ne.testId,testName:(Fe==null?void 0:Fe.name)||Ne.testId,passed:Ne.passed}});m(me),k(!1),$.current=!1,Q.current&&(clearInterval(Q.current),Q.current=null);return}s&&To(t.id);const ye=[];for(let me=0;me<ae.tests.length&&!V.current;me++){const Ne=ae.tests[me];m(Ke=>[...Ke,{testId:Ne.id,testName:Ne.name,passed:!1,running:!0}]);let Fe;if(t.id==="refparse"){const Ke=await z1(Ne.yaml);Fe={status:Ke.status,output:Ke.output}}else Fe=await B1(t.id,Ne.yaml,t.version);if(V.current)break;let Ve;Ne.error?Ve=Fe.status!==0:Ve=Fe.status===0&&F1(Ne.expected,Fe.output,t.id),m(Ke=>{const Ct=[...Ke];return Ct.length>0&&(Ct[Ct.length-1]={testId:Ne.id,testName:Ne.name,passed:Ve,running:!1}),Ct}),ye.push({testId:Ne.id,passed:Ve}),setTimeout(()=>{J.current&&(J.current.scrollTop=J.current.scrollHeight)},0)}if(!V.current&&ye.length===ae.tests.length){const me=Date.now()-U.current,Ne={parserVersion:t.version,testSuiteVersion:ae.version,results:ye,elapsedTime:me};kE(t.id,Ne)}}catch(ae){O(ae instanceof Error?ae.message:"Unknown error")}finally{Q.current&&(clearInterval(Q.current),Q.current=null),k(!1),$.current=!1,setTimeout(()=>{J.current&&(J.current.scrollTop=0)},0)}})()},[j,n,t.id,t.version,s]),S.useEffect(()=>{if(!n)return;const H=ae=>{ae.key==="Escape"&&(B?R(!1):(V.current=!0,e())),ae.key.toUpperCase()==="C"&&!ae.ctrlKey&&!ae.metaKey&&!ae.altKey&&!x&&l&&(e(),l())};return document.addEventListener("keydown",H),()=>document.removeEventListener("keydown",H)},[n,e,x,l,B]);const W=H=>{V.current=!0,r(H.yaml),e()},re=()=>{V.current=!0,e()};if(!n)return null;const ee=p.filter(H=>H.passed&&!H.running).length,A=p.filter(H=>!H.passed&&!H.running).length,z=h.length,ue=z>0?Math.round(p.length/z*100):0,pe=z>0?(ee/z*100).toFixed(1):"0.0",te=H=>{const ae=Math.floor(H/1e3),we=Math.floor(H%1e3/10);return`${ae}.${we.toString().padStart(2,"0")}s`};return v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:re,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] flex flex-col",onClick:H=>H.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.name," - Test Suite"]}),v.jsx("button",{onClick:re,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center gap-4",children:[v.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["Pass: ",ee]}),v.jsxs("span",{className:"text-red-600 dark:text-red-400",children:["Fail: ",A]}),v.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Total: ",z]}),x?v.jsxs("span",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-2",children:[v.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 dark:border-blue-400 border-t-transparent rounded-full"}),te(C)," (",ue,"%)"]}):C>0?v.jsxs("span",{className:"text-gray-500",children:[pe,"% passing (",te(C),")"]}):v.jsxs("span",{className:"text-gray-500",children:[pe,"% passing (cached)"]}),!x&&(a||c||l)&&v.jsxs("div",{className:"ml-auto relative",ref:Z,children:[v.jsx("button",{onClick:()=>R(!B),className:"text-gray-700 dark:text-white hover:text-gray-900 dark:hover:text-gray-300 p-1",title:"Menu",children:v.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),B&&v.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[l&&v.jsxs("button",{onClick:()=>{R(!1),e(),l()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[v.jsx("span",{className:"underline",children:"C"}),"ompare Test Runs"]}),a&&v.jsx("button",{onClick:()=>{R(!1),a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Run Again"}),c&&v.jsx("button",{onClick:()=>{R(!1),c()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Clear Cache"})]})]})]}),b&&v.jsxs("div",{className:"px-4 py-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 text-sm",children:["Error: ",b]}),p.length>0&&v.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[v.jsxs("span",{className:"w-10 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>K("ok"),children:["OK",G("ok")]}),v.jsxs("span",{className:"w-20 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none font-mono",onClick:()=>K("id"),children:["ID",G("id")]}),v.jsxs("span",{className:"flex-1 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>K("description"),children:["Description",G("description")]})]}),v.jsxs("div",{ref:J,className:"flex-1 overflow-y-auto p-2 space-y-1",children:[oe.map(H=>{const ae=h.find(we=>we.id===H.testId);return v.jsxs("button",{onClick:()=>ae&&W(ae),className:`w-full text-left px-3 py-2 rounded text-sm flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${H.running?"bg-gray-100 dark:bg-gray-700":""}`,children:[v.jsx("span",{className:"w-10 flex-shrink-0 text-center",children:H.running?v.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 dark:border-blue-400 border-t-transparent rounded-full"}):H.passed?v.jsx("span",{className:"text-green-600 dark:text-green-400",children:""}):v.jsx("span",{className:"text-red-600 dark:text-red-400",children:""})}),v.jsx("span",{className:"w-20 text-gray-500 dark:text-gray-400 font-mono flex-shrink-0",children:H.testId}),v.jsx("span",{className:"flex-1 text-gray-700 dark:text-gray-300 truncate",children:H.testName})]},H.testId)}),p.length===0&&!x&&!b&&v.jsx("div",{className:"text-gray-500 text-center py-4",children:"No test results available"}),p.length===0&&x&&v.jsx("div",{className:"text-gray-500 text-center py-4",children:"Loading test suite..."})]})]})})}const Rs=[{id:"refparse",name:"Reference Parser",version:"f003194",repo:"https://github.com/yaml/yaml-reference-parser",language:"JavaScript",isJavaScript:!0},{id:"npmyaml",name:"eemeli/yaml",version:"2.8.1",repo:"https://github.com/eemeli/yaml",language:"JavaScript",isJavaScript:!0},{id:"libyaml",name:"libyaml",version:"0.2.5",repo:"https://github.com/yaml/libyaml",language:"C"},{id:"pyyaml",name:"PyYAML",version:"6.0.3",language:"Python"},{id:"ruamel",name:"ruamel.yaml",version:"0.18.16",language:"Python"},{id:"goyaml",name:"go-yaml",version:"94c6e9d",repo:"https://github.com/pantoniou/yaml",language:"Go"},{id:"libfyaml",name:"libfyaml",version:"0.9",repo:"https://github.com/pantoniou/libfyaml",language:"C"},{id:"rapid",name:"rapidyaml",version:"0.10.0",repo:"https://github.com/biojppm/rapidyaml",language:"C++"},{id:"rustyaml",name:"serde-yaml",version:"0.9.34",repo:"https://github.com/dtolnay/serde-yaml",language:"Rust"},{id:"snake",name:"SnakeYAML",version:"2.5",repo:"https://bitbucket.org/snakeyaml/snakeyaml",language:"Java"},{id:"snakeeng",name:"SnakeYAML Engine",version:"3.0.1",repo:"https://bitbucket.org/snakeyaml/snakeyaml-engine",language:"Java"},{id:"dotnet",name:"YamlDotNet",version:"11.2.1",repo:"https://github.com/aaubry/YamlDotNet",language:"C#"},{id:"luayaml",name:"lyaml",version:"6.2.8",repo:"https://github.com/gvvaughan/lyaml",language:"Lua"},{id:"nimyaml",name:"NimYAML",version:"1.0.0",repo:"https://github.com/flyx/NimYAML",language:"Nim"},{id:"ppyaml",name:"YAML::PP",version:"0.039",language:"Perl"},{id:"hsyaml",name:"HsYAML",version:"0.2.1.1",repo:"https://github.com/haskell-hvr/HsYAML",language:"Haskell"},{id:"refhs",name:"yamlreference",version:"bf471f8",repo:"https://github.com/orenbenkiki/yamlreference",language:"Haskell"}],si=n=>Rs.find(e=>e.id===n),CE=()=>["refparse","pyyaml","libyaml","goyaml"],H1="yaml-play-compare-sort";function PE(n){const e=Math.floor(n/1e3),t=Math.floor(n%1e3/10);return`${e}.${t.toString().padStart(2,"0")}s`}function Iy(){try{const n=localStorage.getItem(H1);if(n)return JSON.parse(n)}catch{}return{column:"percent",direction:"desc"}}function NE(n){try{localStorage.setItem(H1,JSON.stringify(n))}catch{}}function V1({isOpen:n,onClose:e,onSelectParser:t}){const[r,s]=S.useState([]),[l,a]=S.useState(Iy);S.useEffect(()=>{n&&a(Iy())},[n]);const c=S.useCallback((p,m)=>{const x=[...p];return x.sort((k,b)=>{let O=0;switch(m.column){case"parserName":O=k.parserName.localeCompare(b.parserName);break;case"version":O=k.version.localeCompare(b.version);break;case"passed":O=k.passed-b.passed;break;case"failed":O=k.failed-b.failed;break;case"total":O=k.total-b.total;break;case"percent":O=k.percentNum-b.percentNum;break;case"time":O=(k.elapsedTime??0)-(b.elapsedTime??0);break}return m.direction==="asc"?O:-O}),x},[]);S.useEffect(()=>{if(!n)return;const m=SE().map(x=>{const k=si(x.parserId),b=x.cache.results.filter(L=>L.passed).length,O=x.cache.results.length,C=O-b,P=O>0?b/O*100:0,M=P.toFixed(1);return{parserId:x.parserId,parserName:(k==null?void 0:k.name)||x.parserId,passed:b,failed:C,total:O,percent:M,percentNum:P,version:x.cache.parserVersion,elapsedTime:x.cache.elapsedTime}});s(c(m,l))},[n,l,c]);const h=p=>{const m={column:p,direction:l.column===p&&l.direction==="asc"?"desc":"asc"};a(m),NE(m)},d=p=>l.column!==p?null:l.direction==="asc"?" ":" ";return S.useEffect(()=>{if(!n)return;const p=m=>{m.key==="Escape"&&e()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] flex flex-col",onClick:p=>p.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Compare Test Runs"}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[v.jsxs("table",{className:"w-full text-sm",children:[v.jsx("thead",{children:v.jsxs("tr",{className:"text-left text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:[v.jsxs("th",{className:"pb-2 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("parserName"),children:["Parser",d("parserName")]}),v.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("version"),children:["Version",d("version")]}),v.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("passed"),children:["Pass",d("passed")]}),v.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("failed"),children:["Fail",d("failed")]}),v.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("total"),children:["Total",d("total")]}),v.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("percent"),children:["%",d("percent")]}),v.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("time"),children:["Time",d("time")]})]})}),v.jsx("tbody",{children:r.map(p=>v.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>{t(p.parserId),e()},children:[v.jsx("td",{className:"py-2 text-gray-900 dark:text-white",children:p.parserName}),v.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400 font-mono text-xs",children:p.version}),v.jsx("td",{className:"py-2 text-right text-green-600 dark:text-green-400",children:p.passed}),v.jsx("td",{className:"py-2 text-right text-red-600 dark:text-red-400",children:p.failed}),v.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400",children:p.total}),v.jsxs("td",{className:"py-2 text-right text-gray-900 dark:text-white font-semibold",children:[p.percent,"%"]}),v.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400 font-mono text-xs",children:p.elapsedTime!=null?PE(p.elapsedTime):"-"})]},p.parserId))})]}),r.length===0&&v.jsx("div",{className:"text-gray-500 text-center py-8",children:"No cached test results available"})]})]})}):null}function AE(n){return["Failed to fetch","NetworkError","network error","ERR_CONNECTION_REFUSED","ECONNREFUSED","fetch failed","Load failed","HTTP 500","HTTP 502","HTTP 503","HTTP 504","Internal Server Error"].some(t=>n.toLowerCase().includes(t.toLowerCase()))}function rf({parser:n,result:e,onClose:t,onAddPane:r,isDraggable:s=!0,onSetYamlInput:l,showTestSuite:a=!0,isSelected:c=!1,onToggleSelection:h}){const[d,p]=S.useState(!1),[m,x]=S.useState(!1),[k,b]=S.useState(!1),[O,C]=S.useState(0),[P,M]=S.useState(!1),[L,B]=S.useState(null),[R,j]=S.useState(!1),[D,V]=S.useState(0),$=S.useCallback(()=>{To(n.id),b(!0),C(G=>G+1)},[n.id]),U=S.useCallback(()=>{To(n.id),x(!1)},[n.id]),J=S.useCallback(()=>{L&&(To(L),j(!0),V(G=>G+1))},[L]),Q=S.useCallback(()=>{L&&(To(L),B(null))},[L]),Z=n.id!=="refparse",he=Z&&(e==null?void 0:e.versionMismatch),K=Z&&!he&&(e==null?void 0:e.status)===-1&&(e==null?void 0:e.output)&&AE(e.output);return v.jsxs("div",{className:"flex flex-col h-full min-h-[200px] bg-gray-100 dark:bg-gray-900",children:[v.jsx(hE,{parser:n,agrees:e==null?void 0:e.agrees,loading:e==null?void 0:e.loading,onClose:t,onAddPane:r,isDraggable:s,onInfoClick:()=>p(!0),onRunTestSuite:()=>{b(!1),x(!0)},showTestSuite:a,output:e==null?void 0:e.output,parseSuccess:e?e.status===0:void 0,isSelected:c,onToggleSelection:h}),v.jsx(fE,{isOpen:d,onClose:()=>p(!1),parser:n}),v.jsx(ad,{isOpen:m,onClose:()=>x(!1),parser:n,onSelectTest:G=>l==null?void 0:l(G),forceRerun:k,onCompare:()=>M(!0),onRunAgain:$,onClearCache:U},O),v.jsx(V1,{isOpen:P,onClose:()=>M(!1),onSelectParser:G=>B(G)}),L&&si(L)&&v.jsx(ad,{isOpen:!0,onClose:()=>{B(null),j(!1)},parser:si(L),onSelectTest:G=>l==null?void 0:l(G),forceRerun:R,onCompare:()=>{B(null),M(!0)},onRunAgain:J,onClearCache:Q},`view-${L}-${D}`),v.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-900 overflow-auto",children:e!=null&&e.error?v.jsxs("pre",{className:"p-3 text-red-600 dark:text-red-400 text-sm font-mono whitespace-pre-wrap",children:["Error: ",e.error]}):he?v.jsxs("div",{className:"p-3 text-sm",children:[v.jsxs("p",{className:"text-yellow-600 dark:text-yellow-400 mb-2",children:["Wrong sandbox version (",e.versionMismatch.found,") found. Requires ",e.versionMismatch.required,"."]}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Click the "',v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Setup"}),'" button for instructions.']})]}):K?v.jsxs("div",{className:"p-3 text-sm",children:[v.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:"Can't connect to a local YAML parser sandbox server."}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Click the "',v.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Setup"}),'" button for instructions.']})]}):e!=null&&e.loading?v.jsx("div",{className:"p-3 text-gray-500 text-sm",children:"Running parser..."}):v.jsx("pre",{className:"p-3 text-gray-800 dark:text-gray-200 text-sm font-mono whitespace-pre-wrap",children:(e==null?void 0:e.output)||"No output yet"})})]})}function EE({total:n,disagreeing:e,disagreeingNames:t,loading:r,sandboxAvailable:s=!0,onSandboxSetup:l}){if(!s)return v.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2 flex items-center justify-between",children:[v.jsxs("span",{className:"text-gray-900 dark:text-white font-semibold",children:["Can't connect to sandbox server. Click"," ",v.jsx("button",{onClick:l,className:"text-yellow-600 dark:text-yellow-400 underline hover:no-underline",children:"Setup"}),"."]}),v.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",title:"View on GitHub",children:v.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.115 2.504.337 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})})})]});if(r)return v.jsx("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2",children:v.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-semibold",children:"Running parsers..."})});const a=e===0;return v.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2 flex items-center justify-between",children:[a?v.jsxs("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:["All ",n," parsers agree with the Reference Parser"]}):v.jsxs("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:[e,"/",n," parsers disagree with the Reference Parser: ",t.join(", ")]}),v.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",title:"View on GitHub",children:v.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.115 2.504.337 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})})})]})}const ME=[{id:"light",label:"Light"},{id:"dark",label:"Dark"}],RE=[{id:"monaco",label:"Monaco"},{id:"codemirror",label:"CodeMirror"}];function TE({isOpen:n,onClose:e,colorScheme:t,onColorSchemeChange:r,editorType:s,onEditorTypeChange:l}){return S.useEffect(()=>{if(!n)return;const a=c=>{c.key==="Escape"&&e()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full mx-4",onClick:a=>a.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Options"}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsxs("div",{className:"p-4",children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Editor"}),v.jsx("div",{className:"flex gap-2 mb-4",children:RE.map(a=>v.jsx("button",{onClick:()=>l(a.id),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${s===a.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:a.label},a.id))}),v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Mode"}),v.jsx("div",{className:"flex gap-2",children:ME.map(a=>v.jsx("button",{onClick:()=>r(a.id),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${t===a.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:a.label},a.id))})]})]})}):null}const Wd=dE(),By=`docker run --rm -d --name yaml-play -p 7481:7481 yamlio/yaml-play-sandbox:${Wd} 7481`,zy=`docker run --rm -d --name yaml-play --network host yamlio/yaml-play-sandbox:${Wd} 7481`;function DE({isOpen:n,onClose:e}){const[t,r]=S.useState(!1),[s,l]=S.useState(!1),a=async(c,h)=>{try{await navigator.clipboard.writeText(c),h(!0),setTimeout(()=>h(!1),2e3)}catch{const d=document.createElement("textarea");d.value=c,document.body.appendChild(d),d.select(),document.execCommand("copy"),document.body.removeChild(d),h(!0),setTimeout(()=>h(!1),2e3)}};return S.useEffect(()=>{if(!n)return;const c=h=>{h.key==="Escape"&&e()};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-hidden",onClick:c=>c.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Sandbox Setup"}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh] space-y-6",children:[v.jsxs("section",{children:[v.jsxs("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:["Start the Sandbox Server (version ",Wd,")"]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"These parsers run in a Docker container that you need to start on your machine. If you see connection errors, start the sandbox by running this command in a terminal:"}),v.jsxs("div",{className:"flex gap-2 items-start",children:[v.jsx("pre",{className:"flex-1 bg-gray-100 dark:bg-gray-900 p-3 rounded text-sm text-green-700 dark:text-green-400 font-mono overflow-x-auto",children:By}),v.jsx("button",{onClick:()=>a(By,r),className:"flex-shrink-0 p-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",title:t?"Copied!":"Copy to clipboard",children:t?v.jsx("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),v.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-3 mb-2",children:"The Docker command above does not work for some users. If it does not work for you then try this command instead:"}),v.jsxs("div",{className:"flex gap-2 items-start",children:[v.jsx("pre",{className:"flex-1 bg-gray-100 dark:bg-gray-900 p-3 rounded text-sm text-green-700 dark:text-green-400 font-mono overflow-x-auto",children:zy}),v.jsx("button",{onClick:()=>a(zy,l),className:"flex-shrink-0 p-2 text-gray-700 dark:text-gray-300 hover:text-gray-900 dark:hover:text-white transition-colors",title:s?"Copied!":"Copy to clipboard",children:s?v.jsx("svg",{className:"w-5 h-5 text-green-600 dark:text-green-400",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):v.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})})]}),v.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-3",children:"Note: If a different version of the sandbox server Docker container is already running, you'll need to kill that first."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"HTTPS Certificate (if needed)"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"If you are still getting connection errors, you may need to accept the unsigned HTTPS certificate:"}),v.jsxs("ol",{className:"text-gray-600 dark:text-gray-300 text-sm list-decimal list-inside space-y-1",children:[v.jsxs("li",{children:["Click here:"," ",v.jsx("a",{href:"https://localhost:7481",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 underline",children:"https://localhost:7481"})," ","(opens in a new tab)"]}),v.jsx("li",{children:"Accept the security warning / proceed anyway"}),v.jsx("li",{children:"Return to this page and refresh"})]})]})]})]})}):null}function jE({onHelp:n,onOptions:e,onAllPanes:t,onUnselectAll:r,onTestFormat:s,onKeyboardShortcuts:l,onSandboxSetup:a,onAddTokens:c,onFactoryReset:h,hasTokens:d}){const[p,m]=S.useState(!1),x=S.useRef(null);return S.useEffect(()=>{if(!p)return;const k=O=>{x.current&&!x.current.contains(O.target)&&m(!1)},b=O=>{O.key==="Escape"&&m(!1)};return document.addEventListener("mousedown",k),document.addEventListener("keydown",b),()=>{document.removeEventListener("mousedown",k),document.removeEventListener("keydown",b)}},[p]),v.jsxs("div",{className:"relative",ref:x,children:[v.jsx("button",{onClick:()=>m(!p),className:"text-gray-700 dark:text-white hover:text-gray-900 dark:hover:text-gray-300 p-2",title:"Menu",children:v.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),p&&v.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[v.jsxs("button",{onClick:()=>{m(!1),n()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[v.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"H"}),"elp"]}),v.jsxs("button",{onClick:()=>{m(!1),l()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[v.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"K"}),"eyboard Shortcuts"]}),v.jsxs("button",{onClick:()=>{m(!1),e()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[v.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"O"}),"ptions"]}),v.jsxs("button",{onClick:()=>{m(!1),t()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[v.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"A"}),"ll Panes"]}),v.jsxs("button",{onClick:()=>{m(!1),r()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[v.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"U"}),"nselect All"]}),d&&v.jsxs("button",{onClick:()=>{m(!1),s()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[v.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"T"}),"est Suite PR"]}),v.jsxs("button",{onClick:()=>{m(!1),c()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[v.jsx("span",{className:"font-bold text-blue-600 dark:text-blue-400",children:"G"}),"itHub Setup"]}),v.jsx("button",{onClick:()=>{m(!1),a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Sandbox Setup"}),v.jsx("button",{onClick:()=>{m(!1),h()},className:"w-full text-left px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Factory Reset"})]})]})}function LE({isOpen:n,onClose:e}){return S.useEffect(()=>{if(!n)return;const t=r=>{r.key==="Escape"&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[85vh] overflow-hidden flex flex-col",onClick:t=>t.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Help"}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsxs("div",{className:"p-4 space-y-5 overflow-y-auto",children:[v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Overview"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["The ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"YAML Parser Playground"})," lets you compare how 17+ different YAML parser implementations handle the same input. Enter YAML in the input editor on the left, and see the parsed output from each parser in the panes on the right."]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Understanding the Colors"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"Each output pane has a colored header showing the parse status:"}),v.jsxs("div",{className:"space-y-2 text-sm",children:[v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"inline-block w-4 h-4 bg-green-300 border-4 border-green-300 rounded flex-shrink-0 mt-0.5"}),v.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Green:"})," The YAML parsed successfully (no errors)"]})]}),v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"inline-block w-4 h-4 bg-red-300 border-4 border-red-300 rounded flex-shrink-0 mt-0.5"}),v.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Red:"})," The parser returned an error"]})]}),v.jsxs("div",{className:"flex items-start gap-2",children:[v.jsx("span",{className:"inline-block w-4 h-4 bg-green-300 border-4 border-red-600 rounded flex-shrink-0 mt-0.5"}),v.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Red border:"})," Output differs from the Reference Parser"]})]})]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mt-2",children:"A red border indicates disagreement  either the output differs from the Reference Parser, or one parser succeeded while the other failed."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"The Reference Parser"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["The ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Reference Parser"})," pane shows output from the official YAML Reference Parser, which aims to implement the YAML 1.2 specification exactly. All other parsers are compared against it. The Reference Parser runs directly in your browser and doesn't require the sandbox."]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Output Format"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:['The output is a DSL (domain-specific language) representing YAML parser "events"  the internal data structures parsers create when processing YAML. This is the same format used by the'," ",v.jsx("a",{href:"https://github.com/yaml/yaml-test-suite",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"YAML Test Suite"}),'. A "parser" is just one stage in a YAML "loader"  it converts text to events, while later stages convert events to native data structures.']})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Running Other Parsers"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Most parsers (Python, Go, Ruby, Java, etc.) require a local Docker sandbox to run. Click the ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Setup"})," button in the header for instructions on starting the sandbox container. Without it, only the JavaScript-based Reference Parser will work."]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"YAML Test Suite"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:["Use the ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Search Test Suite"})," feature (in the input pane menu) to load test cases from the official YAML Test Suite. You can also run the entire test suite against any parser by clicking its hamburger menu and selecting ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Test Suite"}),"."]}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm mt-3 mb-2",children:[v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Contributing Tests:"})," You can submit new test cases directly to the yaml-test-suite repository. Press"," ",v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"T"})," ","or use the menu to open ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Test Format"}),". Choose between ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Manual Mode"})," (fill in test name and tags yourself) or use ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"GitHub Models"})," to AI-generate these fields. You'll select applicable tags from a list, review similar tests to avoid duplicates, and create a pull request with one click."]}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:v.jsxs("em",{children:["Note: Test submission requires a GitHub token for PR creation. Optionally, select a model from"," ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"API Tokens"})," in the menu to enable AI-powered test naming via GitHub Models (uses your GitHub token, no additional API key needed)."]})})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Sharing URLs"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Your YAML input is automatically encoded in the URL. Copy and share the URL to let others see exactly what you're working on  great for bug reports and discussions about YAML edge cases."})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Keyboard Shortcuts"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Press ",v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"K"})," to see all keyboard shortcuts. Highlights include:"]}),v.jsxs("ul",{className:"text-gray-600 dark:text-gray-300 text-sm mt-2 space-y-1 list-disc list-inside",children:[v.jsxs("li",{children:[v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"I"}),"  Focus the input editor"]}),v.jsxs("li",{children:[v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"A"})," / ",v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"N"}),"  Show all / no panes"]}),v.jsxs("li",{children:[v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"D"}),"  Show only differing panes"]}),v.jsxs("li",{children:[v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"O"})," / ",v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"P"}),"  Options / Parser Panes"]})]})]}),v.jsxs("section",{children:[v.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Organizing Panes"}),v.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Drag parser panes by their headers to reorder them. Use"," ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Parser Panes"})," (press P) to show/hide specific parsers, or ",v.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Options"})," (press O) to change the editor type or color scheme."]})]})]})]})}):null}function IE({isOpen:n,onClose:e}){return S.useEffect(()=>{if(!n)return;const t=r=>{r.key==="Escape"&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4",onClick:t=>t.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Keyboard Shortcuts"}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsx("div",{className:"p-4",children:v.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-sm",children:[v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"Esc"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Unfocus input pane / Close modal"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"I"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Focus input pane"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"\\\\\\"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Clear input and focus"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"A"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show all panes"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"N"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Hide all panes"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"D"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show differing panes"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"S"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show your selected panes"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"U"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Unselect all (clear all checkboxes)"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"C"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Compare Test Runs"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"O"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Open Options"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"H"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show help"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"K"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show keyboard shortcuts"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"G"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"GitHub Setup"}),v.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"T"}),v.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Test Suite PR (submit new test)"})]})})]})}):null}const Qd="github-token",$d="github-user",Fy="Ov23liRrgge8JKovPTxm";function BE(n){localStorage.setItem(Qd,n)}function ms(){return localStorage.getItem(Qd)}function _y(){localStorage.removeItem(Qd),localStorage.removeItem($d)}function Hy(n){localStorage.setItem($d,JSON.stringify(n))}function zE(){const n=localStorage.getItem($d);if(!n)return null;try{return JSON.parse(n)}catch{return null}}async function Vy(n){const e=await fetch("https://api.github.com/user",{headers:{Authorization:`Bearer ${n}`,Accept:"application/vnd.github.v3+json"}});if(!e.ok)throw new Error(`Failed to fetch user info: ${e.statusText}`);const t=await e.json();return{login:t.login,avatar_url:t.avatar_url,name:t.name}}function W1(n=640){const[e,t]=S.useState(typeof window<"u"?window.innerWidth<n:!1);return S.useEffect(()=>{const r=()=>t(window.innerWidth<n);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[n]),e}function FE(){const[n,e]=S.useState(typeof window<"u"?window.innerWidth>window.innerHeight:!1);return S.useEffect(()=>{const t=()=>e(window.innerWidth>window.innerHeight);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n}function _E(n,e,t,r,s,l){let a=`---
`;if(a+=`- name: ${n}
`,e){const c=e.replace(/^https?:\/\/github\.com\//,"@");a+=`  from: '${c}'
`}return a+=`  tags: ${t.join(" ")}
`,l&&(a+=`  fail: true
`),a+=`  yaml: |
`,r.split(`
`).forEach(c=>{a+=`    ${c}
`}),s&&(a+=`  tree: |
`,s.split(`
`).forEach(c=>{a+=`    ${c}
`})),a}function Wy(n){try{const e=n.match(/^- name: +(\S.*)$/m),t=n.match(/^  from: +(\S.*)$/m),r=n.match(/^  tags: +(\S.*)$/m);let s=[];r&&r[1]&&(s=r[1].trim().split(/\s+/).filter(a=>a&&/^[a-zA-Z0-9.-]+$/.test(a)));let l=t?t[1].trim():"";return l.startsWith("'")&&l.endsWith("'")&&(l=l.slice(1,-1)),{name:e?e[1].trim():"",from:l,tags:s}}catch{return null}}function HE({isOpen:n,onClose:e,yaml:t,events:r,isError:s,onConfigureModel:l}){const a=W1(640),[c,h]=S.useState("generating"),[d,p]=S.useState(""),[m,x]=S.useState(""),[k,b]=S.useState(""),[O,C]=S.useState([]),[P,M]=S.useState(""),[L,B]=S.useState(""),[R,j]=S.useState([]),[D,V]=S.useState([]),[$,U]=S.useState(""),[J,Q]=S.useState([]),[Z,he]=S.useState(!1),[K,G]=S.useState(""),[oe,W]=S.useState(""),[re,ee]=S.useState(!1),A=async()=>{ee(!0);try{const te=localStorage.getItem("github-model")||"",H=ms()||"",ae=Wy(k),we=(ae==null?void 0:ae.name)||m,ye=await Ty({yaml:t,events:r,isError:s,model:te,githubToken:H,testName:we,currentTags:D});C(ye.similarTests||[])}catch(te){console.error("Failed to regenerate similar tests:",te)}finally{ee(!1)}};S.useEffect(()=>{if(!n)return;h("generating"),p(""),x(""),b(""),C([]),M(""),B(""),j([]),V([]),U(""),Q([]),he(!1),G(""),(async()=>{try{const H=localStorage.getItem("github-model")||"";let ae=localStorage.getItem("github-model-name")||"";if(H&&!ae){const Ne=ms()||"";if(Ne)try{const Ve=(await Vd(Ne)).find(Ke=>Ke.id===H);Ve&&(ae=`${Ve.publisher}/${Ve.name}`,localStorage.setItem("github-model-name",ae))}catch(Fe){console.error("Failed to fetch model name:",Fe)}}G(ae);const we=ms()||"",ye=await Ty({yaml:t,events:r,isError:s,model:H,githubToken:we});p(ye.testId),x(ye.testName||""),C(ye.similarTests||[]),j(ye.availableTags||[]),V(ye.tags||[]),W(ye.llmError||""),ye.githubUsername&&U(`https://github.com/${ye.githubUsername}`);const me=_E(ye.testName||"",ye.githubUsername?`https://github.com/${ye.githubUsername}`:"",ye.tags||[],t,r,s);b(me),h("preview")}catch(H){B(H instanceof Error?H.message:"Failed to generate preview"),h("error")}})()},[n,t,r,s]);const z=te=>{b(te);const H=Wy(te);x((H==null?void 0:H.name)||""),U((H==null?void 0:H.from)||""),V((H==null?void 0:H.tags)||[])},ue=(te,H)=>{const ae=H?[...D,te]:D.filter(me=>me!==te);V(ae);const we=`  tags: ${ae.join(" ")}`,ye=/^  tags:.*$/m;if(k.match(ye))b(k.replace(ye,we));else{const me=/^(  from:.*$)/m,Ne=/^(  name:.*$)/m;k.match(me)?b(k.replace(me,`$1
${we}`)):k.match(Ne)&&b(k.replace(Ne,`$1
${we}`))}};S.useEffect(()=>{const te=setTimeout(()=>{if(c==="preview"){const H=D.filter(ae=>!R.includes(ae));Q(H)}},1e3);return()=>clearTimeout(te)},[D,R,c]);const pe=async()=>{const te=ms();if(!te){B("No GitHub token found"),h("error");return}if(!m.trim()){B("Test name is required"),h("error");return}if(D.length===0){B("At least one tag must be selected"),h("error");return}h("submitting");try{const H=await gE({token:te,testId:d,testName:m,yaml:t,events:r,isError:s,similarTests:O,tags:D,from:$});H.success&&H.prUrl?(M(H.prUrl),h("success")):(B(H.error||"Failed to create PR"),h("error"))}catch(H){B(H instanceof Error?H.message:"Failed to submit PR"),h("error")}};return S.useEffect(()=>{if(!n)return;const te=H=>{H.key==="Escape"&&e()};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 h-[90vh] overflow-hidden flex flex-col",onClick:te=>te.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[v.jsxs("div",{className:"flex items-center gap-3",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Submit to yaml-test-suite"}),K&&l&&v.jsxs("button",{onClick:l,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:["using ",K]}),l&&!K&&v.jsx("button",{onClick:l,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline",children:"Configure AI model"})]}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsxs("div",{className:"flex-1 p-4 overflow-y-auto space-y-4",children:[c==="generating"&&v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Generating new test ID, name and tags..."})]}),c==="preview"&&v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-600 dark:text-gray-400",children:[v.jsx("span",{children:"Test ID:"}),v.jsx("span",{className:"font-mono font-bold text-gray-900 dark:text-white",children:d})]}),oe&&v.jsxs("div",{className:"bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 rounded p-3",children:[v.jsxs("p",{className:"text-xs text-red-800 dark:text-red-200 mb-2",children:[v.jsx("strong",{children:"AI Error:"})," ",oe.split(/(\(https?:\/\/[^)]+\))/).map((te,H)=>{const ae=te.match(/\((https?:\/\/[^)]+)\)/);return ae?v.jsxs("span",{children:["(",v.jsx("a",{href:ae[1],target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:ae[1]}),")"]},H):te})]}),v.jsxs("ul",{className:"text-xs text-red-700 dark:text-red-300 list-disc list-inside space-y-1",children:[v.jsx("li",{children:"Try 'docker logs yaml-play' or the browser console for more error info."}),v.jsx("li",{children:"You might try a different model or just try this one again."}),v.jsx("li",{children:"Otherwise, just fill in the test name and tags manually."})]})]}),!oe&&!localStorage.getItem("github-model")&&l&&v.jsx("div",{className:"bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 rounded p-3",children:v.jsxs("p",{className:"text-xs text-blue-800 dark:text-blue-200",children:[v.jsx("strong",{children:"Tip:"})," Enable AI-assisted test naming by"," ",v.jsx("button",{onClick:l,className:"text-blue-600 dark:text-blue-400 hover:underline font-semibold",children:"configuring a GitHub model"}),". Otherwise, fill in the test name and tags manually."]})}),v.jsx("div",{className:"h-[25rem]",children:v.jsx("textarea",{id:"preview-edit",value:k,onChange:te=>z(te.target.value),className:"w-full h-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-gray-800 dark:text-gray-200 font-mono text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 whitespace-pre overflow-x-auto resize-none"})}),v.jsxs("div",{className:"relative",children:[v.jsxs("label",{className:"block text-sm font-medium text-gray-700 dark:text-gray-300 mb-1",children:["Tags ",D.length===0&&v.jsx("span",{className:"text-red-600",children:"*"}),D.length>0&&v.jsxs("span",{className:"text-gray-500 font-normal ml-2",children:["(",D.length," selected)"]})]}),v.jsxs("button",{type:"button",onClick:()=>he(!Z),className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-left text-gray-900 dark:text-white text-sm focus:outline-none focus:ring-2 focus:ring-blue-500 flex items-center justify-between",children:[v.jsx("span",{className:"truncate",children:D.length>0?D.join(", "):"Select tags..."}),v.jsx("svg",{className:`w-4 h-4 transition-transform ${Z?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),Z&&v.jsx("div",{className:"absolute z-10 w-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded shadow-lg max-h-48 overflow-y-auto",children:R.map(te=>v.jsxs("label",{className:"flex items-center px-3 py-1.5 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",children:[v.jsx("input",{type:"checkbox",checked:D.includes(te),onChange:H=>ue(te,H.target.checked),className:"rounded border-gray-300 dark:border-gray-600 text-blue-600 focus:ring-blue-500 mr-2"}),v.jsx("span",{className:"text-sm text-gray-700 dark:text-gray-300",children:te})]},te))})]}),O.length>0&&v.jsxs("div",{children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("label",{className:"text-sm font-medium text-gray-700 dark:text-gray-300",children:"Potentially Similar Existing Tests"}),v.jsx("button",{onClick:A,disabled:re,className:"text-xs text-blue-600 dark:text-blue-400 hover:underline disabled:opacity-50 disabled:cursor-not-allowed",children:re?"Searching...":"Search Again"})]}),v.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-800 rounded p-3 space-y-2",children:[v.jsx("p",{className:"text-xs text-yellow-800 dark:text-yellow-200 mb-2",children:"The following tests may already cover similar features:"}),v.jsx("ul",{className:"space-y-1.5",children:O.map(te=>v.jsx("li",{children:v.jsxs("a",{href:te.url,target:"_blank",rel:"noopener noreferrer",className:"text-sm text-blue-600 dark:text-blue-400 hover:underline font-mono flex items-start",children:[v.jsxs("span",{className:"font-bold mr-2",children:[te.id,":"]}),v.jsx("span",{className:"flex-1",children:te.name})]})},te.id))})]})]})]}),c==="submitting"&&v.jsxs("div",{className:"text-center py-8",children:[v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),v.jsx("p",{className:"text-gray-600 dark:text-gray-300",children:"Creating pull request..."})]}),c==="success"&&v.jsxs("div",{className:"text-center py-8 space-y-4",children:[v.jsx("div",{className:"text-green-600 dark:text-green-400 text-5xl",children:""}),v.jsx("p",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"PR Created Successfully!"}),v.jsx("a",{href:P,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:P})]}),c==="error"&&v.jsxs("div",{className:"space-y-4",children:[v.jsxs("div",{className:"p-4 bg-red-100 dark:bg-red-900 text-red-800 dark:text-red-200 rounded",children:[v.jsx("p",{className:"font-semibold mb-2",children:"Error"}),v.jsx("p",{className:"text-sm",children:L})]}),v.jsx("button",{onClick:e,className:"w-full px-4 py-2 bg-gray-600 hover:bg-gray-500 text-white rounded transition-colors",children:"Close"})]})]}),c==="preview"&&!a&&v.jsxs("div",{className:"px-4 py-3 border-t border-gray-200 dark:border-gray-700 flex-shrink-0",children:[(!m.trim()||D.length===0||J.length>0)&&v.jsx("p",{className:"text-xs text-red-600 dark:text-red-400 text-center mb-2",children:J.length>0?`Invalid tags: ${J.join(", ")}`:"Please fill in test name and select at least one tag"}),v.jsx("button",{onClick:pe,disabled:!m.trim()||D.length===0||J.length>0,className:"w-full px-4 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-gray-400 disabled:cursor-not-allowed text-white rounded transition-colors",children:"Submit PR"})]})]})}):null}function VE({auth:n}){const[e,t]=S.useState(null),[r,s]=S.useState(!1),l=async()=>{const c=await n.login();c&&t(c)};S.useEffect(()=>{e&&!n.isAuthenticated&&n.waitForAuth(e.deviceCode,e.interval)},[e,n]);const a=async()=>{e&&(await navigator.clipboard.writeText(e.userCode),s(!0),setTimeout(()=>s(!1),2e3))};return!n.isAuthenticated&&!n.isLoading&&!e?v.jsxs("div",{className:"space-y-3",children:[v.jsx("div",{className:"flex items-center justify-between",children:v.jsx("span",{className:"text-md font-semibold text-gray-900 dark:text-white",children:"GitHub Authentication"})}),v.jsxs("div",{children:[v.jsxs("button",{onClick:l,className:"w-full px-4 py-3 bg-gray-900 dark:bg-gray-700 hover:bg-gray-800 dark:hover:bg-gray-600 text-white rounded transition-colors flex items-center justify-center gap-2",children:[v.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:v.jsx("path",{fillRule:"evenodd",d:"M10 0C4.477 0 0 4.477 0 10c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.603-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.463-1.11-1.463-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0110 4.836c.85.004 1.705.114 2.504.336 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C17.137 18.165 20 14.418 20 10c0-5.523-4.477-10-10-10z",clipRule:"evenodd"})}),"Sign in with GitHub"]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-2",children:"Enables PR submission to yaml-test-suite. Uses OAuth Device Flow - no password required."})]}),n.error&&v.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:n.error})]}):e&&!n.isAuthenticated?v.jsxs("div",{className:"space-y-3",children:[v.jsx("div",{className:"flex items-center justify-between",children:v.jsx("span",{className:"text-md font-semibold text-gray-900 dark:text-white",children:"Complete GitHub Authorization"})}),v.jsxs("div",{className:"bg-yellow-50 dark:bg-yellow-900/20 border border-yellow-200 dark:border-yellow-700 rounded p-4 space-y-3",children:[v.jsx("p",{className:"text-sm text-gray-900 dark:text-white font-medium",children:'Copy this code, then click "Open GitHhub":'}),v.jsxs("div",{className:"flex items-center gap-2",children:[v.jsx("code",{className:"flex-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-600 rounded px-4 py-3 text-2xl font-mono font-bold text-center text-gray-900 dark:text-white tracking-wider",children:e.userCode}),v.jsx("button",{onClick:a,className:"px-3 py-3 bg-blue-600 hover:bg-blue-500 text-white rounded transition-colors",title:"Copy code",children:r?"":""})]}),v.jsx("a",{href:e.verificationUri,target:"_blank",rel:"noopener noreferrer",className:"block w-full px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white text-center rounded transition-colors",children:"Open GitHub "}),v.jsx("p",{className:"text-xs text-gray-600 dark:text-gray-300",children:"Waiting for authorization... This page will update automatically."})]}),n.error&&v.jsx("p",{className:"text-sm text-red-600 dark:text-red-400",children:n.error}),v.jsx("button",{onClick:()=>t(null),className:"text-sm text-gray-600 dark:text-gray-400 hover:text-gray-800 dark:hover:text-gray-200",children:"Cancel"})]}):n.isAuthenticated&&n.user?v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("span",{className:"text-md font-semibold text-gray-900 dark:text-white",children:"GitHub Authentication"}),v.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:" Signed in"})]}),v.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 dark:bg-gray-900 rounded border border-gray-200 dark:border-gray-700",children:[v.jsx("img",{src:n.user.avatar_url,alt:n.user.login,className:"w-10 h-10 rounded-full"}),v.jsxs("div",{className:"flex-1",children:[v.jsx("p",{className:"text-sm font-medium text-gray-900 dark:text-white",children:n.user.name||n.user.login}),v.jsxs("p",{className:"text-xs text-gray-500 dark:text-gray-400",children:["@",n.user.login]})]}),v.jsx("button",{onClick:n.logout,className:"px-3 py-1.5 text-sm bg-red-600 hover:bg-red-500 text-white rounded transition-colors",children:"Sign out"})]})]}):v.jsxs("div",{className:"space-y-3",children:[v.jsx("div",{className:"flex items-center justify-between",children:v.jsx("span",{className:"text-md font-semibold text-gray-900 dark:text-white",children:"GitHub Authentication"})}),v.jsx("div",{className:"flex items-center justify-center py-8",children:v.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600"})})]})}const sf="github-model";function WE({isOpen:n,onClose:e,githubAuth:t}){const[r,s]=S.useState(""),[l,a]=S.useState([]),[c,h]=S.useState(!1);S.useEffect(()=>{if(!n)return;const p=localStorage.getItem(sf)||"";s(p);const m=ms();m&&(h(!0),Vd(m).then(x=>{if(a(x),h(!1),!p&&x.length>0){const k=x.find(b=>b.name==="Llama-3.3-70B-Instruct");k&&d(k.id)}}).catch(()=>{h(!1)}))},[n]);const d=p=>{if(s(p),p){localStorage.setItem(sf,p);const m=l.find(x=>x.id===p);m&&localStorage.setItem("github-model-name",`${m.publisher}/${m.name}`)}else localStorage.removeItem(sf),localStorage.removeItem("github-model-name")};return S.useEffect(()=>{if(!n)return;const p=m=>{m.key==="Escape"&&e()};return document.addEventListener("keydown",p),()=>document.removeEventListener("keydown",p)},[n,e]),n?v.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:v.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",onClick:p=>p.stopPropagation(),children:[v.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[v.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"GitHub Setup"}),v.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),v.jsx("div",{className:"px-4 pt-4 pb-2",children:v.jsxs("p",{className:"text-sm text-gray-700 dark:text-gray-300",children:["Login to GitHub with oauth if you want to submit new"," ",v.jsx("a",{href:"https://github.com/yaml/yaml-test-suite",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline font-semibold",children:"YAML Test Suite"})," ","test cases. This will provide an internal token that allows you to submit pull requests with a single click. You can optionally select an AI model to suggest test names, tags and more via"," ",v.jsx("a",{href:"https://github.com/marketplace/models",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline font-semibold",children:"GitHub Models"}),". All settings are stored locally in your browser only."]})}),v.jsxs("div",{className:"p-4 space-y-6",children:[v.jsx(VE,{auth:t}),v.jsx("div",{className:"border-t border-gray-200 dark:border-gray-700"}),v.jsxs("div",{className:"space-y-3",children:[v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsx("a",{href:"https://github.com/marketplace/models",target:"_blank",rel:"noopener noreferrer",className:"text-md font-semibold text-blue-600 dark:text-blue-400 hover:underline",children:"GitHub Models (AI Features)"}),r&&v.jsx("span",{className:"text-xs text-green-600 dark:text-green-400",children:" Selected"})]}),v.jsxs("div",{children:[v.jsxs("select",{id:"github-model",value:r,onChange:p=>d(p.target.value),disabled:c||!t.isAuthenticated,className:"w-full px-3 py-2 border border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-900 text-gray-900 dark:text-white focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[v.jsx("option",{value:"",children:"None (Manual Mode)"}),c&&v.jsx("option",{disabled:!0,children:"Loading models..."}),!c&&l.map(p=>{const x=["OpenAI GPT-4o mini","Llama-3.3-70B-Instruct","DeepSeek-R1"].includes(p.name);return v.jsxs("option",{value:p.id,children:[p.publisher,"/",p.name,x?" (free)":""]},p.id)})]}),v.jsx("p",{className:"text-xs text-gray-500 dark:text-gray-400 mt-1",children:t.isAuthenticated?"Select a model for AI-powered test naming, or choose Manual Mode to fill in fields yourself. Uses your GitHub token.":"Authenticate with GitHub above to access AI models."})]})]})]})]})}):null}const of="yaml-play-layout";function Qy(){const n=CE();return{panes:Rs.map(t=>{const r=n.indexOf(t.id);return{id:t.id,visible:r>=0,order:r>=0?r:1e3+Rs.findIndex(s=>s.id===t.id)}}),selectedPaneIds:n}}function QE(){const[n,e]=S.useState(()=>{try{const C=localStorage.getItem(of);if(C){const P=JSON.parse(C),M=new Set(P.panes.map(B=>B.id)),L=Rs.filter(B=>!M.has(B.id)).map((B,R)=>({id:B.id,visible:!1,order:P.panes.length+R}));return{...P,panes:[...P.panes,...L]}}}catch{}return Qy()});S.useEffect(()=>{localStorage.setItem(of,JSON.stringify(n))},[n]);const t=S.useCallback((C,P)=>{e(M=>{let L;if(P){const B=Math.max(...M.panes.map(R=>R.order));L=M.panes.map(R=>R.id===C?{...R,visible:P,order:B+1}:R)}else L=M.panes.map(B=>B.id===C?{...B,visible:P}:B);return{...M,panes:L}})},[]),r=S.useCallback(C=>{e(P=>{const M=new Set(P.selectedPaneIds??[]);return M.has(C)?M.delete(C):M.add(C),{...P,selectedPaneIds:Array.from(M)}})},[]),s=S.useCallback((C,P)=>{e(M=>{const L=[...M.panes],B=L.findIndex(D=>D.id===C),R=L.findIndex(D=>D.id===P);if(B===-1||R===-1)return M;const[j]=L.splice(B,1);return L.splice(R,0,j),{panes:L.map((D,V)=>({...D,order:V}))}})},[]),l=S.useCallback(()=>{localStorage.removeItem(of),bE(),e(Qy())},[]),a=S.useCallback(()=>{e(C=>{const P=C.panes.filter(R=>R.visible),M=P.length>0?Math.max(...P.map(R=>R.order)):-1,L=C.panes.filter(R=>!R.visible&&R.id!=="refparse").sort((R,j)=>R.id.localeCompare(j.id)),B=new Map;return L.forEach((R,j)=>{B.set(R.id,M+1+j)}),{...C,panes:C.panes.map(R=>({...R,visible:!0,order:B.has(R.id)?B.get(R.id):R.order}))}})},[]),c=S.useCallback(()=>{e(C=>({...C,panes:C.panes.map(P=>P.id==="refparse"?P:{...P,visible:!1})}))},[]),h=S.useCallback(()=>{e(C=>{const P=new Set(C.selectedPaneIds??[]);return{...C,panes:C.panes.map(M=>({...M,visible:M.id==="refparse"||P.has(M.id)}))}})},[]),d=S.useCallback(()=>{e(C=>({...C,selectedPaneIds:[]}))},[]),p=S.useCallback(C=>{e(P=>{const M=new Set(C);if(P.panes.filter(j=>!j.visible&&M.has(j.id)).length===0)return P;let R=Math.max(...P.panes.filter(j=>j.visible).map(j=>j.order),-1)+1;return{...P,panes:P.panes.map(j=>!j.visible&&M.has(j.id)?{...j,visible:!0,order:R++}:j)}})},[]),m=S.useCallback((C,P)=>{e(M=>{const L=M.panes.find(V=>V.id===C);if(!L)return M;const B=L.order,D=[...M.panes.map(V=>V.id===P?{...V,visible:!0,order:B+.5}:V)].sort((V,$)=>V.order-$.order).map((V,$)=>({...V,order:$}));return{...M,panes:D}})},[]),x=S.useCallback(C=>{e(P=>({...P,inputPaneWidth:C}))},[]),k=S.useCallback(C=>{e(P=>({...P,colorScheme:C}))},[]),b=S.useCallback(C=>{e(P=>({...P,editorType:C}))},[]),O=S.useCallback(()=>n.panes.filter(C=>C.visible).sort((C,P)=>C.order-P.order),[n.panes]);return{layout:n,updatePaneVisibility:t,togglePaneSelection:r,reorderPanes:s,resetLayout:l,showAllPanes:a,hideAllPanes:c,showSelectedPanes:h,clearSelectedPanes:d,showErrorPanes:p,addPaneAfter:m,getVisiblePanes:O,inputPaneWidth:n.inputPaneWidth??400,setInputPaneWidth:x,colorScheme:n.colorScheme==="dark"?"dark":"light",setColorScheme:k,editorType:n.editorType??"monaco",setEditorType:b}}const Ua=Rs.filter(n=>n.id!=="refparse").map(n=>n.id);function $E(){const[n,e]=S.useState(new Map),[t,r]=S.useState(""),s=S.useRef(null),l=S.useCallback(async(h,d)=>{s.current&&s.current.abort(),s.current=new AbortController,e(k=>{const b=new Map(k);return b.set("refparse",{parserId:"refparse",output:"",status:0,loading:!0}),Ua.forEach(O=>{b.set(O,{parserId:O,output:"",status:0,loading:!0})}),b});const p=await z1(h),m=p.output,x=p.status;r(m),e(k=>{const b=new Map(k);return b.set("refparse",{parserId:"refparse",output:p.output,status:p.status,loading:!1,matches:p.status===0,agrees:!0}),b}),await Promise.all(Ua.map(async k=>{const b=Rs.find(M=>M.id===k);if(!b)return;const O=await B1(k,h,b.version);let C,P;if(O.status===-1)C=!1,P=!1;else if(k==="refhs"){const M=x===0,L=O.status===0;C=M===L,P=x===0&&C}else x!==0?(C=O.status!==0,P=!1):(C=O.status===0&&F1(m,O.output,k),P=C);e(M=>{const L=new Map(M);return L.set(k,{parserId:k,output:O.output,status:O.status,loading:!1,matches:P,agrees:C,versionMismatch:O.versionMismatch}),L})}))},[]),a=S.useCallback(h=>n.get(h),[n]),c=S.useCallback(()=>{const h=[];let d=0;return Ua.forEach(p=>{const m=n.get(p);if(!m||m.loading)d++;else if(!m.agrees){const x=si(p);h.push((x==null?void 0:x.name)||p)}}),{total:Ua.length,disagreeing:h.length,disagreeingNames:h,loading:d>0}},[n]);return{results:n,refOutput:t,runAllParsers:l,getResult:a,getAgreementCount:c}}async function UE(n){if(!localStorage.getItem("github-model"))try{const r=(await Vd(n)).find(s=>s.name==="Llama-3.3-70B-Instruct");r&&(localStorage.setItem("github-model",r.id),localStorage.setItem("github-model-name",`${r.publisher}/${r.name}`))}catch(t){console.error("Failed to set default model:",t)}}function XE(){const[n,e]=S.useState(null),[t,r]=S.useState(!0),[s,l]=S.useState(null);S.useEffect(()=>{(async()=>{const p=ms(),m=zE();if(p&&m)try{const x=await Vy(p);e(x),Hy(x)}catch{_y(),e(null)}r(!1)})()},[]);const a=S.useCallback(async()=>{l(null),r(!0);try{const d=await mE(Fy);return{userCode:d.user_code,verificationUri:d.verification_uri,deviceCode:d.device_code,interval:d.interval}}catch(d){const p=d instanceof Error?d.message:"Failed to start OAuth flow";return l(p),r(!1),null}},[]),c=S.useCallback(async(d,p)=>{const m=p*1e3,x=60;let k=0;const b=async()=>{if(k>=x){l("Authentication timeout - please try again"),r(!1);return}k++;try{const O=await yE(Fy,d);if(O.access_token){const C=O.access_token;BE(C);const P=await Vy(C);e(P),Hy(P),await UE(C),r(!1);return}if(O.error==="authorization_pending")return await new Promise(C=>setTimeout(C,m)),b();if(O.error==="slow_down")return await new Promise(C=>setTimeout(C,m+5e3)),b();if(O.error){l(O.error_description||O.error),r(!1);return}return await new Promise(C=>setTimeout(C,m)),b()}catch(O){const C=O instanceof Error?O.message:"Polling failed";l(C),r(!1)}};await b()},[]),h=S.useCallback(()=>{_y(),e(null)},[]);return{user:n,isAuthenticated:!!n,isLoading:t,error:s,login:a,waitForAuth:c,logout:h}}const KE="0.1.36",qE={version:KE},GE=qE.version;function YE(){const n=window.location.hash.slice(1);if(!n)return null;try{return atob(n)}catch{return null}}function JE(n){const e=btoa(n);window.history.replaceState(null,"",`#${e}`)}function ZE(){var Er,di;const[n,e]=S.useState(()=>YE()||Wo),[t,r]=S.useState(!1),[s,l]=S.useState(!1),[a,c]=S.useState(!1),[h,d]=S.useState(!1),[p,m]=S.useState(!1),[x,k]=S.useState(null),[b,O]=S.useState(!1),[C,P]=S.useState(!1),[M,L]=S.useState(!1),[B,R]=S.useState(!1),j=S.useRef(null),D=S.useRef(""),V=W1(640),$=FE(),U=XE(),J=()=>U.isAuthenticated,{layout:Q,updatePaneVisibility:Z,togglePaneSelection:he,reorderPanes:K,resetLayout:G,showAllPanes:oe,hideAllPanes:W,showSelectedPanes:re,clearSelectedPanes:ee,showErrorPanes:A,getVisiblePanes:z,inputPaneWidth:ue,setInputPaneWidth:pe,colorScheme:te,setColorScheme:H,editorType:ae,setEditorType:we}=QE(),{results:ye,runAllParsers:me,getResult:Ne,getAgreementCount:Fe}=$E(),Ve=z(),{total:Ke,disagreeing:Ct,disagreeingNames:Cn,loading:Ar}=Fe(),Pn=Ve.map(Me=>Me.id).join(","),Nn=S.useRef({input:"",panes:""}),Pt=Array.from(ye.values()).some(Me=>Me.versionMismatch);S.useEffect(()=>{const Me=async()=>{const Re=await pE();L(Re)};Me();const le=setInterval(Me,1e4);return()=>clearInterval(le)},[]),S.useEffect(()=>{const Me=Q.panes.find(le=>le.id==="refparse");Me&&!Me.visible&&Z("refparse",!0)},[Q.panes,Z]),S.useEffect(()=>{const Me=setTimeout(()=>{JE(n)},1e3);return()=>clearTimeout(Me)},[n]),S.useEffect(()=>{if(Nn.current.input===n&&Nn.current.panes===Pn)return;const Me=setTimeout(()=>{const le=Pn.split(",").filter(Boolean);le.length>0&&(Nn.current={input:n,panes:Pn},me(n,le))},500);return()=>clearTimeout(Me)},[n,Pn,me]),S.useEffect(()=>{const Me=le=>{var lt,pi,gi;const Re=le.target,Ut=Re.tagName==="INPUT"||Re.tagName==="TEXTAREA"||Re.closest(".monaco-editor")||Re.closest(".cm-editor");if(le.key==="Escape"&&Ut){le.preventDefault(),(lt=j.current)==null||lt.blur();return}if(Ut)return;const _e=le.key.toUpperCase();if(_e==="I"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),(pi=j.current)==null||pi.focus()),_e==="H"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),c(!0)),_e==="O"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),r(!0)),_e==="A"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),oe()),_e==="N"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),W()),_e==="S"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),re()),_e==="U"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),ee()),_e==="C"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),m(!0)),_e==="K"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),d(!0)),_e==="G"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),P(!0)),_e==="T"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),J()?O(!0):P(!0)),le.key==="\\"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(D.current+="\\",D.current==="\\\\\\"&&(le.preventDefault(),e(""),(gi=j.current)==null||gi.focus(),D.current="")),_e==="D"&&!le.ctrlKey&&!le.metaKey&&!le.altKey){le.preventDefault();const Mr=[];ye.forEach((mi,ur)=>{ur!=="refparse"&&mi.agrees===!1&&Mr.push(ur)}),Mr.length>0&&A(Mr)}_e==="X"&&!le.ctrlKey&&!le.metaKey&&!le.altKey?(D.current+="X",D.current==="XXX"&&(le.preventDefault(),G(),e(Wo),localStorage.removeItem("github-model"),localStorage.removeItem("github-model-name"),U.logout(),D.current="")):le.key!=="\\"&&_e!=="X"&&(D.current="")};return document.addEventListener("keydown",Me),()=>document.removeEventListener("keydown",Me)},[oe,W,re,A,ye,G,U.isAuthenticated]);const nn=lb(jm(xd,{activationConstraint:{distance:8}}),jm(md)),$n=S.useCallback(Me=>{const{active:le,over:Re}=Me;if(Re&&le.id!==Re.id){if(le.id==="refparse")return;K(le.id,Re.id)}},[K]),Un=si("refparse");return V?v.jsxs("div",{className:`h-screen flex flex-col bg-gray-100 dark:bg-gray-900 ${te==="dark"?"dark":""}`,children:[v.jsxs("header",{className:"bg-white dark:bg-gray-800 px-3 py-2 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[v.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"YAML Playground"}),v.jsxs("div",{className:"relative",children:[v.jsx("button",{onClick:()=>R(!B),className:"p-2 text-gray-700 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors","aria-label":"Menu",children:v.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),B&&v.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-lg z-50",children:[v.jsx("button",{onClick:()=>{c(!0),R(!1)},className:"w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"About"}),v.jsx("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),R(!1)},className:"w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Share"}),v.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",onClick:()=>R(!1),className:"block w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"GitHub"})]})]})]}),v.jsxs("div",{className:`flex-1 flex ${$?"flex-row":"flex-col"} overflow-hidden min-h-0`,children:[v.jsx("div",{className:`${$?"w-1/2 h-full":"h-1/2 w-full"} flex flex-col overflow-hidden ${$?"border-r border-gray-300 dark:border-gray-700":"border-b border-gray-300 dark:border-gray-700"}`,children:v.jsx(Ry,{ref:j,value:n,onChange:e,width:ue,onWidthChange:pe,colorScheme:te,editorType:ae,showBorder:!1,isMobile:!0,onSubmitPR:()=>O(!0),onSignIn:()=>P(!0),isGitHubAuthenticated:U.isAuthenticated})}),Un&&v.jsx("div",{className:`${$?"w-1/2 h-full":"h-1/2 w-full"} flex flex-col overflow-hidden`,children:v.jsx(rf,{parser:Un,result:Ne("refparse"),isDraggable:!1,onSetYamlInput:e,showTestSuite:!1})})]})]}):v.jsxs("div",{className:`h-screen flex flex-col bg-gray-100 dark:bg-gray-900 ${te==="dark"?"dark":""}`,children:[v.jsxs("header",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between",children:[v.jsxs("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:["YAML Parser Playground ",GE]}),v.jsxs("div",{className:"flex items-center gap-2",children:[(!M||Pt)&&v.jsx("button",{onClick:()=>l(!0),className:"px-3 py-1.5 bg-yellow-500 text-black font-semibold rounded hover:bg-yellow-400 transition-colors text-sm",children:"Setup"}),v.jsx(jE,{onHelp:()=>c(!0),onOptions:()=>r(!0),onAllPanes:oe,onUnselectAll:ee,onTestFormat:()=>O(!0),onKeyboardShortcuts:()=>d(!0),onSandboxSetup:()=>l(!0),onAddTokens:()=>P(!0),hasTokens:J(),onFactoryReset:()=>{G(),e(Wo),localStorage.removeItem("github-model"),localStorage.removeItem("github-model-name"),U.logout()}})]})]}),v.jsx("div",{className:"flex-1 flex overflow-hidden",children:(()=>{const Me=Ve.length>8,le=Me?Ve.filter(Re=>Re.id!=="refparse"):Ve;return v.jsxs(v.Fragment,{children:[v.jsxs("div",{className:`${Me?"grid grid-rows-2":"flex flex-col"} h-full border-r border-gray-300 dark:border-gray-700`,style:{width:`${ue}px`,minWidth:"200px",maxWidth:"800px"},children:[v.jsx(Ry,{ref:j,value:n,onChange:e,width:ue,onWidthChange:pe,colorScheme:te,editorType:ae,showBorder:!1,heightMode:Me?"half":"full",onSubmitPR:()=>O(!0),onSignIn:()=>P(!0),isGitHubAuthenticated:U.isAuthenticated}),Me&&Un&&v.jsx("div",{className:"h-full overflow-hidden border-t border-gray-300 dark:border-gray-700",children:v.jsx(rf,{parser:Un,result:Ne("refparse"),isDraggable:!1,onSetYamlInput:e},"refparse-sidebar")})]},Me?"left-col-split":"left-col-full"),v.jsx("div",{className:"flex-1 grid grid-cols-4 overflow-y-auto pane-container gap-px bg-gray-300 dark:bg-gray-700 auto-rows-fr",children:v.jsx(hS,{sensors:nn,collisionDetection:fb,onDragEnd:$n,children:v.jsx(OS,{items:le.map(Re=>Re.id),strategy:bS,children:le.map(Re=>{var lt;const Ut=si(Re.id);if(!Ut)return null;const _e=Re.id==="refparse";return v.jsx(rf,{parser:Ut,result:Ne(Re.id),onClose:_e?void 0:()=>Z(Re.id,!1),isDraggable:!_e,onSetYamlInput:e,isSelected:_e?!1:((lt=Q.selectedPaneIds)==null?void 0:lt.includes(Re.id))??!1,onToggleSelection:_e?void 0:()=>he(Re.id)},Re.id)})})})})]})})()}),v.jsx(EE,{total:Ke,disagreeing:Ct,disagreeingNames:Cn,loading:Ar,sandboxAvailable:M,onSandboxSetup:()=>l(!0)}),v.jsx(TE,{isOpen:t,onClose:()=>r(!1),colorScheme:te,onColorSchemeChange:H,editorType:ae,onEditorTypeChange:we}),v.jsx(DE,{isOpen:s,onClose:()=>{l(!1);const Me=Pn.split(",").filter(Boolean);Me.length>0&&me(n,Me)}}),v.jsx(LE,{isOpen:a,onClose:()=>c(!1)}),v.jsx(IE,{isOpen:h,onClose:()=>d(!1)}),v.jsx(V1,{isOpen:p,onClose:()=>m(!1),onSelectParser:Me=>k(Me)}),v.jsx(HE,{isOpen:b,onClose:()=>O(!1),yaml:n,events:((Er=Ne("refparse"))==null?void 0:Er.output)||"",isError:(((di=Ne("refparse"))==null?void 0:di.status)??0)!==0,onConfigureModel:()=>P(!0)}),v.jsx(WE,{isOpen:C,onClose:()=>P(!1),githubAuth:U}),x&&si(x)&&v.jsx(ad,{isOpen:!0,onClose:()=>k(null),parser:si(x),onSelectTest:Me=>e(Me),forceRerun:!1,onCompare:()=>{k(null),m(!0)}})]})}Uw.createRoot(document.getElementById("root")).render(v.jsx(ot.StrictMode,{children:v.jsx(ZE,{})}));
//# sourceMappingURL=index-BcKMZV4m.js.map

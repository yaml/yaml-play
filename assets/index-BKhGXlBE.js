var Sw=Object.defineProperty;var Ow=(n,e,t)=>e in n?Sw(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t;var ym=(n,e,t)=>Ow(n,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const l of s)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function t(s){const l={};return s.integrity&&(l.integrity=s.integrity),s.referrerPolicy&&(l.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?l.credentials="include":s.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(s){if(s.ep)return;s.ep=!0;const l=t(s);fetch(s.href,l)}})();function Ty(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var wh={exports:{}},yo={},bh={exports:{}},Ae={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vm;function Cw(){if(vm)return Ae;vm=1;var n=Symbol.for("react.element"),e=Symbol.for("react.portal"),t=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),s=Symbol.for("react.profiler"),l=Symbol.for("react.provider"),a=Symbol.for("react.context"),c=Symbol.for("react.forward_ref"),h=Symbol.for("react.suspense"),p=Symbol.for("react.memo"),d=Symbol.for("react.lazy"),m=Symbol.iterator;function v(A){return A===null||typeof A!="object"?null:(A=m&&A[m]||A["@@iterator"],typeof A=="function"?A:null)}var x={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function C(A,j,se){this.props=A,this.context=j,this.refs=S,this.updater=se||x}C.prototype.isReactComponent={},C.prototype.setState=function(A,j){if(typeof A!="object"&&typeof A!="function"&&A!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,A,j,"setState")},C.prototype.forceUpdate=function(A){this.updater.enqueueForceUpdate(this,A,"forceUpdate")};function P(){}P.prototype=C.prototype;function N(A,j,se){this.props=A,this.context=j,this.refs=S,this.updater=se||x}var D=N.prototype=new P;D.constructor=N,b(D,C.prototype),D.isPureReactComponent=!0;var B=Array.isArray,T=Object.prototype.hasOwnProperty,F={current:null},L={key:!0,ref:!0,__self:!0,__source:!0};function V(A,j,se){var de,xe={},te=null,he=null;if(j!=null)for(de in j.ref!==void 0&&(he=j.ref),j.key!==void 0&&(te=""+j.key),j)T.call(j,de)&&!L.hasOwnProperty(de)&&(xe[de]=j[de]);var we=arguments.length-2;if(we===1)xe.children=se;else if(1<we){for(var Pe=Array(we),ve=0;ve<we;ve++)Pe[ve]=arguments[ve+2];xe.children=Pe}if(A&&A.defaultProps)for(de in we=A.defaultProps,we)xe[de]===void 0&&(xe[de]=we[de]);return{$$typeof:n,type:A,key:te,ref:he,props:xe,_owner:F.current}}function q(A,j){return{$$typeof:n,type:A.type,key:j,ref:A.ref,props:A.props,_owner:A._owner}}function Y(A){return typeof A=="object"&&A!==null&&A.$$typeof===n}function H(A){var j={"=":"=0",":":"=2"};return"$"+A.replace(/[=:]/g,function(se){return j[se]})}var W=/\/+/g;function J(A,j){return typeof A=="object"&&A!==null&&A.key!=null?H(""+A.key):j.toString(36)}function Z(A,j,se,de,xe){var te=typeof A;(te==="undefined"||te==="boolean")&&(A=null);var he=!1;if(A===null)he=!0;else switch(te){case"string":case"number":he=!0;break;case"object":switch(A.$$typeof){case n:case e:he=!0}}if(he)return he=A,xe=xe(he),A=de===""?"."+J(he,0):de,B(xe)?(se="",A!=null&&(se=A.replace(W,"$&/")+"/"),Z(xe,j,se,"",function(ve){return ve})):xe!=null&&(Y(xe)&&(xe=q(xe,se+(!xe.key||he&&he.key===xe.key?"":(""+xe.key).replace(W,"$&/")+"/")+A)),j.push(xe)),1;if(he=0,de=de===""?".":de+":",B(A))for(var we=0;we<A.length;we++){te=A[we];var Pe=de+J(te,we);he+=Z(te,j,se,Pe,xe)}else if(Pe=v(A),typeof Pe=="function")for(A=Pe.call(A),we=0;!(te=A.next()).done;)te=te.value,Pe=de+J(te,we++),he+=Z(te,j,se,Pe,xe);else if(te==="object")throw j=String(A),Error("Objects are not valid as a React child (found: "+(j==="[object Object]"?"object with keys {"+Object.keys(A).join(", ")+"}":j)+"). If you meant to render a collection of children, use an array instead.");return he}function U(A,j,se){if(A==null)return A;var de=[],xe=0;return Z(A,de,"","",function(te){return j.call(se,te,xe++)}),de}function ue(A){if(A._status===-1){var j=A._result;j=j(),j.then(function(se){(A._status===0||A._status===-1)&&(A._status=1,A._result=se)},function(se){(A._status===0||A._status===-1)&&(A._status=2,A._result=se)}),A._status===-1&&(A._status=0,A._result=j)}if(A._status===1)return A._result.default;throw A._result}var fe={current:null},X={transition:null},re={ReactCurrentDispatcher:fe,ReactCurrentBatchConfig:X,ReactCurrentOwner:F};function ee(){throw Error("act(...) is not supported in production builds of React.")}return Ae.Children={map:U,forEach:function(A,j,se){U(A,function(){j.apply(this,arguments)},se)},count:function(A){var j=0;return U(A,function(){j++}),j},toArray:function(A){return U(A,function(j){return j})||[]},only:function(A){if(!Y(A))throw Error("React.Children.only expected to receive a single React element child.");return A}},Ae.Component=C,Ae.Fragment=t,Ae.Profiler=s,Ae.PureComponent=N,Ae.StrictMode=r,Ae.Suspense=h,Ae.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=re,Ae.act=ee,Ae.cloneElement=function(A,j,se){if(A==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+A+".");var de=b({},A.props),xe=A.key,te=A.ref,he=A._owner;if(j!=null){if(j.ref!==void 0&&(te=j.ref,he=F.current),j.key!==void 0&&(xe=""+j.key),A.type&&A.type.defaultProps)var we=A.type.defaultProps;for(Pe in j)T.call(j,Pe)&&!L.hasOwnProperty(Pe)&&(de[Pe]=j[Pe]===void 0&&we!==void 0?we[Pe]:j[Pe])}var Pe=arguments.length-2;if(Pe===1)de.children=se;else if(1<Pe){we=Array(Pe);for(var ve=0;ve<Pe;ve++)we[ve]=arguments[ve+2];de.children=we}return{$$typeof:n,type:A.type,key:xe,ref:te,props:de,_owner:he}},Ae.createContext=function(A){return A={$$typeof:a,_currentValue:A,_currentValue2:A,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},A.Provider={$$typeof:l,_context:A},A.Consumer=A},Ae.createElement=V,Ae.createFactory=function(A){var j=V.bind(null,A);return j.type=A,j},Ae.createRef=function(){return{current:null}},Ae.forwardRef=function(A){return{$$typeof:c,render:A}},Ae.isValidElement=Y,Ae.lazy=function(A){return{$$typeof:d,_payload:{_status:-1,_result:A},_init:ue}},Ae.memo=function(A,j){return{$$typeof:p,type:A,compare:j===void 0?null:j}},Ae.startTransition=function(A){var j=X.transition;X.transition={};try{A()}finally{X.transition=j}},Ae.unstable_act=ee,Ae.useCallback=function(A,j){return fe.current.useCallback(A,j)},Ae.useContext=function(A){return fe.current.useContext(A)},Ae.useDebugValue=function(){},Ae.useDeferredValue=function(A){return fe.current.useDeferredValue(A)},Ae.useEffect=function(A,j){return fe.current.useEffect(A,j)},Ae.useId=function(){return fe.current.useId()},Ae.useImperativeHandle=function(A,j,se){return fe.current.useImperativeHandle(A,j,se)},Ae.useInsertionEffect=function(A,j){return fe.current.useInsertionEffect(A,j)},Ae.useLayoutEffect=function(A,j){return fe.current.useLayoutEffect(A,j)},Ae.useMemo=function(A,j){return fe.current.useMemo(A,j)},Ae.useReducer=function(A,j,se){return fe.current.useReducer(A,j,se)},Ae.useRef=function(A){return fe.current.useRef(A)},Ae.useState=function(A){return fe.current.useState(A)},Ae.useSyncExternalStore=function(A,j,se){return fe.current.useSyncExternalStore(A,j,se)},Ae.useTransition=function(){return fe.current.useTransition()},Ae.version="18.3.1",Ae}var xm;function od(){return xm||(xm=1,bh.exports=Cw()),bh.exports}/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var km;function Pw(){if(km)return yo;km=1;var n=od(),e=Symbol.for("react.element"),t=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,l={key:!0,ref:!0,__self:!0,__source:!0};function a(c,h,p){var d,m={},v=null,x=null;p!==void 0&&(v=""+p),h.key!==void 0&&(v=""+h.key),h.ref!==void 0&&(x=h.ref);for(d in h)r.call(h,d)&&!l.hasOwnProperty(d)&&(m[d]=h[d]);if(c&&c.defaultProps)for(d in h=c.defaultProps,h)m[d]===void 0&&(m[d]=h[d]);return{$$typeof:e,type:c,key:v,ref:x,props:m,_owner:s.current}}return yo.Fragment=t,yo.jsx=a,yo.jsxs=a,yo}var wm;function Ew(){return wm||(wm=1,wh.exports=Pw()),wh.exports}var w=Ew(),O=od();const it=Ty(O);var ka={},Sh={exports:{}},Zt={},Oh={exports:{}},Ch={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bm;function Aw(){return bm||(bm=1,(function(n){function e(X,re){var ee=X.length;X.push(re);e:for(;0<ee;){var A=ee-1>>>1,j=X[A];if(0<s(j,re))X[A]=re,X[ee]=j,ee=A;else break e}}function t(X){return X.length===0?null:X[0]}function r(X){if(X.length===0)return null;var re=X[0],ee=X.pop();if(ee!==re){X[0]=ee;e:for(var A=0,j=X.length,se=j>>>1;A<se;){var de=2*(A+1)-1,xe=X[de],te=de+1,he=X[te];if(0>s(xe,ee))te<j&&0>s(he,xe)?(X[A]=he,X[te]=ee,A=te):(X[A]=xe,X[de]=ee,A=de);else if(te<j&&0>s(he,ee))X[A]=he,X[te]=ee,A=te;else break e}}return re}function s(X,re){var ee=X.sortIndex-re.sortIndex;return ee!==0?ee:X.id-re.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var a=Date,c=a.now();n.unstable_now=function(){return a.now()-c}}var h=[],p=[],d=1,m=null,v=3,x=!1,b=!1,S=!1,C=typeof setTimeout=="function"?setTimeout:null,P=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function D(X){for(var re=t(p);re!==null;){if(re.callback===null)r(p);else if(re.startTime<=X)r(p),re.sortIndex=re.expirationTime,e(h,re);else break;re=t(p)}}function B(X){if(S=!1,D(X),!b)if(t(h)!==null)b=!0,ue(T);else{var re=t(p);re!==null&&fe(B,re.startTime-X)}}function T(X,re){b=!1,S&&(S=!1,P(V),V=-1),x=!0;var ee=v;try{for(D(re),m=t(h);m!==null&&(!(m.expirationTime>re)||X&&!H());){var A=m.callback;if(typeof A=="function"){m.callback=null,v=m.priorityLevel;var j=A(m.expirationTime<=re);re=n.unstable_now(),typeof j=="function"?m.callback=j:m===t(h)&&r(h),D(re)}else r(h);m=t(h)}if(m!==null)var se=!0;else{var de=t(p);de!==null&&fe(B,de.startTime-re),se=!1}return se}finally{m=null,v=ee,x=!1}}var F=!1,L=null,V=-1,q=5,Y=-1;function H(){return!(n.unstable_now()-Y<q)}function W(){if(L!==null){var X=n.unstable_now();Y=X;var re=!0;try{re=L(!0,X)}finally{re?J():(F=!1,L=null)}}else F=!1}var J;if(typeof N=="function")J=function(){N(W)};else if(typeof MessageChannel<"u"){var Z=new MessageChannel,U=Z.port2;Z.port1.onmessage=W,J=function(){U.postMessage(null)}}else J=function(){C(W,0)};function ue(X){L=X,F||(F=!0,J())}function fe(X,re){V=C(function(){X(n.unstable_now())},re)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(X){X.callback=null},n.unstable_continueExecution=function(){b||x||(b=!0,ue(T))},n.unstable_forceFrameRate=function(X){0>X||125<X?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):q=0<X?Math.floor(1e3/X):5},n.unstable_getCurrentPriorityLevel=function(){return v},n.unstable_getFirstCallbackNode=function(){return t(h)},n.unstable_next=function(X){switch(v){case 1:case 2:case 3:var re=3;break;default:re=v}var ee=v;v=re;try{return X()}finally{v=ee}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(X,re){switch(X){case 1:case 2:case 3:case 4:case 5:break;default:X=3}var ee=v;v=X;try{return re()}finally{v=ee}},n.unstable_scheduleCallback=function(X,re,ee){var A=n.unstable_now();switch(typeof ee=="object"&&ee!==null?(ee=ee.delay,ee=typeof ee=="number"&&0<ee?A+ee:A):ee=A,X){case 1:var j=-1;break;case 2:j=250;break;case 5:j=1073741823;break;case 4:j=1e4;break;default:j=5e3}return j=ee+j,X={id:d++,callback:re,priorityLevel:X,startTime:ee,expirationTime:j,sortIndex:-1},ee>A?(X.sortIndex=ee,e(p,X),t(h)===null&&X===t(p)&&(S?(P(V),V=-1):S=!0,fe(B,ee-A))):(X.sortIndex=j,e(h,X),b||x||(b=!0,ue(T))),X},n.unstable_shouldYield=H,n.unstable_wrapCallback=function(X){var re=v;return function(){var ee=v;v=re;try{return X.apply(this,arguments)}finally{v=ee}}}})(Ch)),Ch}var Sm;function Mw(){return Sm||(Sm=1,Oh.exports=Aw()),Oh.exports}/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Om;function Rw(){if(Om)return Zt;Om=1;var n=od(),e=Mw();function t(i){for(var o="https://reactjs.org/docs/error-decoder.html?invariant="+i,u=1;u<arguments.length;u++)o+="&args[]="+encodeURIComponent(arguments[u]);return"Minified React error #"+i+"; visit "+o+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var r=new Set,s={};function l(i,o){a(i,o),a(i+"Capture",o)}function a(i,o){for(s[i]=o,i=0;i<o.length;i++)r.add(o[i])}var c=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),h=Object.prototype.hasOwnProperty,p=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,d={},m={};function v(i){return h.call(m,i)?!0:h.call(d,i)?!1:p.test(i)?m[i]=!0:(d[i]=!0,!1)}function x(i,o,u,f){if(u!==null&&u.type===0)return!1;switch(typeof o){case"function":case"symbol":return!0;case"boolean":return f?!1:u!==null?!u.acceptsBooleans:(i=i.toLowerCase().slice(0,5),i!=="data-"&&i!=="aria-");default:return!1}}function b(i,o,u,f){if(o===null||typeof o>"u"||x(i,o,u,f))return!0;if(f)return!1;if(u!==null)switch(u.type){case 3:return!o;case 4:return o===!1;case 5:return isNaN(o);case 6:return isNaN(o)||1>o}return!1}function S(i,o,u,f,g,y,k){this.acceptsBooleans=o===2||o===3||o===4,this.attributeName=f,this.attributeNamespace=g,this.mustUseProperty=u,this.propertyName=i,this.type=o,this.sanitizeURL=y,this.removeEmptyString=k}var C={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(i){C[i]=new S(i,0,!1,i,null,!1,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(i){var o=i[0];C[o]=new S(o,1,!1,i[1],null,!1,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(i){C[i]=new S(i,2,!1,i.toLowerCase(),null,!1,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(i){C[i]=new S(i,2,!1,i,null,!1,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(i){C[i]=new S(i,3,!1,i.toLowerCase(),null,!1,!1)}),["checked","multiple","muted","selected"].forEach(function(i){C[i]=new S(i,3,!0,i,null,!1,!1)}),["capture","download"].forEach(function(i){C[i]=new S(i,4,!1,i,null,!1,!1)}),["cols","rows","size","span"].forEach(function(i){C[i]=new S(i,6,!1,i,null,!1,!1)}),["rowSpan","start"].forEach(function(i){C[i]=new S(i,5,!1,i.toLowerCase(),null,!1,!1)});var P=/[\-:]([a-z])/g;function N(i){return i[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(i){var o=i.replace(P,N);C[o]=new S(o,1,!1,i,null,!1,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(i){var o=i.replace(P,N);C[o]=new S(o,1,!1,i,"http://www.w3.org/1999/xlink",!1,!1)}),["xml:base","xml:lang","xml:space"].forEach(function(i){var o=i.replace(P,N);C[o]=new S(o,1,!1,i,"http://www.w3.org/XML/1998/namespace",!1,!1)}),["tabIndex","crossOrigin"].forEach(function(i){C[i]=new S(i,1,!1,i.toLowerCase(),null,!1,!1)}),C.xlinkHref=new S("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1),["src","href","action","formAction"].forEach(function(i){C[i]=new S(i,1,!1,i.toLowerCase(),null,!0,!0)});function D(i,o,u,f){var g=C.hasOwnProperty(o)?C[o]:null;(g!==null?g.type!==0:f||!(2<o.length)||o[0]!=="o"&&o[0]!=="O"||o[1]!=="n"&&o[1]!=="N")&&(b(o,u,g,f)&&(u=null),f||g===null?v(o)&&(u===null?i.removeAttribute(o):i.setAttribute(o,""+u)):g.mustUseProperty?i[g.propertyName]=u===null?g.type===3?!1:"":u:(o=g.attributeName,f=g.attributeNamespace,u===null?i.removeAttribute(o):(g=g.type,u=g===3||g===4&&u===!0?"":""+u,f?i.setAttributeNS(f,o,u):i.setAttribute(o,u))))}var B=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,T=Symbol.for("react.element"),F=Symbol.for("react.portal"),L=Symbol.for("react.fragment"),V=Symbol.for("react.strict_mode"),q=Symbol.for("react.profiler"),Y=Symbol.for("react.provider"),H=Symbol.for("react.context"),W=Symbol.for("react.forward_ref"),J=Symbol.for("react.suspense"),Z=Symbol.for("react.suspense_list"),U=Symbol.for("react.memo"),ue=Symbol.for("react.lazy"),fe=Symbol.for("react.offscreen"),X=Symbol.iterator;function re(i){return i===null||typeof i!="object"?null:(i=X&&i[X]||i["@@iterator"],typeof i=="function"?i:null)}var ee=Object.assign,A;function j(i){if(A===void 0)try{throw Error()}catch(u){var o=u.stack.trim().match(/\n( *(at )?)/);A=o&&o[1]||""}return`
`+A+i}var se=!1;function de(i,o){if(!i||se)return"";se=!0;var u=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(o)if(o=function(){throw Error()},Object.defineProperty(o.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(o,[])}catch(_){var f=_}Reflect.construct(i,[],o)}else{try{o.call()}catch(_){f=_}i.call(o.prototype)}else{try{throw Error()}catch(_){f=_}i()}}catch(_){if(_&&f&&typeof _.stack=="string"){for(var g=_.stack.split(`
`),y=f.stack.split(`
`),k=g.length-1,E=y.length-1;1<=k&&0<=E&&g[k]!==y[E];)E--;for(;1<=k&&0<=E;k--,E--)if(g[k]!==y[E]){if(k!==1||E!==1)do if(k--,E--,0>E||g[k]!==y[E]){var M=`
`+g[k].replace(" at new "," at ");return i.displayName&&M.includes("<anonymous>")&&(M=M.replace("<anonymous>",i.displayName)),M}while(1<=k&&0<=E);break}}}finally{se=!1,Error.prepareStackTrace=u}return(i=i?i.displayName||i.name:"")?j(i):""}function xe(i){switch(i.tag){case 5:return j(i.type);case 16:return j("Lazy");case 13:return j("Suspense");case 19:return j("SuspenseList");case 0:case 2:case 15:return i=de(i.type,!1),i;case 11:return i=de(i.type.render,!1),i;case 1:return i=de(i.type,!0),i;default:return""}}function te(i){if(i==null)return null;if(typeof i=="function")return i.displayName||i.name||null;if(typeof i=="string")return i;switch(i){case L:return"Fragment";case F:return"Portal";case q:return"Profiler";case V:return"StrictMode";case J:return"Suspense";case Z:return"SuspenseList"}if(typeof i=="object")switch(i.$$typeof){case H:return(i.displayName||"Context")+".Consumer";case Y:return(i._context.displayName||"Context")+".Provider";case W:var o=i.render;return i=i.displayName,i||(i=o.displayName||o.name||"",i=i!==""?"ForwardRef("+i+")":"ForwardRef"),i;case U:return o=i.displayName||null,o!==null?o:te(i.type)||"Memo";case ue:o=i._payload,i=i._init;try{return te(i(o))}catch{}}return null}function he(i){var o=i.type;switch(i.tag){case 24:return"Cache";case 9:return(o.displayName||"Context")+".Consumer";case 10:return(o._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return i=o.render,i=i.displayName||i.name||"",o.displayName||(i!==""?"ForwardRef("+i+")":"ForwardRef");case 7:return"Fragment";case 5:return o;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return te(o);case 8:return o===V?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof o=="function")return o.displayName||o.name||null;if(typeof o=="string")return o}return null}function we(i){switch(typeof i){case"boolean":case"number":case"string":case"undefined":return i;case"object":return i;default:return""}}function Pe(i){var o=i.type;return(i=i.nodeName)&&i.toLowerCase()==="input"&&(o==="checkbox"||o==="radio")}function ve(i){var o=Pe(i)?"checked":"value",u=Object.getOwnPropertyDescriptor(i.constructor.prototype,o),f=""+i[o];if(!i.hasOwnProperty(o)&&typeof u<"u"&&typeof u.get=="function"&&typeof u.set=="function"){var g=u.get,y=u.set;return Object.defineProperty(i,o,{configurable:!0,get:function(){return g.call(this)},set:function(k){f=""+k,y.call(this,k)}}),Object.defineProperty(i,o,{enumerable:u.enumerable}),{getValue:function(){return f},setValue:function(k){f=""+k},stopTracking:function(){i._valueTracker=null,delete i[o]}}}}function Re(i){i._valueTracker||(i._valueTracker=ve(i))}function Ve(i){if(!i)return!1;var o=i._valueTracker;if(!o)return!0;var u=o.getValue(),f="";return i&&(f=Pe(i)?i.checked?"true":"false":i.value),i=f,i!==u?(o.setValue(i),!0):!1}function st(i){if(i=i||(typeof document<"u"?document:void 0),typeof i>"u")return null;try{return i.activeElement||i.body}catch{return i.body}}function Ge(i,o){var u=o.checked;return ee({},o,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:u??i._wrapperState.initialChecked})}function ot(i,o){var u=o.defaultValue==null?"":o.defaultValue,f=o.checked!=null?o.checked:o.defaultChecked;u=we(o.value!=null?o.value:u),i._wrapperState={initialChecked:f,initialValue:u,controlled:o.type==="checkbox"||o.type==="radio"?o.checked!=null:o.value!=null}}function nn(i,o){o=o.checked,o!=null&&D(i,"checked",o,!1)}function Er(i,o){nn(i,o);var u=we(o.value),f=o.type;if(u!=null)f==="number"?(u===0&&i.value===""||i.value!=u)&&(i.value=""+u):i.value!==""+u&&(i.value=""+u);else if(f==="submit"||f==="reset"){i.removeAttribute("value");return}o.hasOwnProperty("value")?ar(i,o.type,u):o.hasOwnProperty("defaultValue")&&ar(i,o.type,we(o.defaultValue)),o.checked==null&&o.defaultChecked!=null&&(i.defaultChecked=!!o.defaultChecked)}function ci(i,o,u){if(o.hasOwnProperty("value")||o.hasOwnProperty("defaultValue")){var f=o.type;if(!(f!=="submit"&&f!=="reset"||o.value!==void 0&&o.value!==null))return;o=""+i._wrapperState.initialValue,u||o===i.value||(i.value=o),i.defaultValue=o}u=i.name,u!==""&&(i.name=""),i.defaultChecked=!!i._wrapperState.initialChecked,u!==""&&(i.name=u)}function ar(i,o,u){(o!=="number"||st(i.ownerDocument)!==i)&&(u==null?i.defaultValue=""+i._wrapperState.initialValue:i.defaultValue!==""+u&&(i.defaultValue=""+u))}var ct=Array.isArray;function Ee(i,o,u,f){if(i=i.options,o){o={};for(var g=0;g<u.length;g++)o["$"+u[g]]=!0;for(u=0;u<i.length;u++)g=o.hasOwnProperty("$"+i[u].value),i[u].selected!==g&&(i[u].selected=g),g&&f&&(i[u].defaultSelected=!0)}else{for(u=""+we(u),o=null,g=0;g<i.length;g++){if(i[g].value===u){i[g].selected=!0,f&&(i[g].defaultSelected=!0);return}o!==null||i[g].disabled||(o=i[g])}o!==null&&(o.selected=!0)}}function le(i,o){if(o.dangerouslySetInnerHTML!=null)throw Error(t(91));return ee({},o,{value:void 0,defaultValue:void 0,children:""+i._wrapperState.initialValue})}function Fe(i,o){var u=o.value;if(u==null){if(u=o.children,o=o.defaultValue,u!=null){if(o!=null)throw Error(t(92));if(ct(u)){if(1<u.length)throw Error(t(93));u=u[0]}o=u}o==null&&(o=""),u=o}i._wrapperState={initialValue:we(u)}}function En(i,o){var u=we(o.value),f=we(o.defaultValue);u!=null&&(u=""+u,u!==i.value&&(i.value=u),o.defaultValue==null&&i.defaultValue!==u&&(i.defaultValue=u)),f!=null&&(i.defaultValue=""+f)}function ht(i){var o=i.textContent;o===i._wrapperState.initialValue&&o!==""&&o!==null&&(i.value=o)}function hi(i){switch(i){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function rn(i,o){return i==null||i==="http://www.w3.org/1999/xhtml"?hi(o):i==="http://www.w3.org/2000/svg"&&o==="foreignObject"?"http://www.w3.org/1999/xhtml":i}var Ut,pn=(function(i){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(o,u,f,g){MSApp.execUnsafeLocalFunction(function(){return i(o,u,f,g)})}:i})(function(i,o){if(i.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in i)i.innerHTML=o;else{for(Ut=Ut||document.createElement("div"),Ut.innerHTML="<svg>"+o.valueOf().toString()+"</svg>",o=Ut.firstChild;i.firstChild;)i.removeChild(i.firstChild);for(;o.firstChild;)i.appendChild(o.firstChild)}});function $n(i,o){if(o){var u=i.firstChild;if(u&&u===i.lastChild&&u.nodeType===3){u.nodeValue=o;return}}i.textContent=o}var bt={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},fl=["Webkit","ms","Moz","O"];Object.keys(bt).forEach(function(i){fl.forEach(function(o){o=o+i.charAt(0).toUpperCase()+i.substring(1),bt[o]=bt[i]})});function dl(i,o,u){return o==null||typeof o=="boolean"||o===""?"":u||typeof o!="number"||o===0||bt.hasOwnProperty(i)&&bt[i]?(""+o).trim():o+"px"}function pl(i,o){i=i.style;for(var u in o)if(o.hasOwnProperty(u)){var f=u.indexOf("--")===0,g=dl(u,o[u],f);u==="float"&&(u="cssFloat"),f?i.setProperty(u,g):i[u]=g}}var Ds=ee({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Bi(i,o){if(o){if(Ds[i]&&(o.children!=null||o.dangerouslySetInnerHTML!=null))throw Error(t(137,i));if(o.dangerouslySetInnerHTML!=null){if(o.children!=null)throw Error(t(60));if(typeof o.dangerouslySetInnerHTML!="object"||!("__html"in o.dangerouslySetInnerHTML))throw Error(t(61))}if(o.style!=null&&typeof o.style!="object")throw Error(t(62))}}function Ts(i,o){if(i.indexOf("-")===-1)return typeof o.is=="string";switch(i){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var zi=null;function Ls(i){return i=i.target||i.srcElement||window,i.correspondingUseElement&&(i=i.correspondingUseElement),i.nodeType===3?i.parentNode:i}var js=null,Ar=null,Xe=null;function Et(i){if(i=to(i)){if(typeof js!="function")throw Error(t(280));var o=i.stateNode;o&&(o=jl(o),js(i.stateNode,i.type,o))}}function At(i){Ar?Xe?Xe.push(i):Xe=[i]:Ar=i}function An(){if(Ar){var i=Ar,o=Xe;if(Xe=Ar=null,Et(i),o)for(i=0;i<o.length;i++)Et(o[i])}}function Ft(i,o){return i(o)}function Mt(){}var Xt=!1;function ur(i,o,u){if(Xt)return i(o,u);Xt=!0;try{return Ft(i,o,u)}finally{Xt=!1,(Ar!==null||Xe!==null)&&(Mt(),An())}}function Ke(i,o){var u=i.stateNode;if(u===null)return null;var f=jl(u);if(f===null)return null;u=f[o];e:switch(o){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(f=!f.disabled)||(i=i.type,f=!(i==="button"||i==="input"||i==="select"||i==="textarea")),i=!f;break e;default:i=!1}if(i)return null;if(u&&typeof u!="function")throw Error(t(231,o,typeof u));return u}var gn=!1;if(c)try{var Rt={};Object.defineProperty(Rt,"passive",{get:function(){gn=!0}}),window.addEventListener("test",Rt,Rt),window.removeEventListener("test",Rt,Rt)}catch{gn=!1}function Mn(i,o,u,f,g,y,k,E,M){var _=Array.prototype.slice.call(arguments,3);try{o.apply(u,_)}catch(K){this.onError(K)}}var Rn=!1,Un=null,sn=!1,cr=null,Is={onError:function(i){Rn=!0,Un=i}};function N1(i,o,u,f,g,y,k,E,M){Rn=!1,Un=null,Mn.apply(Is,arguments)}function D1(i,o,u,f,g,y,k,E,M){if(N1.apply(this,arguments),Rn){if(Rn){var _=Un;Rn=!1,Un=null}else throw Error(t(198));sn||(sn=!0,cr=_)}}function fi(i){var o=i,u=i;if(i.alternate)for(;o.return;)o=o.return;else{i=o;do o=i,(o.flags&4098)!==0&&(u=o.return),i=o.return;while(i)}return o.tag===3?u:null}function _d(i){if(i.tag===13){var o=i.memoizedState;if(o===null&&(i=i.alternate,i!==null&&(o=i.memoizedState)),o!==null)return o.dehydrated}return null}function Hd(i){if(fi(i)!==i)throw Error(t(188))}function T1(i){var o=i.alternate;if(!o){if(o=fi(i),o===null)throw Error(t(188));return o!==i?null:i}for(var u=i,f=o;;){var g=u.return;if(g===null)break;var y=g.alternate;if(y===null){if(f=g.return,f!==null){u=f;continue}break}if(g.child===y.child){for(y=g.child;y;){if(y===u)return Hd(g),i;if(y===f)return Hd(g),o;y=y.sibling}throw Error(t(188))}if(u.return!==f.return)u=g,f=y;else{for(var k=!1,E=g.child;E;){if(E===u){k=!0,u=g,f=y;break}if(E===f){k=!0,f=g,u=y;break}E=E.sibling}if(!k){for(E=y.child;E;){if(E===u){k=!0,u=y,f=g;break}if(E===f){k=!0,f=y,u=g;break}E=E.sibling}if(!k)throw Error(t(189))}}if(u.alternate!==f)throw Error(t(190))}if(u.tag!==3)throw Error(t(188));return u.stateNode.current===u?i:o}function Vd(i){return i=T1(i),i!==null?Wd(i):null}function Wd(i){if(i.tag===5||i.tag===6)return i;for(i=i.child;i!==null;){var o=Wd(i);if(o!==null)return o;i=i.sibling}return null}var Qd=e.unstable_scheduleCallback,$d=e.unstable_cancelCallback,L1=e.unstable_shouldYield,j1=e.unstable_requestPaint,tt=e.unstable_now,I1=e.unstable_getCurrentPriorityLevel,Hu=e.unstable_ImmediatePriority,Ud=e.unstable_UserBlockingPriority,gl=e.unstable_NormalPriority,B1=e.unstable_LowPriority,Xd=e.unstable_IdlePriority,ml=null,Xn=null;function z1(i){if(Xn&&typeof Xn.onCommitFiberRoot=="function")try{Xn.onCommitFiberRoot(ml,i,void 0,(i.current.flags&128)===128)}catch{}}var Nn=Math.clz32?Math.clz32:H1,F1=Math.log,_1=Math.LN2;function H1(i){return i>>>=0,i===0?32:31-(F1(i)/_1|0)|0}var yl=64,vl=4194304;function Bs(i){switch(i&-i){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return i&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return i}}function xl(i,o){var u=i.pendingLanes;if(u===0)return 0;var f=0,g=i.suspendedLanes,y=i.pingedLanes,k=u&268435455;if(k!==0){var E=k&~g;E!==0?f=Bs(E):(y&=k,y!==0&&(f=Bs(y)))}else k=u&~g,k!==0?f=Bs(k):y!==0&&(f=Bs(y));if(f===0)return 0;if(o!==0&&o!==f&&(o&g)===0&&(g=f&-f,y=o&-o,g>=y||g===16&&(y&4194240)!==0))return o;if((f&4)!==0&&(f|=u&16),o=i.entangledLanes,o!==0)for(i=i.entanglements,o&=f;0<o;)u=31-Nn(o),g=1<<u,f|=i[u],o&=~g;return f}function V1(i,o){switch(i){case 1:case 2:case 4:return o+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return o+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function W1(i,o){for(var u=i.suspendedLanes,f=i.pingedLanes,g=i.expirationTimes,y=i.pendingLanes;0<y;){var k=31-Nn(y),E=1<<k,M=g[k];M===-1?((E&u)===0||(E&f)!==0)&&(g[k]=V1(E,o)):M<=o&&(i.expiredLanes|=E),y&=~E}}function Vu(i){return i=i.pendingLanes&-1073741825,i!==0?i:i&1073741824?1073741824:0}function Kd(){var i=yl;return yl<<=1,(yl&4194240)===0&&(yl=64),i}function Wu(i){for(var o=[],u=0;31>u;u++)o.push(i);return o}function zs(i,o,u){i.pendingLanes|=o,o!==536870912&&(i.suspendedLanes=0,i.pingedLanes=0),i=i.eventTimes,o=31-Nn(o),i[o]=u}function Q1(i,o){var u=i.pendingLanes&~o;i.pendingLanes=o,i.suspendedLanes=0,i.pingedLanes=0,i.expiredLanes&=o,i.mutableReadLanes&=o,i.entangledLanes&=o,o=i.entanglements;var f=i.eventTimes;for(i=i.expirationTimes;0<u;){var g=31-Nn(u),y=1<<g;o[g]=0,f[g]=-1,i[g]=-1,u&=~y}}function Qu(i,o){var u=i.entangledLanes|=o;for(i=i.entanglements;u;){var f=31-Nn(u),g=1<<f;g&o|i[f]&o&&(i[f]|=o),u&=~g}}var Be=0;function qd(i){return i&=-i,1<i?4<i?(i&268435455)!==0?16:536870912:4:1}var Yd,$u,Gd,Jd,Zd,Uu=!1,kl=[],Mr=null,Rr=null,Nr=null,Fs=new Map,_s=new Map,Dr=[],$1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function ep(i,o){switch(i){case"focusin":case"focusout":Mr=null;break;case"dragenter":case"dragleave":Rr=null;break;case"mouseover":case"mouseout":Nr=null;break;case"pointerover":case"pointerout":Fs.delete(o.pointerId);break;case"gotpointercapture":case"lostpointercapture":_s.delete(o.pointerId)}}function Hs(i,o,u,f,g,y){return i===null||i.nativeEvent!==y?(i={blockedOn:o,domEventName:u,eventSystemFlags:f,nativeEvent:y,targetContainers:[g]},o!==null&&(o=to(o),o!==null&&$u(o)),i):(i.eventSystemFlags|=f,o=i.targetContainers,g!==null&&o.indexOf(g)===-1&&o.push(g),i)}function U1(i,o,u,f,g){switch(o){case"focusin":return Mr=Hs(Mr,i,o,u,f,g),!0;case"dragenter":return Rr=Hs(Rr,i,o,u,f,g),!0;case"mouseover":return Nr=Hs(Nr,i,o,u,f,g),!0;case"pointerover":var y=g.pointerId;return Fs.set(y,Hs(Fs.get(y)||null,i,o,u,f,g)),!0;case"gotpointercapture":return y=g.pointerId,_s.set(y,Hs(_s.get(y)||null,i,o,u,f,g)),!0}return!1}function tp(i){var o=di(i.target);if(o!==null){var u=fi(o);if(u!==null){if(o=u.tag,o===13){if(o=_d(u),o!==null){i.blockedOn=o,Zd(i.priority,function(){Gd(u)});return}}else if(o===3&&u.stateNode.current.memoizedState.isDehydrated){i.blockedOn=u.tag===3?u.stateNode.containerInfo:null;return}}}i.blockedOn=null}function wl(i){if(i.blockedOn!==null)return!1;for(var o=i.targetContainers;0<o.length;){var u=Ku(i.domEventName,i.eventSystemFlags,o[0],i.nativeEvent);if(u===null){u=i.nativeEvent;var f=new u.constructor(u.type,u);zi=f,u.target.dispatchEvent(f),zi=null}else return o=to(u),o!==null&&$u(o),i.blockedOn=u,!1;o.shift()}return!0}function np(i,o,u){wl(i)&&u.delete(o)}function X1(){Uu=!1,Mr!==null&&wl(Mr)&&(Mr=null),Rr!==null&&wl(Rr)&&(Rr=null),Nr!==null&&wl(Nr)&&(Nr=null),Fs.forEach(np),_s.forEach(np)}function Vs(i,o){i.blockedOn===o&&(i.blockedOn=null,Uu||(Uu=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,X1)))}function Ws(i){function o(g){return Vs(g,i)}if(0<kl.length){Vs(kl[0],i);for(var u=1;u<kl.length;u++){var f=kl[u];f.blockedOn===i&&(f.blockedOn=null)}}for(Mr!==null&&Vs(Mr,i),Rr!==null&&Vs(Rr,i),Nr!==null&&Vs(Nr,i),Fs.forEach(o),_s.forEach(o),u=0;u<Dr.length;u++)f=Dr[u],f.blockedOn===i&&(f.blockedOn=null);for(;0<Dr.length&&(u=Dr[0],u.blockedOn===null);)tp(u),u.blockedOn===null&&Dr.shift()}var Fi=B.ReactCurrentBatchConfig,bl=!0;function K1(i,o,u,f){var g=Be,y=Fi.transition;Fi.transition=null;try{Be=1,Xu(i,o,u,f)}finally{Be=g,Fi.transition=y}}function q1(i,o,u,f){var g=Be,y=Fi.transition;Fi.transition=null;try{Be=4,Xu(i,o,u,f)}finally{Be=g,Fi.transition=y}}function Xu(i,o,u,f){if(bl){var g=Ku(i,o,u,f);if(g===null)hc(i,o,f,Sl,u),ep(i,f);else if(U1(g,i,o,u,f))f.stopPropagation();else if(ep(i,f),o&4&&-1<$1.indexOf(i)){for(;g!==null;){var y=to(g);if(y!==null&&Yd(y),y=Ku(i,o,u,f),y===null&&hc(i,o,f,Sl,u),y===g)break;g=y}g!==null&&f.stopPropagation()}else hc(i,o,f,null,u)}}var Sl=null;function Ku(i,o,u,f){if(Sl=null,i=Ls(f),i=di(i),i!==null)if(o=fi(i),o===null)i=null;else if(u=o.tag,u===13){if(i=_d(o),i!==null)return i;i=null}else if(u===3){if(o.stateNode.current.memoizedState.isDehydrated)return o.tag===3?o.stateNode.containerInfo:null;i=null}else o!==i&&(i=null);return Sl=i,null}function rp(i){switch(i){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(I1()){case Hu:return 1;case Ud:return 4;case gl:case B1:return 16;case Xd:return 536870912;default:return 16}default:return 16}}var Tr=null,qu=null,Ol=null;function ip(){if(Ol)return Ol;var i,o=qu,u=o.length,f,g="value"in Tr?Tr.value:Tr.textContent,y=g.length;for(i=0;i<u&&o[i]===g[i];i++);var k=u-i;for(f=1;f<=k&&o[u-f]===g[y-f];f++);return Ol=g.slice(i,1<f?1-f:void 0)}function Cl(i){var o=i.keyCode;return"charCode"in i?(i=i.charCode,i===0&&o===13&&(i=13)):i=o,i===10&&(i=13),32<=i||i===13?i:0}function Pl(){return!0}function sp(){return!1}function on(i){function o(u,f,g,y,k){this._reactName=u,this._targetInst=g,this.type=f,this.nativeEvent=y,this.target=k,this.currentTarget=null;for(var E in i)i.hasOwnProperty(E)&&(u=i[E],this[E]=u?u(y):y[E]);return this.isDefaultPrevented=(y.defaultPrevented!=null?y.defaultPrevented:y.returnValue===!1)?Pl:sp,this.isPropagationStopped=sp,this}return ee(o.prototype,{preventDefault:function(){this.defaultPrevented=!0;var u=this.nativeEvent;u&&(u.preventDefault?u.preventDefault():typeof u.returnValue!="unknown"&&(u.returnValue=!1),this.isDefaultPrevented=Pl)},stopPropagation:function(){var u=this.nativeEvent;u&&(u.stopPropagation?u.stopPropagation():typeof u.cancelBubble!="unknown"&&(u.cancelBubble=!0),this.isPropagationStopped=Pl)},persist:function(){},isPersistent:Pl}),o}var _i={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(i){return i.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Yu=on(_i),Qs=ee({},_i,{view:0,detail:0}),Y1=on(Qs),Gu,Ju,$s,El=ee({},Qs,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ec,button:0,buttons:0,relatedTarget:function(i){return i.relatedTarget===void 0?i.fromElement===i.srcElement?i.toElement:i.fromElement:i.relatedTarget},movementX:function(i){return"movementX"in i?i.movementX:(i!==$s&&($s&&i.type==="mousemove"?(Gu=i.screenX-$s.screenX,Ju=i.screenY-$s.screenY):Ju=Gu=0,$s=i),Gu)},movementY:function(i){return"movementY"in i?i.movementY:Ju}}),op=on(El),G1=ee({},El,{dataTransfer:0}),J1=on(G1),Z1=ee({},Qs,{relatedTarget:0}),Zu=on(Z1),ek=ee({},_i,{animationName:0,elapsedTime:0,pseudoElement:0}),tk=on(ek),nk=ee({},_i,{clipboardData:function(i){return"clipboardData"in i?i.clipboardData:window.clipboardData}}),rk=on(nk),ik=ee({},_i,{data:0}),lp=on(ik),sk={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ok={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},lk={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ak(i){var o=this.nativeEvent;return o.getModifierState?o.getModifierState(i):(i=lk[i])?!!o[i]:!1}function ec(){return ak}var uk=ee({},Qs,{key:function(i){if(i.key){var o=sk[i.key]||i.key;if(o!=="Unidentified")return o}return i.type==="keypress"?(i=Cl(i),i===13?"Enter":String.fromCharCode(i)):i.type==="keydown"||i.type==="keyup"?ok[i.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ec,charCode:function(i){return i.type==="keypress"?Cl(i):0},keyCode:function(i){return i.type==="keydown"||i.type==="keyup"?i.keyCode:0},which:function(i){return i.type==="keypress"?Cl(i):i.type==="keydown"||i.type==="keyup"?i.keyCode:0}}),ck=on(uk),hk=ee({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ap=on(hk),fk=ee({},Qs,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ec}),dk=on(fk),pk=ee({},_i,{propertyName:0,elapsedTime:0,pseudoElement:0}),gk=on(pk),mk=ee({},El,{deltaX:function(i){return"deltaX"in i?i.deltaX:"wheelDeltaX"in i?-i.wheelDeltaX:0},deltaY:function(i){return"deltaY"in i?i.deltaY:"wheelDeltaY"in i?-i.wheelDeltaY:"wheelDelta"in i?-i.wheelDelta:0},deltaZ:0,deltaMode:0}),yk=on(mk),vk=[9,13,27,32],tc=c&&"CompositionEvent"in window,Us=null;c&&"documentMode"in document&&(Us=document.documentMode);var xk=c&&"TextEvent"in window&&!Us,up=c&&(!tc||Us&&8<Us&&11>=Us),cp=" ",hp=!1;function fp(i,o){switch(i){case"keyup":return vk.indexOf(o.keyCode)!==-1;case"keydown":return o.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function dp(i){return i=i.detail,typeof i=="object"&&"data"in i?i.data:null}var Hi=!1;function kk(i,o){switch(i){case"compositionend":return dp(o);case"keypress":return o.which!==32?null:(hp=!0,cp);case"textInput":return i=o.data,i===cp&&hp?null:i;default:return null}}function wk(i,o){if(Hi)return i==="compositionend"||!tc&&fp(i,o)?(i=ip(),Ol=qu=Tr=null,Hi=!1,i):null;switch(i){case"paste":return null;case"keypress":if(!(o.ctrlKey||o.altKey||o.metaKey)||o.ctrlKey&&o.altKey){if(o.char&&1<o.char.length)return o.char;if(o.which)return String.fromCharCode(o.which)}return null;case"compositionend":return up&&o.locale!=="ko"?null:o.data;default:return null}}var bk={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function pp(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o==="input"?!!bk[i.type]:o==="textarea"}function gp(i,o,u,f){At(f),o=Dl(o,"onChange"),0<o.length&&(u=new Yu("onChange","change",null,u,f),i.push({event:u,listeners:o}))}var Xs=null,Ks=null;function Sk(i){Tp(i,0)}function Al(i){var o=Ui(i);if(Ve(o))return i}function Ok(i,o){if(i==="change")return o}var mp=!1;if(c){var nc;if(c){var rc="oninput"in document;if(!rc){var yp=document.createElement("div");yp.setAttribute("oninput","return;"),rc=typeof yp.oninput=="function"}nc=rc}else nc=!1;mp=nc&&(!document.documentMode||9<document.documentMode)}function vp(){Xs&&(Xs.detachEvent("onpropertychange",xp),Ks=Xs=null)}function xp(i){if(i.propertyName==="value"&&Al(Ks)){var o=[];gp(o,Ks,i,Ls(i)),ur(Sk,o)}}function Ck(i,o,u){i==="focusin"?(vp(),Xs=o,Ks=u,Xs.attachEvent("onpropertychange",xp)):i==="focusout"&&vp()}function Pk(i){if(i==="selectionchange"||i==="keyup"||i==="keydown")return Al(Ks)}function Ek(i,o){if(i==="click")return Al(o)}function Ak(i,o){if(i==="input"||i==="change")return Al(o)}function Mk(i,o){return i===o&&(i!==0||1/i===1/o)||i!==i&&o!==o}var Dn=typeof Object.is=="function"?Object.is:Mk;function qs(i,o){if(Dn(i,o))return!0;if(typeof i!="object"||i===null||typeof o!="object"||o===null)return!1;var u=Object.keys(i),f=Object.keys(o);if(u.length!==f.length)return!1;for(f=0;f<u.length;f++){var g=u[f];if(!h.call(o,g)||!Dn(i[g],o[g]))return!1}return!0}function kp(i){for(;i&&i.firstChild;)i=i.firstChild;return i}function wp(i,o){var u=kp(i);i=0;for(var f;u;){if(u.nodeType===3){if(f=i+u.textContent.length,i<=o&&f>=o)return{node:u,offset:o-i};i=f}e:{for(;u;){if(u.nextSibling){u=u.nextSibling;break e}u=u.parentNode}u=void 0}u=kp(u)}}function bp(i,o){return i&&o?i===o?!0:i&&i.nodeType===3?!1:o&&o.nodeType===3?bp(i,o.parentNode):"contains"in i?i.contains(o):i.compareDocumentPosition?!!(i.compareDocumentPosition(o)&16):!1:!1}function Sp(){for(var i=window,o=st();o instanceof i.HTMLIFrameElement;){try{var u=typeof o.contentWindow.location.href=="string"}catch{u=!1}if(u)i=o.contentWindow;else break;o=st(i.document)}return o}function ic(i){var o=i&&i.nodeName&&i.nodeName.toLowerCase();return o&&(o==="input"&&(i.type==="text"||i.type==="search"||i.type==="tel"||i.type==="url"||i.type==="password")||o==="textarea"||i.contentEditable==="true")}function Rk(i){var o=Sp(),u=i.focusedElem,f=i.selectionRange;if(o!==u&&u&&u.ownerDocument&&bp(u.ownerDocument.documentElement,u)){if(f!==null&&ic(u)){if(o=f.start,i=f.end,i===void 0&&(i=o),"selectionStart"in u)u.selectionStart=o,u.selectionEnd=Math.min(i,u.value.length);else if(i=(o=u.ownerDocument||document)&&o.defaultView||window,i.getSelection){i=i.getSelection();var g=u.textContent.length,y=Math.min(f.start,g);f=f.end===void 0?y:Math.min(f.end,g),!i.extend&&y>f&&(g=f,f=y,y=g),g=wp(u,y);var k=wp(u,f);g&&k&&(i.rangeCount!==1||i.anchorNode!==g.node||i.anchorOffset!==g.offset||i.focusNode!==k.node||i.focusOffset!==k.offset)&&(o=o.createRange(),o.setStart(g.node,g.offset),i.removeAllRanges(),y>f?(i.addRange(o),i.extend(k.node,k.offset)):(o.setEnd(k.node,k.offset),i.addRange(o)))}}for(o=[],i=u;i=i.parentNode;)i.nodeType===1&&o.push({element:i,left:i.scrollLeft,top:i.scrollTop});for(typeof u.focus=="function"&&u.focus(),u=0;u<o.length;u++)i=o[u],i.element.scrollLeft=i.left,i.element.scrollTop=i.top}}var Nk=c&&"documentMode"in document&&11>=document.documentMode,Vi=null,sc=null,Ys=null,oc=!1;function Op(i,o,u){var f=u.window===u?u.document:u.nodeType===9?u:u.ownerDocument;oc||Vi==null||Vi!==st(f)||(f=Vi,"selectionStart"in f&&ic(f)?f={start:f.selectionStart,end:f.selectionEnd}:(f=(f.ownerDocument&&f.ownerDocument.defaultView||window).getSelection(),f={anchorNode:f.anchorNode,anchorOffset:f.anchorOffset,focusNode:f.focusNode,focusOffset:f.focusOffset}),Ys&&qs(Ys,f)||(Ys=f,f=Dl(sc,"onSelect"),0<f.length&&(o=new Yu("onSelect","select",null,o,u),i.push({event:o,listeners:f}),o.target=Vi)))}function Ml(i,o){var u={};return u[i.toLowerCase()]=o.toLowerCase(),u["Webkit"+i]="webkit"+o,u["Moz"+i]="moz"+o,u}var Wi={animationend:Ml("Animation","AnimationEnd"),animationiteration:Ml("Animation","AnimationIteration"),animationstart:Ml("Animation","AnimationStart"),transitionend:Ml("Transition","TransitionEnd")},lc={},Cp={};c&&(Cp=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function Rl(i){if(lc[i])return lc[i];if(!Wi[i])return i;var o=Wi[i],u;for(u in o)if(o.hasOwnProperty(u)&&u in Cp)return lc[i]=o[u];return i}var Pp=Rl("animationend"),Ep=Rl("animationiteration"),Ap=Rl("animationstart"),Mp=Rl("transitionend"),Rp=new Map,Np="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Lr(i,o){Rp.set(i,o),l(o,[i])}for(var ac=0;ac<Np.length;ac++){var uc=Np[ac],Dk=uc.toLowerCase(),Tk=uc[0].toUpperCase()+uc.slice(1);Lr(Dk,"on"+Tk)}Lr(Pp,"onAnimationEnd"),Lr(Ep,"onAnimationIteration"),Lr(Ap,"onAnimationStart"),Lr("dblclick","onDoubleClick"),Lr("focusin","onFocus"),Lr("focusout","onBlur"),Lr(Mp,"onTransitionEnd"),a("onMouseEnter",["mouseout","mouseover"]),a("onMouseLeave",["mouseout","mouseover"]),a("onPointerEnter",["pointerout","pointerover"]),a("onPointerLeave",["pointerout","pointerover"]),l("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),l("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),l("onBeforeInput",["compositionend","keypress","textInput","paste"]),l("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),l("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Gs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Lk=new Set("cancel close invalid load scroll toggle".split(" ").concat(Gs));function Dp(i,o,u){var f=i.type||"unknown-event";i.currentTarget=u,D1(f,o,void 0,i),i.currentTarget=null}function Tp(i,o){o=(o&4)!==0;for(var u=0;u<i.length;u++){var f=i[u],g=f.event;f=f.listeners;e:{var y=void 0;if(o)for(var k=f.length-1;0<=k;k--){var E=f[k],M=E.instance,_=E.currentTarget;if(E=E.listener,M!==y&&g.isPropagationStopped())break e;Dp(g,E,_),y=M}else for(k=0;k<f.length;k++){if(E=f[k],M=E.instance,_=E.currentTarget,E=E.listener,M!==y&&g.isPropagationStopped())break e;Dp(g,E,_),y=M}}}if(sn)throw i=cr,sn=!1,cr=null,i}function We(i,o){var u=o[yc];u===void 0&&(u=o[yc]=new Set);var f=i+"__bubble";u.has(f)||(Lp(o,i,2,!1),u.add(f))}function cc(i,o,u){var f=0;o&&(f|=4),Lp(u,i,f,o)}var Nl="_reactListening"+Math.random().toString(36).slice(2);function Js(i){if(!i[Nl]){i[Nl]=!0,r.forEach(function(u){u!=="selectionchange"&&(Lk.has(u)||cc(u,!1,i),cc(u,!0,i))});var o=i.nodeType===9?i:i.ownerDocument;o===null||o[Nl]||(o[Nl]=!0,cc("selectionchange",!1,o))}}function Lp(i,o,u,f){switch(rp(o)){case 1:var g=K1;break;case 4:g=q1;break;default:g=Xu}u=g.bind(null,o,u,i),g=void 0,!gn||o!=="touchstart"&&o!=="touchmove"&&o!=="wheel"||(g=!0),f?g!==void 0?i.addEventListener(o,u,{capture:!0,passive:g}):i.addEventListener(o,u,!0):g!==void 0?i.addEventListener(o,u,{passive:g}):i.addEventListener(o,u,!1)}function hc(i,o,u,f,g){var y=f;if((o&1)===0&&(o&2)===0&&f!==null)e:for(;;){if(f===null)return;var k=f.tag;if(k===3||k===4){var E=f.stateNode.containerInfo;if(E===g||E.nodeType===8&&E.parentNode===g)break;if(k===4)for(k=f.return;k!==null;){var M=k.tag;if((M===3||M===4)&&(M=k.stateNode.containerInfo,M===g||M.nodeType===8&&M.parentNode===g))return;k=k.return}for(;E!==null;){if(k=di(E),k===null)return;if(M=k.tag,M===5||M===6){f=y=k;continue e}E=E.parentNode}}f=f.return}ur(function(){var _=y,K=Ls(u),G=[];e:{var $=Rp.get(i);if($!==void 0){var ce=Yu,ge=i;switch(i){case"keypress":if(Cl(u)===0)break e;case"keydown":case"keyup":ce=ck;break;case"focusin":ge="focus",ce=Zu;break;case"focusout":ge="blur",ce=Zu;break;case"beforeblur":case"afterblur":ce=Zu;break;case"click":if(u.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ce=op;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ce=J1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ce=dk;break;case Pp:case Ep:case Ap:ce=tk;break;case Mp:ce=gk;break;case"scroll":ce=Y1;break;case"wheel":ce=yk;break;case"copy":case"cut":case"paste":ce=rk;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ce=ap}var me=(o&4)!==0,nt=!me&&i==="scroll",I=me?$!==null?$+"Capture":null:$;me=[];for(var R=_,z;R!==null;){z=R;var ne=z.stateNode;if(z.tag===5&&ne!==null&&(z=ne,I!==null&&(ne=Ke(R,I),ne!=null&&me.push(Zs(R,ne,z)))),nt)break;R=R.return}0<me.length&&($=new ce($,ge,null,u,K),G.push({event:$,listeners:me}))}}if((o&7)===0){e:{if($=i==="mouseover"||i==="pointerover",ce=i==="mouseout"||i==="pointerout",$&&u!==zi&&(ge=u.relatedTarget||u.fromElement)&&(di(ge)||ge[hr]))break e;if((ce||$)&&($=K.window===K?K:($=K.ownerDocument)?$.defaultView||$.parentWindow:window,ce?(ge=u.relatedTarget||u.toElement,ce=_,ge=ge?di(ge):null,ge!==null&&(nt=fi(ge),ge!==nt||ge.tag!==5&&ge.tag!==6)&&(ge=null)):(ce=null,ge=_),ce!==ge)){if(me=op,ne="onMouseLeave",I="onMouseEnter",R="mouse",(i==="pointerout"||i==="pointerover")&&(me=ap,ne="onPointerLeave",I="onPointerEnter",R="pointer"),nt=ce==null?$:Ui(ce),z=ge==null?$:Ui(ge),$=new me(ne,R+"leave",ce,u,K),$.target=nt,$.relatedTarget=z,ne=null,di(K)===_&&(me=new me(I,R+"enter",ge,u,K),me.target=z,me.relatedTarget=nt,ne=me),nt=ne,ce&&ge)t:{for(me=ce,I=ge,R=0,z=me;z;z=Qi(z))R++;for(z=0,ne=I;ne;ne=Qi(ne))z++;for(;0<R-z;)me=Qi(me),R--;for(;0<z-R;)I=Qi(I),z--;for(;R--;){if(me===I||I!==null&&me===I.alternate)break t;me=Qi(me),I=Qi(I)}me=null}else me=null;ce!==null&&jp(G,$,ce,me,!1),ge!==null&&nt!==null&&jp(G,nt,ge,me,!0)}}e:{if($=_?Ui(_):window,ce=$.nodeName&&$.nodeName.toLowerCase(),ce==="select"||ce==="input"&&$.type==="file")var ye=Ok;else if(pp($))if(mp)ye=Ak;else{ye=Pk;var be=Ck}else(ce=$.nodeName)&&ce.toLowerCase()==="input"&&($.type==="checkbox"||$.type==="radio")&&(ye=Ek);if(ye&&(ye=ye(i,_))){gp(G,ye,u,K);break e}be&&be(i,$,_),i==="focusout"&&(be=$._wrapperState)&&be.controlled&&$.type==="number"&&ar($,"number",$.value)}switch(be=_?Ui(_):window,i){case"focusin":(pp(be)||be.contentEditable==="true")&&(Vi=be,sc=_,Ys=null);break;case"focusout":Ys=sc=Vi=null;break;case"mousedown":oc=!0;break;case"contextmenu":case"mouseup":case"dragend":oc=!1,Op(G,u,K);break;case"selectionchange":if(Nk)break;case"keydown":case"keyup":Op(G,u,K)}var Se;if(tc)e:{switch(i){case"compositionstart":var Oe="onCompositionStart";break e;case"compositionend":Oe="onCompositionEnd";break e;case"compositionupdate":Oe="onCompositionUpdate";break e}Oe=void 0}else Hi?fp(i,u)&&(Oe="onCompositionEnd"):i==="keydown"&&u.keyCode===229&&(Oe="onCompositionStart");Oe&&(up&&u.locale!=="ko"&&(Hi||Oe!=="onCompositionStart"?Oe==="onCompositionEnd"&&Hi&&(Se=ip()):(Tr=K,qu="value"in Tr?Tr.value:Tr.textContent,Hi=!0)),be=Dl(_,Oe),0<be.length&&(Oe=new lp(Oe,i,null,u,K),G.push({event:Oe,listeners:be}),Se?Oe.data=Se:(Se=dp(u),Se!==null&&(Oe.data=Se)))),(Se=xk?kk(i,u):wk(i,u))&&(_=Dl(_,"onBeforeInput"),0<_.length&&(K=new lp("onBeforeInput","beforeinput",null,u,K),G.push({event:K,listeners:_}),K.data=Se))}Tp(G,o)})}function Zs(i,o,u){return{instance:i,listener:o,currentTarget:u}}function Dl(i,o){for(var u=o+"Capture",f=[];i!==null;){var g=i,y=g.stateNode;g.tag===5&&y!==null&&(g=y,y=Ke(i,u),y!=null&&f.unshift(Zs(i,y,g)),y=Ke(i,o),y!=null&&f.push(Zs(i,y,g))),i=i.return}return f}function Qi(i){if(i===null)return null;do i=i.return;while(i&&i.tag!==5);return i||null}function jp(i,o,u,f,g){for(var y=o._reactName,k=[];u!==null&&u!==f;){var E=u,M=E.alternate,_=E.stateNode;if(M!==null&&M===f)break;E.tag===5&&_!==null&&(E=_,g?(M=Ke(u,y),M!=null&&k.unshift(Zs(u,M,E))):g||(M=Ke(u,y),M!=null&&k.push(Zs(u,M,E)))),u=u.return}k.length!==0&&i.push({event:o,listeners:k})}var jk=/\r\n?/g,Ik=/\u0000|\uFFFD/g;function Ip(i){return(typeof i=="string"?i:""+i).replace(jk,`
`).replace(Ik,"")}function Tl(i,o,u){if(o=Ip(o),Ip(i)!==o&&u)throw Error(t(425))}function Ll(){}var fc=null,dc=null;function pc(i,o){return i==="textarea"||i==="noscript"||typeof o.children=="string"||typeof o.children=="number"||typeof o.dangerouslySetInnerHTML=="object"&&o.dangerouslySetInnerHTML!==null&&o.dangerouslySetInnerHTML.__html!=null}var gc=typeof setTimeout=="function"?setTimeout:void 0,Bk=typeof clearTimeout=="function"?clearTimeout:void 0,Bp=typeof Promise=="function"?Promise:void 0,zk=typeof queueMicrotask=="function"?queueMicrotask:typeof Bp<"u"?function(i){return Bp.resolve(null).then(i).catch(Fk)}:gc;function Fk(i){setTimeout(function(){throw i})}function mc(i,o){var u=o,f=0;do{var g=u.nextSibling;if(i.removeChild(u),g&&g.nodeType===8)if(u=g.data,u==="/$"){if(f===0){i.removeChild(g),Ws(o);return}f--}else u!=="$"&&u!=="$?"&&u!=="$!"||f++;u=g}while(u);Ws(o)}function jr(i){for(;i!=null;i=i.nextSibling){var o=i.nodeType;if(o===1||o===3)break;if(o===8){if(o=i.data,o==="$"||o==="$!"||o==="$?")break;if(o==="/$")return null}}return i}function zp(i){i=i.previousSibling;for(var o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="$"||u==="$!"||u==="$?"){if(o===0)return i;o--}else u==="/$"&&o++}i=i.previousSibling}return null}var $i=Math.random().toString(36).slice(2),Kn="__reactFiber$"+$i,eo="__reactProps$"+$i,hr="__reactContainer$"+$i,yc="__reactEvents$"+$i,_k="__reactListeners$"+$i,Hk="__reactHandles$"+$i;function di(i){var o=i[Kn];if(o)return o;for(var u=i.parentNode;u;){if(o=u[hr]||u[Kn]){if(u=o.alternate,o.child!==null||u!==null&&u.child!==null)for(i=zp(i);i!==null;){if(u=i[Kn])return u;i=zp(i)}return o}i=u,u=i.parentNode}return null}function to(i){return i=i[Kn]||i[hr],!i||i.tag!==5&&i.tag!==6&&i.tag!==13&&i.tag!==3?null:i}function Ui(i){if(i.tag===5||i.tag===6)return i.stateNode;throw Error(t(33))}function jl(i){return i[eo]||null}var vc=[],Xi=-1;function Ir(i){return{current:i}}function Qe(i){0>Xi||(i.current=vc[Xi],vc[Xi]=null,Xi--)}function He(i,o){Xi++,vc[Xi]=i.current,i.current=o}var Br={},Nt=Ir(Br),Kt=Ir(!1),pi=Br;function Ki(i,o){var u=i.type.contextTypes;if(!u)return Br;var f=i.stateNode;if(f&&f.__reactInternalMemoizedUnmaskedChildContext===o)return f.__reactInternalMemoizedMaskedChildContext;var g={},y;for(y in u)g[y]=o[y];return f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=o,i.__reactInternalMemoizedMaskedChildContext=g),g}function qt(i){return i=i.childContextTypes,i!=null}function Il(){Qe(Kt),Qe(Nt)}function Fp(i,o,u){if(Nt.current!==Br)throw Error(t(168));He(Nt,o),He(Kt,u)}function _p(i,o,u){var f=i.stateNode;if(o=o.childContextTypes,typeof f.getChildContext!="function")return u;f=f.getChildContext();for(var g in f)if(!(g in o))throw Error(t(108,he(i)||"Unknown",g));return ee({},u,f)}function Bl(i){return i=(i=i.stateNode)&&i.__reactInternalMemoizedMergedChildContext||Br,pi=Nt.current,He(Nt,i),He(Kt,Kt.current),!0}function Hp(i,o,u){var f=i.stateNode;if(!f)throw Error(t(169));u?(i=_p(i,o,pi),f.__reactInternalMemoizedMergedChildContext=i,Qe(Kt),Qe(Nt),He(Nt,i)):Qe(Kt),He(Kt,u)}var fr=null,zl=!1,xc=!1;function Vp(i){fr===null?fr=[i]:fr.push(i)}function Vk(i){zl=!0,Vp(i)}function zr(){if(!xc&&fr!==null){xc=!0;var i=0,o=Be;try{var u=fr;for(Be=1;i<u.length;i++){var f=u[i];do f=f(!0);while(f!==null)}fr=null,zl=!1}catch(g){throw fr!==null&&(fr=fr.slice(i+1)),Qd(Hu,zr),g}finally{Be=o,xc=!1}}return null}var qi=[],Yi=0,Fl=null,_l=0,mn=[],yn=0,gi=null,dr=1,pr="";function mi(i,o){qi[Yi++]=_l,qi[Yi++]=Fl,Fl=i,_l=o}function Wp(i,o,u){mn[yn++]=dr,mn[yn++]=pr,mn[yn++]=gi,gi=i;var f=dr;i=pr;var g=32-Nn(f)-1;f&=~(1<<g),u+=1;var y=32-Nn(o)+g;if(30<y){var k=g-g%5;y=(f&(1<<k)-1).toString(32),f>>=k,g-=k,dr=1<<32-Nn(o)+g|u<<g|f,pr=y+i}else dr=1<<y|u<<g|f,pr=i}function kc(i){i.return!==null&&(mi(i,1),Wp(i,1,0))}function wc(i){for(;i===Fl;)Fl=qi[--Yi],qi[Yi]=null,_l=qi[--Yi],qi[Yi]=null;for(;i===gi;)gi=mn[--yn],mn[yn]=null,pr=mn[--yn],mn[yn]=null,dr=mn[--yn],mn[yn]=null}var ln=null,an=null,Ue=!1,Tn=null;function Qp(i,o){var u=wn(5,null,null,0);u.elementType="DELETED",u.stateNode=o,u.return=i,o=i.deletions,o===null?(i.deletions=[u],i.flags|=16):o.push(u)}function $p(i,o){switch(i.tag){case 5:var u=i.type;return o=o.nodeType!==1||u.toLowerCase()!==o.nodeName.toLowerCase()?null:o,o!==null?(i.stateNode=o,ln=i,an=jr(o.firstChild),!0):!1;case 6:return o=i.pendingProps===""||o.nodeType!==3?null:o,o!==null?(i.stateNode=o,ln=i,an=null,!0):!1;case 13:return o=o.nodeType!==8?null:o,o!==null?(u=gi!==null?{id:dr,overflow:pr}:null,i.memoizedState={dehydrated:o,treeContext:u,retryLane:1073741824},u=wn(18,null,null,0),u.stateNode=o,u.return=i,i.child=u,ln=i,an=null,!0):!1;default:return!1}}function bc(i){return(i.mode&1)!==0&&(i.flags&128)===0}function Sc(i){if(Ue){var o=an;if(o){var u=o;if(!$p(i,o)){if(bc(i))throw Error(t(418));o=jr(u.nextSibling);var f=ln;o&&$p(i,o)?Qp(f,u):(i.flags=i.flags&-4097|2,Ue=!1,ln=i)}}else{if(bc(i))throw Error(t(418));i.flags=i.flags&-4097|2,Ue=!1,ln=i}}}function Up(i){for(i=i.return;i!==null&&i.tag!==5&&i.tag!==3&&i.tag!==13;)i=i.return;ln=i}function Hl(i){if(i!==ln)return!1;if(!Ue)return Up(i),Ue=!0,!1;var o;if((o=i.tag!==3)&&!(o=i.tag!==5)&&(o=i.type,o=o!=="head"&&o!=="body"&&!pc(i.type,i.memoizedProps)),o&&(o=an)){if(bc(i))throw Xp(),Error(t(418));for(;o;)Qp(i,o),o=jr(o.nextSibling)}if(Up(i),i.tag===13){if(i=i.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(t(317));e:{for(i=i.nextSibling,o=0;i;){if(i.nodeType===8){var u=i.data;if(u==="/$"){if(o===0){an=jr(i.nextSibling);break e}o--}else u!=="$"&&u!=="$!"&&u!=="$?"||o++}i=i.nextSibling}an=null}}else an=ln?jr(i.stateNode.nextSibling):null;return!0}function Xp(){for(var i=an;i;)i=jr(i.nextSibling)}function Gi(){an=ln=null,Ue=!1}function Oc(i){Tn===null?Tn=[i]:Tn.push(i)}var Wk=B.ReactCurrentBatchConfig;function no(i,o,u){if(i=u.ref,i!==null&&typeof i!="function"&&typeof i!="object"){if(u._owner){if(u=u._owner,u){if(u.tag!==1)throw Error(t(309));var f=u.stateNode}if(!f)throw Error(t(147,i));var g=f,y=""+i;return o!==null&&o.ref!==null&&typeof o.ref=="function"&&o.ref._stringRef===y?o.ref:(o=function(k){var E=g.refs;k===null?delete E[y]:E[y]=k},o._stringRef=y,o)}if(typeof i!="string")throw Error(t(284));if(!u._owner)throw Error(t(290,i))}return i}function Vl(i,o){throw i=Object.prototype.toString.call(o),Error(t(31,i==="[object Object]"?"object with keys {"+Object.keys(o).join(", ")+"}":i))}function Kp(i){var o=i._init;return o(i._payload)}function qp(i){function o(I,R){if(i){var z=I.deletions;z===null?(I.deletions=[R],I.flags|=16):z.push(R)}}function u(I,R){if(!i)return null;for(;R!==null;)o(I,R),R=R.sibling;return null}function f(I,R){for(I=new Map;R!==null;)R.key!==null?I.set(R.key,R):I.set(R.index,R),R=R.sibling;return I}function g(I,R){return I=Ur(I,R),I.index=0,I.sibling=null,I}function y(I,R,z){return I.index=z,i?(z=I.alternate,z!==null?(z=z.index,z<R?(I.flags|=2,R):z):(I.flags|=2,R)):(I.flags|=1048576,R)}function k(I){return i&&I.alternate===null&&(I.flags|=2),I}function E(I,R,z,ne){return R===null||R.tag!==6?(R=gh(z,I.mode,ne),R.return=I,R):(R=g(R,z),R.return=I,R)}function M(I,R,z,ne){var ye=z.type;return ye===L?K(I,R,z.props.children,ne,z.key):R!==null&&(R.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===ue&&Kp(ye)===R.type)?(ne=g(R,z.props),ne.ref=no(I,R,z),ne.return=I,ne):(ne=fa(z.type,z.key,z.props,null,I.mode,ne),ne.ref=no(I,R,z),ne.return=I,ne)}function _(I,R,z,ne){return R===null||R.tag!==4||R.stateNode.containerInfo!==z.containerInfo||R.stateNode.implementation!==z.implementation?(R=mh(z,I.mode,ne),R.return=I,R):(R=g(R,z.children||[]),R.return=I,R)}function K(I,R,z,ne,ye){return R===null||R.tag!==7?(R=Oi(z,I.mode,ne,ye),R.return=I,R):(R=g(R,z),R.return=I,R)}function G(I,R,z){if(typeof R=="string"&&R!==""||typeof R=="number")return R=gh(""+R,I.mode,z),R.return=I,R;if(typeof R=="object"&&R!==null){switch(R.$$typeof){case T:return z=fa(R.type,R.key,R.props,null,I.mode,z),z.ref=no(I,null,R),z.return=I,z;case F:return R=mh(R,I.mode,z),R.return=I,R;case ue:var ne=R._init;return G(I,ne(R._payload),z)}if(ct(R)||re(R))return R=Oi(R,I.mode,z,null),R.return=I,R;Vl(I,R)}return null}function $(I,R,z,ne){var ye=R!==null?R.key:null;if(typeof z=="string"&&z!==""||typeof z=="number")return ye!==null?null:E(I,R,""+z,ne);if(typeof z=="object"&&z!==null){switch(z.$$typeof){case T:return z.key===ye?M(I,R,z,ne):null;case F:return z.key===ye?_(I,R,z,ne):null;case ue:return ye=z._init,$(I,R,ye(z._payload),ne)}if(ct(z)||re(z))return ye!==null?null:K(I,R,z,ne,null);Vl(I,z)}return null}function ce(I,R,z,ne,ye){if(typeof ne=="string"&&ne!==""||typeof ne=="number")return I=I.get(z)||null,E(R,I,""+ne,ye);if(typeof ne=="object"&&ne!==null){switch(ne.$$typeof){case T:return I=I.get(ne.key===null?z:ne.key)||null,M(R,I,ne,ye);case F:return I=I.get(ne.key===null?z:ne.key)||null,_(R,I,ne,ye);case ue:var be=ne._init;return ce(I,R,z,be(ne._payload),ye)}if(ct(ne)||re(ne))return I=I.get(z)||null,K(R,I,ne,ye,null);Vl(R,ne)}return null}function ge(I,R,z,ne){for(var ye=null,be=null,Se=R,Oe=R=0,vt=null;Se!==null&&Oe<z.length;Oe++){Se.index>Oe?(vt=Se,Se=null):vt=Se.sibling;var Te=$(I,Se,z[Oe],ne);if(Te===null){Se===null&&(Se=vt);break}i&&Se&&Te.alternate===null&&o(I,Se),R=y(Te,R,Oe),be===null?ye=Te:be.sibling=Te,be=Te,Se=vt}if(Oe===z.length)return u(I,Se),Ue&&mi(I,Oe),ye;if(Se===null){for(;Oe<z.length;Oe++)Se=G(I,z[Oe],ne),Se!==null&&(R=y(Se,R,Oe),be===null?ye=Se:be.sibling=Se,be=Se);return Ue&&mi(I,Oe),ye}for(Se=f(I,Se);Oe<z.length;Oe++)vt=ce(Se,I,Oe,z[Oe],ne),vt!==null&&(i&&vt.alternate!==null&&Se.delete(vt.key===null?Oe:vt.key),R=y(vt,R,Oe),be===null?ye=vt:be.sibling=vt,be=vt);return i&&Se.forEach(function(Xr){return o(I,Xr)}),Ue&&mi(I,Oe),ye}function me(I,R,z,ne){var ye=re(z);if(typeof ye!="function")throw Error(t(150));if(z=ye.call(z),z==null)throw Error(t(151));for(var be=ye=null,Se=R,Oe=R=0,vt=null,Te=z.next();Se!==null&&!Te.done;Oe++,Te=z.next()){Se.index>Oe?(vt=Se,Se=null):vt=Se.sibling;var Xr=$(I,Se,Te.value,ne);if(Xr===null){Se===null&&(Se=vt);break}i&&Se&&Xr.alternate===null&&o(I,Se),R=y(Xr,R,Oe),be===null?ye=Xr:be.sibling=Xr,be=Xr,Se=vt}if(Te.done)return u(I,Se),Ue&&mi(I,Oe),ye;if(Se===null){for(;!Te.done;Oe++,Te=z.next())Te=G(I,Te.value,ne),Te!==null&&(R=y(Te,R,Oe),be===null?ye=Te:be.sibling=Te,be=Te);return Ue&&mi(I,Oe),ye}for(Se=f(I,Se);!Te.done;Oe++,Te=z.next())Te=ce(Se,I,Oe,Te.value,ne),Te!==null&&(i&&Te.alternate!==null&&Se.delete(Te.key===null?Oe:Te.key),R=y(Te,R,Oe),be===null?ye=Te:be.sibling=Te,be=Te);return i&&Se.forEach(function(bw){return o(I,bw)}),Ue&&mi(I,Oe),ye}function nt(I,R,z,ne){if(typeof z=="object"&&z!==null&&z.type===L&&z.key===null&&(z=z.props.children),typeof z=="object"&&z!==null){switch(z.$$typeof){case T:e:{for(var ye=z.key,be=R;be!==null;){if(be.key===ye){if(ye=z.type,ye===L){if(be.tag===7){u(I,be.sibling),R=g(be,z.props.children),R.return=I,I=R;break e}}else if(be.elementType===ye||typeof ye=="object"&&ye!==null&&ye.$$typeof===ue&&Kp(ye)===be.type){u(I,be.sibling),R=g(be,z.props),R.ref=no(I,be,z),R.return=I,I=R;break e}u(I,be);break}else o(I,be);be=be.sibling}z.type===L?(R=Oi(z.props.children,I.mode,ne,z.key),R.return=I,I=R):(ne=fa(z.type,z.key,z.props,null,I.mode,ne),ne.ref=no(I,R,z),ne.return=I,I=ne)}return k(I);case F:e:{for(be=z.key;R!==null;){if(R.key===be)if(R.tag===4&&R.stateNode.containerInfo===z.containerInfo&&R.stateNode.implementation===z.implementation){u(I,R.sibling),R=g(R,z.children||[]),R.return=I,I=R;break e}else{u(I,R);break}else o(I,R);R=R.sibling}R=mh(z,I.mode,ne),R.return=I,I=R}return k(I);case ue:return be=z._init,nt(I,R,be(z._payload),ne)}if(ct(z))return ge(I,R,z,ne);if(re(z))return me(I,R,z,ne);Vl(I,z)}return typeof z=="string"&&z!==""||typeof z=="number"?(z=""+z,R!==null&&R.tag===6?(u(I,R.sibling),R=g(R,z),R.return=I,I=R):(u(I,R),R=gh(z,I.mode,ne),R.return=I,I=R),k(I)):u(I,R)}return nt}var Ji=qp(!0),Yp=qp(!1),Wl=Ir(null),Ql=null,Zi=null,Cc=null;function Pc(){Cc=Zi=Ql=null}function Ec(i){var o=Wl.current;Qe(Wl),i._currentValue=o}function Ac(i,o,u){for(;i!==null;){var f=i.alternate;if((i.childLanes&o)!==o?(i.childLanes|=o,f!==null&&(f.childLanes|=o)):f!==null&&(f.childLanes&o)!==o&&(f.childLanes|=o),i===u)break;i=i.return}}function es(i,o){Ql=i,Cc=Zi=null,i=i.dependencies,i!==null&&i.firstContext!==null&&((i.lanes&o)!==0&&(Yt=!0),i.firstContext=null)}function vn(i){var o=i._currentValue;if(Cc!==i)if(i={context:i,memoizedValue:o,next:null},Zi===null){if(Ql===null)throw Error(t(308));Zi=i,Ql.dependencies={lanes:0,firstContext:i}}else Zi=Zi.next=i;return o}var yi=null;function Mc(i){yi===null?yi=[i]:yi.push(i)}function Gp(i,o,u,f){var g=o.interleaved;return g===null?(u.next=u,Mc(o)):(u.next=g.next,g.next=u),o.interleaved=u,gr(i,f)}function gr(i,o){i.lanes|=o;var u=i.alternate;for(u!==null&&(u.lanes|=o),u=i,i=i.return;i!==null;)i.childLanes|=o,u=i.alternate,u!==null&&(u.childLanes|=o),u=i,i=i.return;return u.tag===3?u.stateNode:null}var Fr=!1;function Rc(i){i.updateQueue={baseState:i.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jp(i,o){i=i.updateQueue,o.updateQueue===i&&(o.updateQueue={baseState:i.baseState,firstBaseUpdate:i.firstBaseUpdate,lastBaseUpdate:i.lastBaseUpdate,shared:i.shared,effects:i.effects})}function mr(i,o){return{eventTime:i,lane:o,tag:0,payload:null,callback:null,next:null}}function _r(i,o,u){var f=i.updateQueue;if(f===null)return null;if(f=f.shared,(Ne&2)!==0){var g=f.pending;return g===null?o.next=o:(o.next=g.next,g.next=o),f.pending=o,gr(i,u)}return g=f.interleaved,g===null?(o.next=o,Mc(f)):(o.next=g.next,g.next=o),f.interleaved=o,gr(i,u)}function $l(i,o,u){if(o=o.updateQueue,o!==null&&(o=o.shared,(u&4194240)!==0)){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,Qu(i,u)}}function Zp(i,o){var u=i.updateQueue,f=i.alternate;if(f!==null&&(f=f.updateQueue,u===f)){var g=null,y=null;if(u=u.firstBaseUpdate,u!==null){do{var k={eventTime:u.eventTime,lane:u.lane,tag:u.tag,payload:u.payload,callback:u.callback,next:null};y===null?g=y=k:y=y.next=k,u=u.next}while(u!==null);y===null?g=y=o:y=y.next=o}else g=y=o;u={baseState:f.baseState,firstBaseUpdate:g,lastBaseUpdate:y,shared:f.shared,effects:f.effects},i.updateQueue=u;return}i=u.lastBaseUpdate,i===null?u.firstBaseUpdate=o:i.next=o,u.lastBaseUpdate=o}function Ul(i,o,u,f){var g=i.updateQueue;Fr=!1;var y=g.firstBaseUpdate,k=g.lastBaseUpdate,E=g.shared.pending;if(E!==null){g.shared.pending=null;var M=E,_=M.next;M.next=null,k===null?y=_:k.next=_,k=M;var K=i.alternate;K!==null&&(K=K.updateQueue,E=K.lastBaseUpdate,E!==k&&(E===null?K.firstBaseUpdate=_:E.next=_,K.lastBaseUpdate=M))}if(y!==null){var G=g.baseState;k=0,K=_=M=null,E=y;do{var $=E.lane,ce=E.eventTime;if((f&$)===$){K!==null&&(K=K.next={eventTime:ce,lane:0,tag:E.tag,payload:E.payload,callback:E.callback,next:null});e:{var ge=i,me=E;switch($=o,ce=u,me.tag){case 1:if(ge=me.payload,typeof ge=="function"){G=ge.call(ce,G,$);break e}G=ge;break e;case 3:ge.flags=ge.flags&-65537|128;case 0:if(ge=me.payload,$=typeof ge=="function"?ge.call(ce,G,$):ge,$==null)break e;G=ee({},G,$);break e;case 2:Fr=!0}}E.callback!==null&&E.lane!==0&&(i.flags|=64,$=g.effects,$===null?g.effects=[E]:$.push(E))}else ce={eventTime:ce,lane:$,tag:E.tag,payload:E.payload,callback:E.callback,next:null},K===null?(_=K=ce,M=G):K=K.next=ce,k|=$;if(E=E.next,E===null){if(E=g.shared.pending,E===null)break;$=E,E=$.next,$.next=null,g.lastBaseUpdate=$,g.shared.pending=null}}while(!0);if(K===null&&(M=G),g.baseState=M,g.firstBaseUpdate=_,g.lastBaseUpdate=K,o=g.shared.interleaved,o!==null){g=o;do k|=g.lane,g=g.next;while(g!==o)}else y===null&&(g.shared.lanes=0);ki|=k,i.lanes=k,i.memoizedState=G}}function eg(i,o,u){if(i=o.effects,o.effects=null,i!==null)for(o=0;o<i.length;o++){var f=i[o],g=f.callback;if(g!==null){if(f.callback=null,f=u,typeof g!="function")throw Error(t(191,g));g.call(f)}}}var ro={},qn=Ir(ro),io=Ir(ro),so=Ir(ro);function vi(i){if(i===ro)throw Error(t(174));return i}function Nc(i,o){switch(He(so,o),He(io,i),He(qn,ro),i=o.nodeType,i){case 9:case 11:o=(o=o.documentElement)?o.namespaceURI:rn(null,"");break;default:i=i===8?o.parentNode:o,o=i.namespaceURI||null,i=i.tagName,o=rn(o,i)}Qe(qn),He(qn,o)}function ts(){Qe(qn),Qe(io),Qe(so)}function tg(i){vi(so.current);var o=vi(qn.current),u=rn(o,i.type);o!==u&&(He(io,i),He(qn,u))}function Dc(i){io.current===i&&(Qe(qn),Qe(io))}var qe=Ir(0);function Xl(i){for(var o=i;o!==null;){if(o.tag===13){var u=o.memoizedState;if(u!==null&&(u=u.dehydrated,u===null||u.data==="$?"||u.data==="$!"))return o}else if(o.tag===19&&o.memoizedProps.revealOrder!==void 0){if((o.flags&128)!==0)return o}else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return null;o=o.return}o.sibling.return=o.return,o=o.sibling}return null}var Tc=[];function Lc(){for(var i=0;i<Tc.length;i++)Tc[i]._workInProgressVersionPrimary=null;Tc.length=0}var Kl=B.ReactCurrentDispatcher,jc=B.ReactCurrentBatchConfig,xi=0,Ye=null,ft=null,mt=null,ql=!1,oo=!1,lo=0,Qk=0;function Dt(){throw Error(t(321))}function Ic(i,o){if(o===null)return!1;for(var u=0;u<o.length&&u<i.length;u++)if(!Dn(i[u],o[u]))return!1;return!0}function Bc(i,o,u,f,g,y){if(xi=y,Ye=o,o.memoizedState=null,o.updateQueue=null,o.lanes=0,Kl.current=i===null||i.memoizedState===null?Kk:qk,i=u(f,g),oo){y=0;do{if(oo=!1,lo=0,25<=y)throw Error(t(301));y+=1,mt=ft=null,o.updateQueue=null,Kl.current=Yk,i=u(f,g)}while(oo)}if(Kl.current=Jl,o=ft!==null&&ft.next!==null,xi=0,mt=ft=Ye=null,ql=!1,o)throw Error(t(300));return i}function zc(){var i=lo!==0;return lo=0,i}function Yn(){var i={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mt===null?Ye.memoizedState=mt=i:mt=mt.next=i,mt}function xn(){if(ft===null){var i=Ye.alternate;i=i!==null?i.memoizedState:null}else i=ft.next;var o=mt===null?Ye.memoizedState:mt.next;if(o!==null)mt=o,ft=i;else{if(i===null)throw Error(t(310));ft=i,i={memoizedState:ft.memoizedState,baseState:ft.baseState,baseQueue:ft.baseQueue,queue:ft.queue,next:null},mt===null?Ye.memoizedState=mt=i:mt=mt.next=i}return mt}function ao(i,o){return typeof o=="function"?o(i):o}function Fc(i){var o=xn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=ft,g=f.baseQueue,y=u.pending;if(y!==null){if(g!==null){var k=g.next;g.next=y.next,y.next=k}f.baseQueue=g=y,u.pending=null}if(g!==null){y=g.next,f=f.baseState;var E=k=null,M=null,_=y;do{var K=_.lane;if((xi&K)===K)M!==null&&(M=M.next={lane:0,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null}),f=_.hasEagerState?_.eagerState:i(f,_.action);else{var G={lane:K,action:_.action,hasEagerState:_.hasEagerState,eagerState:_.eagerState,next:null};M===null?(E=M=G,k=f):M=M.next=G,Ye.lanes|=K,ki|=K}_=_.next}while(_!==null&&_!==y);M===null?k=f:M.next=E,Dn(f,o.memoizedState)||(Yt=!0),o.memoizedState=f,o.baseState=k,o.baseQueue=M,u.lastRenderedState=f}if(i=u.interleaved,i!==null){g=i;do y=g.lane,Ye.lanes|=y,ki|=y,g=g.next;while(g!==i)}else g===null&&(u.lanes=0);return[o.memoizedState,u.dispatch]}function _c(i){var o=xn(),u=o.queue;if(u===null)throw Error(t(311));u.lastRenderedReducer=i;var f=u.dispatch,g=u.pending,y=o.memoizedState;if(g!==null){u.pending=null;var k=g=g.next;do y=i(y,k.action),k=k.next;while(k!==g);Dn(y,o.memoizedState)||(Yt=!0),o.memoizedState=y,o.baseQueue===null&&(o.baseState=y),u.lastRenderedState=y}return[y,f]}function ng(){}function rg(i,o){var u=Ye,f=xn(),g=o(),y=!Dn(f.memoizedState,g);if(y&&(f.memoizedState=g,Yt=!0),f=f.queue,Hc(og.bind(null,u,f,i),[i]),f.getSnapshot!==o||y||mt!==null&&mt.memoizedState.tag&1){if(u.flags|=2048,uo(9,sg.bind(null,u,f,g,o),void 0,null),yt===null)throw Error(t(349));(xi&30)!==0||ig(u,o,g)}return g}function ig(i,o,u){i.flags|=16384,i={getSnapshot:o,value:u},o=Ye.updateQueue,o===null?(o={lastEffect:null,stores:null},Ye.updateQueue=o,o.stores=[i]):(u=o.stores,u===null?o.stores=[i]:u.push(i))}function sg(i,o,u,f){o.value=u,o.getSnapshot=f,lg(o)&&ag(i)}function og(i,o,u){return u(function(){lg(o)&&ag(i)})}function lg(i){var o=i.getSnapshot;i=i.value;try{var u=o();return!Dn(i,u)}catch{return!0}}function ag(i){var o=gr(i,1);o!==null&&Bn(o,i,1,-1)}function ug(i){var o=Yn();return typeof i=="function"&&(i=i()),o.memoizedState=o.baseState=i,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ao,lastRenderedState:i},o.queue=i,i=i.dispatch=Xk.bind(null,Ye,i),[o.memoizedState,i]}function uo(i,o,u,f){return i={tag:i,create:o,destroy:u,deps:f,next:null},o=Ye.updateQueue,o===null?(o={lastEffect:null,stores:null},Ye.updateQueue=o,o.lastEffect=i.next=i):(u=o.lastEffect,u===null?o.lastEffect=i.next=i:(f=u.next,u.next=i,i.next=f,o.lastEffect=i)),i}function cg(){return xn().memoizedState}function Yl(i,o,u,f){var g=Yn();Ye.flags|=i,g.memoizedState=uo(1|o,u,void 0,f===void 0?null:f)}function Gl(i,o,u,f){var g=xn();f=f===void 0?null:f;var y=void 0;if(ft!==null){var k=ft.memoizedState;if(y=k.destroy,f!==null&&Ic(f,k.deps)){g.memoizedState=uo(o,u,y,f);return}}Ye.flags|=i,g.memoizedState=uo(1|o,u,y,f)}function hg(i,o){return Yl(8390656,8,i,o)}function Hc(i,o){return Gl(2048,8,i,o)}function fg(i,o){return Gl(4,2,i,o)}function dg(i,o){return Gl(4,4,i,o)}function pg(i,o){if(typeof o=="function")return i=i(),o(i),function(){o(null)};if(o!=null)return i=i(),o.current=i,function(){o.current=null}}function gg(i,o,u){return u=u!=null?u.concat([i]):null,Gl(4,4,pg.bind(null,o,i),u)}function Vc(){}function mg(i,o){var u=xn();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Ic(o,f[1])?f[0]:(u.memoizedState=[i,o],i)}function yg(i,o){var u=xn();o=o===void 0?null:o;var f=u.memoizedState;return f!==null&&o!==null&&Ic(o,f[1])?f[0]:(i=i(),u.memoizedState=[i,o],i)}function vg(i,o,u){return(xi&21)===0?(i.baseState&&(i.baseState=!1,Yt=!0),i.memoizedState=u):(Dn(u,o)||(u=Kd(),Ye.lanes|=u,ki|=u,i.baseState=!0),o)}function $k(i,o){var u=Be;Be=u!==0&&4>u?u:4,i(!0);var f=jc.transition;jc.transition={};try{i(!1),o()}finally{Be=u,jc.transition=f}}function xg(){return xn().memoizedState}function Uk(i,o,u){var f=Qr(i);if(u={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null},kg(i))wg(o,u);else if(u=Gp(i,o,u,f),u!==null){var g=Ht();Bn(u,i,f,g),bg(u,o,f)}}function Xk(i,o,u){var f=Qr(i),g={lane:f,action:u,hasEagerState:!1,eagerState:null,next:null};if(kg(i))wg(o,g);else{var y=i.alternate;if(i.lanes===0&&(y===null||y.lanes===0)&&(y=o.lastRenderedReducer,y!==null))try{var k=o.lastRenderedState,E=y(k,u);if(g.hasEagerState=!0,g.eagerState=E,Dn(E,k)){var M=o.interleaved;M===null?(g.next=g,Mc(o)):(g.next=M.next,M.next=g),o.interleaved=g;return}}catch{}finally{}u=Gp(i,o,g,f),u!==null&&(g=Ht(),Bn(u,i,f,g),bg(u,o,f))}}function kg(i){var o=i.alternate;return i===Ye||o!==null&&o===Ye}function wg(i,o){oo=ql=!0;var u=i.pending;u===null?o.next=o:(o.next=u.next,u.next=o),i.pending=o}function bg(i,o,u){if((u&4194240)!==0){var f=o.lanes;f&=i.pendingLanes,u|=f,o.lanes=u,Qu(i,u)}}var Jl={readContext:vn,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useInsertionEffect:Dt,useLayoutEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useMutableSource:Dt,useSyncExternalStore:Dt,useId:Dt,unstable_isNewReconciler:!1},Kk={readContext:vn,useCallback:function(i,o){return Yn().memoizedState=[i,o===void 0?null:o],i},useContext:vn,useEffect:hg,useImperativeHandle:function(i,o,u){return u=u!=null?u.concat([i]):null,Yl(4194308,4,pg.bind(null,o,i),u)},useLayoutEffect:function(i,o){return Yl(4194308,4,i,o)},useInsertionEffect:function(i,o){return Yl(4,2,i,o)},useMemo:function(i,o){var u=Yn();return o=o===void 0?null:o,i=i(),u.memoizedState=[i,o],i},useReducer:function(i,o,u){var f=Yn();return o=u!==void 0?u(o):o,f.memoizedState=f.baseState=o,i={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:i,lastRenderedState:o},f.queue=i,i=i.dispatch=Uk.bind(null,Ye,i),[f.memoizedState,i]},useRef:function(i){var o=Yn();return i={current:i},o.memoizedState=i},useState:ug,useDebugValue:Vc,useDeferredValue:function(i){return Yn().memoizedState=i},useTransition:function(){var i=ug(!1),o=i[0];return i=$k.bind(null,i[1]),Yn().memoizedState=i,[o,i]},useMutableSource:function(){},useSyncExternalStore:function(i,o,u){var f=Ye,g=Yn();if(Ue){if(u===void 0)throw Error(t(407));u=u()}else{if(u=o(),yt===null)throw Error(t(349));(xi&30)!==0||ig(f,o,u)}g.memoizedState=u;var y={value:u,getSnapshot:o};return g.queue=y,hg(og.bind(null,f,y,i),[i]),f.flags|=2048,uo(9,sg.bind(null,f,y,u,o),void 0,null),u},useId:function(){var i=Yn(),o=yt.identifierPrefix;if(Ue){var u=pr,f=dr;u=(f&~(1<<32-Nn(f)-1)).toString(32)+u,o=":"+o+"R"+u,u=lo++,0<u&&(o+="H"+u.toString(32)),o+=":"}else u=Qk++,o=":"+o+"r"+u.toString(32)+":";return i.memoizedState=o},unstable_isNewReconciler:!1},qk={readContext:vn,useCallback:mg,useContext:vn,useEffect:Hc,useImperativeHandle:gg,useInsertionEffect:fg,useLayoutEffect:dg,useMemo:yg,useReducer:Fc,useRef:cg,useState:function(){return Fc(ao)},useDebugValue:Vc,useDeferredValue:function(i){var o=xn();return vg(o,ft.memoizedState,i)},useTransition:function(){var i=Fc(ao)[0],o=xn().memoizedState;return[i,o]},useMutableSource:ng,useSyncExternalStore:rg,useId:xg,unstable_isNewReconciler:!1},Yk={readContext:vn,useCallback:mg,useContext:vn,useEffect:Hc,useImperativeHandle:gg,useInsertionEffect:fg,useLayoutEffect:dg,useMemo:yg,useReducer:_c,useRef:cg,useState:function(){return _c(ao)},useDebugValue:Vc,useDeferredValue:function(i){var o=xn();return ft===null?o.memoizedState=i:vg(o,ft.memoizedState,i)},useTransition:function(){var i=_c(ao)[0],o=xn().memoizedState;return[i,o]},useMutableSource:ng,useSyncExternalStore:rg,useId:xg,unstable_isNewReconciler:!1};function Ln(i,o){if(i&&i.defaultProps){o=ee({},o),i=i.defaultProps;for(var u in i)o[u]===void 0&&(o[u]=i[u]);return o}return o}function Wc(i,o,u,f){o=i.memoizedState,u=u(f,o),u=u==null?o:ee({},o,u),i.memoizedState=u,i.lanes===0&&(i.updateQueue.baseState=u)}var Zl={isMounted:function(i){return(i=i._reactInternals)?fi(i)===i:!1},enqueueSetState:function(i,o,u){i=i._reactInternals;var f=Ht(),g=Qr(i),y=mr(f,g);y.payload=o,u!=null&&(y.callback=u),o=_r(i,y,g),o!==null&&(Bn(o,i,g,f),$l(o,i,g))},enqueueReplaceState:function(i,o,u){i=i._reactInternals;var f=Ht(),g=Qr(i),y=mr(f,g);y.tag=1,y.payload=o,u!=null&&(y.callback=u),o=_r(i,y,g),o!==null&&(Bn(o,i,g,f),$l(o,i,g))},enqueueForceUpdate:function(i,o){i=i._reactInternals;var u=Ht(),f=Qr(i),g=mr(u,f);g.tag=2,o!=null&&(g.callback=o),o=_r(i,g,f),o!==null&&(Bn(o,i,f,u),$l(o,i,f))}};function Sg(i,o,u,f,g,y,k){return i=i.stateNode,typeof i.shouldComponentUpdate=="function"?i.shouldComponentUpdate(f,y,k):o.prototype&&o.prototype.isPureReactComponent?!qs(u,f)||!qs(g,y):!0}function Og(i,o,u){var f=!1,g=Br,y=o.contextType;return typeof y=="object"&&y!==null?y=vn(y):(g=qt(o)?pi:Nt.current,f=o.contextTypes,y=(f=f!=null)?Ki(i,g):Br),o=new o(u,y),i.memoizedState=o.state!==null&&o.state!==void 0?o.state:null,o.updater=Zl,i.stateNode=o,o._reactInternals=i,f&&(i=i.stateNode,i.__reactInternalMemoizedUnmaskedChildContext=g,i.__reactInternalMemoizedMaskedChildContext=y),o}function Cg(i,o,u,f){i=o.state,typeof o.componentWillReceiveProps=="function"&&o.componentWillReceiveProps(u,f),typeof o.UNSAFE_componentWillReceiveProps=="function"&&o.UNSAFE_componentWillReceiveProps(u,f),o.state!==i&&Zl.enqueueReplaceState(o,o.state,null)}function Qc(i,o,u,f){var g=i.stateNode;g.props=u,g.state=i.memoizedState,g.refs={},Rc(i);var y=o.contextType;typeof y=="object"&&y!==null?g.context=vn(y):(y=qt(o)?pi:Nt.current,g.context=Ki(i,y)),g.state=i.memoizedState,y=o.getDerivedStateFromProps,typeof y=="function"&&(Wc(i,o,y,u),g.state=i.memoizedState),typeof o.getDerivedStateFromProps=="function"||typeof g.getSnapshotBeforeUpdate=="function"||typeof g.UNSAFE_componentWillMount!="function"&&typeof g.componentWillMount!="function"||(o=g.state,typeof g.componentWillMount=="function"&&g.componentWillMount(),typeof g.UNSAFE_componentWillMount=="function"&&g.UNSAFE_componentWillMount(),o!==g.state&&Zl.enqueueReplaceState(g,g.state,null),Ul(i,u,g,f),g.state=i.memoizedState),typeof g.componentDidMount=="function"&&(i.flags|=4194308)}function ns(i,o){try{var u="",f=o;do u+=xe(f),f=f.return;while(f);var g=u}catch(y){g=`
Error generating stack: `+y.message+`
`+y.stack}return{value:i,source:o,stack:g,digest:null}}function $c(i,o,u){return{value:i,source:null,stack:u??null,digest:o??null}}function Uc(i,o){try{console.error(o.value)}catch(u){setTimeout(function(){throw u})}}var Gk=typeof WeakMap=="function"?WeakMap:Map;function Pg(i,o,u){u=mr(-1,u),u.tag=3,u.payload={element:null};var f=o.value;return u.callback=function(){oa||(oa=!0,lh=f),Uc(i,o)},u}function Eg(i,o,u){u=mr(-1,u),u.tag=3;var f=i.type.getDerivedStateFromError;if(typeof f=="function"){var g=o.value;u.payload=function(){return f(g)},u.callback=function(){Uc(i,o)}}var y=i.stateNode;return y!==null&&typeof y.componentDidCatch=="function"&&(u.callback=function(){Uc(i,o),typeof f!="function"&&(Vr===null?Vr=new Set([this]):Vr.add(this));var k=o.stack;this.componentDidCatch(o.value,{componentStack:k!==null?k:""})}),u}function Ag(i,o,u){var f=i.pingCache;if(f===null){f=i.pingCache=new Gk;var g=new Set;f.set(o,g)}else g=f.get(o),g===void 0&&(g=new Set,f.set(o,g));g.has(u)||(g.add(u),i=hw.bind(null,i,o,u),o.then(i,i))}function Mg(i){do{var o;if((o=i.tag===13)&&(o=i.memoizedState,o=o!==null?o.dehydrated!==null:!0),o)return i;i=i.return}while(i!==null);return null}function Rg(i,o,u,f,g){return(i.mode&1)===0?(i===o?i.flags|=65536:(i.flags|=128,u.flags|=131072,u.flags&=-52805,u.tag===1&&(u.alternate===null?u.tag=17:(o=mr(-1,1),o.tag=2,_r(u,o,1))),u.lanes|=1),i):(i.flags|=65536,i.lanes=g,i)}var Jk=B.ReactCurrentOwner,Yt=!1;function _t(i,o,u,f){o.child=i===null?Yp(o,null,u,f):Ji(o,i.child,u,f)}function Ng(i,o,u,f,g){u=u.render;var y=o.ref;return es(o,g),f=Bc(i,o,u,f,y,g),u=zc(),i!==null&&!Yt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,yr(i,o,g)):(Ue&&u&&kc(o),o.flags|=1,_t(i,o,f,g),o.child)}function Dg(i,o,u,f,g){if(i===null){var y=u.type;return typeof y=="function"&&!ph(y)&&y.defaultProps===void 0&&u.compare===null&&u.defaultProps===void 0?(o.tag=15,o.type=y,Tg(i,o,y,f,g)):(i=fa(u.type,null,f,o,o.mode,g),i.ref=o.ref,i.return=o,o.child=i)}if(y=i.child,(i.lanes&g)===0){var k=y.memoizedProps;if(u=u.compare,u=u!==null?u:qs,u(k,f)&&i.ref===o.ref)return yr(i,o,g)}return o.flags|=1,i=Ur(y,f),i.ref=o.ref,i.return=o,o.child=i}function Tg(i,o,u,f,g){if(i!==null){var y=i.memoizedProps;if(qs(y,f)&&i.ref===o.ref)if(Yt=!1,o.pendingProps=f=y,(i.lanes&g)!==0)(i.flags&131072)!==0&&(Yt=!0);else return o.lanes=i.lanes,yr(i,o,g)}return Xc(i,o,u,f,g)}function Lg(i,o,u){var f=o.pendingProps,g=f.children,y=i!==null?i.memoizedState:null;if(f.mode==="hidden")if((o.mode&1)===0)o.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(is,un),un|=u;else{if((u&1073741824)===0)return i=y!==null?y.baseLanes|u:u,o.lanes=o.childLanes=1073741824,o.memoizedState={baseLanes:i,cachePool:null,transitions:null},o.updateQueue=null,He(is,un),un|=i,null;o.memoizedState={baseLanes:0,cachePool:null,transitions:null},f=y!==null?y.baseLanes:u,He(is,un),un|=f}else y!==null?(f=y.baseLanes|u,o.memoizedState=null):f=u,He(is,un),un|=f;return _t(i,o,g,u),o.child}function jg(i,o){var u=o.ref;(i===null&&u!==null||i!==null&&i.ref!==u)&&(o.flags|=512,o.flags|=2097152)}function Xc(i,o,u,f,g){var y=qt(u)?pi:Nt.current;return y=Ki(o,y),es(o,g),u=Bc(i,o,u,f,y,g),f=zc(),i!==null&&!Yt?(o.updateQueue=i.updateQueue,o.flags&=-2053,i.lanes&=~g,yr(i,o,g)):(Ue&&f&&kc(o),o.flags|=1,_t(i,o,u,g),o.child)}function Ig(i,o,u,f,g){if(qt(u)){var y=!0;Bl(o)}else y=!1;if(es(o,g),o.stateNode===null)ta(i,o),Og(o,u,f),Qc(o,u,f,g),f=!0;else if(i===null){var k=o.stateNode,E=o.memoizedProps;k.props=E;var M=k.context,_=u.contextType;typeof _=="object"&&_!==null?_=vn(_):(_=qt(u)?pi:Nt.current,_=Ki(o,_));var K=u.getDerivedStateFromProps,G=typeof K=="function"||typeof k.getSnapshotBeforeUpdate=="function";G||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(E!==f||M!==_)&&Cg(o,k,f,_),Fr=!1;var $=o.memoizedState;k.state=$,Ul(o,f,k,g),M=o.memoizedState,E!==f||$!==M||Kt.current||Fr?(typeof K=="function"&&(Wc(o,u,K,f),M=o.memoizedState),(E=Fr||Sg(o,u,E,f,$,M,_))?(G||typeof k.UNSAFE_componentWillMount!="function"&&typeof k.componentWillMount!="function"||(typeof k.componentWillMount=="function"&&k.componentWillMount(),typeof k.UNSAFE_componentWillMount=="function"&&k.UNSAFE_componentWillMount()),typeof k.componentDidMount=="function"&&(o.flags|=4194308)):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),o.memoizedProps=f,o.memoizedState=M),k.props=f,k.state=M,k.context=_,f=E):(typeof k.componentDidMount=="function"&&(o.flags|=4194308),f=!1)}else{k=o.stateNode,Jp(i,o),E=o.memoizedProps,_=o.type===o.elementType?E:Ln(o.type,E),k.props=_,G=o.pendingProps,$=k.context,M=u.contextType,typeof M=="object"&&M!==null?M=vn(M):(M=qt(u)?pi:Nt.current,M=Ki(o,M));var ce=u.getDerivedStateFromProps;(K=typeof ce=="function"||typeof k.getSnapshotBeforeUpdate=="function")||typeof k.UNSAFE_componentWillReceiveProps!="function"&&typeof k.componentWillReceiveProps!="function"||(E!==G||$!==M)&&Cg(o,k,f,M),Fr=!1,$=o.memoizedState,k.state=$,Ul(o,f,k,g);var ge=o.memoizedState;E!==G||$!==ge||Kt.current||Fr?(typeof ce=="function"&&(Wc(o,u,ce,f),ge=o.memoizedState),(_=Fr||Sg(o,u,_,f,$,ge,M)||!1)?(K||typeof k.UNSAFE_componentWillUpdate!="function"&&typeof k.componentWillUpdate!="function"||(typeof k.componentWillUpdate=="function"&&k.componentWillUpdate(f,ge,M),typeof k.UNSAFE_componentWillUpdate=="function"&&k.UNSAFE_componentWillUpdate(f,ge,M)),typeof k.componentDidUpdate=="function"&&(o.flags|=4),typeof k.getSnapshotBeforeUpdate=="function"&&(o.flags|=1024)):(typeof k.componentDidUpdate!="function"||E===i.memoizedProps&&$===i.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&$===i.memoizedState||(o.flags|=1024),o.memoizedProps=f,o.memoizedState=ge),k.props=f,k.state=ge,k.context=M,f=_):(typeof k.componentDidUpdate!="function"||E===i.memoizedProps&&$===i.memoizedState||(o.flags|=4),typeof k.getSnapshotBeforeUpdate!="function"||E===i.memoizedProps&&$===i.memoizedState||(o.flags|=1024),f=!1)}return Kc(i,o,u,f,y,g)}function Kc(i,o,u,f,g,y){jg(i,o);var k=(o.flags&128)!==0;if(!f&&!k)return g&&Hp(o,u,!1),yr(i,o,y);f=o.stateNode,Jk.current=o;var E=k&&typeof u.getDerivedStateFromError!="function"?null:f.render();return o.flags|=1,i!==null&&k?(o.child=Ji(o,i.child,null,y),o.child=Ji(o,null,E,y)):_t(i,o,E,y),o.memoizedState=f.state,g&&Hp(o,u,!0),o.child}function Bg(i){var o=i.stateNode;o.pendingContext?Fp(i,o.pendingContext,o.pendingContext!==o.context):o.context&&Fp(i,o.context,!1),Nc(i,o.containerInfo)}function zg(i,o,u,f,g){return Gi(),Oc(g),o.flags|=256,_t(i,o,u,f),o.child}var qc={dehydrated:null,treeContext:null,retryLane:0};function Yc(i){return{baseLanes:i,cachePool:null,transitions:null}}function Fg(i,o,u){var f=o.pendingProps,g=qe.current,y=!1,k=(o.flags&128)!==0,E;if((E=k)||(E=i!==null&&i.memoizedState===null?!1:(g&2)!==0),E?(y=!0,o.flags&=-129):(i===null||i.memoizedState!==null)&&(g|=1),He(qe,g&1),i===null)return Sc(o),i=o.memoizedState,i!==null&&(i=i.dehydrated,i!==null)?((o.mode&1)===0?o.lanes=1:i.data==="$!"?o.lanes=8:o.lanes=1073741824,null):(k=f.children,i=f.fallback,y?(f=o.mode,y=o.child,k={mode:"hidden",children:k},(f&1)===0&&y!==null?(y.childLanes=0,y.pendingProps=k):y=da(k,f,0,null),i=Oi(i,f,u,null),y.return=o,i.return=o,y.sibling=i,o.child=y,o.child.memoizedState=Yc(u),o.memoizedState=qc,i):Gc(o,k));if(g=i.memoizedState,g!==null&&(E=g.dehydrated,E!==null))return Zk(i,o,k,f,E,g,u);if(y){y=f.fallback,k=o.mode,g=i.child,E=g.sibling;var M={mode:"hidden",children:f.children};return(k&1)===0&&o.child!==g?(f=o.child,f.childLanes=0,f.pendingProps=M,o.deletions=null):(f=Ur(g,M),f.subtreeFlags=g.subtreeFlags&14680064),E!==null?y=Ur(E,y):(y=Oi(y,k,u,null),y.flags|=2),y.return=o,f.return=o,f.sibling=y,o.child=f,f=y,y=o.child,k=i.child.memoizedState,k=k===null?Yc(u):{baseLanes:k.baseLanes|u,cachePool:null,transitions:k.transitions},y.memoizedState=k,y.childLanes=i.childLanes&~u,o.memoizedState=qc,f}return y=i.child,i=y.sibling,f=Ur(y,{mode:"visible",children:f.children}),(o.mode&1)===0&&(f.lanes=u),f.return=o,f.sibling=null,i!==null&&(u=o.deletions,u===null?(o.deletions=[i],o.flags|=16):u.push(i)),o.child=f,o.memoizedState=null,f}function Gc(i,o){return o=da({mode:"visible",children:o},i.mode,0,null),o.return=i,i.child=o}function ea(i,o,u,f){return f!==null&&Oc(f),Ji(o,i.child,null,u),i=Gc(o,o.pendingProps.children),i.flags|=2,o.memoizedState=null,i}function Zk(i,o,u,f,g,y,k){if(u)return o.flags&256?(o.flags&=-257,f=$c(Error(t(422))),ea(i,o,k,f)):o.memoizedState!==null?(o.child=i.child,o.flags|=128,null):(y=f.fallback,g=o.mode,f=da({mode:"visible",children:f.children},g,0,null),y=Oi(y,g,k,null),y.flags|=2,f.return=o,y.return=o,f.sibling=y,o.child=f,(o.mode&1)!==0&&Ji(o,i.child,null,k),o.child.memoizedState=Yc(k),o.memoizedState=qc,y);if((o.mode&1)===0)return ea(i,o,k,null);if(g.data==="$!"){if(f=g.nextSibling&&g.nextSibling.dataset,f)var E=f.dgst;return f=E,y=Error(t(419)),f=$c(y,f,void 0),ea(i,o,k,f)}if(E=(k&i.childLanes)!==0,Yt||E){if(f=yt,f!==null){switch(k&-k){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}g=(g&(f.suspendedLanes|k))!==0?0:g,g!==0&&g!==y.retryLane&&(y.retryLane=g,gr(i,g),Bn(f,i,g,-1))}return dh(),f=$c(Error(t(421))),ea(i,o,k,f)}return g.data==="$?"?(o.flags|=128,o.child=i.child,o=fw.bind(null,i),g._reactRetry=o,null):(i=y.treeContext,an=jr(g.nextSibling),ln=o,Ue=!0,Tn=null,i!==null&&(mn[yn++]=dr,mn[yn++]=pr,mn[yn++]=gi,dr=i.id,pr=i.overflow,gi=o),o=Gc(o,f.children),o.flags|=4096,o)}function _g(i,o,u){i.lanes|=o;var f=i.alternate;f!==null&&(f.lanes|=o),Ac(i.return,o,u)}function Jc(i,o,u,f,g){var y=i.memoizedState;y===null?i.memoizedState={isBackwards:o,rendering:null,renderingStartTime:0,last:f,tail:u,tailMode:g}:(y.isBackwards=o,y.rendering=null,y.renderingStartTime=0,y.last=f,y.tail=u,y.tailMode=g)}function Hg(i,o,u){var f=o.pendingProps,g=f.revealOrder,y=f.tail;if(_t(i,o,f.children,u),f=qe.current,(f&2)!==0)f=f&1|2,o.flags|=128;else{if(i!==null&&(i.flags&128)!==0)e:for(i=o.child;i!==null;){if(i.tag===13)i.memoizedState!==null&&_g(i,u,o);else if(i.tag===19)_g(i,u,o);else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===o)break e;for(;i.sibling===null;){if(i.return===null||i.return===o)break e;i=i.return}i.sibling.return=i.return,i=i.sibling}f&=1}if(He(qe,f),(o.mode&1)===0)o.memoizedState=null;else switch(g){case"forwards":for(u=o.child,g=null;u!==null;)i=u.alternate,i!==null&&Xl(i)===null&&(g=u),u=u.sibling;u=g,u===null?(g=o.child,o.child=null):(g=u.sibling,u.sibling=null),Jc(o,!1,g,u,y);break;case"backwards":for(u=null,g=o.child,o.child=null;g!==null;){if(i=g.alternate,i!==null&&Xl(i)===null){o.child=g;break}i=g.sibling,g.sibling=u,u=g,g=i}Jc(o,!0,u,null,y);break;case"together":Jc(o,!1,null,null,void 0);break;default:o.memoizedState=null}return o.child}function ta(i,o){(o.mode&1)===0&&i!==null&&(i.alternate=null,o.alternate=null,o.flags|=2)}function yr(i,o,u){if(i!==null&&(o.dependencies=i.dependencies),ki|=o.lanes,(u&o.childLanes)===0)return null;if(i!==null&&o.child!==i.child)throw Error(t(153));if(o.child!==null){for(i=o.child,u=Ur(i,i.pendingProps),o.child=u,u.return=o;i.sibling!==null;)i=i.sibling,u=u.sibling=Ur(i,i.pendingProps),u.return=o;u.sibling=null}return o.child}function ew(i,o,u){switch(o.tag){case 3:Bg(o),Gi();break;case 5:tg(o);break;case 1:qt(o.type)&&Bl(o);break;case 4:Nc(o,o.stateNode.containerInfo);break;case 10:var f=o.type._context,g=o.memoizedProps.value;He(Wl,f._currentValue),f._currentValue=g;break;case 13:if(f=o.memoizedState,f!==null)return f.dehydrated!==null?(He(qe,qe.current&1),o.flags|=128,null):(u&o.child.childLanes)!==0?Fg(i,o,u):(He(qe,qe.current&1),i=yr(i,o,u),i!==null?i.sibling:null);He(qe,qe.current&1);break;case 19:if(f=(u&o.childLanes)!==0,(i.flags&128)!==0){if(f)return Hg(i,o,u);o.flags|=128}if(g=o.memoizedState,g!==null&&(g.rendering=null,g.tail=null,g.lastEffect=null),He(qe,qe.current),f)break;return null;case 22:case 23:return o.lanes=0,Lg(i,o,u)}return yr(i,o,u)}var Vg,Zc,Wg,Qg;Vg=function(i,o){for(var u=o.child;u!==null;){if(u.tag===5||u.tag===6)i.appendChild(u.stateNode);else if(u.tag!==4&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===o)break;for(;u.sibling===null;){if(u.return===null||u.return===o)return;u=u.return}u.sibling.return=u.return,u=u.sibling}},Zc=function(){},Wg=function(i,o,u,f){var g=i.memoizedProps;if(g!==f){i=o.stateNode,vi(qn.current);var y=null;switch(u){case"input":g=Ge(i,g),f=Ge(i,f),y=[];break;case"select":g=ee({},g,{value:void 0}),f=ee({},f,{value:void 0}),y=[];break;case"textarea":g=le(i,g),f=le(i,f),y=[];break;default:typeof g.onClick!="function"&&typeof f.onClick=="function"&&(i.onclick=Ll)}Bi(u,f);var k;u=null;for(_ in g)if(!f.hasOwnProperty(_)&&g.hasOwnProperty(_)&&g[_]!=null)if(_==="style"){var E=g[_];for(k in E)E.hasOwnProperty(k)&&(u||(u={}),u[k]="")}else _!=="dangerouslySetInnerHTML"&&_!=="children"&&_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&_!=="autoFocus"&&(s.hasOwnProperty(_)?y||(y=[]):(y=y||[]).push(_,null));for(_ in f){var M=f[_];if(E=g!=null?g[_]:void 0,f.hasOwnProperty(_)&&M!==E&&(M!=null||E!=null))if(_==="style")if(E){for(k in E)!E.hasOwnProperty(k)||M&&M.hasOwnProperty(k)||(u||(u={}),u[k]="");for(k in M)M.hasOwnProperty(k)&&E[k]!==M[k]&&(u||(u={}),u[k]=M[k])}else u||(y||(y=[]),y.push(_,u)),u=M;else _==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,E=E?E.__html:void 0,M!=null&&E!==M&&(y=y||[]).push(_,M)):_==="children"?typeof M!="string"&&typeof M!="number"||(y=y||[]).push(_,""+M):_!=="suppressContentEditableWarning"&&_!=="suppressHydrationWarning"&&(s.hasOwnProperty(_)?(M!=null&&_==="onScroll"&&We("scroll",i),y||E===M||(y=[])):(y=y||[]).push(_,M))}u&&(y=y||[]).push("style",u);var _=y;(o.updateQueue=_)&&(o.flags|=4)}},Qg=function(i,o,u,f){u!==f&&(o.flags|=4)};function co(i,o){if(!Ue)switch(i.tailMode){case"hidden":o=i.tail;for(var u=null;o!==null;)o.alternate!==null&&(u=o),o=o.sibling;u===null?i.tail=null:u.sibling=null;break;case"collapsed":u=i.tail;for(var f=null;u!==null;)u.alternate!==null&&(f=u),u=u.sibling;f===null?o||i.tail===null?i.tail=null:i.tail.sibling=null:f.sibling=null}}function Tt(i){var o=i.alternate!==null&&i.alternate.child===i.child,u=0,f=0;if(o)for(var g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags&14680064,f|=g.flags&14680064,g.return=i,g=g.sibling;else for(g=i.child;g!==null;)u|=g.lanes|g.childLanes,f|=g.subtreeFlags,f|=g.flags,g.return=i,g=g.sibling;return i.subtreeFlags|=f,i.childLanes=u,o}function tw(i,o,u){var f=o.pendingProps;switch(wc(o),o.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Tt(o),null;case 1:return qt(o.type)&&Il(),Tt(o),null;case 3:return f=o.stateNode,ts(),Qe(Kt),Qe(Nt),Lc(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(i===null||i.child===null)&&(Hl(o)?o.flags|=4:i===null||i.memoizedState.isDehydrated&&(o.flags&256)===0||(o.flags|=1024,Tn!==null&&(ch(Tn),Tn=null))),Zc(i,o),Tt(o),null;case 5:Dc(o);var g=vi(so.current);if(u=o.type,i!==null&&o.stateNode!=null)Wg(i,o,u,f,g),i.ref!==o.ref&&(o.flags|=512,o.flags|=2097152);else{if(!f){if(o.stateNode===null)throw Error(t(166));return Tt(o),null}if(i=vi(qn.current),Hl(o)){f=o.stateNode,u=o.type;var y=o.memoizedProps;switch(f[Kn]=o,f[eo]=y,i=(o.mode&1)!==0,u){case"dialog":We("cancel",f),We("close",f);break;case"iframe":case"object":case"embed":We("load",f);break;case"video":case"audio":for(g=0;g<Gs.length;g++)We(Gs[g],f);break;case"source":We("error",f);break;case"img":case"image":case"link":We("error",f),We("load",f);break;case"details":We("toggle",f);break;case"input":ot(f,y),We("invalid",f);break;case"select":f._wrapperState={wasMultiple:!!y.multiple},We("invalid",f);break;case"textarea":Fe(f,y),We("invalid",f)}Bi(u,y),g=null;for(var k in y)if(y.hasOwnProperty(k)){var E=y[k];k==="children"?typeof E=="string"?f.textContent!==E&&(y.suppressHydrationWarning!==!0&&Tl(f.textContent,E,i),g=["children",E]):typeof E=="number"&&f.textContent!==""+E&&(y.suppressHydrationWarning!==!0&&Tl(f.textContent,E,i),g=["children",""+E]):s.hasOwnProperty(k)&&E!=null&&k==="onScroll"&&We("scroll",f)}switch(u){case"input":Re(f),ci(f,y,!0);break;case"textarea":Re(f),ht(f);break;case"select":case"option":break;default:typeof y.onClick=="function"&&(f.onclick=Ll)}f=g,o.updateQueue=f,f!==null&&(o.flags|=4)}else{k=g.nodeType===9?g:g.ownerDocument,i==="http://www.w3.org/1999/xhtml"&&(i=hi(u)),i==="http://www.w3.org/1999/xhtml"?u==="script"?(i=k.createElement("div"),i.innerHTML="<script><\/script>",i=i.removeChild(i.firstChild)):typeof f.is=="string"?i=k.createElement(u,{is:f.is}):(i=k.createElement(u),u==="select"&&(k=i,f.multiple?k.multiple=!0:f.size&&(k.size=f.size))):i=k.createElementNS(i,u),i[Kn]=o,i[eo]=f,Vg(i,o,!1,!1),o.stateNode=i;e:{switch(k=Ts(u,f),u){case"dialog":We("cancel",i),We("close",i),g=f;break;case"iframe":case"object":case"embed":We("load",i),g=f;break;case"video":case"audio":for(g=0;g<Gs.length;g++)We(Gs[g],i);g=f;break;case"source":We("error",i),g=f;break;case"img":case"image":case"link":We("error",i),We("load",i),g=f;break;case"details":We("toggle",i),g=f;break;case"input":ot(i,f),g=Ge(i,f),We("invalid",i);break;case"option":g=f;break;case"select":i._wrapperState={wasMultiple:!!f.multiple},g=ee({},f,{value:void 0}),We("invalid",i);break;case"textarea":Fe(i,f),g=le(i,f),We("invalid",i);break;default:g=f}Bi(u,g),E=g;for(y in E)if(E.hasOwnProperty(y)){var M=E[y];y==="style"?pl(i,M):y==="dangerouslySetInnerHTML"?(M=M?M.__html:void 0,M!=null&&pn(i,M)):y==="children"?typeof M=="string"?(u!=="textarea"||M!=="")&&$n(i,M):typeof M=="number"&&$n(i,""+M):y!=="suppressContentEditableWarning"&&y!=="suppressHydrationWarning"&&y!=="autoFocus"&&(s.hasOwnProperty(y)?M!=null&&y==="onScroll"&&We("scroll",i):M!=null&&D(i,y,M,k))}switch(u){case"input":Re(i),ci(i,f,!1);break;case"textarea":Re(i),ht(i);break;case"option":f.value!=null&&i.setAttribute("value",""+we(f.value));break;case"select":i.multiple=!!f.multiple,y=f.value,y!=null?Ee(i,!!f.multiple,y,!1):f.defaultValue!=null&&Ee(i,!!f.multiple,f.defaultValue,!0);break;default:typeof g.onClick=="function"&&(i.onclick=Ll)}switch(u){case"button":case"input":case"select":case"textarea":f=!!f.autoFocus;break e;case"img":f=!0;break e;default:f=!1}}f&&(o.flags|=4)}o.ref!==null&&(o.flags|=512,o.flags|=2097152)}return Tt(o),null;case 6:if(i&&o.stateNode!=null)Qg(i,o,i.memoizedProps,f);else{if(typeof f!="string"&&o.stateNode===null)throw Error(t(166));if(u=vi(so.current),vi(qn.current),Hl(o)){if(f=o.stateNode,u=o.memoizedProps,f[Kn]=o,(y=f.nodeValue!==u)&&(i=ln,i!==null))switch(i.tag){case 3:Tl(f.nodeValue,u,(i.mode&1)!==0);break;case 5:i.memoizedProps.suppressHydrationWarning!==!0&&Tl(f.nodeValue,u,(i.mode&1)!==0)}y&&(o.flags|=4)}else f=(u.nodeType===9?u:u.ownerDocument).createTextNode(f),f[Kn]=o,o.stateNode=f}return Tt(o),null;case 13:if(Qe(qe),f=o.memoizedState,i===null||i.memoizedState!==null&&i.memoizedState.dehydrated!==null){if(Ue&&an!==null&&(o.mode&1)!==0&&(o.flags&128)===0)Xp(),Gi(),o.flags|=98560,y=!1;else if(y=Hl(o),f!==null&&f.dehydrated!==null){if(i===null){if(!y)throw Error(t(318));if(y=o.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(t(317));y[Kn]=o}else Gi(),(o.flags&128)===0&&(o.memoizedState=null),o.flags|=4;Tt(o),y=!1}else Tn!==null&&(ch(Tn),Tn=null),y=!0;if(!y)return o.flags&65536?o:null}return(o.flags&128)!==0?(o.lanes=u,o):(f=f!==null,f!==(i!==null&&i.memoizedState!==null)&&f&&(o.child.flags|=8192,(o.mode&1)!==0&&(i===null||(qe.current&1)!==0?dt===0&&(dt=3):dh())),o.updateQueue!==null&&(o.flags|=4),Tt(o),null);case 4:return ts(),Zc(i,o),i===null&&Js(o.stateNode.containerInfo),Tt(o),null;case 10:return Ec(o.type._context),Tt(o),null;case 17:return qt(o.type)&&Il(),Tt(o),null;case 19:if(Qe(qe),y=o.memoizedState,y===null)return Tt(o),null;if(f=(o.flags&128)!==0,k=y.rendering,k===null)if(f)co(y,!1);else{if(dt!==0||i!==null&&(i.flags&128)!==0)for(i=o.child;i!==null;){if(k=Xl(i),k!==null){for(o.flags|=128,co(y,!1),f=k.updateQueue,f!==null&&(o.updateQueue=f,o.flags|=4),o.subtreeFlags=0,f=u,u=o.child;u!==null;)y=u,i=f,y.flags&=14680066,k=y.alternate,k===null?(y.childLanes=0,y.lanes=i,y.child=null,y.subtreeFlags=0,y.memoizedProps=null,y.memoizedState=null,y.updateQueue=null,y.dependencies=null,y.stateNode=null):(y.childLanes=k.childLanes,y.lanes=k.lanes,y.child=k.child,y.subtreeFlags=0,y.deletions=null,y.memoizedProps=k.memoizedProps,y.memoizedState=k.memoizedState,y.updateQueue=k.updateQueue,y.type=k.type,i=k.dependencies,y.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),u=u.sibling;return He(qe,qe.current&1|2),o.child}i=i.sibling}y.tail!==null&&tt()>ss&&(o.flags|=128,f=!0,co(y,!1),o.lanes=4194304)}else{if(!f)if(i=Xl(k),i!==null){if(o.flags|=128,f=!0,u=i.updateQueue,u!==null&&(o.updateQueue=u,o.flags|=4),co(y,!0),y.tail===null&&y.tailMode==="hidden"&&!k.alternate&&!Ue)return Tt(o),null}else 2*tt()-y.renderingStartTime>ss&&u!==1073741824&&(o.flags|=128,f=!0,co(y,!1),o.lanes=4194304);y.isBackwards?(k.sibling=o.child,o.child=k):(u=y.last,u!==null?u.sibling=k:o.child=k,y.last=k)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=tt(),o.sibling=null,u=qe.current,He(qe,f?u&1|2:u&1),o):(Tt(o),null);case 22:case 23:return fh(),f=o.memoizedState!==null,i!==null&&i.memoizedState!==null!==f&&(o.flags|=8192),f&&(o.mode&1)!==0?(un&1073741824)!==0&&(Tt(o),o.subtreeFlags&6&&(o.flags|=8192)):Tt(o),null;case 24:return null;case 25:return null}throw Error(t(156,o.tag))}function nw(i,o){switch(wc(o),o.tag){case 1:return qt(o.type)&&Il(),i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 3:return ts(),Qe(Kt),Qe(Nt),Lc(),i=o.flags,(i&65536)!==0&&(i&128)===0?(o.flags=i&-65537|128,o):null;case 5:return Dc(o),null;case 13:if(Qe(qe),i=o.memoizedState,i!==null&&i.dehydrated!==null){if(o.alternate===null)throw Error(t(340));Gi()}return i=o.flags,i&65536?(o.flags=i&-65537|128,o):null;case 19:return Qe(qe),null;case 4:return ts(),null;case 10:return Ec(o.type._context),null;case 22:case 23:return fh(),null;case 24:return null;default:return null}}var na=!1,Lt=!1,rw=typeof WeakSet=="function"?WeakSet:Set,pe=null;function rs(i,o){var u=i.ref;if(u!==null)if(typeof u=="function")try{u(null)}catch(f){Je(i,o,f)}else u.current=null}function eh(i,o,u){try{u()}catch(f){Je(i,o,f)}}var $g=!1;function iw(i,o){if(fc=bl,i=Sp(),ic(i)){if("selectionStart"in i)var u={start:i.selectionStart,end:i.selectionEnd};else e:{u=(u=i.ownerDocument)&&u.defaultView||window;var f=u.getSelection&&u.getSelection();if(f&&f.rangeCount!==0){u=f.anchorNode;var g=f.anchorOffset,y=f.focusNode;f=f.focusOffset;try{u.nodeType,y.nodeType}catch{u=null;break e}var k=0,E=-1,M=-1,_=0,K=0,G=i,$=null;t:for(;;){for(var ce;G!==u||g!==0&&G.nodeType!==3||(E=k+g),G!==y||f!==0&&G.nodeType!==3||(M=k+f),G.nodeType===3&&(k+=G.nodeValue.length),(ce=G.firstChild)!==null;)$=G,G=ce;for(;;){if(G===i)break t;if($===u&&++_===g&&(E=k),$===y&&++K===f&&(M=k),(ce=G.nextSibling)!==null)break;G=$,$=G.parentNode}G=ce}u=E===-1||M===-1?null:{start:E,end:M}}else u=null}u=u||{start:0,end:0}}else u=null;for(dc={focusedElem:i,selectionRange:u},bl=!1,pe=o;pe!==null;)if(o=pe,i=o.child,(o.subtreeFlags&1028)!==0&&i!==null)i.return=o,pe=i;else for(;pe!==null;){o=pe;try{var ge=o.alternate;if((o.flags&1024)!==0)switch(o.tag){case 0:case 11:case 15:break;case 1:if(ge!==null){var me=ge.memoizedProps,nt=ge.memoizedState,I=o.stateNode,R=I.getSnapshotBeforeUpdate(o.elementType===o.type?me:Ln(o.type,me),nt);I.__reactInternalSnapshotBeforeUpdate=R}break;case 3:var z=o.stateNode.containerInfo;z.nodeType===1?z.textContent="":z.nodeType===9&&z.documentElement&&z.removeChild(z.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(t(163))}}catch(ne){Je(o,o.return,ne)}if(i=o.sibling,i!==null){i.return=o.return,pe=i;break}pe=o.return}return ge=$g,$g=!1,ge}function ho(i,o,u){var f=o.updateQueue;if(f=f!==null?f.lastEffect:null,f!==null){var g=f=f.next;do{if((g.tag&i)===i){var y=g.destroy;g.destroy=void 0,y!==void 0&&eh(o,u,y)}g=g.next}while(g!==f)}}function ra(i,o){if(o=o.updateQueue,o=o!==null?o.lastEffect:null,o!==null){var u=o=o.next;do{if((u.tag&i)===i){var f=u.create;u.destroy=f()}u=u.next}while(u!==o)}}function th(i){var o=i.ref;if(o!==null){var u=i.stateNode;switch(i.tag){case 5:i=u;break;default:i=u}typeof o=="function"?o(i):o.current=i}}function Ug(i){var o=i.alternate;o!==null&&(i.alternate=null,Ug(o)),i.child=null,i.deletions=null,i.sibling=null,i.tag===5&&(o=i.stateNode,o!==null&&(delete o[Kn],delete o[eo],delete o[yc],delete o[_k],delete o[Hk])),i.stateNode=null,i.return=null,i.dependencies=null,i.memoizedProps=null,i.memoizedState=null,i.pendingProps=null,i.stateNode=null,i.updateQueue=null}function Xg(i){return i.tag===5||i.tag===3||i.tag===4}function Kg(i){e:for(;;){for(;i.sibling===null;){if(i.return===null||Xg(i.return))return null;i=i.return}for(i.sibling.return=i.return,i=i.sibling;i.tag!==5&&i.tag!==6&&i.tag!==18;){if(i.flags&2||i.child===null||i.tag===4)continue e;i.child.return=i,i=i.child}if(!(i.flags&2))return i.stateNode}}function nh(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.nodeType===8?u.parentNode.insertBefore(i,o):u.insertBefore(i,o):(u.nodeType===8?(o=u.parentNode,o.insertBefore(i,u)):(o=u,o.appendChild(i)),u=u._reactRootContainer,u!=null||o.onclick!==null||(o.onclick=Ll));else if(f!==4&&(i=i.child,i!==null))for(nh(i,o,u),i=i.sibling;i!==null;)nh(i,o,u),i=i.sibling}function rh(i,o,u){var f=i.tag;if(f===5||f===6)i=i.stateNode,o?u.insertBefore(i,o):u.appendChild(i);else if(f!==4&&(i=i.child,i!==null))for(rh(i,o,u),i=i.sibling;i!==null;)rh(i,o,u),i=i.sibling}var St=null,jn=!1;function Hr(i,o,u){for(u=u.child;u!==null;)qg(i,o,u),u=u.sibling}function qg(i,o,u){if(Xn&&typeof Xn.onCommitFiberUnmount=="function")try{Xn.onCommitFiberUnmount(ml,u)}catch{}switch(u.tag){case 5:Lt||rs(u,o);case 6:var f=St,g=jn;St=null,Hr(i,o,u),St=f,jn=g,St!==null&&(jn?(i=St,u=u.stateNode,i.nodeType===8?i.parentNode.removeChild(u):i.removeChild(u)):St.removeChild(u.stateNode));break;case 18:St!==null&&(jn?(i=St,u=u.stateNode,i.nodeType===8?mc(i.parentNode,u):i.nodeType===1&&mc(i,u),Ws(i)):mc(St,u.stateNode));break;case 4:f=St,g=jn,St=u.stateNode.containerInfo,jn=!0,Hr(i,o,u),St=f,jn=g;break;case 0:case 11:case 14:case 15:if(!Lt&&(f=u.updateQueue,f!==null&&(f=f.lastEffect,f!==null))){g=f=f.next;do{var y=g,k=y.destroy;y=y.tag,k!==void 0&&((y&2)!==0||(y&4)!==0)&&eh(u,o,k),g=g.next}while(g!==f)}Hr(i,o,u);break;case 1:if(!Lt&&(rs(u,o),f=u.stateNode,typeof f.componentWillUnmount=="function"))try{f.props=u.memoizedProps,f.state=u.memoizedState,f.componentWillUnmount()}catch(E){Je(u,o,E)}Hr(i,o,u);break;case 21:Hr(i,o,u);break;case 22:u.mode&1?(Lt=(f=Lt)||u.memoizedState!==null,Hr(i,o,u),Lt=f):Hr(i,o,u);break;default:Hr(i,o,u)}}function Yg(i){var o=i.updateQueue;if(o!==null){i.updateQueue=null;var u=i.stateNode;u===null&&(u=i.stateNode=new rw),o.forEach(function(f){var g=dw.bind(null,i,f);u.has(f)||(u.add(f),f.then(g,g))})}}function In(i,o){var u=o.deletions;if(u!==null)for(var f=0;f<u.length;f++){var g=u[f];try{var y=i,k=o,E=k;e:for(;E!==null;){switch(E.tag){case 5:St=E.stateNode,jn=!1;break e;case 3:St=E.stateNode.containerInfo,jn=!0;break e;case 4:St=E.stateNode.containerInfo,jn=!0;break e}E=E.return}if(St===null)throw Error(t(160));qg(y,k,g),St=null,jn=!1;var M=g.alternate;M!==null&&(M.return=null),g.return=null}catch(_){Je(g,o,_)}}if(o.subtreeFlags&12854)for(o=o.child;o!==null;)Gg(o,i),o=o.sibling}function Gg(i,o){var u=i.alternate,f=i.flags;switch(i.tag){case 0:case 11:case 14:case 15:if(In(o,i),Gn(i),f&4){try{ho(3,i,i.return),ra(3,i)}catch(me){Je(i,i.return,me)}try{ho(5,i,i.return)}catch(me){Je(i,i.return,me)}}break;case 1:In(o,i),Gn(i),f&512&&u!==null&&rs(u,u.return);break;case 5:if(In(o,i),Gn(i),f&512&&u!==null&&rs(u,u.return),i.flags&32){var g=i.stateNode;try{$n(g,"")}catch(me){Je(i,i.return,me)}}if(f&4&&(g=i.stateNode,g!=null)){var y=i.memoizedProps,k=u!==null?u.memoizedProps:y,E=i.type,M=i.updateQueue;if(i.updateQueue=null,M!==null)try{E==="input"&&y.type==="radio"&&y.name!=null&&nn(g,y),Ts(E,k);var _=Ts(E,y);for(k=0;k<M.length;k+=2){var K=M[k],G=M[k+1];K==="style"?pl(g,G):K==="dangerouslySetInnerHTML"?pn(g,G):K==="children"?$n(g,G):D(g,K,G,_)}switch(E){case"input":Er(g,y);break;case"textarea":En(g,y);break;case"select":var $=g._wrapperState.wasMultiple;g._wrapperState.wasMultiple=!!y.multiple;var ce=y.value;ce!=null?Ee(g,!!y.multiple,ce,!1):$!==!!y.multiple&&(y.defaultValue!=null?Ee(g,!!y.multiple,y.defaultValue,!0):Ee(g,!!y.multiple,y.multiple?[]:"",!1))}g[eo]=y}catch(me){Je(i,i.return,me)}}break;case 6:if(In(o,i),Gn(i),f&4){if(i.stateNode===null)throw Error(t(162));g=i.stateNode,y=i.memoizedProps;try{g.nodeValue=y}catch(me){Je(i,i.return,me)}}break;case 3:if(In(o,i),Gn(i),f&4&&u!==null&&u.memoizedState.isDehydrated)try{Ws(o.containerInfo)}catch(me){Je(i,i.return,me)}break;case 4:In(o,i),Gn(i);break;case 13:In(o,i),Gn(i),g=i.child,g.flags&8192&&(y=g.memoizedState!==null,g.stateNode.isHidden=y,!y||g.alternate!==null&&g.alternate.memoizedState!==null||(oh=tt())),f&4&&Yg(i);break;case 22:if(K=u!==null&&u.memoizedState!==null,i.mode&1?(Lt=(_=Lt)||K,In(o,i),Lt=_):In(o,i),Gn(i),f&8192){if(_=i.memoizedState!==null,(i.stateNode.isHidden=_)&&!K&&(i.mode&1)!==0)for(pe=i,K=i.child;K!==null;){for(G=pe=K;pe!==null;){switch($=pe,ce=$.child,$.tag){case 0:case 11:case 14:case 15:ho(4,$,$.return);break;case 1:rs($,$.return);var ge=$.stateNode;if(typeof ge.componentWillUnmount=="function"){f=$,u=$.return;try{o=f,ge.props=o.memoizedProps,ge.state=o.memoizedState,ge.componentWillUnmount()}catch(me){Je(f,u,me)}}break;case 5:rs($,$.return);break;case 22:if($.memoizedState!==null){em(G);continue}}ce!==null?(ce.return=$,pe=ce):em(G)}K=K.sibling}e:for(K=null,G=i;;){if(G.tag===5){if(K===null){K=G;try{g=G.stateNode,_?(y=g.style,typeof y.setProperty=="function"?y.setProperty("display","none","important"):y.display="none"):(E=G.stateNode,M=G.memoizedProps.style,k=M!=null&&M.hasOwnProperty("display")?M.display:null,E.style.display=dl("display",k))}catch(me){Je(i,i.return,me)}}}else if(G.tag===6){if(K===null)try{G.stateNode.nodeValue=_?"":G.memoizedProps}catch(me){Je(i,i.return,me)}}else if((G.tag!==22&&G.tag!==23||G.memoizedState===null||G===i)&&G.child!==null){G.child.return=G,G=G.child;continue}if(G===i)break e;for(;G.sibling===null;){if(G.return===null||G.return===i)break e;K===G&&(K=null),G=G.return}K===G&&(K=null),G.sibling.return=G.return,G=G.sibling}}break;case 19:In(o,i),Gn(i),f&4&&Yg(i);break;case 21:break;default:In(o,i),Gn(i)}}function Gn(i){var o=i.flags;if(o&2){try{e:{for(var u=i.return;u!==null;){if(Xg(u)){var f=u;break e}u=u.return}throw Error(t(160))}switch(f.tag){case 5:var g=f.stateNode;f.flags&32&&($n(g,""),f.flags&=-33);var y=Kg(i);rh(i,y,g);break;case 3:case 4:var k=f.stateNode.containerInfo,E=Kg(i);nh(i,E,k);break;default:throw Error(t(161))}}catch(M){Je(i,i.return,M)}i.flags&=-3}o&4096&&(i.flags&=-4097)}function sw(i,o,u){pe=i,Jg(i)}function Jg(i,o,u){for(var f=(i.mode&1)!==0;pe!==null;){var g=pe,y=g.child;if(g.tag===22&&f){var k=g.memoizedState!==null||na;if(!k){var E=g.alternate,M=E!==null&&E.memoizedState!==null||Lt;E=na;var _=Lt;if(na=k,(Lt=M)&&!_)for(pe=g;pe!==null;)k=pe,M=k.child,k.tag===22&&k.memoizedState!==null?tm(g):M!==null?(M.return=k,pe=M):tm(g);for(;y!==null;)pe=y,Jg(y),y=y.sibling;pe=g,na=E,Lt=_}Zg(i)}else(g.subtreeFlags&8772)!==0&&y!==null?(y.return=g,pe=y):Zg(i)}}function Zg(i){for(;pe!==null;){var o=pe;if((o.flags&8772)!==0){var u=o.alternate;try{if((o.flags&8772)!==0)switch(o.tag){case 0:case 11:case 15:Lt||ra(5,o);break;case 1:var f=o.stateNode;if(o.flags&4&&!Lt)if(u===null)f.componentDidMount();else{var g=o.elementType===o.type?u.memoizedProps:Ln(o.type,u.memoizedProps);f.componentDidUpdate(g,u.memoizedState,f.__reactInternalSnapshotBeforeUpdate)}var y=o.updateQueue;y!==null&&eg(o,y,f);break;case 3:var k=o.updateQueue;if(k!==null){if(u=null,o.child!==null)switch(o.child.tag){case 5:u=o.child.stateNode;break;case 1:u=o.child.stateNode}eg(o,k,u)}break;case 5:var E=o.stateNode;if(u===null&&o.flags&4){u=E;var M=o.memoizedProps;switch(o.type){case"button":case"input":case"select":case"textarea":M.autoFocus&&u.focus();break;case"img":M.src&&(u.src=M.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(o.memoizedState===null){var _=o.alternate;if(_!==null){var K=_.memoizedState;if(K!==null){var G=K.dehydrated;G!==null&&Ws(G)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(t(163))}Lt||o.flags&512&&th(o)}catch($){Je(o,o.return,$)}}if(o===i){pe=null;break}if(u=o.sibling,u!==null){u.return=o.return,pe=u;break}pe=o.return}}function em(i){for(;pe!==null;){var o=pe;if(o===i){pe=null;break}var u=o.sibling;if(u!==null){u.return=o.return,pe=u;break}pe=o.return}}function tm(i){for(;pe!==null;){var o=pe;try{switch(o.tag){case 0:case 11:case 15:var u=o.return;try{ra(4,o)}catch(M){Je(o,u,M)}break;case 1:var f=o.stateNode;if(typeof f.componentDidMount=="function"){var g=o.return;try{f.componentDidMount()}catch(M){Je(o,g,M)}}var y=o.return;try{th(o)}catch(M){Je(o,y,M)}break;case 5:var k=o.return;try{th(o)}catch(M){Je(o,k,M)}}}catch(M){Je(o,o.return,M)}if(o===i){pe=null;break}var E=o.sibling;if(E!==null){E.return=o.return,pe=E;break}pe=o.return}}var ow=Math.ceil,ia=B.ReactCurrentDispatcher,ih=B.ReactCurrentOwner,kn=B.ReactCurrentBatchConfig,Ne=0,yt=null,lt=null,Ot=0,un=0,is=Ir(0),dt=0,fo=null,ki=0,sa=0,sh=0,po=null,Gt=null,oh=0,ss=1/0,vr=null,oa=!1,lh=null,Vr=null,la=!1,Wr=null,aa=0,go=0,ah=null,ua=-1,ca=0;function Ht(){return(Ne&6)!==0?tt():ua!==-1?ua:ua=tt()}function Qr(i){return(i.mode&1)===0?1:(Ne&2)!==0&&Ot!==0?Ot&-Ot:Wk.transition!==null?(ca===0&&(ca=Kd()),ca):(i=Be,i!==0||(i=window.event,i=i===void 0?16:rp(i.type)),i)}function Bn(i,o,u,f){if(50<go)throw go=0,ah=null,Error(t(185));zs(i,u,f),((Ne&2)===0||i!==yt)&&(i===yt&&((Ne&2)===0&&(sa|=u),dt===4&&$r(i,Ot)),Jt(i,f),u===1&&Ne===0&&(o.mode&1)===0&&(ss=tt()+500,zl&&zr()))}function Jt(i,o){var u=i.callbackNode;W1(i,o);var f=xl(i,i===yt?Ot:0);if(f===0)u!==null&&$d(u),i.callbackNode=null,i.callbackPriority=0;else if(o=f&-f,i.callbackPriority!==o){if(u!=null&&$d(u),o===1)i.tag===0?Vk(rm.bind(null,i)):Vp(rm.bind(null,i)),zk(function(){(Ne&6)===0&&zr()}),u=null;else{switch(qd(f)){case 1:u=Hu;break;case 4:u=Ud;break;case 16:u=gl;break;case 536870912:u=Xd;break;default:u=gl}u=hm(u,nm.bind(null,i))}i.callbackPriority=o,i.callbackNode=u}}function nm(i,o){if(ua=-1,ca=0,(Ne&6)!==0)throw Error(t(327));var u=i.callbackNode;if(os()&&i.callbackNode!==u)return null;var f=xl(i,i===yt?Ot:0);if(f===0)return null;if((f&30)!==0||(f&i.expiredLanes)!==0||o)o=ha(i,f);else{o=f;var g=Ne;Ne|=2;var y=sm();(yt!==i||Ot!==o)&&(vr=null,ss=tt()+500,bi(i,o));do try{uw();break}catch(E){im(i,E)}while(!0);Pc(),ia.current=y,Ne=g,lt!==null?o=0:(yt=null,Ot=0,o=dt)}if(o!==0){if(o===2&&(g=Vu(i),g!==0&&(f=g,o=uh(i,g))),o===1)throw u=fo,bi(i,0),$r(i,f),Jt(i,tt()),u;if(o===6)$r(i,f);else{if(g=i.current.alternate,(f&30)===0&&!lw(g)&&(o=ha(i,f),o===2&&(y=Vu(i),y!==0&&(f=y,o=uh(i,y))),o===1))throw u=fo,bi(i,0),$r(i,f),Jt(i,tt()),u;switch(i.finishedWork=g,i.finishedLanes=f,o){case 0:case 1:throw Error(t(345));case 2:Si(i,Gt,vr);break;case 3:if($r(i,f),(f&130023424)===f&&(o=oh+500-tt(),10<o)){if(xl(i,0)!==0)break;if(g=i.suspendedLanes,(g&f)!==f){Ht(),i.pingedLanes|=i.suspendedLanes&g;break}i.timeoutHandle=gc(Si.bind(null,i,Gt,vr),o);break}Si(i,Gt,vr);break;case 4:if($r(i,f),(f&4194240)===f)break;for(o=i.eventTimes,g=-1;0<f;){var k=31-Nn(f);y=1<<k,k=o[k],k>g&&(g=k),f&=~y}if(f=g,f=tt()-f,f=(120>f?120:480>f?480:1080>f?1080:1920>f?1920:3e3>f?3e3:4320>f?4320:1960*ow(f/1960))-f,10<f){i.timeoutHandle=gc(Si.bind(null,i,Gt,vr),f);break}Si(i,Gt,vr);break;case 5:Si(i,Gt,vr);break;default:throw Error(t(329))}}}return Jt(i,tt()),i.callbackNode===u?nm.bind(null,i):null}function uh(i,o){var u=po;return i.current.memoizedState.isDehydrated&&(bi(i,o).flags|=256),i=ha(i,o),i!==2&&(o=Gt,Gt=u,o!==null&&ch(o)),i}function ch(i){Gt===null?Gt=i:Gt.push.apply(Gt,i)}function lw(i){for(var o=i;;){if(o.flags&16384){var u=o.updateQueue;if(u!==null&&(u=u.stores,u!==null))for(var f=0;f<u.length;f++){var g=u[f],y=g.getSnapshot;g=g.value;try{if(!Dn(y(),g))return!1}catch{return!1}}}if(u=o.child,o.subtreeFlags&16384&&u!==null)u.return=o,o=u;else{if(o===i)break;for(;o.sibling===null;){if(o.return===null||o.return===i)return!0;o=o.return}o.sibling.return=o.return,o=o.sibling}}return!0}function $r(i,o){for(o&=~sh,o&=~sa,i.suspendedLanes|=o,i.pingedLanes&=~o,i=i.expirationTimes;0<o;){var u=31-Nn(o),f=1<<u;i[u]=-1,o&=~f}}function rm(i){if((Ne&6)!==0)throw Error(t(327));os();var o=xl(i,0);if((o&1)===0)return Jt(i,tt()),null;var u=ha(i,o);if(i.tag!==0&&u===2){var f=Vu(i);f!==0&&(o=f,u=uh(i,f))}if(u===1)throw u=fo,bi(i,0),$r(i,o),Jt(i,tt()),u;if(u===6)throw Error(t(345));return i.finishedWork=i.current.alternate,i.finishedLanes=o,Si(i,Gt,vr),Jt(i,tt()),null}function hh(i,o){var u=Ne;Ne|=1;try{return i(o)}finally{Ne=u,Ne===0&&(ss=tt()+500,zl&&zr())}}function wi(i){Wr!==null&&Wr.tag===0&&(Ne&6)===0&&os();var o=Ne;Ne|=1;var u=kn.transition,f=Be;try{if(kn.transition=null,Be=1,i)return i()}finally{Be=f,kn.transition=u,Ne=o,(Ne&6)===0&&zr()}}function fh(){un=is.current,Qe(is)}function bi(i,o){i.finishedWork=null,i.finishedLanes=0;var u=i.timeoutHandle;if(u!==-1&&(i.timeoutHandle=-1,Bk(u)),lt!==null)for(u=lt.return;u!==null;){var f=u;switch(wc(f),f.tag){case 1:f=f.type.childContextTypes,f!=null&&Il();break;case 3:ts(),Qe(Kt),Qe(Nt),Lc();break;case 5:Dc(f);break;case 4:ts();break;case 13:Qe(qe);break;case 19:Qe(qe);break;case 10:Ec(f.type._context);break;case 22:case 23:fh()}u=u.return}if(yt=i,lt=i=Ur(i.current,null),Ot=un=o,dt=0,fo=null,sh=sa=ki=0,Gt=po=null,yi!==null){for(o=0;o<yi.length;o++)if(u=yi[o],f=u.interleaved,f!==null){u.interleaved=null;var g=f.next,y=u.pending;if(y!==null){var k=y.next;y.next=g,f.next=k}u.pending=f}yi=null}return i}function im(i,o){do{var u=lt;try{if(Pc(),Kl.current=Jl,ql){for(var f=Ye.memoizedState;f!==null;){var g=f.queue;g!==null&&(g.pending=null),f=f.next}ql=!1}if(xi=0,mt=ft=Ye=null,oo=!1,lo=0,ih.current=null,u===null||u.return===null){dt=1,fo=o,lt=null;break}e:{var y=i,k=u.return,E=u,M=o;if(o=Ot,E.flags|=32768,M!==null&&typeof M=="object"&&typeof M.then=="function"){var _=M,K=E,G=K.tag;if((K.mode&1)===0&&(G===0||G===11||G===15)){var $=K.alternate;$?(K.updateQueue=$.updateQueue,K.memoizedState=$.memoizedState,K.lanes=$.lanes):(K.updateQueue=null,K.memoizedState=null)}var ce=Mg(k);if(ce!==null){ce.flags&=-257,Rg(ce,k,E,y,o),ce.mode&1&&Ag(y,_,o),o=ce,M=_;var ge=o.updateQueue;if(ge===null){var me=new Set;me.add(M),o.updateQueue=me}else ge.add(M);break e}else{if((o&1)===0){Ag(y,_,o),dh();break e}M=Error(t(426))}}else if(Ue&&E.mode&1){var nt=Mg(k);if(nt!==null){(nt.flags&65536)===0&&(nt.flags|=256),Rg(nt,k,E,y,o),Oc(ns(M,E));break e}}y=M=ns(M,E),dt!==4&&(dt=2),po===null?po=[y]:po.push(y),y=k;do{switch(y.tag){case 3:y.flags|=65536,o&=-o,y.lanes|=o;var I=Pg(y,M,o);Zp(y,I);break e;case 1:E=M;var R=y.type,z=y.stateNode;if((y.flags&128)===0&&(typeof R.getDerivedStateFromError=="function"||z!==null&&typeof z.componentDidCatch=="function"&&(Vr===null||!Vr.has(z)))){y.flags|=65536,o&=-o,y.lanes|=o;var ne=Eg(y,E,o);Zp(y,ne);break e}}y=y.return}while(y!==null)}lm(u)}catch(ye){o=ye,lt===u&&u!==null&&(lt=u=u.return);continue}break}while(!0)}function sm(){var i=ia.current;return ia.current=Jl,i===null?Jl:i}function dh(){(dt===0||dt===3||dt===2)&&(dt=4),yt===null||(ki&268435455)===0&&(sa&268435455)===0||$r(yt,Ot)}function ha(i,o){var u=Ne;Ne|=2;var f=sm();(yt!==i||Ot!==o)&&(vr=null,bi(i,o));do try{aw();break}catch(g){im(i,g)}while(!0);if(Pc(),Ne=u,ia.current=f,lt!==null)throw Error(t(261));return yt=null,Ot=0,dt}function aw(){for(;lt!==null;)om(lt)}function uw(){for(;lt!==null&&!L1();)om(lt)}function om(i){var o=cm(i.alternate,i,un);i.memoizedProps=i.pendingProps,o===null?lm(i):lt=o,ih.current=null}function lm(i){var o=i;do{var u=o.alternate;if(i=o.return,(o.flags&32768)===0){if(u=tw(u,o,un),u!==null){lt=u;return}}else{if(u=nw(u,o),u!==null){u.flags&=32767,lt=u;return}if(i!==null)i.flags|=32768,i.subtreeFlags=0,i.deletions=null;else{dt=6,lt=null;return}}if(o=o.sibling,o!==null){lt=o;return}lt=o=i}while(o!==null);dt===0&&(dt=5)}function Si(i,o,u){var f=Be,g=kn.transition;try{kn.transition=null,Be=1,cw(i,o,u,f)}finally{kn.transition=g,Be=f}return null}function cw(i,o,u,f){do os();while(Wr!==null);if((Ne&6)!==0)throw Error(t(327));u=i.finishedWork;var g=i.finishedLanes;if(u===null)return null;if(i.finishedWork=null,i.finishedLanes=0,u===i.current)throw Error(t(177));i.callbackNode=null,i.callbackPriority=0;var y=u.lanes|u.childLanes;if(Q1(i,y),i===yt&&(lt=yt=null,Ot=0),(u.subtreeFlags&2064)===0&&(u.flags&2064)===0||la||(la=!0,hm(gl,function(){return os(),null})),y=(u.flags&15990)!==0,(u.subtreeFlags&15990)!==0||y){y=kn.transition,kn.transition=null;var k=Be;Be=1;var E=Ne;Ne|=4,ih.current=null,iw(i,u),Gg(u,i),Rk(dc),bl=!!fc,dc=fc=null,i.current=u,sw(u),j1(),Ne=E,Be=k,kn.transition=y}else i.current=u;if(la&&(la=!1,Wr=i,aa=g),y=i.pendingLanes,y===0&&(Vr=null),z1(u.stateNode),Jt(i,tt()),o!==null)for(f=i.onRecoverableError,u=0;u<o.length;u++)g=o[u],f(g.value,{componentStack:g.stack,digest:g.digest});if(oa)throw oa=!1,i=lh,lh=null,i;return(aa&1)!==0&&i.tag!==0&&os(),y=i.pendingLanes,(y&1)!==0?i===ah?go++:(go=0,ah=i):go=0,zr(),null}function os(){if(Wr!==null){var i=qd(aa),o=kn.transition,u=Be;try{if(kn.transition=null,Be=16>i?16:i,Wr===null)var f=!1;else{if(i=Wr,Wr=null,aa=0,(Ne&6)!==0)throw Error(t(331));var g=Ne;for(Ne|=4,pe=i.current;pe!==null;){var y=pe,k=y.child;if((pe.flags&16)!==0){var E=y.deletions;if(E!==null){for(var M=0;M<E.length;M++){var _=E[M];for(pe=_;pe!==null;){var K=pe;switch(K.tag){case 0:case 11:case 15:ho(8,K,y)}var G=K.child;if(G!==null)G.return=K,pe=G;else for(;pe!==null;){K=pe;var $=K.sibling,ce=K.return;if(Ug(K),K===_){pe=null;break}if($!==null){$.return=ce,pe=$;break}pe=ce}}}var ge=y.alternate;if(ge!==null){var me=ge.child;if(me!==null){ge.child=null;do{var nt=me.sibling;me.sibling=null,me=nt}while(me!==null)}}pe=y}}if((y.subtreeFlags&2064)!==0&&k!==null)k.return=y,pe=k;else e:for(;pe!==null;){if(y=pe,(y.flags&2048)!==0)switch(y.tag){case 0:case 11:case 15:ho(9,y,y.return)}var I=y.sibling;if(I!==null){I.return=y.return,pe=I;break e}pe=y.return}}var R=i.current;for(pe=R;pe!==null;){k=pe;var z=k.child;if((k.subtreeFlags&2064)!==0&&z!==null)z.return=k,pe=z;else e:for(k=R;pe!==null;){if(E=pe,(E.flags&2048)!==0)try{switch(E.tag){case 0:case 11:case 15:ra(9,E)}}catch(ye){Je(E,E.return,ye)}if(E===k){pe=null;break e}var ne=E.sibling;if(ne!==null){ne.return=E.return,pe=ne;break e}pe=E.return}}if(Ne=g,zr(),Xn&&typeof Xn.onPostCommitFiberRoot=="function")try{Xn.onPostCommitFiberRoot(ml,i)}catch{}f=!0}return f}finally{Be=u,kn.transition=o}}return!1}function am(i,o,u){o=ns(u,o),o=Pg(i,o,1),i=_r(i,o,1),o=Ht(),i!==null&&(zs(i,1,o),Jt(i,o))}function Je(i,o,u){if(i.tag===3)am(i,i,u);else for(;o!==null;){if(o.tag===3){am(o,i,u);break}else if(o.tag===1){var f=o.stateNode;if(typeof o.type.getDerivedStateFromError=="function"||typeof f.componentDidCatch=="function"&&(Vr===null||!Vr.has(f))){i=ns(u,i),i=Eg(o,i,1),o=_r(o,i,1),i=Ht(),o!==null&&(zs(o,1,i),Jt(o,i));break}}o=o.return}}function hw(i,o,u){var f=i.pingCache;f!==null&&f.delete(o),o=Ht(),i.pingedLanes|=i.suspendedLanes&u,yt===i&&(Ot&u)===u&&(dt===4||dt===3&&(Ot&130023424)===Ot&&500>tt()-oh?bi(i,0):sh|=u),Jt(i,o)}function um(i,o){o===0&&((i.mode&1)===0?o=1:(o=vl,vl<<=1,(vl&130023424)===0&&(vl=4194304)));var u=Ht();i=gr(i,o),i!==null&&(zs(i,o,u),Jt(i,u))}function fw(i){var o=i.memoizedState,u=0;o!==null&&(u=o.retryLane),um(i,u)}function dw(i,o){var u=0;switch(i.tag){case 13:var f=i.stateNode,g=i.memoizedState;g!==null&&(u=g.retryLane);break;case 19:f=i.stateNode;break;default:throw Error(t(314))}f!==null&&f.delete(o),um(i,u)}var cm;cm=function(i,o,u){if(i!==null)if(i.memoizedProps!==o.pendingProps||Kt.current)Yt=!0;else{if((i.lanes&u)===0&&(o.flags&128)===0)return Yt=!1,ew(i,o,u);Yt=(i.flags&131072)!==0}else Yt=!1,Ue&&(o.flags&1048576)!==0&&Wp(o,_l,o.index);switch(o.lanes=0,o.tag){case 2:var f=o.type;ta(i,o),i=o.pendingProps;var g=Ki(o,Nt.current);es(o,u),g=Bc(null,o,f,i,g,u);var y=zc();return o.flags|=1,typeof g=="object"&&g!==null&&typeof g.render=="function"&&g.$$typeof===void 0?(o.tag=1,o.memoizedState=null,o.updateQueue=null,qt(f)?(y=!0,Bl(o)):y=!1,o.memoizedState=g.state!==null&&g.state!==void 0?g.state:null,Rc(o),g.updater=Zl,o.stateNode=g,g._reactInternals=o,Qc(o,f,i,u),o=Kc(null,o,f,!0,y,u)):(o.tag=0,Ue&&y&&kc(o),_t(null,o,g,u),o=o.child),o;case 16:f=o.elementType;e:{switch(ta(i,o),i=o.pendingProps,g=f._init,f=g(f._payload),o.type=f,g=o.tag=gw(f),i=Ln(f,i),g){case 0:o=Xc(null,o,f,i,u);break e;case 1:o=Ig(null,o,f,i,u);break e;case 11:o=Ng(null,o,f,i,u);break e;case 14:o=Dg(null,o,f,Ln(f.type,i),u);break e}throw Error(t(306,f,""))}return o;case 0:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ln(f,g),Xc(i,o,f,g,u);case 1:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ln(f,g),Ig(i,o,f,g,u);case 3:e:{if(Bg(o),i===null)throw Error(t(387));f=o.pendingProps,y=o.memoizedState,g=y.element,Jp(i,o),Ul(o,f,null,u);var k=o.memoizedState;if(f=k.element,y.isDehydrated)if(y={element:f,isDehydrated:!1,cache:k.cache,pendingSuspenseBoundaries:k.pendingSuspenseBoundaries,transitions:k.transitions},o.updateQueue.baseState=y,o.memoizedState=y,o.flags&256){g=ns(Error(t(423)),o),o=zg(i,o,f,u,g);break e}else if(f!==g){g=ns(Error(t(424)),o),o=zg(i,o,f,u,g);break e}else for(an=jr(o.stateNode.containerInfo.firstChild),ln=o,Ue=!0,Tn=null,u=Yp(o,null,f,u),o.child=u;u;)u.flags=u.flags&-3|4096,u=u.sibling;else{if(Gi(),f===g){o=yr(i,o,u);break e}_t(i,o,f,u)}o=o.child}return o;case 5:return tg(o),i===null&&Sc(o),f=o.type,g=o.pendingProps,y=i!==null?i.memoizedProps:null,k=g.children,pc(f,g)?k=null:y!==null&&pc(f,y)&&(o.flags|=32),jg(i,o),_t(i,o,k,u),o.child;case 6:return i===null&&Sc(o),null;case 13:return Fg(i,o,u);case 4:return Nc(o,o.stateNode.containerInfo),f=o.pendingProps,i===null?o.child=Ji(o,null,f,u):_t(i,o,f,u),o.child;case 11:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ln(f,g),Ng(i,o,f,g,u);case 7:return _t(i,o,o.pendingProps,u),o.child;case 8:return _t(i,o,o.pendingProps.children,u),o.child;case 12:return _t(i,o,o.pendingProps.children,u),o.child;case 10:e:{if(f=o.type._context,g=o.pendingProps,y=o.memoizedProps,k=g.value,He(Wl,f._currentValue),f._currentValue=k,y!==null)if(Dn(y.value,k)){if(y.children===g.children&&!Kt.current){o=yr(i,o,u);break e}}else for(y=o.child,y!==null&&(y.return=o);y!==null;){var E=y.dependencies;if(E!==null){k=y.child;for(var M=E.firstContext;M!==null;){if(M.context===f){if(y.tag===1){M=mr(-1,u&-u),M.tag=2;var _=y.updateQueue;if(_!==null){_=_.shared;var K=_.pending;K===null?M.next=M:(M.next=K.next,K.next=M),_.pending=M}}y.lanes|=u,M=y.alternate,M!==null&&(M.lanes|=u),Ac(y.return,u,o),E.lanes|=u;break}M=M.next}}else if(y.tag===10)k=y.type===o.type?null:y.child;else if(y.tag===18){if(k=y.return,k===null)throw Error(t(341));k.lanes|=u,E=k.alternate,E!==null&&(E.lanes|=u),Ac(k,u,o),k=y.sibling}else k=y.child;if(k!==null)k.return=y;else for(k=y;k!==null;){if(k===o){k=null;break}if(y=k.sibling,y!==null){y.return=k.return,k=y;break}k=k.return}y=k}_t(i,o,g.children,u),o=o.child}return o;case 9:return g=o.type,f=o.pendingProps.children,es(o,u),g=vn(g),f=f(g),o.flags|=1,_t(i,o,f,u),o.child;case 14:return f=o.type,g=Ln(f,o.pendingProps),g=Ln(f.type,g),Dg(i,o,f,g,u);case 15:return Tg(i,o,o.type,o.pendingProps,u);case 17:return f=o.type,g=o.pendingProps,g=o.elementType===f?g:Ln(f,g),ta(i,o),o.tag=1,qt(f)?(i=!0,Bl(o)):i=!1,es(o,u),Og(o,f,g),Qc(o,f,g,u),Kc(null,o,f,!0,i,u);case 19:return Hg(i,o,u);case 22:return Lg(i,o,u)}throw Error(t(156,o.tag))};function hm(i,o){return Qd(i,o)}function pw(i,o,u,f){this.tag=i,this.key=u,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=o,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=f,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function wn(i,o,u,f){return new pw(i,o,u,f)}function ph(i){return i=i.prototype,!(!i||!i.isReactComponent)}function gw(i){if(typeof i=="function")return ph(i)?1:0;if(i!=null){if(i=i.$$typeof,i===W)return 11;if(i===U)return 14}return 2}function Ur(i,o){var u=i.alternate;return u===null?(u=wn(i.tag,o,i.key,i.mode),u.elementType=i.elementType,u.type=i.type,u.stateNode=i.stateNode,u.alternate=i,i.alternate=u):(u.pendingProps=o,u.type=i.type,u.flags=0,u.subtreeFlags=0,u.deletions=null),u.flags=i.flags&14680064,u.childLanes=i.childLanes,u.lanes=i.lanes,u.child=i.child,u.memoizedProps=i.memoizedProps,u.memoizedState=i.memoizedState,u.updateQueue=i.updateQueue,o=i.dependencies,u.dependencies=o===null?null:{lanes:o.lanes,firstContext:o.firstContext},u.sibling=i.sibling,u.index=i.index,u.ref=i.ref,u}function fa(i,o,u,f,g,y){var k=2;if(f=i,typeof i=="function")ph(i)&&(k=1);else if(typeof i=="string")k=5;else e:switch(i){case L:return Oi(u.children,g,y,o);case V:k=8,g|=8;break;case q:return i=wn(12,u,o,g|2),i.elementType=q,i.lanes=y,i;case J:return i=wn(13,u,o,g),i.elementType=J,i.lanes=y,i;case Z:return i=wn(19,u,o,g),i.elementType=Z,i.lanes=y,i;case fe:return da(u,g,y,o);default:if(typeof i=="object"&&i!==null)switch(i.$$typeof){case Y:k=10;break e;case H:k=9;break e;case W:k=11;break e;case U:k=14;break e;case ue:k=16,f=null;break e}throw Error(t(130,i==null?i:typeof i,""))}return o=wn(k,u,o,g),o.elementType=i,o.type=f,o.lanes=y,o}function Oi(i,o,u,f){return i=wn(7,i,f,o),i.lanes=u,i}function da(i,o,u,f){return i=wn(22,i,f,o),i.elementType=fe,i.lanes=u,i.stateNode={isHidden:!1},i}function gh(i,o,u){return i=wn(6,i,null,o),i.lanes=u,i}function mh(i,o,u){return o=wn(4,i.children!==null?i.children:[],i.key,o),o.lanes=u,o.stateNode={containerInfo:i.containerInfo,pendingChildren:null,implementation:i.implementation},o}function mw(i,o,u,f,g){this.tag=o,this.containerInfo=i,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wu(0),this.expirationTimes=Wu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wu(0),this.identifierPrefix=f,this.onRecoverableError=g,this.mutableSourceEagerHydrationData=null}function yh(i,o,u,f,g,y,k,E,M){return i=new mw(i,o,u,E,M),o===1?(o=1,y===!0&&(o|=8)):o=0,y=wn(3,null,null,o),i.current=y,y.stateNode=i,y.memoizedState={element:f,isDehydrated:u,cache:null,transitions:null,pendingSuspenseBoundaries:null},Rc(y),i}function yw(i,o,u){var f=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:F,key:f==null?null:""+f,children:i,containerInfo:o,implementation:u}}function fm(i){if(!i)return Br;i=i._reactInternals;e:{if(fi(i)!==i||i.tag!==1)throw Error(t(170));var o=i;do{switch(o.tag){case 3:o=o.stateNode.context;break e;case 1:if(qt(o.type)){o=o.stateNode.__reactInternalMemoizedMergedChildContext;break e}}o=o.return}while(o!==null);throw Error(t(171))}if(i.tag===1){var u=i.type;if(qt(u))return _p(i,u,o)}return o}function dm(i,o,u,f,g,y,k,E,M){return i=yh(u,f,!0,i,g,y,k,E,M),i.context=fm(null),u=i.current,f=Ht(),g=Qr(u),y=mr(f,g),y.callback=o??null,_r(u,y,g),i.current.lanes=g,zs(i,g,f),Jt(i,f),i}function pa(i,o,u,f){var g=o.current,y=Ht(),k=Qr(g);return u=fm(u),o.context===null?o.context=u:o.pendingContext=u,o=mr(y,k),o.payload={element:i},f=f===void 0?null:f,f!==null&&(o.callback=f),i=_r(g,o,k),i!==null&&(Bn(i,g,k,y),$l(i,g,k)),k}function ga(i){if(i=i.current,!i.child)return null;switch(i.child.tag){case 5:return i.child.stateNode;default:return i.child.stateNode}}function pm(i,o){if(i=i.memoizedState,i!==null&&i.dehydrated!==null){var u=i.retryLane;i.retryLane=u!==0&&u<o?u:o}}function vh(i,o){pm(i,o),(i=i.alternate)&&pm(i,o)}function vw(){return null}var gm=typeof reportError=="function"?reportError:function(i){console.error(i)};function xh(i){this._internalRoot=i}ma.prototype.render=xh.prototype.render=function(i){var o=this._internalRoot;if(o===null)throw Error(t(409));pa(i,o,null,null)},ma.prototype.unmount=xh.prototype.unmount=function(){var i=this._internalRoot;if(i!==null){this._internalRoot=null;var o=i.containerInfo;wi(function(){pa(null,i,null,null)}),o[hr]=null}};function ma(i){this._internalRoot=i}ma.prototype.unstable_scheduleHydration=function(i){if(i){var o=Jd();i={blockedOn:null,target:i,priority:o};for(var u=0;u<Dr.length&&o!==0&&o<Dr[u].priority;u++);Dr.splice(u,0,i),u===0&&tp(i)}};function kh(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11)}function ya(i){return!(!i||i.nodeType!==1&&i.nodeType!==9&&i.nodeType!==11&&(i.nodeType!==8||i.nodeValue!==" react-mount-point-unstable "))}function mm(){}function xw(i,o,u,f,g){if(g){if(typeof f=="function"){var y=f;f=function(){var _=ga(k);y.call(_)}}var k=dm(o,f,i,0,null,!1,!1,"",mm);return i._reactRootContainer=k,i[hr]=k.current,Js(i.nodeType===8?i.parentNode:i),wi(),k}for(;g=i.lastChild;)i.removeChild(g);if(typeof f=="function"){var E=f;f=function(){var _=ga(M);E.call(_)}}var M=yh(i,0,!1,null,null,!1,!1,"",mm);return i._reactRootContainer=M,i[hr]=M.current,Js(i.nodeType===8?i.parentNode:i),wi(function(){pa(o,M,u,f)}),M}function va(i,o,u,f,g){var y=u._reactRootContainer;if(y){var k=y;if(typeof g=="function"){var E=g;g=function(){var M=ga(k);E.call(M)}}pa(o,k,i,g)}else k=xw(u,o,i,g,f);return ga(k)}Yd=function(i){switch(i.tag){case 3:var o=i.stateNode;if(o.current.memoizedState.isDehydrated){var u=Bs(o.pendingLanes);u!==0&&(Qu(o,u|1),Jt(o,tt()),(Ne&6)===0&&(ss=tt()+500,zr()))}break;case 13:wi(function(){var f=gr(i,1);if(f!==null){var g=Ht();Bn(f,i,1,g)}}),vh(i,1)}},$u=function(i){if(i.tag===13){var o=gr(i,134217728);if(o!==null){var u=Ht();Bn(o,i,134217728,u)}vh(i,134217728)}},Gd=function(i){if(i.tag===13){var o=Qr(i),u=gr(i,o);if(u!==null){var f=Ht();Bn(u,i,o,f)}vh(i,o)}},Jd=function(){return Be},Zd=function(i,o){var u=Be;try{return Be=i,o()}finally{Be=u}},js=function(i,o,u){switch(o){case"input":if(Er(i,u),o=u.name,u.type==="radio"&&o!=null){for(u=i;u.parentNode;)u=u.parentNode;for(u=u.querySelectorAll("input[name="+JSON.stringify(""+o)+'][type="radio"]'),o=0;o<u.length;o++){var f=u[o];if(f!==i&&f.form===i.form){var g=jl(f);if(!g)throw Error(t(90));Ve(f),Er(f,g)}}}break;case"textarea":En(i,u);break;case"select":o=u.value,o!=null&&Ee(i,!!u.multiple,o,!1)}},Ft=hh,Mt=wi;var kw={usingClientEntryPoint:!1,Events:[to,Ui,jl,At,An,hh]},mo={findFiberByHostInstance:di,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ww={bundleType:mo.bundleType,version:mo.version,rendererPackageName:mo.rendererPackageName,rendererConfig:mo.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:B.ReactCurrentDispatcher,findHostInstanceByFiber:function(i){return i=Vd(i),i===null?null:i.stateNode},findFiberByHostInstance:mo.findFiberByHostInstance||vw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var xa=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!xa.isDisabled&&xa.supportsFiber)try{ml=xa.inject(ww),Xn=xa}catch{}}return Zt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=kw,Zt.createPortal=function(i,o){var u=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!kh(o))throw Error(t(200));return yw(i,o,null,u)},Zt.createRoot=function(i,o){if(!kh(i))throw Error(t(299));var u=!1,f="",g=gm;return o!=null&&(o.unstable_strictMode===!0&&(u=!0),o.identifierPrefix!==void 0&&(f=o.identifierPrefix),o.onRecoverableError!==void 0&&(g=o.onRecoverableError)),o=yh(i,1,!1,null,null,u,!1,f,g),i[hr]=o.current,Js(i.nodeType===8?i.parentNode:i),new xh(o)},Zt.findDOMNode=function(i){if(i==null)return null;if(i.nodeType===1)return i;var o=i._reactInternals;if(o===void 0)throw typeof i.render=="function"?Error(t(188)):(i=Object.keys(i).join(","),Error(t(268,i)));return i=Vd(o),i=i===null?null:i.stateNode,i},Zt.flushSync=function(i){return wi(i)},Zt.hydrate=function(i,o,u){if(!ya(o))throw Error(t(200));return va(null,i,o,!0,u)},Zt.hydrateRoot=function(i,o,u){if(!kh(i))throw Error(t(405));var f=u!=null&&u.hydratedSources||null,g=!1,y="",k=gm;if(u!=null&&(u.unstable_strictMode===!0&&(g=!0),u.identifierPrefix!==void 0&&(y=u.identifierPrefix),u.onRecoverableError!==void 0&&(k=u.onRecoverableError)),o=dm(o,null,i,1,u??null,g,!1,y,k),i[hr]=o.current,Js(i),f)for(i=0;i<f.length;i++)u=f[i],g=u._getVersion,g=g(u._source),o.mutableSourceEagerHydrationData==null?o.mutableSourceEagerHydrationData=[u,g]:o.mutableSourceEagerHydrationData.push(u,g);return new ma(o)},Zt.render=function(i,o,u){if(!ya(o))throw Error(t(200));return va(null,i,o,!1,u)},Zt.unmountComponentAtNode=function(i){if(!ya(i))throw Error(t(40));return i._reactRootContainer?(wi(function(){va(null,null,i,!1,function(){i._reactRootContainer=null,i[hr]=null})}),!0):!1},Zt.unstable_batchedUpdates=hh,Zt.unstable_renderSubtreeIntoContainer=function(i,o,u,f){if(!ya(u))throw Error(t(200));if(i==null||i._reactInternals===void 0)throw Error(t(38));return va(i,o,u,!1,f)},Zt.version="18.3.1-next-f1338f8080-20240426",Zt}var Cm;function Ly(){if(Cm)return Sh.exports;Cm=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(e){console.error(e)}}return n(),Sh.exports=Rw(),Sh.exports}var Pm;function Nw(){if(Pm)return ka;Pm=1;var n=Ly();return ka.createRoot=n.createRoot,ka.hydrateRoot=n.hydrateRoot,ka}var Dw=Nw();const Tw=Ty(Dw);var So=Ly();function Lw(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return O.useMemo(()=>r=>{e.forEach(s=>s(r))},e)}const Pu=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function Es(n){const e=Object.prototype.toString.call(n);return e==="[object Window]"||e==="[object global]"}function ld(n){return"nodeType"in n}function tn(n){var e,t;return n?Es(n)?n:ld(n)&&(e=(t=n.ownerDocument)==null?void 0:t.defaultView)!=null?e:window:window}function ad(n){const{Document:e}=tn(n);return n instanceof e}function tl(n){return Es(n)?!1:n instanceof tn(n).HTMLElement}function jy(n){return n instanceof tn(n).SVGElement}function As(n){return n?Es(n)?n.document:ld(n)?ad(n)?n:tl(n)||jy(n)?n.ownerDocument:document:document:document}const sr=Pu?O.useLayoutEffect:O.useEffect;function ud(n){const e=O.useRef(n);return sr(()=>{e.current=n}),O.useCallback(function(){for(var t=arguments.length,r=new Array(t),s=0;s<t;s++)r[s]=arguments[s];return e.current==null?void 0:e.current(...r)},[])}function jw(){const n=O.useRef(null),e=O.useCallback((r,s)=>{n.current=setInterval(r,s)},[]),t=O.useCallback(()=>{n.current!==null&&(clearInterval(n.current),n.current=null)},[]);return[e,t]}function _o(n,e){e===void 0&&(e=[n]);const t=O.useRef(n);return sr(()=>{t.current!==n&&(t.current=n)},e),t}function nl(n,e){const t=O.useRef();return O.useMemo(()=>{const r=n(t.current);return t.current=r,r},[...e])}function iu(n){const e=ud(n),t=O.useRef(null),r=O.useCallback(s=>{s!==t.current&&(e==null||e(s,t.current)),t.current=s},[]);return[t,r]}function rf(n){const e=O.useRef();return O.useEffect(()=>{e.current=n},[n]),e.current}let Ph={};function rl(n,e){return O.useMemo(()=>{if(e)return e;const t=Ph[n]==null?0:Ph[n]+1;return Ph[n]=t,n+"-"+t},[n,e])}function Iy(n){return function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),s=1;s<t;s++)r[s-1]=arguments[s];return r.reduce((l,a)=>{const c=Object.entries(a);for(const[h,p]of c){const d=l[h];d!=null&&(l[h]=d+n*p)}return l},{...e})}}const ds=Iy(1),su=Iy(-1);function Iw(n){return"clientX"in n&&"clientY"in n}function cd(n){if(!n)return!1;const{KeyboardEvent:e}=tn(n.target);return e&&n instanceof e}function Bw(n){if(!n)return!1;const{TouchEvent:e}=tn(n.target);return e&&n instanceof e}function sf(n){if(Bw(n)){if(n.touches&&n.touches.length){const{clientX:e,clientY:t}=n.touches[0];return{x:e,y:t}}else if(n.changedTouches&&n.changedTouches.length){const{clientX:e,clientY:t}=n.changedTouches[0];return{x:e,y:t}}}return Iw(n)?{x:n.clientX,y:n.clientY}:null}const Ho=Object.freeze({Translate:{toString(n){if(!n)return;const{x:e,y:t}=n;return"translate3d("+(e?Math.round(e):0)+"px, "+(t?Math.round(t):0)+"px, 0)"}},Scale:{toString(n){if(!n)return;const{scaleX:e,scaleY:t}=n;return"scaleX("+e+") scaleY("+t+")"}},Transform:{toString(n){if(n)return[Ho.Translate.toString(n),Ho.Scale.toString(n)].join(" ")}},Transition:{toString(n){let{property:e,duration:t,easing:r}=n;return e+" "+t+"ms "+r}}}),Em="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function zw(n){return n.matches(Em)?n:n.querySelector(Em)}const Fw={display:"none"};function _w(n){let{id:e,value:t}=n;return it.createElement("div",{id:e,style:Fw},t)}function Hw(n){let{id:e,announcement:t,ariaLiveType:r="assertive"}=n;const s={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return it.createElement("div",{id:e,style:s,role:"status","aria-live":r,"aria-atomic":!0},t)}function Vw(){const[n,e]=O.useState("");return{announce:O.useCallback(r=>{r!=null&&e(r)},[]),announcement:n}}const By=O.createContext(null);function Ww(n){const e=O.useContext(By);O.useEffect(()=>{if(!e)throw new Error("useDndMonitor must be used within a children of <DndContext>");return e(n)},[n,e])}function Qw(){const[n]=O.useState(()=>new Set),e=O.useCallback(r=>(n.add(r),()=>n.delete(r)),[n]);return[O.useCallback(r=>{let{type:s,event:l}=r;n.forEach(a=>{var c;return(c=a[s])==null?void 0:c.call(a,l)})},[n]),e]}const $w={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},Uw={onDragStart(n){let{active:e}=n;return"Picked up draggable item "+e.id+"."},onDragOver(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was moved over droppable area "+t.id+".":"Draggable item "+e.id+" is no longer over a droppable area."},onDragEnd(n){let{active:e,over:t}=n;return t?"Draggable item "+e.id+" was dropped over droppable area "+t.id:"Draggable item "+e.id+" was dropped."},onDragCancel(n){let{active:e}=n;return"Dragging was cancelled. Draggable item "+e.id+" was dropped."}};function Xw(n){let{announcements:e=Uw,container:t,hiddenTextDescribedById:r,screenReaderInstructions:s=$w}=n;const{announce:l,announcement:a}=Vw(),c=rl("DndLiveRegion"),[h,p]=O.useState(!1);if(O.useEffect(()=>{p(!0)},[]),Ww(O.useMemo(()=>({onDragStart(m){let{active:v}=m;l(e.onDragStart({active:v}))},onDragMove(m){let{active:v,over:x}=m;e.onDragMove&&l(e.onDragMove({active:v,over:x}))},onDragOver(m){let{active:v,over:x}=m;l(e.onDragOver({active:v,over:x}))},onDragEnd(m){let{active:v,over:x}=m;l(e.onDragEnd({active:v,over:x}))},onDragCancel(m){let{active:v,over:x}=m;l(e.onDragCancel({active:v,over:x}))}}),[l,e])),!h)return null;const d=it.createElement(it.Fragment,null,it.createElement(_w,{id:r,value:s.draggable}),it.createElement(Hw,{id:c,announcement:a}));return t?So.createPortal(d,t):d}var pt;(function(n){n.DragStart="dragStart",n.DragMove="dragMove",n.DragEnd="dragEnd",n.DragCancel="dragCancel",n.DragOver="dragOver",n.RegisterDroppable="registerDroppable",n.SetDroppableDisabled="setDroppableDisabled",n.UnregisterDroppable="unregisterDroppable"})(pt||(pt={}));function ou(){}function Am(n,e){return O.useMemo(()=>({sensor:n,options:e??{}}),[n,e])}function Kw(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return O.useMemo(()=>[...e].filter(r=>r!=null),[...e])}const Fn=Object.freeze({x:0,y:0});function qw(n,e){return Math.sqrt(Math.pow(n.x-e.x,2)+Math.pow(n.y-e.y,2))}function Yw(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return t-r}function Gw(n,e){let{data:{value:t}}=n,{data:{value:r}}=e;return r-t}function Jw(n,e){if(!n||n.length===0)return null;const[t]=n;return t[e]}function Mm(n,e,t){return e===void 0&&(e=n.left),t===void 0&&(t=n.top),{x:e+n.width*.5,y:t+n.height*.5}}const Zw=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=Mm(e,e.left,e.top),l=[];for(const a of r){const{id:c}=a,h=t.get(c);if(h){const p=qw(Mm(h),s);l.push({id:c,data:{droppableContainer:a,value:p}})}}return l.sort(Yw)};function eb(n,e){const t=Math.max(e.top,n.top),r=Math.max(e.left,n.left),s=Math.min(e.left+e.width,n.left+n.width),l=Math.min(e.top+e.height,n.top+n.height),a=s-r,c=l-t;if(r<s&&t<l){const h=e.width*e.height,p=n.width*n.height,d=a*c,m=d/(h+p-d);return Number(m.toFixed(4))}return 0}const tb=n=>{let{collisionRect:e,droppableRects:t,droppableContainers:r}=n;const s=[];for(const l of r){const{id:a}=l,c=t.get(a);if(c){const h=eb(c,e);h>0&&s.push({id:a,data:{droppableContainer:l,value:h}})}}return s.sort(Gw)};function nb(n,e,t){return{...n,scaleX:e&&t?e.width/t.width:1,scaleY:e&&t?e.height/t.height:1}}function zy(n,e){return n&&e?{x:n.left-e.left,y:n.top-e.top}:Fn}function rb(n){return function(t){for(var r=arguments.length,s=new Array(r>1?r-1:0),l=1;l<r;l++)s[l-1]=arguments[l];return s.reduce((a,c)=>({...a,top:a.top+n*c.y,bottom:a.bottom+n*c.y,left:a.left+n*c.x,right:a.right+n*c.x}),{...t})}}const ib=rb(1);function sb(n){if(n.startsWith("matrix3d(")){const e=n.slice(9,-1).split(/, /);return{x:+e[12],y:+e[13],scaleX:+e[0],scaleY:+e[5]}}else if(n.startsWith("matrix(")){const e=n.slice(7,-1).split(/, /);return{x:+e[4],y:+e[5],scaleX:+e[0],scaleY:+e[3]}}return null}function ob(n,e,t){const r=sb(e);if(!r)return n;const{scaleX:s,scaleY:l,x:a,y:c}=r,h=n.left-a-(1-s)*parseFloat(t),p=n.top-c-(1-l)*parseFloat(t.slice(t.indexOf(" ")+1)),d=s?n.width/s:n.width,m=l?n.height/l:n.height;return{width:d,height:m,top:p,right:h+d,bottom:p+m,left:h}}const lb={ignoreTransform:!1};function Ms(n,e){e===void 0&&(e=lb);let t=n.getBoundingClientRect();if(e.ignoreTransform){const{transform:p,transformOrigin:d}=tn(n).getComputedStyle(n);p&&(t=ob(t,p,d))}const{top:r,left:s,width:l,height:a,bottom:c,right:h}=t;return{top:r,left:s,width:l,height:a,bottom:c,right:h}}function Rm(n){return Ms(n,{ignoreTransform:!0})}function ab(n){const e=n.innerWidth,t=n.innerHeight;return{top:0,left:0,right:e,bottom:t,width:e,height:t}}function ub(n,e){return e===void 0&&(e=tn(n).getComputedStyle(n)),e.position==="fixed"}function cb(n,e){e===void 0&&(e=tn(n).getComputedStyle(n));const t=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(s=>{const l=e[s];return typeof l=="string"?t.test(l):!1})}function hd(n,e){const t=[];function r(s){if(e!=null&&t.length>=e||!s)return t;if(ad(s)&&s.scrollingElement!=null&&!t.includes(s.scrollingElement))return t.push(s.scrollingElement),t;if(!tl(s)||jy(s)||t.includes(s))return t;const l=tn(n).getComputedStyle(s);return s!==n&&cb(s,l)&&t.push(s),ub(s,l)?t:r(s.parentNode)}return n?r(n):t}function Fy(n){const[e]=hd(n,1);return e??null}function Eh(n){return!Pu||!n?null:Es(n)?n:ld(n)?ad(n)||n===As(n).scrollingElement?window:tl(n)?n:null:null}function _y(n){return Es(n)?n.scrollX:n.scrollLeft}function Hy(n){return Es(n)?n.scrollY:n.scrollTop}function of(n){return{x:_y(n),y:Hy(n)}}var xt;(function(n){n[n.Forward=1]="Forward",n[n.Backward=-1]="Backward"})(xt||(xt={}));function Vy(n){return!Pu||!n?!1:n===document.scrollingElement}function Wy(n){const e={x:0,y:0},t=Vy(n)?{height:window.innerHeight,width:window.innerWidth}:{height:n.clientHeight,width:n.clientWidth},r={x:n.scrollWidth-t.width,y:n.scrollHeight-t.height},s=n.scrollTop<=e.y,l=n.scrollLeft<=e.x,a=n.scrollTop>=r.y,c=n.scrollLeft>=r.x;return{isTop:s,isLeft:l,isBottom:a,isRight:c,maxScroll:r,minScroll:e}}const hb={x:.2,y:.2};function fb(n,e,t,r,s){let{top:l,left:a,right:c,bottom:h}=t;r===void 0&&(r=10),s===void 0&&(s=hb);const{isTop:p,isBottom:d,isLeft:m,isRight:v}=Wy(n),x={x:0,y:0},b={x:0,y:0},S={height:e.height*s.y,width:e.width*s.x};return!p&&l<=e.top+S.height?(x.y=xt.Backward,b.y=r*Math.abs((e.top+S.height-l)/S.height)):!d&&h>=e.bottom-S.height&&(x.y=xt.Forward,b.y=r*Math.abs((e.bottom-S.height-h)/S.height)),!v&&c>=e.right-S.width?(x.x=xt.Forward,b.x=r*Math.abs((e.right-S.width-c)/S.width)):!m&&a<=e.left+S.width&&(x.x=xt.Backward,b.x=r*Math.abs((e.left+S.width-a)/S.width)),{direction:x,speed:b}}function db(n){if(n===document.scrollingElement){const{innerWidth:l,innerHeight:a}=window;return{top:0,left:0,right:l,bottom:a,width:l,height:a}}const{top:e,left:t,right:r,bottom:s}=n.getBoundingClientRect();return{top:e,left:t,right:r,bottom:s,width:n.clientWidth,height:n.clientHeight}}function Qy(n){return n.reduce((e,t)=>ds(e,of(t)),Fn)}function pb(n){return n.reduce((e,t)=>e+_y(t),0)}function gb(n){return n.reduce((e,t)=>e+Hy(t),0)}function mb(n,e){if(e===void 0&&(e=Ms),!n)return;const{top:t,left:r,bottom:s,right:l}=e(n);Fy(n)&&(s<=0||l<=0||t>=window.innerHeight||r>=window.innerWidth)&&n.scrollIntoView({block:"center",inline:"center"})}const yb=[["x",["left","right"],pb],["y",["top","bottom"],gb]];class fd{constructor(e,t){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=hd(t),s=Qy(r);this.rect={...e},this.width=e.width,this.height=e.height;for(const[l,a,c]of yb)for(const h of a)Object.defineProperty(this,h,{get:()=>{const p=c(r),d=s[l]-p;return this.rect[h]+d},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Mo{constructor(e){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(t=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...t)})},this.target=e}add(e,t,r){var s;(s=this.target)==null||s.addEventListener(e,t,r),this.listeners.push([e,t,r])}}function vb(n){const{EventTarget:e}=tn(n);return n instanceof e?n:As(n)}function Ah(n,e){const t=Math.abs(n.x),r=Math.abs(n.y);return typeof e=="number"?Math.sqrt(t**2+r**2)>e:"x"in e&&"y"in e?t>e.x&&r>e.y:"x"in e?t>e.x:"y"in e?r>e.y:!1}var bn;(function(n){n.Click="click",n.DragStart="dragstart",n.Keydown="keydown",n.ContextMenu="contextmenu",n.Resize="resize",n.SelectionChange="selectionchange",n.VisibilityChange="visibilitychange"})(bn||(bn={}));function Nm(n){n.preventDefault()}function xb(n){n.stopPropagation()}var Le;(function(n){n.Space="Space",n.Down="ArrowDown",n.Right="ArrowRight",n.Left="ArrowLeft",n.Up="ArrowUp",n.Esc="Escape",n.Enter="Enter",n.Tab="Tab"})(Le||(Le={}));const $y={start:[Le.Space,Le.Enter],cancel:[Le.Esc],end:[Le.Space,Le.Enter,Le.Tab]},kb=(n,e)=>{let{currentCoordinates:t}=e;switch(n.code){case Le.Right:return{...t,x:t.x+25};case Le.Left:return{...t,x:t.x-25};case Le.Down:return{...t,y:t.y+25};case Le.Up:return{...t,y:t.y-25}}};class dd{constructor(e){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=e;const{event:{target:t}}=e;this.props=e,this.listeners=new Mo(As(t)),this.windowListeners=new Mo(tn(t)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(bn.Resize,this.handleCancel),this.windowListeners.add(bn.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(bn.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:e,onStart:t}=this.props,r=e.node.current;r&&mb(r),t(Fn)}handleKeyDown(e){if(cd(e)){const{active:t,context:r,options:s}=this.props,{keyboardCodes:l=$y,coordinateGetter:a=kb,scrollBehavior:c="smooth"}=s,{code:h}=e;if(l.end.includes(h)){this.handleEnd(e);return}if(l.cancel.includes(h)){this.handleCancel(e);return}const{collisionRect:p}=r.current,d=p?{x:p.left,y:p.top}:Fn;this.referenceCoordinates||(this.referenceCoordinates=d);const m=a(e,{active:t,context:r.current,currentCoordinates:d});if(m){const v=su(m,d),x={x:0,y:0},{scrollableAncestors:b}=r.current;for(const S of b){const C=e.code,{isTop:P,isRight:N,isLeft:D,isBottom:B,maxScroll:T,minScroll:F}=Wy(S),L=db(S),V={x:Math.min(C===Le.Right?L.right-L.width/2:L.right,Math.max(C===Le.Right?L.left:L.left+L.width/2,m.x)),y:Math.min(C===Le.Down?L.bottom-L.height/2:L.bottom,Math.max(C===Le.Down?L.top:L.top+L.height/2,m.y))},q=C===Le.Right&&!N||C===Le.Left&&!D,Y=C===Le.Down&&!B||C===Le.Up&&!P;if(q&&V.x!==m.x){const H=S.scrollLeft+v.x,W=C===Le.Right&&H<=T.x||C===Le.Left&&H>=F.x;if(W&&!v.y){S.scrollTo({left:H,behavior:c});return}W?x.x=S.scrollLeft-H:x.x=C===Le.Right?S.scrollLeft-T.x:S.scrollLeft-F.x,x.x&&S.scrollBy({left:-x.x,behavior:c});break}else if(Y&&V.y!==m.y){const H=S.scrollTop+v.y,W=C===Le.Down&&H<=T.y||C===Le.Up&&H>=F.y;if(W&&!v.x){S.scrollTo({top:H,behavior:c});return}W?x.y=S.scrollTop-H:x.y=C===Le.Down?S.scrollTop-T.y:S.scrollTop-F.y,x.y&&S.scrollBy({top:-x.y,behavior:c});break}}this.handleMove(e,ds(su(m,this.referenceCoordinates),x))}}}handleMove(e,t){const{onMove:r}=this.props;e.preventDefault(),r(t)}handleEnd(e){const{onEnd:t}=this.props;e.preventDefault(),this.detach(),t()}handleCancel(e){const{onCancel:t}=this.props;e.preventDefault(),this.detach(),t()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}dd.activators=[{eventName:"onKeyDown",handler:(n,e,t)=>{let{keyboardCodes:r=$y,onActivation:s}=e,{active:l}=t;const{code:a}=n.nativeEvent;if(r.start.includes(a)){const c=l.activatorNode.current;return c&&n.target!==c?!1:(n.preventDefault(),s==null||s({event:n.nativeEvent}),!0)}return!1}}];function Dm(n){return!!(n&&"distance"in n)}function Tm(n){return!!(n&&"delay"in n)}class pd{constructor(e,t,r){var s;r===void 0&&(r=vb(e.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=e,this.events=t;const{event:l}=e,{target:a}=l;this.props=e,this.events=t,this.document=As(a),this.documentListeners=new Mo(this.document),this.listeners=new Mo(r),this.windowListeners=new Mo(tn(a)),this.initialCoordinates=(s=sf(l))!=null?s:Fn,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:e,props:{options:{activationConstraint:t,bypassActivationConstraint:r}}}=this;if(this.listeners.add(e.move.name,this.handleMove,{passive:!1}),this.listeners.add(e.end.name,this.handleEnd),e.cancel&&this.listeners.add(e.cancel.name,this.handleCancel),this.windowListeners.add(bn.Resize,this.handleCancel),this.windowListeners.add(bn.DragStart,Nm),this.windowListeners.add(bn.VisibilityChange,this.handleCancel),this.windowListeners.add(bn.ContextMenu,Nm),this.documentListeners.add(bn.Keydown,this.handleKeydown),t){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(Tm(t)){this.timeoutId=setTimeout(this.handleStart,t.delay),this.handlePending(t);return}if(Dm(t)){this.handlePending(t);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(e,t){const{active:r,onPending:s}=this.props;s(r,e,this.initialCoordinates,t)}handleStart(){const{initialCoordinates:e}=this,{onStart:t}=this.props;e&&(this.activated=!0,this.documentListeners.add(bn.Click,xb,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(bn.SelectionChange,this.removeTextSelection),t(e))}handleMove(e){var t;const{activated:r,initialCoordinates:s,props:l}=this,{onMove:a,options:{activationConstraint:c}}=l;if(!s)return;const h=(t=sf(e))!=null?t:Fn,p=su(s,h);if(!r&&c){if(Dm(c)){if(c.tolerance!=null&&Ah(p,c.tolerance))return this.handleCancel();if(Ah(p,c.distance))return this.handleStart()}if(Tm(c)&&Ah(p,c.tolerance))return this.handleCancel();this.handlePending(c,p);return}e.cancelable&&e.preventDefault(),a(h)}handleEnd(){const{onAbort:e,onEnd:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleCancel(){const{onAbort:e,onCancel:t}=this.props;this.detach(),this.activated||e(this.props.active),t()}handleKeydown(e){e.code===Le.Esc&&this.handleCancel()}removeTextSelection(){var e;(e=this.document.getSelection())==null||e.removeAllRanges()}}const wb={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class gd extends pd{constructor(e){const{event:t}=e,r=As(t.target);super(e,wb,r)}}gd.activators=[{eventName:"onPointerDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return!t.isPrimary||t.button!==0?!1:(r==null||r({event:t}),!0)}}];const bb={move:{name:"mousemove"},end:{name:"mouseup"}};var lf;(function(n){n[n.RightClick=2]="RightClick"})(lf||(lf={}));class Sb extends pd{constructor(e){super(e,bb,As(e.event.target))}}Sb.activators=[{eventName:"onMouseDown",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;return t.button===lf.RightClick?!1:(r==null||r({event:t}),!0)}}];const Mh={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class Ob extends pd{constructor(e){super(e,Mh)}static setup(){return window.addEventListener(Mh.move.name,e,{capture:!1,passive:!1}),function(){window.removeEventListener(Mh.move.name,e)};function e(){}}}Ob.activators=[{eventName:"onTouchStart",handler:(n,e)=>{let{nativeEvent:t}=n,{onActivation:r}=e;const{touches:s}=t;return s.length>1?!1:(r==null||r({event:t}),!0)}}];var Ro;(function(n){n[n.Pointer=0]="Pointer",n[n.DraggableRect=1]="DraggableRect"})(Ro||(Ro={}));var lu;(function(n){n[n.TreeOrder=0]="TreeOrder",n[n.ReversedTreeOrder=1]="ReversedTreeOrder"})(lu||(lu={}));function Cb(n){let{acceleration:e,activator:t=Ro.Pointer,canScroll:r,draggingRect:s,enabled:l,interval:a=5,order:c=lu.TreeOrder,pointerCoordinates:h,scrollableAncestors:p,scrollableAncestorRects:d,delta:m,threshold:v}=n;const x=Eb({delta:m,disabled:!l}),[b,S]=jw(),C=O.useRef({x:0,y:0}),P=O.useRef({x:0,y:0}),N=O.useMemo(()=>{switch(t){case Ro.Pointer:return h?{top:h.y,bottom:h.y,left:h.x,right:h.x}:null;case Ro.DraggableRect:return s}},[t,s,h]),D=O.useRef(null),B=O.useCallback(()=>{const F=D.current;if(!F)return;const L=C.current.x*P.current.x,V=C.current.y*P.current.y;F.scrollBy(L,V)},[]),T=O.useMemo(()=>c===lu.TreeOrder?[...p].reverse():p,[c,p]);O.useEffect(()=>{if(!l||!p.length||!N){S();return}for(const F of T){if((r==null?void 0:r(F))===!1)continue;const L=p.indexOf(F),V=d[L];if(!V)continue;const{direction:q,speed:Y}=fb(F,V,N,e,v);for(const H of["x","y"])x[H][q[H]]||(Y[H]=0,q[H]=0);if(Y.x>0||Y.y>0){S(),D.current=F,b(B,a),C.current=Y,P.current=q;return}}C.current={x:0,y:0},P.current={x:0,y:0},S()},[e,B,r,S,l,a,JSON.stringify(N),JSON.stringify(x),b,p,T,d,JSON.stringify(v)])}const Pb={x:{[xt.Backward]:!1,[xt.Forward]:!1},y:{[xt.Backward]:!1,[xt.Forward]:!1}};function Eb(n){let{delta:e,disabled:t}=n;const r=rf(e);return nl(s=>{if(t||!r||!s)return Pb;const l={x:Math.sign(e.x-r.x),y:Math.sign(e.y-r.y)};return{x:{[xt.Backward]:s.x[xt.Backward]||l.x===-1,[xt.Forward]:s.x[xt.Forward]||l.x===1},y:{[xt.Backward]:s.y[xt.Backward]||l.y===-1,[xt.Forward]:s.y[xt.Forward]||l.y===1}}},[t,e,r])}function Ab(n,e){const t=e!=null?n.get(e):void 0,r=t?t.node.current:null;return nl(s=>{var l;return e==null?null:(l=r??s)!=null?l:null},[r,e])}function Mb(n,e){return O.useMemo(()=>n.reduce((t,r)=>{const{sensor:s}=r,l=s.activators.map(a=>({eventName:a.eventName,handler:e(a.handler,r)}));return[...t,...l]},[]),[n,e])}var Vo;(function(n){n[n.Always=0]="Always",n[n.BeforeDragging=1]="BeforeDragging",n[n.WhileDragging=2]="WhileDragging"})(Vo||(Vo={}));var af;(function(n){n.Optimized="optimized"})(af||(af={}));const Lm=new Map;function Rb(n,e){let{dragging:t,dependencies:r,config:s}=e;const[l,a]=O.useState(null),{frequency:c,measure:h,strategy:p}=s,d=O.useRef(n),m=C(),v=_o(m),x=O.useCallback(function(P){P===void 0&&(P=[]),!v.current&&a(N=>N===null?P:N.concat(P.filter(D=>!N.includes(D))))},[v]),b=O.useRef(null),S=nl(P=>{if(m&&!t)return Lm;if(!P||P===Lm||d.current!==n||l!=null){const N=new Map;for(let D of n){if(!D)continue;if(l&&l.length>0&&!l.includes(D.id)&&D.rect.current){N.set(D.id,D.rect.current);continue}const B=D.node.current,T=B?new fd(h(B),B):null;D.rect.current=T,T&&N.set(D.id,T)}return N}return P},[n,l,t,m,h]);return O.useEffect(()=>{d.current=n},[n]),O.useEffect(()=>{m||x()},[t,m]),O.useEffect(()=>{l&&l.length>0&&a(null)},[JSON.stringify(l)]),O.useEffect(()=>{m||typeof c!="number"||b.current!==null||(b.current=setTimeout(()=>{x(),b.current=null},c))},[c,m,x,...r]),{droppableRects:S,measureDroppableContainers:x,measuringScheduled:l!=null};function C(){switch(p){case Vo.Always:return!1;case Vo.BeforeDragging:return t;default:return!t}}}function Uy(n,e){return nl(t=>n?t||(typeof e=="function"?e(n):n):null,[e,n])}function Nb(n,e){return Uy(n,e)}function Db(n){let{callback:e,disabled:t}=n;const r=ud(e),s=O.useMemo(()=>{if(t||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:l}=window;return new l(r)},[r,t]);return O.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Eu(n){let{callback:e,disabled:t}=n;const r=ud(e),s=O.useMemo(()=>{if(t||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:l}=window;return new l(r)},[t]);return O.useEffect(()=>()=>s==null?void 0:s.disconnect(),[s]),s}function Tb(n){return new fd(Ms(n),n)}function jm(n,e,t){e===void 0&&(e=Tb);const[r,s]=O.useState(null);function l(){s(h=>{if(!n)return null;if(n.isConnected===!1){var p;return(p=h??t)!=null?p:null}const d=e(n);return JSON.stringify(h)===JSON.stringify(d)?h:d})}const a=Db({callback(h){if(n)for(const p of h){const{type:d,target:m}=p;if(d==="childList"&&m instanceof HTMLElement&&m.contains(n)){l();break}}}}),c=Eu({callback:l});return sr(()=>{l(),n?(c==null||c.observe(n),a==null||a.observe(document.body,{childList:!0,subtree:!0})):(c==null||c.disconnect(),a==null||a.disconnect())},[n]),r}function Lb(n){const e=Uy(n);return zy(n,e)}const Im=[];function jb(n){const e=O.useRef(n),t=nl(r=>n?r&&r!==Im&&n&&e.current&&n.parentNode===e.current.parentNode?r:hd(n):Im,[n]);return O.useEffect(()=>{e.current=n},[n]),t}function Ib(n){const[e,t]=O.useState(null),r=O.useRef(n),s=O.useCallback(l=>{const a=Eh(l.target);a&&t(c=>c?(c.set(a,of(a)),new Map(c)):null)},[]);return O.useEffect(()=>{const l=r.current;if(n!==l){a(l);const c=n.map(h=>{const p=Eh(h);return p?(p.addEventListener("scroll",s,{passive:!0}),[p,of(p)]):null}).filter(h=>h!=null);t(c.length?new Map(c):null),r.current=n}return()=>{a(n),a(l)};function a(c){c.forEach(h=>{const p=Eh(h);p==null||p.removeEventListener("scroll",s)})}},[s,n]),O.useMemo(()=>n.length?e?Array.from(e.values()).reduce((l,a)=>ds(l,a),Fn):Qy(n):Fn,[n,e])}function Bm(n,e){e===void 0&&(e=[]);const t=O.useRef(null);return O.useEffect(()=>{t.current=null},e),O.useEffect(()=>{const r=n!==Fn;r&&!t.current&&(t.current=n),!r&&t.current&&(t.current=null)},[n]),t.current?su(n,t.current):Fn}function Bb(n){O.useEffect(()=>{if(!Pu)return;const e=n.map(t=>{let{sensor:r}=t;return r.setup==null?void 0:r.setup()});return()=>{for(const t of e)t==null||t()}},n.map(e=>{let{sensor:t}=e;return t}))}function zb(n,e){return O.useMemo(()=>n.reduce((t,r)=>{let{eventName:s,handler:l}=r;return t[s]=a=>{l(a,e)},t},{}),[n,e])}function Xy(n){return O.useMemo(()=>n?ab(n):null,[n])}const zm=[];function Fb(n,e){e===void 0&&(e=Ms);const[t]=n,r=Xy(t?tn(t):null),[s,l]=O.useState(zm);function a(){l(()=>n.length?n.map(h=>Vy(h)?r:new fd(e(h),h)):zm)}const c=Eu({callback:a});return sr(()=>{c==null||c.disconnect(),a(),n.forEach(h=>c==null?void 0:c.observe(h))},[n]),s}function _b(n){if(!n)return null;if(n.children.length>1)return n;const e=n.children[0];return tl(e)?e:n}function Hb(n){let{measure:e}=n;const[t,r]=O.useState(null),s=O.useCallback(p=>{for(const{target:d}of p)if(tl(d)){r(m=>{const v=e(d);return m?{...m,width:v.width,height:v.height}:v});break}},[e]),l=Eu({callback:s}),a=O.useCallback(p=>{const d=_b(p);l==null||l.disconnect(),d&&(l==null||l.observe(d)),r(d?e(d):null)},[e,l]),[c,h]=iu(a);return O.useMemo(()=>({nodeRef:c,rect:t,setRef:h}),[t,c,h])}const Vb=[{sensor:gd,options:{}},{sensor:dd,options:{}}],Wb={current:{}},$a={draggable:{measure:Rm},droppable:{measure:Rm,strategy:Vo.WhileDragging,frequency:af.Optimized},dragOverlay:{measure:Ms}};class No extends Map{get(e){var t;return e!=null&&(t=super.get(e))!=null?t:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(e=>{let{disabled:t}=e;return!t})}getNodeFor(e){var t,r;return(t=(r=this.get(e))==null?void 0:r.node.current)!=null?t:void 0}}const Qb={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new No,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:ou},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:$a,measureDroppableContainers:ou,windowRect:null,measuringScheduled:!1},$b={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:ou,draggableNodes:new Map,over:null,measureDroppableContainers:ou},Au=O.createContext($b),Ky=O.createContext(Qb);function Ub(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new No}}}function Xb(n,e){switch(e.type){case pt.DragStart:return{...n,draggable:{...n.draggable,initialCoordinates:e.initialCoordinates,active:e.active}};case pt.DragMove:return n.draggable.active==null?n:{...n,draggable:{...n.draggable,translate:{x:e.coordinates.x-n.draggable.initialCoordinates.x,y:e.coordinates.y-n.draggable.initialCoordinates.y}}};case pt.DragEnd:case pt.DragCancel:return{...n,draggable:{...n.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case pt.RegisterDroppable:{const{element:t}=e,{id:r}=t,s=new No(n.droppable.containers);return s.set(r,t),{...n,droppable:{...n.droppable,containers:s}}}case pt.SetDroppableDisabled:{const{id:t,key:r,disabled:s}=e,l=n.droppable.containers.get(t);if(!l||r!==l.key)return n;const a=new No(n.droppable.containers);return a.set(t,{...l,disabled:s}),{...n,droppable:{...n.droppable,containers:a}}}case pt.UnregisterDroppable:{const{id:t,key:r}=e,s=n.droppable.containers.get(t);if(!s||r!==s.key)return n;const l=new No(n.droppable.containers);return l.delete(t),{...n,droppable:{...n.droppable,containers:l}}}default:return n}}function Kb(n){let{disabled:e}=n;const{active:t,activatorEvent:r,draggableNodes:s}=O.useContext(Au),l=rf(r),a=rf(t==null?void 0:t.id);return O.useEffect(()=>{if(!e&&!r&&l&&a!=null){if(!cd(l)||document.activeElement===l.target)return;const c=s.get(a);if(!c)return;const{activatorNode:h,node:p}=c;if(!h.current&&!p.current)return;requestAnimationFrame(()=>{for(const d of[h.current,p.current]){if(!d)continue;const m=zw(d);if(m){m.focus();break}}})}},[r,e,s,a,l]),null}function qb(n,e){let{transform:t,...r}=e;return n!=null&&n.length?n.reduce((s,l)=>l({transform:s,...r}),t):t}function Yb(n){return O.useMemo(()=>({draggable:{...$a.draggable,...n==null?void 0:n.draggable},droppable:{...$a.droppable,...n==null?void 0:n.droppable},dragOverlay:{...$a.dragOverlay,...n==null?void 0:n.dragOverlay}}),[n==null?void 0:n.draggable,n==null?void 0:n.droppable,n==null?void 0:n.dragOverlay])}function Gb(n){let{activeNode:e,measure:t,initialRect:r,config:s=!0}=n;const l=O.useRef(!1),{x:a,y:c}=typeof s=="boolean"?{x:s,y:s}:s;sr(()=>{if(!a&&!c||!e){l.current=!1;return}if(l.current||!r)return;const p=e==null?void 0:e.node.current;if(!p||p.isConnected===!1)return;const d=t(p),m=zy(d,r);if(a||(m.x=0),c||(m.y=0),l.current=!0,Math.abs(m.x)>0||Math.abs(m.y)>0){const v=Fy(p);v&&v.scrollBy({top:m.y,left:m.x})}},[e,a,c,r,t])}const qy=O.createContext({...Fn,scaleX:1,scaleY:1});var Kr;(function(n){n[n.Uninitialized=0]="Uninitialized",n[n.Initializing=1]="Initializing",n[n.Initialized=2]="Initialized"})(Kr||(Kr={}));const Jb=O.memo(function(e){var t,r,s,l;let{id:a,accessibility:c,autoScroll:h=!0,children:p,sensors:d=Vb,collisionDetection:m=tb,measuring:v,modifiers:x,...b}=e;const S=O.useReducer(Xb,void 0,Ub),[C,P]=S,[N,D]=Qw(),[B,T]=O.useState(Kr.Uninitialized),F=B===Kr.Initialized,{draggable:{active:L,nodes:V,translate:q},droppable:{containers:Y}}=C,H=L!=null?V.get(L):null,W=O.useRef({initial:null,translated:null}),J=O.useMemo(()=>{var Xe;return L!=null?{id:L,data:(Xe=H==null?void 0:H.data)!=null?Xe:Wb,rect:W}:null},[L,H]),Z=O.useRef(null),[U,ue]=O.useState(null),[fe,X]=O.useState(null),re=_o(b,Object.values(b)),ee=rl("DndDescribedBy",a),A=O.useMemo(()=>Y.getEnabled(),[Y]),j=Yb(v),{droppableRects:se,measureDroppableContainers:de,measuringScheduled:xe}=Rb(A,{dragging:F,dependencies:[q.x,q.y],config:j.droppable}),te=Ab(V,L),he=O.useMemo(()=>fe?sf(fe):null,[fe]),we=Ar(),Pe=Nb(te,j.draggable.measure);Gb({activeNode:L!=null?V.get(L):null,config:we.layoutShiftCompensation,initialRect:Pe,measure:j.draggable.measure});const ve=jm(te,j.draggable.measure,Pe),Re=jm(te?te.parentElement:null),Ve=O.useRef({activatorEvent:null,active:null,activeNode:te,collisionRect:null,collisions:null,droppableRects:se,draggableNodes:V,draggingNode:null,draggingNodeRect:null,droppableContainers:Y,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),st=Y.getNodeFor((t=Ve.current.over)==null?void 0:t.id),Ge=Hb({measure:j.dragOverlay.measure}),ot=(r=Ge.nodeRef.current)!=null?r:te,nn=F?(s=Ge.rect)!=null?s:ve:null,Er=!!(Ge.nodeRef.current&&Ge.rect),ci=Lb(Er?null:ve),ar=Xy(ot?tn(ot):null),ct=jb(F?st??te:null),Ee=Fb(ct),le=qb(x,{transform:{x:q.x-ci.x,y:q.y-ci.y,scaleX:1,scaleY:1},activatorEvent:fe,active:J,activeNodeRect:ve,containerNodeRect:Re,draggingNodeRect:nn,over:Ve.current.over,overlayNodeRect:Ge.rect,scrollableAncestors:ct,scrollableAncestorRects:Ee,windowRect:ar}),Fe=he?ds(he,q):null,En=Ib(ct),ht=Bm(En),hi=Bm(En,[ve]),rn=ds(le,ht),Ut=nn?ib(nn,le):null,pn=J&&Ut?m({active:J,collisionRect:Ut,droppableRects:se,droppableContainers:A,pointerCoordinates:Fe}):null,$n=Jw(pn,"id"),[bt,fl]=O.useState(null),dl=Er?le:ds(le,hi),pl=nb(dl,(l=bt==null?void 0:bt.rect)!=null?l:null,ve),Ds=O.useRef(null),Bi=O.useCallback((Xe,Et)=>{let{sensor:At,options:An}=Et;if(Z.current==null)return;const Ft=V.get(Z.current);if(!Ft)return;const Mt=Xe.nativeEvent,Xt=new At({active:Z.current,activeNode:Ft,event:Mt,options:An,context:Ve,onAbort(Ke){if(!V.get(Ke))return;const{onDragAbort:Rt}=re.current,Mn={id:Ke};Rt==null||Rt(Mn),N({type:"onDragAbort",event:Mn})},onPending(Ke,gn,Rt,Mn){if(!V.get(Ke))return;const{onDragPending:Un}=re.current,sn={id:Ke,constraint:gn,initialCoordinates:Rt,offset:Mn};Un==null||Un(sn),N({type:"onDragPending",event:sn})},onStart(Ke){const gn=Z.current;if(gn==null)return;const Rt=V.get(gn);if(!Rt)return;const{onDragStart:Mn}=re.current,Rn={activatorEvent:Mt,active:{id:gn,data:Rt.data,rect:W}};So.unstable_batchedUpdates(()=>{Mn==null||Mn(Rn),T(Kr.Initializing),P({type:pt.DragStart,initialCoordinates:Ke,active:gn}),N({type:"onDragStart",event:Rn}),ue(Ds.current),X(Mt)})},onMove(Ke){P({type:pt.DragMove,coordinates:Ke})},onEnd:ur(pt.DragEnd),onCancel:ur(pt.DragCancel)});Ds.current=Xt;function ur(Ke){return async function(){const{active:Rt,collisions:Mn,over:Rn,scrollAdjustedTranslate:Un}=Ve.current;let sn=null;if(Rt&&Un){const{cancelDrop:cr}=re.current;sn={activatorEvent:Mt,active:Rt,collisions:Mn,delta:Un,over:Rn},Ke===pt.DragEnd&&typeof cr=="function"&&await Promise.resolve(cr(sn))&&(Ke=pt.DragCancel)}Z.current=null,So.unstable_batchedUpdates(()=>{P({type:Ke}),T(Kr.Uninitialized),fl(null),ue(null),X(null),Ds.current=null;const cr=Ke===pt.DragEnd?"onDragEnd":"onDragCancel";if(sn){const Is=re.current[cr];Is==null||Is(sn),N({type:cr,event:sn})}})}}},[V]),Ts=O.useCallback((Xe,Et)=>(At,An)=>{const Ft=At.nativeEvent,Mt=V.get(An);if(Z.current!==null||!Mt||Ft.dndKit||Ft.defaultPrevented)return;const Xt={active:Mt};Xe(At,Et.options,Xt)===!0&&(Ft.dndKit={capturedBy:Et.sensor},Z.current=An,Bi(At,Et))},[V,Bi]),zi=Mb(d,Ts);Bb(d),sr(()=>{ve&&B===Kr.Initializing&&T(Kr.Initialized)},[ve,B]),O.useEffect(()=>{const{onDragMove:Xe}=re.current,{active:Et,activatorEvent:At,collisions:An,over:Ft}=Ve.current;if(!Et||!At)return;const Mt={active:Et,activatorEvent:At,collisions:An,delta:{x:rn.x,y:rn.y},over:Ft};So.unstable_batchedUpdates(()=>{Xe==null||Xe(Mt),N({type:"onDragMove",event:Mt})})},[rn.x,rn.y]),O.useEffect(()=>{const{active:Xe,activatorEvent:Et,collisions:At,droppableContainers:An,scrollAdjustedTranslate:Ft}=Ve.current;if(!Xe||Z.current==null||!Et||!Ft)return;const{onDragOver:Mt}=re.current,Xt=An.get($n),ur=Xt&&Xt.rect.current?{id:Xt.id,rect:Xt.rect.current,data:Xt.data,disabled:Xt.disabled}:null,Ke={active:Xe,activatorEvent:Et,collisions:At,delta:{x:Ft.x,y:Ft.y},over:ur};So.unstable_batchedUpdates(()=>{fl(ur),Mt==null||Mt(Ke),N({type:"onDragOver",event:Ke})})},[$n]),sr(()=>{Ve.current={activatorEvent:fe,active:J,activeNode:te,collisionRect:Ut,collisions:pn,droppableRects:se,draggableNodes:V,draggingNode:ot,draggingNodeRect:nn,droppableContainers:Y,over:bt,scrollableAncestors:ct,scrollAdjustedTranslate:rn},W.current={initial:nn,translated:Ut}},[J,te,pn,Ut,V,ot,nn,se,Y,bt,ct,rn]),Cb({...we,delta:q,draggingRect:Ut,pointerCoordinates:Fe,scrollableAncestors:ct,scrollableAncestorRects:Ee});const Ls=O.useMemo(()=>({active:J,activeNode:te,activeNodeRect:ve,activatorEvent:fe,collisions:pn,containerNodeRect:Re,dragOverlay:Ge,draggableNodes:V,droppableContainers:Y,droppableRects:se,over:bt,measureDroppableContainers:de,scrollableAncestors:ct,scrollableAncestorRects:Ee,measuringConfiguration:j,measuringScheduled:xe,windowRect:ar}),[J,te,ve,fe,pn,Re,Ge,V,Y,se,bt,de,ct,Ee,j,xe,ar]),js=O.useMemo(()=>({activatorEvent:fe,activators:zi,active:J,activeNodeRect:ve,ariaDescribedById:{draggable:ee},dispatch:P,draggableNodes:V,over:bt,measureDroppableContainers:de}),[fe,zi,J,ve,P,ee,V,bt,de]);return it.createElement(By.Provider,{value:D},it.createElement(Au.Provider,{value:js},it.createElement(Ky.Provider,{value:Ls},it.createElement(qy.Provider,{value:pl},p)),it.createElement(Kb,{disabled:(c==null?void 0:c.restoreFocus)===!1})),it.createElement(Xw,{...c,hiddenTextDescribedById:ee}));function Ar(){const Xe=(U==null?void 0:U.autoScrollEnabled)===!1,Et=typeof h=="object"?h.enabled===!1:h===!1,At=F&&!Xe&&!Et;return typeof h=="object"?{...h,enabled:At}:{enabled:At}}}),Zb=O.createContext(null),Fm="button",eS="Draggable";function tS(n){let{id:e,data:t,disabled:r=!1,attributes:s}=n;const l=rl(eS),{activators:a,activatorEvent:c,active:h,activeNodeRect:p,ariaDescribedById:d,draggableNodes:m,over:v}=O.useContext(Au),{role:x=Fm,roleDescription:b="draggable",tabIndex:S=0}=s??{},C=(h==null?void 0:h.id)===e,P=O.useContext(C?qy:Zb),[N,D]=iu(),[B,T]=iu(),F=zb(a,e),L=_o(t);sr(()=>(m.set(e,{id:e,key:l,node:N,activatorNode:B,data:L}),()=>{const q=m.get(e);q&&q.key===l&&m.delete(e)}),[m,e]);const V=O.useMemo(()=>({role:x,tabIndex:S,"aria-disabled":r,"aria-pressed":C&&x===Fm?!0:void 0,"aria-roledescription":b,"aria-describedby":d.draggable}),[r,x,S,C,b,d.draggable]);return{active:h,activatorEvent:c,activeNodeRect:p,attributes:V,isDragging:C,listeners:r?void 0:F,node:N,over:v,setNodeRef:D,setActivatorNodeRef:T,transform:P}}function nS(){return O.useContext(Ky)}const rS="Droppable",iS={timeout:25};function sS(n){let{data:e,disabled:t=!1,id:r,resizeObserverConfig:s}=n;const l=rl(rS),{active:a,dispatch:c,over:h,measureDroppableContainers:p}=O.useContext(Au),d=O.useRef({disabled:t}),m=O.useRef(!1),v=O.useRef(null),x=O.useRef(null),{disabled:b,updateMeasurementsFor:S,timeout:C}={...iS,...s},P=_o(S??r),N=O.useCallback(()=>{if(!m.current){m.current=!0;return}x.current!=null&&clearTimeout(x.current),x.current=setTimeout(()=>{p(Array.isArray(P.current)?P.current:[P.current]),x.current=null},C)},[C]),D=Eu({callback:N,disabled:b||!a}),B=O.useCallback((V,q)=>{D&&(q&&(D.unobserve(q),m.current=!1),V&&D.observe(V))},[D]),[T,F]=iu(B),L=_o(e);return O.useEffect(()=>{!D||!T.current||(D.disconnect(),m.current=!1,D.observe(T.current))},[T,D]),O.useEffect(()=>(c({type:pt.RegisterDroppable,element:{id:r,key:l,disabled:t,node:T,rect:v,data:L}}),()=>c({type:pt.UnregisterDroppable,key:l,id:r})),[r]),O.useEffect(()=>{t!==d.current.disabled&&(c({type:pt.SetDroppableDisabled,id:r,key:l,disabled:t}),d.current.disabled=t)},[r,l,t,c]),{active:a,rect:v,isOver:(h==null?void 0:h.id)===r,node:T,over:h,setNodeRef:F}}function Yy(n,e,t){const r=n.slice();return r.splice(t<0?r.length+t:t,0,r.splice(e,1)[0]),r}function oS(n,e){return n.reduce((t,r,s)=>{const l=e.get(r);return l&&(t[s]=l),t},Array(n.length))}function wa(n){return n!==null&&n>=0}function lS(n,e){if(n===e)return!0;if(n.length!==e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!==e[t])return!1;return!0}function aS(n){return typeof n=="boolean"?{draggable:n,droppable:n}:n}const ba={scaleX:1,scaleY:1},uS=n=>{var e;let{rects:t,activeNodeRect:r,activeIndex:s,overIndex:l,index:a}=n;const c=(e=t[s])!=null?e:r;if(!c)return null;const h=cS(t,a,s);if(a===s){const p=t[l];return p?{x:s<l?p.left+p.width-(c.left+c.width):p.left-c.left,y:0,...ba}:null}return a>s&&a<=l?{x:-c.width-h,y:0,...ba}:a<s&&a>=l?{x:c.width+h,y:0,...ba}:{x:0,y:0,...ba}};function cS(n,e,t){const r=n[e],s=n[e-1],l=n[e+1];return!r||!s&&!l?0:t<e?s?r.left-(s.left+s.width):l.left-(r.left+r.width):l?l.left-(r.left+r.width):r.left-(s.left+s.width)}const Gy=n=>{let{rects:e,activeIndex:t,overIndex:r,index:s}=n;const l=Yy(e,r,t),a=e[s],c=l[s];return!c||!a?null:{x:c.left-a.left,y:c.top-a.top,scaleX:c.width/a.width,scaleY:c.height/a.height}},Jy="Sortable",Zy=it.createContext({activeIndex:-1,containerId:Jy,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:Gy,disabled:{draggable:!1,droppable:!1}});function hS(n){let{children:e,id:t,items:r,strategy:s=Gy,disabled:l=!1}=n;const{active:a,dragOverlay:c,droppableRects:h,over:p,measureDroppableContainers:d}=nS(),m=rl(Jy,t),v=c.rect!==null,x=O.useMemo(()=>r.map(F=>typeof F=="object"&&"id"in F?F.id:F),[r]),b=a!=null,S=a?x.indexOf(a.id):-1,C=p?x.indexOf(p.id):-1,P=O.useRef(x),N=!lS(x,P.current),D=C!==-1&&S===-1||N,B=aS(l);sr(()=>{N&&b&&d(x)},[N,x,b,d]),O.useEffect(()=>{P.current=x},[x]);const T=O.useMemo(()=>({activeIndex:S,containerId:m,disabled:B,disableTransforms:D,items:x,overIndex:C,useDragOverlay:v,sortedRects:oS(x,h),strategy:s}),[S,m,B.draggable,B.droppable,D,x,C,h,v,s]);return it.createElement(Zy.Provider,{value:T},e)}const fS=n=>{let{id:e,items:t,activeIndex:r,overIndex:s}=n;return Yy(t,r,s).indexOf(e)},dS=n=>{let{containerId:e,isSorting:t,wasDragging:r,index:s,items:l,newIndex:a,previousItems:c,previousContainerId:h,transition:p}=n;return!p||!r||c!==l&&s===a?!1:t?!0:a!==s&&e===h},pS={duration:200,easing:"ease"},ev="transform",gS=Ho.Transition.toString({property:ev,duration:0,easing:"linear"}),mS={roleDescription:"sortable"};function yS(n){let{disabled:e,index:t,node:r,rect:s}=n;const[l,a]=O.useState(null),c=O.useRef(t);return sr(()=>{if(!e&&t!==c.current&&r.current){const h=s.current;if(h){const p=Ms(r.current,{ignoreTransform:!0}),d={x:h.left-p.left,y:h.top-p.top,scaleX:h.width/p.width,scaleY:h.height/p.height};(d.x||d.y)&&a(d)}}t!==c.current&&(c.current=t)},[e,t,r,s]),O.useEffect(()=>{l&&a(null)},[l]),l}function vS(n){let{animateLayoutChanges:e=dS,attributes:t,disabled:r,data:s,getNewIndex:l=fS,id:a,strategy:c,resizeObserverConfig:h,transition:p=pS}=n;const{items:d,containerId:m,activeIndex:v,disabled:x,disableTransforms:b,sortedRects:S,overIndex:C,useDragOverlay:P,strategy:N}=O.useContext(Zy),D=xS(r,x),B=d.indexOf(a),T=O.useMemo(()=>({sortable:{containerId:m,index:B,items:d},...s}),[m,s,B,d]),F=O.useMemo(()=>d.slice(d.indexOf(a)),[d,a]),{rect:L,node:V,isOver:q,setNodeRef:Y}=sS({id:a,data:T,disabled:D.droppable,resizeObserverConfig:{updateMeasurementsFor:F,...h}}),{active:H,activatorEvent:W,activeNodeRect:J,attributes:Z,setNodeRef:U,listeners:ue,isDragging:fe,over:X,setActivatorNodeRef:re,transform:ee}=tS({id:a,data:T,attributes:{...mS,...t},disabled:D.draggable}),A=Lw(Y,U),j=!!H,se=j&&!b&&wa(v)&&wa(C),de=!P&&fe,xe=de&&se?ee:null,he=se?xe??(c??N)({rects:S,activeNodeRect:J,activeIndex:v,overIndex:C,index:B}):null,we=wa(v)&&wa(C)?l({id:a,items:d,activeIndex:v,overIndex:C}):B,Pe=H==null?void 0:H.id,ve=O.useRef({activeId:Pe,items:d,newIndex:we,containerId:m}),Re=d!==ve.current.items,Ve=e({active:H,containerId:m,isDragging:fe,isSorting:j,id:a,index:B,items:d,newIndex:ve.current.newIndex,previousItems:ve.current.items,previousContainerId:ve.current.containerId,transition:p,wasDragging:ve.current.activeId!=null}),st=yS({disabled:!Ve,index:B,node:V,rect:L});return O.useEffect(()=>{j&&ve.current.newIndex!==we&&(ve.current.newIndex=we),m!==ve.current.containerId&&(ve.current.containerId=m),d!==ve.current.items&&(ve.current.items=d)},[j,we,m,d]),O.useEffect(()=>{if(Pe===ve.current.activeId)return;if(Pe!=null&&ve.current.activeId==null){ve.current.activeId=Pe;return}const ot=setTimeout(()=>{ve.current.activeId=Pe},50);return()=>clearTimeout(ot)},[Pe]),{active:H,activeIndex:v,attributes:Z,data:T,rect:L,index:B,newIndex:we,items:d,isOver:q,isSorting:j,isDragging:fe,listeners:ue,node:V,overIndex:C,over:X,setNodeRef:A,setActivatorNodeRef:re,setDroppableNodeRef:Y,setDraggableNodeRef:U,transform:st??he,transition:Ge()};function Ge(){if(st||Re&&ve.current.newIndex===B)return gS;if(!(de&&!cd(W)||!p)&&(j||Ve))return Ho.Transition.toString({...p,property:ev})}}function xS(n,e){var t,r;return typeof n=="boolean"?{draggable:n,droppable:!1}:{draggable:(t=n==null?void 0:n.draggable)!=null?t:e.draggable,droppable:(r=n==null?void 0:n.droppable)!=null?r:e.droppable}}Le.Down,Le.Right,Le.Up,Le.Left;function _m(n,e){(e==null||e>n.length)&&(e=n.length);for(var t=0,r=Array(e);t<e;t++)r[t]=n[t];return r}function kS(n){if(Array.isArray(n))return n}function wS(n,e,t){return(e=AS(e))in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function bS(n,e){var t=n==null?null:typeof Symbol<"u"&&n[Symbol.iterator]||n["@@iterator"];if(t!=null){var r,s,l,a,c=[],h=!0,p=!1;try{if(l=(t=t.call(n)).next,e!==0)for(;!(h=(r=l.call(t)).done)&&(c.push(r.value),c.length!==e);h=!0);}catch(d){p=!0,s=d}finally{try{if(!h&&t.return!=null&&(a=t.return(),Object(a)!==a))return}finally{if(p)throw s}}return c}}function SS(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Hm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Vm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Hm(Object(t),!0).forEach(function(r){wS(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Hm(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function OS(n,e){if(n==null)return{};var t,r,s=CS(n,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(n);for(r=0;r<l.length;r++)t=l[r],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(n,t)&&(s[t]=n[t])}return s}function CS(n,e){if(n==null)return{};var t={};for(var r in n)if({}.hasOwnProperty.call(n,r)){if(e.indexOf(r)!==-1)continue;t[r]=n[r]}return t}function PS(n,e){return kS(n)||bS(n,e)||MS(n,e)||SS()}function ES(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var r=t.call(n,e);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function AS(n){var e=ES(n,"string");return typeof e=="symbol"?e:e+""}function MS(n,e){if(n){if(typeof n=="string")return _m(n,e);var t={}.toString.call(n).slice(8,-1);return t==="Object"&&n.constructor&&(t=n.constructor.name),t==="Map"||t==="Set"?Array.from(n):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?_m(n,e):void 0}}function RS(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Wm(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(n);e&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(n,s).enumerable})),t.push.apply(t,r)}return t}function Qm(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Wm(Object(t),!0).forEach(function(r){RS(n,r,t[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Wm(Object(t)).forEach(function(r){Object.defineProperty(n,r,Object.getOwnPropertyDescriptor(t,r))})}return n}function NS(){for(var n=arguments.length,e=new Array(n),t=0;t<n;t++)e[t]=arguments[t];return function(r){return e.reduceRight(function(s,l){return l(s)},r)}}function Oo(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return s.length>=n.length?n.apply(this,s):function(){for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];return e.apply(t,[].concat(s,c))}}}function au(n){return{}.toString.call(n).includes("Object")}function DS(n){return!Object.keys(n).length}function Wo(n){return typeof n=="function"}function TS(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function LS(n,e){return au(e)||ri("changeType"),Object.keys(e).some(function(t){return!TS(n,t)})&&ri("changeField"),e}function jS(n){Wo(n)||ri("selectorType")}function IS(n){Wo(n)||au(n)||ri("handlerType"),au(n)&&Object.values(n).some(function(e){return!Wo(e)})&&ri("handlersType")}function BS(n){n||ri("initialIsRequired"),au(n)||ri("initialType"),DS(n)&&ri("initialContent")}function zS(n,e){throw new Error(n[e]||n.default)}var FS={initialIsRequired:"initial state is required",initialType:"initial state should be an object",initialContent:"initial state shouldn't be an empty object",handlerType:"handler should be an object or a function",handlersType:"all handlers should be a functions",selectorType:"selector should be a function",changeType:"provided value of changes should be an object",changeField:'it seams you want to change a field in the state which is not specified in the "initial" state',default:"an unknown error accured in `state-local` package"},ri=Oo(zS)(FS),Sa={changes:LS,selector:jS,handler:IS,initial:BS};function _S(n){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};Sa.initial(n),Sa.handler(e);var t={current:n},r=Oo(WS)(t,e),s=Oo(VS)(t),l=Oo(Sa.changes)(n),a=Oo(HS)(t);function c(){var p=arguments.length>0&&arguments[0]!==void 0?arguments[0]:function(d){return d};return Sa.selector(p),p(t.current)}function h(p){NS(r,s,l,a)(p)}return[c,h]}function HS(n,e){return Wo(e)?e(n.current):e}function VS(n,e){return n.current=Qm(Qm({},n.current),e),e}function WS(n,e,t){return Wo(e)?e(n.current):Object.keys(t).forEach(function(r){var s;return(s=e[r])===null||s===void 0?void 0:s.call(e,n.current[r])}),t}var QS={create:_S},$S={paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.55.1/min/vs"}};function US(n){return function e(){for(var t=this,r=arguments.length,s=new Array(r),l=0;l<r;l++)s[l]=arguments[l];return s.length>=n.length?n.apply(this,s):function(){for(var a=arguments.length,c=new Array(a),h=0;h<a;h++)c[h]=arguments[h];return e.apply(t,[].concat(s,c))}}}function XS(n){return{}.toString.call(n).includes("Object")}function KS(n){return n||$m("configIsRequired"),XS(n)||$m("configType"),n.urls?(qS(),{paths:{vs:n.urls.monacoBase}}):n}function qS(){console.warn(tv.deprecation)}function YS(n,e){throw new Error(n[e]||n.default)}var tv={configIsRequired:"the configuration object is required",configType:"the configuration object should be an object",default:"an unknown error accured in `@monaco-editor/loader` package",deprecation:`Deprecation warning!
    You are using deprecated way of configuration.

    Instead of using
      monaco.config({ urls: { monacoBase: '...' } })
    use
      monaco.config({ paths: { vs: '...' } })

    For more please check the link https://github.com/suren-atoyan/monaco-loader#config
  `},$m=US(YS)(tv),GS={config:KS},JS=function(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return function(s){return t.reduceRight(function(l,a){return a(l)},s)}};function nv(n,e){return Object.keys(e).forEach(function(t){e[t]instanceof Object&&n[t]&&Object.assign(e[t],nv(n[t],e[t]))}),Vm(Vm({},n),e)}var ZS={type:"cancelation",msg:"operation is manually canceled"};function Rh(n){var e=!1,t=new Promise(function(r,s){n.then(function(l){return e?s(ZS):r(l)}),n.catch(s)});return t.cancel=function(){return e=!0},t}var eO=["monaco"],tO=QS.create({config:$S,isInitialized:!1,resolve:null,reject:null,monaco:null}),rv=PS(tO,2),il=rv[0],Mu=rv[1];function nO(n){var e=GS.config(n),t=e.monaco,r=OS(e,eO);Mu(function(s){return{config:nv(s.config,r),monaco:t}})}function rO(){var n=il(function(e){var t=e.monaco,r=e.isInitialized,s=e.resolve;return{monaco:t,isInitialized:r,resolve:s}});if(!n.isInitialized){if(Mu({isInitialized:!0}),n.monaco)return n.resolve(n.monaco),Rh(Nh);if(window.monaco&&window.monaco.editor)return iv(window.monaco),n.resolve(window.monaco),Rh(Nh);JS(iO,oO)(lO)}return Rh(Nh)}function iO(n){return document.body.appendChild(n)}function sO(n){var e=document.createElement("script");return n&&(e.src=n),e}function oO(n){var e=il(function(r){var s=r.config,l=r.reject;return{config:s,reject:l}}),t=sO("".concat(e.config.paths.vs,"/loader.js"));return t.onload=function(){return n()},t.onerror=e.reject,t}function lO(){var n=il(function(t){var r=t.config,s=t.resolve,l=t.reject;return{config:r,resolve:s,reject:l}}),e=window.require;e.config(n.config),e(["vs/editor/editor.main"],function(t){var r=t.m||t;iv(r),n.resolve(r)},function(t){n.reject(t)})}function iv(n){il().monaco||Mu({monaco:n})}function aO(){return il(function(n){var e=n.monaco;return e})}var Nh=new Promise(function(n,e){return Mu({resolve:n,reject:e})}),sv={config:nO,init:rO,__getMonacoInstance:aO},uO={wrapper:{display:"flex",position:"relative",textAlign:"initial"},fullWidth:{width:"100%"},hide:{display:"none"}},Dh=uO,cO={container:{display:"flex",height:"100%",width:"100%",justifyContent:"center",alignItems:"center"}},hO=cO;function fO({children:n}){return it.createElement("div",{style:hO.container},n)}var dO=fO,pO=dO;function gO({width:n,height:e,isEditorReady:t,loading:r,_ref:s,className:l,wrapperProps:a}){return it.createElement("section",{style:{...Dh.wrapper,width:n,height:e},...a},!t&&it.createElement(pO,null,r),it.createElement("div",{ref:s,style:{...Dh.fullWidth,...!t&&Dh.hide},className:l}))}var mO=gO,ov=O.memo(mO);function yO(n){O.useEffect(n,[])}var lv=yO;function vO(n,e,t=!0){let r=O.useRef(!0);O.useEffect(r.current||!t?()=>{r.current=!1}:n,e)}var fn=vO;function Do(){}function as(n,e,t,r){return xO(n,r)||kO(n,e,t,r)}function xO(n,e){return n.editor.getModel(av(n,e))}function kO(n,e,t,r){return n.editor.createModel(e,t,r?av(n,r):void 0)}function av(n,e){return n.Uri.parse(e)}function wO({original:n,modified:e,language:t,originalLanguage:r,modifiedLanguage:s,originalModelPath:l,modifiedModelPath:a,keepCurrentOriginalModel:c=!1,keepCurrentModifiedModel:h=!1,theme:p="light",loading:d="Loading...",options:m={},height:v="100%",width:x="100%",className:b,wrapperProps:S={},beforeMount:C=Do,onMount:P=Do}){let[N,D]=O.useState(!1),[B,T]=O.useState(!0),F=O.useRef(null),L=O.useRef(null),V=O.useRef(null),q=O.useRef(P),Y=O.useRef(C),H=O.useRef(!1);lv(()=>{let U=sv.init();return U.then(ue=>(L.current=ue)&&T(!1)).catch(ue=>(ue==null?void 0:ue.type)!=="cancelation"&&console.error("Monaco initialization: error:",ue)),()=>F.current?Z():U.cancel()}),fn(()=>{if(F.current&&L.current){let U=F.current.getOriginalEditor(),ue=as(L.current,n||"",r||t||"text",l||"");ue!==U.getModel()&&U.setModel(ue)}},[l],N),fn(()=>{if(F.current&&L.current){let U=F.current.getModifiedEditor(),ue=as(L.current,e||"",s||t||"text",a||"");ue!==U.getModel()&&U.setModel(ue)}},[a],N),fn(()=>{let U=F.current.getModifiedEditor();U.getOption(L.current.editor.EditorOption.readOnly)?U.setValue(e||""):e!==U.getValue()&&(U.executeEdits("",[{range:U.getModel().getFullModelRange(),text:e||"",forceMoveMarkers:!0}]),U.pushUndoStop())},[e],N),fn(()=>{var U,ue;(ue=(U=F.current)==null?void 0:U.getModel())==null||ue.original.setValue(n||"")},[n],N),fn(()=>{let{original:U,modified:ue}=F.current.getModel();L.current.editor.setModelLanguage(U,r||t||"text"),L.current.editor.setModelLanguage(ue,s||t||"text")},[t,r,s],N),fn(()=>{var U;(U=L.current)==null||U.editor.setTheme(p)},[p],N),fn(()=>{var U;(U=F.current)==null||U.updateOptions(m)},[m],N);let W=O.useCallback(()=>{var fe;if(!L.current)return;Y.current(L.current);let U=as(L.current,n||"",r||t||"text",l||""),ue=as(L.current,e||"",s||t||"text",a||"");(fe=F.current)==null||fe.setModel({original:U,modified:ue})},[t,e,s,n,r,l,a]),J=O.useCallback(()=>{var U;!H.current&&V.current&&(F.current=L.current.editor.createDiffEditor(V.current,{automaticLayout:!0,...m}),W(),(U=L.current)==null||U.editor.setTheme(p),D(!0),H.current=!0)},[m,p,W]);O.useEffect(()=>{N&&q.current(F.current,L.current)},[N]),O.useEffect(()=>{!B&&!N&&J()},[B,N,J]);function Z(){var ue,fe,X,re;let U=(ue=F.current)==null?void 0:ue.getModel();c||((fe=U==null?void 0:U.original)==null||fe.dispose()),h||((X=U==null?void 0:U.modified)==null||X.dispose()),(re=F.current)==null||re.dispose()}return it.createElement(ov,{width:x,height:v,isEditorReady:N,loading:d,_ref:V,className:b,wrapperProps:S})}var bO=wO;O.memo(bO);function SO(n){let e=O.useRef();return O.useEffect(()=>{e.current=n},[n]),e.current}var OO=SO,Oa=new Map;function CO({defaultValue:n,defaultLanguage:e,defaultPath:t,value:r,language:s,path:l,theme:a="light",line:c,loading:h="Loading...",options:p={},overrideServices:d={},saveViewState:m=!0,keepCurrentModel:v=!1,width:x="100%",height:b="100%",className:S,wrapperProps:C={},beforeMount:P=Do,onMount:N=Do,onChange:D,onValidate:B=Do}){let[T,F]=O.useState(!1),[L,V]=O.useState(!0),q=O.useRef(null),Y=O.useRef(null),H=O.useRef(null),W=O.useRef(N),J=O.useRef(P),Z=O.useRef(),U=O.useRef(r),ue=OO(l),fe=O.useRef(!1),X=O.useRef(!1);lv(()=>{let A=sv.init();return A.then(j=>(q.current=j)&&V(!1)).catch(j=>(j==null?void 0:j.type)!=="cancelation"&&console.error("Monaco initialization: error:",j)),()=>Y.current?ee():A.cancel()}),fn(()=>{var j,se,de,xe;let A=as(q.current,n||r||"",e||s||"",l||t||"");A!==((j=Y.current)==null?void 0:j.getModel())&&(m&&Oa.set(ue,(se=Y.current)==null?void 0:se.saveViewState()),(de=Y.current)==null||de.setModel(A),m&&((xe=Y.current)==null||xe.restoreViewState(Oa.get(l))))},[l],T),fn(()=>{var A;(A=Y.current)==null||A.updateOptions(p)},[p],T),fn(()=>{!Y.current||r===void 0||(Y.current.getOption(q.current.editor.EditorOption.readOnly)?Y.current.setValue(r):r!==Y.current.getValue()&&(X.current=!0,Y.current.executeEdits("",[{range:Y.current.getModel().getFullModelRange(),text:r,forceMoveMarkers:!0}]),Y.current.pushUndoStop(),X.current=!1))},[r],T),fn(()=>{var j,se;let A=(j=Y.current)==null?void 0:j.getModel();A&&s&&((se=q.current)==null||se.editor.setModelLanguage(A,s))},[s],T),fn(()=>{var A;c!==void 0&&((A=Y.current)==null||A.revealLine(c))},[c],T),fn(()=>{var A;(A=q.current)==null||A.editor.setTheme(a)},[a],T);let re=O.useCallback(()=>{var A;if(!(!H.current||!q.current)&&!fe.current){J.current(q.current);let j=l||t,se=as(q.current,r||n||"",e||s||"",j||"");Y.current=(A=q.current)==null?void 0:A.editor.create(H.current,{model:se,automaticLayout:!0,...p},d),m&&Y.current.restoreViewState(Oa.get(j)),q.current.editor.setTheme(a),c!==void 0&&Y.current.revealLine(c),F(!0),fe.current=!0}},[n,e,t,r,s,l,p,d,m,a,c]);O.useEffect(()=>{T&&W.current(Y.current,q.current)},[T]),O.useEffect(()=>{!L&&!T&&re()},[L,T,re]),U.current=r,O.useEffect(()=>{var A,j;T&&D&&((A=Z.current)==null||A.dispose(),Z.current=(j=Y.current)==null?void 0:j.onDidChangeModelContent(se=>{X.current||D(Y.current.getValue(),se)}))},[T,D]),O.useEffect(()=>{if(T){let A=q.current.editor.onDidChangeMarkers(j=>{var de;let se=(de=Y.current.getModel())==null?void 0:de.uri;if(se&&j.find(xe=>xe.path===se.path)){let xe=q.current.editor.getModelMarkers({resource:se});B==null||B(xe)}});return()=>{A==null||A.dispose()}}return()=>{}},[T,B]);function ee(){var A,j;(A=Z.current)==null||A.dispose(),v?m&&Oa.set(l,Y.current.saveViewState()):(j=Y.current.getModel())==null||j.dispose(),Y.current.dispose()}return it.createElement(ov,{width:x,height:b,isEditorReady:T,loading:h,_ref:H,className:S,wrapperProps:C})}var PO=CO,EO=O.memo(PO),AO=EO;let uf=[],uv=[];(()=>{let n="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map(e=>e?parseInt(e,36):1);for(let e=0,t=0;e<n.length;e++)(e%2?uv:uf).push(t=t+n[e])})();function MO(n){if(n<768)return!1;for(let e=0,t=uf.length;;){let r=e+t>>1;if(n<uf[r])t=r;else if(n>=uv[r])e=r+1;else return!0;if(e==t)return!1}}function Um(n){return n>=127462&&n<=127487}const Xm=8205;function RO(n,e,t=!0,r=!0){return(t?cv:NO)(n,e,r)}function cv(n,e,t){if(e==n.length)return e;e&&hv(n.charCodeAt(e))&&fv(n.charCodeAt(e-1))&&e--;let r=Th(n,e);for(e+=Km(r);e<n.length;){let s=Th(n,e);if(r==Xm||s==Xm||t&&MO(s))e+=Km(s),r=s;else if(Um(s)){let l=0,a=e-2;for(;a>=0&&Um(Th(n,a));)l++,a-=2;if(l%2==0)break;e+=2}else break}return e}function NO(n,e,t){for(;e>0;){let r=cv(n,e-2,t);if(r<e)return r;e--}return 0}function Th(n,e){let t=n.charCodeAt(e);if(!fv(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return hv(r)?(t-55296<<10)+(r-56320)+65536:t}function hv(n){return n>=56320&&n<57344}function fv(n){return n>=55296&&n<56320}function Km(n){return n<65536?1:2}class De{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,r){[e,t]=vs(this,e,t);let s=[];return this.decompose(0,e,s,2),r.length&&r.decompose(0,r.length,s,3),this.decompose(t,this.length,s,1),nr.from(s,this.length-(t-e)+r.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=vs(this,e,t);let r=[];return this.decompose(e,t,r,0),nr.from(r,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),r=this.length-this.scanIdentical(e,-1),s=new To(this),l=new To(e);for(let a=t,c=t;;){if(s.next(a),l.next(a),a=0,s.lineBreak!=l.lineBreak||s.done!=l.done||s.value!=l.value)return!1;if(c+=s.value.length,s.done||c>=r)return!0}}iter(e=1){return new To(this,e)}iterRange(e,t=this.length){return new dv(this,e,t)}iterLines(e,t){let r;if(e==null)r=this.iter();else{t==null&&(t=this.lines+1);let s=this.line(e).from;r=this.iterRange(s,Math.max(s,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new pv(r)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(e.length==0)throw new RangeError("A document must have at least one line");return e.length==1&&!e[0]?De.empty:e.length<=32?new rt(e):nr.from(rt.split(e,[]))}}class rt extends De{constructor(e,t=DO(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,r,s){for(let l=0;;l++){let a=this.text[l],c=s+a.length;if((t?r:c)>=e)return new TO(s,c,r,a);s=c+1,r++}}decompose(e,t,r,s){let l=e<=0&&t>=this.length?this:new rt(qm(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(s&1){let a=r.pop(),c=Ua(l.text,a.text.slice(),0,l.length);if(c.length<=32)r.push(new rt(c,a.length+l.length));else{let h=c.length>>1;r.push(new rt(c.slice(0,h)),new rt(c.slice(h)))}}else r.push(l)}replace(e,t,r){if(!(r instanceof rt))return super.replace(e,t,r);[e,t]=vs(this,e,t);let s=Ua(this.text,Ua(r.text,qm(this.text,0,e)),t),l=this.length+r.length-(t-e);return s.length<=32?new rt(s,l):nr.from(rt.split(s,[]),l)}sliceString(e,t=this.length,r=`
`){[e,t]=vs(this,e,t);let s="";for(let l=0,a=0;l<=t&&a<this.text.length;a++){let c=this.text[a],h=l+c.length;l>e&&a&&(s+=r),e<h&&t>l&&(s+=c.slice(Math.max(0,e-l),t-l)),l=h+1}return s}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let r=[],s=-1;for(let l of e)r.push(l),s+=l.length+1,r.length==32&&(t.push(new rt(r,s)),r=[],s=-1);return s>-1&&t.push(new rt(r,s)),t}}class nr extends De{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let r of e)this.lines+=r.lines}lineInner(e,t,r,s){for(let l=0;;l++){let a=this.children[l],c=s+a.length,h=r+a.lines-1;if((t?h:c)>=e)return a.lineInner(e,t,r,s);s=c+1,r=h+1}}decompose(e,t,r,s){for(let l=0,a=0;a<=t&&l<this.children.length;l++){let c=this.children[l],h=a+c.length;if(e<=h&&t>=a){let p=s&((a<=e?1:0)|(h>=t?2:0));a>=e&&h<=t&&!p?r.push(c):c.decompose(e-a,t-a,r,p)}a=h+1}}replace(e,t,r){if([e,t]=vs(this,e,t),r.lines<this.lines)for(let s=0,l=0;s<this.children.length;s++){let a=this.children[s],c=l+a.length;if(e>=l&&t<=c){let h=a.replace(e-l,t-l,r),p=this.lines-a.lines+h.lines;if(h.lines<p>>4&&h.lines>p>>6){let d=this.children.slice();return d[s]=h,new nr(d,this.length-(t-e)+r.length)}return super.replace(l,c,h)}l=c+1}return super.replace(e,t,r)}sliceString(e,t=this.length,r=`
`){[e,t]=vs(this,e,t);let s="";for(let l=0,a=0;l<this.children.length&&a<=t;l++){let c=this.children[l],h=a+c.length;a>e&&l&&(s+=r),e<h&&t>a&&(s+=c.sliceString(e-a,t-a,r)),a=h+1}return s}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof nr))return 0;let r=0,[s,l,a,c]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;s+=t,l+=t){if(s==a||l==c)return r;let h=this.children[s],p=e.children[l];if(h!=p)return r+h.scanIdentical(p,t);r+=h.length+1}}static from(e,t=e.reduce((r,s)=>r+s.length+1,-1)){let r=0;for(let x of e)r+=x.lines;if(r<32){let x=[];for(let b of e)b.flatten(x);return new rt(x,t)}let s=Math.max(32,r>>5),l=s<<1,a=s>>1,c=[],h=0,p=-1,d=[];function m(x){let b;if(x.lines>l&&x instanceof nr)for(let S of x.children)m(S);else x.lines>a&&(h>a||!h)?(v(),c.push(x)):x instanceof rt&&h&&(b=d[d.length-1])instanceof rt&&x.lines+b.lines<=32?(h+=x.lines,p+=x.length+1,d[d.length-1]=new rt(b.text.concat(x.text),b.length+1+x.length)):(h+x.lines>s&&v(),h+=x.lines,p+=x.length+1,d.push(x))}function v(){h!=0&&(c.push(d.length==1?d[0]:nr.from(d,p)),p=-1,h=d.length=0)}for(let x of e)m(x);return v(),c.length==1?c[0]:new nr(c,t)}}De.empty=new rt([""],0);function DO(n){let e=-1;for(let t of n)e+=t.length+1;return e}function Ua(n,e,t=0,r=1e9){for(let s=0,l=0,a=!0;l<n.length&&s<=r;l++){let c=n[l],h=s+c.length;h>=t&&(h>r&&(c=c.slice(0,r-s)),s<t&&(c=c.slice(t-s)),a?(e[e.length-1]+=c,a=!1):e.push(c)),s=h+1}return e}function qm(n,e,t){return Ua(n,[""],e,t)}class To{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof rt?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let r=this.nodes.length-1,s=this.nodes[r],l=this.offsets[r],a=l>>1,c=s instanceof rt?s.text.length:s.children.length;if(a==(t>0?c:0)){if(r==0)return this.done=!0,this.value="",this;t>0&&this.offsets[r-1]++,this.nodes.pop(),this.offsets.pop()}else if((l&1)==(t>0?0:1)){if(this.offsets[r]+=t,e==0)return this.lineBreak=!0,this.value=`
`,this;e--}else if(s instanceof rt){let h=s.text[a+(t<0?-1:0)];if(this.offsets[r]+=t,h.length>Math.max(0,e))return this.value=e==0?h:t>0?h.slice(e):h.slice(0,h.length-e),this;e-=h.length}else{let h=s.children[a+(t<0?-1:0)];e>h.length?(e-=h.length,this.offsets[r]+=t):(t<0&&this.offsets[r]--,this.nodes.push(h),this.offsets.push(t>0?1:(h instanceof rt?h.text.length:h.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class dv{constructor(e,t,r){this.value="",this.done=!1,this.cursor=new To(e,t>r?-1:1),this.pos=t>r?e.length:0,this.from=Math.min(t,r),this.to=Math.max(t,r)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let r=t<0?this.pos-this.from:this.to-this.pos;e>r&&(e=r),r-=e;let{value:s}=this.cursor.next(e);return this.pos+=(s.length+e)*t,this.value=s.length<=r?s:t<0?s.slice(s.length-r):s.slice(0,r),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&this.value!=""}}class pv{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:r,value:s}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):r?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=s,this.afterBreak=!1),this}get lineBreak(){return!1}}typeof Symbol<"u"&&(De.prototype[Symbol.iterator]=function(){return this.iter()},To.prototype[Symbol.iterator]=dv.prototype[Symbol.iterator]=pv.prototype[Symbol.iterator]=function(){return this});class TO{constructor(e,t,r,s){this.from=e,this.to=t,this.number=r,this.text=s}get length(){return this.to-this.from}}function vs(n,e,t){return e=Math.max(0,Math.min(n.length,e)),[e,Math.max(e,Math.min(n.length,t))]}function Wt(n,e,t=!0,r=!0){return RO(n,e,t,r)}function LO(n){return n>=56320&&n<57344}function jO(n){return n>=55296&&n<56320}function IO(n,e){let t=n.charCodeAt(e);if(!jO(t)||e+1==n.length)return t;let r=n.charCodeAt(e+1);return LO(r)?(t-55296<<10)+(r-56320)+65536:t}function BO(n){return n<65536?1:2}const cf=/\r\n?|\n/;var dn=(function(n){return n[n.Simple=0]="Simple",n[n.TrackDel=1]="TrackDel",n[n.TrackBefore=2]="TrackBefore",n[n.TrackAfter=3]="TrackAfter",n})(dn||(dn={}));class Sr{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t+1];e+=r<0?this.sections[t]:r}return e}get empty(){return this.sections.length==0||this.sections.length==2&&this.sections[1]<0}iterGaps(e){for(let t=0,r=0,s=0;t<this.sections.length;){let l=this.sections[t++],a=this.sections[t++];a<0?(e(r,s,l),s+=l):s+=a,r+=l}}iterChangedRanges(e,t=!1){hf(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];s<0?e.push(r,s):e.push(s,r)}return new Sr(e)}composeDesc(e){return this.empty?e:e.empty?this:gv(this,e)}mapDesc(e,t=!1){return e.empty?this:ff(this,e,t)}mapPos(e,t=-1,r=dn.Simple){let s=0,l=0;for(let a=0;a<this.sections.length;){let c=this.sections[a++],h=this.sections[a++],p=s+c;if(h<0){if(p>e)return l+(e-s);l+=c}else{if(r!=dn.Simple&&p>=e&&(r==dn.TrackDel&&s<e&&p>e||r==dn.TrackBefore&&s<e||r==dn.TrackAfter&&p>e))return null;if(p>e||p==e&&t<0&&!c)return e==s||t<0?l:l+h;l+=h}s=p}if(e>s)throw new RangeError(`Position ${e} is out of range for changeset of length ${s}`);return l}touchesRange(e,t=e){for(let r=0,s=0;r<this.sections.length&&s<=t;){let l=this.sections[r++],a=this.sections[r++],c=s+l;if(a>=0&&s<=t&&c>=e)return s<e&&c>t?"cover":!0;s=c}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let r=this.sections[t++],s=this.sections[t++];e+=(e?" ":"")+r+(s>=0?":"+s:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some(t=>typeof t!="number"))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Sr(e)}static create(e){return new Sr(e)}}class kt extends Sr{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return hf(this,(t,r,s,l,a)=>e=e.replace(s,s+(r-t),a),!1),e}mapDesc(e,t=!1){return ff(this,e,t,!0)}invert(e){let t=this.sections.slice(),r=[];for(let s=0,l=0;s<t.length;s+=2){let a=t[s],c=t[s+1];if(c>=0){t[s]=c,t[s+1]=a;let h=s>>1;for(;r.length<h;)r.push(De.empty);r.push(a?e.slice(l,l+a):De.empty)}l+=a}return new kt(t,r)}compose(e){return this.empty?e:e.empty?this:gv(this,e,!0)}map(e,t=!1){return e.empty?this:ff(this,e,t,!0)}iterChanges(e,t=!1){hf(this,e,t)}get desc(){return Sr.create(this.sections)}filter(e){let t=[],r=[],s=[],l=new Qo(this);e:for(let a=0,c=0;;){let h=a==e.length?1e9:e[a++];for(;c<h||c==h&&l.len==0;){if(l.done)break e;let d=Math.min(l.len,h-c);jt(s,d,-1);let m=l.ins==-1?-1:l.off==0?l.ins:0;jt(t,d,m),m>0&&Jr(r,t,l.text),l.forward(d),c+=d}let p=e[a++];for(;c<p;){if(l.done)break e;let d=Math.min(l.len,p-c);jt(t,d,-1),jt(s,d,l.ins==-1?-1:l.off==0?l.ins:0),l.forward(d),c+=d}}return{changes:new kt(t,r),filtered:Sr.create(s)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let r=this.sections[t],s=this.sections[t+1];s<0?e.push(r):s==0?e.push([r]):e.push([r].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,r){let s=[],l=[],a=0,c=null;function h(d=!1){if(!d&&!s.length)return;a<t&&jt(s,t-a,-1);let m=new kt(s,l);c=c?c.compose(m.map(c)):m,s=[],l=[],a=0}function p(d){if(Array.isArray(d))for(let m of d)p(m);else if(d instanceof kt){if(d.length!=t)throw new RangeError(`Mismatched change set length (got ${d.length}, expected ${t})`);h(),c=c?c.compose(d.map(c)):d}else{let{from:m,to:v=m,insert:x}=d;if(m>v||m<0||v>t)throw new RangeError(`Invalid change range ${m} to ${v} (in doc of length ${t})`);let b=x?typeof x=="string"?De.of(x.split(r||cf)):x:De.empty,S=b.length;if(m==v&&S==0)return;m<a&&h(),m>a&&jt(s,m-a,-1),jt(s,v-m,S),Jr(l,s,b),a=v}}return p(e),h(!c),c}static empty(e){return new kt(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],r=[];for(let s=0;s<e.length;s++){let l=e[s];if(typeof l=="number")t.push(l,-1);else{if(!Array.isArray(l)||typeof l[0]!="number"||l.some((a,c)=>c&&typeof a!="string"))throw new RangeError("Invalid JSON representation of ChangeSet");if(l.length==1)t.push(l[0],0);else{for(;r.length<s;)r.push(De.empty);r[s]=De.of(l.slice(1)),t.push(l[0],r[s].length)}}}return new kt(t,r)}static createSet(e,t){return new kt(e,t)}}function jt(n,e,t,r=!1){if(e==0&&t<=0)return;let s=n.length-2;s>=0&&t<=0&&t==n[s+1]?n[s]+=e:s>=0&&e==0&&n[s]==0?n[s+1]+=t:r?(n[s]+=e,n[s+1]+=t):n.push(e,t)}function Jr(n,e,t){if(t.length==0)return;let r=e.length-2>>1;if(r<n.length)n[n.length-1]=n[n.length-1].append(t);else{for(;n.length<r;)n.push(De.empty);n.push(t)}}function hf(n,e,t){let r=n.inserted;for(let s=0,l=0,a=0;a<n.sections.length;){let c=n.sections[a++],h=n.sections[a++];if(h<0)s+=c,l+=c;else{let p=s,d=l,m=De.empty;for(;p+=c,d+=h,h&&r&&(m=m.append(r[a-2>>1])),!(t||a==n.sections.length||n.sections[a+1]<0);)c=n.sections[a++],h=n.sections[a++];e(s,p,l,d,m),s=p,l=d}}}function ff(n,e,t,r=!1){let s=[],l=r?[]:null,a=new Qo(n),c=new Qo(e);for(let h=-1;;){if(a.done&&c.len||c.done&&a.len)throw new Error("Mismatched change set lengths");if(a.ins==-1&&c.ins==-1){let p=Math.min(a.len,c.len);jt(s,p,-1),a.forward(p),c.forward(p)}else if(c.ins>=0&&(a.ins<0||h==a.i||a.off==0&&(c.len<a.len||c.len==a.len&&!t))){let p=c.len;for(jt(s,c.ins,-1);p;){let d=Math.min(a.len,p);a.ins>=0&&h<a.i&&a.len<=d&&(jt(s,0,a.ins),l&&Jr(l,s,a.text),h=a.i),a.forward(d),p-=d}c.next()}else if(a.ins>=0){let p=0,d=a.len;for(;d;)if(c.ins==-1){let m=Math.min(d,c.len);p+=m,d-=m,c.forward(m)}else if(c.ins==0&&c.len<d)d-=c.len,c.next();else break;jt(s,p,h<a.i?a.ins:0),l&&h<a.i&&Jr(l,s,a.text),h=a.i,a.forward(a.len-d)}else{if(a.done&&c.done)return l?kt.createSet(s,l):Sr.create(s);throw new Error("Mismatched change set lengths")}}}function gv(n,e,t=!1){let r=[],s=t?[]:null,l=new Qo(n),a=new Qo(e);for(let c=!1;;){if(l.done&&a.done)return s?kt.createSet(r,s):Sr.create(r);if(l.ins==0)jt(r,l.len,0,c),l.next();else if(a.len==0&&!a.done)jt(r,0,a.ins,c),s&&Jr(s,r,a.text),a.next();else{if(l.done||a.done)throw new Error("Mismatched change set lengths");{let h=Math.min(l.len2,a.len),p=r.length;if(l.ins==-1){let d=a.ins==-1?-1:a.off?0:a.ins;jt(r,h,d,c),s&&d&&Jr(s,r,a.text)}else a.ins==-1?(jt(r,l.off?0:l.len,h,c),s&&Jr(s,r,l.textBit(h))):(jt(r,l.off?0:l.len,a.off?0:a.ins,c),s&&!a.off&&Jr(s,r,a.text));c=(l.ins>h||a.ins>=0&&a.len>h)&&(c||r.length>p),l.forward2(h),a.forward(h)}}}}class Qo{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return this.ins==-2}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?De.empty:e[t]}textBit(e){let{inserted:t}=this.set,r=this.i-2>>1;return r>=t.length&&!e?De.empty:t[r].slice(this.off,e==null?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){this.ins==-1?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Mi{constructor(e,t,r){this.from=e,this.to=t,this.flags=r}get anchor(){return this.flags&32?this.to:this.from}get head(){return this.flags&32?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return this.flags&8?-1:this.flags&16?1:0}get bidiLevel(){let e=this.flags&7;return e==7?null:e}get goalColumn(){let e=this.flags>>6;return e==16777215?void 0:e}map(e,t=-1){let r,s;return this.empty?r=s=e.mapPos(this.from,t):(r=e.mapPos(this.from,1),s=e.mapPos(this.to,-1)),r==this.from&&s==this.to?this:new Mi(r,s,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return ie.range(e,t);let r=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return ie.range(this.anchor,r)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||typeof e.anchor!="number"||typeof e.head!="number")throw new RangeError("Invalid JSON representation for SelectionRange");return ie.range(e.anchor,e.head)}static create(e,t,r){return new Mi(e,t,r)}}class ie{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:ie.create(this.ranges.map(r=>r.map(e,t)),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let r=0;r<this.ranges.length;r++)if(!this.ranges[r].eq(e.ranges[r],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return this.ranges.length==1?this:new ie([this.main],0)}addRange(e,t=!0){return ie.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let r=this.ranges.slice();return r[t]=e,ie.create(r,this.mainIndex)}toJSON(){return{ranges:this.ranges.map(e=>e.toJSON()),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||typeof e.main!="number"||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new ie(e.ranges.map(t=>Mi.fromJSON(t)),e.main)}static single(e,t=e){return new ie([ie.range(e,t)],0)}static create(e,t=0){if(e.length==0)throw new RangeError("A selection needs at least one range");for(let r=0,s=0;s<e.length;s++){let l=e[s];if(l.empty?l.from<=r:l.from<r)return ie.normalized(e.slice(),t);r=l.to}return new ie(e,t)}static cursor(e,t=0,r,s){return Mi.create(e,e,(t==0?0:t<0?8:16)|(r==null?7:Math.min(6,r))|(s??16777215)<<6)}static range(e,t,r,s){let l=(r??16777215)<<6|(s==null?7:Math.min(6,s));return t<e?Mi.create(t,e,48|l):Mi.create(e,t,(t>e?8:0)|l)}static normalized(e,t=0){let r=e[t];e.sort((s,l)=>s.from-l.from),t=e.indexOf(r);for(let s=1;s<e.length;s++){let l=e[s],a=e[s-1];if(l.empty?l.from<=a.to:l.from<a.to){let c=a.from,h=Math.max(l.to,a.to);s<=t&&t--,e.splice(--s,2,l.anchor>l.head?ie.range(h,c):ie.range(c,h))}}return new ie(e,t)}}function mv(n,e){for(let t of n.ranges)if(t.to>e)throw new RangeError("Selection points outside of document")}let md=0;class ke{constructor(e,t,r,s,l){this.combine=e,this.compareInput=t,this.compare=r,this.isStatic=s,this.id=md++,this.default=e([]),this.extensions=typeof l=="function"?l(this):l}get reader(){return this}static define(e={}){return new ke(e.combine||(t=>t),e.compareInput||((t,r)=>t===r),e.compare||(e.combine?(t,r)=>t===r:yd),!!e.static,e.enables)}of(e){return new Xa([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Xa(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new Xa(e,this,2,t)}from(e,t){return t||(t=r=>r),this.compute([e],r=>t(r.field(e)))}}function yd(n,e){return n==e||n.length==e.length&&n.every((t,r)=>t===e[r])}class Xa{constructor(e,t,r,s){this.dependencies=e,this.facet=t,this.type=r,this.value=s,this.id=md++}dynamicSlot(e){var t;let r=this.value,s=this.facet.compareInput,l=this.id,a=e[l]>>1,c=this.type==2,h=!1,p=!1,d=[];for(let m of this.dependencies)m=="doc"?h=!0:m=="selection"?p=!0:(((t=e[m.id])!==null&&t!==void 0?t:1)&1)==0&&d.push(e[m.id]);return{create(m){return m.values[a]=r(m),1},update(m,v){if(h&&v.docChanged||p&&(v.docChanged||v.selection)||df(m,d)){let x=r(m);if(c?!Ym(x,m.values[a],s):!s(x,m.values[a]))return m.values[a]=x,1}return 0},reconfigure:(m,v)=>{let x,b=v.config.address[l];if(b!=null){let S=cu(v,b);if(this.dependencies.every(C=>C instanceof ke?v.facet(C)===m.facet(C):C instanceof Ii?v.field(C,!1)==m.field(C,!1):!0)||(c?Ym(x=r(m),S,s):s(x=r(m),S)))return m.values[a]=S,0}else x=r(m);return m.values[a]=x,1}}}}function Ym(n,e,t){if(n.length!=e.length)return!1;for(let r=0;r<n.length;r++)if(!t(n[r],e[r]))return!1;return!0}function df(n,e){let t=!1;for(let r of e)Lo(n,r)&1&&(t=!0);return t}function zO(n,e,t){let r=t.map(h=>n[h.id]),s=t.map(h=>h.type),l=r.filter(h=>!(h&1)),a=n[e.id]>>1;function c(h){let p=[];for(let d=0;d<r.length;d++){let m=cu(h,r[d]);if(s[d]==2)for(let v of m)p.push(v);else p.push(m)}return e.combine(p)}return{create(h){for(let p of r)Lo(h,p);return h.values[a]=c(h),1},update(h,p){if(!df(h,l))return 0;let d=c(h);return e.compare(d,h.values[a])?0:(h.values[a]=d,1)},reconfigure(h,p){let d=df(h,r),m=p.config.facets[e.id],v=p.facet(e);if(m&&!d&&yd(t,m))return h.values[a]=v,0;let x=c(h);return e.compare(x,v)?(h.values[a]=v,0):(h.values[a]=x,1)}}}const Ca=ke.define({static:!0});class Ii{constructor(e,t,r,s,l){this.id=e,this.createF=t,this.updateF=r,this.compareF=s,this.spec=l,this.provides=void 0}static define(e){let t=new Ii(md++,e.create,e.update,e.compare||((r,s)=>r===s),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(Ca).find(r=>r.field==this);return((t==null?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:r=>(r.values[t]=this.create(r),1),update:(r,s)=>{let l=r.values[t],a=this.updateF(l,s);return this.compareF(l,a)?0:(r.values[t]=a,1)},reconfigure:(r,s)=>{let l=r.facet(Ca),a=s.facet(Ca),c;return(c=l.find(h=>h.field==this))&&c!=a.find(h=>h.field==this)?(r.values[t]=c.create(r),1):s.config.address[this.id]!=null?(r.values[t]=s.field(this),0):(r.values[t]=this.create(r),1)}}}init(e){return[this,Ca.of({field:this,create:e})]}get extension(){return this}}const Ei={lowest:4,low:3,default:2,high:1,highest:0};function vo(n){return e=>new yv(e,n)}const Ru={highest:vo(Ei.highest),high:vo(Ei.high),default:vo(Ei.default),low:vo(Ei.low),lowest:vo(Ei.lowest)};class yv{constructor(e,t){this.inner=e,this.prec=t}}class sl{of(e){return new pf(this,e)}reconfigure(e){return sl.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class pf{constructor(e,t){this.compartment=e,this.inner=t}}class uu{constructor(e,t,r,s,l,a){for(this.base=e,this.compartments=t,this.dynamicSlots=r,this.address=s,this.staticValues=l,this.facets=a,this.statusTemplate=[];this.statusTemplate.length<r.length;)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return t==null?e.default:this.staticValues[t>>1]}static resolve(e,t,r){let s=[],l=Object.create(null),a=new Map;for(let v of FO(e,t,a))v instanceof Ii?s.push(v):(l[v.facet.id]||(l[v.facet.id]=[])).push(v);let c=Object.create(null),h=[],p=[];for(let v of s)c[v.id]=p.length<<1,p.push(x=>v.slot(x));let d=r==null?void 0:r.config.facets;for(let v in l){let x=l[v],b=x[0].facet,S=d&&d[v]||[];if(x.every(C=>C.type==0))if(c[b.id]=h.length<<1|1,yd(S,x))h.push(r.facet(b));else{let C=b.combine(x.map(P=>P.value));h.push(r&&b.compare(C,r.facet(b))?r.facet(b):C)}else{for(let C of x)C.type==0?(c[C.id]=h.length<<1|1,h.push(C.value)):(c[C.id]=p.length<<1,p.push(P=>C.dynamicSlot(P)));c[b.id]=p.length<<1,p.push(C=>zO(C,b,x))}}let m=p.map(v=>v(c));return new uu(e,a,m,c,h,l)}}function FO(n,e,t){let r=[[],[],[],[],[]],s=new Map;function l(a,c){let h=s.get(a);if(h!=null){if(h<=c)return;let p=r[h].indexOf(a);p>-1&&r[h].splice(p,1),a instanceof pf&&t.delete(a.compartment)}if(s.set(a,c),Array.isArray(a))for(let p of a)l(p,c);else if(a instanceof pf){if(t.has(a.compartment))throw new RangeError("Duplicate use of compartment in extensions");let p=e.get(a.compartment)||a.inner;t.set(a.compartment,p),l(p,c)}else if(a instanceof yv)l(a.inner,a.prec);else if(a instanceof Ii)r[c].push(a),a.provides&&l(a.provides,c);else if(a instanceof Xa)r[c].push(a),a.facet.extensions&&l(a.facet.extensions,Ei.default);else{let p=a.extension;if(!p)throw new Error(`Unrecognized extension value in extension set (${a}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);l(p,c)}}return l(n,Ei.default),r.reduce((a,c)=>a.concat(c))}function Lo(n,e){if(e&1)return 2;let t=e>>1,r=n.status[t];if(r==4)throw new Error("Cyclic dependency between fields and/or facets");if(r&2)return r;n.status[t]=4;let s=n.computeSlot(n,n.config.dynamicSlots[t]);return n.status[t]=2|s}function cu(n,e){return e&1?n.config.staticValues[e>>1]:n.values[e>>1]}const vv=ke.define(),gf=ke.define({combine:n=>n.some(e=>e),static:!0}),xv=ke.define({combine:n=>n.length?n[0]:void 0,static:!0}),kv=ke.define(),wv=ke.define(),bv=ke.define(),Sv=ke.define({combine:n=>n.length?n[0]:!1});class Rs{constructor(e,t){this.type=e,this.value=t}static define(){return new _O}}class _O{of(e){return new Rs(this,e)}}class HO{constructor(e){this.map=e}of(e){return new gt(this,e)}}class gt{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return t===void 0?void 0:t==this.value?this:new gt(this.type,t)}is(e){return this.type==e}static define(e={}){return new HO(e.map||(t=>t))}static mapEffects(e,t){if(!e.length)return e;let r=[];for(let s of e){let l=s.map(t);l&&r.push(l)}return r}}gt.reconfigure=gt.define();gt.appendConfig=gt.define();class Bt{constructor(e,t,r,s,l,a){this.startState=e,this.changes=t,this.selection=r,this.effects=s,this.annotations=l,this.scrollIntoView=a,this._doc=null,this._state=null,r&&mv(r,t.newLength),l.some(c=>c.type==Bt.time)||(this.annotations=l.concat(Bt.time.of(Date.now())))}static create(e,t,r,s,l,a){return new Bt(e,t,r,s,l,a)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Bt.userEvent);return!!(t&&(t==e||t.length>e.length&&t.slice(0,e.length)==e&&t[e.length]=="."))}}Bt.time=Rs.define();Bt.userEvent=Rs.define();Bt.addToHistory=Rs.define();Bt.remote=Rs.define();function VO(n,e){let t=[];for(let r=0,s=0;;){let l,a;if(r<n.length&&(s==e.length||e[s]>=n[r]))l=n[r++],a=n[r++];else if(s<e.length)l=e[s++],a=e[s++];else return t;!t.length||t[t.length-1]<l?t.push(l,a):t[t.length-1]<a&&(t[t.length-1]=a)}}function Ov(n,e,t){var r;let s,l,a;return t?(s=e.changes,l=kt.empty(e.changes.length),a=n.changes.compose(e.changes)):(s=e.changes.map(n.changes),l=n.changes.mapDesc(e.changes,!0),a=n.changes.compose(s)),{changes:a,selection:e.selection?e.selection.map(l):(r=n.selection)===null||r===void 0?void 0:r.map(s),effects:gt.mapEffects(n.effects,s).concat(gt.mapEffects(e.effects,l)),annotations:n.annotations.length?n.annotations.concat(e.annotations):e.annotations,scrollIntoView:n.scrollIntoView||e.scrollIntoView}}function mf(n,e,t){let r=e.selection,s=ps(e.annotations);return e.userEvent&&(s=s.concat(Bt.userEvent.of(e.userEvent))),{changes:e.changes instanceof kt?e.changes:kt.of(e.changes||[],t,n.facet(xv)),selection:r&&(r instanceof ie?r:ie.single(r.anchor,r.head)),effects:ps(e.effects),annotations:s,scrollIntoView:!!e.scrollIntoView}}function Cv(n,e,t){let r=mf(n,e.length?e[0]:{},n.doc.length);e.length&&e[0].filter===!1&&(t=!1);for(let l=1;l<e.length;l++){e[l].filter===!1&&(t=!1);let a=!!e[l].sequential;r=Ov(r,mf(n,e[l],a?r.changes.newLength:n.doc.length),a)}let s=Bt.create(n,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return QO(t?WO(s):s)}function WO(n){let e=n.startState,t=!0;for(let s of e.facet(kv)){let l=s(n);if(l===!1){t=!1;break}Array.isArray(l)&&(t=t===!0?l:VO(t,l))}if(t!==!0){let s,l;if(t===!1)l=n.changes.invertedDesc,s=kt.empty(e.doc.length);else{let a=n.changes.filter(t);s=a.changes,l=a.filtered.mapDesc(a.changes).invertedDesc}n=Bt.create(e,s,n.selection&&n.selection.map(l),gt.mapEffects(n.effects,l),n.annotations,n.scrollIntoView)}let r=e.facet(wv);for(let s=r.length-1;s>=0;s--){let l=r[s](n);l instanceof Bt?n=l:Array.isArray(l)&&l.length==1&&l[0]instanceof Bt?n=l[0]:n=Cv(e,ps(l),!1)}return n}function QO(n){let e=n.startState,t=e.facet(bv),r=n;for(let s=t.length-1;s>=0;s--){let l=t[s](n);l&&Object.keys(l).length&&(r=Ov(r,mf(e,l,n.changes.newLength),!0))}return r==n?n:Bt.create(e,n.changes,n.selection,r.effects,r.annotations,r.scrollIntoView)}const $O=[];function ps(n){return n==null?$O:Array.isArray(n)?n:[n]}var br=(function(n){return n[n.Word=0]="Word",n[n.Space=1]="Space",n[n.Other=2]="Other",n})(br||(br={}));const UO=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let yf;try{yf=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch{}function XO(n){if(yf)return yf.test(n);for(let e=0;e<n.length;e++){let t=n[e];if(/\w/.test(t)||t>""&&(t.toUpperCase()!=t.toLowerCase()||UO.test(t)))return!0}return!1}function KO(n){return e=>{if(!/\S/.test(e))return br.Space;if(XO(e))return br.Word;for(let t=0;t<n.length;t++)if(e.indexOf(n[t])>-1)return br.Word;return br.Other}}class je{constructor(e,t,r,s,l,a){this.config=e,this.doc=t,this.selection=r,this.values=s,this.status=e.statusTemplate.slice(),this.computeSlot=l,a&&(a._state=this);for(let c=0;c<this.config.dynamicSlots.length;c++)Lo(this,c<<1);this.computeSlot=null}field(e,t=!0){let r=this.config.address[e.id];if(r==null){if(t)throw new RangeError("Field is not present in this state");return}return Lo(this,r),cu(this,r)}update(...e){return Cv(this,e,!0)}applyTransaction(e){let t=this.config,{base:r,compartments:s}=t;for(let c of e.effects)c.is(sl.reconfigure)?(t&&(s=new Map,t.compartments.forEach((h,p)=>s.set(p,h)),t=null),s.set(c.value.compartment,c.value.extension)):c.is(gt.reconfigure)?(t=null,r=c.value):c.is(gt.appendConfig)&&(t=null,r=ps(r).concat(c.value));let l;t?l=e.startState.values.slice():(t=uu.resolve(r,s,this),l=new je(t,this.doc,this.selection,t.dynamicSlots.map(()=>null),(h,p)=>p.reconfigure(h,this),null).values);let a=e.startState.facet(gf)?e.newSelection:e.newSelection.asSingle();new je(t,e.newDoc,a,l,(c,h)=>h.update(c,e),e)}replaceSelection(e){return typeof e=="string"&&(e=this.toText(e)),this.changeByRange(t=>({changes:{from:t.from,to:t.to,insert:e},range:ie.cursor(t.from+e.length)}))}changeByRange(e){let t=this.selection,r=e(t.ranges[0]),s=this.changes(r.changes),l=[r.range],a=ps(r.effects);for(let c=1;c<t.ranges.length;c++){let h=e(t.ranges[c]),p=this.changes(h.changes),d=p.map(s);for(let v=0;v<c;v++)l[v]=l[v].map(d);let m=s.mapDesc(p,!0);l.push(h.range.map(m)),s=s.compose(d),a=gt.mapEffects(a,d).concat(gt.mapEffects(ps(h.effects),m))}return{changes:s,selection:ie.create(l,t.mainIndex),effects:a}}changes(e=[]){return e instanceof kt?e:kt.of(e,this.doc.length,this.facet(je.lineSeparator))}toText(e){return De.of(e.split(this.facet(je.lineSeparator)||cf))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return t==null?e.default:(Lo(this,t),cu(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let r in e){let s=e[r];s instanceof Ii&&this.config.address[s.id]!=null&&(t[r]=s.spec.toJSON(this.field(e[r]),this))}return t}static fromJSON(e,t={},r){if(!e||typeof e.doc!="string")throw new RangeError("Invalid JSON representation for EditorState");let s=[];if(r){for(let l in r)if(Object.prototype.hasOwnProperty.call(e,l)){let a=r[l],c=e[l];s.push(a.init(h=>a.spec.fromJSON(c,h)))}}return je.create({doc:e.doc,selection:ie.fromJSON(e.selection),extensions:t.extensions?s.concat([t.extensions]):s})}static create(e={}){let t=uu.resolve(e.extensions||[],new Map),r=e.doc instanceof De?e.doc:De.of((e.doc||"").split(t.staticFacet(je.lineSeparator)||cf)),s=e.selection?e.selection instanceof ie?e.selection:ie.single(e.selection.anchor,e.selection.head):ie.single(0);return mv(s,r.length),t.staticFacet(gf)||(s=s.asSingle()),new je(t,r,s,t.dynamicSlots.map(()=>null),(l,a)=>a.create(l),null)}get tabSize(){return this.facet(je.tabSize)}get lineBreak(){return this.facet(je.lineSeparator)||`
`}get readOnly(){return this.facet(Sv)}phrase(e,...t){for(let r of this.facet(je.phrases))if(Object.prototype.hasOwnProperty.call(r,e)){e=r[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,(r,s)=>{if(s=="$")return"$";let l=+(s||1);return!l||l>t.length?r:t[l-1]})),e}languageDataAt(e,t,r=-1){let s=[];for(let l of this.facet(vv))for(let a of l(this,t,r))Object.prototype.hasOwnProperty.call(a,e)&&s.push(a[e]);return s}charCategorizer(e){return KO(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:r,length:s}=this.doc.lineAt(e),l=this.charCategorizer(e),a=e-r,c=e-r;for(;a>0;){let h=Wt(t,a,!1);if(l(t.slice(h,a))!=br.Word)break;a=h}for(;c<s;){let h=Wt(t,c);if(l(t.slice(c,h))!=br.Word)break;c=h}return a==c?null:ie.range(a+r,c+r)}}je.allowMultipleSelections=gf;je.tabSize=ke.define({combine:n=>n.length?n[0]:4});je.lineSeparator=xv;je.readOnly=Sv;je.phrases=ke.define({compare(n,e){let t=Object.keys(n),r=Object.keys(e);return t.length==r.length&&t.every(s=>n[s]==e[s])}});je.languageData=vv;je.changeFilter=kv;je.transactionFilter=wv;je.transactionExtender=bv;sl.reconfigure=gt.define();function Pv(n,e,t={}){let r={};for(let s of n)for(let l of Object.keys(s)){let a=s[l],c=r[l];if(c===void 0)r[l]=a;else if(!(c===a||a===void 0))if(Object.hasOwnProperty.call(t,l))r[l]=t[l](c,a);else throw new Error("Config merge conflict for field "+l)}for(let s in e)r[s]===void 0&&(r[s]=e[s]);return r}class xs{eq(e){return this==e}range(e,t=e){return vf.create(e,t,this)}}xs.prototype.startSide=xs.prototype.endSide=0;xs.prototype.point=!1;xs.prototype.mapMode=dn.TrackDel;let vf=class Ev{constructor(e,t,r){this.from=e,this.to=t,this.value=r}static create(e,t,r){return new Ev(e,t,r)}};function xf(n,e){return n.from-e.from||n.value.startSide-e.value.startSide}class vd{constructor(e,t,r,s){this.from=e,this.to=t,this.value=r,this.maxPoint=s}get length(){return this.to[this.to.length-1]}findIndex(e,t,r,s=0){let l=r?this.to:this.from;for(let a=s,c=l.length;;){if(a==c)return a;let h=a+c>>1,p=l[h]-e||(r?this.value[h].endSide:this.value[h].startSide)-t;if(h==a)return p>=0?a:c;p>=0?c=h:a=h+1}}between(e,t,r,s){for(let l=this.findIndex(t,-1e9,!0),a=this.findIndex(r,1e9,!1,l);l<a;l++)if(s(this.from[l]+e,this.to[l]+e,this.value[l])===!1)return!1}map(e,t){let r=[],s=[],l=[],a=-1,c=-1;for(let h=0;h<this.value.length;h++){let p=this.value[h],d=this.from[h]+e,m=this.to[h]+e,v,x;if(d==m){let b=t.mapPos(d,p.startSide,p.mapMode);if(b==null||(v=x=b,p.startSide!=p.endSide&&(x=t.mapPos(d,p.endSide),x<v)))continue}else if(v=t.mapPos(d,p.startSide),x=t.mapPos(m,p.endSide),v>x||v==x&&p.startSide>0&&p.endSide<=0)continue;(x-v||p.endSide-p.startSide)<0||(a<0&&(a=v),p.point&&(c=Math.max(c,x-v)),r.push(p),s.push(v-a),l.push(x-a))}return{mapped:r.length?new vd(s,l,r,c):null,pos:a}}}class Ie{constructor(e,t,r,s){this.chunkPos=e,this.chunk=t,this.nextLayer=r,this.maxPoint=s}static create(e,t,r,s){return new Ie(e,t,r,s)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:r=!1,filterFrom:s=0,filterTo:l=this.length}=e,a=e.filter;if(t.length==0&&!a)return this;if(r&&(t=t.slice().sort(xf)),this.isEmpty)return t.length?Ie.of(t):this;let c=new Av(this,null,-1).goto(0),h=0,p=[],d=new $o;for(;c.value||h<t.length;)if(h<t.length&&(c.from-t[h].from||c.startSide-t[h].value.startSide)>=0){let m=t[h++];d.addInner(m.from,m.to,m.value)||p.push(m)}else c.rangeIndex==1&&c.chunkIndex<this.chunk.length&&(h==t.length||this.chunkEnd(c.chunkIndex)<t[h].from)&&(!a||s>this.chunkEnd(c.chunkIndex)||l<this.chunkPos[c.chunkIndex])&&d.addChunk(this.chunkPos[c.chunkIndex],this.chunk[c.chunkIndex])?c.nextChunk():((!a||s>c.to||l<c.from||a(c.from,c.to,c.value))&&(d.addInner(c.from,c.to,c.value)||p.push(vf.create(c.from,c.to,c.value))),c.next());return d.finishInner(this.nextLayer.isEmpty&&!p.length?Ie.empty:this.nextLayer.update({add:p,filter:a,filterFrom:s,filterTo:l}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],r=[],s=-1;for(let a=0;a<this.chunk.length;a++){let c=this.chunkPos[a],h=this.chunk[a],p=e.touchesRange(c,c+h.length);if(p===!1)s=Math.max(s,h.maxPoint),t.push(h),r.push(e.mapPos(c));else if(p===!0){let{mapped:d,pos:m}=h.map(c,e);d&&(s=Math.max(s,d.maxPoint),t.push(d),r.push(m))}}let l=this.nextLayer.map(e);return t.length==0?l:new Ie(r,t,l||Ie.empty,s)}between(e,t,r){if(!this.isEmpty){for(let s=0;s<this.chunk.length;s++){let l=this.chunkPos[s],a=this.chunk[s];if(t>=l&&e<=l+a.length&&a.between(l,e-l,t-l,r)===!1)return}this.nextLayer.between(e,t,r)}}iter(e=0){return Uo.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return Uo.from(e).goto(t)}static compare(e,t,r,s,l=-1){let a=e.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=l),c=t.filter(m=>m.maxPoint>0||!m.isEmpty&&m.maxPoint>=l),h=Gm(a,c,r),p=new xo(a,h,l),d=new xo(c,h,l);r.iterGaps((m,v,x)=>Jm(p,m,d,v,x,s)),r.empty&&r.length==0&&Jm(p,0,d,0,0,s)}static eq(e,t,r=0,s){s==null&&(s=999999999);let l=e.filter(d=>!d.isEmpty&&t.indexOf(d)<0),a=t.filter(d=>!d.isEmpty&&e.indexOf(d)<0);if(l.length!=a.length)return!1;if(!l.length)return!0;let c=Gm(l,a),h=new xo(l,c,0).goto(r),p=new xo(a,c,0).goto(r);for(;;){if(h.to!=p.to||!kf(h.active,p.active)||h.point&&(!p.point||!h.point.eq(p.point)))return!1;if(h.to>s)return!0;h.next(),p.next()}}static spans(e,t,r,s,l=-1){let a=new xo(e,null,l).goto(t),c=t,h=a.openStart;for(;;){let p=Math.min(a.to,r);if(a.point){let d=a.activeForPoint(a.to),m=a.pointFrom<t?d.length+1:a.point.startSide<0?d.length:Math.min(d.length,h);s.point(c,p,a.point,d,m,a.pointRank),h=Math.min(a.openEnd(p),d.length)}else p>c&&(s.span(c,p,a.active,h),h=a.openEnd(p));if(a.to>r)return h+(a.point&&a.to>r?1:0);c=a.to,a.next()}}static of(e,t=!1){let r=new $o;for(let s of e instanceof vf?[e]:t?qO(e):e)r.add(s.from,s.to,s.value);return r.finish()}static join(e){if(!e.length)return Ie.empty;let t=e[e.length-1];for(let r=e.length-2;r>=0;r--)for(let s=e[r];s!=Ie.empty;s=s.nextLayer)t=new Ie(s.chunkPos,s.chunk,t,Math.max(s.maxPoint,t.maxPoint));return t}}Ie.empty=new Ie([],[],null,-1);function qO(n){if(n.length>1)for(let e=n[0],t=1;t<n.length;t++){let r=n[t];if(xf(e,r)>0)return n.slice().sort(xf);e=r}return n}Ie.empty.nextLayer=Ie.empty;class $o{finishChunk(e){this.chunks.push(new vd(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,r){this.addInner(e,t,r)||(this.nextLayer||(this.nextLayer=new $o)).add(e,t,r)}addInner(e,t,r){let s=e-this.lastTo||r.startSide-this.last.endSide;if(s<=0&&(e-this.lastFrom||r.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return s<0?!1:(this.from.length==250&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=r,this.lastFrom=e,this.lastTo=t,this.value.push(r),r.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let r=t.value.length-1;return this.last=t.value[r],this.lastFrom=t.from[r]+e,this.lastTo=t.to[r]+e,!0}finish(){return this.finishInner(Ie.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),this.chunks.length==0)return e;let t=Ie.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function Gm(n,e,t){let r=new Map;for(let l of n)for(let a=0;a<l.chunk.length;a++)l.chunk[a].maxPoint<=0&&r.set(l.chunk[a],l.chunkPos[a]);let s=new Set;for(let l of e)for(let a=0;a<l.chunk.length;a++){let c=r.get(l.chunk[a]);c!=null&&(t?t.mapPos(c):c)==l.chunkPos[a]&&!(t!=null&&t.touchesRange(c,c+l.chunk[a].length))&&s.add(l.chunk[a])}return s}class Av{constructor(e,t,r,s=0){this.layer=e,this.skip=t,this.minPoint=r,this.rank=s}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,r){for(;this.chunkIndex<this.layer.chunk.length;){let s=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(s)||this.layer.chunkEnd(this.chunkIndex)<e||s.maxPoint<this.minPoint))break;this.chunkIndex++,r=!1}if(this.chunkIndex<this.layer.chunk.length){let s=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!r||this.rangeIndex<s)&&this.setRangeIndex(s)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;)if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}else{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],r=e+t.from[this.rangeIndex];if(this.from=r,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)for(;this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]);)this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class Uo{constructor(e){this.heap=e}static from(e,t=null,r=-1){let s=[];for(let l=0;l<e.length;l++)for(let a=e[l];!a.isEmpty;a=a.nextLayer)a.maxPoint>=r&&s.push(new Av(a,t,r,l));return s.length==1?s[0]:new Uo(s)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let r of this.heap)r.goto(e,t);for(let r=this.heap.length>>1;r>=0;r--)Lh(this.heap,r);return this.next(),this}forward(e,t){for(let r of this.heap)r.forward(e,t);for(let r=this.heap.length>>1;r>=0;r--)Lh(this.heap,r);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(this.heap.length==0)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),Lh(this.heap,0)}}}function Lh(n,e){for(let t=n[e];;){let r=(e<<1)+1;if(r>=n.length)break;let s=n[r];if(r+1<n.length&&s.compare(n[r+1])>=0&&(s=n[r+1],r++),t.compare(s)<0)break;n[r]=t,n[e]=s,e=r}}class xo{constructor(e,t,r){this.minPoint=r,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=Uo.from(e,t,r)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){for(;this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0;)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){Pa(this.active,e),Pa(this.activeTo,e),Pa(this.activeRank,e),this.minActive=Zm(this.active,this.activeTo)}addActive(e){let t=0,{value:r,to:s,rank:l}=this.cursor;for(;t<this.activeRank.length&&(l-this.activeRank[t]||s-this.activeTo[t])>0;)t++;Ea(this.active,t,r),Ea(this.activeTo,t,s),Ea(this.activeRank,t,l),e&&Ea(e,t,this.cursor.from),this.minActive=Zm(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let r=this.openStart<0?[]:null;for(;;){let s=this.minActive;if(s>-1&&(this.activeTo[s]-this.cursor.from||this.active[s].endSide-this.cursor.startSide)<0){if(this.activeTo[s]>e){this.to=this.activeTo[s],this.endSide=this.active[s].endSide;break}this.removeActive(s),r&&Pa(r,s)}else if(this.cursor.value)if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}else{let l=this.cursor.value;if(!l.point)this.addActive(r),this.cursor.next();else if(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)this.cursor.next();else{this.point=l,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=l.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}}else{this.to=this.endSide=1e9;break}}if(r){this.openStart=0;for(let s=r.length-1;s>=0&&r[s]<e;s--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let r=this.active.length-1;r>=0&&!(this.activeRank[r]<this.pointRank);r--)(this.activeTo[r]>e||this.activeTo[r]==e&&this.active[r].endSide>=this.point.endSide)&&t.push(this.active[r]);return t.reverse()}openEnd(e){let t=0;for(let r=this.activeTo.length-1;r>=0&&this.activeTo[r]>e;r--)t++;return t}}function Jm(n,e,t,r,s,l){n.goto(e),t.goto(r);let a=r+s,c=r,h=r-e;for(;;){let p=n.to+h-t.to,d=p||n.endSide-t.endSide,m=d<0?n.to+h:t.to,v=Math.min(m,a);if(n.point||t.point?n.point&&t.point&&(n.point==t.point||n.point.eq(t.point))&&kf(n.activeForPoint(n.to),t.activeForPoint(t.to))||l.comparePoint(c,v,n.point,t.point):v>c&&!kf(n.active,t.active)&&l.compareRange(c,v,n.active,t.active),m>a)break;(p||n.openEnd!=t.openEnd)&&l.boundChange&&l.boundChange(m),c=m,d<=0&&n.next(),d>=0&&t.next()}}function kf(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(n[t]!=e[t]&&!n[t].eq(e[t]))return!1;return!0}function Pa(n,e){for(let t=e,r=n.length-1;t<r;t++)n[t]=n[t+1];n.pop()}function Ea(n,e,t){for(let r=n.length-1;r>=e;r--)n[r+1]=n[r];n[e]=t}function Zm(n,e){let t=-1,r=1e9;for(let s=0;s<e.length;s++)(e[s]-r||n[s].endSide-n[t].endSide)<0&&(t=s,r=e[s]);return t}function Nu(n,e,t=n.length){let r=0;for(let s=0;s<t&&s<n.length;)n.charCodeAt(s)==9?(r+=e-r%e,s++):(r++,s=Wt(n,s));return r}function YO(n,e,t,r){for(let s=0,l=0;;){if(l>=e)return s;if(s==n.length)break;l+=n.charCodeAt(s)==9?t-l%t:1,s=Wt(n,s)}return n.length}const wf="",e0=typeof Symbol>"u"?"__"+wf:Symbol.for(wf),bf=typeof Symbol>"u"?"__styleSet"+Math.floor(Math.random()*1e8):Symbol("styleSet"),t0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:{};class ii{constructor(e,t){this.rules=[];let{finish:r}=t||{};function s(a){return/^@/.test(a)?[a]:a.split(/,\s*/)}function l(a,c,h,p){let d=[],m=/^@(\w+)\b/.exec(a[0]),v=m&&m[1]=="keyframes";if(m&&c==null)return h.push(a[0]+";");for(let x in c){let b=c[x];if(/&/.test(x))l(x.split(/,\s*/).map(S=>a.map(C=>S.replace(/&/,C))).reduce((S,C)=>S.concat(C)),b,h);else if(b&&typeof b=="object"){if(!m)throw new RangeError("The value of a property ("+x+") should be a primitive value.");l(s(x),b,d,v)}else b!=null&&d.push(x.replace(/_.*/,"").replace(/[A-Z]/g,S=>"-"+S.toLowerCase())+": "+b+";")}(d.length||v)&&h.push((r&&!m&&!p?a.map(r):a).join(", ")+" {"+d.join(" ")+"}")}for(let a in e)l(s(a),e[a],this.rules)}getRules(){return this.rules.join(`
`)}static newName(){let e=t0[e0]||1;return t0[e0]=e+1,wf+e.toString(36)}static mount(e,t,r){let s=e[bf],l=r&&r.nonce;s?l&&s.setNonce(l):s=new GO(e,l),s.mount(Array.isArray(t)?t:[t],e)}}let n0=new Map;class GO{constructor(e,t){let r=e.ownerDocument||e,s=r.defaultView;if(!e.head&&e.adoptedStyleSheets&&s.CSSStyleSheet){let l=n0.get(r);if(l)return e[bf]=l;this.sheet=new s.CSSStyleSheet,n0.set(r,this)}else this.styleTag=r.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[bf]=this}mount(e,t){let r=this.sheet,s=0,l=0;for(let a=0;a<e.length;a++){let c=e[a],h=this.modules.indexOf(c);if(h<l&&h>-1&&(this.modules.splice(h,1),l--,h=-1),h==-1){if(this.modules.splice(l++,0,c),r)for(let p=0;p<c.rules.length;p++)r.insertRule(c.rules[p],s++)}else{for(;l<h;)s+=this.modules[l++].rules.length;s+=c.rules.length,l++}}if(r)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let a="";for(let h=0;h<this.modules.length;h++)a+=this.modules[h].getRules()+`
`;this.styleTag.textContent=a;let c=t.head||t;this.styleTag.parentNode!=c&&c.insertBefore(this.styleTag,c.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}var si={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Xo={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},JO=typeof navigator<"u"&&/Mac/.test(navigator.platform),ZO=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Pt=0;Pt<10;Pt++)si[48+Pt]=si[96+Pt]=String(Pt);for(var Pt=1;Pt<=24;Pt++)si[Pt+111]="F"+Pt;for(var Pt=65;Pt<=90;Pt++)si[Pt]=String.fromCharCode(Pt+32),Xo[Pt]=String.fromCharCode(Pt);for(var jh in si)Xo.hasOwnProperty(jh)||(Xo[jh]=si[jh]);function eC(n){var e=JO&&n.metaKey&&n.shiftKey&&!n.ctrlKey&&!n.altKey||ZO&&n.shiftKey&&n.key&&n.key.length==1||n.key=="Unidentified",t=!e&&n.key||(n.shiftKey?Xo:si)[n.keyCode]||n.key||"Unidentified";return t=="Esc"&&(t="Escape"),t=="Del"&&(t="Delete"),t=="Left"&&(t="ArrowLeft"),t=="Up"&&(t="ArrowUp"),t=="Right"&&(t="ArrowRight"),t=="Down"&&(t="ArrowDown"),t}let Vt=typeof navigator<"u"?navigator:{userAgent:"",vendor:"",platform:""},Sf=typeof document<"u"?document:{documentElement:{style:{}}};const Of=/Edge\/(\d+)/.exec(Vt.userAgent),Mv=/MSIE \d/.test(Vt.userAgent),Cf=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Vt.userAgent),Du=!!(Mv||Cf||Of),r0=!Du&&/gecko\/(\d+)/i.test(Vt.userAgent),Ih=!Du&&/Chrome\/(\d+)/.exec(Vt.userAgent),tC="webkitFontSmoothing"in Sf.documentElement.style,Pf=!Du&&/Apple Computer/.test(Vt.vendor),i0=Pf&&(/Mobile\/\w+/.test(Vt.userAgent)||Vt.maxTouchPoints>2);var ae={mac:i0||/Mac/.test(Vt.platform),windows:/Win/.test(Vt.platform),linux:/Linux|X11/.test(Vt.platform),ie:Du,ie_version:Mv?Sf.documentMode||6:Cf?+Cf[1]:Of?+Of[1]:0,gecko:r0,gecko_version:r0?+(/Firefox\/(\d+)/.exec(Vt.userAgent)||[0,0])[1]:0,chrome:!!Ih,chrome_version:Ih?+Ih[1]:0,ios:i0,android:/Android\b/.test(Vt.userAgent),webkit_version:tC?+(/\bAppleWebKit\/(\d+)/.exec(Vt.userAgent)||[0,0])[1]:0,safari:Pf,safari_version:Pf?+(/\bVersion\/(\d+(\.\d+)?)/.exec(Vt.userAgent)||[0,0])[1]:0,tabSize:Sf.documentElement.style.tabSize!=null?"tab-size":"-moz-tab-size"};function Ko(n){let e;return n.nodeType==11?e=n.getSelection?n:n.ownerDocument:e=n,e.getSelection()}function Ef(n,e){return e?n==e||n.contains(e.nodeType!=1?e.parentNode:e):!1}function Ka(n,e){if(!e.anchorNode)return!1;try{return Ef(n,e.anchorNode)}catch{return!1}}function qo(n){return n.nodeType==3?Ti(n,0,n.nodeValue.length).getClientRects():n.nodeType==1?n.getClientRects():[]}function jo(n,e,t,r){return t?s0(n,e,t,r,-1)||s0(n,e,t,r,1):!1}function Di(n){for(var e=0;;e++)if(n=n.previousSibling,!n)return e}function hu(n){return n.nodeType==1&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(n.nodeName)}function s0(n,e,t,r,s){for(;;){if(n==t&&e==r)return!0;if(e==(s<0?0:or(n))){if(n.nodeName=="DIV")return!1;let l=n.parentNode;if(!l||l.nodeType!=1)return!1;e=Di(n)+(s<0?0:1),n=l}else if(n.nodeType==1){if(n=n.childNodes[e+(s<0?-1:0)],n.nodeType==1&&n.contentEditable=="false")return!1;e=s<0?or(n):0}else return!1}}function or(n){return n.nodeType==3?n.nodeValue.length:n.childNodes.length}function Tu(n,e){let t=e?n.left:n.right;return{left:t,right:t,top:n.top,bottom:n.bottom}}function nC(n){let e=n.visualViewport;return e?{left:0,right:e.width,top:0,bottom:e.height}:{left:0,right:n.innerWidth,top:0,bottom:n.innerHeight}}function Rv(n,e){let t=e.width/n.offsetWidth,r=e.height/n.offsetHeight;return(t>.995&&t<1.005||!isFinite(t)||Math.abs(e.width-n.offsetWidth)<1)&&(t=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(e.height-n.offsetHeight)<1)&&(r=1),{scaleX:t,scaleY:r}}function rC(n,e,t,r,s,l,a,c){let h=n.ownerDocument,p=h.defaultView||window;for(let d=n,m=!1;d&&!m;)if(d.nodeType==1){let v,x=d==h.body,b=1,S=1;if(x)v=nC(p);else{if(/^(fixed|sticky)$/.test(getComputedStyle(d).position)&&(m=!0),d.scrollHeight<=d.clientHeight&&d.scrollWidth<=d.clientWidth){d=d.assignedSlot||d.parentNode;continue}let N=d.getBoundingClientRect();({scaleX:b,scaleY:S}=Rv(d,N)),v={left:N.left,right:N.left+d.clientWidth*b,top:N.top,bottom:N.top+d.clientHeight*S}}let C=0,P=0;if(s=="nearest")e.top<v.top?(P=e.top-(v.top+a),t>0&&e.bottom>v.bottom+P&&(P=e.bottom-v.bottom+a)):e.bottom>v.bottom&&(P=e.bottom-v.bottom+a,t<0&&e.top-P<v.top&&(P=e.top-(v.top+a)));else{let N=e.bottom-e.top,D=v.bottom-v.top;P=(s=="center"&&N<=D?e.top+N/2-D/2:s=="start"||s=="center"&&t<0?e.top-a:e.bottom-D+a)-v.top}if(r=="nearest"?e.left<v.left?(C=e.left-(v.left+l),t>0&&e.right>v.right+C&&(C=e.right-v.right+l)):e.right>v.right&&(C=e.right-v.right+l,t<0&&e.left<v.left+C&&(C=e.left-(v.left+l))):C=(r=="center"?e.left+(e.right-e.left)/2-(v.right-v.left)/2:r=="start"==c?e.left-l:e.right-(v.right-v.left)+l)-v.left,C||P)if(x)p.scrollBy(C,P);else{let N=0,D=0;if(P){let B=d.scrollTop;d.scrollTop+=P/S,D=(d.scrollTop-B)*S}if(C){let B=d.scrollLeft;d.scrollLeft+=C/b,N=(d.scrollLeft-B)*b}e={left:e.left-N,top:e.top-D,right:e.right-N,bottom:e.bottom-D},N&&Math.abs(N-C)<1&&(r="nearest"),D&&Math.abs(D-P)<1&&(s="nearest")}if(x)break;(e.top<v.top||e.bottom>v.bottom||e.left<v.left||e.right>v.right)&&(e={left:Math.max(e.left,v.left),right:Math.min(e.right,v.right),top:Math.max(e.top,v.top),bottom:Math.min(e.bottom,v.bottom)}),d=d.assignedSlot||d.parentNode}else if(d.nodeType==11)d=d.host;else break}function iC(n){let e=n.ownerDocument,t,r;for(let s=n.parentNode;s&&!(s==e.body||t&&r);)if(s.nodeType==1)!r&&s.scrollHeight>s.clientHeight&&(r=s),!t&&s.scrollWidth>s.clientWidth&&(t=s),s=s.assignedSlot||s.parentNode;else if(s.nodeType==11)s=s.host;else break;return{x:t,y:r}}class sC{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:r}=e;this.set(t,Math.min(e.anchorOffset,t?or(t):0),r,Math.min(e.focusOffset,r?or(r):0))}set(e,t,r,s){this.anchorNode=e,this.anchorOffset=t,this.focusNode=r,this.focusOffset=s}}let Pi=null;ae.safari&&ae.safari_version>=26&&(Pi=!1);function Nv(n){if(n.setActive)return n.setActive();if(Pi)return n.focus(Pi);let e=[];for(let t=n;t&&(e.push(t,t.scrollTop,t.scrollLeft),t!=t.ownerDocument);t=t.parentNode);if(n.focus(Pi==null?{get preventScroll(){return Pi={preventScroll:!0},!0}}:void 0),!Pi){Pi=!1;for(let t=0;t<e.length;){let r=e[t++],s=e[t++],l=e[t++];r.scrollTop!=s&&(r.scrollTop=s),r.scrollLeft!=l&&(r.scrollLeft=l)}}}let o0;function Ti(n,e,t=e){let r=o0||(o0=document.createRange());return r.setEnd(n,t),r.setStart(n,e),r}function gs(n,e,t,r){let s={key:e,code:e,keyCode:t,which:t,cancelable:!0};r&&({altKey:s.altKey,ctrlKey:s.ctrlKey,shiftKey:s.shiftKey,metaKey:s.metaKey}=r);let l=new KeyboardEvent("keydown",s);l.synthetic=!0,n.dispatchEvent(l);let a=new KeyboardEvent("keyup",s);return a.synthetic=!0,n.dispatchEvent(a),l.defaultPrevented||a.defaultPrevented}function oC(n){for(;n;){if(n&&(n.nodeType==9||n.nodeType==11&&n.host))return n;n=n.assignedSlot||n.parentNode}return null}function Dv(n){for(;n.attributes.length;)n.removeAttributeNode(n.attributes[0])}function lC(n,e){let t=e.focusNode,r=e.focusOffset;if(!t||e.anchorNode!=t||e.anchorOffset!=r)return!1;for(r=Math.min(r,or(t));;)if(r){if(t.nodeType!=1)return!1;let s=t.childNodes[r-1];s.contentEditable=="false"?r--:(t=s,r=or(t))}else{if(t==n)return!0;r=Di(t),t=t.parentNode}}function Tv(n){return n.scrollTop>Math.max(1,n.scrollHeight-n.clientHeight-4)}function Lv(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r>0)return{node:t,offset:r};if(t.nodeType==1&&r>0){if(t.contentEditable=="false")return null;t=t.childNodes[r-1],r=or(t)}else if(t.parentNode&&!hu(t))r=Di(t),t=t.parentNode;else return null}}function jv(n,e){for(let t=n,r=e;;){if(t.nodeType==3&&r<t.nodeValue.length)return{node:t,offset:r};if(t.nodeType==1&&r<t.childNodes.length){if(t.contentEditable=="false")return null;t=t.childNodes[r],r=0}else if(t.parentNode&&!hu(t))r=Di(t)+1,t=t.parentNode;else return null}}class It{constructor(e,t,r=!0){this.node=e,this.offset=t,this.precise=r}static before(e,t){return new It(e.parentNode,Di(e),t)}static after(e,t){return new It(e.parentNode,Di(e)+1,t)}}const xd=[];class ze{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let r of this.children){if(r==e)return t;t+=r.length+r.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(this.flags&2){let r=this.dom,s=null,l;for(let a of this.children){if(a.flags&7){if(!a.dom&&(l=s?s.nextSibling:r.firstChild)){let c=ze.get(l);(!c||!c.parent&&c.canReuseDOM(a))&&a.reuseDOM(l)}a.sync(e,t),a.flags&=-8}if(l=s?s.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&l!=a.dom&&(t.written=!0),a.dom.parentNode==r)for(;l&&l!=a.dom;)l=l0(l);else r.insertBefore(a.dom,l);s=a.dom}for(l=s?s.nextSibling:r.firstChild,l&&t&&t.node==r&&(t.written=!0);l;)l=l0(l)}else if(this.flags&1)for(let r of this.children)r.flags&7&&(r.sync(e,t),r.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let r;if(e==this.dom)r=this.dom.childNodes[t];else{let s=or(e)==0?0:t==0?-1:1;for(;;){let l=e.parentNode;if(l==this.dom)break;s==0&&l.firstChild!=l.lastChild&&(e==l.firstChild?s=-1:s=1),e=l}s<0?r=e:r=e.nextSibling}if(r==this.dom.firstChild)return 0;for(;r&&!ze.get(r);)r=r.nextSibling;if(!r)return this.length;for(let s=0,l=0;;s++){let a=this.children[s];if(a.dom==r)return l;l+=a.length+a.breakAfter}}domBoundsAround(e,t,r=0){let s=-1,l=-1,a=-1,c=-1;for(let h=0,p=r,d=r;h<this.children.length;h++){let m=this.children[h],v=p+m.length;if(p<e&&v>t)return m.domBoundsAround(e,t,p);if(v>=e&&s==-1&&(s=h,l=p),p>t&&m.dom.parentNode==this.dom){a=h,c=d;break}d=v,p=v+m.breakAfter}return{from:l,to:c<0?r+this.length:c,startDOM:(s?this.children[s-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:a<this.children.length&&a>=0?this.children[a].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),t.flags&1)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,this.flags&7&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,r=xd){this.markDirty();for(let s=e;s<t;s++){let l=this.children[s];l.parent==this&&r.indexOf(l)<0&&l.destroy()}r.length<250?this.children.splice(e,t-e,...r):this.children=[].concat(this.children.slice(0,e),r,this.children.slice(t));for(let s=0;s<r.length;s++)r[s].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new Iv(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+(e=="Text"?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,r,s,l,a){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!((this.flags|e.flags)&8)}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}ze.prototype.breakAfter=0;function l0(n){let e=n.nextSibling;return n.parentNode.removeChild(n),e}class Iv{constructor(e,t,r){this.children=e,this.pos=t,this.i=r,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||this.i==0||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let r=this.children[--this.i];this.pos-=r.length+r.breakAfter}}}function Bv(n,e,t,r,s,l,a,c,h){let{children:p}=n,d=p.length?p[e]:null,m=l.length?l[l.length-1]:null,v=m?m.breakAfter:a;if(!(e==r&&d&&!a&&!v&&l.length<2&&d.merge(t,s,l.length?m:null,t==0,c,h))){if(r<p.length){let x=p[r];x&&(s<x.length||x.breakAfter&&(m!=null&&m.breakAfter))?(e==r&&(x=x.split(s),s=0),!v&&m&&x.merge(0,s,m,!0,0,h)?l[l.length-1]=x:((s||x.children.length&&!x.children[0].length)&&x.merge(0,s,null,!1,0,h),l.push(x))):x!=null&&x.breakAfter&&(m?m.breakAfter=1:a=1),r++}for(d&&(d.breakAfter=a,t>0&&(!a&&l.length&&d.merge(t,d.length,l[0],!1,c,0)?d.breakAfter=l.shift().breakAfter:(t<d.length||d.children.length&&d.children[d.children.length-1].length==0)&&d.merge(t,d.length,null,!1,c,0),e++));e<r&&l.length;)if(p[r-1].become(l[l.length-1]))r--,l.pop(),h=l.length?0:c;else if(p[e].become(l[0]))e++,l.shift(),c=l.length?0:h;else break;!l.length&&e&&r<p.length&&!p[e-1].breakAfter&&p[r].merge(0,0,p[e-1],!1,c,h)&&e--,(e<r||l.length)&&n.replaceChildren(e,r,l)}}function zv(n,e,t,r,s,l){let a=n.childCursor(),{i:c,off:h}=a.findPos(t,1),{i:p,off:d}=a.findPos(e,-1),m=e-t;for(let v of r)m+=v.length;n.length+=m,Bv(n,p,d,c,h,r,0,s,l)}const aC=256;class _n extends ze{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){e.nodeType==3&&this.createDOM(e)}merge(e,t,r){return this.flags&8||r&&(!(r instanceof _n)||this.length-(t-e)+r.length>aC||r.flags&8)?!1:(this.text=this.text.slice(0,e)+(r?r.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new _n(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=this.flags&8,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new It(this.dom,e)}domBoundsAround(e,t,r){return{from:r,to:r+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return uC(this.dom,e,t)}}class Cr extends ze{constructor(e,t=[],r=0){super(),this.mark=e,this.children=t,this.length=r;for(let s of t)s.setParent(this)}setAttrs(e){if(Dv(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!((this.flags|e.flags)&8)}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?this.flags&4&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,r,s,l,a){return r&&(!(r instanceof Cr&&r.mark.eq(this.mark))||e&&l<=0||t<this.length&&a<=0)?!1:(zv(this,e,t,r?r.children.slice():[],l-1,a-1),this.markDirty(),!0)}split(e){let t=[],r=0,s=-1,l=0;for(let c of this.children){let h=r+c.length;h>e&&t.push(r<e?c.split(e-r):c),s<0&&r>=e&&(s=l),r=h,l++}let a=this.length-e;return this.length=e,s>-1&&(this.children.length=s,this.markDirty()),new Cr(this.mark,t,a)}domAtPos(e){return Fv(this,e)}coordsAt(e,t){return Hv(this,e,t)}}function uC(n,e,t){let r=n.nodeValue.length;e>r&&(e=r);let s=e,l=e,a=0;e==0&&t<0||e==r&&t>=0?ae.chrome||ae.gecko||(e?(s--,a=1):l<r&&(l++,a=-1)):t<0?s--:l<r&&l++;let c=Ti(n,s,l).getClientRects();if(!c.length)return null;let h=c[(a?a<0:t>=0)?0:c.length-1];return ae.safari&&!a&&h.width==0&&(h=Array.prototype.find.call(c,p=>p.width)||h),a?Tu(h,a<0):h||null}class Zr extends ze{static create(e,t,r){return new Zr(e,t,r)}constructor(e,t,r){super(),this.widget=e,this.length=t,this.side=r,this.prevWidget=null}split(e){let t=Zr.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,r,s,l,a){return r&&(!(r instanceof Zr)||!this.widget.compare(r.widget)||e>0&&l<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}become(e){return e instanceof Zr&&e.side==this.side&&this.widget.constructor==e.widget.constructor?(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(this.length==0)return De.empty;let e=this;for(;e.parent;)e=e.parent;let{view:t}=e,r=t&&t.state.doc,s=this.posAtStart;return r?r.slice(s,s+this.length):De.empty}domAtPos(e){return(this.length?e==0:this.side>0)?It.before(this.dom):It.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);if(r)return r;let s=this.dom.getClientRects(),l=null;if(!s.length)return null;let a=this.side?this.side<0:e>0;for(let c=a?s.length-1:0;l=s[c],!(e>0?c==0:c==s.length-1||l.top<l.bottom);c+=a?-1:1);return Tu(l,!a)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class ks extends ze{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof ks&&e.side==this.side}split(){return new ks(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?It.before(this.dom):It.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return De.empty}get isHidden(){return!0}}_n.prototype.children=Zr.prototype.children=ks.prototype.children=xd;function Fv(n,e){let t=n.dom,{children:r}=n,s=0;for(let l=0;s<r.length;s++){let a=r[s],c=l+a.length;if(!(c==l&&a.getSide()<=0)){if(e>l&&e<c&&a.dom.parentNode==t)return a.domAtPos(e-l);if(e<=l)break;l=c}}for(let l=s;l>0;l--){let a=r[l-1];if(a.dom.parentNode==t)return a.domAtPos(a.length)}for(let l=s;l<r.length;l++){let a=r[l];if(a.dom.parentNode==t)return a.domAtPos(0)}return new It(t,0)}function _v(n,e,t){let r,{children:s}=n;t>0&&e instanceof Cr&&s.length&&(r=s[s.length-1])instanceof Cr&&r.mark.eq(e.mark)?_v(r,e.children[0],t-1):(s.push(e),e.setParent(n)),n.length+=e.length}function Hv(n,e,t){let r=null,s=-1,l=null,a=-1;function c(p,d){for(let m=0,v=0;m<p.children.length&&v<=d;m++){let x=p.children[m],b=v+x.length;b>=d&&(x.children.length?c(x,d-v):(!l||l.isHidden&&(t>0||hC(l,x)))&&(b>d||v==b&&x.getSide()>0)?(l=x,a=d-v):(v<d||v==b&&x.getSide()<0&&!x.isHidden)&&(r=x,s=d-v)),v=b}}c(n,e);let h=(t<0?r:l)||r||l;return h?h.coordsAt(Math.max(0,h==r?s:a),t):cC(n)}function cC(n){let e=n.dom.lastChild;if(!e)return n.dom.getBoundingClientRect();let t=qo(e);return t[t.length-1]||null}function hC(n,e){let t=n.coordsAt(0,1),r=e.coordsAt(0,1);return t&&r&&r.top<t.bottom}function Af(n,e){for(let t in n)t=="class"&&e.class?e.class+=" "+n.class:t=="style"&&e.style?e.style+=";"+n.style:e[t]=n[t];return e}const a0=Object.create(null);function fu(n,e,t){if(n==e)return!0;n||(n=a0),e||(e=a0);let r=Object.keys(n),s=Object.keys(e);if(r.length-(t&&r.indexOf(t)>-1?1:0)!=s.length-(t&&s.indexOf(t)>-1?1:0))return!1;for(let l of r)if(l!=t&&(s.indexOf(l)==-1||n[l]!==e[l]))return!1;return!0}function Mf(n,e,t){let r=!1;if(e)for(let s in e)t&&s in t||(r=!0,s=="style"?n.style.cssText="":n.removeAttribute(s));if(t)for(let s in t)e&&e[s]==t[s]||(r=!0,s=="style"?n.style.cssText=t[s]:n.setAttribute(s,t[s]));return r}function fC(n){let e=Object.create(null);for(let t=0;t<n.attributes.length;t++){let r=n.attributes[t];e[r.name]=r.value}return e}class ol{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,r){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Qt=(function(n){return n[n.Text=0]="Text",n[n.WidgetBefore=1]="WidgetBefore",n[n.WidgetAfter=2]="WidgetAfter",n[n.WidgetRange=3]="WidgetRange",n})(Qt||(Qt={}));class et extends xs{constructor(e,t,r,s){super(),this.startSide=e,this.endSide=t,this.widget=r,this.spec=s}get heightRelevant(){return!1}static mark(e){return new ll(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),r=!!e.block;return t+=r&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new oi(e,t,t,r,e.widget||null,!1)}static replace(e){let t=!!e.block,r,s;if(e.isBlockGap)r=-5e8,s=4e8;else{let{start:l,end:a}=Vv(e,t);r=(l?t?-3e8:-1:5e8)-1,s=(a?t?2e8:1:-6e8)+1}return new oi(e,r,s,t,e.widget||null,!0)}static line(e){return new al(e)}static set(e,t=!1){return Ie.of(e,t)}hasHeight(){return this.widget?this.widget.estimatedHeight>-1:!1}}et.none=Ie.empty;class ll extends et{constructor(e){let{start:t,end:r}=Vv(e);super(t?-1:5e8,r?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,r;return this==e||e instanceof ll&&this.tagName==e.tagName&&(this.class||((t=this.attrs)===null||t===void 0?void 0:t.class))==(e.class||((r=e.attrs)===null||r===void 0?void 0:r.class))&&fu(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}ll.prototype.point=!1;class al extends et{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof al&&this.spec.class==e.spec.class&&fu(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}al.prototype.mapMode=dn.TrackBefore;al.prototype.point=!0;class oi extends et{constructor(e,t,r,s,l,a){super(t,r,l,e),this.block=s,this.isReplace=a,this.mapMode=s?t<=0?dn.TrackBefore:dn.TrackAfter:dn.TrackDel}get type(){return this.startSide!=this.endSide?Qt.WidgetRange:this.startSide<=0?Qt.WidgetBefore:Qt.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof oi&&dC(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}oi.prototype.point=!0;function Vv(n,e=!1){let{inclusiveStart:t,inclusiveEnd:r}=n;return t==null&&(t=n.inclusive),r==null&&(r=n.inclusive),{start:t??e,end:r??e}}function dC(n,e){return n==e||!!(n&&e&&n.compare(e))}function qa(n,e,t,r=0){let s=t.length-1;s>=0&&t[s]+r>=n?t[s]=Math.max(t[s],e):t.push(n,e)}class at extends ze{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,r,s,l,a){if(r){if(!(r instanceof at))return!1;this.dom||r.transferDOM(this)}return s&&this.setDeco(r?r.attrs:null),zv(this,e,t,r?r.children.slice():[],l,a),!0}split(e){let t=new at;if(t.breakAfter=this.breakAfter,this.length==0)return t;let{i:r,off:s}=this.childPos(e);s&&(t.append(this.children[r].split(s),0),this.children[r].merge(s,this.children[r].length,null,!1,0,0),r++);for(let l=r;l<this.children.length;l++)t.append(this.children[l],0);for(;r>0&&this.children[r-1].length==0;)this.children[--r].destroy();return this.children.length=r,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=this.prevAttrs===void 0?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){fu(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){_v(this,e,t)}addLineDeco(e){let t=e.spec.attributes,r=e.spec.class;t&&(this.attrs=Af(t,this.attrs||{})),r&&(this.attrs=Af({class:r},this.attrs||{}))}domAtPos(e){return Fv(this,e)}reuseDOM(e){e.nodeName=="DIV"&&(this.setDOM(e),this.flags|=6)}sync(e,t){var r;this.dom?this.flags&4&&(Dv(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),this.prevAttrs!==void 0&&(Mf(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let s=this.dom.lastChild;for(;s&&ze.get(s)instanceof Cr;)s=s.lastChild;if(!s||!this.length||s.nodeName!="BR"&&((r=ze.get(s))===null||r===void 0?void 0:r.isEditable)==!1&&(!ae.ios||!this.children.some(l=>l instanceof _n))){let l=document.createElement("BR");l.cmIgnore=!0,this.dom.appendChild(l)}}measureTextSize(){if(this.children.length==0||this.length>20)return null;let e=0,t;for(let r of this.children){if(!(r instanceof _n)||/[^ -~]/.test(r.text))return null;let s=qo(r.dom);if(s.length!=1)return null;e+=s[0].width,t=s[0].height}return e?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:e/this.length,textHeight:t}:null}coordsAt(e,t){let r=Hv(this,e,t);if(!this.children.length&&r&&this.parent){let{heightOracle:s}=this.parent.view.viewState,l=r.bottom-r.top;if(Math.abs(l-s.lineHeight)<2&&s.textHeight<l){let a=(l-s.textHeight)/2;return{top:r.top+a,bottom:r.bottom-a,left:r.left,right:r.left}}}return r}become(e){return e instanceof at&&this.children.length==0&&e.children.length==0&&fu(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let r=0,s=0;r<e.children.length;r++){let l=e.children[r],a=s+l.length;if(a>=t){if(l instanceof at)return l;if(a>t)break}s=a+l.breakAfter}return null}}class Or extends ze{constructor(e,t,r){super(),this.widget=e,this.length=t,this.deco=r,this.breakAfter=0,this.prevWidget=null}merge(e,t,r,s,l,a){return r&&(!(r instanceof Or)||!this.widget.compare(r.widget)||e>0&&l<=0||t<this.length&&a<=0)?!1:(this.length=e+(r?r.length:0)+(this.length-t),!0)}domAtPos(e){return e==0?It.before(this.dom):It.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let r=new Or(this.widget,t,this.deco);return r.breakAfter=this.breakAfter,r}get children(){return xd}sync(e){(!this.dom||!this.widget.updateDOM(this.dom,e))&&(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):De.empty}domBoundsAround(){return null}become(e){return e instanceof Or&&e.widget.constructor==this.widget.constructor?(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0):!1}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let r=this.widget.coordsAt(this.dom,e,t);return r||(this.widget instanceof Rf?null:Tu(this.dom.getBoundingClientRect(),this.length?e==0:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:r}=this.deco;return t==r?!1:e<0?t<0:r>0}}class Rf extends ol{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Io{constructor(e,t,r,s){this.doc=e,this.pos=t,this.end=r,this.disallowBlockEffectsFor=s,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(this.content.length==0)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof Or&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new at),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Aa(new ks(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,!this.posCovered()&&!(e&&this.content.length&&this.content[this.content.length-1]instanceof Or)&&this.getLine()}buildText(e,t,r){for(;e>0;){if(this.textOff==this.text.length){let{value:a,lineBreak:c,done:h}=this.cursor.next(this.skip);if(this.skip=0,h)throw new Error("Ran out of text content when drawing inline views");if(c){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}else this.text=a,this.textOff=0}let s=Math.min(this.text.length-this.textOff,e),l=Math.min(s,512);this.flushBuffer(t.slice(t.length-r)),this.getLine().append(Aa(new _n(this.text.slice(this.textOff,this.textOff+l)),t),r),this.atCursorPos=!0,this.textOff+=l,e-=l,r=s<=l?0:t.length}}span(e,t,r,s){this.buildText(t-e,r,s),this.pos=t,this.openStart<0&&(this.openStart=s)}point(e,t,r,s,l,a){if(this.disallowBlockEffectsFor[a]&&r instanceof oi){if(r.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let c=t-e;if(r instanceof oi)if(r.block)r.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new Or(r.widget||ws.block,c,r));else{let h=Zr.create(r.widget||ws.inline,c,c?0:r.startSide),p=this.atCursorPos&&!h.isEditable&&l<=s.length&&(e<t||r.startSide>0),d=!h.isEditable&&(e<t||l>s.length||r.startSide<=0),m=this.getLine();this.pendingBuffer==2&&!p&&!h.isEditable&&(this.pendingBuffer=0),this.flushBuffer(s),p&&(m.append(Aa(new ks(1),s),l),l=s.length+Math.max(0,l-s.length)),m.append(Aa(h,s),l),this.atCursorPos=d,this.pendingBuffer=d?e<t||l>s.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=s.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(r);c&&(this.textOff+c<=this.text.length?this.textOff+=c:(this.skip+=c-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=l)}static build(e,t,r,s,l){let a=new Io(e,t,r,l);return a.openEnd=Ie.spans(s,t,r,a),a.openStart<0&&(a.openStart=a.openEnd),a.finish(a.openEnd),a}}function Aa(n,e){for(let t of e)n=new Cr(t,[n],n.length);return n}class ws extends ol{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}ws.inline=new ws("span");ws.block=new ws("div");var Ze=(function(n){return n[n.LTR=0]="LTR",n[n.RTL=1]="RTL",n})(Ze||(Ze={}));const Li=Ze.LTR,kd=Ze.RTL;function Wv(n){let e=[];for(let t=0;t<n.length;t++)e.push(1<<+n[t]);return e}const pC=Wv("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),gC=Wv("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),Nf=Object.create(null),Jn=[];for(let n of["()","[]","{}"]){let e=n.charCodeAt(0),t=n.charCodeAt(1);Nf[e]=t,Nf[t]=-e}function Qv(n){return n<=247?pC[n]:1424<=n&&n<=1524?2:1536<=n&&n<=1785?gC[n-1536]:1774<=n&&n<=2220?4:8192<=n&&n<=8204?256:64336<=n&&n<=65023?4:1}const mC=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class ei{get dir(){return this.level%2?kd:Li}constructor(e,t,r){this.from=e,this.to=t,this.level=r}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,r,s){let l=-1;for(let a=0;a<e.length;a++){let c=e[a];if(c.from<=t&&c.to>=t){if(c.level==r)return a;(l<0||(s!=0?s<0?c.from<t:c.to>t:e[l].level>c.level))&&(l=a)}}if(l<0)throw new RangeError("Index out of range");return l}}function $v(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++){let r=n[t],s=e[t];if(r.from!=s.from||r.to!=s.to||r.direction!=s.direction||!$v(r.inner,s.inner))return!1}return!0}const _e=[];function yC(n,e,t,r,s){for(let l=0;l<=r.length;l++){let a=l?r[l-1].to:e,c=l<r.length?r[l].from:t,h=l?256:s;for(let p=a,d=h,m=h;p<c;p++){let v=Qv(n.charCodeAt(p));v==512?v=d:v==8&&m==4&&(v=16),_e[p]=v==4?2:v,v&7&&(m=v),d=v}for(let p=a,d=h,m=h;p<c;p++){let v=_e[p];if(v==128)p<c-1&&d==_e[p+1]&&d&24?v=_e[p]=d:_e[p]=256;else if(v==64){let x=p+1;for(;x<c&&_e[x]==64;)x++;let b=p&&d==8||x<t&&_e[x]==8?m==1?1:8:256;for(let S=p;S<x;S++)_e[S]=b;p=x-1}else v==8&&m==1&&(_e[p]=1);d=v,v&7&&(m=v)}}}function vC(n,e,t,r,s){let l=s==1?2:1;for(let a=0,c=0,h=0;a<=r.length;a++){let p=a?r[a-1].to:e,d=a<r.length?r[a].from:t;for(let m=p,v,x,b;m<d;m++)if(x=Nf[v=n.charCodeAt(m)])if(x<0){for(let S=c-3;S>=0;S-=3)if(Jn[S+1]==-x){let C=Jn[S+2],P=C&2?s:C&4?C&1?l:s:0;P&&(_e[m]=_e[Jn[S]]=P),c=S;break}}else{if(Jn.length==189)break;Jn[c++]=m,Jn[c++]=v,Jn[c++]=h}else if((b=_e[m])==2||b==1){let S=b==s;h=S?0:1;for(let C=c-3;C>=0;C-=3){let P=Jn[C+2];if(P&2)break;if(S)Jn[C+2]|=2;else{if(P&4)break;Jn[C+2]|=4}}}}}function xC(n,e,t,r){for(let s=0,l=r;s<=t.length;s++){let a=s?t[s-1].to:n,c=s<t.length?t[s].from:e;for(let h=a;h<c;){let p=_e[h];if(p==256){let d=h+1;for(;;)if(d==c){if(s==t.length)break;d=t[s++].to,c=s<t.length?t[s].from:e}else if(_e[d]==256)d++;else break;let m=l==1,v=(d<e?_e[d]:r)==1,x=m==v?m?1:2:r;for(let b=d,S=s,C=S?t[S-1].to:n;b>h;)b==C&&(b=t[--S].from,C=S?t[S-1].to:n),_e[--b]=x;h=d}else l=p,h++}}}function Df(n,e,t,r,s,l,a){let c=r%2?2:1;if(r%2==s%2)for(let h=e,p=0;h<t;){let d=!0,m=!1;if(p==l.length||h<l[p].from){let S=_e[h];S!=c&&(d=!1,m=S==16)}let v=!d&&c==1?[]:null,x=d?r:r+1,b=h;e:for(;;)if(p<l.length&&b==l[p].from){if(m)break e;let S=l[p];if(!d)for(let C=S.to,P=p+1;;){if(C==t)break e;if(P<l.length&&l[P].from==C)C=l[P++].to;else{if(_e[C]==c)break e;break}}if(p++,v)v.push(S);else{S.from>h&&a.push(new ei(h,S.from,x));let C=S.direction==Li!=!(x%2);Tf(n,C?r+1:r,s,S.inner,S.from,S.to,a),h=S.to}b=S.to}else{if(b==t||(d?_e[b]!=c:_e[b]==c))break;b++}v?Df(n,h,b,r+1,s,v,a):h<b&&a.push(new ei(h,b,x)),h=b}else for(let h=t,p=l.length;h>e;){let d=!0,m=!1;if(!p||h>l[p-1].to){let S=_e[h-1];S!=c&&(d=!1,m=S==16)}let v=!d&&c==1?[]:null,x=d?r:r+1,b=h;e:for(;;)if(p&&b==l[p-1].to){if(m)break e;let S=l[--p];if(!d)for(let C=S.from,P=p;;){if(C==e)break e;if(P&&l[P-1].to==C)C=l[--P].from;else{if(_e[C-1]==c)break e;break}}if(v)v.push(S);else{S.to<h&&a.push(new ei(S.to,h,x));let C=S.direction==Li!=!(x%2);Tf(n,C?r+1:r,s,S.inner,S.from,S.to,a),h=S.from}b=S.from}else{if(b==e||(d?_e[b-1]!=c:_e[b-1]==c))break;b--}v?Df(n,b,h,r+1,s,v,a):b<h&&a.push(new ei(b,h,x)),h=b}}function Tf(n,e,t,r,s,l,a){let c=e%2?2:1;yC(n,s,l,r,c),vC(n,s,l,r,c),xC(s,l,r,c),Df(n,s,l,e,t,r,a)}function kC(n,e,t){if(!n)return[new ei(0,0,e==kd?1:0)];if(e==Li&&!t.length&&!mC.test(n))return Uv(n.length);if(t.length)for(;n.length>_e.length;)_e[_e.length]=256;let r=[],s=e==Li?0:1;return Tf(n,s,s,t,0,n.length,r),r}function Uv(n){return[new ei(0,n,0)]}let Xv="";function wC(n,e,t,r,s){var l;let a=r.head-n.from,c=ei.find(e,a,(l=r.bidiLevel)!==null&&l!==void 0?l:-1,r.assoc),h=e[c],p=h.side(s,t);if(a==p){let v=c+=s?1:-1;if(v<0||v>=e.length)return null;h=e[c=v],a=h.side(!s,t),p=h.side(s,t)}let d=Wt(n.text,a,h.forward(s,t));(d<h.from||d>h.to)&&(d=p),Xv=n.text.slice(Math.min(a,d),Math.max(a,d));let m=c==(s?e.length-1:0)?null:e[c+(s?1:-1)];return m&&d==p&&m.level+(s?0:1)<h.level?ie.cursor(m.side(!s,t)+n.from,m.forward(s,t)?1:-1,m.level):ie.cursor(d+n.from,h.forward(s,t)?-1:1,h.level)}function bC(n,e,t){for(let r=e;r<t;r++){let s=Qv(n.charCodeAt(r));if(s==1)return Li;if(s==2||s==4)return kd}return Li}const Kv=ke.define(),qv=ke.define(),Yv=ke.define(),Gv=ke.define(),Lf=ke.define(),Jv=ke.define(),Zv=ke.define(),wd=ke.define(),bd=ke.define(),ex=ke.define({combine:n=>n.some(e=>e)}),tx=ke.define({combine:n=>n.some(e=>e)}),nx=ke.define();class ms{constructor(e,t="nearest",r="nearest",s=5,l=5,a=!1){this.range=e,this.y=t,this.x=r,this.yMargin=s,this.xMargin=l,this.isSnapshot=a}map(e){return e.empty?this:new ms(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new ms(ie.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Ma=gt.define({map:(n,e)=>n.map(e)}),rx=gt.define();function ir(n,e,t){let r=n.facet(Gv);r.length?r[0](e):window.onerror&&window.onerror(String(e),t,void 0,void 0,e)||(t?console.error(t+":",e):console.error(e))}const wr=ke.define({combine:n=>n.length?n[0]:!0});let SC=0;const us=ke.define({combine(n){return n.filter((e,t)=>{for(let r=0;r<t;r++)if(n[r].plugin==e.plugin)return!1;return!0})}});class Hn{constructor(e,t,r,s,l){this.id=e,this.create=t,this.domEventHandlers=r,this.domEventObservers=s,this.baseExtensions=l(this),this.extension=this.baseExtensions.concat(us.of({plugin:this,arg:void 0}))}of(e){return this.baseExtensions.concat(us.of({plugin:this,arg:e}))}static define(e,t){const{eventHandlers:r,eventObservers:s,provide:l,decorations:a}=t||{};return new Hn(SC++,e,r,s,c=>{let h=[];return a&&h.push(Yo.of(p=>{let d=p.plugin(c);return d?a(d):et.none})),l&&h.push(l(c)),h})}static fromClass(e,t){return Hn.define((r,s)=>new e(r,s),t)}}class Bh{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}get plugin(){return this.spec&&this.spec.plugin}update(e){if(this.value){if(this.mustUpdate){let t=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(t)}catch(r){if(ir(t.state,r,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch{}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.plugin.create(e,this.spec.arg)}catch(t){ir(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(!((t=this.value)===null||t===void 0)&&t.destroy)try{this.value.destroy()}catch(r){ir(e.state,r,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const ix=ke.define(),Sd=ke.define(),Yo=ke.define(),sx=ke.define(),ul=ke.define(),ox=ke.define();function u0(n,e){let t=n.state.facet(ox);if(!t.length)return t;let r=t.map(l=>l instanceof Function?l(n):l),s=[];return Ie.spans(r,e.from,e.to,{point(){},span(l,a,c,h){let p=l-e.from,d=a-e.from,m=s;for(let v=c.length-1;v>=0;v--,h--){let x=c[v].spec.bidiIsolate,b;if(x==null&&(x=bC(e.text,p,d)),h>0&&m.length&&(b=m[m.length-1]).to==p&&b.direction==x)b.to=d,m=b.inner;else{let S={from:p,to:d,direction:x,inner:[]};m.push(S),m=S.inner}}}}),s}const lx=ke.define();function ax(n){let e=0,t=0,r=0,s=0;for(let l of n.state.facet(lx)){let a=l(n);a&&(a.left!=null&&(e=Math.max(e,a.left)),a.right!=null&&(t=Math.max(t,a.right)),a.top!=null&&(r=Math.max(r,a.top)),a.bottom!=null&&(s=Math.max(s,a.bottom)))}return{left:e,right:t,top:r,bottom:s}}const Co=ke.define();class Sn{constructor(e,t,r,s){this.fromA=e,this.toA=t,this.fromB=r,this.toB=s}join(e){return new Sn(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,r=this;for(;t>0;t--){let s=e[t-1];if(!(s.fromA>r.toA)){if(s.toA<r.fromA)break;r=r.join(s),e.splice(t-1,1)}}return e.splice(t,0,r),e}static extendWithRanges(e,t){if(t.length==0)return e;let r=[];for(let s=0,l=0,a=0,c=0;;s++){let h=s==e.length?null:e[s],p=a-c,d=h?h.fromB:1e9;for(;l<t.length&&t[l]<d;){let m=t[l],v=t[l+1],x=Math.max(c,m),b=Math.min(d,v);if(x<=b&&new Sn(x+p,b+p,x,b).addToSet(r),v>d)break;l+=2}if(!h)return r;new Sn(h.fromA,h.toA,h.fromB,h.toB).addToSet(r),a=h.toA,c=h.toB}}}class du{constructor(e,t,r){this.view=e,this.state=t,this.transactions=r,this.flags=0,this.startState=e.state,this.changes=kt.empty(this.startState.doc.length);for(let l of r)this.changes=this.changes.compose(l.changes);let s=[];this.changes.iterChangedRanges((l,a,c,h)=>s.push(new Sn(l,a,c,h))),this.changedRanges=s}static create(e,t,r){return new du(e,t,r)}get viewportChanged(){return(this.flags&4)>0}get viewportMoved(){return(this.flags&8)>0}get heightChanged(){return(this.flags&2)>0}get geometryChanged(){return this.docChanged||(this.flags&18)>0}get focusChanged(){return(this.flags&1)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some(e=>e.selection)}get empty(){return this.flags==0&&this.transactions.length==0}}class c0 extends ze{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=et.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new at],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Sn(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let r=e.changedRanges;this.minWidth>0&&r.length&&(r.every(({fromA:p,toA:d})=>d<this.minWidthFrom||p>this.minWidthTo)?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let s=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&(!((t=this.domChanged)===null||t===void 0)&&t.newSel?s=this.domChanged.newSel.head:!RC(e.changes,this.hasComposition)&&!e.selectionSet&&(s=e.state.selection.main.head));let l=s>-1?CC(this.view,e.changes,s):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:p,to:d}=this.hasComposition;r=new Sn(p,d,e.changes.mapPos(p,-1),e.changes.mapPos(d,1)).addToSet(r.slice())}this.hasComposition=l?{from:l.range.fromB,to:l.range.toB}:null,(ae.ie||ae.chrome)&&!l&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let a=this.decorations,c=this.updateDeco(),h=AC(a,c,e.changes);return r=Sn.extendWithRanges(r,h),!(this.flags&7)&&r.length==0?!1:(this.updateInner(r,e.startState.doc.length,l),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,r){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,r);let{observer:s}=this.view;s.ignore(()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let a=ae.chrome||ae.ios?{node:s.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,a),this.flags&=-8,a&&(a.written||s.selectionRange.focusNode!=a.node)&&(this.forceSelection=!0),this.dom.style.height=""}),this.markedForComposition.forEach(a=>a.flags&=-9);let l=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let a of this.children)a instanceof Or&&a.widget instanceof Rf&&l.push(a.dom);s.updateGaps(l)}updateChildren(e,t,r){let s=r?r.range.addToSet(e.slice()):e,l=this.childCursor(t);for(let a=s.length-1;;a--){let c=a>=0?s[a]:null;if(!c)break;let{fromA:h,toA:p,fromB:d,toB:m}=c,v,x,b,S;if(r&&r.range.fromB<m&&r.range.toB>d){let B=Io.build(this.view.state.doc,d,r.range.fromB,this.decorations,this.dynamicDecorationMap),T=Io.build(this.view.state.doc,r.range.toB,m,this.decorations,this.dynamicDecorationMap);x=B.breakAtStart,b=B.openStart,S=T.openEnd;let F=this.compositionView(r);T.breakAtStart?F.breakAfter=1:T.content.length&&F.merge(F.length,F.length,T.content[0],!1,T.openStart,0)&&(F.breakAfter=T.content[0].breakAfter,T.content.shift()),B.content.length&&F.merge(0,0,B.content[B.content.length-1],!0,0,B.openEnd)&&B.content.pop(),v=B.content.concat(F).concat(T.content)}else({content:v,breakAtStart:x,openStart:b,openEnd:S}=Io.build(this.view.state.doc,d,m,this.decorations,this.dynamicDecorationMap));let{i:C,off:P}=l.findPos(p,1),{i:N,off:D}=l.findPos(h,-1);Bv(this,N,D,C,P,v,x,b,S)}r&&this.fixCompositionDOM(r)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let r of t.effects)r.is(rx)&&(this.editContextFormatting=r.value)}compositionView(e){let t=new _n(e.text.nodeValue);t.flags|=8;for(let{deco:s}of e.marks)t=new Cr(s,[t],t.length);let r=new at;return r.append(t,0),r}fixCompositionDOM(e){let t=(l,a)=>{a.flags|=8|(a.children.some(h=>h.flags&7)?1:0),this.markedForComposition.add(a);let c=ze.get(l);c&&c!=a&&(c.dom=null),a.setDOM(l)},r=this.childPos(e.range.fromB,1),s=this.children[r.i];t(e.line,s);for(let l=e.marks.length-1;l>=-1;l--)r=s.childPos(r.off,1),s=s.children[r.i],t(l>=0?e.marks[l].node:e.text,s)}updateSelection(e=!1,t=!1){(e||!this.view.observer.selectionRange.focusNode)&&this.view.observer.readSelectionRange();let r=this.view.root.activeElement,s=r==this.dom,l=!s&&!(this.view.state.facet(wr)||this.dom.tabIndex>-1)&&Ka(this.dom,this.view.observer.selectionRange)&&!(r&&this.dom.contains(r));if(!(s||t||l))return;let a=this.forceSelection;this.forceSelection=!1;let c=this.view.state.selection.main,h=this.moveToLine(this.domAtPos(c.anchor)),p=c.empty?h:this.moveToLine(this.domAtPos(c.head));if(ae.gecko&&c.empty&&!this.hasComposition&&OC(h)){let m=document.createTextNode("");this.view.observer.ignore(()=>h.node.insertBefore(m,h.node.childNodes[h.offset]||null)),h=p=new It(m,0),a=!0}let d=this.view.observer.selectionRange;(a||!d.focusNode||(!jo(h.node,h.offset,d.anchorNode,d.anchorOffset)||!jo(p.node,p.offset,d.focusNode,d.focusOffset))&&!this.suppressWidgetCursorChange(d,c))&&(this.view.observer.ignore(()=>{ae.android&&ae.chrome&&this.dom.contains(d.focusNode)&&MC(d.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let m=Ko(this.view.root);if(m)if(c.empty){if(ae.gecko){let v=PC(h.node,h.offset);if(v&&v!=3){let x=(v==1?Lv:jv)(h.node,h.offset);x&&(h=new It(x.node,x.offset))}}m.collapse(h.node,h.offset),c.bidiLevel!=null&&m.caretBidiLevel!==void 0&&(m.caretBidiLevel=c.bidiLevel)}else if(m.extend){m.collapse(h.node,h.offset);try{m.extend(p.node,p.offset)}catch{}}else{let v=document.createRange();c.anchor>c.head&&([h,p]=[p,h]),v.setEnd(p.node,p.offset),v.setStart(h.node,h.offset),m.removeAllRanges(),m.addRange(v)}l&&this.view.root.activeElement==this.dom&&(this.dom.blur(),r&&r.focus())}),this.view.observer.setSelectionRange(h,p)),this.impreciseAnchor=h.precise?null:new It(d.anchorNode,d.anchorOffset),this.impreciseHead=p.precise?null:new It(d.focusNode,d.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&jo(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,r=Ko(e.root),{anchorNode:s,anchorOffset:l}=e.observer.selectionRange;if(!r||!t.empty||!t.assoc||!r.modify)return;let a=at.find(this,t.head);if(!a)return;let c=a.posAtStart;if(t.head==c||t.head==c+a.length)return;let h=this.coordsAt(t.head,-1),p=this.coordsAt(t.head,1);if(!h||!p||h.bottom>p.top)return;let d=this.domAtPos(t.head+t.assoc);r.collapse(d.node,d.offset),r.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let m=e.observer.selectionRange;e.docView.posFromDOM(m.anchorNode,m.anchorOffset)!=t.from&&r.collapse(s,l)}moveToLine(e){let t=this.dom,r;if(e.node!=t)return e;for(let s=e.offset;!r&&s<t.childNodes.length;s++){let l=ze.get(t.childNodes[s]);l instanceof at&&(r=l.domAtPos(0))}for(let s=e.offset-1;!r&&s>=0;s--){let l=ze.get(t.childNodes[s]);l instanceof at&&(r=l.domAtPos(l.length))}return r?new It(r.node,r.offset,!0):e}nearest(e){for(let t=e;t;){let r=ze.get(t);if(r&&r.rootView==this)return r;t=t.parentNode}return null}posFromDOM(e,t){let r=this.nearest(e);if(!r)throw new RangeError("Trying to find position for a DOM position outside of the document");return r.localPosFromDOM(e,t)+r.posAtStart}domAtPos(e){let{i:t,off:r}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let s=this.children[t];if(r<s.length||s instanceof at)break;t++,r=0}return this.children[t].domAtPos(r)}coordsAt(e,t){let r=null,s=0;for(let l=this.length,a=this.children.length-1;a>=0;a--){let c=this.children[a],h=l-c.breakAfter,p=h-c.length;if(h<e)break;if(p<=e&&(p<e||c.covers(-1))&&(h>e||c.covers(1))&&(!r||c instanceof at&&!(r instanceof at&&t>=0)))r=c,s=p;else if(r&&p==e&&h==e&&c instanceof Or&&Math.abs(t)<2){if(c.deco.startSide<0)break;a&&(r=null)}l=p}return r?r.coordsAt(e-s,t):null}coordsForChar(e){let{i:t,off:r}=this.childPos(e,1),s=this.children[t];if(!(s instanceof at))return null;for(;s.children.length;){let{i:c,off:h}=s.childPos(r,1);for(;;c++){if(c==s.children.length)return null;if((s=s.children[c]).length)break}r=h}if(!(s instanceof _n))return null;let l=Wt(s.text,r);if(l==r)return null;let a=Ti(s.dom,r,l).getClientRects();for(let c=0;c<a.length;c++){let h=a[c];if(c==a.length-1||h.top<h.bottom&&h.left<h.right)return h}return null}measureVisibleLineHeights(e){let t=[],{from:r,to:s}=e,l=this.view.contentDOM.clientWidth,a=l>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,c=-1,h=this.view.textDirection==Ze.LTR;for(let p=0,d=0;d<this.children.length;d++){let m=this.children[d],v=p+m.length;if(v>s)break;if(p>=r){let x=m.dom.getBoundingClientRect();if(t.push(x.height),a){let b=m.dom.lastChild,S=b?qo(b):[];if(S.length){let C=S[S.length-1],P=h?C.right-x.left:x.right-C.left;P>c&&(c=P,this.minWidth=l,this.minWidthFrom=p,this.minWidthTo=v)}}}p=v+m.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return getComputedStyle(this.children[t].dom).direction=="rtl"?Ze.RTL:Ze.LTR}measureTextSize(){for(let l of this.children)if(l instanceof at){let a=l.measureTextSize();if(a)return a}let e=document.createElement("div"),t,r,s;return e.className="cm-line",e.style.width="99999px",e.style.position="absolute",e.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore(()=>{this.dom.appendChild(e);let l=qo(e.firstChild)[0];t=e.getBoundingClientRect().height,r=l?l.width/27:7,s=l?l.height:t,e.remove()}),{lineHeight:t,charWidth:r,textHeight:s}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new Iv(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let r=0,s=0;;s++){let l=s==t.viewports.length?null:t.viewports[s],a=l?l.from-1:this.length;if(a>r){let c=(t.lineBlockAt(a).bottom-t.lineBlockAt(r).top)/this.view.scaleY;e.push(et.replace({widget:new Rf(c),block:!0,inclusive:!0,isBlockGap:!0}).range(r,a))}if(!l)break;r=l.to+1}return et.set(e)}updateDeco(){let e=1,t=this.view.state.facet(Yo).map(l=>(this.dynamicDecorationMap[e++]=typeof l=="function")?l(this.view):l),r=!1,s=this.view.state.facet(sx).map((l,a)=>{let c=typeof l=="function";return c&&(r=!0),c?l(this.view):l});for(s.length&&(this.dynamicDecorationMap[e++]=r,t.push(Ie.join(s))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];e<this.decorations.length;)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let p=this.view.viewState.lineBlockAt(e.range.head);this.view.scrollDOM.scrollTop=p.top-e.yMargin,this.view.scrollDOM.scrollLeft=e.xMargin;return}for(let p of this.view.state.facet(nx))try{if(p(this.view,e.range,e))return!0}catch(d){ir(this.view.state,d,"scroll handler")}let{range:t}=e,r=this.coordsAt(t.head,t.empty?t.assoc:t.head>t.anchor?-1:1),s;if(!r)return;!t.empty&&(s=this.coordsAt(t.anchor,t.anchor>t.head?-1:1))&&(r={left:Math.min(r.left,s.left),top:Math.min(r.top,s.top),right:Math.max(r.right,s.right),bottom:Math.max(r.bottom,s.bottom)});let l=ax(this.view),a={left:r.left-l.left,top:r.top-l.top,right:r.right+l.right,bottom:r.bottom+l.bottom},{offsetWidth:c,offsetHeight:h}=this.view.scrollDOM;rC(this.view.scrollDOM,a,t.head<t.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,c),-c),Math.max(Math.min(e.yMargin,h),-h),this.view.textDirection==Ze.LTR)}lineHasWidget(e){let{i:t}=this.childCursor().findPos(e);if(t==this.children.length)return!1;let r=s=>s instanceof Zr||s.children.some(r);return r(this.children[t])}}function OC(n){return n.node.nodeType==1&&n.node.firstChild&&(n.offset==0||n.node.childNodes[n.offset-1].contentEditable=="false")&&(n.offset==n.node.childNodes.length||n.node.childNodes[n.offset].contentEditable=="false")}function ux(n,e){let t=n.observer.selectionRange;if(!t.focusNode)return null;let r=Lv(t.focusNode,t.focusOffset),s=jv(t.focusNode,t.focusOffset),l=r||s;if(s&&r&&s.node!=r.node){let c=ze.get(s.node);if(!c||c instanceof _n&&c.text!=s.node.nodeValue)l=s;else if(n.docView.lastCompositionAfterCursor){let h=ze.get(r.node);!h||h instanceof _n&&h.text!=r.node.nodeValue||(l=s)}}if(n.docView.lastCompositionAfterCursor=l!=r,!l)return null;let a=e-l.offset;return{from:a,to:a+l.node.nodeValue.length,node:l.node}}function CC(n,e,t){let r=ux(n,t);if(!r)return null;let{node:s,from:l,to:a}=r,c=s.nodeValue;if(/[\n\r]/.test(c)||n.state.doc.sliceString(r.from,r.to)!=c)return null;let h=e.invertedDesc,p=new Sn(h.mapPos(l),h.mapPos(a),l,a),d=[];for(let m=s.parentNode;;m=m.parentNode){let v=ze.get(m);if(v instanceof Cr)d.push({node:m,deco:v.mark});else{if(v instanceof at||m.nodeName=="DIV"&&m.parentNode==n.contentDOM)return{range:p,text:s,marks:d,line:m};if(m!=n.contentDOM)d.push({node:m,deco:new ll({inclusive:!0,attributes:fC(m),tagName:m.tagName.toLowerCase()})});else return null}}}function PC(n,e){return n.nodeType!=1?0:(e&&n.childNodes[e-1].contentEditable=="false"?1:0)|(e<n.childNodes.length&&n.childNodes[e].contentEditable=="false"?2:0)}let EC=class{constructor(){this.changes=[]}compareRange(e,t){qa(e,t,this.changes)}comparePoint(e,t){qa(e,t,this.changes)}boundChange(e){qa(e,e,this.changes)}};function AC(n,e,t){let r=new EC;return Ie.compare(n,e,t,r),r.changes}function MC(n,e){for(let t=n;t&&t!=e;t=t.assignedSlot||t.parentNode)if(t.nodeType==1&&t.contentEditable=="false")return!0;return!1}function RC(n,e){let t=!1;return e&&n.iterChangedRanges((r,s)=>{r<e.to&&s>e.from&&(t=!0)}),t}function NC(n,e,t=1){let r=n.charCategorizer(e),s=n.doc.lineAt(e),l=e-s.from;if(s.length==0)return ie.cursor(e);l==0?t=1:l==s.length&&(t=-1);let a=l,c=l;t<0?a=Wt(s.text,l,!1):c=Wt(s.text,l);let h=r(s.text.slice(a,c));for(;a>0;){let p=Wt(s.text,a,!1);if(r(s.text.slice(p,a))!=h)break;a=p}for(;c<s.length;){let p=Wt(s.text,c);if(r(s.text.slice(c,p))!=h)break;c=p}return ie.range(a+s.from,c+s.from)}function DC(n,e){return e.left>n?e.left-n:Math.max(0,n-e.right)}function TC(n,e){return e.top>n?e.top-n:Math.max(0,n-e.bottom)}function zh(n,e){return n.top<e.bottom-1&&n.bottom>e.top+1}function h0(n,e){return e<n.top?{top:e,left:n.left,right:n.right,bottom:n.bottom}:n}function f0(n,e){return e>n.bottom?{top:n.top,left:n.left,right:n.right,bottom:e}:n}function jf(n,e,t){let r,s,l,a,c=!1,h,p,d,m;for(let b=n.firstChild;b;b=b.nextSibling){let S=qo(b);for(let C=0;C<S.length;C++){let P=S[C];s&&zh(s,P)&&(P=h0(f0(P,s.bottom),s.top));let N=DC(e,P),D=TC(t,P);if(N==0&&D==0)return b.nodeType==3?d0(b,e,t):jf(b,e,t);(!r||a>D||a==D&&l>N)&&(r=b,s=P,l=N,a=D,c=N?e<P.left?C>0:C<S.length-1:!0),N==0?t>P.bottom&&(!d||d.bottom<P.bottom)?(h=b,d=P):t<P.top&&(!m||m.top>P.top)&&(p=b,m=P):d&&zh(d,P)?d=f0(d,P.bottom):m&&zh(m,P)&&(m=h0(m,P.top))}}if(d&&d.bottom>=t?(r=h,s=d):m&&m.top<=t&&(r=p,s=m),!r)return{node:n,offset:0};let v=Math.max(s.left,Math.min(s.right,e));if(r.nodeType==3)return d0(r,v,t);if(c&&r.contentEditable!="false")return jf(r,v,t);let x=Array.prototype.indexOf.call(n.childNodes,r)+(e>=(s.left+s.right)/2?1:0);return{node:n,offset:x}}function d0(n,e,t){let r=n.nodeValue.length,s=-1,l=1e9,a=0;for(let c=0;c<r;c++){let h=Ti(n,c,c+1).getClientRects();for(let p=0;p<h.length;p++){let d=h[p];if(d.top==d.bottom)continue;a||(a=e-d.left);let m=(d.top>t?d.top-t:t-d.bottom)-1;if(d.left-1<=e&&d.right+1>=e&&m<l){let v=e>=(d.left+d.right)/2,x=v;if(ae.chrome||ae.gecko){let b=Ti(n,c).getBoundingClientRect();Math.abs(b.left-d.right)<.1&&(x=!v)}if(m<=0)return{node:n,offset:c+(x?1:0)};s=c+(x?1:0),l=m}}}return{node:n,offset:s>-1?s:a>0?n.nodeValue.length:0}}function cx(n,e,t,r=-1){var s,l;let a=n.contentDOM.getBoundingClientRect(),c=a.top+n.viewState.paddingTop,h,{docHeight:p}=n.viewState,{x:d,y:m}=e,v=m-c;if(v<0)return 0;if(v>p)return n.state.doc.length;for(let B=n.viewState.heightOracle.textHeight/2,T=!1;h=n.elementAtHeight(v),h.type!=Qt.Text;)for(;v=r>0?h.bottom+B:h.top-B,!(v>=0&&v<=p);){if(T)return t?null:0;T=!0,r=-r}m=c+v;let x=h.from;if(x<n.viewport.from)return n.viewport.from==0?0:t?null:p0(n,a,h,d,m);if(x>n.viewport.to)return n.viewport.to==n.state.doc.length?n.state.doc.length:t?null:p0(n,a,h,d,m);let b=n.dom.ownerDocument,S=n.root.elementFromPoint?n.root:b,C=S.elementFromPoint(d,m);C&&!n.contentDOM.contains(C)&&(C=null),C||(d=Math.max(a.left+1,Math.min(a.right-1,d)),C=S.elementFromPoint(d,m),C&&!n.contentDOM.contains(C)&&(C=null));let P,N=-1;if(C&&((s=n.docView.nearest(C))===null||s===void 0?void 0:s.isEditable)!=!1){if(b.caretPositionFromPoint){let B=b.caretPositionFromPoint(d,m);B&&({offsetNode:P,offset:N}=B)}else if(b.caretRangeFromPoint){let B=b.caretRangeFromPoint(d,m);B&&({startContainer:P,startOffset:N}=B)}P&&(!n.contentDOM.contains(P)||ae.safari&&LC(P,N,d)||ae.chrome&&jC(P,N,d))&&(P=void 0),P&&(N=Math.min(or(P),N))}if(!P||!n.docView.dom.contains(P)){let B=at.find(n.docView,x);if(!B)return v>h.top+h.height/2?h.to:h.from;({node:P,offset:N}=jf(B.dom,d,m))}let D=n.docView.nearest(P);if(!D)return null;if(D.isWidget&&((l=D.dom)===null||l===void 0?void 0:l.nodeType)==1){let B=D.dom.getBoundingClientRect();return e.y<B.top||e.y<=B.bottom&&e.x<=(B.left+B.right)/2?D.posAtStart:D.posAtEnd}else return D.localPosFromDOM(P,N)+D.posAtStart}function p0(n,e,t,r,s){let l=Math.round((r-e.left)*n.defaultCharacterWidth);if(n.lineWrapping&&t.height>n.defaultLineHeight*1.5){let c=n.viewState.heightOracle.textHeight,h=Math.floor((s-t.top-(n.defaultLineHeight-c)*.5)/c);l+=h*n.viewState.heightOracle.lineLength}let a=n.state.sliceDoc(t.from,t.to);return t.from+YO(a,l,n.state.tabSize)}function hx(n,e,t){let r,s=n;if(n.nodeType!=3||e!=(r=n.nodeValue.length))return!1;for(;;){let l=s.nextSibling;if(l){if(l.nodeName=="BR")break;return!1}else{let a=s.parentNode;if(!a||a.nodeName=="DIV")break;s=a}}return Ti(n,r-1,r).getBoundingClientRect().right>t}function LC(n,e,t){return hx(n,e,t)}function jC(n,e,t){if(e!=0)return hx(n,e,t);for(let s=n;;){let l=s.parentNode;if(!l||l.nodeType!=1||l.firstChild!=s)return!1;if(l.classList.contains("cm-line"))break;s=l}let r=n.nodeType==1?n.getBoundingClientRect():Ti(n,0,Math.max(n.nodeValue.length,1)).getBoundingClientRect();return t-r.left>5}function If(n,e,t){let r=n.lineBlockAt(e);if(Array.isArray(r.type)){let s;for(let l of r.type){if(l.from>e)break;if(!(l.to<e)){if(l.from<e&&l.to>e)return l;(!s||l.type==Qt.Text&&(s.type!=l.type||(t<0?l.from<e:l.to>e)))&&(s=l)}}return s||r}return r}function IC(n,e,t,r){let s=If(n,e.head,e.assoc||-1),l=!r||s.type!=Qt.Text||!(n.lineWrapping||s.widgetLineBreaks)?null:n.coordsAtPos(e.assoc<0&&e.head>s.from?e.head-1:e.head);if(l){let a=n.dom.getBoundingClientRect(),c=n.textDirectionAt(s.from),h=n.posAtCoords({x:t==(c==Ze.LTR)?a.right-1:a.left+1,y:(l.top+l.bottom)/2});if(h!=null)return ie.cursor(h,t?-1:1)}return ie.cursor(t?s.to:s.from,t?-1:1)}function g0(n,e,t,r){let s=n.state.doc.lineAt(e.head),l=n.bidiSpans(s),a=n.textDirectionAt(s.from);for(let c=e,h=null;;){let p=wC(s,l,a,c,t),d=Xv;if(!p){if(s.number==(t?n.state.doc.lines:1))return c;d=`
`,s=n.state.doc.line(s.number+(t?1:-1)),l=n.bidiSpans(s),p=n.visualLineSide(s,!t)}if(h){if(!h(d))return c}else{if(!r)return p;h=r(d)}c=p}}function BC(n,e,t){let r=n.state.charCategorizer(e),s=r(t);return l=>{let a=r(l);return s==br.Space&&(s=a),s==a}}function zC(n,e,t,r){let s=e.head,l=t?1:-1;if(s==(t?n.state.doc.length:0))return ie.cursor(s,e.assoc);let a=e.goalColumn,c,h=n.contentDOM.getBoundingClientRect(),p=n.coordsAtPos(s,e.assoc||-1),d=n.documentTop;if(p)a==null&&(a=p.left-h.left),c=l<0?p.top:p.bottom;else{let x=n.viewState.lineBlockAt(s);a==null&&(a=Math.min(h.right-h.left,n.defaultCharacterWidth*(s-x.from))),c=(l<0?x.top:x.bottom)+d}let m=h.left+a,v=r??n.viewState.heightOracle.textHeight>>1;for(let x=0;;x+=10){let b=c+(v+x)*l,S=cx(n,{x:m,y:b},!1,l);if(b<h.top||b>h.bottom||(l<0?S<s:S>s)){let C=n.docView.coordsForChar(S),P=!C||b<C.top?-1:1;return ie.cursor(S,P,void 0,a)}}}function Bo(n,e,t){for(;;){let r=0;for(let s of n)s.between(e-1,e+1,(l,a,c)=>{if(e>l&&e<a){let h=r||t||(e-l<a-e?-1:1);e=h<0?l:a,r=h}});if(!r)return e}}function fx(n,e){let t=null;for(let r=0;r<e.ranges.length;r++){let s=e.ranges[r],l=null;if(s.empty){let a=Bo(n,s.from,0);a!=s.from&&(l=ie.cursor(a,-1))}else{let a=Bo(n,s.from,-1),c=Bo(n,s.to,1);(a!=s.from||c!=s.to)&&(l=ie.range(s.from==s.anchor?a:c,s.from==s.head?a:c))}l&&(t||(t=e.ranges.slice()),t[r]=l)}return t?ie.create(t,e.mainIndex):e}function Fh(n,e,t){let r=Bo(n.state.facet(ul).map(s=>s(n)),t.from,e.head>t.from?-1:1);return r==t.from?t:ie.cursor(r,r<t.from?1:-1)}const Po="";class FC{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(je.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Po}readRange(e,t){if(!e)return this;let r=e.parentNode;for(let s=e;;){this.findPointBefore(r,s);let l=this.text.length;this.readNode(s);let a=s.nextSibling;if(a==t)break;let c=ze.get(s),h=ze.get(a);(c&&h?c.breakAfter:(c?c.breakAfter:hu(s))||hu(a)&&(s.nodeName!="BR"||s.cmIgnore)&&this.text.length>l)&&!HC(a,t)&&this.lineBreak(),s=a}return this.findPointBefore(r,t),this}readTextNode(e){let t=e.nodeValue;for(let r of this.points)r.node==e&&(r.pos=this.text.length+Math.min(r.offset,t.length));for(let r=0,s=this.lineSeparator?null:/\r\n?|\n/g;;){let l=-1,a=1,c;if(this.lineSeparator?(l=t.indexOf(this.lineSeparator,r),a=this.lineSeparator.length):(c=s.exec(t))&&(l=c.index,a=c[0].length),this.append(t.slice(r,l<0?t.length:l)),l<0)break;if(this.lineBreak(),a>1)for(let h of this.points)h.node==e&&h.pos>this.text.length&&(h.pos-=a-1);r=l+a}}readNode(e){if(e.cmIgnore)return;let t=ze.get(e),r=t&&t.overrideDOMText;if(r!=null){this.findPointInside(e,r.length);for(let s=r.iter();!s.next().done;)s.lineBreak?this.lineBreak():this.append(s.value)}else e.nodeType==3?this.readTextNode(e):e.nodeName=="BR"?e.nextSibling&&this.lineBreak():e.nodeType==1&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let r of this.points)r.node==e&&e.childNodes[r.offset]==t&&(r.pos=this.text.length)}findPointInside(e,t){for(let r of this.points)(e.nodeType==3?r.node==e:e.contains(r.node))&&(r.pos=this.text.length+(_C(e,r.node,r.offset)?t:0))}}function _C(n,e,t){for(;;){if(!e||t<or(e))return!1;if(e==n)return!0;t=Di(e)+1,e=e.parentNode}}function HC(n,e){let t;for(;!(n==e||!n);n=n.nextSibling){let r=ze.get(n);if(!(r!=null&&r.isWidget||n.cmIgnore))return!1;r&&(t||(t=[])).push(r)}if(t)for(let r of t){let s=r.overrideDOMText;if(s!=null&&s.length)return!1}return!0}class m0{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class VC{constructor(e,t,r,s){this.typeOver=s,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:l,impreciseAnchor:a}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,r,0))){let c=l||a?[]:QC(e),h=new FC(c,e.state);h.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=h.text,this.newSel=$C(c,this.bounds.from)}else{let c=e.observer.selectionRange,h=l&&l.node==c.focusNode&&l.offset==c.focusOffset||!Ef(e.contentDOM,c.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(c.focusNode,c.focusOffset),p=a&&a.node==c.anchorNode&&a.offset==c.anchorOffset||!Ef(e.contentDOM,c.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(c.anchorNode,c.anchorOffset),d=e.viewport;if((ae.ios||ae.chrome)&&e.state.selection.main.empty&&h!=p&&(d.from>0||d.to<e.state.doc.length)){let m=Math.min(h,p),v=Math.max(h,p),x=d.from-m,b=d.to-v;(x==0||x==1||m==0)&&(b==0||b==-1||v==e.state.doc.length)&&(h=0,p=e.state.doc.length)}e.inputState.composing>-1&&e.state.selection.ranges.length>1?this.newSel=e.state.selection.replaceRange(ie.range(p,h)):this.newSel=ie.single(p,h)}}}function dx(n,e){let t,{newSel:r}=e,s=n.state.selection.main,l=n.inputState.lastKeyTime>Date.now()-100?n.inputState.lastKeyCode:-1;if(e.bounds){let{from:a,to:c}=e.bounds,h=s.from,p=null;(l===8||ae.android&&e.text.length<c-a)&&(h=s.to,p="end");let d=px(n.state.doc.sliceString(a,c,Po),e.text,h-a,p);d&&(ae.chrome&&l==13&&d.toB==d.from+2&&e.text.slice(d.from,d.toB)==Po+Po&&d.toB--,t={from:a+d.from,to:a+d.toA,insert:De.of(e.text.slice(d.from,d.toB).split(Po))})}else r&&(!n.hasFocus&&n.state.facet(wr)||r.main.eq(s))&&(r=null);if(!t&&!r)return!1;if(!t&&e.typeOver&&!s.empty&&r&&r.main.empty?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,s.to)}:(ae.mac||ae.android)&&t&&t.from==t.to&&t.from==s.head-1&&/^\. ?$/.test(t.insert.toString())&&n.contentDOM.getAttribute("autocorrect")=="off"?(r&&t.insert.length==2&&(r=ie.single(r.main.anchor-1,r.main.head-1)),t={from:t.from,to:t.to,insert:De.of([t.insert.toString().replace("."," ")])}):t&&t.from>=s.from&&t.to<=s.to&&(t.from!=s.from||t.to!=s.to)&&s.to-s.from-(t.to-t.from)<=4?t={from:s.from,to:s.to,insert:n.state.doc.slice(s.from,t.from).append(t.insert).append(n.state.doc.slice(t.to,s.to))}:n.state.doc.lineAt(s.from).to<s.to&&n.docView.lineHasWidget(s.to)&&n.inputState.insertingTextAt>Date.now()-50?t={from:s.from,to:s.to,insert:n.state.toText(n.inputState.insertingText)}:ae.chrome&&t&&t.from==t.to&&t.from==s.head&&t.insert.toString()==`
 `&&n.lineWrapping&&(r&&(r=ie.single(r.main.anchor-1,r.main.head-1)),t={from:s.from,to:s.to,insert:De.of([" "])}),t)return Od(n,t,r,l);if(r&&!r.main.eq(s)){let a=!1,c="select";return n.inputState.lastSelectionTime>Date.now()-50&&(n.inputState.lastSelectionOrigin=="select"&&(a=!0),c=n.inputState.lastSelectionOrigin,c=="select.pointer"&&(r=fx(n.state.facet(ul).map(h=>h(n)),r))),n.dispatch({selection:r,scrollIntoView:a,userEvent:c}),!0}else return!1}function Od(n,e,t,r=-1){if(ae.ios&&n.inputState.flushIOSKey(e))return!0;let s=n.state.selection.main;if(ae.android&&(e.to==s.to&&(e.from==s.from||e.from==s.from-1&&n.state.sliceDoc(e.from,s.from)==" ")&&e.insert.length==1&&e.insert.lines==2&&gs(n.contentDOM,"Enter",13)||(e.from==s.from-1&&e.to==s.to&&e.insert.length==0||r==8&&e.insert.length<e.to-e.from&&e.to>s.head)&&gs(n.contentDOM,"Backspace",8)||e.from==s.from&&e.to==s.to+1&&e.insert.length==0&&gs(n.contentDOM,"Delete",46)))return!0;let l=e.insert.toString();n.inputState.composing>=0&&n.inputState.composing++;let a,c=()=>a||(a=WC(n,e,t));return n.state.facet(Jv).some(h=>h(n,e.from,e.to,l,c))||n.dispatch(c()),!0}function WC(n,e,t){let r,s=n.state,l=s.selection.main,a=-1;if(e.from==e.to&&e.from<l.from||e.from>l.to){let h=e.from<l.from?-1:1,p=h<0?l.from:l.to,d=Bo(s.facet(ul).map(m=>m(n)),p,h);e.from==d&&(a=d)}if(a>-1)r={changes:e,selection:ie.cursor(e.from+e.insert.length,-1)};else if(e.from>=l.from&&e.to<=l.to&&e.to-e.from>=(l.to-l.from)/3&&(!t||t.main.empty&&t.main.from==e.from+e.insert.length)&&n.inputState.composing<0){let h=l.from<e.from?s.sliceDoc(l.from,e.from):"",p=l.to>e.to?s.sliceDoc(e.to,l.to):"";r=s.replaceSelection(n.state.toText(h+e.insert.sliceString(0,void 0,n.state.lineBreak)+p))}else{let h=s.changes(e),p=t&&t.main.to<=h.newLength?t.main:void 0;if(s.selection.ranges.length>1&&(n.inputState.composing>=0||n.inputState.compositionPendingChange)&&e.to<=l.to+10&&e.to>=l.to-10){let d=n.state.sliceDoc(e.from,e.to),m,v=t&&ux(n,t.main.head);if(v){let b=e.insert.length-(e.to-e.from);m={from:v.from,to:v.to-b}}else m=n.state.doc.lineAt(l.head);let x=l.to-e.to;r=s.changeByRange(b=>{if(b.from==l.from&&b.to==l.to)return{changes:h,range:p||b.map(h)};let S=b.to-x,C=S-d.length;if(n.state.sliceDoc(C,S)!=d||S>=m.from&&C<=m.to)return{range:b};let P=s.changes({from:C,to:S,insert:e.insert}),N=b.to-l.to;return{changes:P,range:p?ie.range(Math.max(0,p.anchor+N),Math.max(0,p.head+N)):b.map(P)}})}else r={changes:h,selection:p&&s.selection.replaceRange(p)}}let c="input.type";return(n.composing||n.inputState.compositionPendingChange&&n.inputState.compositionEndedAt>Date.now()-50)&&(n.inputState.compositionPendingChange=!1,c+=".compose",n.inputState.compositionFirstChange&&(c+=".start",n.inputState.compositionFirstChange=!1)),s.update(r,{userEvent:c,scrollIntoView:!0})}function px(n,e,t,r){let s=Math.min(n.length,e.length),l=0;for(;l<s&&n.charCodeAt(l)==e.charCodeAt(l);)l++;if(l==s&&n.length==e.length)return null;let a=n.length,c=e.length;for(;a>0&&c>0&&n.charCodeAt(a-1)==e.charCodeAt(c-1);)a--,c--;if(r=="end"){let h=Math.max(0,l-Math.min(a,c));t-=a+h-l}if(a<l&&n.length<e.length){let h=t<=l&&t>=a?l-t:0;l-=h,c=l+(c-a),a=l}else if(c<l){let h=t<=l&&t>=c?l-t:0;l-=h,a=l+(a-c),c=l}return{from:l,toA:a,toB:c}}function QC(n){let e=[];if(n.root.activeElement!=n.contentDOM)return e;let{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:l}=n.observer.selectionRange;return t&&(e.push(new m0(t,r)),(s!=t||l!=r)&&e.push(new m0(s,l))),e}function $C(n,e){if(n.length==0)return null;let t=n[0].pos,r=n.length==2?n[1].pos:t;return t>-1&&r>-1?ie.single(t+e,r+e):null}class UC{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.insertingText="",this.insertingTextAt=0,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,ae.safari&&e.contentDOM.addEventListener("input",()=>null),ae.gecko&&a2(e.contentDOM.ownerDocument)}handleEvent(e){!e2(this.view,e)||this.ignoreDuringComposition(e)||e.type=="keydown"&&this.keydown(e)||(this.view.updateState!=0?Promise.resolve().then(()=>this.runHandlers(e.type,e)):this.runHandlers(e.type,e))}runHandlers(e,t){let r=this.handlers[e];if(r){for(let s of r.observers)s(this.view,t);for(let s of r.handlers){if(t.defaultPrevented)break;if(s(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=XC(e),r=this.handlers,s=this.view.contentDOM;for(let l in t)if(l!="scroll"){let a=!t[l].handlers.length,c=r[l];c&&a!=!c.handlers.length&&(s.removeEventListener(l,this.handleEvent),c=null),c||s.addEventListener(l,this.handleEvent,{passive:a})}for(let l in r)l!="scroll"&&!t[l]&&s.removeEventListener(l,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),e.keyCode==9&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&e.keyCode!=27&&mx.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),ae.android&&ae.chrome&&!e.synthetic&&(e.keyCode==13||e.keyCode==8))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return ae.ios&&!e.synthetic&&!e.altKey&&!e.metaKey&&((t=gx.find(r=>r.keyCode==e.keyCode))&&!e.ctrlKey||KC.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(this.pendingIOSKey=t||e,setTimeout(()=>this.flushIOSKey(),250),!0):(e.keyCode!=229&&this.view.observer.forceFlush(),!1)}flushIOSKey(e){let t=this.pendingIOSKey;return!t||t.key=="Enter"&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString())?!1:(this.pendingIOSKey=void 0,gs(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0))}ignoreDuringComposition(e){return!/^key/.test(e.type)||e.synthetic?!1:this.composing>0?!0:ae.safari&&!ae.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100?(this.compositionPendingKey=!1,!0):!1}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function y0(n,e){return(t,r)=>{try{return e.call(n,r,t)}catch(s){ir(t.state,s)}}}function XC(n){let e=Object.create(null);function t(r){return e[r]||(e[r]={observers:[],handlers:[]})}for(let r of n){let s=r.spec,l=s&&s.plugin.domEventHandlers,a=s&&s.plugin.domEventObservers;if(l)for(let c in l){let h=l[c];h&&t(c).handlers.push(y0(r.value,h))}if(a)for(let c in a){let h=a[c];h&&t(c).observers.push(y0(r.value,h))}}for(let r in Vn)t(r).handlers.push(Vn[r]);for(let r in Cn)t(r).observers.push(Cn[r]);return e}const gx=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],KC="dthko",mx=[16,17,18,20,91,92,224,225],Ra=6;function Na(n){return Math.max(0,n)*.7+8}function qC(n,e){return Math.max(Math.abs(n.clientX-e.clientX),Math.abs(n.clientY-e.clientY))}class YC{constructor(e,t,r,s){this.view=e,this.startEvent=t,this.style=r,this.mustSelect=s,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=iC(e.contentDOM),this.atoms=e.state.facet(ul).map(a=>a(e));let l=e.contentDOM.ownerDocument;l.addEventListener("mousemove",this.move=this.move.bind(this)),l.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(je.allowMultipleSelections)&&GC(e,t),this.dragging=ZC(e,t)&&xx(t)==1?null:!1}start(e){this.dragging===!1&&this.select(e)}move(e){if(e.buttons==0)return this.destroy();if(this.dragging||this.dragging==null&&qC(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,r=0,s=0,l=0,a=this.view.win.innerWidth,c=this.view.win.innerHeight;this.scrollParents.x&&({left:s,right:a}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:l,bottom:c}=this.scrollParents.y.getBoundingClientRect());let h=ax(this.view);e.clientX-h.left<=s+Ra?t=-Na(s-e.clientX):e.clientX+h.right>=a-Ra&&(t=Na(e.clientX-a)),e.clientY-h.top<=l+Ra?r=-Na(l-e.clientY):e.clientY+h.bottom>=c-Ra&&(r=Na(e.clientY-c)),this.setScrollSpeed(t,r)}up(e){this.dragging==null&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval(()=>this.scroll(),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),this.dragging===!1&&this.select(this.lastEvent)}select(e){let{view:t}=this,r=fx(this.atoms,this.style.get(e,this.extend,this.multiple));(this.mustSelect||!r.eq(t.state.selection,this.dragging===!1))&&this.view.dispatch({selection:r,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some(t=>t.isUserEvent("input.type"))?this.destroy():this.style.update(e)&&setTimeout(()=>this.select(this.lastEvent),20)}}function GC(n,e){let t=n.state.facet(Kv);return t.length?t[0](e):ae.mac?e.metaKey:e.ctrlKey}function JC(n,e){let t=n.state.facet(qv);return t.length?t[0](e):ae.mac?!e.altKey:!e.ctrlKey}function ZC(n,e){let{main:t}=n.state.selection;if(t.empty)return!1;let r=Ko(n.root);if(!r||r.rangeCount==0)return!0;let s=r.getRangeAt(0).getClientRects();for(let l=0;l<s.length;l++){let a=s[l];if(a.left<=e.clientX&&a.right>=e.clientX&&a.top<=e.clientY&&a.bottom>=e.clientY)return!0}return!1}function e2(n,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(let t=e.target,r;t!=n.contentDOM;t=t.parentNode)if(!t||t.nodeType==11||(r=ze.get(t))&&r.ignoreEvent(e))return!1;return!0}const Vn=Object.create(null),Cn=Object.create(null),yx=ae.ie&&ae.ie_version<15||ae.ios&&ae.webkit_version<604;function t2(n){let e=n.dom.parentNode;if(!e)return;let t=e.appendChild(document.createElement("textarea"));t.style.cssText="position: fixed; left: -10000px; top: 10px",t.focus(),setTimeout(()=>{n.focus(),t.remove(),vx(n,t.value)},50)}function Lu(n,e,t){for(let r of n.facet(e))t=r(t,n);return t}function vx(n,e){e=Lu(n.state,wd,e);let{state:t}=n,r,s=1,l=t.toText(e),a=l.lines==t.selection.ranges.length;if(Bf!=null&&t.selection.ranges.every(h=>h.empty)&&Bf==l.toString()){let h=-1;r=t.changeByRange(p=>{let d=t.doc.lineAt(p.from);if(d.from==h)return{range:p};h=d.from;let m=t.toText((a?l.line(s++).text:e)+t.lineBreak);return{changes:{from:d.from,insert:m},range:ie.cursor(p.from+m.length)}})}else a?r=t.changeByRange(h=>{let p=l.line(s++);return{changes:{from:h.from,to:h.to,insert:p.text},range:ie.cursor(h.from+p.length)}}):r=t.replaceSelection(l);n.dispatch(r,{userEvent:"input.paste",scrollIntoView:!0})}Cn.scroll=n=>{n.inputState.lastScrollTop=n.scrollDOM.scrollTop,n.inputState.lastScrollLeft=n.scrollDOM.scrollLeft};Vn.keydown=(n,e)=>(n.inputState.setSelectionOrigin("select"),e.keyCode==27&&n.inputState.tabFocusMode!=0&&(n.inputState.tabFocusMode=Date.now()+2e3),!1);Cn.touchstart=(n,e)=>{n.inputState.lastTouchTime=Date.now(),n.inputState.setSelectionOrigin("select.pointer")};Cn.touchmove=n=>{n.inputState.setSelectionOrigin("select.pointer")};Vn.mousedown=(n,e)=>{if(n.observer.flush(),n.inputState.lastTouchTime>Date.now()-2e3)return!1;let t=null;for(let r of n.state.facet(Yv))if(t=r(n,e),t)break;if(!t&&e.button==0&&(t=i2(n,e)),t){let r=!n.hasFocus;n.inputState.startMouseSelection(new YC(n,e,t,r)),r&&n.observer.ignore(()=>{Nv(n.contentDOM);let l=n.root.activeElement;l&&!l.contains(n.contentDOM)&&l.blur()});let s=n.inputState.mouseSelection;if(s)return s.start(e),s.dragging===!1}else n.inputState.setSelectionOrigin("select.pointer");return!1};function v0(n,e,t,r){if(r==1)return ie.cursor(e,t);if(r==2)return NC(n.state,e,t);{let s=at.find(n.docView,e),l=n.state.doc.lineAt(s?s.posAtEnd:e),a=s?s.posAtStart:l.from,c=s?s.posAtEnd:l.to;return c<n.state.doc.length&&c==l.to&&c++,ie.range(a,c)}}let x0=(n,e,t)=>e>=t.top&&e<=t.bottom&&n>=t.left&&n<=t.right;function n2(n,e,t,r){let s=at.find(n.docView,e);if(!s)return 1;let l=e-s.posAtStart;if(l==0)return 1;if(l==s.length)return-1;let a=s.coordsAt(l,-1);if(a&&x0(t,r,a))return-1;let c=s.coordsAt(l,1);return c&&x0(t,r,c)?1:a&&a.bottom>=r?-1:1}function k0(n,e){let t=n.posAtCoords({x:e.clientX,y:e.clientY},!1);return{pos:t,bias:n2(n,t,e.clientX,e.clientY)}}const r2=ae.ie&&ae.ie_version<=11;let w0=null,b0=0,S0=0;function xx(n){if(!r2)return n.detail;let e=w0,t=S0;return w0=n,S0=Date.now(),b0=!e||t>Date.now()-400&&Math.abs(e.clientX-n.clientX)<2&&Math.abs(e.clientY-n.clientY)<2?(b0+1)%3:1}function i2(n,e){let t=k0(n,e),r=xx(e),s=n.state.selection;return{update(l){l.docChanged&&(t.pos=l.changes.mapPos(t.pos),s=s.map(l.changes))},get(l,a,c){let h=k0(n,l),p,d=v0(n,h.pos,h.bias,r);if(t.pos!=h.pos&&!a){let m=v0(n,t.pos,t.bias,r),v=Math.min(m.from,d.from),x=Math.max(m.to,d.to);d=v<d.from?ie.range(v,x):ie.range(x,v)}return a?s.replaceRange(s.main.extend(d.from,d.to)):c&&r==1&&s.ranges.length>1&&(p=s2(s,h.pos))?p:c?s.addRange(d):ie.create([d])}}}function s2(n,e){for(let t=0;t<n.ranges.length;t++){let{from:r,to:s}=n.ranges[t];if(r<=e&&s>=e)return ie.create(n.ranges.slice(0,t).concat(n.ranges.slice(t+1)),n.mainIndex==t?0:n.mainIndex-(n.mainIndex>t?1:0))}return null}Vn.dragstart=(n,e)=>{let{selection:{main:t}}=n.state;if(e.target.draggable){let s=n.docView.nearest(e.target);if(s&&s.isWidget){let l=s.posAtStart,a=l+s.length;(l>=t.to||a<=t.from)&&(t=ie.range(l,a))}}let{inputState:r}=n;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=t,e.dataTransfer&&(e.dataTransfer.setData("Text",Lu(n.state,bd,n.state.sliceDoc(t.from,t.to))),e.dataTransfer.effectAllowed="copyMove"),!1};Vn.dragend=n=>(n.inputState.draggedContent=null,!1);function O0(n,e,t,r){if(t=Lu(n.state,wd,t),!t)return;let s=n.posAtCoords({x:e.clientX,y:e.clientY},!1),{draggedContent:l}=n.inputState,a=r&&l&&JC(n,e)?{from:l.from,to:l.to}:null,c={from:s,insert:t},h=n.state.changes(a?[a,c]:c);n.focus(),n.dispatch({changes:h,selection:{anchor:h.mapPos(s,-1),head:h.mapPos(s,1)},userEvent:a?"move.drop":"input.drop"}),n.inputState.draggedContent=null}Vn.drop=(n,e)=>{if(!e.dataTransfer)return!1;if(n.state.readOnly)return!0;let t=e.dataTransfer.files;if(t&&t.length){let r=Array(t.length),s=0,l=()=>{++s==t.length&&O0(n,e,r.filter(a=>a!=null).join(n.state.lineBreak),!1)};for(let a=0;a<t.length;a++){let c=new FileReader;c.onerror=l,c.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(c.result)||(r[a]=c.result),l()},c.readAsText(t[a])}return!0}else{let r=e.dataTransfer.getData("Text");if(r)return O0(n,e,r,!0),!0}return!1};Vn.paste=(n,e)=>{if(n.state.readOnly)return!0;n.observer.flush();let t=yx?null:e.clipboardData;return t?(vx(n,t.getData("text/plain")||t.getData("text/uri-list")),!0):(t2(n),!1)};function o2(n,e){let t=n.dom.parentNode;if(!t)return;let r=t.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=e,r.focus(),r.selectionEnd=e.length,r.selectionStart=0,setTimeout(()=>{r.remove(),n.focus()},50)}function l2(n){let e=[],t=[],r=!1;for(let s of n.selection.ranges)s.empty||(e.push(n.sliceDoc(s.from,s.to)),t.push(s));if(!e.length){let s=-1;for(let{from:l}of n.selection.ranges){let a=n.doc.lineAt(l);a.number>s&&(e.push(a.text),t.push({from:a.from,to:Math.min(n.doc.length,a.to+1)})),s=a.number}r=!0}return{text:Lu(n,bd,e.join(n.lineBreak)),ranges:t,linewise:r}}let Bf=null;Vn.copy=Vn.cut=(n,e)=>{let{text:t,ranges:r,linewise:s}=l2(n.state);if(!t&&!s)return!1;Bf=s?t:null,e.type=="cut"&&!n.state.readOnly&&n.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let l=yx?null:e.clipboardData;return l?(l.clearData(),l.setData("text/plain",t),!0):(o2(n,t),!1)};const kx=Rs.define();function wx(n,e){let t=[];for(let r of n.facet(Zv)){let s=r(n,e);s&&t.push(s)}return t.length?n.update({effects:t,annotations:kx.of(!0)}):null}function bx(n){setTimeout(()=>{let e=n.hasFocus;if(e!=n.inputState.notifiedFocused){let t=wx(n.state,e);t?n.dispatch(t):n.update([])}},10)}Cn.focus=n=>{n.inputState.lastFocusTime=Date.now(),!n.scrollDOM.scrollTop&&(n.inputState.lastScrollTop||n.inputState.lastScrollLeft)&&(n.scrollDOM.scrollTop=n.inputState.lastScrollTop,n.scrollDOM.scrollLeft=n.inputState.lastScrollLeft),bx(n)};Cn.blur=n=>{n.observer.clearSelectionRange(),bx(n)};Cn.compositionstart=Cn.compositionupdate=n=>{n.observer.editContext||(n.inputState.compositionFirstChange==null&&(n.inputState.compositionFirstChange=!0),n.inputState.composing<0&&(n.inputState.composing=0))};Cn.compositionend=n=>{n.observer.editContext||(n.inputState.composing=-1,n.inputState.compositionEndedAt=Date.now(),n.inputState.compositionPendingKey=!0,n.inputState.compositionPendingChange=n.observer.pendingRecords().length>0,n.inputState.compositionFirstChange=null,ae.chrome&&ae.android?n.observer.flushSoon():n.inputState.compositionPendingChange?Promise.resolve().then(()=>n.observer.flush()):setTimeout(()=>{n.inputState.composing<0&&n.docView.hasComposition&&n.update([])},50))};Cn.contextmenu=n=>{n.inputState.lastContextMenu=Date.now()};Vn.beforeinput=(n,e)=>{var t,r;if((e.inputType=="insertText"||e.inputType=="insertCompositionText")&&(n.inputState.insertingText=e.data,n.inputState.insertingTextAt=Date.now()),e.inputType=="insertReplacementText"&&n.observer.editContext){let l=(t=e.dataTransfer)===null||t===void 0?void 0:t.getData("text/plain"),a=e.getTargetRanges();if(l&&a.length){let c=a[0],h=n.posAtDOM(c.startContainer,c.startOffset),p=n.posAtDOM(c.endContainer,c.endOffset);return Od(n,{from:h,to:p,insert:n.state.toText(l)},null),!0}}let s;if(ae.chrome&&ae.android&&(s=gx.find(l=>l.inputType==e.inputType))&&(n.observer.delayAndroidKey(s.key,s.keyCode),s.key=="Backspace"||s.key=="Delete")){let l=((r=window.visualViewport)===null||r===void 0?void 0:r.height)||0;setTimeout(()=>{var a;(((a=window.visualViewport)===null||a===void 0?void 0:a.height)||0)>l+10&&n.hasFocus&&(n.contentDOM.blur(),n.focus())},100)}return ae.ios&&e.inputType=="deleteContentForward"&&n.observer.flushSoon(),ae.safari&&e.inputType=="insertText"&&n.inputState.composing>=0&&setTimeout(()=>Cn.compositionend(n,e),20),!1};const C0=new Set;function a2(n){C0.has(n)||(C0.add(n),n.addEventListener("copy",()=>{}),n.addEventListener("cut",()=>{}))}const P0=["pre-wrap","normal","pre-line","break-spaces"];let bs=!1;function E0(){bs=!1}class u2{constructor(e){this.lineWrapping=e,this.doc=De.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let r=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(r+=Math.max(0,Math.ceil((t-e-r*this.lineLength*.5)/this.lineLength))),this.lineHeight*r}heightForLine(e){return this.lineWrapping?(1+Math.max(0,Math.ceil((e-this.lineLength)/Math.max(1,this.lineLength-5))))*this.lineHeight:this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return P0.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let r=0;r<e.length;r++){let s=e[r];s<0?r++:this.heightSamples[Math.floor(s*10)]||(t=!0,this.heightSamples[Math.floor(s*10)]=!0)}return t}refresh(e,t,r,s,l,a){let c=P0.indexOf(e)>-1,h=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=c;if(this.lineWrapping=c,this.lineHeight=t,this.charWidth=r,this.textHeight=s,this.lineLength=l,h){this.heightSamples={};for(let p=0;p<a.length;p++){let d=a[p];d<0?p++:this.heightSamples[Math.floor(d*10)]=!0}}return h}}class c2{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class rr{constructor(e,t,r,s,l){this.from=e,this.length=t,this.top=r,this.height=s,this._content=l}get type(){return typeof this._content=="number"?Qt.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof oi?this._content.widget:null}get widgetLineBreaks(){return typeof this._content=="number"?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new rr(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var $e=(function(n){return n[n.ByPos=0]="ByPos",n[n.ByHeight=1]="ByHeight",n[n.ByPosNoHeight=2]="ByPosNoHeight",n})($e||($e={}));const Ya=.001;class $t{constructor(e,t,r=2){this.length=e,this.height=t,this.flags=r}get outdated(){return(this.flags&2)>0}set outdated(e){this.flags=(e?2:0)|this.flags&-3}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Ya&&(bs=!0),this.height=e)}replace(e,t,r){return $t.of(r)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,r,s){let l=this,a=r.doc;for(let c=s.length-1;c>=0;c--){let{fromA:h,toA:p,fromB:d,toB:m}=s[c],v=l.lineAt(h,$e.ByPosNoHeight,r.setDoc(t),0,0),x=v.to>=p?v:l.lineAt(p,$e.ByPosNoHeight,r,0,0);for(m+=x.to-p,p=x.to;c>0&&v.from<=s[c-1].toA;)h=s[c-1].fromA,d=s[c-1].fromB,c--,h<v.from&&(v=l.lineAt(h,$e.ByPosNoHeight,r,0,0));d+=v.from-h,h=v.from;let b=Cd.build(r.setDoc(a),e,d,m);l=pu(l,l.replace(h,p,b))}return l.updateHeight(r,0)}static empty(){return new hn(0,0)}static of(e){if(e.length==1)return e[0];let t=0,r=e.length,s=0,l=0;for(;;)if(t==r)if(s>l*2){let c=e[t-1];c.break?e.splice(--t,1,c.left,null,c.right):e.splice(--t,1,c.left,c.right),r+=1+c.break,s-=c.size}else if(l>s*2){let c=e[r];c.break?e.splice(r,1,c.left,null,c.right):e.splice(r,1,c.left,c.right),r+=2+c.break,l-=c.size}else break;else if(s<l){let c=e[t++];c&&(s+=c.size)}else{let c=e[--r];c&&(l+=c.size)}let a=0;return e[t-1]==null?(a=1,t--):e[t]==null&&(a=1,r++),new h2($t.of(e.slice(0,t)),a,$t.of(e.slice(r)))}}function pu(n,e){return n==e?n:(n.constructor!=e.constructor&&(bs=!0),e)}$t.prototype.size=1;class Sx extends $t{constructor(e,t,r){super(e,t),this.deco=r}blockAt(e,t,r,s){return new rr(s,this.length,r,this.height,this.deco||0)}lineAt(e,t,r,s,l){return this.blockAt(0,r,s,l)}forEachLine(e,t,r,s,l,a){e<=l+this.length&&t>=l&&a(this.blockAt(0,r,s,l))}updateHeight(e,t=0,r=!1,s){return s&&s.from<=t&&s.more&&this.setHeight(s.heights[s.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class hn extends Sx{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,r,s){return new rr(s,this.length,r,this.height,this.breaks)}replace(e,t,r){let s=r[0];return r.length==1&&(s instanceof hn||s instanceof Ct&&s.flags&4)&&Math.abs(this.length-s.length)<10?(s instanceof Ct?s=new hn(s.length,this.height):s.height=this.height,this.outdated||(s.outdated=!1),s):$t.of(r)}updateHeight(e,t=0,r=!1,s){return s&&s.from<=t&&s.more?this.setHeight(s.heights[s.index++]):(r||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Ct extends $t{constructor(e){super(e,0)}heightMetrics(e,t){let r=e.doc.lineAt(t).number,s=e.doc.lineAt(t+this.length).number,l=s-r+1,a,c=0;if(e.lineWrapping){let h=Math.min(this.height,e.lineHeight*l);a=h/l,this.length>l+1&&(c=(this.height-h)/(this.length-l-1))}else a=this.height/l;return{firstLine:r,lastLine:s,perLine:a,perChar:c}}blockAt(e,t,r,s){let{firstLine:l,lastLine:a,perLine:c,perChar:h}=this.heightMetrics(t,s);if(t.lineWrapping){let p=s+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-r)/this.height))*this.length)),d=t.doc.lineAt(p),m=c+d.length*h,v=Math.max(r,e-m/2);return new rr(d.from,d.length,v,m,0)}else{let p=Math.max(0,Math.min(a-l,Math.floor((e-r)/c))),{from:d,length:m}=t.doc.line(l+p);return new rr(d,m,r+c*p,c,0)}}lineAt(e,t,r,s,l){if(t==$e.ByHeight)return this.blockAt(e,r,s,l);if(t==$e.ByPosNoHeight){let{from:x,to:b}=r.doc.lineAt(e);return new rr(x,b-x,0,0,0)}let{firstLine:a,perLine:c,perChar:h}=this.heightMetrics(r,l),p=r.doc.lineAt(e),d=c+p.length*h,m=p.number-a,v=s+c*m+h*(p.from-l-m);return new rr(p.from,p.length,Math.max(s,Math.min(v,s+this.height-d)),d,0)}forEachLine(e,t,r,s,l,a){e=Math.max(e,l),t=Math.min(t,l+this.length);let{firstLine:c,perLine:h,perChar:p}=this.heightMetrics(r,l);for(let d=e,m=s;d<=t;){let v=r.doc.lineAt(d);if(d==e){let b=v.number-c;m+=h*b+p*(e-l-b)}let x=h+p*v.length;a(new rr(v.from,v.length,m,x,0)),m+=x,d=v.to+1}}replace(e,t,r){let s=this.length-t;if(s>0){let l=r[r.length-1];l instanceof Ct?r[r.length-1]=new Ct(l.length+s):r.push(null,new Ct(s-1))}if(e>0){let l=r[0];l instanceof Ct?r[0]=new Ct(e+l.length):r.unshift(new Ct(e-1),null)}return $t.of(r)}decomposeLeft(e,t){t.push(new Ct(e-1),null)}decomposeRight(e,t){t.push(null,new Ct(this.length-e-1))}updateHeight(e,t=0,r=!1,s){let l=t+this.length;if(s&&s.from<=t+this.length&&s.more){let a=[],c=Math.max(t,s.from),h=-1;for(s.from>t&&a.push(new Ct(s.from-t-1).updateHeight(e,t));c<=l&&s.more;){let d=e.doc.lineAt(c).length;a.length&&a.push(null);let m=s.heights[s.index++];h==-1?h=m:Math.abs(m-h)>=Ya&&(h=-2);let v=new hn(d,m);v.outdated=!1,a.push(v),c+=d+1}c<=l&&a.push(null,new Ct(l-c).updateHeight(e,c));let p=$t.of(a);return(h<0||Math.abs(p.height-this.height)>=Ya||Math.abs(h-this.heightMetrics(e,t).perLine)>=Ya)&&(bs=!0),pu(this,p)}else(r||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1);return this}toString(){return`gap(${this.length})`}}class h2 extends $t{constructor(e,t,r){super(e.length+t+r.length,e.height+r.height,t|(e.outdated||r.outdated?2:0)),this.left=e,this.right=r,this.size=e.size+r.size}get break(){return this.flags&1}blockAt(e,t,r,s){let l=r+this.left.height;return e<l?this.left.blockAt(e,t,r,s):this.right.blockAt(e,t,l,s+this.left.length+this.break)}lineAt(e,t,r,s,l){let a=s+this.left.height,c=l+this.left.length+this.break,h=t==$e.ByHeight?e<a:e<c,p=h?this.left.lineAt(e,t,r,s,l):this.right.lineAt(e,t,r,a,c);if(this.break||(h?p.to<c:p.from>c))return p;let d=t==$e.ByPosNoHeight?$e.ByPosNoHeight:$e.ByPos;return h?p.join(this.right.lineAt(c,d,r,a,c)):this.left.lineAt(c,d,r,s,l).join(p)}forEachLine(e,t,r,s,l,a){let c=s+this.left.height,h=l+this.left.length+this.break;if(this.break)e<h&&this.left.forEachLine(e,t,r,s,l,a),t>=h&&this.right.forEachLine(e,t,r,c,h,a);else{let p=this.lineAt(h,$e.ByPos,r,s,l);e<p.from&&this.left.forEachLine(e,p.from-1,r,s,l,a),p.to>=e&&p.from<=t&&a(p),t>p.to&&this.right.forEachLine(p.to+1,t,r,c,h,a)}}replace(e,t,r){let s=this.left.length+this.break;if(t<s)return this.balanced(this.left.replace(e,t,r),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-s,t-s,r));let l=[];e>0&&this.decomposeLeft(e,l);let a=l.length;for(let c of r)l.push(c);if(e>0&&A0(l,a-1),t<this.length){let c=l.length;this.decomposeRight(t,l),A0(l,c)}return $t.of(l)}decomposeLeft(e,t){let r=this.left.length;if(e<=r)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(r++,e>=r&&t.push(null)),e>r&&this.right.decomposeLeft(e-r,t)}decomposeRight(e,t){let r=this.left.length,s=r+this.break;if(e>=s)return this.right.decomposeRight(e-s,t);e<r&&this.left.decomposeRight(e,t),this.break&&e<s&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?$t.of(this.break?[e,null,t]:[e,t]):(this.left=pu(this.left,e),this.right=pu(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,r=!1,s){let{left:l,right:a}=this,c=t+l.length+this.break,h=null;return s&&s.from<=t+l.length&&s.more?h=l=l.updateHeight(e,t,r,s):l.updateHeight(e,t,r),s&&s.from<=c+a.length&&s.more?h=a=a.updateHeight(e,c,r,s):a.updateHeight(e,c,r),h?this.balanced(l,a):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function A0(n,e){let t,r;n[e]==null&&(t=n[e-1])instanceof Ct&&(r=n[e+1])instanceof Ct&&n.splice(e-1,3,new Ct(t.length+1+r.length))}const f2=5;class Cd{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let r=Math.min(t,this.lineEnd),s=this.nodes[this.nodes.length-1];s instanceof hn?s.length+=r-this.pos:(r>this.pos||!this.isCovered)&&this.nodes.push(new hn(r-this.pos,-1)),this.writtenTo=r,t>r&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,r){if(e<t||r.heightRelevant){let s=r.widget?r.widget.estimatedHeight:0,l=r.widget?r.widget.lineBreaks:0;s<0&&(s=this.oracle.lineHeight);let a=t-e;r.block?this.addBlock(new Sx(a,s,r)):(a||l||s>=f2)&&this.addLineDeco(s,l,a)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||this.nodes[this.nodes.length-1]==null)&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new hn(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let r=new Ct(t-e);return this.oracle.doc.lineAt(e).to==t&&(r.flags|=4),r}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof hn)return e;let t=new hn(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,r){let s=this.ensureLine();s.length+=r,s.collapsed+=r,s.widgetHeight=Math.max(s.widgetHeight,e),s.breaks+=t,this.writtenTo=this.pos=this.pos+r}finish(e){let t=this.nodes.length==0?null:this.nodes[this.nodes.length-1];this.lineStart>-1&&!(t instanceof hn)&&!this.isCovered?this.nodes.push(new hn(0,-1)):(this.writtenTo<this.pos||t==null)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos));let r=e;for(let s of this.nodes)s instanceof hn&&s.updateHeight(this.oracle,r),r+=s?s.length:1;return this.nodes}static build(e,t,r,s){let l=new Cd(r,e);return Ie.spans(t,r,s,l,0),l.finish(r)}}function d2(n,e,t){let r=new p2;return Ie.compare(n,e,t,r,0),r.changes}class p2{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,r,s){(e<t||r&&r.heightRelevant||s&&s.heightRelevant)&&qa(e,t,this.changes,5)}}function g2(n,e){let t=n.getBoundingClientRect(),r=n.ownerDocument,s=r.defaultView||window,l=Math.max(0,t.left),a=Math.min(s.innerWidth,t.right),c=Math.max(0,t.top),h=Math.min(s.innerHeight,t.bottom);for(let p=n.parentNode;p&&p!=r.body;)if(p.nodeType==1){let d=p,m=window.getComputedStyle(d);if((d.scrollHeight>d.clientHeight||d.scrollWidth>d.clientWidth)&&m.overflow!="visible"){let v=d.getBoundingClientRect();l=Math.max(l,v.left),a=Math.min(a,v.right),c=Math.max(c,v.top),h=Math.min(p==n.parentNode?s.innerHeight:h,v.bottom)}p=m.position=="absolute"||m.position=="fixed"?d.offsetParent:d.parentNode}else if(p.nodeType==11)p=p.host;else break;return{left:l-t.left,right:Math.max(l,a)-t.left,top:c-(t.top+e),bottom:Math.max(c,h)-(t.top+e)}}function m2(n){let e=n.getBoundingClientRect(),t=n.ownerDocument.defaultView||window;return e.left<t.innerWidth&&e.right>0&&e.top<t.innerHeight&&e.bottom>0}function y2(n,e){let t=n.getBoundingClientRect();return{left:0,right:t.right-t.left,top:e,bottom:t.bottom-(t.top+e)}}class _h{constructor(e,t,r,s){this.from=e,this.to=t,this.size=r,this.displaySize=s}static same(e,t){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++){let s=e[r],l=t[r];if(s.from!=l.from||s.to!=l.to||s.size!=l.size)return!1}return!0}draw(e,t){return et.replace({widget:new v2(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class v2 extends ol{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class M0{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=R0,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Ze.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(Sd).some(r=>typeof r!="function"&&r.class=="cm-lineWrapping");this.heightOracle=new u2(t),this.stateDeco=e.facet(Yo).filter(r=>typeof r!="function"),this.heightMap=$t.empty().applyChanges(this.stateDeco,De.empty,this.heightOracle.setDoc(e.doc),[new Sn(0,0,0,e.doc.length)]);for(let r=0;r<2&&(this.viewport=this.getViewport(0,null),!!this.updateForViewport());r++);this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=et.set(this.lineGaps.map(r=>r.draw(this,!1))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let r=0;r<=1;r++){let s=r?t.head:t.anchor;if(!e.some(({from:l,to:a})=>s>=l&&s<=a)){let{from:l,to:a}=this.lineBlockAt(s);e.push(new Da(l,a))}}return this.viewports=e.sort((r,s)=>r.from-s.from),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?R0:new Pd(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,e=>{this.viewportLines.push(Eo(e,this.scaler))})}update(e,t=null){this.state=e.state;let r=this.stateDeco;this.stateDeco=this.state.facet(Yo).filter(d=>typeof d!="function");let s=e.changedRanges,l=Sn.extendWithRanges(s,d2(r,this.stateDeco,e?e.changes:kt.empty(this.state.doc.length))),a=this.heightMap.height,c=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);E0(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),l),(this.heightMap.height!=a||bs)&&(e.flags|=2),c?(this.scrollAnchorPos=e.changes.mapPos(c.from,-1),this.scrollAnchorHeight=c.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=a);let h=l.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<h.from||t.range.head>h.to)||!this.viewportIsAppropriate(h))&&(h=this.getViewport(0,t));let p=h.from!=this.viewport.from||h.to!=this.viewport.to;this.viewport=h,e.flags|=this.updateForViewport(),(p||!e.changes.empty||e.flags&2)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(e.changes),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(tx)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,r=window.getComputedStyle(t),s=this.heightOracle,l=r.whiteSpace;this.defaultTextDirection=r.direction=="rtl"?Ze.RTL:Ze.LTR;let a=this.heightOracle.mustRefreshForWrapping(l),c=t.getBoundingClientRect(),h=a||this.mustMeasureContent||this.contentDOMHeight!=c.height;this.contentDOMHeight=c.height,this.mustMeasureContent=!1;let p=0,d=0;if(c.width&&c.height){let{scaleX:B,scaleY:T}=Rv(t,c);(B>.005&&Math.abs(this.scaleX-B)>.005||T>.005&&Math.abs(this.scaleY-T)>.005)&&(this.scaleX=B,this.scaleY=T,p|=16,a=h=!0)}let m=(parseInt(r.paddingTop)||0)*this.scaleY,v=(parseInt(r.paddingBottom)||0)*this.scaleY;(this.paddingTop!=m||this.paddingBottom!=v)&&(this.paddingTop=m,this.paddingBottom=v,p|=18),this.editorWidth!=e.scrollDOM.clientWidth&&(s.lineWrapping&&(h=!0),this.editorWidth=e.scrollDOM.clientWidth,p|=16);let x=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=x&&(this.scrollAnchorHeight=-1,this.scrollTop=x),this.scrolledToBottom=Tv(e.scrollDOM);let b=(this.printing?y2:g2)(t,this.paddingTop),S=b.top-this.pixelViewport.top,C=b.bottom-this.pixelViewport.bottom;this.pixelViewport=b;let P=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(P!=this.inView&&(this.inView=P,P&&(h=!0)),!this.inView&&!this.scrollTarget&&!m2(e.dom))return 0;let N=c.width;if((this.contentDOMWidth!=N||this.editorHeight!=e.scrollDOM.clientHeight)&&(this.contentDOMWidth=c.width,this.editorHeight=e.scrollDOM.clientHeight,p|=16),h){let B=e.docView.measureVisibleLineHeights(this.viewport);if(s.mustRefreshForHeights(B)&&(a=!0),a||s.lineWrapping&&Math.abs(N-this.contentDOMWidth)>s.charWidth){let{lineHeight:T,charWidth:F,textHeight:L}=e.docView.measureTextSize();a=T>0&&s.refresh(l,T,F,L,Math.max(5,N/F),B),a&&(e.docView.minWidth=0,p|=16)}S>0&&C>0?d=Math.max(S,C):S<0&&C<0&&(d=Math.min(S,C)),E0();for(let T of this.viewports){let F=T.from==this.viewport.from?B:e.docView.measureVisibleLineHeights(T);this.heightMap=(a?$t.empty().applyChanges(this.stateDeco,De.empty,this.heightOracle,[new Sn(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(s,0,a,new c2(T.from,F))}bs&&(p|=2)}let D=!this.viewportIsAppropriate(this.viewport,d)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return D&&(p&2&&(p|=this.updateScaler()),this.viewport=this.getViewport(d,this.scrollTarget),p|=this.updateForViewport()),(p&2||D)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(a?[]:this.lineGaps,e)),p|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),p}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let r=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),s=this.heightMap,l=this.heightOracle,{visibleTop:a,visibleBottom:c}=this,h=new Da(s.lineAt(a-r*1e3,$e.ByHeight,l,0,0).from,s.lineAt(c+(1-r)*1e3,$e.ByHeight,l,0,0).to);if(t){let{head:p}=t.range;if(p<h.from||p>h.to){let d=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),m=s.lineAt(p,$e.ByPos,l,0,0),v;t.y=="center"?v=(m.top+m.bottom)/2-d/2:t.y=="start"||t.y=="nearest"&&p<h.from?v=m.top:v=m.bottom-d,h=new Da(s.lineAt(v-1e3/2,$e.ByHeight,l,0,0).from,s.lineAt(v+d+1e3/2,$e.ByHeight,l,0,0).to)}}return h}mapViewport(e,t){let r=t.mapPos(e.from,-1),s=t.mapPos(e.to,1);return new Da(this.heightMap.lineAt(r,$e.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(s,$e.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},r=0){if(!this.inView)return!0;let{top:s}=this.heightMap.lineAt(e,$e.ByPos,this.heightOracle,0,0),{bottom:l}=this.heightMap.lineAt(t,$e.ByPos,this.heightOracle,0,0),{visibleTop:a,visibleBottom:c}=this;return(e==0||s<=a-Math.max(10,Math.min(-r,250)))&&(t==this.state.doc.length||l>=c+Math.max(10,Math.min(r,250)))&&s>a-2*1e3&&l<c+2*1e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let r=[];for(let s of e)t.touchesRange(s.from,s.to)||r.push(new _h(t.mapPos(s.from),t.mapPos(s.to),s.size,s.displaySize));return r}ensureLineGaps(e,t){let r=this.heightOracle.lineWrapping,s=r?1e4:2e3,l=s>>1,a=s<<1;if(this.defaultTextDirection!=Ze.LTR&&!r)return[];let c=[],h=(d,m,v,x)=>{if(m-d<l)return;let b=this.state.selection.main,S=[b.from];b.empty||S.push(b.to);for(let P of S)if(P>d&&P<m){h(d,P-10,v,x),h(P+10,m,v,x);return}let C=k2(e,P=>P.from>=v.from&&P.to<=v.to&&Math.abs(P.from-d)<l&&Math.abs(P.to-m)<l&&!S.some(N=>P.from<N&&P.to>N));if(!C){if(m<v.to&&t&&r&&t.visibleRanges.some(D=>D.from<=m&&D.to>=m)){let D=t.moveToLineBoundary(ie.cursor(m),!1,!0).head;D>d&&(m=D)}let P=this.gapSize(v,d,m,x),N=r||P<2e6?P:2e6;C=new _h(d,m,P,N)}c.push(C)},p=d=>{if(d.length<a||d.type!=Qt.Text)return;let m=x2(d.from,d.to,this.stateDeco);if(m.total<a)return;let v=this.scrollTarget?this.scrollTarget.range.head:null,x,b;if(r){let S=s/this.heightOracle.lineLength*this.heightOracle.lineHeight,C,P;if(v!=null){let N=La(m,v),D=((this.visibleBottom-this.visibleTop)/2+S)/d.height;C=N-D,P=N+D}else C=(this.visibleTop-d.top-S)/d.height,P=(this.visibleBottom-d.top+S)/d.height;x=Ta(m,C),b=Ta(m,P)}else{let S=m.total*this.heightOracle.charWidth,C=s*this.heightOracle.charWidth,P=0;if(S>2e6)for(let F of e)F.from>=d.from&&F.from<d.to&&F.size!=F.displaySize&&F.from*this.heightOracle.charWidth+P<this.pixelViewport.left&&(P=F.size-F.displaySize);let N=this.pixelViewport.left+P,D=this.pixelViewport.right+P,B,T;if(v!=null){let F=La(m,v),L=((D-N)/2+C)/S;B=F-L,T=F+L}else B=(N-C)/S,T=(D+C)/S;x=Ta(m,B),b=Ta(m,T)}x>d.from&&h(d.from,x,d,m),b<d.to&&h(b,d.to,d,m)};for(let d of this.viewportLines)Array.isArray(d.type)?d.type.forEach(p):p(d);return c}gapSize(e,t,r,s){let l=La(s,r)-La(s,t);return this.heightOracle.lineWrapping?e.height*l:s.total*this.heightOracle.charWidth*l}updateLineGaps(e){_h.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=et.set(e.map(t=>t.draw(this,this.heightOracle.lineWrapping))))}computeVisibleRanges(e){let t=this.stateDeco;this.lineGaps.length&&(t=t.concat(this.lineGapDeco));let r=[];Ie.spans(t,this.viewport.from,this.viewport.to,{span(l,a){r.push({from:l,to:a})},point(){}},20);let s=0;if(r.length!=this.visibleRanges.length)s=12;else for(let l=0;l<r.length&&!(s&8);l++){let a=this.visibleRanges[l],c=r[l];(a.from!=c.from||a.to!=c.to)&&(s|=4,e&&e.mapPos(a.from,-1)==c.from&&e.mapPos(a.to,1)==c.to||(s|=8))}return this.visibleRanges=r,s}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find(t=>t.from<=e&&t.to>=e)||Eo(this.heightMap.lineAt(e,$e.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find(t=>t.top<=e&&t.bottom>=e)||Eo(this.heightMap.lineAt(this.scaler.fromDOM(e),$e.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Eo(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Da{constructor(e,t){this.from=e,this.to=t}}function x2(n,e,t){let r=[],s=n,l=0;return Ie.spans(t,n,e,{span(){},point(a,c){a>s&&(r.push({from:s,to:a}),l+=a-s),s=c}},20),s<e&&(r.push({from:s,to:e}),l+=e-s),{total:l,ranges:r}}function Ta({total:n,ranges:e},t){if(t<=0)return e[0].from;if(t>=1)return e[e.length-1].to;let r=Math.floor(n*t);for(let s=0;;s++){let{from:l,to:a}=e[s],c=a-l;if(r<=c)return l+r;r-=c}}function La(n,e){let t=0;for(let{from:r,to:s}of n.ranges){if(e<=s){t+=e-r;break}t+=s-r}return t/n.total}function k2(n,e){for(let t of n)if(e(t))return t}const R0={toDOM(n){return n},fromDOM(n){return n},scale:1,eq(n){return n==this}};class Pd{constructor(e,t,r){let s=0,l=0,a=0;this.viewports=r.map(({from:c,to:h})=>{let p=t.lineAt(c,$e.ByPos,e,0,0).top,d=t.lineAt(h,$e.ByPos,e,0,0).bottom;return s+=d-p,{from:c,to:h,top:p,bottom:d,domTop:0,domBottom:0}}),this.scale=(7e6-s)/(t.height-s);for(let c of this.viewports)c.domTop=a+(c.top-l)*this.scale,a=c.domBottom=c.domTop+(c.bottom-c.top),l=c.bottom}toDOM(e){for(let t=0,r=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.top)return s+(e-r)*this.scale;if(e<=l.bottom)return l.domTop+(e-l.top);r=l.bottom,s=l.domBottom}}fromDOM(e){for(let t=0,r=0,s=0;;t++){let l=t<this.viewports.length?this.viewports[t]:null;if(!l||e<l.domTop)return r+(e-s)/this.scale;if(e<=l.domBottom)return l.top+(e-l.domTop);r=l.bottom,s=l.domBottom}}eq(e){return e instanceof Pd?this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every((t,r)=>t.from==e.viewports[r].from&&t.to==e.viewports[r].to):!1}}function Eo(n,e){if(e.scale==1)return n;let t=e.toDOM(n.top),r=e.toDOM(n.bottom);return new rr(n.from,n.length,t,r-t,Array.isArray(n._content)?n._content.map(s=>Eo(s,e)):n._content)}const ja=ke.define({combine:n=>n.join(" ")}),zf=ke.define({combine:n=>n.indexOf(!0)>-1}),Ff=ii.newName(),Ox=ii.newName(),Cx=ii.newName(),Px={"&light":"."+Ox,"&dark":"."+Cx};function _f(n,e,t){return new ii(e,{finish(r){return/&/.test(r)?r.replace(/&\w*/,s=>{if(s=="&")return n;if(!t||!t[s])throw new RangeError(`Unsupported selector: ${s}`);return t[s]}):n+" "+r}})}const w2=_f("."+Ff,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",zIndex:200},".cm-gutters-before":{insetInlineStart:0},".cm-gutters-after":{insetInlineEnd:0},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",border:"0px solid #ddd","&.cm-gutters-before":{borderRightWidth:"1px"},"&.cm-gutters-after":{borderLeftWidth:"1px"}},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-dialog":{padding:"2px 19px 4px 6px",position:"relative","& label":{fontSize:"80%"}},".cm-dialog-close":{position:"absolute",top:"3px",right:"4px",backgroundColor:"inherit",border:"none",font:"inherit",fontSize:"14px",padding:"0"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top",userSelect:"none"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>')`,backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},Px),b2={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},Hh=ae.ie&&ae.ie_version<=11;class S2{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new sC,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver(t=>{for(let r of t)this.queue.push(r);(ae.ie&&ae.ie_version<=11||ae.ios&&e.composing)&&t.some(r=>r.type=="childList"&&r.removedNodes.length||r.type=="characterData"&&r.oldValue.length>r.target.nodeValue.length)?this.flushSoon():this.flush()}),window.EditContext&&ae.android&&e.constructor.EDIT_CONTEXT!==!1&&!(ae.chrome&&ae.chrome_version<126)&&(this.editContext=new C2(e),e.state.facet(wr)&&(e.contentDOM.editContext=this.editContext.editContext)),Hh&&(this.onCharData=t=>{this.queue.push({target:t.target,type:"characterData",oldValue:t.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),typeof ResizeObserver=="function"&&(this.resizeScroll=new ResizeObserver(()=>{var t;((t=this.view.docView)===null||t===void 0?void 0:t.lastUpdate)<Date.now()-75&&this.onResize()}),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),typeof IntersectionObserver=="function"&&(this.intersection=new IntersectionObserver(t=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),t.length>0&&t[t.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))},{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver(t=>{t.length>0&&t[t.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))},{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout(()=>{this.resizeTimeout=-1,this.view.requestMeasure()},50))}onPrint(e){(e.type=="change"||!e.type)&&!e.matches||(this.view.viewState.printing=!0,this.view.measure(),setTimeout(()=>{this.view.viewState.printing=!1,this.view.requestMeasure()},500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some((t,r)=>t!=e[r]))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:r}=this,s=this.selectionRange;if(r.state.facet(wr)?r.root.activeElement!=this.dom:!Ka(this.dom,s))return;let l=s.anchorNode&&r.docView.nearest(s.anchorNode);if(l&&l.ignoreEvent(e)){t||(this.selectionChanged=!1);return}(ae.ie&&ae.ie_version<=11||ae.android&&ae.chrome)&&!r.state.selection.main.empty&&s.focusNode&&jo(s.focusNode,s.focusOffset,s.anchorNode,s.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Ko(e.root);if(!t)return!1;let r=ae.safari&&e.root.nodeType==11&&e.root.activeElement==this.dom&&O2(this.view,t)||t;if(!r||this.selectionRange.eq(r))return!1;let s=Ka(this.dom,r);return s&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&lC(this.dom,r)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(r),s&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let r=this.dom;r;)if(r.nodeType==1)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==r?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(r),r=r.assignedSlot||r.parentNode;else if(r.nodeType==11)r=r.host;else break;if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);for(let r of this.scrollTargets=t)r.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,b2),Hh&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),Hh&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var r;if(!this.delayedAndroidKey){let s=()=>{let l=this.delayedAndroidKey;l&&(this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=l.keyCode,this.view.inputState.lastKeyTime=Date.now(),!this.flush()&&l.force&&gs(this.dom,l.key,l.keyCode))};this.flushingAndroidKey=this.view.win.requestAnimationFrame(s)}(!this.delayedAndroidKey||e=="Enter")&&(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(!((r=this.delayedAndroidKey)===null||r===void 0)&&r.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame(()=>{this.delayedFlush=-1,this.flush()}))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,r=-1,s=!1;for(let l of e){let a=this.readMutation(l);a&&(a.typeOver&&(s=!0),t==-1?{from:t,to:r}=a:(t=Math.min(a.from,t),r=Math.max(a.to,r)))}return{from:t,to:r,typeOver:s}}readChange(){let{from:e,to:t,typeOver:r}=this.processRecords(),s=this.selectionChanged&&Ka(this.dom,this.selectionRange);if(e<0&&!s)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let l=new VC(this.view,e,t,r);return this.view.docView.domChanged={newSel:l.newSel?l.newSel.main:null},l}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let r=this.view.state,s=dx(this.view,t);return this.view.state==r&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),s}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty(e.type=="attributes"),e.type=="attributes"&&(t.flags|=4),e.type=="childList"){let r=N0(t,e.previousSibling||e.target.previousSibling,-1),s=N0(t,e.nextSibling||e.target.nextSibling,1);return{from:r?t.posAfter(r):t.posAtStart,to:s?t.posBefore(s):t.posAtEnd,typeOver:!1}}else return e.type=="characterData"?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(wr)!=e.state.facet(wr)&&(e.view.contentDOM.editContext=e.state.facet(wr)?this.editContext.editContext:null))}destroy(){var e,t,r;this.stop(),(e=this.intersection)===null||e===void 0||e.disconnect(),(t=this.gapIntersection)===null||t===void 0||t.disconnect(),(r=this.resizeScroll)===null||r===void 0||r.disconnect();for(let s of this.scrollTargets)s.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function N0(n,e,t){for(;e;){let r=ze.get(e);if(r&&r.parent==n)return r;let s=e.parentNode;e=s!=n.dom?s:t>0?e.nextSibling:e.previousSibling}return null}function D0(n,e){let t=e.startContainer,r=e.startOffset,s=e.endContainer,l=e.endOffset,a=n.docView.domAtPos(n.state.selection.main.anchor);return jo(a.node,a.offset,s,l)&&([t,r,s,l]=[s,l,t,r]),{anchorNode:t,anchorOffset:r,focusNode:s,focusOffset:l}}function O2(n,e){if(e.getComposedRanges){let s=e.getComposedRanges(n.root)[0];if(s)return D0(n,s)}let t=null;function r(s){s.preventDefault(),s.stopImmediatePropagation(),t=s.getTargetRanges()[0]}return n.contentDOM.addEventListener("beforeinput",r,!0),n.dom.ownerDocument.execCommand("indent"),n.contentDOM.removeEventListener("beforeinput",r,!0),t?D0(n,t):null}class C2{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=r=>{let s=e.state.selection.main,{anchor:l,head:a}=s,c=this.toEditorPos(r.updateRangeStart),h=this.toEditorPos(r.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:r.updateRangeStart,editorBase:c,drifted:!1});let p=h-c>r.text.length;c==this.from&&l<this.from?c=l:h==this.to&&l>this.to&&(h=l);let d=px(e.state.sliceDoc(c,h),r.text,(p?s.from:s.to)-c,p?"end":null);if(!d){let v=ie.single(this.toEditorPos(r.selectionStart),this.toEditorPos(r.selectionEnd));v.main.eq(s)||e.dispatch({selection:v,userEvent:"select"});return}let m={from:d.from+c,to:d.toA+c,insert:De.of(r.text.slice(d.from,d.toB).split(`
`))};if((ae.mac||ae.android)&&m.from==a-1&&/^\. ?$/.test(r.text)&&e.contentDOM.getAttribute("autocorrect")=="off"&&(m={from:c,to:h,insert:De.of([r.text.replace("."," ")])}),this.pendingContextChange=m,!e.state.readOnly){let v=this.to-this.from+(m.to-m.from+m.insert.length);Od(e,m,ie.single(this.toEditorPos(r.selectionStart,v),this.toEditorPos(r.selectionEnd,v)))}this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)),m.from<m.to&&!m.insert.length&&e.inputState.composing>=0&&!/[\\p{Alphabetic}\\p{Number}_]/.test(t.text.slice(Math.max(0,r.updateRangeStart-1),Math.min(t.text.length,r.updateRangeStart+1)))&&this.handlers.compositionend(r)},this.handlers.characterboundsupdate=r=>{let s=[],l=null;for(let a=this.toEditorPos(r.rangeStart),c=this.toEditorPos(r.rangeEnd);a<c;a++){let h=e.coordsForChar(a);l=h&&new DOMRect(h.left,h.top,h.right-h.left,h.bottom-h.top)||l||new DOMRect,s.push(l)}t.updateCharacterBounds(r.rangeStart,s)},this.handlers.textformatupdate=r=>{let s=[];for(let l of r.getTextFormats()){let a=l.underlineStyle,c=l.underlineThickness;if(!/none/i.test(a)&&!/none/i.test(c)){let h=this.toEditorPos(l.rangeStart),p=this.toEditorPos(l.rangeEnd);if(h<p){let d=`text-decoration: underline ${/^[a-z]/.test(a)?a+" ":a=="Dashed"?"dashed ":a=="Squiggle"?"wavy ":""}${/thin/i.test(c)?1:2}px`;s.push(et.mark({attributes:{style:d}}).range(h,p))}}}e.dispatch({effects:rx.of(et.set(s))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:r}=this.composing;this.composing=null,r&&this.reset(e.state)}};for(let r in this.handlers)t.addEventListener(r,this.handlers[r]);this.measureReq={read:r=>{this.editContext.updateControlBounds(r.contentDOM.getBoundingClientRect());let s=Ko(r.root);s&&s.rangeCount&&this.editContext.updateSelectionBounds(s.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,r=!1,s=this.pendingContextChange;return e.changes.iterChanges((l,a,c,h,p)=>{if(r)return;let d=p.length-(a-l);if(s&&a>=s.to)if(s.from==l&&s.to==a&&s.insert.eq(p)){s=this.pendingContextChange=null,t+=d,this.to+=d;return}else s=null,this.revertPending(e.state);if(l+=t,a+=t,a<=this.from)this.from+=d,this.to+=d;else if(l<this.to){if(l<this.from||a>this.to||this.to-this.from+p.length>3e4){r=!0;return}this.editContext.updateText(this.toContextPos(l),this.toContextPos(a),p.toString()),this.to+=d}t+=d}),s&&!r&&this.revertPending(e.state),!r}update(e){let t=this.pendingContextChange,r=e.startState.selection.main;this.composing&&(this.composing.drifted||!e.changes.touchesRange(r.from,r.to)&&e.transactions.some(s=>!s.isUserEvent("input.type")&&s.changes.touchesRange(this.from,this.to)))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):!this.applyEdits(e)||!this.rangeIsValid(e.state)?(this.pendingContextChange=null,this.reset(e.state)):(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,r=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),s=this.toContextPos(t.head);(this.editContext.selectionStart!=r||this.editContext.selectionEnd!=s)&&this.editContext.updateSelection(r,s)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>1e4*3)}toEditorPos(e,t=this.to-this.from){e=Math.min(e,t);let r=this.composing;return r&&r.drifted?r.editorBase+(e-r.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class Ce{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return!!this.inputState&&this.inputState.composing>0}get compositionStarted(){return!!this.inputState&&this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:r}=e;this.dispatchTransactions=e.dispatchTransactions||r&&(s=>s.forEach(l=>r(l,this)))||(s=>this.update(s)),this.dispatch=this.dispatch.bind(this),this._root=e.root||oC(e.parent)||document,this.viewState=new M0(e.state||je.create(e)),e.scrollTo&&e.scrollTo.is(Ma)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(us).map(s=>new Bh(s));for(let s of this.plugins)s.update(this);this.observer=new S2(this),this.inputState=new UC(this),this.inputState.ensureHandlers(this.plugins),this.docView=new c0(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),!((t=document.fonts)===null||t===void 0)&&t.ready&&document.fonts.ready.then(()=>this.requestMeasure())}dispatch(...e){let t=e.length==1&&e[0]instanceof Bt?e:e.length==1&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(this.updateState!=0)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t=!1,r=!1,s,l=this.state;for(let v of e){if(v.startState!=l)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");l=v.state}if(this.destroyed){this.viewState.state=l;return}let a=this.hasFocus,c=0,h=null;e.some(v=>v.annotation(kx))?(this.inputState.notifiedFocused=a,c=1):a!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=a,h=wx(l,a),h||(c=1));let p=this.observer.delayedAndroidKey,d=null;if(p?(this.observer.clearDelayedAndroidKey(),d=this.observer.readChange(),(d&&!this.state.doc.eq(l.doc)||!this.state.selection.eq(l.selection))&&(d=null)):this.observer.clear(),l.facet(je.phrases)!=this.state.facet(je.phrases))return this.setState(l);s=du.create(this,l,e),s.flags|=c;let m=this.viewState.scrollTarget;try{this.updateState=2;for(let v of e){if(m&&(m=m.map(v.changes)),v.scrollIntoView){let{main:x}=v.state.selection;m=new ms(x.empty?x:ie.cursor(x.head,x.head>x.anchor?-1:1))}for(let x of v.effects)x.is(Ma)&&(m=x.value.clip(this.state))}this.viewState.update(s,m),this.bidiCache=gu.update(this.bidiCache,s.changes),s.empty||(this.updatePlugins(s),this.inputState.update(s)),t=this.docView.update(s),this.state.facet(Co)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(t,e.some(v=>v.isUserEvent("select.pointer")))}finally{this.updateState=0}if(s.startState.facet(ja)!=s.state.facet(ja)&&(this.viewState.mustMeasureContent=!0),(t||r||m||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),t&&this.docViewUpdate(),!s.empty)for(let v of this.state.facet(Lf))try{v(s)}catch(x){ir(this.state,x,"update listener")}(h||d)&&Promise.resolve().then(()=>{h&&this.state==h.startState&&this.dispatch(h),d&&!dx(this,d)&&p.force&&gs(this.contentDOM,p.key,p.keyCode)})}setState(e){if(this.updateState!=0)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed){this.viewState.state=e;return}this.updateState=2;let t=this.hasFocus;try{for(let r of this.plugins)r.destroy(this);this.viewState=new M0(e),this.plugins=e.facet(us).map(r=>new Bh(r)),this.pluginMap.clear();for(let r of this.plugins)r.update(this);this.docView.destroy(),this.docView=new c0(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(us),r=e.state.facet(us);if(t!=r){let s=[];for(let l of r){let a=t.indexOf(l);if(a<0)s.push(new Bh(l));else{let c=this.plugins[a];c.mustUpdate=e,s.push(c)}}for(let l of this.plugins)l.mustUpdate!=e&&l.destroy(this);this.plugins=s,this.pluginMap.clear()}else for(let s of this.plugins)s.mustUpdate=e;for(let s=0;s<this.plugins.length;s++)this.plugins[s].update(this);t!=r&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let e of this.plugins){let t=e.value;if(t&&t.docViewUpdate)try{t.docViewUpdate(this)}catch(r){ir(this.state,r,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey){this.measureScheduled=-1,this.requestMeasure();return}this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,r=this.scrollDOM,s=r.scrollTop*this.scaleY,{scrollAnchorPos:l,scrollAnchorHeight:a}=this.viewState;Math.abs(s-this.viewState.scrollTop)>1&&(a=-1),this.viewState.scrollAnchorHeight=-1;try{for(let c=0;;c++){if(a<0)if(Tv(r))l=-1,a=this.viewState.heightMap.height;else{let x=this.viewState.scrollAnchorAt(s);l=x.from,a=x.top}this.updateState=1;let h=this.viewState.measure(this);if(!h&&!this.measureRequests.length&&this.viewState.scrollTarget==null)break;if(c>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let p=[];h&4||([this.measureRequests,p]=[p,this.measureRequests]);let d=p.map(x=>{try{return x.read(this)}catch(b){return ir(this.state,b),T0}}),m=du.create(this,this.state,[]),v=!1;m.flags|=h,t?t.flags|=h:t=m,this.updateState=2,m.empty||(this.updatePlugins(m),this.inputState.update(m),this.updateAttrs(),v=this.docView.update(m),v&&this.docViewUpdate());for(let x=0;x<p.length;x++)if(d[x]!=T0)try{let b=p[x];b.write&&b.write(d[x],this)}catch(b){ir(this.state,b)}if(v&&this.docView.updateSelection(!0),!m.viewportChanged&&this.measureRequests.length==0){if(this.viewState.editorHeight)if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,a=-1;continue}else{let b=(l<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(l).top)-a;if(b>1||b<-1){s=s+b,r.scrollTop=s/this.scaleY,a=-1;continue}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let c of this.state.facet(Lf))c(t)}get themeClasses(){return Ff+" "+(this.state.facet(zf)?Cx:Ox)+" "+this.state.facet(ja)}updateAttrs(){let e=L0(this,ix,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",writingsuggestions:"false",translate:"no",contenteditable:this.state.facet(wr)?"true":"false",class:"cm-content",style:`${ae.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),L0(this,Sd,t);let r=this.observer.ignore(()=>{let s=Mf(this.contentDOM,this.contentAttrs,t),l=Mf(this.dom,this.editorAttrs,e);return s||l});return this.editorAttrs=e,this.contentAttrs=t,r}showAnnouncements(e){let t=!0;for(let r of e)for(let s of r.effects)if(s.is(Ce.announce)){t&&(this.announceDOM.textContent=""),t=!1;let l=this.announceDOM.appendChild(document.createElement("div"));l.textContent=s.value}}mountStyles(){this.styleModules=this.state.facet(Co);let e=this.state.facet(Ce.cspNonce);ii.mount(this.root,this.styleModules.concat(w2).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(this.updateState==2)throw new Error("Reading the editor layout isn't allowed during an update");this.updateState==0&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame(()=>this.measure())),e){if(this.measureRequests.indexOf(e)>-1)return;if(e.key!=null){for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key){this.measureRequests[t]=e;return}}this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(t===void 0||t&&t.plugin!=e)&&this.pluginMap.set(e,t=this.plugins.find(r=>r.plugin==e)||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,r){return Fh(this,e,g0(this,e,t,r))}moveByGroup(e,t){return Fh(this,e,g0(this,e,t,r=>BC(this,e.head,r)))}visualLineSide(e,t){let r=this.bidiSpans(e),s=this.textDirectionAt(e.from),l=r[t?r.length-1:0];return ie.cursor(l.side(t,s)+e.from,l.forward(!t,s)?1:-1)}moveToLineBoundary(e,t,r=!0){return IC(this,e,t,r)}moveVertically(e,t,r){return Fh(this,e,zC(this,e,t,r))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),cx(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let r=this.docView.coordsAt(e,t);if(!r||r.left==r.right)return r;let s=this.state.doc.lineAt(e),l=this.bidiSpans(s),a=l[ei.find(l,e-s.from,-1,t)];return Tu(r,a.dir==Ze.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){return!this.state.facet(ex)||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>P2)return Uv(e.length);let t=this.textDirectionAt(e.from),r;for(let l of this.bidiCache)if(l.from==e.from&&l.dir==t&&(l.fresh||$v(l.isolates,r=u0(this,e))))return l.order;r||(r=u0(this,e));let s=kC(e.text,t,r);return this.bidiCache.push(new gu(e.from,e.to,t,r,!0,s)),s}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||ae.safari&&((e=this.inputState)===null||e===void 0?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore(()=>{Nv(this.contentDOM),this.docView.updateSelection()})}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((e.nodeType==9?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Ma.of(new ms(typeof e=="number"?ie.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,r=this.viewState.scrollAnchorAt(e);return Ma.of(new ms(ie.cursor(r.from),"start","start",r.top-e,t,!0))}setTabFocusMode(e){e==null?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:typeof e=="boolean"?this.inputState.tabFocusMode=e?0:-1:this.inputState.tabFocusMode!=0&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Hn.define(()=>({}),{eventHandlers:e})}static domEventObservers(e){return Hn.define(()=>({}),{eventObservers:e})}static theme(e,t){let r=ii.newName(),s=[ja.of(r),Co.of(_f(`.${r}`,e))];return t&&t.dark&&s.push(zf.of(!0)),s}static baseTheme(e){return Ru.lowest(Co.of(_f("."+Ff,e,Px)))}static findFromDOM(e){var t;let r=e.querySelector(".cm-content"),s=r&&ze.get(r)||ze.get(e);return((t=s==null?void 0:s.rootView)===null||t===void 0?void 0:t.view)||null}}Ce.styleModule=Co;Ce.inputHandler=Jv;Ce.clipboardInputFilter=wd;Ce.clipboardOutputFilter=bd;Ce.scrollHandler=nx;Ce.focusChangeEffect=Zv;Ce.perLineTextDirection=ex;Ce.exceptionSink=Gv;Ce.updateListener=Lf;Ce.editable=wr;Ce.mouseSelectionStyle=Yv;Ce.dragMovesSelection=qv;Ce.clickAddsSelectionRange=Kv;Ce.decorations=Yo;Ce.outerDecorations=sx;Ce.atomicRanges=ul;Ce.bidiIsolatedRanges=ox;Ce.scrollMargins=lx;Ce.darkTheme=zf;Ce.cspNonce=ke.define({combine:n=>n.length?n[0]:""});Ce.contentAttributes=Sd;Ce.editorAttributes=ix;Ce.lineWrapping=Ce.contentAttributes.of({class:"cm-lineWrapping"});Ce.announce=gt.define();const P2=4096,T0={};class gu{constructor(e,t,r,s,l,a){this.from=e,this.to=t,this.dir=r,this.isolates=s,this.fresh=l,this.order=a}static update(e,t){if(t.empty&&!e.some(l=>l.fresh))return e;let r=[],s=e.length?e[e.length-1].dir:Ze.LTR;for(let l=Math.max(0,e.length-10);l<e.length;l++){let a=e[l];a.dir==s&&!t.touchesRange(a.from,a.to)&&r.push(new gu(t.mapPos(a.from,1),t.mapPos(a.to,-1),a.dir,a.isolates,!1,a.order))}return r}}function L0(n,e,t){for(let r=n.state.facet(e),s=r.length-1;s>=0;s--){let l=r[s],a=typeof l=="function"?l(n):l;a&&Af(a,t)}return t}const E2=ae.mac?"mac":ae.windows?"win":ae.linux?"linux":"key";function A2(n,e){const t=n.split(/-(?!$)/);let r=t[t.length-1];r=="Space"&&(r=" ");let s,l,a,c;for(let h=0;h<t.length-1;++h){const p=t[h];if(/^(cmd|meta|m)$/i.test(p))c=!0;else if(/^a(lt)?$/i.test(p))s=!0;else if(/^(c|ctrl|control)$/i.test(p))l=!0;else if(/^s(hift)?$/i.test(p))a=!0;else if(/^mod$/i.test(p))e=="mac"?c=!0:l=!0;else throw new Error("Unrecognized modifier name: "+p)}return s&&(r="Alt-"+r),l&&(r="Ctrl-"+r),c&&(r="Meta-"+r),a&&(r="Shift-"+r),r}function Ia(n,e,t){return e.altKey&&(n="Alt-"+n),e.ctrlKey&&(n="Ctrl-"+n),e.metaKey&&(n="Meta-"+n),t!==!1&&e.shiftKey&&(n="Shift-"+n),n}const M2=Ru.default(Ce.domEventHandlers({keydown(n,e){return T2(R2(e.state),n,e,"editor")}})),Ed=ke.define({enables:M2}),j0=new WeakMap;function R2(n){let e=n.facet(Ed),t=j0.get(e);return t||j0.set(e,t=D2(e.reduce((r,s)=>r.concat(s),[]))),t}let Gr=null;const N2=4e3;function D2(n,e=E2){let t=Object.create(null),r=Object.create(null),s=(a,c)=>{let h=r[a];if(h==null)r[a]=c;else if(h!=c)throw new Error("Key binding "+a+" is used both as a regular binding and as a multi-stroke prefix")},l=(a,c,h,p,d)=>{var m,v;let x=t[a]||(t[a]=Object.create(null)),b=c.split(/ (?!$)/).map(P=>A2(P,e));for(let P=1;P<b.length;P++){let N=b.slice(0,P).join(" ");s(N,!0),x[N]||(x[N]={preventDefault:!0,stopPropagation:!1,run:[D=>{let B=Gr={view:D,prefix:N,scope:a};return setTimeout(()=>{Gr==B&&(Gr=null)},N2),!0}]})}let S=b.join(" ");s(S,!1);let C=x[S]||(x[S]={preventDefault:!1,stopPropagation:!1,run:((v=(m=x._any)===null||m===void 0?void 0:m.run)===null||v===void 0?void 0:v.slice())||[]});h&&C.run.push(h),p&&(C.preventDefault=!0),d&&(C.stopPropagation=!0)};for(let a of n){let c=a.scope?a.scope.split(" "):["editor"];if(a.any)for(let p of c){let d=t[p]||(t[p]=Object.create(null));d._any||(d._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:m}=a;for(let v in d)d[v].run.push(x=>m(x,Hf))}let h=a[e]||a.key;if(h)for(let p of c)l(p,h,a.run,a.preventDefault,a.stopPropagation),a.shift&&l(p,"Shift-"+h,a.shift,a.preventDefault,a.stopPropagation)}return t}let Hf=null;function T2(n,e,t,r){Hf=e;let s=eC(e),l=IO(s,0),a=BO(l)==s.length&&s!=" ",c="",h=!1,p=!1,d=!1;Gr&&Gr.view==t&&Gr.scope==r&&(c=Gr.prefix+" ",mx.indexOf(e.keyCode)<0&&(p=!0,Gr=null));let m=new Set,v=C=>{if(C){for(let P of C.run)if(!m.has(P)&&(m.add(P),P(t)))return C.stopPropagation&&(d=!0),!0;C.preventDefault&&(C.stopPropagation&&(d=!0),p=!0)}return!1},x=n[r],b,S;return x&&(v(x[c+Ia(s,e,!a)])?h=!0:a&&(e.altKey||e.metaKey||e.ctrlKey)&&!(ae.windows&&e.ctrlKey&&e.altKey)&&!(ae.mac&&e.altKey&&!(e.ctrlKey||e.metaKey))&&(b=si[e.keyCode])&&b!=s?(v(x[c+Ia(b,e,!0)])||e.shiftKey&&(S=Xo[e.keyCode])!=s&&S!=b&&v(x[c+Ia(S,e,!1)]))&&(h=!0):a&&e.shiftKey&&v(x[c+Ia(s,e,!0)])&&(h=!0),!h&&v(x._any)&&(h=!0)),p&&(h=!0),h&&d&&e.stopPropagation(),Hf=null,h}class cl{constructor(e,t,r,s,l){this.className=e,this.left=t,this.top=r,this.width=s,this.height=l}draw(){let e=document.createElement("div");return e.className=this.className,this.adjust(e),e}update(e,t){return t.className!=this.className?!1:(this.adjust(e),!0)}adjust(e){e.style.left=this.left+"px",e.style.top=this.top+"px",this.width!=null&&(e.style.width=this.width+"px"),e.style.height=this.height+"px"}eq(e){return this.left==e.left&&this.top==e.top&&this.width==e.width&&this.height==e.height&&this.className==e.className}static forRange(e,t,r){if(r.empty){let s=e.coordsAtPos(r.head,r.assoc||1);if(!s)return[];let l=Ex(e);return[new cl(t,s.left-l.left,s.top-l.top,null,s.bottom-s.top)]}else return L2(e,t,r)}}function Ex(n){let e=n.scrollDOM.getBoundingClientRect();return{left:(n.textDirection==Ze.LTR?e.left:e.right-n.scrollDOM.clientWidth*n.scaleX)-n.scrollDOM.scrollLeft*n.scaleX,top:e.top-n.scrollDOM.scrollTop*n.scaleY}}function I0(n,e,t,r){let s=n.coordsAtPos(e,t*2);if(!s)return r;let l=n.dom.getBoundingClientRect(),a=(s.top+s.bottom)/2,c=n.posAtCoords({x:l.left+1,y:a}),h=n.posAtCoords({x:l.right-1,y:a});return c==null||h==null?r:{from:Math.max(r.from,Math.min(c,h)),to:Math.min(r.to,Math.max(c,h))}}function L2(n,e,t){if(t.to<=n.viewport.from||t.from>=n.viewport.to)return[];let r=Math.max(t.from,n.viewport.from),s=Math.min(t.to,n.viewport.to),l=n.textDirection==Ze.LTR,a=n.contentDOM,c=a.getBoundingClientRect(),h=Ex(n),p=a.querySelector(".cm-line"),d=p&&window.getComputedStyle(p),m=c.left+(d?parseInt(d.paddingLeft)+Math.min(0,parseInt(d.textIndent)):0),v=c.right-(d?parseInt(d.paddingRight):0),x=If(n,r,1),b=If(n,s,-1),S=x.type==Qt.Text?x:null,C=b.type==Qt.Text?b:null;if(S&&(n.lineWrapping||x.widgetLineBreaks)&&(S=I0(n,r,1,S)),C&&(n.lineWrapping||b.widgetLineBreaks)&&(C=I0(n,s,-1,C)),S&&C&&S.from==C.from&&S.to==C.to)return N(D(t.from,t.to,S));{let T=S?D(t.from,null,S):B(x,!1),F=C?D(null,t.to,C):B(b,!0),L=[];return(S||x).to<(C||b).from-(S&&C?1:0)||x.widgetLineBreaks>1&&T.bottom+n.defaultLineHeight/2<F.top?L.push(P(m,T.bottom,v,F.top)):T.bottom<F.top&&n.elementAtHeight((T.bottom+F.top)/2).type==Qt.Text&&(T.bottom=F.top=(T.bottom+F.top)/2),N(T).concat(L).concat(N(F))}function P(T,F,L,V){return new cl(e,T-h.left,F-h.top,L-T,V-F)}function N({top:T,bottom:F,horizontal:L}){let V=[];for(let q=0;q<L.length;q+=2)V.push(P(L[q],T,L[q+1],F));return V}function D(T,F,L){let V=1e9,q=-1e9,Y=[];function H(Z,U,ue,fe,X){let re=n.coordsAtPos(Z,Z==L.to?-2:2),ee=n.coordsAtPos(ue,ue==L.from?2:-2);!re||!ee||(V=Math.min(re.top,ee.top,V),q=Math.max(re.bottom,ee.bottom,q),X==Ze.LTR?Y.push(l&&U?m:re.left,l&&fe?v:ee.right):Y.push(!l&&fe?m:ee.left,!l&&U?v:re.right))}let W=T??L.from,J=F??L.to;for(let Z of n.visibleRanges)if(Z.to>W&&Z.from<J)for(let U=Math.max(Z.from,W),ue=Math.min(Z.to,J);;){let fe=n.state.doc.lineAt(U);for(let X of n.bidiSpans(fe)){let re=X.from+fe.from,ee=X.to+fe.from;if(re>=ue)break;ee>U&&H(Math.max(re,U),T==null&&re<=W,Math.min(ee,ue),F==null&&ee>=J,X.dir)}if(U=fe.to+1,U>=ue)break}return Y.length==0&&H(W,T==null,J,F==null,n.textDirection),{top:V,bottom:q,horizontal:Y}}function B(T,F){let L=c.top+(F?T.top:T.bottom);return{top:L,bottom:L,horizontal:[]}}}function j2(n,e){return n.constructor==e.constructor&&n.eq(e)}class I2{constructor(e,t){this.view=e,this.layer=t,this.drawn=[],this.scaleX=1,this.scaleY=1,this.measureReq={read:this.measure.bind(this),write:this.draw.bind(this)},this.dom=e.scrollDOM.appendChild(document.createElement("div")),this.dom.classList.add("cm-layer"),t.above&&this.dom.classList.add("cm-layer-above"),t.class&&this.dom.classList.add(t.class),this.scale(),this.dom.setAttribute("aria-hidden","true"),this.setOrder(e.state),e.requestMeasure(this.measureReq),t.mount&&t.mount(this.dom,e)}update(e){e.startState.facet(Ga)!=e.state.facet(Ga)&&this.setOrder(e.state),(this.layer.update(e,this.dom)||e.geometryChanged)&&(this.scale(),e.view.requestMeasure(this.measureReq))}docViewUpdate(e){this.layer.updateOnDocViewUpdate!==!1&&e.requestMeasure(this.measureReq)}setOrder(e){let t=0,r=e.facet(Ga);for(;t<r.length&&r[t]!=this.layer;)t++;this.dom.style.zIndex=String((this.layer.above?150:-1)-t)}measure(){return this.layer.markers(this.view)}scale(){let{scaleX:e,scaleY:t}=this.view;(e!=this.scaleX||t!=this.scaleY)&&(this.scaleX=e,this.scaleY=t,this.dom.style.transform=`scale(${1/e}, ${1/t})`)}draw(e){if(e.length!=this.drawn.length||e.some((t,r)=>!j2(t,this.drawn[r]))){let t=this.dom.firstChild,r=0;for(let s of e)s.update&&t&&s.constructor&&this.drawn[r].constructor&&s.update(t,this.drawn[r])?(t=t.nextSibling,r++):this.dom.insertBefore(s.draw(),t);for(;t;){let s=t.nextSibling;t.remove(),t=s}this.drawn=e,ae.safari&&ae.safari_version>=26&&(this.dom.style.display=this.dom.firstChild?"":"none")}}destroy(){this.layer.destroy&&this.layer.destroy(this.dom,this.view),this.dom.remove()}}const Ga=ke.define();function Ax(n){return[Hn.define(e=>new I2(e,n)),Ga.of(n)]}const Go=ke.define({combine(n){return Pv(n,{cursorBlinkRate:1200,drawRangeCursor:!0},{cursorBlinkRate:(e,t)=>Math.min(e,t),drawRangeCursor:(e,t)=>e||t})}});function B2(n={}){return[Go.of(n),z2,F2,_2,tx.of(!0)]}function Mx(n){return n.startState.facet(Go)!=n.state.facet(Go)}const z2=Ax({above:!0,markers(n){let{state:e}=n,t=e.facet(Go),r=[];for(let s of e.selection.ranges){let l=s==e.selection.main;if(s.empty||t.drawRangeCursor){let a=l?"cm-cursor cm-cursor-primary":"cm-cursor cm-cursor-secondary",c=s.empty?s:ie.cursor(s.head,s.head>s.anchor?-1:1);for(let h of cl.forRange(n,a,c))r.push(h)}}return r},update(n,e){n.transactions.some(r=>r.selection)&&(e.style.animationName=e.style.animationName=="cm-blink"?"cm-blink2":"cm-blink");let t=Mx(n);return t&&B0(n.state,e),n.docChanged||n.selectionSet||t},mount(n,e){B0(e.state,n)},class:"cm-cursorLayer"});function B0(n,e){e.style.animationDuration=n.facet(Go).cursorBlinkRate+"ms"}const F2=Ax({above:!1,markers(n){return n.state.selection.ranges.map(e=>e.empty?[]:cl.forRange(n,"cm-selectionBackground",e)).reduce((e,t)=>e.concat(t))},update(n,e){return n.docChanged||n.selectionSet||n.viewportChanged||Mx(n)},class:"cm-selectionLayer"}),_2=Ru.highest(Ce.theme({".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"},caretColor:"transparent !important"},".cm-content":{caretColor:"transparent !important","& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}}));function H2(){return W2}const V2=et.line({class:"cm-activeLine"}),W2=Hn.fromClass(class{constructor(n){this.decorations=this.getDeco(n)}update(n){(n.docChanged||n.selectionSet)&&(this.decorations=this.getDeco(n.view))}getDeco(n){let e=-1,t=[];for(let r of n.state.selection.ranges){let s=n.lineBlockAt(r.head);s.from>e&&(t.push(V2.range(s.from)),e=s.from)}return et.set(t)}},{decorations:n=>n.decorations});class li extends xs{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}li.prototype.elementClass="";li.prototype.toDOM=void 0;li.prototype.mapMode=dn.TrackBefore;li.prototype.startSide=li.prototype.endSide=-1;li.prototype.point=!0;const Ja=ke.define(),Q2=ke.define(),Za=ke.define(),z0=ke.define({combine:n=>n.some(e=>e)});function $2(n){return[U2]}const U2=Hn.fromClass(class{constructor(n){this.view=n,this.domAfter=null,this.prevViewport=n.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters cm-gutters-before",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=n.state.facet(Za).map(e=>new _0(n,e)),this.fixed=!n.state.facet(z0);for(let e of this.gutters)e.config.side=="after"?this.getDOMAfter().appendChild(e.dom):this.dom.appendChild(e.dom);this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),n.scrollDOM.insertBefore(this.dom,n.contentDOM)}getDOMAfter(){return this.domAfter||(this.domAfter=document.createElement("div"),this.domAfter.className="cm-gutters cm-gutters-after",this.domAfter.setAttribute("aria-hidden","true"),this.domAfter.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.domAfter.style.position=this.fixed?"sticky":"",this.view.scrollDOM.appendChild(this.domAfter)),this.domAfter}update(n){if(this.updateGutters(n)){let e=this.prevViewport,t=n.view.viewport,r=Math.min(e.to,t.to)-Math.max(e.from,t.from);this.syncGutters(r<(t.to-t.from)*.8)}if(n.geometryChanged){let e=this.view.contentHeight/this.view.scaleY+"px";this.dom.style.minHeight=e,this.domAfter&&(this.domAfter.style.minHeight=e)}this.view.state.facet(z0)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":"",this.domAfter&&(this.domAfter.style.position=this.fixed?"sticky":"")),this.prevViewport=n.view.viewport}syncGutters(n){let e=this.dom.nextSibling;n&&(this.dom.remove(),this.domAfter&&this.domAfter.remove());let t=Ie.iter(this.view.state.facet(Ja),this.view.viewport.from),r=[],s=this.gutters.map(l=>new X2(l,this.view.viewport,-this.view.documentPadding.top));for(let l of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(l.type)){let a=!0;for(let c of l.type)if(c.type==Qt.Text&&a){Vf(t,r,c.from);for(let h of s)h.line(this.view,c,r);a=!1}else if(c.widget)for(let h of s)h.widget(this.view,c)}else if(l.type==Qt.Text){Vf(t,r,l.from);for(let a of s)a.line(this.view,l,r)}else if(l.widget)for(let a of s)a.widget(this.view,l);for(let l of s)l.finish();n&&(this.view.scrollDOM.insertBefore(this.dom,e),this.domAfter&&this.view.scrollDOM.appendChild(this.domAfter))}updateGutters(n){let e=n.startState.facet(Za),t=n.state.facet(Za),r=n.docChanged||n.heightChanged||n.viewportChanged||!Ie.eq(n.startState.facet(Ja),n.state.facet(Ja),n.view.viewport.from,n.view.viewport.to);if(e==t)for(let s of this.gutters)s.update(n)&&(r=!0);else{r=!0;let s=[];for(let l of t){let a=e.indexOf(l);a<0?s.push(new _0(this.view,l)):(this.gutters[a].update(n),s.push(this.gutters[a]))}for(let l of this.gutters)l.dom.remove(),s.indexOf(l)<0&&l.destroy();for(let l of s)l.config.side=="after"?this.getDOMAfter().appendChild(l.dom):this.dom.appendChild(l.dom);this.gutters=s}return r}destroy(){for(let n of this.gutters)n.destroy();this.dom.remove(),this.domAfter&&this.domAfter.remove()}},{provide:n=>Ce.scrollMargins.of(e=>{let t=e.plugin(n);if(!t||t.gutters.length==0||!t.fixed)return null;let r=t.dom.offsetWidth*e.scaleX,s=t.domAfter?t.domAfter.offsetWidth*e.scaleX:0;return e.textDirection==Ze.LTR?{left:r,right:s}:{right:r,left:s}})});function F0(n){return Array.isArray(n)?n:[n]}function Vf(n,e,t){for(;n.value&&n.from<=t;)n.from==t&&e.push(n.value),n.next()}class X2{constructor(e,t,r){this.gutter=e,this.height=r,this.i=0,this.cursor=Ie.iter(e.markers,t.from)}addElement(e,t,r){let{gutter:s}=this,l=(t.top-this.height)/e.scaleY,a=t.height/e.scaleY;if(this.i==s.elements.length){let c=new Rx(e,a,l,r);s.elements.push(c),s.dom.appendChild(c.dom)}else s.elements[this.i].update(e,a,l,r);this.height=t.bottom,this.i++}line(e,t,r){let s=[];Vf(this.cursor,s,t.from),r.length&&(s=s.concat(r));let l=this.gutter.config.lineMarker(e,t,s);l&&s.unshift(l);let a=this.gutter;s.length==0&&!a.config.renderEmptyElements||this.addElement(e,t,s)}widget(e,t){let r=this.gutter.config.widgetMarker(e,t.widget,t),s=r?[r]:null;for(let l of e.state.facet(Q2)){let a=l(e,t.widget,t);a&&(s||(s=[])).push(a)}s&&this.addElement(e,t,s)}finish(){let e=this.gutter;for(;e.elements.length>this.i;){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class _0{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let r in t.domEventHandlers)this.dom.addEventListener(r,s=>{let l=s.target,a;if(l!=this.dom&&this.dom.contains(l)){for(;l.parentNode!=this.dom;)l=l.parentNode;let h=l.getBoundingClientRect();a=(h.top+h.bottom)/2}else a=s.clientY;let c=e.lineBlockAtHeight(a-e.documentTop);t.domEventHandlers[r](e,c,s)&&s.preventDefault()});this.markers=F0(t.markers(e)),t.initialSpacer&&(this.spacer=new Rx(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=F0(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let s=this.config.updateSpacer(this.spacer.markers[0],e);s!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[s])}let r=e.view.viewport;return!Ie.eq(this.markers,t,r.from,r.to)||(this.config.lineMarkerChange?this.config.lineMarkerChange(e):!1)}destroy(){for(let e of this.elements)e.destroy()}}class Rx{constructor(e,t,r,s){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,r,s)}update(e,t,r,s){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=r&&(this.dom.style.marginTop=(this.above=r)?r+"px":""),K2(this.markers,s)||this.setMarkers(e,s)}setMarkers(e,t){let r="cm-gutterElement",s=this.dom.firstChild;for(let l=0,a=0;;){let c=a,h=l<t.length?t[l++]:null,p=!1;if(h){let d=h.elementClass;d&&(r+=" "+d);for(let m=a;m<this.markers.length;m++)if(this.markers[m].compare(h)){c=m,p=!0;break}}else c=this.markers.length;for(;a<c;){let d=this.markers[a++];if(d.toDOM){d.destroy(s);let m=s.nextSibling;s.remove(),s=m}}if(!h)break;h.toDOM&&(p?s=s.nextSibling:this.dom.insertBefore(h.toDOM(e),s)),p&&a++}this.dom.className=r,this.markers=t}destroy(){this.setMarkers(null,[])}}function K2(n,e){if(n.length!=e.length)return!1;for(let t=0;t<n.length;t++)if(!n[t].compare(e[t]))return!1;return!0}const q2=ke.define(),Y2=ke.define(),cs=ke.define({combine(n){return Pv(n,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let r=Object.assign({},e);for(let s in t){let l=r[s],a=t[s];r[s]=l?(c,h,p)=>l(c,h,p)||a(c,h,p):a}return r}})}});class Vh extends li{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function Wh(n,e){return n.state.facet(cs).formatNumber(e,n.state)}const G2=Za.compute([cs],n=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(q2)},lineMarker(e,t,r){return r.some(s=>s.toDOM)?null:new Vh(Wh(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,r)=>{for(let s of e.state.facet(Y2)){let l=s(e,t,r);if(l)return l}return null},lineMarkerChange:e=>e.startState.facet(cs)!=e.state.facet(cs),initialSpacer(e){return new Vh(Wh(e,H0(e.state.doc.lines)))},updateSpacer(e,t){let r=Wh(t.view,H0(t.view.state.doc.lines));return r==e.number?e:new Vh(r)},domEventHandlers:n.facet(cs).domEventHandlers,side:"before"}));function J2(n={}){return[cs.of(n),$2(),G2]}function H0(n){let e=9;for(;e<n;)e=e*10+9;return e}const Z2=new class extends li{constructor(){super(...arguments),this.elementClass="cm-activeLineGutter"}},eP=Ja.compute(["selection"],n=>{let e=[],t=-1;for(let r of n.selection.ranges){let s=n.doc.lineAt(r.head).from;s>t&&(t=s,e.push(Z2.range(s)))}return Ie.of(e)});function tP(){return eP}const Nx=1024;let nP=0;class Qh{constructor(e,t){this.from=e,this.to=t}}class Me{constructor(e={}){this.id=nP++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")}),this.combine=e.combine||null}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return typeof e!="function"&&(e=en.match(e)),t=>{let r=e(t);return r===void 0?null:[this,r]}}}Me.closedBy=new Me({deserialize:n=>n.split(" ")});Me.openedBy=new Me({deserialize:n=>n.split(" ")});Me.group=new Me({deserialize:n=>n.split(" ")});Me.isolate=new Me({deserialize:n=>{if(n&&n!="rtl"&&n!="ltr"&&n!="auto")throw new RangeError("Invalid value for isolate: "+n);return n||"auto"}});Me.contextHash=new Me({perNode:!0});Me.lookAhead=new Me({perNode:!0});Me.mounted=new Me({perNode:!0});class mu{constructor(e,t,r){this.tree=e,this.overlay=t,this.parser=r}static get(e){return e&&e.props&&e.props[Me.mounted.id]}}const rP=Object.create(null);class en{constructor(e,t,r,s=0){this.name=e,this.props=t,this.id=r,this.flags=s}static define(e){let t=e.props&&e.props.length?Object.create(null):rP,r=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(e.name==null?8:0),s=new en(e.name||"",t,e.id,r);if(e.props){for(let l of e.props)if(Array.isArray(l)||(l=l(s)),l){if(l[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[l[0].id]=l[1]}}return s}prop(e){return this.props[e.id]}get isTop(){return(this.flags&1)>0}get isSkipped(){return(this.flags&2)>0}get isError(){return(this.flags&4)>0}get isAnonymous(){return(this.flags&8)>0}is(e){if(typeof e=="string"){if(this.name==e)return!0;let t=this.prop(Me.group);return t?t.indexOf(e)>-1:!1}return this.id==e}static match(e){let t=Object.create(null);for(let r in e)for(let s of r.split(" "))t[s]=e[r];return r=>{for(let s=r.prop(Me.group),l=-1;l<(s?s.length:0);l++){let a=t[l<0?r.name:s[l]];if(a)return a}}}}en.none=new en("",Object.create(null),0,8);class Ad{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let r of this.types){let s=null;for(let l of e){let a=l(r);if(a){s||(s=Object.assign({},r.props));let c=a[1],h=a[0];h.combine&&h.id in s&&(c=h.combine(s[h.id],c)),s[h.id]=c}}t.push(s?new en(r.name,s,r.id,r.flags):r)}return new Ad(t)}}const Ba=new WeakMap,V0=new WeakMap;var wt;(function(n){n[n.ExcludeBuffers=1]="ExcludeBuffers",n[n.IncludeAnonymous=2]="IncludeAnonymous",n[n.IgnoreMounts=4]="IgnoreMounts",n[n.IgnoreOverlays=8]="IgnoreOverlays"})(wt||(wt={}));class ut{constructor(e,t,r,s,l){if(this.type=e,this.children=t,this.positions=r,this.length=s,this.props=null,l&&l.length){this.props=Object.create(null);for(let[a,c]of l)this.props[typeof a=="number"?a:a.id]=c}}toString(){let e=mu.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let r of this.children){let s=r.toString();s&&(t&&(t+=","),t+=s)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Qf(this.topNode,e)}cursorAt(e,t=0,r=0){let s=Ba.get(this)||this.topNode,l=new Qf(s);return l.moveTo(e,t),Ba.set(this,l._tree),l}get topNode(){return new On(this,0,0,null)}resolve(e,t=0){let r=Jo(Ba.get(this)||this.topNode,e,t,!1);return Ba.set(this,r),r}resolveInner(e,t=0){let r=Jo(V0.get(this)||this.topNode,e,t,!0);return V0.set(this,r),r}resolveStack(e,t=0){return oP(this,e,t)}iterate(e){let{enter:t,leave:r,from:s=0,to:l=this.length}=e,a=e.mode||0,c=(a&wt.IncludeAnonymous)>0;for(let h=this.cursor(a|wt.IncludeAnonymous);;){let p=!1;if(h.from<=l&&h.to>=s&&(!c&&h.type.isAnonymous||t(h)!==!1)){if(h.firstChild())continue;p=!0}for(;p&&r&&(c||!h.type.isAnonymous)&&r(h),!h.nextSibling();){if(!h.parent())return;p=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Nd(en.none,this.children,this.positions,0,this.children.length,0,this.length,(t,r,s)=>new ut(this.type,t,r,s,this.propValues),e.makeTree||((t,r,s)=>new ut(en.none,t,r,s)))}static build(e){return lP(e)}}ut.empty=new ut(en.none,[],[],0);class Md{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Md(this.buffer,this.index)}}class ai{constructor(e,t,r){this.buffer=e,this.length=t,this.set=r}get type(){return en.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],r=this.buffer[e+3],s=this.set.types[t],l=s.name;if(/\W/.test(l)&&!s.isError&&(l=JSON.stringify(l)),e+=4,r==e)return l;let a=[];for(;e<r;)a.push(this.childString(e)),e=this.buffer[e+3];return l+"("+a.join(",")+")"}findChild(e,t,r,s,l){let{buffer:a}=this,c=-1;for(let h=e;h!=t&&!(Dx(l,s,a[h+1],a[h+2])&&(c=h,r>0));h=a[h+3]);return c}slice(e,t,r){let s=this.buffer,l=new Uint16Array(t-e),a=0;for(let c=e,h=0;c<t;){l[h++]=s[c++],l[h++]=s[c++]-r;let p=l[h++]=s[c++]-r;l[h++]=s[c++]-e,a=Math.max(a,p)}return new ai(l,a,this.set)}}function Dx(n,e,t,r){switch(n){case-2:return t<e;case-1:return r>=e&&t<e;case 0:return t<e&&r>e;case 1:return t<=e&&r>e;case 2:return r>e;case 4:return!0}}function Jo(n,e,t,r){for(var s;n.from==n.to||(t<1?n.from>=e:n.from>e)||(t>-1?n.to<=e:n.to<e);){let a=!r&&n instanceof On&&n.index<0?null:n.parent;if(!a)return n;n=a}let l=r?0:wt.IgnoreOverlays;if(r)for(let a=n,c=a.parent;c;a=c,c=a.parent)a instanceof On&&a.index<0&&((s=c.enter(e,t,l))===null||s===void 0?void 0:s.from)!=a.from&&(n=c);for(;;){let a=n.enter(e,t,l);if(!a)return n;n=a}}class Tx{cursor(e=0){return new Qf(this,e)}getChild(e,t=null,r=null){let s=W0(this,e,t,r);return s.length?s[0]:null}getChildren(e,t=null,r=null){return W0(this,e,t,r)}resolve(e,t=0){return Jo(this,e,t,!1)}resolveInner(e,t=0){return Jo(this,e,t,!0)}matchContext(e){return Wf(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),r=this;for(;t;){let s=t.lastChild;if(!s||s.to!=t.to)break;s.type.isError&&s.from==s.to?(r=t,t=s.prevSibling):t=s}return r}get node(){return this}get next(){return this.parent}}class On extends Tx{constructor(e,t,r,s){super(),this._tree=e,this.from=t,this.index=r,this._parent=s}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,r,s,l=0){for(let a=this;;){for(let{children:c,positions:h}=a._tree,p=t>0?c.length:-1;e!=p;e+=t){let d=c[e],m=h[e]+a.from;if(Dx(s,r,m,m+d.length)){if(d instanceof ai){if(l&wt.ExcludeBuffers)continue;let v=d.findChild(0,d.buffer.length,t,r-m,s);if(v>-1)return new ti(new iP(a,d,e,m),null,v)}else if(l&wt.IncludeAnonymous||!d.type.isAnonymous||Rd(d)){let v;if(!(l&wt.IgnoreMounts)&&(v=mu.get(d))&&!v.overlay)return new On(v.tree,m,e,a);let x=new On(d,m,e,a);return l&wt.IncludeAnonymous||!x.type.isAnonymous?x:x.nextChild(t<0?d.children.length-1:0,t,r,s)}}}if(l&wt.IncludeAnonymous||!a.type.isAnonymous||(a.index>=0?e=a.index+t:e=t<0?-1:a._parent._tree.children.length,a=a._parent,!a))return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,r=0){let s;if(!(r&wt.IgnoreOverlays)&&(s=mu.get(this._tree))&&s.overlay){let l=e-this.from;for(let{from:a,to:c}of s.overlay)if((t>0?a<=l:a<l)&&(t<0?c>=l:c>l))return new On(s.tree,s.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,r)}nextSignificantParent(){let e=this;for(;e.type.isAnonymous&&e._parent;)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function W0(n,e,t,r){let s=n.cursor(),l=[];if(!s.firstChild())return l;if(t!=null){for(let a=!1;!a;)if(a=s.type.is(t),!s.nextSibling())return l}for(;;){if(r!=null&&s.type.is(r))return l;if(s.type.is(e)&&l.push(s.node),!s.nextSibling())return r==null?l:[]}}function Wf(n,e,t=e.length-1){for(let r=n;t>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(e[t]&&e[t]!=r.name)return!1;t--}}return!0}class iP{constructor(e,t,r,s){this.parent=e,this.buffer=t,this.index=r,this.start=s}}class ti extends Tx{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,r){super(),this.context=e,this._parent=t,this.index=r,this.type=e.buffer.set.types[e.buffer.buffer[r]]}child(e,t,r){let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.context.start,r);return l<0?null:new ti(this.context,this,l)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,r=0){if(r&wt.ExcludeBuffers)return null;let{buffer:s}=this.context,l=s.findChild(this.index+4,s.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return l<0?null:new ti(this.context,this,l)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new ti(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new ti(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:r}=this.context,s=this.index+4,l=r.buffer[this.index+3];if(l>s){let a=r.buffer[this.index+1];e.push(r.slice(s,l,a)),t.push(0)}return new ut(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Lx(n){if(!n.length)return null;let e=0,t=n[0];for(let l=1;l<n.length;l++){let a=n[l];(a.from>t.from||a.to<t.to)&&(t=a,e=l)}let r=t instanceof On&&t.index<0?null:t.parent,s=n.slice();return r?s[e]=r:s.splice(e,1),new sP(s,t)}class sP{constructor(e,t){this.heads=e,this.node=t}get next(){return Lx(this.heads)}}function oP(n,e,t){let r=n.resolveInner(e,t),s=null;for(let l=r instanceof On?r:r.context.parent;l;l=l.parent)if(l.index<0){let a=l.parent;(s||(s=[r])).push(a.resolve(e,t)),l=a}else{let a=mu.get(l.tree);if(a&&a.overlay&&a.overlay[0].from<=e&&a.overlay[a.overlay.length-1].to>=e){let c=new On(a.tree,a.overlay[0].from+l.from,-1,l);(s||(s=[r])).push(Jo(c,e,t,!1))}}return s?Lx(s):r}class Qf{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof On)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let r=e._parent;r;r=r._parent)this.stack.unshift(r.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return e?(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0):!1}yieldBuf(e,t){this.index=e;let{start:r,buffer:s}=this.buffer;return this.type=t||s.set.types[s.buffer[e]],this.from=r+s.buffer[e+1],this.to=r+s.buffer[e+2],!0}yield(e){return e?e instanceof On?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)):!1}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,r){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,r,this.mode));let{buffer:s}=this.buffer,l=s.findChild(this.index+4,s.buffer[this.index+3],e,t-this.buffer.start,r);return l<0?!1:(this.stack.push(this.index),this.yieldBuf(l))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,r=this.mode){return this.buffer?r&wt.ExcludeBuffers?!1:this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,r))}parent(){if(!this.buffer)return this.yieldNode(this.mode&wt.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&wt.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return this._tree._parent?this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode)):!1;let{buffer:t}=this.buffer,r=this.stack.length-1;if(e<0){let s=r<0?0:this.stack[r]+4;if(this.index!=s)return this.yieldBuf(t.findChild(s,this.index,-1,0,4))}else{let s=t.buffer[this.index+3];if(s<(r<0?t.buffer.length:t.buffer[this.stack[r]+3]))return this.yieldBuf(s)}return r<0?this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode)):!1}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,r,{buffer:s}=this;if(s){if(e>0){if(this.index<s.buffer.buffer.length)return!1}else for(let l=0;l<this.index;l++)if(s.buffer.buffer[l+3]<this.index)return!1;({index:t,parent:r}=s)}else({index:t,_parent:r}=this._tree);for(;r;{index:t,_parent:r}=r)if(t>-1)for(let l=t+e,a=e<0?-1:r._tree.children.length;l!=a;l+=e){let c=r._tree.children[l];if(this.mode&wt.IncludeAnonymous||c instanceof ai||!c.type.isAnonymous||Rd(c))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){for(;(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))&&this.parent(););for(;this.enterChild(1,e,t););return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,r=0;if(e&&e.context==this.buffer)e:for(let s=this.index,l=this.stack.length;l>=0;){for(let a=e;a;a=a._parent)if(a.index==s){if(s==this.index)return a;t=a,r=l+1;break e}s=this.stack[--l]}for(let s=r;s<this.stack.length;s++)t=new ti(this.buffer,t,this.stack[s]);return this.bufferNode=new ti(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let r=0;;){let s=!1;if(this.type.isAnonymous||e(this)!==!1){if(this.firstChild()){r++;continue}this.type.isAnonymous||(s=!0)}for(;;){if(s&&t&&t(this),s=this.type.isAnonymous,!r)return;if(this.nextSibling())break;this.parent(),r--,s=!0}}}matchContext(e){if(!this.buffer)return Wf(this.node.parent,e);let{buffer:t}=this.buffer,{types:r}=t.set;for(let s=e.length-1,l=this.stack.length-1;s>=0;l--){if(l<0)return Wf(this._tree,e,s);let a=r[t.buffer[this.stack[l]]];if(!a.isAnonymous){if(e[s]&&e[s]!=a.name)return!1;s--}}return!0}}function Rd(n){return n.children.some(e=>e instanceof ai||!e.type.isAnonymous||Rd(e))}function lP(n){var e;let{buffer:t,nodeSet:r,maxBufferLength:s=Nx,reused:l=[],minRepeatType:a=r.types.length}=n,c=Array.isArray(t)?new Md(t,t.length):t,h=r.types,p=0,d=0;function m(T,F,L,V,q,Y){let{id:H,start:W,end:J,size:Z}=c,U=d,ue=p;if(Z<0)if(c.next(),Z==-1){let A=l[H];L.push(A),V.push(W-T);return}else if(Z==-3){p=H;return}else if(Z==-4){d=H;return}else throw new RangeError(`Unrecognized record size: ${Z}`);let fe=h[H],X,re,ee=W-T;if(J-W<=s&&(re=C(c.pos-F,q))){let A=new Uint16Array(re.size-re.skip),j=c.pos-re.size,se=A.length;for(;c.pos>j;)se=P(re.start,A,se);X=new ai(A,J-re.start,r),ee=re.start-T}else{let A=c.pos-Z;c.next();let j=[],se=[],de=H>=a?H:-1,xe=0,te=J;for(;c.pos>A;)de>=0&&c.id==de&&c.size>=0?(c.end<=te-s&&(b(j,se,W,xe,c.end,te,de,U,ue),xe=j.length,te=c.end),c.next()):Y>2500?v(W,A,j,se):m(W,A,j,se,de,Y+1);if(de>=0&&xe>0&&xe<j.length&&b(j,se,W,xe,W,te,de,U,ue),j.reverse(),se.reverse(),de>-1&&xe>0){let he=x(fe,ue);X=Nd(fe,j,se,0,j.length,0,J-W,he,he)}else X=S(fe,j,se,J-W,U-J,ue)}L.push(X),V.push(ee)}function v(T,F,L,V){let q=[],Y=0,H=-1;for(;c.pos>F;){let{id:W,start:J,end:Z,size:U}=c;if(U>4)c.next();else{if(H>-1&&J<H)break;H<0&&(H=Z-s),q.push(W,J,Z),Y++,c.next()}}if(Y){let W=new Uint16Array(Y*4),J=q[q.length-2];for(let Z=q.length-3,U=0;Z>=0;Z-=3)W[U++]=q[Z],W[U++]=q[Z+1]-J,W[U++]=q[Z+2]-J,W[U++]=U;L.push(new ai(W,q[2]-J,r)),V.push(J-T)}}function x(T,F){return(L,V,q)=>{let Y=0,H=L.length-1,W,J;if(H>=0&&(W=L[H])instanceof ut){if(!H&&W.type==T&&W.length==q)return W;(J=W.prop(Me.lookAhead))&&(Y=V[H]+W.length+J)}return S(T,L,V,q,Y,F)}}function b(T,F,L,V,q,Y,H,W,J){let Z=[],U=[];for(;T.length>V;)Z.push(T.pop()),U.push(F.pop()+L-q);T.push(S(r.types[H],Z,U,Y-q,W-Y,J)),F.push(q-L)}function S(T,F,L,V,q,Y,H){if(Y){let W=[Me.contextHash,Y];H=H?[W].concat(H):[W]}if(q>25){let W=[Me.lookAhead,q];H=H?[W].concat(H):[W]}return new ut(T,F,L,V,H)}function C(T,F){let L=c.fork(),V=0,q=0,Y=0,H=L.end-s,W={size:0,start:0,skip:0};e:for(let J=L.pos-T;L.pos>J;){let Z=L.size;if(L.id==F&&Z>=0){W.size=V,W.start=q,W.skip=Y,Y+=4,V+=4,L.next();continue}let U=L.pos-Z;if(Z<0||U<J||L.start<H)break;let ue=L.id>=a?4:0,fe=L.start;for(L.next();L.pos>U;){if(L.size<0)if(L.size==-3)ue+=4;else break e;else L.id>=a&&(ue+=4);L.next()}q=fe,V+=Z,Y+=ue}return(F<0||V==T)&&(W.size=V,W.start=q,W.skip=Y),W.size>4?W:void 0}function P(T,F,L){let{id:V,start:q,end:Y,size:H}=c;if(c.next(),H>=0&&V<a){let W=L;if(H>4){let J=c.pos-(H-4);for(;c.pos>J;)L=P(T,F,L)}F[--L]=W,F[--L]=Y-T,F[--L]=q-T,F[--L]=V}else H==-3?p=V:H==-4&&(d=V);return L}let N=[],D=[];for(;c.pos>0;)m(n.start||0,n.bufferStart||0,N,D,-1,0);let B=(e=n.length)!==null&&e!==void 0?e:N.length?D[0]+N[0].length:0;return new ut(h[n.topID],N.reverse(),D.reverse(),B)}const Q0=new WeakMap;function eu(n,e){if(!n.isAnonymous||e instanceof ai||e.type!=n)return 1;let t=Q0.get(e);if(t==null){t=1;for(let r of e.children){if(r.type!=n||!(r instanceof ut)){t=1;break}t+=eu(n,r)}Q0.set(e,t)}return t}function Nd(n,e,t,r,s,l,a,c,h){let p=0;for(let b=r;b<s;b++)p+=eu(n,e[b]);let d=Math.ceil(p*1.5/8),m=[],v=[];function x(b,S,C,P,N){for(let D=C;D<P;){let B=D,T=S[D],F=eu(n,b[D]);for(D++;D<P;D++){let L=eu(n,b[D]);if(F+L>=d)break;F+=L}if(D==B+1){if(F>d){let L=b[B];x(L.children,L.positions,0,L.children.length,S[B]+N);continue}m.push(b[B])}else{let L=S[D-1]+b[D-1].length-T;m.push(Nd(n,b,S,B,D,T,L,null,h))}v.push(T+N-l)}}return x(e,t,r,s,0),(c||h)(m,v,a)}class Ni{constructor(e,t,r,s,l=!1,a=!1){this.from=e,this.to=t,this.tree=r,this.offset=s,this.open=(l?1:0)|(a?2:0)}get openStart(){return(this.open&1)>0}get openEnd(){return(this.open&2)>0}static addTree(e,t=[],r=!1){let s=[new Ni(0,e.length,e,0,!1,r)];for(let l of t)l.to>e.length&&s.push(l);return s}static applyChanges(e,t,r=128){if(!t.length)return e;let s=[],l=1,a=e.length?e[0]:null;for(let c=0,h=0,p=0;;c++){let d=c<t.length?t[c]:null,m=d?d.fromA:1e9;if(m-h>=r)for(;a&&a.from<m;){let v=a;if(h>=v.from||m<=v.to||p){let x=Math.max(v.from,h)-p,b=Math.min(v.to,m)-p;v=x>=b?null:new Ni(x,b,v.tree,v.offset+p,c>0,!!d)}if(v&&s.push(v),a.to>m)break;a=l<e.length?e[l++]:null}if(!d)break;h=d.toA,p=d.toA-d.toB}return s}}let jx=class{startParse(e,t,r){return typeof e=="string"&&(e=new aP(e)),r=r?r.length?r.map(s=>new Qh(s.from,s.to)):[new Qh(0,0)]:[new Qh(0,e.length)],this.createParse(e,t||[],r)}parse(e,t,r){let s=this.startParse(e,t,r);for(;;){let l=s.advance();if(l)return l}}};class aP{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}new Me({perNode:!0});var $0={};class yu{constructor(e,t,r,s,l,a,c,h,p,d=0,m){this.p=e,this.stack=t,this.state=r,this.reducePos=s,this.pos=l,this.score=a,this.buffer=c,this.bufferBase=h,this.curContext=p,this.lookAhead=d,this.parent=m}toString(){return`[${this.stack.filter((e,t)=>t%3==0).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,r=0){let s=e.parser.context;return new yu(e,[],t,r,r,0,[],0,s?new U0(s,s.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let r=e>>19,s=e&65535,{parser:l}=this.p,a=this.reducePos<this.pos-25;a&&this.setLookAhead(this.pos);let c=l.dynamicPrecedence(s);if(c&&(this.score+=c),r==0){this.pushState(l.getGoto(this.state,s,!0),this.reducePos),s<l.minRepeatTerm&&this.storeNode(s,this.reducePos,this.reducePos,a?8:4,!0),this.reduceContext(s,this.reducePos);return}let h=this.stack.length-(r-1)*3-(e&262144?6:0),p=h?this.stack[h-2]:this.p.ranges[0].from,d=this.reducePos-p;d>=2e3&&!(!((t=this.p.parser.nodeSet.types[s])===null||t===void 0)&&t.isAnonymous)&&(p==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=d):this.p.lastBigReductionSize<d&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=p,this.p.lastBigReductionSize=d));let m=h?this.stack[h-1]:0,v=this.bufferBase+this.buffer.length-m;if(s<l.minRepeatTerm||e&131072){let x=l.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(s,p,x,v+4,!0)}if(e&262144)this.state=this.stack[h];else{let x=this.stack[h-3];this.state=l.getGoto(x,s,!0)}for(;this.stack.length>h;)this.stack.pop();this.reduceContext(s,p)}storeNode(e,t,r,s=4,l=!1){if(e==0&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let a=this,c=this.buffer.length;if(c==0&&a.parent&&(c=a.bufferBase-a.parent.bufferBase,a=a.parent),c>0&&a.buffer[c-4]==0&&a.buffer[c-1]>-1){if(t==r)return;if(a.buffer[c-2]>=t){a.buffer[c-2]=r;return}}}if(!l||this.pos==r)this.buffer.push(e,t,r,s);else{let a=this.buffer.length;if(a>0&&(this.buffer[a-4]!=0||this.buffer[a-1]<0)){let c=!1;for(let h=a;h>0&&this.buffer[h-2]>r;h-=4)if(this.buffer[h-1]>=0){c=!0;break}if(c)for(;a>0&&this.buffer[a-2]>r;)this.buffer[a]=this.buffer[a-4],this.buffer[a+1]=this.buffer[a-3],this.buffer[a+2]=this.buffer[a-2],this.buffer[a+3]=this.buffer[a-1],a-=4,s>4&&(s-=4)}this.buffer[a]=e,this.buffer[a+1]=t,this.buffer[a+2]=r,this.buffer[a+3]=s}}shift(e,t,r,s){if(e&131072)this.pushState(e&65535,this.pos);else if((e&262144)==0){let l=e,{parser:a}=this.p;(s>this.pos||t<=a.maxNode)&&(this.pos=s,a.stateFlag(l,1)||(this.reducePos=s)),this.pushState(l,r),this.shiftContext(t,r),t<=a.maxNode&&this.buffer.push(t,r,s,4)}else this.pos=s,this.shiftContext(t,r),t<=this.p.parser.maxNode&&this.buffer.push(t,r,s,4)}apply(e,t,r,s){e&65536?this.reduce(e):this.shift(e,t,r,s)}useNode(e,t){let r=this.p.reused.length-1;(r<0||this.p.reused[r]!=e)&&(this.p.reused.push(e),r++);let s=this.pos;this.reducePos=this.pos=s+e.length,this.pushState(t,s),this.buffer.push(r,s,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;for(;t>0&&e.buffer[t-2]>e.reducePos;)t-=4;let r=e.buffer.slice(t),s=e.bufferBase+t;for(;e&&s==e.bufferBase;)e=e.parent;return new yu(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,r,s,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let r=e<=this.p.parser.maxNode;r&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,r?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new uP(this);;){let r=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(r==0)return!1;if((r&65536)==0)return!0;t.reduce(r)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let s=[];for(let l=0,a;l<t.length;l+=2)(a=t[l+1])!=this.state&&this.p.parser.hasAction(a,e)&&s.push(t[l],a);if(this.stack.length<120)for(let l=0;s.length<8&&l<t.length;l+=2){let a=t[l+1];s.some((c,h)=>h&1&&c==a)||s.push(t[l],a)}t=s}let r=[];for(let s=0;s<t.length&&r.length<4;s+=2){let l=t[s+1];if(l==this.state)continue;let a=this.split();a.pushState(l,this.pos),a.storeNode(0,a.pos,a.pos,4,!0),a.shiftContext(t[s],this.pos),a.reducePos=this.pos,a.score-=200,r.push(a)}return r}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if((t&65536)==0)return!1;if(!e.validAction(this.state,t)){let r=t>>19,s=t&65535,l=this.stack.length-r*3;if(l<0||e.getGoto(this.stack[l],s,!1)<0){let a=this.findForcedReduction();if(a==null)return!1;t=a}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],r=(s,l)=>{if(!t.includes(s))return t.push(s),e.allActions(s,a=>{if(!(a&393216))if(a&65536){let c=(a>>19)-l;if(c>1){let h=a&65535,p=this.stack.length-c*3;if(p>=0&&e.getGoto(this.stack[p],h,!1)>=0)return c<<19|65536|h}}else{let c=r(a,l+1);if(c!=null)return c}})};return r(this.state,0)}forceAll(){for(;!this.p.parser.stateFlag(this.state,2);)if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(this.stack.length!=3)return!1;let{parser:e}=this.p;return e.data[e.stateSlot(this.state,1)]==65535&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-3)&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||this.buffer[e]!=-4)&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new U0(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class U0{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class uP{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=e&65535,r=e>>19;r==0?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=(r-1)*3;let s=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=s}}class vu{constructor(e,t,r){this.stack=e,this.pos=t,this.index=r,this.buffer=e.buffer,this.index==0&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new vu(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;e!=null&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,this.index==0&&this.maybeNext()}fork(){return new vu(this.stack,this.pos,this.index)}}function za(n,e=Uint16Array){if(typeof n!="string")return n;let t=null;for(let r=0,s=0;r<n.length;){let l=0;for(;;){let a=n.charCodeAt(r++),c=!1;if(a==126){l=65535;break}a>=92&&a--,a>=34&&a--;let h=a-32;if(h>=46&&(h-=46,c=!0),l+=h,c)break;l*=46}t?t[s++]=l:t=new e(l)}return t}class tu{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const X0=new tu;class cP{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=X0,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let r=this.range,s=this.rangeIndex,l=this.pos+e;for(;l<r.from;){if(!s)return null;let a=this.ranges[--s];l-=r.from-a.to,r=a}for(;t<0?l>r.to:l>=r.to;){if(s==this.ranges.length-1)return null;let a=this.ranges[++s];l+=a.from-r.to,r=a}return l}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t=this.chunkOff+e,r,s;if(t>=0&&t<this.chunk.length)r=this.pos+e,s=this.chunk.charCodeAt(t);else{let l=this.resolveOffset(e,1);if(l==null)return-1;if(r=l,r>=this.chunk2Pos&&r<this.chunk2Pos+this.chunk2.length)s=this.chunk2.charCodeAt(r-this.chunk2Pos);else{let a=this.rangeIndex,c=this.range;for(;c.to<=r;)c=this.ranges[++a];this.chunk2=this.input.chunk(this.chunk2Pos=r),r+this.chunk2.length>c.to&&(this.chunk2=this.chunk2.slice(0,c.to-r)),s=this.chunk2.charCodeAt(0)}}return r>=this.token.lookAhead&&(this.token.lookAhead=r+1),s}acceptToken(e,t=0){let r=t?this.resolveOffset(t,-1):this.pos;if(r==null||r<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=r}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){for(this.chunkOff+=e;this.pos+e>=this.range.to;){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=X0,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;for(;e<this.range.from;)this.range=this.ranges[--this.rangeIndex];for(;e>=this.range.to;)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let r="";for(let s of this.ranges){if(s.from>=t)break;s.to>e&&(r+=this.input.read(Math.max(s.from,e),Math.min(s.to,t)))}return r}}class ys{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:r}=t.p;hP(this.data,e,t,this.id,r.data,r.tokenPrecTable)}}ys.prototype.contextual=ys.prototype.fallback=ys.prototype.extend=!1;ys.prototype.fallback=ys.prototype.extend=!1;class ju{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function hP(n,e,t,r,s,l){let a=0,c=1<<r,{dialect:h}=t.p.parser;e:for(;(c&n[a])!=0;){let p=n[a+1];for(let x=a+3;x<p;x+=2)if((n[x+1]&c)>0){let b=n[x];if(h.allows(b)&&(e.token.value==-1||e.token.value==b||fP(b,e.token.value,s,l))){e.acceptToken(b);break}}let d=e.next,m=0,v=n[a+2];if(e.next<0&&v>m&&n[p+v*3-3]==65535){a=n[p+v*3-1];continue e}for(;m<v;){let x=m+v>>1,b=p+x+(x<<1),S=n[b],C=n[b+1]||65536;if(d<S)v=x;else if(d>=C)m=x+1;else{a=n[b+2],e.advance();continue e}}break}}function K0(n,e,t){for(let r=e,s;(s=n[r])!=65535;r++)if(s==t)return r-e;return-1}function fP(n,e,t,r){let s=K0(t,r,e);return s<0||K0(t,r,n)<s}const cn=typeof process<"u"&&$0&&/\bparse\b/.test($0.LOG);let $h=null;function q0(n,e,t){let r=n.cursor(wt.IncludeAnonymous);for(r.moveTo(e);;)if(!(t<0?r.childBefore(e):r.childAfter(e)))for(;;){if((t<0?r.to<e:r.from>e)&&!r.type.isError)return t<0?Math.max(0,Math.min(r.to-1,e-25)):Math.min(n.length,Math.max(r.from+1,e+25));if(t<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return t<0?0:n.length}}class dP{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){for(this.safeFrom=e.openStart?q0(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?q0(e.tree,e.to+e.offset,-1)-e.offset:e.to;this.trees.length;)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;for(;this.fragment&&this.safeTo<=e;)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let r=this.trees[t],s=this.index[t];if(s==r.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let l=r.children[s],a=this.start[t]+r.positions[s];if(a>e)return this.nextStart=a,null;if(l instanceof ut){if(a==e){if(a<this.safeFrom)return null;let c=a+l.length;if(c<=this.safeTo){let h=l.prop(Me.lookAhead);if(!h||c+h<this.fragment.to)return l}}this.index[t]++,a+l.length>=Math.max(this.safeFrom,e)&&(this.trees.push(l),this.start.push(a),this.index.push(0))}else this.index[t]++,this.nextStart=a+l.length}}}class pP{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map(r=>new tu)}getActions(e){let t=0,r=null,{parser:s}=e.p,{tokenizers:l}=s,a=s.stateSlot(e.state,3),c=e.curContext?e.curContext.hash:0,h=0;for(let p=0;p<l.length;p++){if((1<<p&a)==0)continue;let d=l[p],m=this.tokens[p];if(!(r&&!d.fallback)&&((d.contextual||m.start!=e.pos||m.mask!=a||m.context!=c)&&(this.updateCachedToken(m,d,e),m.mask=a,m.context=c),m.lookAhead>m.end+25&&(h=Math.max(m.lookAhead,h)),m.value!=0)){let v=t;if(m.extended>-1&&(t=this.addActions(e,m.extended,m.end,t)),t=this.addActions(e,m.value,m.end,t),!d.extend&&(r=m,t>v))break}}for(;this.actions.length>t;)this.actions.pop();return h&&e.setLookAhead(h),!r&&e.pos==this.stream.end&&(r=new tu,r.value=e.p.parser.eofTerm,r.start=r.end=e.pos,t=this.addActions(e,r.value,r.end,t)),this.mainToken=r,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new tu,{pos:r,p:s}=e;return t.start=r,t.end=Math.min(r+1,s.stream.end),t.value=r==s.stream.end?s.parser.eofTerm:0,t}updateCachedToken(e,t,r){let s=this.stream.clipPos(r.pos);if(t.token(this.stream.reset(s,e),r),e.value>-1){let{parser:l}=r.p;for(let a=0;a<l.specialized.length;a++)if(l.specialized[a]==e.value){let c=l.specializers[a](this.stream.read(e.start,e.end),r);if(c>=0&&r.p.parser.dialect.allows(c>>1)){(c&1)==0?e.value=c>>1:e.extended=c>>1;break}}}else e.value=0,e.end=this.stream.clipPos(s+1)}putAction(e,t,r,s){for(let l=0;l<s;l+=3)if(this.actions[l]==e)return s;return this.actions[s++]=e,this.actions[s++]=t,this.actions[s++]=r,s}addActions(e,t,r,s){let{state:l}=e,{parser:a}=e.p,{data:c}=a;for(let h=0;h<2;h++)for(let p=a.stateSlot(l,h?2:1);;p+=3){if(c[p]==65535)if(c[p+1]==1)p=xr(c,p+2);else{s==0&&c[p+1]==2&&(s=this.putAction(xr(c,p+2),t,r,s));break}c[p]==t&&(s=this.putAction(xr(c,p+1),t,r,s))}return s}}class gP{constructor(e,t,r,s){this.parser=e,this.input=t,this.ranges=s,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new cP(t,s),this.tokens=new pP(e,this.stream),this.topTerm=e.top[1];let{from:l}=s[0];this.stacks=[yu.start(this,e.top[0],l)],this.fragments=r.length&&this.stream.end-l>e.bufferLength*4?new dP(r,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e=this.stacks,t=this.minStackPos,r=this.stacks=[],s,l;if(this.bigReductionCount>300&&e.length==1){let[a]=e;for(;a.forceReduce()&&a.stack.length&&a.stack[a.stack.length-2]>=this.lastBigReductionStart;);this.bigReductionCount=this.lastBigReductionSize=0}for(let a=0;a<e.length;a++){let c=e[a];for(;;){if(this.tokens.mainToken=null,c.pos>t)r.push(c);else{if(this.advanceStack(c,r,e))continue;{s||(s=[],l=[]),s.push(c);let h=this.tokens.getMainToken(c);l.push(h.value,h.end)}}break}}if(!r.length){let a=s&&vP(s);if(a)return cn&&console.log("Finish with "+this.stackID(a)),this.stackToTree(a);if(this.parser.strict)throw cn&&s&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+t);this.recovering||(this.recovering=5)}if(this.recovering&&s){let a=this.stoppedAt!=null&&s[0].pos>this.stoppedAt?s[0]:this.runRecovery(s,l,r);if(a)return cn&&console.log("Force-finish "+this.stackID(a)),this.stackToTree(a.forceAll())}if(this.recovering){let a=this.recovering==1?1:this.recovering*3;if(r.length>a)for(r.sort((c,h)=>h.score-c.score);r.length>a;)r.pop();r.some(c=>c.reducePos>t)&&this.recovering--}else if(r.length>1){e:for(let a=0;a<r.length-1;a++){let c=r[a];for(let h=a+1;h<r.length;h++){let p=r[h];if(c.sameState(p)||c.buffer.length>500&&p.buffer.length>500)if((c.score-p.score||c.buffer.length-p.buffer.length)>0)r.splice(h--,1);else{r.splice(a--,1);continue e}}}r.length>12&&r.splice(12,r.length-12)}this.minStackPos=r[0].pos;for(let a=1;a<r.length;a++)r[a].pos<this.minStackPos&&(this.minStackPos=r[a].pos);return null}stopAt(e){if(this.stoppedAt!=null&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,r){let s=e.pos,{parser:l}=this,a=cn?this.stackID(e)+" -> ":"";if(this.stoppedAt!=null&&s>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let p=e.curContext&&e.curContext.tracker.strict,d=p?e.curContext.hash:0;for(let m=this.fragments.nodeAt(s);m;){let v=this.parser.nodeSet.types[m.type.id]==m.type?l.getGoto(e.state,m.type.id):-1;if(v>-1&&m.length&&(!p||(m.prop(Me.contextHash)||0)==d))return e.useNode(m,v),cn&&console.log(a+this.stackID(e)+` (via reuse of ${l.getName(m.type.id)})`),!0;if(!(m instanceof ut)||m.children.length==0||m.positions[0]>0)break;let x=m.children[0];if(x instanceof ut&&m.positions[0]==0)m=x;else break}}let c=l.stateSlot(e.state,4);if(c>0)return e.reduce(c),cn&&console.log(a+this.stackID(e)+` (via always-reduce ${l.getName(c&65535)})`),!0;if(e.stack.length>=8400)for(;e.stack.length>6e3&&e.forceReduce(););let h=this.tokens.getActions(e);for(let p=0;p<h.length;){let d=h[p++],m=h[p++],v=h[p++],x=p==h.length||!r,b=x?e:e.split(),S=this.tokens.mainToken;if(b.apply(d,m,S?S.start:b.pos,v),cn&&console.log(a+this.stackID(b)+` (via ${(d&65536)==0?"shift":`reduce of ${l.getName(d&65535)}`} for ${l.getName(m)} @ ${s}${b==e?"":", split"})`),x)return!0;b.pos>s?t.push(b):r.push(b)}return!1}advanceFully(e,t){let r=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>r)return Y0(e,t),!0}}runRecovery(e,t,r){let s=null,l=!1;for(let a=0;a<e.length;a++){let c=e[a],h=t[a<<1],p=t[(a<<1)+1],d=cn?this.stackID(c)+" -> ":"";if(c.deadEnd&&(l||(l=!0,c.restart(),cn&&console.log(d+this.stackID(c)+" (restarted)"),this.advanceFully(c,r))))continue;let m=c.split(),v=d;for(let x=0;x<10&&m.forceReduce()&&(cn&&console.log(v+this.stackID(m)+" (via force-reduce)"),!this.advanceFully(m,r));x++)cn&&(v=this.stackID(m)+" -> ");for(let x of c.recoverByInsert(h))cn&&console.log(d+this.stackID(x)+" (via recover-insert)"),this.advanceFully(x,r);this.stream.end>c.pos?(p==c.pos&&(p++,h=0),c.recoverByDelete(h,p),cn&&console.log(d+this.stackID(c)+` (via recover-delete ${this.parser.getName(h)})`),Y0(c,r)):(!s||s.score<c.score)&&(s=c)}return s}stackToTree(e){return e.close(),ut.build({buffer:vu.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=($h||($h=new WeakMap)).get(e);return t||$h.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Y0(n,e){for(let t=0;t<e.length;t++){let r=e[t];if(r.pos==n.pos&&r.sameState(n)){e[t].score<n.score&&(e[t]=n);return}}e.push(n)}class mP{constructor(e,t,r){this.source=e,this.flags=t,this.disabled=r}allows(e){return!this.disabled||this.disabled[e]==0}}const Uh=n=>n;class yP{constructor(e){this.start=e.start,this.shift=e.shift||Uh,this.reduce=e.reduce||Uh,this.reuse=e.reuse||Uh,this.hash=e.hash||(()=>0),this.strict=e.strict!==!1}}class xu extends jx{constructor(e){if(super(),this.wrappers=[],e.version!=14)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let c=0;c<e.repeatNodeCount;c++)t.push("");let r=Object.keys(e.topRules).map(c=>e.topRules[c][1]),s=[];for(let c=0;c<t.length;c++)s.push([]);function l(c,h,p){s[c].push([h,h.deserialize(String(p))])}if(e.nodeProps)for(let c of e.nodeProps){let h=c[0];typeof h=="string"&&(h=Me[h]);for(let p=1;p<c.length;){let d=c[p++];if(d>=0)l(d,h,c[p++]);else{let m=c[p+-d];for(let v=-d;v>0;v--)l(c[p++],h,m);p++}}}this.nodeSet=new Ad(t.map((c,h)=>en.define({name:h>=this.minRepeatTerm?void 0:c,id:h,props:s[h],top:r.indexOf(h)>-1,error:h==0,skipped:e.skippedNodes&&e.skippedNodes.indexOf(h)>-1}))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=Nx;let a=za(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let c=0;c<this.specializerSpecs.length;c++)this.specialized[c]=this.specializerSpecs[c].term;this.specializers=this.specializerSpecs.map(G0),this.states=za(e.states,Uint32Array),this.data=za(e.stateData),this.goto=za(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map(c=>typeof c=="number"?new ys(a,c):c),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,r){let s=new gP(this,e,t,r);for(let l of this.wrappers)s=l(s,e,t,r);return s}getGoto(e,t,r=!1){let s=this.goto;if(t>=s[0])return-1;for(let l=s[t+1];;){let a=s[l++],c=a&1,h=s[l++];if(c&&r)return h;for(let p=l+(a>>1);l<p;l++)if(s[l]==e)return h;if(c)return-1}}hasAction(e,t){let r=this.data;for(let s=0;s<2;s++)for(let l=this.stateSlot(e,s?2:1),a;;l+=3){if((a=r[l])==65535)if(r[l+1]==1)a=r[l=xr(r,l+2)];else{if(r[l+1]==2)return xr(r,l+2);break}if(a==t||a==0)return xr(r,l+1)}return 0}stateSlot(e,t){return this.states[e*6+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,r=>r==t?!0:null)}allActions(e,t){let r=this.stateSlot(e,4),s=r?t(r):void 0;for(let l=this.stateSlot(e,1);s==null;l+=3){if(this.data[l]==65535)if(this.data[l+1]==1)l=xr(this.data,l+2);else break;s=t(xr(this.data,l+1))}return s}nextStates(e){let t=[];for(let r=this.stateSlot(e,1);;r+=3){if(this.data[r]==65535)if(this.data[r+1]==1)r=xr(this.data,r+2);else break;if((this.data[r+2]&1)==0){let s=this.data[r+1];t.some((l,a)=>a&1&&l==s)||t.push(this.data[r],s)}}return t}configure(e){let t=Object.assign(Object.create(xu.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let r=this.topRules[e.top];if(!r)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=r}return e.tokenizers&&(t.tokenizers=this.tokenizers.map(r=>{let s=e.tokenizers.find(l=>l.from==r);return s?s.to:r})),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map((r,s)=>{let l=e.specializers.find(c=>c.from==r.external);if(!l)return r;let a=Object.assign(Object.assign({},r),{external:l.to});return t.specializers[s]=G0(a),a})),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),e.strict!=null&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),e.bufferLength!=null&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return t==null?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),r=t.map(()=>!1);if(e)for(let l of e.split(" ")){let a=t.indexOf(l);a>=0&&(r[a]=!0)}let s=null;for(let l=0;l<t.length;l++)if(!r[l])for(let a=this.dialects[t[l]],c;(c=this.data[a++])!=65535;)(s||(s=new Uint8Array(this.maxTerm+1)))[c]=1;return new mP(e,r,s)}static deserialize(e){return new xu(e)}}function xr(n,e){return n[e]|n[e+1]<<16}function vP(n){let e=null;for(let t of n){let r=t.p.stoppedAt;(t.pos==t.p.stream.end||r!=null&&t.pos>r)&&t.p.parser.stateFlag(t.state,2)&&(!e||e.score<t.score)&&(e=t)}return e}function G0(n){if(n.external){let e=n.extend?1:0;return(t,r)=>n.external(t,r)<<1|e}return n.get}let xP=0,kr=class $f{constructor(e,t,r,s){this.name=e,this.set=t,this.base=r,this.modified=s,this.id=xP++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let r=typeof e=="string"?e:"?";if(e instanceof $f&&(t=e),t!=null&&t.base)throw new Error("Can not derive from a modified tag");let s=new $f(r,[],null,[]);if(s.set.push(s),t)for(let l of t.set)s.set.push(l);return s}static defineModifier(e){let t=new ku(e);return r=>r.modified.indexOf(t)>-1?r:ku.get(r.base||r,r.modified.concat(t).sort((s,l)=>s.id-l.id))}},kP=0;class ku{constructor(e){this.name=e,this.instances=[],this.id=kP++}static get(e,t){if(!t.length)return e;let r=t[0].instances.find(c=>c.base==e&&wP(t,c.modified));if(r)return r;let s=[],l=new kr(e.name,s,e,t);for(let c of t)c.instances.push(l);let a=bP(t);for(let c of e.set)if(!c.modified.length)for(let h of a)s.push(ku.get(c,h));return l}}function wP(n,e){return n.length==e.length&&n.every((t,r)=>t==e[r])}function bP(n){let e=[[]];for(let t=0;t<n.length;t++)for(let r=0,s=e.length;r<s;r++)e.push(e[r].concat(n[t]));return e.sort((t,r)=>r.length-t.length)}function Ix(n){let e=Object.create(null);for(let t in n){let r=n[t];Array.isArray(r)||(r=[r]);for(let s of t.split(" "))if(s){let l=[],a=2,c=s;for(let m=0;;){if(c=="..."&&m>0&&m+3==s.length){a=1;break}let v=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(c);if(!v)throw new RangeError("Invalid path: "+s);if(l.push(v[0]=="*"?"":v[0][0]=='"'?JSON.parse(v[0]):v[0]),m+=v[0].length,m==s.length)break;let x=s[m++];if(m==s.length&&x=="!"){a=0;break}if(x!="/")throw new RangeError("Invalid path: "+s);c=s.slice(m)}let h=l.length-1,p=l[h];if(!p)throw new RangeError("Invalid path: "+s);let d=new Zo(r,a,h>0?l.slice(0,h):null);e[p]=d.sort(e[p])}}return Bx.add(e)}const Bx=new Me({combine(n,e){let t,r,s;for(;n||e;){if(!n||e&&n.depth>=e.depth?(s=e,e=e.next):(s=n,n=n.next),t&&t.mode==s.mode&&!s.context&&!t.context)continue;let l=new Zo(s.tags,s.mode,s.context);t?t.next=l:r=l,t=l}return r}});class Zo{constructor(e,t,r,s){this.tags=e,this.mode=t,this.context=r,this.next=s}get opaque(){return this.mode==0}get inherit(){return this.mode==1}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}Zo.empty=new Zo([],2,null);function zx(n,e){let t=Object.create(null);for(let l of n)if(!Array.isArray(l.tag))t[l.tag.id]=l.class;else for(let a of l.tag)t[a.id]=l.class;let{scope:r,all:s=null}=e||{};return{style:l=>{let a=s;for(let c of l)for(let h of c.set){let p=t[h.id];if(p){a=a?a+" "+p:p;break}}return a},scope:r}}function SP(n,e){let t=null;for(let r of n){let s=r.style(e);s&&(t=t?t+" "+s:s)}return t}function OP(n,e,t,r=0,s=n.length){let l=new CP(r,Array.isArray(e)?e:[e],t);l.highlightRange(n.cursor(),r,s,"",l.highlighters),l.flush(s)}class CP{constructor(e,t,r){this.at=e,this.highlighters=t,this.span=r,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,r,s,l){let{type:a,from:c,to:h}=e;if(c>=r||h<=t)return;a.isTop&&(l=this.highlighters.filter(x=>!x.scope||x.scope(a)));let p=s,d=PP(e)||Zo.empty,m=SP(l,d.tags);if(m&&(p&&(p+=" "),p+=m,d.mode==1&&(s+=(s?" ":"")+m)),this.startSpan(Math.max(t,c),p),d.opaque)return;let v=e.tree&&e.tree.prop(Me.mounted);if(v&&v.overlay){let x=e.node.enter(v.overlay[0].from+c,1),b=this.highlighters.filter(C=>!C.scope||C.scope(v.tree.type)),S=e.firstChild();for(let C=0,P=c;;C++){let N=C<v.overlay.length?v.overlay[C]:null,D=N?N.from+c:h,B=Math.max(t,P),T=Math.min(r,D);if(B<T&&S)for(;e.from<T&&(this.highlightRange(e,B,T,s,l),this.startSpan(Math.min(T,e.to),p),!(e.to>=D||!e.nextSibling())););if(!N||D>r)break;P=N.to+c,P>t&&(this.highlightRange(x.cursor(),Math.max(t,N.from+c),Math.min(r,P),"",b),this.startSpan(Math.min(r,P),p))}S&&e.parent()}else if(e.firstChild()){v&&(s="");do if(!(e.to<=t)){if(e.from>=r)break;this.highlightRange(e,t,r,s,l),this.startSpan(Math.min(r,e.to),p)}while(e.nextSibling());e.parent()}}}function PP(n){let e=n.type.prop(Bx);for(;e&&e.context&&!n.matchContext(e.context);)e=e.next;return e||null}const oe=kr.define,Fa=oe(),qr=oe(),J0=oe(qr),Z0=oe(qr),Yr=oe(),_a=oe(Yr),Xh=oe(Yr),tr=oe(),Ci=oe(tr),Zn=oe(),er=oe(),Uf=oe(),ko=oe(Uf),Ha=oe(),Q={comment:Fa,lineComment:oe(Fa),blockComment:oe(Fa),docComment:oe(Fa),name:qr,variableName:oe(qr),typeName:J0,tagName:oe(J0),propertyName:Z0,attributeName:oe(Z0),className:oe(qr),labelName:oe(qr),namespace:oe(qr),macroName:oe(qr),literal:Yr,string:_a,docString:oe(_a),character:oe(_a),attributeValue:oe(_a),number:Xh,integer:oe(Xh),float:oe(Xh),bool:oe(Yr),regexp:oe(Yr),escape:oe(Yr),color:oe(Yr),url:oe(Yr),keyword:Zn,self:oe(Zn),null:oe(Zn),atom:oe(Zn),unit:oe(Zn),modifier:oe(Zn),operatorKeyword:oe(Zn),controlKeyword:oe(Zn),definitionKeyword:oe(Zn),moduleKeyword:oe(Zn),operator:er,derefOperator:oe(er),arithmeticOperator:oe(er),logicOperator:oe(er),bitwiseOperator:oe(er),compareOperator:oe(er),updateOperator:oe(er),definitionOperator:oe(er),typeOperator:oe(er),controlOperator:oe(er),punctuation:Uf,separator:oe(Uf),bracket:ko,angleBracket:oe(ko),squareBracket:oe(ko),paren:oe(ko),brace:oe(ko),content:tr,heading:Ci,heading1:oe(Ci),heading2:oe(Ci),heading3:oe(Ci),heading4:oe(Ci),heading5:oe(Ci),heading6:oe(Ci),contentSeparator:oe(tr),list:oe(tr),quote:oe(tr),emphasis:oe(tr),strong:oe(tr),link:oe(tr),monospace:oe(tr),strikethrough:oe(tr),inserted:oe(),deleted:oe(),changed:oe(),invalid:oe(),meta:Ha,documentMeta:oe(Ha),annotation:oe(Ha),processingInstruction:oe(Ha),definition:kr.defineModifier("definition"),constant:kr.defineModifier("constant"),function:kr.defineModifier("function"),standard:kr.defineModifier("standard"),local:kr.defineModifier("local"),special:kr.defineModifier("special")};for(let n in Q){let e=Q[n];e instanceof kr&&(e.name=n)}zx([{tag:Q.link,class:"tok-link"},{tag:Q.heading,class:"tok-heading"},{tag:Q.emphasis,class:"tok-emphasis"},{tag:Q.strong,class:"tok-strong"},{tag:Q.keyword,class:"tok-keyword"},{tag:Q.atom,class:"tok-atom"},{tag:Q.bool,class:"tok-bool"},{tag:Q.url,class:"tok-url"},{tag:Q.labelName,class:"tok-labelName"},{tag:Q.inserted,class:"tok-inserted"},{tag:Q.deleted,class:"tok-deleted"},{tag:Q.literal,class:"tok-literal"},{tag:Q.string,class:"tok-string"},{tag:Q.number,class:"tok-number"},{tag:[Q.regexp,Q.escape,Q.special(Q.string)],class:"tok-string2"},{tag:Q.variableName,class:"tok-variableName"},{tag:Q.local(Q.variableName),class:"tok-variableName tok-local"},{tag:Q.definition(Q.variableName),class:"tok-variableName tok-definition"},{tag:Q.special(Q.variableName),class:"tok-variableName2"},{tag:Q.definition(Q.propertyName),class:"tok-propertyName tok-definition"},{tag:Q.typeName,class:"tok-typeName"},{tag:Q.namespace,class:"tok-namespace"},{tag:Q.className,class:"tok-className"},{tag:Q.macroName,class:"tok-macroName"},{tag:Q.propertyName,class:"tok-propertyName"},{tag:Q.operator,class:"tok-operator"},{tag:Q.comment,class:"tok-comment"},{tag:Q.meta,class:"tok-meta"},{tag:Q.invalid,class:"tok-invalid"},{tag:Q.punctuation,class:"tok-punctuation"}]);const ls=63,ey=64,EP=1,AP=2,Fx=3,MP=4,_x=5,RP=6,NP=7,Hx=65,DP=66,TP=8,LP=9,jP=10,IP=11,BP=12,Vx=13,zP=19,FP=20,_P=29,HP=33,VP=34,WP=47,QP=0,Dd=1,Xf=2,el=3,Kf=4;class Ai{constructor(e,t,r){this.parent=e,this.depth=t,this.type=r,this.hash=(e?e.hash+e.hash<<8:0)+t+(t<<4)+r}}Ai.top=new Ai(null,-1,QP);function zo(n,e){for(let t=0,r=e-n.pos-1;;r--,t++){let s=n.peek(r);if(Pr(s)||s==-1)return t}}function qf(n){return n==32||n==9}function Pr(n){return n==10||n==13}function Wx(n){return qf(n)||Pr(n)}function Ri(n){return n<0||Wx(n)}const $P=new yP({start:Ai.top,reduce(n,e){return n.type==el&&(e==FP||e==VP)?n.parent:n},shift(n,e,t,r){if(e==Fx)return new Ai(n,zo(r,r.pos),Dd);if(e==Hx||e==_x)return new Ai(n,zo(r,r.pos),Xf);if(e==ls)return n.parent;if(e==zP||e==HP)return new Ai(n,0,el);if(e==Vx&&n.type==Kf)return n.parent;if(e==WP){let s=/[1-9]/.exec(r.read(r.pos,t.pos));if(s)return new Ai(n,n.depth+ +s[0],Kf)}return n},hash(n){return n.hash}});function Ss(n,e,t=0){return n.peek(t)==e&&n.peek(t+1)==e&&n.peek(t+2)==e&&Ri(n.peek(t+3))}const UP=new ju((n,e)=>{if(n.next==-1&&e.canShift(ey))return n.acceptToken(ey);let t=n.peek(-1);if((Pr(t)||t<0)&&e.context.type!=el){if(Ss(n,45))if(e.canShift(ls))n.acceptToken(ls);else return n.acceptToken(EP,3);if(Ss(n,46))if(e.canShift(ls))n.acceptToken(ls);else return n.acceptToken(AP,3);let r=0;for(;n.next==32;)r++,n.advance();(r<e.context.depth||r==e.context.depth&&e.context.type==Dd&&(n.next!=45||!Ri(n.peek(1))))&&n.next!=-1&&!Pr(n.next)&&n.next!=35&&n.acceptToken(ls,-r)}},{contextual:!0}),XP=new ju((n,e)=>{if(e.context.type==el){n.next==63&&(n.advance(),Ri(n.next)&&n.acceptToken(NP));return}if(n.next==45)n.advance(),Ri(n.next)&&n.acceptToken(e.context.type==Dd&&e.context.depth==zo(n,n.pos-1)?MP:Fx);else if(n.next==63)n.advance(),Ri(n.next)&&n.acceptToken(e.context.type==Xf&&e.context.depth==zo(n,n.pos-1)?RP:_x);else{let t=n.pos;for(;;)if(qf(n.next)){if(n.pos==t)return;n.advance()}else if(n.next==33)Qx(n);else if(n.next==38)Yf(n);else if(n.next==42){Yf(n);break}else if(n.next==39||n.next==34){if(Td(n,!0))break;return}else if(n.next==91||n.next==123){if(!qP(n))return;break}else{$x(n,!0,!1,0);break}for(;qf(n.next);)n.advance();if(n.next==58){if(n.pos==t&&e.canShift(_P))return;let r=n.peek(1);Ri(r)&&n.acceptTokenTo(e.context.type==Xf&&e.context.depth==zo(n,t)?DP:Hx,t)}}},{contextual:!0});function KP(n){return n>32&&n<127&&n!=34&&n!=37&&n!=44&&n!=60&&n!=62&&n!=92&&n!=94&&n!=96&&n!=123&&n!=124&&n!=125}function ty(n){return n>=48&&n<=57||n>=97&&n<=102||n>=65&&n<=70}function ny(n,e){return n.next==37?(n.advance(),ty(n.next)&&n.advance(),ty(n.next)&&n.advance(),!0):KP(n.next)||e&&n.next==44?(n.advance(),!0):!1}function Qx(n){if(n.advance(),n.next==60){for(n.advance();;)if(!ny(n,!0)){n.next==62&&n.advance();break}}else for(;ny(n,!1););}function Yf(n){for(n.advance();!Ri(n.next)&&wu(n.tag)!="f";)n.advance()}function Td(n,e){let t=n.next,r=!1,s=n.pos;for(n.advance();;){let l=n.next;if(l<0)break;if(n.advance(),l==t)if(l==39)if(n.next==39)n.advance();else break;else break;else if(l==92&&t==34)n.next>=0&&n.advance();else if(Pr(l)){if(e)return!1;r=!0}else if(e&&n.pos>=s+1024)return!1}return!r}function qP(n){for(let e=[],t=n.pos+1024;;)if(n.next==91||n.next==123)e.push(n.next),n.advance();else if(n.next==39||n.next==34){if(!Td(n,!0))return!1}else if(n.next==93||n.next==125){if(e[e.length-1]!=n.next-2)return!1;if(e.pop(),n.advance(),!e.length)return!0}else{if(n.next<0||n.pos>t||Pr(n.next))return!1;n.advance()}}const YP="iiisiiissisfissssssssssssisssiiissssssssssssssssssssssssssfsfssissssssssssssssssssssssssssfif";function wu(n){return n<33?"u":n>125?"s":YP[n-33]}function Kh(n,e){let t=wu(n);return t!="u"&&!(e&&t=="f")}function $x(n,e,t,r){if(wu(n.next)=="s"||(n.next==63||n.next==58||n.next==45)&&Kh(n.peek(1),t))n.advance();else return!1;let s=n.pos;for(;;){let l=n.next,a=0,c=r+1;for(;Wx(l);){if(Pr(l)){if(e)return!1;c=0}else c++;l=n.peek(++a)}if(!(l>=0&&(l==58?Kh(n.peek(a+1),t):l==35?n.peek(a-1)!=32:Kh(l,t)))||!t&&c<=r||c==0&&!t&&(Ss(n,45,a)||Ss(n,46,a)))break;if(e&&wu(l)=="f")return!1;for(let p=a;p>=0;p--)n.advance();if(e&&n.pos>s+1024)return!1}return!0}const GP=new ju((n,e)=>{if(n.next==33)Qx(n),n.acceptToken(BP);else if(n.next==38||n.next==42){let t=n.next==38?jP:IP;Yf(n),n.acceptToken(t)}else n.next==39||n.next==34?(Td(n,!1),n.acceptToken(LP)):$x(n,!1,e.context.type==el,e.context.depth)&&n.acceptToken(TP)}),JP=new ju((n,e)=>{let t=e.context.type==Kf?e.context.depth:-1,r=n.pos;e:for(;;){let s=0,l=n.next;for(;l==32;)l=n.peek(++s);if(!s&&(Ss(n,45,s)||Ss(n,46,s))||!Pr(l)&&(t<0&&(t=Math.max(e.context.depth+1,s)),s<t))break;for(;;){if(n.next<0)break e;let a=Pr(n.next);if(n.advance(),a)continue e;r=n.pos}}n.acceptTokenTo(Vx,r)}),ZP=Ix({DirectiveName:Q.keyword,DirectiveContent:Q.attributeValue,"DirectiveEnd DocEnd":Q.meta,QuotedLiteral:Q.string,BlockLiteralHeader:Q.special(Q.string),BlockLiteralContent:Q.content,Literal:Q.content,"Key/Literal Key/QuotedLiteral":Q.definition(Q.propertyName),"Anchor Alias":Q.labelName,Tag:Q.typeName,Comment:Q.lineComment,": , -":Q.separator,"?":Q.punctuation,"[ ]":Q.squareBracket,"{ }":Q.brace}),eE=xu.deserialize({version:14,states:"5lQ!ZQgOOO#PQfO'#CpO#uQfO'#DOOOQR'#Dv'#DvO$qQgO'#DRO%gQdO'#DUO%nQgO'#DUO&ROaO'#D[OOQR'#Du'#DuO&{QgO'#D^O'rQgO'#D`OOQR'#Dt'#DtO(iOqO'#DbOOQP'#Dj'#DjO(zQaO'#CmO)YQgO'#CmOOQP'#Cm'#CmQ)jQaOOQ)uQgOOQ]QgOOO*PQdO'#CrO*nQdO'#CtOOQO'#Dw'#DwO+]Q`O'#CxO+hQdO'#CwO+rQ`O'#CwOOQO'#Cv'#CvO+wQdO'#CvOOQO'#Cq'#CqO,UQ`O,59[O,^QfO,59[OOQR,59[,59[OOQO'#Cx'#CxO,eQ`O'#DPO,pQdO'#DPOOQO'#Dx'#DxO,zQdO'#DxO-XQ`O,59jO-aQfO,59jOOQR,59j,59jOOQR'#DS'#DSO-hQcO,59mO-sQgO'#DVO.TQ`O'#DVO.YQcO,59pOOQR'#DX'#DXO#|QfO'#DWO.hQcO'#DWOOQR,59v,59vO.yOWO,59vO/OOaO,59vO/WOaO,59vO/cQgO'#D_OOQR,59x,59xO0VQgO'#DaOOQR,59z,59zOOQP,59|,59|O0yOaO,59|O1ROaO,59|O1aOqO,59|OOQP-E7h-E7hO1oQgO,59XOOQP,59X,59XO2PQaO'#DeO2_QgO'#DeO2oQgO'#DkOOQP'#Dk'#DkQ)jQaOOO3PQdO'#CsOOQO,59^,59^O3kQdO'#CuOOQO,59`,59`OOQO,59c,59cO4VQdO,59cO4aQdO'#CzO4kQ`O'#CzOOQO,59b,59bOOQU,5:Q,5:QOOQR1G.v1G.vO4pQ`O1G.vOOQU-E7d-E7dO4xQdO,59kOOQO,59k,59kO5SQdO'#DQO5^Q`O'#DQOOQO,5:d,5:dOOQU,5:R,5:ROOQR1G/U1G/UO5cQ`O1G/UOOQU-E7e-E7eO5kQgO'#DhO5xQcO1G/XOOQR1G/X1G/XOOQR,59q,59qO6TQgO,59qO6eQdO'#DiO6lQgO'#DiO7PQcO1G/[OOQR1G/[1G/[OOQR,59r,59rO#|QfO,59rOOQR1G/b1G/bO7_OWO1G/bO7dOaO1G/bOOQR,59y,59yOOQR,59{,59{OOQP1G/h1G/hO7lOaO1G/hO7tOaO1G/hO8POaO1G/hOOQP1G.s1G.sO8_QgO,5:POOQP,5:P,5:POOQP,5:V,5:VOOQP-E7i-E7iOOQO,59_,59_OOQO,59a,59aOOQO1G.}1G.}OOQO,59f,59fO8oQdO,59fOOQR7+$b7+$bP,XQ`O'#DfOOQO1G/V1G/VOOQO,59l,59lO8yQdO,59lOOQR7+$p7+$pP9TQ`O'#DgOOQR'#DT'#DTOOQR,5:S,5:SOOQR-E7f-E7fOOQR7+$s7+$sOOQR1G/]1G/]O9YQgO'#DYO9jQ`O'#DYOOQR,5:T,5:TO#|QfO'#DZO9oQcO'#DZOOQR-E7g-E7gOOQR7+$v7+$vOOQR1G/^1G/^OOQR7+$|7+$|O:QOWO7+$|OOQP7+%S7+%SO:VOaO7+%SO:_OaO7+%SOOQP1G/k1G/kOOQO1G/Q1G/QOOQO1G/W1G/WOOQR,59t,59tO:jQgO,59tOOQR,59u,59uO#|QfO,59uOOQR<<Hh<<HhOOQP<<Hn<<HnO:zOaO<<HnOOQR1G/`1G/`OOQR1G/a1G/aOOQPAN>YAN>Y",stateData:";S~O!fOS!gOS^OS~OP_OQbORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!V[O!cTO~O`cO~P]OVkOWROXROYeOZfO[dOcPOmhOqQO~OboO~P!bOVtOWROXROYeOZfO[dOcPOmrOqQO~OpwO~P#WORSOTUOWROXROYYOZZO[XOcPOqQO!PVO!cTO~OSvP!avP!bvP~P#|OWROXROYeOZfO[dOcPOqQO~OmzO~P%OOm!OOUzP!azP!bzP!dzP~P#|O^!SO!b!QO!f!TO!g!RO~ORSOTUOWROXROcPOqQO!PVO!cTO~OY!UOP!QXQ!QX!V!QX!`!QXS!QX!a!QX!b!QXU!QXm!QX!d!QX~P&aO[!WOP!SXQ!SX!V!SX!`!SXS!SX!a!SX!b!SXU!SXm!SX!d!SX~P&aO^!ZO!W![O!b!YO!f!]O!g!YO~OP!_O!V[OQaX!`aX~OPaXQaX!VaX!`aX~P#|OP!bOQ!cO!V[O~OP_O!V[O~P#|OWROXROY!fOcPOqQObfXmfXofXpfX~OWROXRO[!hOcPOqQObhXmhXohXphX~ObeXmlXoeX~ObkXokX~P%OOm!kO~Om!lObnPonP~P%OOb!pOo!oO~Ob!pO~P!bOm!sOosXpsX~OosXpsX~P%OOm!uOotPptP~P%OOo!xOp!yO~Op!yO~P#WOS!|O!a#OO!b#OO~OUyX!ayX!byX!dyX~P#|Om#QO~OU#SO!a#UO!b#UO!d#RO~Om#WOUzX!azX!bzX!dzX~O]#XO~O!b#XO!g#YO~O^#ZO!b#XO!g#YO~OP!RXQ!RX!V!RX!`!RXS!RX!a!RX!b!RXU!RXm!RX!d!RX~P&aOP!TXQ!TX!V!TX!`!TXS!TX!a!TX!b!TXU!TXm!TX!d!TX~P&aO!b#^O!g#^O~O^#_O!b#^O!f#`O!g#^O~O^#_O!W#aO!b#^O!g#^O~OPaaQaa!Vaa!`aa~P#|OP#cO!V[OQ!XX!`!XX~OP!XXQ!XX!V!XX!`!XX~P#|OP_O!V[OQ!_X!`!_X~P#|OWROXROcPOqQObgXmgXogXpgX~OWROXROcPOqQObiXmiXoiXpiX~Obkaoka~P%OObnXonX~P%OOm#kO~Ob#lOo!oO~Oosapsa~P%OOotXptX~P%OOm#pO~Oo!xOp#qO~OSwP!awP!bwP~P#|OS!|O!a#vO!b#vO~OUya!aya!bya!dya~P#|Om#xO~P%OOm#{OU}P!a}P!b}P!d}P~P#|OU#SO!a$OO!b$OO!d#RO~O]$QO~O!b$QO!g$RO~O!b$SO!g$SO~O^$TO!b$SO!g$SO~O^$TO!b$SO!f$UO!g$SO~OP!XaQ!Xa!V!Xa!`!Xa~P#|Obnaona~P%OOotapta~P%OOo!xO~OU|X!a|X!b|X!d|X~P#|Om$ZO~Om$]OU}X!a}X!b}X!d}X~O]$^O~O!b$_O!g$_O~O^$`O!b$_O!g$_O~OU|a!a|a!b|a!d|a~P#|O!b$cO!g$cO~O",goto:",]!mPPPPPPPPPPPPPPPPP!nPP!v#v#|$`#|$c$f$j$nP%VPPP!v%Y%^%a%{&O%a&R&U&X&_&b%aP&e&{&e'O'RPP']'a'g'm's'y(XPPPPPPPP(_)e*X+c,VUaObcR#e!c!{ROPQSTUXY_bcdehknrtvz!O!U!W!_!b!c!f!h!k!l!s!u!|#Q#R#S#W#c#k#p#x#{$Z$]QmPR!qnqfPQThknrtv!k!l!s!u#R#k#pR!gdR!ieTlPnTjPnSiPnSqQvQ{TQ!mkQ!trQ!vtR#y#RR!nkTsQvR!wt!RWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]RySR#t!|R|TR|UQ!PUR#|#SR#z#RR#z#SyZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]R!VXR!XYa]O^abc!a!c!eT!da!eQnPR!rnQvQR!{vQ!}yR#u!}Q#T|R#}#TW^Obc!cS!^^!aT!aa!eQ!eaR#f!eW`Obc!cQxSS}U#SQ!`_Q#PzQ#V!OQ#b!_Q#d!bQ#s!|Q#w#QQ$P#WQ$V#cQ$Y#xQ$[#{Q$a$ZR$b$]xZOSU_bcz!O!_!b!c!|#Q#S#W#c#x#{$Z$]Q!VXQ!XYQ#[!UR#]!W!QWOSUXY_bcz!O!U!W!_!b!c!|#Q#S#W#c#x#{$Z$]pfPQThknrtv!k!l!s!u#R#k#pQ!gdQ!ieQ#g!fR#h!hSgPn^pQTkrtv#RQ!jhQ#i!kQ#j!lQ#n!sQ#o!uQ$W#kR$X#pQuQR!zv",nodeNames:" DirectiveEnd DocEnd - - ? ? ? Literal QuotedLiteral Anchor Alias Tag BlockLiteralContent Comment Stream BOM Document ] [ FlowSequence Item Tagged Anchored Anchored Tagged FlowMapping Pair Key : Pair , } { FlowMapping Pair Pair BlockSequence Item Item BlockMapping Pair Pair Key Pair Pair BlockLiteral BlockLiteralHeader Tagged Anchored Anchored Tagged Directive DirectiveName DirectiveContent Document",maxTerm:74,context:$P,nodeProps:[["isolate",-3,8,9,14,""],["openedBy",18,"[",32,"{"],["closedBy",19,"]",33,"}"]],propSources:[ZP],skippedNodes:[0],repeatNodeCount:6,tokenData:"-Y~RnOX#PXY$QYZ$]Z]#P]^$]^p#Ppq$Qqs#Pst$btu#Puv$yv|#P|}&e}![#P![!]'O!]!`#P!`!a'i!a!}#P!}#O*g#O#P#P#P#Q+Q#Q#o#P#o#p+k#p#q'i#q#r,U#r;'S#P;'S;=`#z<%l?HT#P?HT?HU,o?HUO#PQ#UU!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PQ#kTOY#PZs#Pt;'S#P;'S;=`#z<%lO#PQ#}P;=`<%l#P~$VQ!f~XY$Qpq$Q~$bO!g~~$gS^~OY$bZ;'S$b;'S;=`$s<%lO$b~$vP;=`<%l$bR%OX!WQOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR%rX!WQ!VPOX%kXY#PZ]%k]^#P^p%kpq#hq;'S%k;'S;=`&_<%lO%kR&bP;=`<%l%kR&lUoP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'VUmP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR'p[!PP!WQOY#PZp#Ppq#hq{#P{|(f|}#P}!O(f!O!R#P!R![)p![;'S#P;'S;=`#z<%lO#PR(mW!PP!WQOY#PZp#Ppq#hq!R#P!R![)V![;'S#P;'S;=`#z<%lO#PR)^U!PP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR)wY!PP!WQOY#PZp#Ppq#hq{#P{|)V|}#P}!O)V!O;'S#P;'S;=`#z<%lO#PR*nUcP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+XUbP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR+rUqP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,]UpP!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#PR,vU`P!WQOY#PZp#Ppq#hq;'S#P;'S;=`#z<%lO#P",tokenizers:[UP,XP,GP,JP,0,1],topRules:{Stream:[0,15]},tokenPrec:0});var qh;const hs=new Me;function tE(n){return ke.define({combine:n?e=>e.concat(n):void 0})}const nE=new Me;class zn{constructor(e,t,r=[],s=""){this.data=e,this.name=s,je.prototype.hasOwnProperty("tree")||Object.defineProperty(je.prototype,"tree",{get(){return lr(this)}}),this.parser=t,this.extension=[Cs.of(this),je.languageData.of((l,a,c)=>{let h=ry(l,a,c),p=h.type.prop(hs);if(!p)return[];let d=l.facet(p),m=h.type.prop(nE);if(m){let v=h.resolve(a-h.from,c);for(let x of m)if(x.test(v,l)){let b=l.facet(x.facet);return x.type=="replace"?b:b.concat(d)}}return d})].concat(r)}isActiveAt(e,t,r=-1){return ry(e,t,r).type.prop(hs)==this.data}findRegions(e){let t=e.facet(Cs);if((t==null?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let r=[],s=(l,a)=>{if(l.prop(hs)==this.data){r.push({from:a,to:a+l.length});return}let c=l.prop(Me.mounted);if(c){if(c.tree.prop(hs)==this.data){if(c.overlay)for(let h of c.overlay)r.push({from:h.from+a,to:h.to+a});else r.push({from:a,to:a+l.length});return}else if(c.overlay){let h=r.length;if(s(c.tree,c.overlay[0].from+a),r.length>h)return}}for(let h=0;h<l.children.length;h++){let p=l.children[h];p instanceof ut&&s(p,l.positions[h]+a)}};return s(lr(e),0),r}get allowsNesting(){return!0}}zn.setState=gt.define();function ry(n,e,t){let r=n.facet(Cs),s=lr(n).topNode;if(!r||r.allowsNesting)for(let l=s;l;l=l.enter(e,t,wt.ExcludeBuffers))l.type.isTop&&(s=l);return s}class bu extends zn{constructor(e,t,r){super(e,t,[],r),this.parser=t}static define(e){let t=tE(e.languageData);return new bu(t,e.parser.configure({props:[hs.add(r=>r.isTop?t:void 0)]}),e.name)}configure(e,t){return new bu(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function lr(n){let e=n.field(zn.state,!1);return e?e.tree:ut.empty}class rE{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let r=this.cursorPos-this.string.length;return e<r||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-r,t-r)}}let wo=null;class Su{constructor(e,t,r=[],s,l,a,c,h){this.parser=e,this.state=t,this.fragments=r,this.tree=s,this.treeLen=l,this.viewport=a,this.skipped=c,this.scheduleOn=h,this.parse=null,this.tempSkipped=[]}static create(e,t,r){return new Su(e,t,[],ut.empty,0,r,[],null)}startParse(){return this.parser.startParse(new rE(this.state.doc),this.fragments)}work(e,t){return t!=null&&t>=this.state.doc.length&&(t=void 0),this.tree!=ut.empty&&this.isDone(t??this.state.doc.length)?(this.takeTree(),!0):this.withContext(()=>{var r;if(typeof e=="number"){let s=Date.now()+e;e=()=>Date.now()>s}for(this.parse||(this.parse=this.startParse()),t!=null&&(this.parse.stoppedAt==null||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let s=this.parse.advance();if(s)if(this.fragments=this.withoutTempSkipped(Ni.addTree(s,this.fragments,this.parse.stoppedAt!=null)),this.treeLen=(r=this.parse.stoppedAt)!==null&&r!==void 0?r:this.state.doc.length,this.tree=s,this.parse=null,this.treeLen<(t??this.state.doc.length))this.parse=this.startParse();else return!0;if(e())return!1}})}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((this.parse.stoppedAt==null||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext(()=>{for(;!(t=this.parse.advance()););}),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Ni.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=wo;wo=this;try{return e()}finally{wo=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=iy(e,t.from,t.to);return e}changes(e,t){let{fragments:r,tree:s,treeLen:l,viewport:a,skipped:c}=this;if(this.takeTree(),!e.empty){let h=[];if(e.iterChangedRanges((p,d,m,v)=>h.push({fromA:p,toA:d,fromB:m,toB:v})),r=Ni.applyChanges(r,h),s=ut.empty,l=0,a={from:e.mapPos(a.from,-1),to:e.mapPos(a.to,1)},this.skipped.length){c=[];for(let p of this.skipped){let d=e.mapPos(p.from,1),m=e.mapPos(p.to,-1);d<m&&c.push({from:d,to:m})}}}return new Su(this.parser,t,r,s,l,a,c,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let r=0;r<this.skipped.length;r++){let{from:s,to:l}=this.skipped[r];s<e.to&&l>e.from&&(this.fragments=iy(this.fragments,s,l),this.skipped.splice(r--,1))}return this.skipped.length>=t?!1:(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends jx{createParse(t,r,s){let l=s[0].from,a=s[s.length-1].to;return{parsedPos:l,advance(){let h=wo;if(h){for(let p of s)h.tempSkipped.push(p);e&&(h.scheduleOn=h.scheduleOn?Promise.all([h.scheduleOn,e]):e)}return this.parsedPos=a,new ut(en.none,[],[],a-l)},stoppedAt:null,stopAt(){}}}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&t[0].from==0&&t[0].to>=e}static get(){return wo}}function iy(n,e,t){return Ni.applyChanges(n,[{fromA:e,toA:t,fromB:e,toB:t}])}class Os{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),r=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,r)||t.takeTree(),new Os(t)}static init(e){let t=Math.min(3e3,e.doc.length),r=Su.create(e.facet(Cs).parser,e,{from:0,to:t});return r.work(20,t)||r.takeTree(),new Os(r)}}zn.state=Ii.define({create:Os.init,update(n,e){for(let t of e.effects)if(t.is(zn.setState))return t.value;return e.startState.facet(Cs)!=e.state.facet(Cs)?Os.init(e.state):n.apply(e)}});let Ux=n=>{let e=setTimeout(()=>n(),500);return()=>clearTimeout(e)};typeof requestIdleCallback<"u"&&(Ux=n=>{let e=-1,t=setTimeout(()=>{e=requestIdleCallback(n,{timeout:400})},100);return()=>e<0?clearTimeout(t):cancelIdleCallback(e)});const Yh=typeof navigator<"u"&&(!((qh=navigator.scheduling)===null||qh===void 0)&&qh.isInputPending)?()=>navigator.scheduling.isInputPending():null,iE=Hn.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(zn.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(zn.state);(t.tree!=t.context.tree||!t.context.isDone(e.doc.length))&&(this.working=Ux(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:r,viewport:{to:s}}=this.view,l=r.field(zn.state);if(l.tree==l.context.tree&&l.context.isDone(s+1e5))return;let a=Date.now()+Math.min(this.chunkBudget,100,e&&!Yh?Math.max(25,e.timeRemaining()-5):1e9),c=l.context.treeLen<s&&r.doc.length>s+1e3,h=l.context.work(()=>Yh&&Yh()||Date.now()>a,s+(c?0:1e5));this.chunkBudget-=Date.now()-t,(h||this.chunkBudget<=0)&&(l.context.takeTree(),this.view.dispatch({effects:zn.setState.of(new Os(l.context))})),this.chunkBudget>0&&!(h&&!c)&&this.scheduleWork(),this.checkAsyncSchedule(l.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then(()=>this.scheduleWork()).catch(t=>ir(this.view.state,t)).then(()=>this.workScheduled--),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),Cs=ke.define({combine(n){return n.length?n[0]:null},enables:n=>[zn.state,iE,Ce.contentAttributes.compute([n],e=>{let t=e.facet(n);return t&&t.name?{"data-language":t.name}:{}})]});class sE{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const oE=ke.define(),Ld=ke.define({combine:n=>{if(!n.length)return"  ";let e=n[0];if(!e||/\S/.test(e)||Array.from(e).some(t=>t!=e[0]))throw new Error("Invalid indent unit: "+JSON.stringify(n[0]));return e}});function Ou(n){let e=n.facet(Ld);return e.charCodeAt(0)==9?n.tabSize*e.length:e.length}function Cu(n,e){let t="",r=n.tabSize,s=n.facet(Ld)[0];if(s=="	"){for(;e>=r;)t+="	",e-=r;s=" "}for(let l=0;l<e;l++)t+=s;return t}function Xx(n,e){n instanceof je&&(n=new Iu(n));for(let r of n.state.facet(oE)){let s=r(n,e);if(s!==void 0)return s}let t=lr(n.state);return t.length>=e?lE(n,t,e):null}class Iu{constructor(e,t={}){this.state=e,this.options=t,this.unit=Ou(e)}lineAt(e,t=1){let r=this.state.doc.lineAt(e),{simulateBreak:s,simulateDoubleBreak:l}=this.options;return s!=null&&s>=r.from&&s<=r.to?l&&s==e?{text:"",from:e}:(t<0?s<e:s<=e)?{text:r.text.slice(s-r.from),from:s}:{text:r.text.slice(0,s-r.from),from:r.from}:r}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:r,from:s}=this.lineAt(e,t);return r.slice(e-s,Math.min(r.length,e+100-s))}column(e,t=1){let{text:r,from:s}=this.lineAt(e,t),l=this.countColumn(r,e-s),a=this.options.overrideIndentation?this.options.overrideIndentation(s):-1;return a>-1&&(l+=a-this.countColumn(r,r.search(/\S|$/))),l}countColumn(e,t=e.length){return Nu(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:r,from:s}=this.lineAt(e,t),l=this.options.overrideIndentation;if(l){let a=l(s);if(a>-1)return a}return this.countColumn(r,r.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Kx=new Me;function lE(n,e,t){let r=e.resolveStack(t),s=e.resolveInner(t,-1).resolve(t,0).enterUnfinishedNodesBefore(t);if(s!=r.node){let l=[];for(let a=s;a&&!(a.from<r.node.from||a.to>r.node.to||a.from==r.node.from&&a.type==r.node.type);a=a.parent)l.push(a);for(let a=l.length-1;a>=0;a--)r={node:l[a],next:r}}return qx(r,n,t)}function qx(n,e,t){for(let r=n;r;r=r.next){let s=uE(r.node);if(s)return s(jd.create(e,t,r))}return 0}function aE(n){return n.pos==n.options.simulateBreak&&n.options.simulateDoubleBreak}function uE(n){let e=n.type.prop(Kx);if(e)return e;let t=n.firstChild,r;if(t&&(r=t.type.prop(Me.closedBy))){let s=n.lastChild,l=s&&r.indexOf(s.name)>-1;return a=>Yx(a,!0,1,void 0,l&&!aE(a)?s.from:void 0)}return n.parent==null?cE:null}function cE(){return 0}class jd extends Iu{constructor(e,t,r){super(e.state,e.options),this.base=e,this.pos=t,this.context=r}get node(){return this.context.node}static create(e,t,r){return new jd(e,t,r)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let r=e.resolve(t.from);for(;r.parent&&r.parent.from==r.from;)r=r.parent;if(hE(r,e))break;t=this.state.doc.lineAt(r.from)}return this.lineIndent(t.from)}continue(){return qx(this.context.next,this.base,this.pos)}}function hE(n,e){for(let t=e;t;t=t.parent)if(n==t)return!0;return!1}function fE(n){let e=n.node,t=e.childAfter(e.from),r=e.lastChild;if(!t)return null;let s=n.options.simulateBreak,l=n.state.doc.lineAt(t.from),a=s==null||s<=l.from?l.to:Math.min(l.to,s);for(let c=t.to;;){let h=e.childAfter(c);if(!h||h==r)return null;if(!h.type.isSkipped){if(h.from>=a)return null;let p=/^ */.exec(l.text.slice(t.to-l.from))[0].length;return{from:t.from,to:t.to+p}}c=h.to}}function sy({closing:n,align:e=!0,units:t=1}){return r=>Yx(r,e,t,n)}function Yx(n,e,t,r,s){let l=n.textAfter,a=l.match(/^\s*/)[0].length,c=r&&l.slice(a,a+r.length)==r||s==n.pos+a,h=e?fE(n):null;return h?c?n.column(h.from):n.column(h.to):n.baseIndent+(c?0:n.unit*t)}const dE=new Me;function pE(n){let e=n.firstChild,t=n.lastChild;return e&&e.to<t.from?{from:e.to,to:t.type.isError?n.to:t.from}:null}class Bu{constructor(e,t){this.specs=e;let r;function s(c){let h=ii.newName();return(r||(r=Object.create(null)))["."+h]=c,h}const l=typeof t.all=="string"?t.all:t.all?s(t.all):void 0,a=t.scope;this.scope=a instanceof zn?c=>c.prop(hs)==a.data:a?c=>c==a:void 0,this.style=zx(e.map(c=>({tag:c.tag,class:c.class||s(Object.assign({},c,{tag:null}))})),{all:l}).style,this.module=r?new ii(r):null,this.themeType=t.themeType}static define(e,t){return new Bu(e,t||{})}}const Gf=ke.define(),gE=ke.define({combine(n){return n.length?[n[0]]:null}});function Gh(n){let e=n.facet(Gf);return e.length?e:n.facet(gE)}function mE(n,e){let t=[vE],r;return n instanceof Bu&&(n.module&&t.push(Ce.styleModule.of(n.module)),r=n.themeType),r?t.push(Gf.computeN([Ce.darkTheme],s=>s.facet(Ce.darkTheme)==(r=="dark")?[n]:[])):t.push(Gf.of(n)),t}class yE{constructor(e){this.markCache=Object.create(null),this.tree=lr(e.state),this.decorations=this.buildDeco(e,Gh(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=lr(e.state),r=Gh(e.state),s=r!=Gh(e.startState),{viewport:l}=e.view,a=e.changes.mapPos(this.decoratedTo,1);t.length<l.to&&!s&&t.type==this.tree.type&&a>=l.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=a):(t!=this.tree||e.viewportChanged||s)&&(this.tree=t,this.decorations=this.buildDeco(e.view,r),this.decoratedTo=l.to)}buildDeco(e,t){if(!t||!this.tree.length)return et.none;let r=new $o;for(let{from:s,to:l}of e.visibleRanges)OP(this.tree,t,(a,c,h)=>{r.add(a,c,this.markCache[h]||(this.markCache[h]=et.mark({class:h})))},s,l);return r.finish()}}const vE=Ru.high(Hn.fromClass(yE,{decorations:n=>n.decorations})),xE=1e4,kE="()[]{}",wE=new Me;function Jf(n,e,t){let r=n.prop(e<0?Me.openedBy:Me.closedBy);if(r)return r;if(n.name.length==1){let s=t.indexOf(n.name);if(s>-1&&s%2==(e<0?1:0))return[t[s+e]]}return null}function Zf(n){let e=n.type.prop(wE);return e?e(n.node):n}function fs(n,e,t,r={}){let s=r.maxScanDistance||xE,l=r.brackets||kE,a=lr(n),c=a.resolveInner(e,t);for(let h=c;h;h=h.parent){let p=Jf(h.type,t,l);if(p&&h.from<h.to){let d=Zf(h);if(d&&(t>0?e>=d.from&&e<d.to:e>d.from&&e<=d.to))return bE(n,e,t,h,d,p,l)}}return SE(n,e,t,a,c.type,s,l)}function bE(n,e,t,r,s,l,a){let c=r.parent,h={from:s.from,to:s.to},p=0,d=c==null?void 0:c.cursor();if(d&&(t<0?d.childBefore(r.from):d.childAfter(r.to)))do if(t<0?d.to<=r.from:d.from>=r.to){if(p==0&&l.indexOf(d.type.name)>-1&&d.from<d.to){let m=Zf(d);return{start:h,end:m?{from:m.from,to:m.to}:void 0,matched:!0}}else if(Jf(d.type,t,a))p++;else if(Jf(d.type,-t,a)){if(p==0){let m=Zf(d);return{start:h,end:m&&m.from<m.to?{from:m.from,to:m.to}:void 0,matched:!1}}p--}}while(t<0?d.prevSibling():d.nextSibling());return{start:h,matched:!1}}function SE(n,e,t,r,s,l,a){let c=t<0?n.sliceDoc(e-1,e):n.sliceDoc(e,e+1),h=a.indexOf(c);if(h<0||h%2==0!=t>0)return null;let p={from:t<0?e-1:e,to:t>0?e+1:e},d=n.doc.iterRange(e,t>0?n.doc.length:0),m=0;for(let v=0;!d.next().done&&v<=l;){let x=d.value;t<0&&(v+=x.length);let b=e+v*t;for(let S=t>0?0:x.length-1,C=t>0?x.length:-1;S!=C;S+=t){let P=a.indexOf(x[S]);if(!(P<0||r.resolveInner(b+S,1).type!=s))if(P%2==0==t>0)m++;else{if(m==1)return{start:p,end:{from:b+S,to:b+S+1},matched:P>>1==h>>1};m--}}t>0&&(v+=x.length)}return d.done?{start:p,matched:!1}:null}const OE=Object.create(null),oy=[en.none],ly=[],ay=Object.create(null),CE=Object.create(null);for(let[n,e]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])CE[n]=PE(OE,e);function Jh(n,e){ly.indexOf(n)>-1||(ly.push(n),console.warn(e))}function PE(n,e){let t=[];for(let c of e.split(" ")){let h=[];for(let p of c.split(".")){let d=n[p]||Q[p];d?typeof d=="function"?h.length?h=h.map(d):Jh(p,`Modifier ${p} used at start of tag`):h.length?Jh(p,`Tag ${p} used as modifier`):h=Array.isArray(d)?d:[d]:Jh(p,`Unknown highlighting tag ${p}`)}for(let p of h)t.push(p)}if(!t.length)return 0;let r=e.replace(/ /g,"_"),s=r+" "+t.map(c=>c.id),l=ay[s];if(l)return l.id;let a=ay[s]=en.define({id:oy.length,name:r,props:[Ix({[r]:t})]});return oy.push(a),a.id}Ze.RTL,Ze.LTR;const EE=bu.define({name:"yaml",parser:eE.configure({props:[Kx.add({Stream:n=>{for(let e=n.node.resolve(n.pos,-1);e&&e.to>=n.pos;e=e.parent){if(e.name=="BlockLiteralContent"&&e.from<e.to)return n.baseIndentFor(e);if(e.name=="BlockLiteral")return n.baseIndentFor(e)+n.unit;if(e.name=="BlockSequence"||e.name=="BlockMapping")return n.column(e.from,1);if(e.name=="QuotedLiteral")return null;if(e.name=="Literal"){let t=n.column(e.from,1);if(t==n.lineIndent(e.from,1))return t;if(e.to>n.pos)return null}}return null},FlowMapping:sy({closing:"}"}),FlowSequence:sy({closing:"]"})}),dE.add({"FlowMapping FlowSequence":pE,"Item Pair BlockLiteral":(n,e)=>({from:e.doc.lineAt(n.from).to,to:n.to})})]}),languageData:{commentTokens:{line:"#"},indentOnInput:/^\s*[\]\}]$/}});function AE(){return new sE(EE)}const ME="#e5c07b",uy="#e06c75",RE="#56b6c2",NE="#ffffff",nu="#abb2bf",ed="#7d8799",DE="#61afef",TE="#98c379",cy="#d19a66",LE="#c678dd",jE="#21252b",hy="#2c313a",fy="#282c34",Zh="#353a42",IE="#3E4451",dy="#528bff",BE=Ce.theme({"&":{color:nu,backgroundColor:fy},".cm-content":{caretColor:dy},".cm-cursor, .cm-dropCursor":{borderLeftColor:dy},"&.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:IE},".cm-panels":{backgroundColor:jE,color:nu},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:"#6699ff0b"},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847"},".cm-gutters":{backgroundColor:fy,color:ed,border:"none"},".cm-activeLineGutter":{backgroundColor:hy},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:Zh},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:Zh,borderBottomColor:Zh},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:hy,color:nu}}},{dark:!0}),zE=Bu.define([{tag:Q.keyword,color:LE},{tag:[Q.name,Q.deleted,Q.character,Q.propertyName,Q.macroName],color:uy},{tag:[Q.function(Q.variableName),Q.labelName],color:DE},{tag:[Q.color,Q.constant(Q.name),Q.standard(Q.name)],color:cy},{tag:[Q.definition(Q.name),Q.separator],color:nu},{tag:[Q.typeName,Q.className,Q.number,Q.changed,Q.annotation,Q.modifier,Q.self,Q.namespace],color:ME},{tag:[Q.operator,Q.operatorKeyword,Q.url,Q.escape,Q.regexp,Q.link,Q.special(Q.string)],color:RE},{tag:[Q.meta,Q.comment],color:ed},{tag:Q.strong,fontWeight:"bold"},{tag:Q.emphasis,fontStyle:"italic"},{tag:Q.strikethrough,textDecoration:"line-through"},{tag:Q.link,color:ed,textDecoration:"underline"},{tag:Q.heading,fontWeight:"bold",color:uy},{tag:[Q.atom,Q.bool,Q.special(Q.variableName)],color:cy},{tag:[Q.processingInstruction,Q.string,Q.inserted],color:TE},{tag:Q.invalid,color:NE}]),FE=[BE,mE(zE)],_E=n=>{let{state:e}=n,t=e.doc.lineAt(e.selection.main.from),r=Bd(n.state,t.from);return r.line?HE(n):r.block?WE(n):!1};function Id(n,e){return({state:t,dispatch:r})=>{if(t.readOnly)return!1;let s=n(e,t);return s?(r(t.update(s)),!0):!1}}const HE=Id(UE,0),VE=Id(Gx,0),WE=Id((n,e)=>Gx(n,e,$E(e)),0);function Bd(n,e){let t=n.languageDataAt("commentTokens",e,1);return t.length?t[0]:{}}const bo=50;function QE(n,{open:e,close:t},r,s){let l=n.sliceDoc(r-bo,r),a=n.sliceDoc(s,s+bo),c=/\s*$/.exec(l)[0].length,h=/^\s*/.exec(a)[0].length,p=l.length-c;if(l.slice(p-e.length,p)==e&&a.slice(h,h+t.length)==t)return{open:{pos:r-c,margin:c&&1},close:{pos:s+h,margin:h&&1}};let d,m;s-r<=2*bo?d=m=n.sliceDoc(r,s):(d=n.sliceDoc(r,r+bo),m=n.sliceDoc(s-bo,s));let v=/^\s*/.exec(d)[0].length,x=/\s*$/.exec(m)[0].length,b=m.length-x-t.length;return d.slice(v,v+e.length)==e&&m.slice(b,b+t.length)==t?{open:{pos:r+v+e.length,margin:/\s/.test(d.charAt(v+e.length))?1:0},close:{pos:s-x-t.length,margin:/\s/.test(m.charAt(b-1))?1:0}}:null}function $E(n){let e=[];for(let t of n.selection.ranges){let r=n.doc.lineAt(t.from),s=t.to<=r.to?r:n.doc.lineAt(t.to);s.from>r.from&&s.from==t.to&&(s=t.to==r.to+1?r:n.doc.lineAt(t.to-1));let l=e.length-1;l>=0&&e[l].to>r.from?e[l].to=s.to:e.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:s.to})}return e}function Gx(n,e,t=e.selection.ranges){let r=t.map(l=>Bd(e,l.from).block);if(!r.every(l=>l))return null;let s=t.map((l,a)=>QE(e,r[a],l.from,l.to));if(n!=2&&!s.every(l=>l))return{changes:e.changes(t.map((l,a)=>s[a]?[]:[{from:l.from,insert:r[a].open+" "},{from:l.to,insert:" "+r[a].close}]))};if(n!=1&&s.some(l=>l)){let l=[];for(let a=0,c;a<s.length;a++)if(c=s[a]){let h=r[a],{open:p,close:d}=c;l.push({from:p.pos-h.open.length,to:p.pos+p.margin},{from:d.pos-d.margin,to:d.pos+h.close.length})}return{changes:l}}return null}function UE(n,e,t=e.selection.ranges){let r=[],s=-1;for(let{from:l,to:a}of t){let c=r.length,h=1e9,p=Bd(e,l).line;if(p){for(let d=l;d<=a;){let m=e.doc.lineAt(d);if(m.from>s&&(l==a||a>m.from)){s=m.from;let v=/^\s*/.exec(m.text)[0].length,x=v==m.length,b=m.text.slice(v,v+p.length)==p?v:-1;v<m.text.length&&v<h&&(h=v),r.push({line:m,comment:b,token:p,indent:v,empty:x,single:!1})}d=m.to+1}if(h<1e9)for(let d=c;d<r.length;d++)r[d].indent<r[d].line.text.length&&(r[d].indent=h);r.length==c+1&&(r[c].single=!0)}}if(n!=2&&r.some(l=>l.comment<0&&(!l.empty||l.single))){let l=[];for(let{line:c,token:h,indent:p,empty:d,single:m}of r)(m||!d)&&l.push({from:c.from+p,insert:h+" "});let a=e.changes(l);return{changes:a,selection:e.selection.map(a,1)}}else if(n!=1&&r.some(l=>l.comment>=0)){let l=[];for(let{line:a,comment:c,token:h}of r)if(c>=0){let p=a.from+c,d=p+h.length;a.text[d-a.from]==" "&&d++,l.push({from:p,to:d})}return{changes:l}}return null}function Ns(n,e){return ie.create(n.ranges.map(e),n.mainIndex)}function Wn(n,e){return n.update({selection:e,scrollIntoView:!0,userEvent:"select"})}function Qn({state:n,dispatch:e},t){let r=Ns(n.selection,t);return r.eq(n.selection,!0)?!1:(e(Wn(n,r)),!0)}function zu(n,e){return ie.cursor(e?n.to:n.from)}function Jx(n,e){return Qn(n,t=>t.empty?n.moveByChar(t,e):zu(t,e))}function zt(n){return n.textDirectionAt(n.state.selection.main.head)==Ze.LTR}const Zx=n=>Jx(n,!zt(n)),e1=n=>Jx(n,zt(n));function t1(n,e){return Qn(n,t=>t.empty?n.moveByGroup(t,e):zu(t,e))}const XE=n=>t1(n,!zt(n)),KE=n=>t1(n,zt(n));function qE(n,e,t){if(e.type.prop(t))return!0;let r=e.to-e.from;return r&&(r>2||/[^\s,.;:]/.test(n.sliceDoc(e.from,e.to)))||e.firstChild}function Fu(n,e,t){let r=lr(n).resolveInner(e.head),s=t?Me.closedBy:Me.openedBy;for(let h=e.head;;){let p=t?r.childAfter(h):r.childBefore(h);if(!p)break;qE(n,p,s)?r=p:h=t?p.to:p.from}let l=r.type.prop(s),a,c;return l&&(a=t?fs(n,r.from,1):fs(n,r.to,-1))&&a.matched?c=t?a.end.to:a.end.from:c=t?r.to:r.from,ie.cursor(c,t?-1:1)}const YE=n=>Qn(n,e=>Fu(n.state,e,!zt(n))),GE=n=>Qn(n,e=>Fu(n.state,e,zt(n)));function n1(n,e){return Qn(n,t=>{if(!t.empty)return zu(t,e);let r=n.moveVertically(t,e);return r.head!=t.head?r:n.moveToLineBoundary(t,e)})}const r1=n=>n1(n,!1),i1=n=>n1(n,!0);function s1(n){let e=n.scrollDOM.clientHeight<n.scrollDOM.scrollHeight-2,t=0,r=0,s;if(e){for(let l of n.state.facet(Ce.scrollMargins)){let a=l(n);a!=null&&a.top&&(t=Math.max(a==null?void 0:a.top,t)),a!=null&&a.bottom&&(r=Math.max(a==null?void 0:a.bottom,r))}s=n.scrollDOM.clientHeight-t-r}else s=(n.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:t,marginBottom:r,selfScroll:e,height:Math.max(n.defaultLineHeight,s-5)}}function o1(n,e){let t=s1(n),{state:r}=n,s=Ns(r.selection,a=>a.empty?n.moveVertically(a,e,t.height):zu(a,e));if(s.eq(r.selection))return!1;let l;if(t.selfScroll){let a=n.coordsAtPos(r.selection.main.head),c=n.scrollDOM.getBoundingClientRect(),h=c.top+t.marginTop,p=c.bottom-t.marginBottom;a&&a.top>h&&a.bottom<p&&(l=Ce.scrollIntoView(s.main.head,{y:"start",yMargin:a.top-h}))}return n.dispatch(Wn(r,s),{effects:l}),!0}const py=n=>o1(n,!1),td=n=>o1(n,!0);function ui(n,e,t){let r=n.lineBlockAt(e.head),s=n.moveToLineBoundary(e,t);if(s.head==e.head&&s.head!=(t?r.to:r.from)&&(s=n.moveToLineBoundary(e,t,!1)),!t&&s.head==r.from&&r.length){let l=/^\s*/.exec(n.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;l&&e.head!=r.from+l&&(s=ie.cursor(r.from+l))}return s}const JE=n=>Qn(n,e=>ui(n,e,!0)),ZE=n=>Qn(n,e=>ui(n,e,!1)),eA=n=>Qn(n,e=>ui(n,e,!zt(n))),tA=n=>Qn(n,e=>ui(n,e,zt(n))),nA=n=>Qn(n,e=>ie.cursor(n.lineBlockAt(e.head).from,1)),rA=n=>Qn(n,e=>ie.cursor(n.lineBlockAt(e.head).to,-1));function iA(n,e,t){let r=!1,s=Ns(n.selection,l=>{let a=fs(n,l.head,-1)||fs(n,l.head,1)||l.head>0&&fs(n,l.head-1,1)||l.head<n.doc.length&&fs(n,l.head+1,-1);if(!a||!a.end)return l;r=!0;let c=a.start.from==l.head?a.end.to:a.end.from;return ie.cursor(c)});return r?(e(Wn(n,s)),!0):!1}const sA=({state:n,dispatch:e})=>iA(n,e);function Pn(n,e){let t=Ns(n.state.selection,r=>{let s=e(r);return ie.range(r.anchor,s.head,s.goalColumn,s.bidiLevel||void 0)});return t.eq(n.state.selection)?!1:(n.dispatch(Wn(n.state,t)),!0)}function l1(n,e){return Pn(n,t=>n.moveByChar(t,e))}const a1=n=>l1(n,!zt(n)),u1=n=>l1(n,zt(n));function c1(n,e){return Pn(n,t=>n.moveByGroup(t,e))}const oA=n=>c1(n,!zt(n)),lA=n=>c1(n,zt(n)),aA=n=>Pn(n,e=>Fu(n.state,e,!zt(n))),uA=n=>Pn(n,e=>Fu(n.state,e,zt(n)));function h1(n,e){return Pn(n,t=>n.moveVertically(t,e))}const f1=n=>h1(n,!1),d1=n=>h1(n,!0);function p1(n,e){return Pn(n,t=>n.moveVertically(t,e,s1(n).height))}const gy=n=>p1(n,!1),my=n=>p1(n,!0),cA=n=>Pn(n,e=>ui(n,e,!0)),hA=n=>Pn(n,e=>ui(n,e,!1)),fA=n=>Pn(n,e=>ui(n,e,!zt(n))),dA=n=>Pn(n,e=>ui(n,e,zt(n))),pA=n=>Pn(n,e=>ie.cursor(n.lineBlockAt(e.head).from)),gA=n=>Pn(n,e=>ie.cursor(n.lineBlockAt(e.head).to)),yy=({state:n,dispatch:e})=>(e(Wn(n,{anchor:0})),!0),vy=({state:n,dispatch:e})=>(e(Wn(n,{anchor:n.doc.length})),!0),xy=({state:n,dispatch:e})=>(e(Wn(n,{anchor:n.selection.main.anchor,head:0})),!0),ky=({state:n,dispatch:e})=>(e(Wn(n,{anchor:n.selection.main.anchor,head:n.doc.length})),!0),mA=({state:n,dispatch:e})=>(e(n.update({selection:{anchor:0,head:n.doc.length},userEvent:"select"})),!0),yA=({state:n,dispatch:e})=>{let t=_u(n).map(({from:r,to:s})=>ie.range(r,Math.min(s+1,n.doc.length)));return e(n.update({selection:ie.create(t),userEvent:"select"})),!0},vA=({state:n,dispatch:e})=>{let t=Ns(n.selection,r=>{let s=lr(n),l=s.resolveStack(r.from,1);if(r.empty){let a=s.resolveStack(r.from,-1);a.node.from>=l.node.from&&a.node.to<=l.node.to&&(l=a)}for(let a=l;a;a=a.next){let{node:c}=a;if((c.from<r.from&&c.to>=r.to||c.to>r.to&&c.from<=r.from)&&a.next)return ie.range(c.to,c.from)}return r});return t.eq(n.selection)?!1:(e(Wn(n,t)),!0)};function g1(n,e){let{state:t}=n,r=t.selection,s=t.selection.ranges.slice();for(let l of t.selection.ranges){let a=t.doc.lineAt(l.head);if(e?a.to<n.state.doc.length:a.from>0)for(let c=l;;){let h=n.moveVertically(c,e);if(h.head<a.from||h.head>a.to){s.some(p=>p.head==h.head)||s.push(h);break}else{if(h.head==c.head)break;c=h}}}return s.length==r.ranges.length?!1:(n.dispatch(Wn(t,ie.create(s,s.length-1))),!0)}const xA=n=>g1(n,!1),kA=n=>g1(n,!0),wA=({state:n,dispatch:e})=>{let t=n.selection,r=null;return t.ranges.length>1?r=ie.create([t.main]):t.main.empty||(r=ie.create([ie.cursor(t.main.head)])),r?(e(Wn(n,r)),!0):!1};function hl(n,e){if(n.state.readOnly)return!1;let t="delete.selection",{state:r}=n,s=r.changeByRange(l=>{let{from:a,to:c}=l;if(a==c){let h=e(l);h<a?(t="delete.backward",h=Va(n,h,!1)):h>a&&(t="delete.forward",h=Va(n,h,!0)),a=Math.min(a,h),c=Math.max(c,h)}else a=Va(n,a,!1),c=Va(n,c,!0);return a==c?{range:l}:{changes:{from:a,to:c},range:ie.cursor(a,a<l.head?-1:1)}});return s.changes.empty?!1:(n.dispatch(r.update(s,{scrollIntoView:!0,userEvent:t,effects:t=="delete.selection"?Ce.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function Va(n,e,t){if(n instanceof Ce)for(let r of n.state.facet(Ce.atomicRanges).map(s=>s(n)))r.between(e,e,(s,l)=>{s<e&&l>e&&(e=t?l:s)});return e}const m1=(n,e,t)=>hl(n,r=>{let s=r.from,{state:l}=n,a=l.doc.lineAt(s),c,h;if(t&&!e&&s>a.from&&s<a.from+200&&!/[^ \t]/.test(c=a.text.slice(0,s-a.from))){if(c[c.length-1]=="	")return s-1;let p=Nu(c,l.tabSize),d=p%Ou(l)||Ou(l);for(let m=0;m<d&&c[c.length-1-m]==" ";m++)s--;h=s}else h=Wt(a.text,s-a.from,e,e)+a.from,h==s&&a.number!=(e?l.doc.lines:1)?h+=e?1:-1:!e&&/[\ufe00-\ufe0f]/.test(a.text.slice(h-a.from,s-a.from))&&(h=Wt(a.text,h-a.from,!1,!1)+a.from);return h}),nd=n=>m1(n,!1,!0),y1=n=>m1(n,!0,!1),v1=(n,e)=>hl(n,t=>{let r=t.head,{state:s}=n,l=s.doc.lineAt(r),a=s.charCategorizer(r);for(let c=null;;){if(r==(e?l.to:l.from)){r==t.head&&l.number!=(e?s.doc.lines:1)&&(r+=e?1:-1);break}let h=Wt(l.text,r-l.from,e)+l.from,p=l.text.slice(Math.min(r,h)-l.from,Math.max(r,h)-l.from),d=a(p);if(c!=null&&d!=c)break;(p!=" "||r!=t.head)&&(c=d),r=h}return r}),x1=n=>v1(n,!1),bA=n=>v1(n,!0),SA=n=>hl(n,e=>{let t=n.lineBlockAt(e.head).to;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),OA=n=>hl(n,e=>{let t=n.moveToLineBoundary(e,!1).head;return e.head>t?t:Math.max(0,e.head-1)}),CA=n=>hl(n,e=>{let t=n.moveToLineBoundary(e,!0).head;return e.head<t?t:Math.min(n.state.doc.length,e.head+1)}),PA=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:De.of(["",""])},range:ie.cursor(r.from)}));return e(n.update(t,{scrollIntoView:!0,userEvent:"input"})),!0},EA=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=n.changeByRange(r=>{if(!r.empty||r.from==0||r.from==n.doc.length)return{range:r};let s=r.from,l=n.doc.lineAt(s),a=s==l.from?s-1:Wt(l.text,s-l.from,!1)+l.from,c=s==l.to?s+1:Wt(l.text,s-l.from,!0)+l.from;return{changes:{from:a,to:c,insert:n.doc.slice(s,c).append(n.doc.slice(a,s))},range:ie.cursor(c)}});return t.changes.empty?!1:(e(n.update(t,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function _u(n){let e=[],t=-1;for(let r of n.selection.ranges){let s=n.doc.lineAt(r.from),l=n.doc.lineAt(r.to);if(!r.empty&&r.to==l.from&&(l=n.doc.lineAt(r.to-1)),t>=s.number){let a=e[e.length-1];a.to=l.to,a.ranges.push(r)}else e.push({from:s.from,to:l.to,ranges:[r]});t=l.number+1}return e}function k1(n,e,t){if(n.readOnly)return!1;let r=[],s=[];for(let l of _u(n)){if(t?l.to==n.doc.length:l.from==0)continue;let a=n.doc.lineAt(t?l.to+1:l.from-1),c=a.length+1;if(t){r.push({from:l.to,to:a.to},{from:l.from,insert:a.text+n.lineBreak});for(let h of l.ranges)s.push(ie.range(Math.min(n.doc.length,h.anchor+c),Math.min(n.doc.length,h.head+c)))}else{r.push({from:a.from,to:l.from},{from:l.to,insert:n.lineBreak+a.text});for(let h of l.ranges)s.push(ie.range(h.anchor-c,h.head-c))}}return r.length?(e(n.update({changes:r,scrollIntoView:!0,selection:ie.create(s,n.selection.mainIndex),userEvent:"move.line"})),!0):!1}const AA=({state:n,dispatch:e})=>k1(n,e,!1),MA=({state:n,dispatch:e})=>k1(n,e,!0);function w1(n,e,t){if(n.readOnly)return!1;let r=[];for(let s of _u(n))t?r.push({from:s.from,insert:n.doc.slice(s.from,s.to)+n.lineBreak}):r.push({from:s.to,insert:n.lineBreak+n.doc.slice(s.from,s.to)});return e(n.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const RA=({state:n,dispatch:e})=>w1(n,e,!1),NA=({state:n,dispatch:e})=>w1(n,e,!0),DA=n=>{if(n.state.readOnly)return!1;let{state:e}=n,t=e.changes(_u(e).map(({from:s,to:l})=>(s>0?s--:l<e.doc.length&&l++,{from:s,to:l}))),r=Ns(e.selection,s=>{let l;if(n.lineWrapping){let a=n.lineBlockAt(s.head),c=n.coordsAtPos(s.head,s.assoc||1);c&&(l=a.bottom+n.documentTop-c.bottom+n.defaultLineHeight/2)}return n.moveVertically(s,!0,l)}).map(t);return n.dispatch({changes:t,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function TA(n,e){if(/\(\)|\[\]|\{\}/.test(n.sliceDoc(e-1,e+1)))return{from:e,to:e};let t=lr(n).resolveInner(e),r=t.childBefore(e),s=t.childAfter(e),l;return r&&s&&r.to<=e&&s.from>=e&&(l=r.type.prop(Me.closedBy))&&l.indexOf(s.name)>-1&&n.doc.lineAt(r.to).from==n.doc.lineAt(s.from).from&&!/\S/.test(n.sliceDoc(r.to,s.from))?{from:r.to,to:s.from}:null}const wy=b1(!1),LA=b1(!0);function b1(n){return({state:e,dispatch:t})=>{if(e.readOnly)return!1;let r=e.changeByRange(s=>{let{from:l,to:a}=s,c=e.doc.lineAt(l),h=!n&&l==a&&TA(e,l);n&&(l=a=(a<=c.to?c:e.doc.lineAt(a)).to);let p=new Iu(e,{simulateBreak:l,simulateDoubleBreak:!!h}),d=Xx(p,l);for(d==null&&(d=Nu(/^\s*/.exec(e.doc.lineAt(l).text)[0],e.tabSize));a<c.to&&/\s/.test(c.text[a-c.from]);)a++;h?{from:l,to:a}=h:l>c.from&&l<c.from+100&&!/\S/.test(c.text.slice(0,l))&&(l=c.from);let m=["",Cu(e,d)];return h&&m.push(Cu(e,p.lineIndent(c.from,-1))),{changes:{from:l,to:a,insert:De.of(m)},range:ie.cursor(l+1+m[1].length)}});return t(e.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function zd(n,e){let t=-1;return n.changeByRange(r=>{let s=[];for(let a=r.from;a<=r.to;){let c=n.doc.lineAt(a);c.number>t&&(r.empty||r.to>c.from)&&(e(c,s,r),t=c.number),a=c.to+1}let l=n.changes(s);return{changes:s,range:ie.range(l.mapPos(r.anchor,1),l.mapPos(r.head,1))}})}const jA=({state:n,dispatch:e})=>{if(n.readOnly)return!1;let t=Object.create(null),r=new Iu(n,{overrideIndentation:l=>{let a=t[l];return a??-1}}),s=zd(n,(l,a,c)=>{let h=Xx(r,l.from);if(h==null)return;/\S/.test(l.text)||(h=0);let p=/^\s*/.exec(l.text)[0],d=Cu(n,h);(p!=d||c.from<l.from+p.length)&&(t[l.from]=h,a.push({from:l.from,to:l.from+p.length,insert:d}))});return s.changes.empty||e(n.update(s,{userEvent:"indent"})),!0},IA=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(zd(n,(t,r)=>{r.push({from:t.from,insert:n.facet(Ld)})}),{userEvent:"input.indent"})),!0),BA=({state:n,dispatch:e})=>n.readOnly?!1:(e(n.update(zd(n,(t,r)=>{let s=/^\s*/.exec(t.text)[0];if(!s)return;let l=Nu(s,n.tabSize),a=0,c=Cu(n,Math.max(0,l-Ou(n)));for(;a<s.length&&a<c.length&&s.charCodeAt(a)==c.charCodeAt(a);)a++;r.push({from:t.from+a,to:t.from+s.length,insert:c.slice(a)})}),{userEvent:"delete.dedent"})),!0),zA=n=>(n.setTabFocusMode(),!0),FA=[{key:"Ctrl-b",run:Zx,shift:a1,preventDefault:!0},{key:"Ctrl-f",run:e1,shift:u1},{key:"Ctrl-p",run:r1,shift:f1},{key:"Ctrl-n",run:i1,shift:d1},{key:"Ctrl-a",run:nA,shift:pA},{key:"Ctrl-e",run:rA,shift:gA},{key:"Ctrl-d",run:y1},{key:"Ctrl-h",run:nd},{key:"Ctrl-k",run:SA},{key:"Ctrl-Alt-h",run:x1},{key:"Ctrl-o",run:PA},{key:"Ctrl-t",run:EA},{key:"Ctrl-v",run:td}],_A=[{key:"ArrowLeft",run:Zx,shift:a1,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:XE,shift:oA,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:eA,shift:fA,preventDefault:!0},{key:"ArrowRight",run:e1,shift:u1,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:KE,shift:lA,preventDefault:!0},{mac:"Cmd-ArrowRight",run:tA,shift:dA,preventDefault:!0},{key:"ArrowUp",run:r1,shift:f1,preventDefault:!0},{mac:"Cmd-ArrowUp",run:yy,shift:xy},{mac:"Ctrl-ArrowUp",run:py,shift:gy},{key:"ArrowDown",run:i1,shift:d1,preventDefault:!0},{mac:"Cmd-ArrowDown",run:vy,shift:ky},{mac:"Ctrl-ArrowDown",run:td,shift:my},{key:"PageUp",run:py,shift:gy},{key:"PageDown",run:td,shift:my},{key:"Home",run:ZE,shift:hA,preventDefault:!0},{key:"Mod-Home",run:yy,shift:xy},{key:"End",run:JE,shift:cA,preventDefault:!0},{key:"Mod-End",run:vy,shift:ky},{key:"Enter",run:wy,shift:wy},{key:"Mod-a",run:mA},{key:"Backspace",run:nd,shift:nd,preventDefault:!0},{key:"Delete",run:y1,preventDefault:!0},{key:"Mod-Backspace",mac:"Alt-Backspace",run:x1,preventDefault:!0},{key:"Mod-Delete",mac:"Alt-Delete",run:bA,preventDefault:!0},{mac:"Mod-Backspace",run:OA,preventDefault:!0},{mac:"Mod-Delete",run:CA,preventDefault:!0}].concat(FA.map(n=>({mac:n.key,run:n.run,shift:n.shift}))),HA=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:YE,shift:aA},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:GE,shift:uA},{key:"Alt-ArrowUp",run:AA},{key:"Shift-Alt-ArrowUp",run:RA},{key:"Alt-ArrowDown",run:MA},{key:"Shift-Alt-ArrowDown",run:NA},{key:"Mod-Alt-ArrowUp",run:xA},{key:"Mod-Alt-ArrowDown",run:kA},{key:"Escape",run:wA},{key:"Mod-Enter",run:LA},{key:"Alt-l",mac:"Ctrl-l",run:yA},{key:"Mod-i",run:vA,preventDefault:!0},{key:"Mod-[",run:BA},{key:"Mod-]",run:IA},{key:"Mod-Alt-\\",run:jA},{key:"Shift-Mod-k",run:DA},{key:"Shift-Mod-\\",run:sA},{key:"Mod-/",run:_E},{key:"Alt-A",run:VE},{key:"Ctrl-m",mac:"Shift-Alt-m",run:zA}].concat(_A),VA=n=>{const{state:e}=n,t=e.changeByRange(r=>({changes:{from:r.from,to:r.to,insert:"	"},range:ie.cursor(r.from+1)}));return n.dispatch(t),!0},WA=Ed.of([{key:"Tab",run:VA}]);class QA extends ol{toDOM(){const e=document.createElement("span");return e.className="cm-space-dot",e.textContent="",e}}class $A extends ol{toDOM(){const e=document.createElement("span");return e.className="cm-tab-arrow",e.textContent="",e}}const UA=Hn.fromClass(class{constructor(n){ym(this,"decorations");this.decorations=this.buildDecorations(n)}update(n){(n.docChanged||n.viewportChanged)&&(this.decorations=this.buildDecorations(n.view))}buildDecorations(n){const e=[];for(const{from:t,to:r}of n.visibleRanges){const s=n.state.doc.sliceString(t,r);for(let l=0;l<s.length;l++){const a=s[l],c=t+l;a===" "?e.push({from:c,to:c+1,decoration:et.replace({widget:new QA})}):a==="	"&&e.push({from:c,to:c+1,decoration:et.replace({widget:new $A})})}}return et.set(e.map(t=>t.decoration.range(t.from,t.to)))}},{decorations:n=>n.decorations}),XA=Ce.theme({"&":{backgroundColor:"#ffffff",color:"#000000"},".cm-content":{caretColor:"#000000"},".cm-gutters":{backgroundColor:"#f5f5f5",color:"#999999",border:"none"},".cm-activeLineGutter":{backgroundColor:"#e8e8e8"},".cm-activeLine":{backgroundColor:"#f0f0f0"},".cm-space-dot":{color:"#999999"},".cm-tab-arrow":{color:"#999999",display:"inline-block",width:"calc(4ch)",textAlign:"left"}}),KA=Ce.theme({".cm-space-dot":{color:"#666666"},".cm-tab-arrow":{color:"#666666",display:"inline-block",width:"calc(4ch)",textAlign:"left"}});function by(n){switch(n){case"light":return[XA];case"dark":default:return[FE,KA]}}const qA=O.forwardRef(function({value:e,onChange:t,colorScheme:r,onFocusChange:s},l){const a=O.useRef(null),c=O.useRef(null),h=O.useRef(new sl),p=O.useRef(s);p.current=s,O.useImperativeHandle(l,()=>({focus:()=>{var m;(m=c.current)==null||m.focus()},blur:()=>{var m;(m=c.current)==null||m.contentDOM.blur()}}),[]),O.useEffect(()=>{if(!a.current||c.current)return;const m=je.create({doc:e,extensions:[J2(),tP(),H2(),B2(),AE(),WA,Ed.of(HA),je.tabSize.of(4),UA,Ce.updateListener.of(v=>{var x;v.docChanged&&t(v.state.doc.toString()),v.focusChanged&&((x=p.current)==null||x.call(p,v.view.hasFocus))}),h.current.of(by(r)),Ce.lineWrapping]});return c.current=new Ce({state:m,parent:a.current}),()=>{var v;(v=c.current)==null||v.destroy(),c.current=null}},[]);const d=O.useCallback(m=>{const v=c.current;if(!v)return;const x=v.state.doc.toString();x!==m&&v.dispatch({changes:{from:0,to:x.length,insert:m}})},[]);return O.useEffect(()=>{d(e)},[e,d]),O.useEffect(()=>{const m=c.current;m&&m.dispatch({effects:h.current.reconfigure(by(r))})},[r]),w.jsx("div",{ref:a,className:"h-full w-full overflow-auto [&_.cm-editor]:h-full [&_.cm-scroller]:overflow-auto",style:{fontSize:"14px"}})});let Wa=null,ef=null;async function S1(){return Wa||(ef||(ef=(async()=>{const n=await fetch("/testsuite/tests.json");if(!n.ok)throw new Error(`Failed to load test suite: ${n.status}`);return Wa=await n.json(),Wa})()),ef)}function YA({isOpen:n,onClose:e,onSelect:t}){const[r,s]=O.useState([]),[l,a]=O.useState([]),[c,h]=O.useState(""),[p,d]=O.useState(!1),[m,v]=O.useState(null),[x,b]=O.useState(null),S=O.useRef(null);O.useEffect(()=>{n&&r.length===0&&!p&&(d(!0),S1().then(P=>{s(P.tests),a(P.tests),d(!1)}).catch(P=>{v(P.message),d(!1)}))},[n,r.length,p]),O.useEffect(()=>{n&&setTimeout(()=>{var P;return(P=S.current)==null?void 0:P.focus()},100)},[n]),O.useEffect(()=>{if(!c){a(r),b(null);return}try{const P=new RegExp(c,"i");b(null),a(r.filter(N=>P.test(N.id)||P.test(N.name)))}catch{b("Invalid regex"),a([])}},[c,r]),O.useEffect(()=>{const P=N=>{N.key==="Escape"&&n&&e()};return document.addEventListener("keydown",P),()=>document.removeEventListener("keydown",P)},[n,e]);const C=P=>{t(P.yaml),e(),h("")};return n?w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl w-[600px] max-h-[80vh] flex flex-col",children:[w.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[w.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:["Search"," ",w.jsx("a",{href:"https://github.com/yaml/yaml-test-suite/tree/data",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 underline",children:"YAML Test Suite"})]}),w.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white transition-colors",children:"X"})]}),w.jsxs("div",{className:"p-4 border-b border-gray-200 dark:border-gray-700",children:[w.jsx("input",{ref:S,type:"text",placeholder:"Search by regex (e.g., 'block.*map' or 'spec example')",value:c,onChange:P=>h(P.target.value),className:"w-full px-3 py-2 bg-gray-100 dark:bg-gray-900 text-gray-900 dark:text-white rounded border border-gray-300 dark:border-gray-600 focus:border-blue-500 focus:outline-none"}),x&&w.jsx("div",{className:"mt-1 text-red-600 dark:text-red-400 text-sm",children:x})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto",children:[p&&w.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"Loading tests..."}),m&&w.jsx("div",{className:"p-8 text-center text-red-600 dark:text-red-400",children:m}),!p&&!m&&l.map(P=>w.jsxs("button",{onClick:()=>C(P),className:"w-full px-4 py-3 text-left hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors border-b border-gray-200 dark:border-gray-700 last:border-b-0",children:[w.jsx("span",{className:`font-mono ${P.error?"text-red-600 dark:text-red-400":"text-blue-600 dark:text-blue-400"}`,children:P.id}),w.jsx("span",{className:"text-gray-500 dark:text-gray-400 mx-2",children:"-"}),w.jsx("span",{className:"text-gray-800 dark:text-gray-200",children:P.name})]},P.id)),!p&&!m&&l.length===0&&c&&!x&&w.jsx("div",{className:"p-8 text-center text-gray-500 dark:text-gray-400",children:"No tests match your search"})]}),w.jsxs("div",{className:"px-4 py-2 border-t border-gray-200 dark:border-gray-700 text-sm text-gray-500 flex justify-between",children:[w.jsxs("span",{children:[l.length," of ",r.length," tests"]}),w.jsx("span",{children:"(E) = expected parse error"})]})]})}):null}const GA={dark:"vs-dark",light:"light"},Fo=`# Edit this YAML and see how
# different parsers handle it.

# Green = matches reference parser
# Red = differs or errored

name: YAML Parser Playground

url: https://play.yaml.com/
repo:
  https://github.com/yaml/yaml-play

current parsers: 17
actively maintained: true

features:
- Compare outputs from multiple
  YAML parsers
- Search and load tests from the
  YAML Test Suite
- Select and drag output panes
- Click Help for shortcut keys
`,Sy=200,Oy=800,Cy=O.forwardRef(function({value:e,onChange:t,width:r,onWidthChange:s,colorScheme:l,editorType:a,showBorder:c=!0,heightMode:h="full",isMobile:p=!1},d){const m=O.useRef(!1),v=O.useRef(0),x=O.useRef(0),b=O.useRef(null),S=O.useRef(null),[C,P]=O.useState(!1),[N,D]=O.useState(!1),[B,T]=O.useState(!1),F=O.useRef(null);O.useEffect(()=>{if(!N)return;const J=U=>{F.current&&!F.current.contains(U.target)&&D(!1)},Z=U=>{U.key==="Escape"&&D(!1)};return document.addEventListener("mousedown",J),document.addEventListener("keydown",Z),()=>{document.removeEventListener("mousedown",J),document.removeEventListener("keydown",Z)}},[N]),O.useImperativeHandle(d,()=>({focus:()=>{var J,Z;a==="codemirror"?(J=S.current)==null||J.focus():(Z=b.current)==null||Z.focus()},blur:()=>{var J,Z,U;a==="codemirror"?(J=S.current)==null||J.blur():(Z=b.current)!=null&&Z.getDomNode()&&((U=document.activeElement)==null||U.blur())}}),[a]);const L=O.useCallback(J=>{b.current=J;const Z=J.getModel();Z&&Z.updateOptions({tabSize:4,insertSpaces:!1}),J.onDidFocusEditorText(()=>T(!0)),J.onDidBlurEditorText(()=>T(!1))},[]),V=O.useCallback(J=>{m.current=!0,v.current=J.clientX,x.current=r,document.body.style.cursor="col-resize",document.body.style.userSelect="none";const Z=ue=>{if(!m.current)return;const fe=ue.clientX-v.current,X=Math.min(Oy,Math.max(Sy,x.current+fe));s(X)},U=()=>{m.current=!1,document.body.style.cursor="",document.body.style.userSelect="",document.removeEventListener("mousemove",Z),document.removeEventListener("mouseup",U)};document.addEventListener("mousemove",Z),document.addEventListener("mouseup",U)},[r,s]),q=h==="full"?"h-full":"h-full overflow-hidden",Y=c?"border-r border-gray-300 dark:border-gray-700":"",H=B?"ring-2 ring-blue-500 ring-inset":"",W=p?{}:{width:`${r}px`,minWidth:`${Sy}px`,maxWidth:`${Oy}px`};return w.jsxs("div",{className:`flex flex-col ${q} ${p?"w-full border-b border-gray-300 dark:border-gray-700":Y} ${H} relative transition-shadow`,style:W,children:[w.jsxs("div",{className:"bg-white dark:bg-gray-800 px-4 py-2 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between",children:[w.jsx("h2",{className:`font-semibold transition-colors ${B?"text-gray-900 dark:text-white":"text-gray-400 dark:text-gray-500"}`,children:B?"YAML Input Editor (editing)":"YAML Input Editor"}),w.jsxs("div",{className:"flex items-center gap-1",children:[w.jsx("button",{onClick:()=>navigator.clipboard.writeText(e),className:"text-gray-400 hover:text-gray-700 dark:hover:text-white p-1",title:"Copy YAML",children:w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),w.jsxs("div",{className:"relative",ref:F,children:[w.jsx("button",{onClick:()=>D(!N),className:"text-gray-400 hover:text-gray-700 dark:hover:text-white p-1",title:"Menu",children:w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),N&&w.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[w.jsx("button",{onClick:()=>{D(!1),P(!0)},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Search Test Suite"}),w.jsx("button",{onClick:()=>{var J,Z;D(!1),t(""),a==="codemirror"?(J=S.current)==null||J.focus():(Z=b.current)==null||Z.focus()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Clear"}),w.jsx("button",{onClick:()=>{D(!1),t(Fo)},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Default YAML"})]})]})]})]}),w.jsx("div",{className:"flex-1 min-h-0 overflow-hidden",children:a==="codemirror"?w.jsx(qA,{ref:S,value:e,onChange:t,colorScheme:l,onFocusChange:T}):w.jsx(AO,{height:"100%",defaultLanguage:"yaml",defaultValue:Fo,value:e,onChange:J=>t(J||""),theme:GA[l],onMount:L,options:{minimap:{enabled:!1},fontSize:14,lineNumbers:"on",renderWhitespace:"all",tabSize:4,insertSpaces:!1,detectIndentation:!1,useTabStops:!1,scrollBeyondLastLine:!1,wordWrap:"on",automaticLayout:!0}})}),!p&&w.jsx("div",{className:"absolute top-0 right-0 w-1 h-full cursor-col-resize hover:bg-blue-500 transition-colors",onMouseDown:V}),w.jsx(YA,{isOpen:C,onClose:()=>P(!1),onSelect:t})]})});function JA({parser:n,agrees:e,loading:t,onClose:r,onAddPane:s,isDraggable:l=!0,onInfoClick:a,onRunTestSuite:c,showTestSuite:h=!0,output:p,parseSuccess:d}){const[m,v]=O.useState(!1),x=O.useRef(null);O.useEffect(()=>{if(!m)return;const H=J=>{x.current&&!x.current.contains(J.target)&&v(!1)},W=J=>{J.key==="Escape"&&v(!1)};return document.addEventListener("mousedown",H),document.addEventListener("keydown",W),()=>{document.removeEventListener("mousedown",H),document.removeEventListener("keydown",W)}},[m]);const{attributes:b,listeners:S,setNodeRef:C,transform:P,transition:N,isDragging:D}=vS({id:n.id,disabled:!l}),B={transform:Ho.Transform.toString(P),transition:N,opacity:D?.5:1},T=t||d===void 0?"bg-gray-300":d?"bg-green-300":"bg-red-300",V=!(n.id==="refparse")&&!t&&e===!1?"border-red-600":t||d===void 0?"border-gray-300":d?"border-green-300":"border-red-300",q=`${n.name} v${n.version} (${n.language})`,Y=H=>{H.stopPropagation(),v(!m)};return w.jsxs("div",{ref:C,style:B,className:`${T} ${V} border-4 px-3 py-2 flex items-center justify-between cursor-grab active:cursor-grabbing select-none`,...b,...S,children:[w.jsxs("div",{className:"flex items-center gap-2 cursor-pointer flex-1 relative",onClick:Y,ref:x,children:[w.jsx("svg",{className:"w-4 h-4 text-gray-700",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})}),w.jsx("span",{className:"text-gray-900 font-semibold",title:q,children:n.name}),m&&w.jsxs("div",{className:"absolute left-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[140px]",children:[h&&w.jsx("button",{onClick:H=>{H.stopPropagation(),v(!1),c==null||c()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Test Suite"}),w.jsx("button",{onClick:H=>{H.stopPropagation(),v(!1),a==null||a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Parser Info"})]})]}),w.jsxs("div",{className:"flex items-center gap-2",children:[t&&w.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-gray-700 border-t-transparent rounded-full"}),p&&w.jsx("button",{onClick:H=>{H.stopPropagation(),navigator.clipboard.writeText(p)},className:"text-gray-700 hover:text-gray-500 p-1",title:"Copy output",children:w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})})}),s&&w.jsx("button",{onClick:H=>{H.stopPropagation(),s()},className:"text-gray-700 hover:text-gray-500 p-1",title:"Add pane",children:w.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})})}),r&&w.jsx("button",{onClick:H=>{H.stopPropagation(),r()},className:"text-gray-700 hover:text-gray-500 text-lg leading-none px-1",title:"Close pane",children:""})]})]})}function ZA({isOpen:n,onClose:e,parser:t}){return O.useEffect(()=>{if(!n)return;const r=s=>{s.key==="Escape"&&e()};return document.addEventListener("keydown",r),()=>document.removeEventListener("keydown",r)},[n,e]),n?w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-md w-full mx-4",onClick:r=>r.stopPropagation(),children:[w.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[w.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:t.name}),w.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),w.jsx("div",{className:"p-4 space-y-3",children:w.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-sm",children:[t.repo&&w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Repository"}),w.jsx("a",{href:t.repo,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline truncate",children:t.repo})]}),w.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Language"}),w.jsx("span",{className:"text-gray-900 dark:text-white",children:t.language}),w.jsx("span",{className:"text-gray-500 dark:text-gray-400",children:"Version"}),w.jsx("span",{className:"text-gray-900 dark:text-white",children:t.version})]})})]})}):null}const O1="https://localhost:7481",ru="0.1.34";function eM(){return ru}async function tM(){try{return(await fetch(`${O1}/`,{method:"HEAD"})).ok}catch{return!1}}async function C1(n,e,t){const r=`${O1}/?version=${encodeURIComponent(ru)}&parser=yaml-test-parse-${n}`;try{const s=new URLSearchParams;s.append("text",e);const l=await fetch(r,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:s});if(!l.ok){const h=(await l.text()).match(/Requires sandbox version (\S+)/);if(h)return{status:-1,output:`Version mismatch: sandbox is ${h[1]}, but frontend requires ${ru}`,versionMismatch:{required:ru,found:h[1]}};throw new Error(`HTTP ${l.status}: ${l.statusText}`)}const a=await l.json();return{status:a.status,output:a.output}}catch(s){return s&&typeof s=="object"&&"versionMismatch"in s?s:{status:-1,output:s instanceof Error?s.message:"Unknown error"}}}let rd=null,id=null,Py=!1;async function nM(){if(Py)return;const[n,e,t,r,s]=await Promise.all([fetch("/refparse/prelude.js").then(a=>a.text()),fetch("/refparse/grammar.js").then(a=>a.text()),fetch("/refparse/parser.js").then(a=>a.text()),fetch("/refparse/receiver.js").then(a=>a.text()),fetch("/refparse/test-receiver.js").then(a=>a.text())]),l=eval;window.global=window,l(n),l(e),l(t),l(r),l(s),rd=window.Parser,id=window.TestReceiver,Py=!0}async function P1(n){try{if(await nM(),!id)return{status:1,output:"TestReceiverClass not loaded"};if(!rd)return{status:1,output:"Parser not loaded"};const e=new id,t=new rd(e);return t.parse(n),{status:0,output:t.receiver.output().replace(/\n$/,"")||"(empty output)"}}catch(e){return{status:1,output:e instanceof Error?e.message:String(e)}}}function Ey(n){return n.replace(/\s+(\{\}|\[\])$/mg,"").replace(/^=COMMENT .*\n?/mg,"").replace(/^[^+\-=].*\n?/gm,"").trim()}function E1(n,e,t){let r=Ey(n),s=Ey(e);if(t==="rustyaml"&&(s=s.replace(/<Tag\("!!", "(.*?)"\)>/g,"<tag:yaml.org,2002:$1>").replace(/<Tag\("!", "(.*?)"\)>/g,"<!$1>").replace(/<Tag\("", "!"\)>/g,"<!>").replace(/<Tag\("", "(tag:.*?)"\)>/g,"<$1>").replace(/<Tag\("", "(!.*?)"\)>/g,"<$1>"),r=r.replace(/^\+DOC ---/gm,"+DOC").replace(/^-DOC \.\.\./gm,"-DOC").replace(/^=VAL :$/gm,"=VAL :~").replace(/^\+MAP \{\}( ?)/gm,"+MAP$1").replace(/^\+SEQ \[\]( ?)/gm,"+SEQ$1"),s.match(/&1/))){let l=1,a;for(;a=r.match(/&([a-zA-Z]\S*)/);){const c=a[1];r=r.replace(new RegExp(`([&*])${c}`,"g"),`$1${l}`),l++}}if(t==="goyaml"){const l=r.split(`
`),a=s.split(`
`);l.length===a.length&&(s=a.map((h,p)=>l[p]==="+DOC"&&h==="+DOC ---"?"+DOC":h).join(`
`))}return r===s}const Ps="yaml-play-test-results-";function rM(n){try{const e=Ps+n,t=localStorage.getItem(e);return t?JSON.parse(t):null}catch{return null}}function iM(n,e){try{const t=Ps+n;localStorage.setItem(t,JSON.stringify(e))}catch{}}function Ao(n){try{const e=Ps+n;localStorage.removeItem(e)}catch{}}function sM(n,e,t){return n?n.parserVersion===e&&n.testSuiteVersion===t:!1}function oM(){try{const n=[];for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);t&&t.startsWith(Ps)&&n.push(t)}n.forEach(e=>localStorage.removeItem(e))}catch{}}function lM(){const n=[];try{for(let e=0;e<localStorage.length;e++){const t=localStorage.key(e);if(t&&t.startsWith(Ps)){const r=t.substring(Ps.length),s=localStorage.getItem(t);if(s){const l=JSON.parse(s);n.push({parserId:r,cache:l})}}}}catch{}return n}const A1="yaml-play-test-sort";function Ay(){try{const n=localStorage.getItem(A1);if(n)return JSON.parse(n)}catch{}return{column:"id",direction:"asc"}}function aM(n){try{localStorage.setItem(A1,JSON.stringify(n))}catch{}}function sd({isOpen:n,onClose:e,parser:t,onSelectTest:r,forceRerun:s=!1,onCompare:l,onRunAgain:a,onClearCache:c}){const[h,p]=O.useState([]),[d,m]=O.useState([]),[v,x]=O.useState(!1),[b,S]=O.useState(null),[C,P]=O.useState(0),[N,D]=O.useState(Ay),[B,T]=O.useState(!1),[F,L]=O.useState(!1),V=O.useRef(!1),q=O.useRef(!1),Y=O.useRef(0),H=O.useRef(null),W=O.useRef(null),J=O.useRef(null);O.useEffect(()=>{n&&(D(Ay()),T(!1))},[n]),O.useEffect(()=>{if(!B)return;const te=he=>{J.current&&!J.current.contains(he.target)&&T(!1)};return document.addEventListener("mousedown",te),()=>document.removeEventListener("mousedown",te)},[B]);const Z=O.useCallback((te,he)=>{const we=[...te];return we.sort((Pe,ve)=>{let Re=0;switch(he.column){case"ok":Re=(Pe.passed?1:0)-(ve.passed?1:0);break;case"id":Re=Pe.testId.localeCompare(ve.testId);break;case"description":Re=Pe.testName.localeCompare(ve.testName);break}return he.direction==="asc"?Re:-Re}),we},[]),U=te=>{const he={column:te,direction:N.column===te&&N.direction==="asc"?"desc":"asc"};D(he),aM(he)},ue=te=>N.column!==te?null:N.direction==="asc"?" ":" ",fe=v?d:Z(d,N);O.useEffect(()=>{if(!n){q.current=!1,L(!1),W.current&&(clearInterval(W.current),W.current=null);return}if(V.current=!1,S(null),m([]),P(0),p([]),!q.current)return q.current=!0,x(!0),L(!0),Y.current=Date.now(),W.current=window.setInterval(()=>{P(Date.now()-Y.current)},10),()=>{V.current=!0,W.current&&(clearInterval(W.current),W.current=null)}},[n,t.id,t.version,s]),O.useEffect(()=>{if(!F||!n)return;L(!1),(async()=>{try{const he=await S1();if(V.current){x(!1),q.current=!1,W.current&&(clearInterval(W.current),W.current=null);return}p(he.tests);const we=rM(t.id);if(!s&&sM(we,t.version,he.version)){const ve=we.results.map(Re=>{const Ve=he.tests.find(st=>st.id===Re.testId);return{testId:Re.testId,testName:(Ve==null?void 0:Ve.name)||Re.testId,passed:Re.passed}});m(ve),x(!1),q.current=!1,W.current&&(clearInterval(W.current),W.current=null);return}s&&Ao(t.id);const Pe=[];for(let ve=0;ve<he.tests.length&&!V.current;ve++){const Re=he.tests[ve];m(Ge=>[...Ge,{testId:Re.id,testName:Re.name,passed:!1,running:!0}]);let Ve;if(t.id==="refparse"){const Ge=await P1(Re.yaml);Ve={status:Ge.status,output:Ge.output}}else Ve=await C1(t.id,Re.yaml,t.version);if(V.current)break;let st;Re.error?st=Ve.status!==0:st=Ve.status===0&&E1(Re.expected,Ve.output,t.id),m(Ge=>{const ot=[...Ge];return ot.length>0&&(ot[ot.length-1]={testId:Re.id,testName:Re.name,passed:st,running:!1}),ot}),Pe.push({testId:Re.id,passed:st}),setTimeout(()=>{H.current&&(H.current.scrollTop=H.current.scrollHeight)},0)}if(!V.current&&Pe.length===he.tests.length){const ve=Date.now()-Y.current,Re={parserVersion:t.version,testSuiteVersion:he.version,results:Pe,elapsedTime:ve};iM(t.id,Re)}}catch(he){S(he instanceof Error?he.message:"Unknown error")}finally{W.current&&(clearInterval(W.current),W.current=null),x(!1),q.current=!1,setTimeout(()=>{H.current&&(H.current.scrollTop=0)},0)}})()},[F,n,t.id,t.version,s]),O.useEffect(()=>{if(!n)return;const te=he=>{he.key==="Escape"&&(B?T(!1):(V.current=!0,e())),he.key.toUpperCase()==="C"&&!he.ctrlKey&&!he.metaKey&&!he.altKey&&!v&&l&&(e(),l())};return document.addEventListener("keydown",te),()=>document.removeEventListener("keydown",te)},[n,e,v,l,B]);const X=te=>{V.current=!0,r(te.yaml),e()},re=()=>{V.current=!0,e()};if(!n)return null;const ee=d.filter(te=>te.passed&&!te.running).length,A=d.filter(te=>!te.passed&&!te.running).length,j=h.length,se=j>0?Math.round(d.length/j*100):0,de=j>0?(ee/j*100).toFixed(1):"0.0",xe=te=>{const he=Math.floor(te/1e3),we=Math.floor(te%1e3/10);return`${he}.${we.toString().padStart(2,"0")}s`};return w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:re,children:w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] flex flex-col",onClick:te=>te.stopPropagation(),children:[w.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[w.jsxs("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:[t.name," - Test Suite"]}),w.jsx("button",{onClick:re,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),w.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center gap-4",children:[w.jsxs("span",{className:"text-green-600 dark:text-green-400",children:["Pass: ",ee]}),w.jsxs("span",{className:"text-red-600 dark:text-red-400",children:["Fail: ",A]}),w.jsxs("span",{className:"text-gray-500 dark:text-gray-400",children:["Total: ",j]}),v?w.jsxs("span",{className:"text-blue-600 dark:text-blue-400 flex items-center gap-2",children:[w.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 dark:border-blue-400 border-t-transparent rounded-full"}),xe(C)," (",se,"%)"]}):C>0?w.jsxs("span",{className:"text-gray-500",children:[de,"% passing (",xe(C),")"]}):w.jsxs("span",{className:"text-gray-500",children:[de,"% passing (cached)"]}),!v&&(a||c||l)&&w.jsxs("div",{className:"ml-auto relative",ref:J,children:[w.jsx("button",{onClick:()=>T(!B),className:"text-gray-700 dark:text-white hover:text-gray-900 dark:hover:text-gray-300 p-1",title:"Menu",children:w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),B&&w.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[l&&w.jsxs("button",{onClick:()=>{T(!1),e(),l()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[w.jsx("span",{className:"underline",children:"C"}),"ompare Test Runs"]}),a&&w.jsx("button",{onClick:()=>{T(!1),a()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Run Again"}),c&&w.jsx("button",{onClick:()=>{T(!1),c()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Clear Cache"})]})]})]}),b&&w.jsxs("div",{className:"px-4 py-3 bg-red-100 dark:bg-red-900 text-red-700 dark:text-red-200 text-sm",children:["Error: ",b]}),d.length>0&&w.jsxs("div",{className:"px-4 py-2 border-b border-gray-200 dark:border-gray-700 flex items-center gap-2 text-sm text-gray-500 dark:text-gray-400",children:[w.jsxs("span",{className:"w-10 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>U("ok"),children:["OK",ue("ok")]}),w.jsxs("span",{className:"w-20 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none font-mono",onClick:()=>U("id"),children:["ID",ue("id")]}),w.jsxs("span",{className:"flex-1 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>U("description"),children:["Description",ue("description")]})]}),w.jsxs("div",{ref:H,className:"flex-1 overflow-y-auto p-2 space-y-1",children:[fe.map(te=>{const he=h.find(we=>we.id===te.testId);return w.jsxs("button",{onClick:()=>he&&X(he),className:`w-full text-left px-3 py-2 rounded text-sm flex items-center gap-2 hover:bg-gray-100 dark:hover:bg-gray-700 ${te.running?"bg-gray-100 dark:bg-gray-700":""}`,children:[w.jsx("span",{className:"w-10 flex-shrink-0 text-center",children:te.running?w.jsx("div",{className:"animate-spin h-4 w-4 border-2 border-blue-600 dark:border-blue-400 border-t-transparent rounded-full"}):te.passed?w.jsx("span",{className:"text-green-600 dark:text-green-400",children:""}):w.jsx("span",{className:"text-red-600 dark:text-red-400",children:""})}),w.jsx("span",{className:"w-20 text-gray-500 dark:text-gray-400 font-mono flex-shrink-0",children:te.testId}),w.jsx("span",{className:"flex-1 text-gray-700 dark:text-gray-300 truncate",children:te.testName})]},te.testId)}),d.length===0&&!v&&!b&&w.jsx("div",{className:"text-gray-500 text-center py-4",children:"No test results available"}),d.length===0&&v&&w.jsx("div",{className:"text-gray-500 text-center py-4",children:"Loading test suite..."})]})]})})}const ji=[{id:"refparse",name:"Reference Parser",version:"f003194",repo:"https://github.com/yaml/yaml-reference-parser",language:"JavaScript",isJavaScript:!0},{id:"npmyaml",name:"eemeli/yaml",version:"2.8.1",repo:"https://github.com/eemeli/yaml",language:"JavaScript",isJavaScript:!0},{id:"libyaml",name:"libyaml",version:"0.2.5",repo:"https://github.com/yaml/libyaml",language:"C"},{id:"pyyaml",name:"PyYAML",version:"6.0.3",language:"Python"},{id:"ruamel",name:"ruamel.yaml",version:"0.18.16",language:"Python"},{id:"goyaml",name:"go-yaml",version:"94c6e9d",repo:"https://github.com/pantoniou/yaml",language:"Go"},{id:"libfyaml",name:"libfyaml",version:"0.9",repo:"https://github.com/pantoniou/libfyaml",language:"C"},{id:"rapid",name:"rapidyaml",version:"0.10.0",repo:"https://github.com/biojppm/rapidyaml",language:"C++"},{id:"rustyaml",name:"serde-yaml",version:"0.9.34",repo:"https://github.com/dtolnay/serde-yaml",language:"Rust"},{id:"snake",name:"SnakeYAML",version:"2.5",repo:"https://bitbucket.org/snakeyaml/snakeyaml",language:"Java"},{id:"snakeeng",name:"SnakeYAML Engine",version:"3.0.1",repo:"https://bitbucket.org/snakeyaml/snakeyaml-engine",language:"Java"},{id:"dotnet",name:"YamlDotNet",version:"11.2.1",repo:"https://github.com/aaubry/YamlDotNet",language:"C#"},{id:"luayaml",name:"lyaml",version:"6.2.8",repo:"https://github.com/gvvaughan/lyaml",language:"Lua"},{id:"nimyaml",name:"NimYAML",version:"1.0.0",repo:"https://github.com/flyx/NimYAML",language:"Nim"},{id:"ppyaml",name:"YAML::PP",version:"0.039",language:"Perl"},{id:"hsyaml",name:"HsYAML",version:"0.2.1.1",repo:"https://github.com/haskell-hvr/HsYAML",language:"Haskell"},{id:"refhs",name:"yamlreference",version:"bf471f8",repo:"https://github.com/orenbenkiki/yamlreference",language:"Haskell"}],ni=n=>ji.find(e=>e.id===n),uM=()=>["refparse","pyyaml","libyaml","goyaml"],M1="yaml-play-compare-sort";function cM(n){const e=Math.floor(n/1e3),t=Math.floor(n%1e3/10);return`${e}.${t.toString().padStart(2,"0")}s`}function My(){try{const n=localStorage.getItem(M1);if(n)return JSON.parse(n)}catch{}return{column:"percent",direction:"desc"}}function hM(n){try{localStorage.setItem(M1,JSON.stringify(n))}catch{}}function R1({isOpen:n,onClose:e,onSelectParser:t}){const[r,s]=O.useState([]),[l,a]=O.useState(My);O.useEffect(()=>{n&&a(My())},[n]);const c=O.useCallback((d,m)=>{const v=[...d];return v.sort((x,b)=>{let S=0;switch(m.column){case"parserName":S=x.parserName.localeCompare(b.parserName);break;case"version":S=x.version.localeCompare(b.version);break;case"passed":S=x.passed-b.passed;break;case"failed":S=x.failed-b.failed;break;case"total":S=x.total-b.total;break;case"percent":S=x.percentNum-b.percentNum;break;case"time":S=(x.elapsedTime??0)-(b.elapsedTime??0);break}return m.direction==="asc"?S:-S}),v},[]);O.useEffect(()=>{if(!n)return;const m=lM().map(v=>{const x=ni(v.parserId),b=v.cache.results.filter(D=>D.passed).length,S=v.cache.results.length,C=S-b,P=S>0?b/S*100:0,N=P.toFixed(1);return{parserId:v.parserId,parserName:(x==null?void 0:x.name)||v.parserId,passed:b,failed:C,total:S,percent:N,percentNum:P,version:v.cache.parserVersion,elapsedTime:v.cache.elapsedTime}});s(c(m,l))},[n,l,c]);const h=d=>{const m={column:d,direction:l.column===d&&l.direction==="asc"?"desc":"asc"};a(m),hM(m)},p=d=>l.column!==d?null:l.direction==="asc"?" ":" ";return O.useEffect(()=>{if(!n)return;const d=m=>{m.key==="Escape"&&e()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[n,e]),n?w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[80vh] flex flex-col",onClick:d=>d.stopPropagation(),children:[w.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[w.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Compare Test Runs"}),w.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),w.jsxs("div",{className:"flex-1 overflow-y-auto p-4",children:[w.jsxs("table",{className:"w-full text-sm",children:[w.jsx("thead",{children:w.jsxs("tr",{className:"text-left text-gray-500 dark:text-gray-400 border-b border-gray-200 dark:border-gray-700",children:[w.jsxs("th",{className:"pb-2 cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("parserName"),children:["Parser",p("parserName")]}),w.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("version"),children:["Version",p("version")]}),w.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("passed"),children:["Pass",p("passed")]}),w.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("failed"),children:["Fail",p("failed")]}),w.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("total"),children:["Total",p("total")]}),w.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("percent"),children:["%",p("percent")]}),w.jsxs("th",{className:"pb-2 text-right cursor-pointer hover:text-gray-900 dark:hover:text-white select-none",onClick:()=>h("time"),children:["Time",p("time")]})]})}),w.jsx("tbody",{children:r.map(d=>w.jsxs("tr",{className:"border-b border-gray-200 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-700 cursor-pointer",onClick:()=>{t(d.parserId),e()},children:[w.jsx("td",{className:"py-2 text-gray-900 dark:text-white",children:d.parserName}),w.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400 font-mono text-xs",children:d.version}),w.jsx("td",{className:"py-2 text-right text-green-600 dark:text-green-400",children:d.passed}),w.jsx("td",{className:"py-2 text-right text-red-600 dark:text-red-400",children:d.failed}),w.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400",children:d.total}),w.jsxs("td",{className:"py-2 text-right text-gray-900 dark:text-white font-semibold",children:[d.percent,"%"]}),w.jsx("td",{className:"py-2 text-right text-gray-500 dark:text-gray-400 font-mono text-xs",children:d.elapsedTime!=null?cM(d.elapsedTime):"-"})]},d.parserId))})]}),r.length===0&&w.jsx("div",{className:"text-gray-500 text-center py-8",children:"No cached test results available"})]})]})}):null}function fM(n){return["Failed to fetch","NetworkError","network error","ERR_CONNECTION_REFUSED","ECONNREFUSED","fetch failed","Load failed","HTTP 500","HTTP 502","HTTP 503","HTTP 504","Internal Server Error"].some(t=>n.toLowerCase().includes(t.toLowerCase()))}function tf({parser:n,result:e,onClose:t,onAddPane:r,isDraggable:s=!0,onSetYamlInput:l,showTestSuite:a=!0}){const[c,h]=O.useState(!1),[p,d]=O.useState(!1),[m,v]=O.useState(!1),[x,b]=O.useState(0),[S,C]=O.useState(!1),[P,N]=O.useState(null),[D,B]=O.useState(!1),[T,F]=O.useState(0),L=O.useCallback(()=>{Ao(n.id),v(!0),b(Z=>Z+1)},[n.id]),V=O.useCallback(()=>{Ao(n.id),d(!1)},[n.id]),q=O.useCallback(()=>{P&&(Ao(P),B(!0),F(Z=>Z+1))},[P]),Y=O.useCallback(()=>{P&&(Ao(P),N(null))},[P]),H=n.id!=="refparse",W=H&&(e==null?void 0:e.versionMismatch),J=H&&!W&&(e==null?void 0:e.status)===-1&&(e==null?void 0:e.output)&&fM(e.output);return w.jsxs("div",{className:"flex flex-col h-full min-h-[200px] bg-gray-100 dark:bg-gray-900",children:[w.jsx(JA,{parser:n,agrees:e==null?void 0:e.agrees,loading:e==null?void 0:e.loading,onClose:t,onAddPane:r,isDraggable:s,onInfoClick:()=>h(!0),onRunTestSuite:()=>{v(!1),d(!0)},showTestSuite:a,output:e==null?void 0:e.output,parseSuccess:e?e.status===0:void 0}),w.jsx(ZA,{isOpen:c,onClose:()=>h(!1),parser:n}),w.jsx(sd,{isOpen:p,onClose:()=>d(!1),parser:n,onSelectTest:Z=>l==null?void 0:l(Z),forceRerun:m,onCompare:()=>C(!0),onRunAgain:L,onClearCache:V},x),w.jsx(R1,{isOpen:S,onClose:()=>C(!1),onSelectParser:Z=>N(Z)}),P&&ni(P)&&w.jsx(sd,{isOpen:!0,onClose:()=>{N(null),B(!1)},parser:ni(P),onSelectTest:Z=>l==null?void 0:l(Z),forceRerun:D,onCompare:()=>{N(null),C(!0)},onRunAgain:q,onClearCache:Y},`view-${P}-${T}`),w.jsx("div",{className:"flex-1 bg-gray-100 dark:bg-gray-900 overflow-auto",children:e!=null&&e.error?w.jsxs("pre",{className:"p-3 text-red-600 dark:text-red-400 text-sm font-mono whitespace-pre-wrap",children:["Error: ",e.error]}):W?w.jsxs("div",{className:"p-3 text-sm",children:[w.jsxs("p",{className:"text-yellow-600 dark:text-yellow-400 mb-2",children:["Wrong sandbox version (",e.versionMismatch.found,") found. Requires ",e.versionMismatch.required,"."]}),w.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Click the "',w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Setup"}),'" button for instructions.']})]}):J?w.jsxs("div",{className:"p-3 text-sm",children:[w.jsx("p",{className:"text-gray-700 dark:text-gray-300 mb-2",children:"Can't connect to a local YAML parser sandbox server."}),w.jsxs("p",{className:"text-gray-600 dark:text-gray-400",children:['Click the "',w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:"Setup"}),'" button for instructions.']})]}):e!=null&&e.loading?w.jsx("div",{className:"p-3 text-gray-500 text-sm",children:"Running parser..."}):w.jsx("pre",{className:"p-3 text-gray-800 dark:text-gray-200 text-sm font-mono whitespace-pre-wrap",children:(e==null?void 0:e.output)||"No output yet"})})]})}function dM({total:n,disagreeing:e,disagreeingNames:t,loading:r,sandboxAvailable:s=!0}){if(!s)return null;if(r)return w.jsx("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2",children:w.jsx("span",{className:"text-gray-500 dark:text-gray-400 font-semibold",children:"Running parsers..."})});const l=e===0;return w.jsxs("div",{className:"bg-white dark:bg-gray-800 border-t border-gray-300 dark:border-gray-700 px-4 py-2 flex items-center justify-between",children:[l?w.jsxs("span",{className:"text-green-600 dark:text-green-400 font-semibold",children:["All ",n," parsers agree with the Reference Parser"]}):w.jsxs("span",{className:"text-red-600 dark:text-red-400 font-semibold",children:[e,"/",n," parsers disagree with the Reference Parser: ",t.join(", ")]}),w.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",className:"text-gray-500 dark:text-gray-400 hover:text-gray-900 dark:hover:text-white transition-colors",title:"View on GitHub",children:w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12 2C6.477 2 2 6.477 2 12c0 4.42 2.865 8.17 6.839 9.49.5.092.682-.217.682-.482 0-.237-.008-.866-.013-1.7-2.782.604-3.369-1.34-3.369-1.34-.454-1.156-1.11-1.464-1.11-1.464-.908-.62.069-.608.069-.608 1.003.07 1.531 1.03 1.531 1.03.892 1.529 2.341 1.087 2.91.831.092-.646.35-1.086.636-1.336-2.22-.253-4.555-1.11-4.555-4.943 0-1.091.39-1.984 1.029-2.683-.103-.253-.446-1.27.098-2.647 0 0 .84-.269 2.75 1.025A9.578 9.578 0 0112 6.836c.85.004 1.705.115 2.504.337 1.909-1.294 2.747-1.025 2.747-1.025.546 1.377.203 2.394.1 2.647.64.699 1.028 1.592 1.028 2.683 0 3.842-2.339 4.687-4.566 4.935.359.309.678.919.678 1.852 0 1.336-.012 2.415-.012 2.743 0 .267.18.578.688.48C19.138 20.167 22 16.418 22 12c0-5.523-4.477-10-10-10z"})})})]})}function pM({isOpen:n,onClose:e,paneStates:t,onToggleVisibility:r,insertAfterId:s,onAddPaneAfter:l}){if(O.useEffect(()=>{if(!n)return;const d=m=>{m.key==="Escape"&&e()};return document.addEventListener("keydown",d),()=>document.removeEventListener("keydown",d)},[n,e]),!n)return null;const a=s!==void 0&&l!==void 0,c=new Map(t.map(d=>[d.id,d])),h=[...ji].filter(d=>d.id!=="refparse").filter(d=>{var m;return!a||!(((m=c.get(d.id))==null?void 0:m.visible)??!1)}).sort((d,m)=>d.id.localeCompare(m.id)),p=d=>{a&&(l(s,d),e())};return w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full mx-4 max-h-[80vh] overflow-hidden",onClick:d=>d.stopPropagation(),children:[w.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[w.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:a?"Add Parser Pane":"Parser Panes"}),w.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),w.jsx("div",{className:"p-4 overflow-y-auto max-h-[60vh]",children:h.length===0?w.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm",children:"All parsers are already visible."}):h.map(d=>{const m=c.get(d.id),v=(m==null?void 0:m.visible)??!1,x=/^\d+(\.\d+)+$/.test(d.version);return a?w.jsxs("button",{onClick:()=>p(d.id),className:"flex items-center gap-3 py-2 px-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700 w-full text-left",children:[w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:d.name}),w.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:d.language}),x&&w.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:d.version})]},d.id):w.jsxs("label",{className:"flex items-center gap-3 py-2 px-2 rounded cursor-pointer hover:bg-gray-100 dark:hover:bg-gray-700",children:[w.jsx("input",{type:"checkbox",checked:v,onChange:b=>r(d.id,b.target.checked),className:"w-4 h-4 rounded border-gray-400 dark:border-gray-600 bg-white dark:bg-gray-700 text-blue-600 focus:ring-blue-500"}),w.jsx("span",{className:"text-gray-900 dark:text-white font-medium",children:d.name}),w.jsx("span",{className:"text-xs text-gray-500 dark:text-gray-400",children:d.language}),x&&w.jsx("span",{className:"text-xs text-blue-600 dark:text-blue-400",children:d.version})]},d.id)})})]})})}const gM=[{id:"light",label:"Light"},{id:"dark",label:"Dark"}],mM=[{id:"monaco",label:"Monaco"},{id:"codemirror",label:"CodeMirror"}];function yM({isOpen:n,onClose:e,colorScheme:t,onColorSchemeChange:r,editorType:s,onEditorTypeChange:l}){return O.useEffect(()=>{if(!n)return;const a=c=>{c.key==="Escape"&&e()};return document.addEventListener("keydown",a),()=>document.removeEventListener("keydown",a)},[n,e]),n?w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-sm w-full mx-4",onClick:a=>a.stopPropagation(),children:[w.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[w.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Options"}),w.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),w.jsxs("div",{className:"p-4",children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Editor"}),w.jsx("div",{className:"flex gap-2 mb-4",children:mM.map(a=>w.jsx("button",{onClick:()=>l(a.id),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${s===a.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:a.label},a.id))}),w.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"Mode"}),w.jsx("div",{className:"flex gap-2",children:gM.map(a=>w.jsx("button",{onClick:()=>r(a.id),className:`flex-1 py-2 px-3 rounded text-sm transition-colors ${t===a.id?"bg-blue-600 text-white":"bg-gray-200 dark:bg-gray-700 text-gray-700 dark:text-gray-300 hover:bg-gray-300 dark:hover:bg-gray-600"}`,children:a.label},a.id))})]})]})}):null}const Fd=eM(),Ry=`docker run --rm -d --name yaml-play -p 7481:7481 yamlio/yaml-play-sandbox:${Fd} 7481`,Ny=`docker run --rm -d --name yaml-play --network host yamlio/yaml-play-sandbox:${Fd} 7481`;function vM({isOpen:n,onClose:e}){const[t,r]=O.useState(!1),[s,l]=O.useState(!1),a=async(c,h)=>{try{await navigator.clipboard.writeText(c),h(!0),setTimeout(()=>h(!1),2e3)}catch{const p=document.createElement("textarea");p.value=c,document.body.appendChild(p),p.select(),document.execCommand("copy"),document.body.removeChild(p),h(!0),setTimeout(()=>h(!1),2e3)}};return O.useEffect(()=>{if(!n)return;const c=h=>{h.key==="Escape"&&e()};return document.addEventListener("keydown",c),()=>document.removeEventListener("keydown",c)},[n,e]),n?w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4 max-h-[80vh] overflow-hidden",onClick:c=>c.stopPropagation(),children:[w.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[w.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Sandbox Setup"}),w.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),w.jsxs("div",{className:"p-4 overflow-y-auto max-h-[60vh] space-y-6",children:[w.jsxs("section",{children:[w.jsxs("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:["Start the Sandbox Server (version ",Fd,")"]}),w.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"These parsers run in a Docker container that you need to start on your machine. If you see connection errors, start the sandbox by running this command in a terminal:"}),w.jsxs("div",{className:"relative",children:[w.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 p-3 pr-16 rounded text-sm text-green-700 dark:text-green-400 font-mono overflow-x-auto",children:Ry}),w.jsx("button",{onClick:()=>a(Ry,r),className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors",children:t?"Copied!":"Copy"})]}),w.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-3 mb-2",children:"The Docker command above does not work for some users. If it does not work for you then try this command instead:"}),w.jsxs("div",{className:"relative",children:[w.jsx("pre",{className:"bg-gray-100 dark:bg-gray-900 p-3 pr-16 rounded text-sm text-green-700 dark:text-green-400 font-mono overflow-x-auto",children:Ny}),w.jsx("button",{onClick:()=>a(Ny,l),className:"absolute top-2 right-2 px-2 py-1 text-xs bg-gray-200 dark:bg-gray-700 hover:bg-gray-300 dark:hover:bg-gray-600 text-gray-700 dark:text-gray-300 rounded transition-colors",children:s?"Copied!":"Copy"})]}),w.jsx("p",{className:"text-gray-500 dark:text-gray-400 text-sm mt-3",children:"Note: If a different version of the sandbox server Docker container is already running, you'll need to kill that first."})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 mb-2 uppercase",children:"HTTPS Certificate (if needed)"}),w.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"If you are still getting connection errors, you may need to accept the unsigned HTTPS certificate:"}),w.jsxs("ol",{className:"text-gray-600 dark:text-gray-300 text-sm list-decimal list-inside space-y-1",children:[w.jsxs("li",{children:["Click here:"," ",w.jsx("a",{href:"https://localhost:7481",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:text-blue-500 dark:hover:text-blue-300 underline",children:"https://localhost:7481"})," ","(opens in a new tab)"]}),w.jsx("li",{children:"Accept the security warning / proceed anyway"}),w.jsx("li",{children:"Return to this page and refresh"})]})]})]})]})}):null}function xM({onHelp:n,onOptions:e,onParserPanes:t,onKeyboardShortcuts:r,onSandboxSetup:s,onFactoryReset:l}){const[a,c]=O.useState(!1),h=O.useRef(null);return O.useEffect(()=>{if(!a)return;const p=m=>{h.current&&!h.current.contains(m.target)&&c(!1)},d=m=>{m.key==="Escape"&&c(!1)};return document.addEventListener("mousedown",p),document.addEventListener("keydown",d),()=>{document.removeEventListener("mousedown",p),document.removeEventListener("keydown",d)}},[a]),w.jsxs("div",{className:"relative",ref:h,children:[w.jsx("button",{onClick:()=>c(!a),className:"text-gray-700 dark:text-white hover:text-gray-900 dark:hover:text-gray-300 p-2",title:"Menu",children:w.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:w.jsx("path",{fillRule:"evenodd",d:"M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z",clipRule:"evenodd"})})}),a&&w.jsxs("div",{className:"absolute right-0 top-full mt-1 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded shadow-lg z-50 min-w-[160px]",children:[w.jsxs("button",{onClick:()=>{c(!1),n()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[w.jsx("span",{className:"underline",children:"H"}),"elp"]}),w.jsxs("button",{onClick:()=>{c(!1),e()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[w.jsx("span",{className:"underline",children:"O"}),"ptions"]}),w.jsxs("button",{onClick:()=>{c(!1),t()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[w.jsx("span",{className:"underline",children:"P"}),"arser Panes"]}),w.jsxs("button",{onClick:()=>{c(!1),r()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:[w.jsx("span",{className:"underline",children:"K"}),"eyboard Shortcuts"]}),w.jsx("button",{onClick:()=>{c(!1),s()},className:"w-full text-left px-3 py-2 text-sm text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700",children:"Sandbox Setup"}),w.jsx("button",{onClick:()=>{c(!1),l()},className:"w-full text-left px-3 py-2 text-sm text-red-600 dark:text-red-400 hover:bg-gray-100 dark:hover:bg-gray-700",children:"Factory Reset"})]})]})}function kM({isOpen:n,onClose:e}){return O.useEffect(()=>{if(!n)return;const t=r=>{r.key==="Escape"&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[n,e]),n?w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-2xl w-full mx-4 max-h-[85vh] overflow-hidden flex flex-col",onClick:t=>t.stopPropagation(),children:[w.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[w.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Help"}),w.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),w.jsxs("div",{className:"p-4 space-y-5 overflow-y-auto",children:[w.jsxs("section",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Overview"}),w.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["The ",w.jsx("strong",{className:"text-gray-900 dark:text-white",children:"YAML Parser Playground"})," lets you compare how 17+ different YAML parser implementations handle the same input. Enter YAML in the input editor on the left, and see the parsed output from each parser in the panes on the right."]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Understanding the Colors"}),w.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mb-2",children:"Each output pane has a colored header showing the parse status:"}),w.jsxs("div",{className:"space-y-2 text-sm",children:[w.jsxs("div",{className:"flex items-start gap-2",children:[w.jsx("span",{className:"inline-block w-4 h-4 bg-green-300 border-4 border-green-300 rounded flex-shrink-0 mt-0.5"}),w.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[w.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Green:"})," The YAML parsed successfully (no errors)"]})]}),w.jsxs("div",{className:"flex items-start gap-2",children:[w.jsx("span",{className:"inline-block w-4 h-4 bg-red-300 border-4 border-red-300 rounded flex-shrink-0 mt-0.5"}),w.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[w.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Red:"})," The parser returned an error"]})]}),w.jsxs("div",{className:"flex items-start gap-2",children:[w.jsx("span",{className:"inline-block w-4 h-4 bg-green-300 border-4 border-red-600 rounded flex-shrink-0 mt-0.5"}),w.jsxs("span",{className:"text-gray-600 dark:text-gray-300",children:[w.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Red border:"})," Output differs from the Reference Parser"]})]})]}),w.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm mt-2",children:"A red border indicates disagreement  either the output differs from RefParse, or one parser succeeded while the other failed."})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"The Reference Parser"}),w.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["The ",w.jsx("strong",{className:"text-gray-900 dark:text-white",children:"RefParse"})," pane shows output from the official YAML Reference Parser, which aims to implement the YAML 1.2 specification exactly. All other parsers are compared against it. RefParse runs directly in your browser and doesn't require the sandbox."]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Output Format"}),w.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:['The output is a DSL (domain-specific language) representing YAML parser "events"  the internal data structures parsers create when processing YAML. This is the same format used by the'," ",w.jsx("a",{href:"https://github.com/yaml/yaml-test-suite",target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline",children:"YAML Test Suite"}),'. A "parser" is just one stage in a YAML "loader"  it converts text to events, while later stages convert events to native data structures.']})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Running Other Parsers"}),w.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Most parsers (Python, Go, Ruby, Java, etc.) require a local Docker sandbox to run. Click the ",w.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Setup"})," button in the header for instructions on starting the sandbox container. Without it, only the JavaScript-based Reference Parser will work."]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"YAML Test Suite"}),w.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Use the ",w.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Search Test Suite"})," feature (in the input pane menu) to load test cases from the official YAML Test Suite. You can also run the entire test suite against any parser by clicking its hamburger menu and selecting ",w.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Test Suite"}),"."]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Sharing URLs"}),w.jsx("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:"Your YAML input is automatically encoded in the URL. Copy and share the URL to let others see exactly what you're working on  great for bug reports and discussions about YAML edge cases."})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Keyboard Shortcuts"}),w.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Press ",w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"K"})," to see all keyboard shortcuts. Highlights include:"]}),w.jsxs("ul",{className:"text-gray-600 dark:text-gray-300 text-sm mt-2 space-y-1 list-disc list-inside",children:[w.jsxs("li",{children:[w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"I"}),"  Focus the input editor"]}),w.jsxs("li",{children:[w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"A"})," / ",w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"N"}),"  Show all / no panes"]}),w.jsxs("li",{children:[w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"D"}),"  Show only differing panes"]}),w.jsxs("li",{children:[w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"O"})," / ",w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-1.5 py-0.5 rounded text-gray-800 dark:text-gray-200 font-mono text-xs",children:"P"}),"  Options / Parser Panes"]})]})]}),w.jsxs("section",{children:[w.jsx("h3",{className:"text-sm font-semibold text-gray-500 dark:text-gray-400 uppercase mb-2",children:"Organizing Panes"}),w.jsxs("p",{className:"text-gray-600 dark:text-gray-300 text-sm",children:["Drag parser panes by their headers to reorder them. Use"," ",w.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Parser Panes"})," (press P) to show/hide specific parsers, or ",w.jsx("strong",{className:"text-gray-900 dark:text-white",children:"Options"})," (press O) to change the editor type or color scheme."]})]})]})]})}):null}function wM({isOpen:n,onClose:e}){return O.useEffect(()=>{if(!n)return;const t=r=>{r.key==="Escape"&&e()};return document.addEventListener("keydown",t),()=>document.removeEventListener("keydown",t)},[n,e]),n?w.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",onClick:e,children:w.jsxs("div",{className:"bg-white dark:bg-gray-800 rounded-lg shadow-xl max-w-lg w-full mx-4",onClick:t=>t.stopPropagation(),children:[w.jsxs("div",{className:"px-4 py-3 border-b border-gray-200 dark:border-gray-700 flex items-center justify-between",children:[w.jsx("h2",{className:"text-lg font-semibold text-gray-900 dark:text-white",children:"Keyboard Shortcuts"}),w.jsx("button",{onClick:e,className:"text-gray-500 dark:text-gray-400 hover:text-gray-700 dark:hover:text-white text-2xl leading-none",children:""})]}),w.jsx("div",{className:"p-4",children:w.jsxs("div",{className:"grid grid-cols-[auto_1fr] gap-x-4 gap-y-2 text-sm",children:[w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"Esc"}),w.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Unfocus input pane / Close modal"}),w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"I"}),w.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Focus input pane"}),w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"\\\\\\"}),w.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Clear input and focus"}),w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"A"}),w.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show all panes"}),w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"N"}),w.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Hide all panes"}),w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"D"}),w.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show differing panes"}),w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"S"}),w.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show your selected panes"}),w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"C"}),w.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Compare Test Runs"}),w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"O"}),w.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Open Options"}),w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"P"}),w.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Open Parser Panes"}),w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"H"}),w.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show help"}),w.jsx("kbd",{className:"bg-gray-100 dark:bg-gray-900 px-2 py-1 rounded text-gray-800 dark:text-gray-200 font-mono",children:"K"}),w.jsx("span",{className:"text-gray-600 dark:text-gray-300 self-center",children:"Show keyboard shortcuts"})]})})]})}):null}const nf="yaml-play-layout";function Dy(){const n=uM();return{panes:ji.map(t=>{const r=n.indexOf(t.id);return{id:t.id,visible:r>=0,order:r>=0?r:1e3+ji.findIndex(s=>s.id===t.id)}}),selectedPaneIds:n}}function bM(){const[n,e]=O.useState(()=>{try{const b=localStorage.getItem(nf);if(b){const S=JSON.parse(b),C=new Set(S.panes.map(N=>N.id)),P=ji.filter(N=>!C.has(N.id)).map((N,D)=>({id:N.id,visible:!1,order:S.panes.length+D}));return{...S,panes:[...S.panes,...P]}}}catch{}return Dy()});O.useEffect(()=>{localStorage.setItem(nf,JSON.stringify(n))},[n]);const t=O.useCallback((b,S)=>{e(C=>{let P;if(S){const D=Math.max(...C.panes.map(B=>B.order));P=C.panes.map(B=>B.id===b?{...B,visible:S,order:D+1}:B)}else P=C.panes.map(D=>D.id===b?{...D,visible:S}:D);const N=P.filter(D=>D.visible).map(D=>D.id);return{...C,panes:P,selectedPaneIds:N}})},[]),r=O.useCallback((b,S)=>{e(C=>{const P=[...C.panes],N=P.findIndex(T=>T.id===b),D=P.findIndex(T=>T.id===S);if(N===-1||D===-1)return C;const[B]=P.splice(N,1);return P.splice(D,0,B),{panes:P.map((T,F)=>({...T,order:F}))}})},[]),s=O.useCallback(()=>{localStorage.removeItem(nf),oM(),e(Dy())},[]),l=O.useCallback(()=>{e(b=>{const S=b.panes.filter(D=>D.visible),C=S.length>0?Math.max(...S.map(D=>D.order)):-1,P=b.panes.filter(D=>!D.visible&&D.id!=="refparse").sort((D,B)=>D.id.localeCompare(B.id)),N=new Map;return P.forEach((D,B)=>{N.set(D.id,C+1+B)}),{...b,panes:b.panes.map(D=>({...D,visible:!0,order:N.has(D.id)?N.get(D.id):D.order}))}})},[]),a=O.useCallback(()=>{e(b=>({...b,panes:b.panes.map(S=>S.id==="refparse"?S:{...S,visible:!1})}))},[]),c=O.useCallback(()=>{e(b=>{const S=new Set(b.selectedPaneIds??[]);return S.size===0?b:{...b,panes:b.panes.map(C=>({...C,visible:S.has(C.id)}))}})},[]),h=O.useCallback(b=>{e(S=>{const C=new Set(b);if(S.panes.filter(B=>!B.visible&&C.has(B.id)).length===0)return S;let D=Math.max(...S.panes.filter(B=>B.visible).map(B=>B.order),-1)+1;return{...S,panes:S.panes.map(B=>!B.visible&&C.has(B.id)?{...B,visible:!0,order:D++}:B)}})},[]),p=O.useCallback((b,S)=>{e(C=>{const P=C.panes.find(L=>L.id===b);if(!P)return C;const N=P.order,T=[...C.panes.map(L=>L.id===S?{...L,visible:!0,order:N+.5}:L)].sort((L,V)=>L.order-V.order).map((L,V)=>({...L,order:V})),F=T.filter(L=>L.visible).map(L=>L.id);return{...C,panes:T,selectedPaneIds:F}})},[]),d=O.useCallback(b=>{e(S=>({...S,inputPaneWidth:b}))},[]),m=O.useCallback(b=>{e(S=>({...S,colorScheme:b}))},[]),v=O.useCallback(b=>{e(S=>({...S,editorType:b}))},[]),x=O.useCallback(()=>n.panes.filter(b=>b.visible).sort((b,S)=>b.order-S.order),[n.panes]);return{layout:n,updatePaneVisibility:t,reorderPanes:r,resetLayout:s,showAllPanes:l,hideAllPanes:a,showSelectedPanes:c,showErrorPanes:h,addPaneAfter:p,getVisiblePanes:x,inputPaneWidth:n.inputPaneWidth??400,setInputPaneWidth:d,colorScheme:n.colorScheme==="dark"?"dark":"light",setColorScheme:m,editorType:n.editorType??"monaco",setEditorType:v}}const Qa=ji.filter(n=>n.id!=="refparse").map(n=>n.id);function SM(){const[n,e]=O.useState(new Map),[t,r]=O.useState(""),s=O.useRef(null),l=O.useCallback(async(h,p)=>{s.current&&s.current.abort(),s.current=new AbortController,e(x=>{const b=new Map(x);return b.set("refparse",{parserId:"refparse",output:"",status:0,loading:!0}),Qa.forEach(S=>{b.set(S,{parserId:S,output:"",status:0,loading:!0})}),b});const d=await P1(h),m=d.output,v=d.status;r(m),e(x=>{const b=new Map(x);return b.set("refparse",{parserId:"refparse",output:d.output,status:d.status,loading:!1,matches:d.status===0,agrees:!0}),b}),await Promise.all(Qa.map(async x=>{const b=ji.find(N=>N.id===x);if(!b)return;const S=await C1(x,h,b.version);let C,P;if(S.status===-1)C=!1,P=!1;else if(x==="refhs"){const N=v===0,D=S.status===0;C=N===D,P=v===0&&C}else v!==0?(C=S.status!==0,P=!1):(C=S.status===0&&E1(m,S.output,x),P=C);e(N=>{const D=new Map(N);return D.set(x,{parserId:x,output:S.output,status:S.status,loading:!1,matches:P,agrees:C,versionMismatch:S.versionMismatch}),D})}))},[]),a=O.useCallback(h=>n.get(h),[n]),c=O.useCallback(()=>{const h=[];let p=0;return Qa.forEach(d=>{const m=n.get(d);if(!m||m.loading)p++;else if(!m.agrees){const v=ni(d);h.push((v==null?void 0:v.name)||d)}}),{total:Qa.length,disagreeing:h.length,disagreeingNames:h,loading:p>0}},[n]);return{results:n,refOutput:t,runAllParsers:l,getResult:a,getAgreementCount:c}}function OM(n=640){const[e,t]=O.useState(typeof window<"u"?window.innerWidth<n:!1);return O.useEffect(()=>{const r=()=>t(window.innerWidth<n);return window.addEventListener("resize",r),()=>window.removeEventListener("resize",r)},[n]),e}function CM(){const[n,e]=O.useState(typeof window<"u"?window.innerWidth>window.innerHeight:!1);return O.useEffect(()=>{const t=()=>e(window.innerWidth>window.innerHeight);return window.addEventListener("resize",t),()=>window.removeEventListener("resize",t)},[]),n}function PM(){const n=window.location.hash.slice(1);if(!n)return null;try{return atob(n)}catch{return null}}function EM(n){const e=btoa(n);window.history.replaceState(null,"",`#${e}`)}function AM(){const[n,e]=O.useState(()=>PM()||Fo),[t,r]=O.useState(!1),[s,l]=O.useState(void 0),[a,c]=O.useState(!1),[h,p]=O.useState(!1),[d,m]=O.useState(!1),[v,x]=O.useState(!1),[b,S]=O.useState(!1),[C,P]=O.useState(null),[N,D]=O.useState(!0),[B,T]=O.useState(!1),F=O.useRef(null),L=O.useRef(""),V=OM(640),q=CM(),{layout:Y,updatePaneVisibility:H,reorderPanes:W,resetLayout:J,showAllPanes:Z,hideAllPanes:U,showSelectedPanes:ue,showErrorPanes:fe,addPaneAfter:X,getVisiblePanes:re,inputPaneWidth:ee,setInputPaneWidth:A,colorScheme:j,setColorScheme:se,editorType:de,setEditorType:xe}=bM(),{results:te,runAllParsers:he,getResult:we,getAgreementCount:Pe}=SM(),ve=re(),{total:Re,disagreeing:Ve,disagreeingNames:st,loading:Ge}=Pe(),ot=ve.map(Ee=>Ee.id).join(","),nn=O.useRef({input:"",panes:""}),Er=Array.from(te.values()).some(Ee=>Ee.versionMismatch);O.useEffect(()=>{const Ee=async()=>{const Fe=await tM();D(Fe)};Ee();const le=setInterval(Ee,1e4);return()=>clearInterval(le)},[]),O.useEffect(()=>{const Ee=Y.panes.find(le=>le.id==="refparse");Ee&&!Ee.visible&&H("refparse",!0)},[Y.panes,H]),O.useEffect(()=>{const Ee=setTimeout(()=>{EM(n)},1e3);return()=>clearTimeout(Ee)},[n]),O.useEffect(()=>{if(nn.current.input===n&&nn.current.panes===ot)return;const Ee=setTimeout(()=>{const le=ot.split(",").filter(Boolean);le.length>0&&(nn.current={input:n,panes:ot},he(n,le))},500);return()=>clearTimeout(Ee)},[n,ot,he]),O.useEffect(()=>{const Ee=le=>{var hi,rn,Ut;const Fe=le.target,En=Fe.tagName==="INPUT"||Fe.tagName==="TEXTAREA"||Fe.closest(".monaco-editor")||Fe.closest(".cm-editor");if(le.key==="Escape"&&En){le.preventDefault(),(hi=F.current)==null||hi.blur();return}if(En)return;const ht=le.key.toUpperCase();if(ht==="I"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),(rn=F.current)==null||rn.focus()),ht==="H"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),m(!0)),ht==="O"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),c(!0)),ht==="P"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),r(!0)),ht==="A"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),Z()),ht==="N"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),U()),ht==="S"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),ue()),ht==="C"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),S(!0)),ht==="K"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(le.preventDefault(),x(!0)),le.key==="\\"&&!le.ctrlKey&&!le.metaKey&&!le.altKey&&(L.current+="\\",L.current==="\\\\\\"&&(le.preventDefault(),e(""),(Ut=F.current)==null||Ut.focus(),L.current="")),ht==="D"&&!le.ctrlKey&&!le.metaKey&&!le.altKey){le.preventDefault();const pn=[];te.forEach(($n,bt)=>{bt!=="refparse"&&$n.agrees===!1&&pn.push(bt)}),pn.length>0&&fe(pn)}ht==="X"&&!le.ctrlKey&&!le.metaKey&&!le.altKey?(L.current+="X",L.current==="XXX"&&(le.preventDefault(),J(),e(Fo),L.current="")):le.key!=="\\"&&(L.current="")};return document.addEventListener("keydown",Ee),()=>document.removeEventListener("keydown",Ee)},[Z,U,ue,fe,te,J]);const ci=Kw(Am(gd,{activationConstraint:{distance:8}}),Am(dd)),ar=O.useCallback(Ee=>{const{active:le,over:Fe}=Ee;if(Fe&&le.id!==Fe.id){if(le.id==="refparse")return;W(le.id,Fe.id)}},[W]),ct=ni("refparse");return V?w.jsxs("div",{className:`h-screen flex flex-col bg-gray-100 dark:bg-gray-900 ${j==="dark"?"dark":""}`,children:[w.jsxs("header",{className:"bg-white dark:bg-gray-800 px-3 py-2 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between flex-shrink-0",children:[w.jsx("h1",{className:"text-lg font-bold text-gray-900 dark:text-white",children:"YAML Playground"}),w.jsxs("div",{className:"relative",children:[w.jsx("button",{onClick:()=>T(!B),className:"p-2 text-gray-700 dark:text-white hover:bg-gray-200 dark:hover:bg-gray-700 rounded transition-colors","aria-label":"Menu",children:w.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),B&&w.jsxs("div",{className:"absolute right-0 mt-2 w-48 bg-white dark:bg-gray-800 border border-gray-300 dark:border-gray-700 rounded-lg shadow-lg z-50",children:[w.jsx("button",{onClick:()=>{m(!0),T(!1)},className:"w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"About"}),w.jsx("button",{onClick:()=>{navigator.clipboard.writeText(window.location.href),T(!1)},className:"w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"Share"}),w.jsx("a",{href:"https://github.com/yaml/yaml-play",target:"_blank",rel:"noopener noreferrer",onClick:()=>T(!1),className:"block w-full px-4 py-3 text-left text-gray-900 dark:text-white hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors",children:"GitHub"})]})]})]}),w.jsxs("div",{className:`flex-1 flex ${q?"flex-row":"flex-col"} overflow-hidden min-h-0`,children:[w.jsx("div",{className:`${q?"w-1/2 h-full":"h-1/2 w-full"} flex flex-col overflow-hidden ${q?"border-r border-gray-300 dark:border-gray-700":"border-b border-gray-300 dark:border-gray-700"}`,children:w.jsx(Cy,{ref:F,value:n,onChange:e,width:ee,onWidthChange:A,colorScheme:j,editorType:de,showBorder:!1,isMobile:!0})}),ct&&w.jsx("div",{className:`${q?"w-1/2 h-full":"h-1/2 w-full"} flex flex-col overflow-hidden`,children:w.jsx(tf,{parser:ct,result:we("refparse"),isDraggable:!1,onSetYamlInput:e,showTestSuite:!1,onAddPane:()=>{l("refparse"),r(!0)}})})]})]}):w.jsxs("div",{className:`h-screen flex flex-col bg-gray-100 dark:bg-gray-900 ${j==="dark"?"dark":""}`,children:[w.jsxs("header",{className:"bg-white dark:bg-gray-800 px-4 py-3 border-b border-gray-300 dark:border-gray-700 flex items-center justify-between",children:[w.jsx("h1",{className:"text-xl font-bold text-gray-900 dark:text-white",children:"YAML Parser Playground"}),w.jsxs("div",{className:"flex items-center gap-2",children:[(!N||Er)&&w.jsx("button",{onClick:()=>p(!0),className:"px-3 py-1.5 bg-yellow-500 text-black font-semibold rounded hover:bg-yellow-400 transition-colors text-sm",children:"Setup"}),w.jsx(xM,{onHelp:()=>m(!0),onOptions:()=>c(!0),onParserPanes:()=>r(!0),onKeyboardShortcuts:()=>x(!0),onSandboxSetup:()=>p(!0),onFactoryReset:()=>{J(),e(Fo)}})]})]}),w.jsx("div",{className:"flex-1 flex overflow-hidden",children:(()=>{const Ee=ve.length>8,le=Ee?ve.filter(Fe=>Fe.id!=="refparse"):ve;return w.jsxs(w.Fragment,{children:[w.jsxs("div",{className:`${Ee?"grid grid-rows-2":"flex flex-col"} h-full border-r border-gray-300 dark:border-gray-700`,style:{width:`${ee}px`,minWidth:"200px",maxWidth:"800px"},children:[w.jsx(Cy,{ref:F,value:n,onChange:e,width:ee,onWidthChange:A,colorScheme:j,editorType:de,showBorder:!1,heightMode:Ee?"half":"full"}),Ee&&ct&&w.jsx("div",{className:"h-full overflow-hidden border-t border-gray-300 dark:border-gray-700",children:w.jsx(tf,{parser:ct,result:we("refparse"),isDraggable:!1,onSetYamlInput:e,onAddPane:()=>{l("refparse"),r(!0)}},"refparse-sidebar")})]},Ee?"left-col-split":"left-col-full"),w.jsx("div",{className:"flex-1 grid grid-cols-4 overflow-y-auto pane-container gap-px bg-gray-300 dark:bg-gray-700 auto-rows-fr",children:w.jsx(Jb,{sensors:ci,collisionDetection:Zw,onDragEnd:ar,children:w.jsx(hS,{items:le.map(Fe=>Fe.id),strategy:uS,children:le.map(Fe=>{const En=ni(Fe.id);if(!En)return null;const ht=Fe.id==="refparse";return w.jsx(tf,{parser:En,result:we(Fe.id),onClose:ht?void 0:()=>H(Fe.id,!1),onAddPane:()=>{l(Fe.id),r(!0)},isDraggable:!ht,onSetYamlInput:e},Fe.id)})})})})]})})()}),w.jsx(dM,{total:Re,disagreeing:Ve,disagreeingNames:st,loading:Ge,sandboxAvailable:N}),w.jsx(pM,{isOpen:t,onClose:()=>{r(!1),l(void 0)},paneStates:Y.panes,onToggleVisibility:H,insertAfterId:s,onAddPaneAfter:X}),w.jsx(yM,{isOpen:a,onClose:()=>c(!1),colorScheme:j,onColorSchemeChange:se,editorType:de,onEditorTypeChange:xe}),w.jsx(vM,{isOpen:h,onClose:()=>{p(!1);const Ee=ot.split(",").filter(Boolean);Ee.length>0&&he(n,Ee)}}),w.jsx(kM,{isOpen:d,onClose:()=>m(!1)}),w.jsx(wM,{isOpen:v,onClose:()=>x(!1)}),w.jsx(R1,{isOpen:b,onClose:()=>S(!1),onSelectParser:Ee=>P(Ee)}),C&&ni(C)&&w.jsx(sd,{isOpen:!0,onClose:()=>P(null),parser:ni(C),onSelectTest:Ee=>e(Ee),forceRerun:!1,onCompare:()=>{P(null),S(!0)}})]})}Tw.createRoot(document.getElementById("root")).render(w.jsx(it.StrictMode,{children:w.jsx(AM,{})}));
//# sourceMappingURL=index-BKhGXlBE.js.map
